/* ==========================================================================
   Emm JS - nightly build 16-08-2019
   ========================================================================== */

/* License
   ========================================================================== */

/**
 * EMM License to be added
 *
 **/



/* Libraries
   ========================================================================== */

/**
 * jQuery JavaScript Library v1.11.1
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * (c) 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Licensed under MIT (http://jquery.org/license)
 *
 * http://jquery.com
 **/

/**
 * Lo-Dash 2.4.1 (Custom Build)
 *
 * Build: `lodash -o ./dist/lodash.compat.js`
 *
 * Based on Underscore.js 1.5.2
 * Licensed under MIT (http://underscorejs.org/LICENSE)
 * (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 *
 * (c) 2012-2013 The Dojo Foundation http://dojofoundation.org/
 * Licensed under MIT (http://lodash.com/license)
 *
 * https://lodash.com/
 **/

 /**
 * D3.js 3.5.5
 *
 * Licensed under MIT (https://github.com/mbostock/d3/blob/master/LICENSE)
 * (c) 2010-2015, Michael Bostock
 *
 * http://d3js.org/
 **/

  /**
 * C3.js 0.4.10
 *
 * Licensed under MIT (https://github.com/masayuki0812/c3/blob/master/LICENSE)
 * (c) 2013 Masayuki Tanaka
 *
 * http://c3js.org/
 **/

/**
 * jQuery Plugins
 *
 * jquery-i18n v1.1.1
 * Licensed under MIT
 * (c) 2010 Dave Perrett
 * https://github.com/recurser/jquery-i18n
 *
 * jquery-migrate v1.2.1
 * Licensed under MIT
 * (c) 2005, 2013 jQuery Foundation, Inc. and other contributors
 * https://github.com/jquery/jquery-migrate
 *
 * jquery-select2 v3.5.2
 * Licensed under Apache License, Version 2.0 & GNU General Public License version 2
 * (c) 2012 Igor Vaynberg
 * https://ivaynberg.github.io/select2/
 *
 * jquery-mousewheel v3.1.9
 * Licensed under MIT
 * (c) 2013 Brandon Aaron
 * http://brandon.aaron.sh
 *
 * jquery-perfect-scrollbar v0.5.7
 * Licensed under MIT
 * (c) 2012, 2014 Hyunje Alex Jun and other contributors
 * https://noraesae.github.io/perfect-scrollbar/
 *
 * jquery DoubleScroll v0.4
 * Dual licensed under the MIT and GPL licenses
 * (c) Pawel Suwala, Antoine Vianey
 * https://github.com/avianey/jqDoubleScroll
 *
 * jquery Endless Scroll
 * Dual licensed under the MIT and GPL licenses
 * (c) 2008-2012 Fred Wu
 * https://github.com/fredwu/jquery-endless-scroll
 *
 * jQuery File Upload Plugin
 * Licensed under the MIT license
 * (c) 2010, Sebastian Tschan
 * https://github.com/blueimp/jQuery-File-Upload
 **/

/**
 * Bootstrap Components v3.2.0
 *
 * dropdown.js
 * modal.js
 * popover.js
 * tooltip.js
 *
 * (c) 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 *
 * http://getbootstrap.com/
 **/

/**
 * Bootstrap Extensions
 *
 * bootstrap-slider v4.8.1
 * Licensed under MIT
 * (c) 2015 Kyle Kemp, Rohit Kalkur, and contributors
 *
 * bootstrap-colorpicker v2.2.0
 * Licensed under Apache License v2.0
 * (c) 2012 Stefan Petre
 *
 **/

/**
 * jQuery UI v1.11.1
 *
 * core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
 *
 * (c) 2014 jQuery Foundation and other contributors
 * Licensed under MIT
 *
 * http://jqueryui.com
 **/

/**
 * Pickadate v3.5.4
 *
 * date.js
 * time.js
 * legacy.js
 *
 * (c) 2014 Amsul, http://amsul.ca
 * Licensed under https://github.com/amsul/pickadate.js/blob/3.5.4/LICENSE.md
 *
 * https://amsul.github.io/pickadate.js
 **/

/**
 * Ace Editor
 *
 * Distributed under the BSD license:

 * Copyright (c) 2010, Ajax.org B.V.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Ajax.org B.V. nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * http://ace.c9.io/
 **/

/**
 * iFrame Resizer v2.6.3
 *
 * (c) 2014 David J. Bradshaw - dave@bradshaw.net
 * Licensed under MIT
 *
 * https://davidjbradshaw.github.io/iframe-resizer/
 **/

/**
 * Toastr (modified version)
 *
 * (c) 2012-2014 John Papa and Hans Fj√§llemark
 * Licensed under MIT
 *
 * https://github.com/CodeSeven/toastr
 **/

/**
 * EmojiOne Area v v3.4.1
 *
 * EmojiOneArea is released under the MIT license.
 *
 * Copyright (c) 2015-2017 Andrey Izman <izmanw@gmail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=a.length,c=ea.type(a);return"function"!==c&&!ea.isWindow(a)&&(!(1!==a.nodeType||!b)||("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a))}function d(a,b,c){if(ea.isFunction(b))return ea.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ea.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ma.test(b))return ea.filter(b,a,c);b=ea.filter(b,a)}return ea.grep(a,function(a){return ea.inArray(a,b)>=0!==c})}function e(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function f(a){var b=ua[a]={};return ea.each(a.match(ta)||[],function(a,c){b[c]=!0}),b}function g(){oa.addEventListener?(oa.removeEventListener("DOMContentLoaded",h,!1),a.removeEventListener("load",h,!1)):(oa.detachEvent("onreadystatechange",h),a.detachEvent("onload",h))}function h(){(oa.addEventListener||"load"===event.type||"complete"===oa.readyState)&&(g(),ea.ready())}function i(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(za,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:ya.test(c)?ea.parseJSON(c):c)}catch(a){}ea.data(a,b,c)}else c=void 0}return c}function j(a){var b;for(b in a)if(("data"!==b||!ea.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function k(a,b,c,d){if(ea.acceptData(a)){var e,f,g=ea.expando,h=a.nodeType,i=h?ea.cache:a,j=h?a[g]:a[g]&&g;if(j&&i[j]&&(d||i[j].data)||void 0!==c||"string"!=typeof b)return j||(j=h?a[g]=W.pop()||ea.guid++:g),i[j]||(i[j]=h?{}:{toJSON:ea.noop}),"object"!=typeof b&&"function"!=typeof b||(d?i[j]=ea.extend(i[j],b):i[j].data=ea.extend(i[j].data,b)),f=i[j],d||(f.data||(f.data={}),f=f.data),void 0!==c&&(f[ea.camelCase(b)]=c),"string"==typeof b?(e=f[b],null==e&&(e=f[ea.camelCase(b)])):e=f,e}}function l(a,b,c){if(ea.acceptData(a)){var d,e,f=a.nodeType,g=f?ea.cache:a,h=f?a[ea.expando]:ea.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){ea.isArray(b)?b=b.concat(ea.map(b,ea.camelCase)):b in d?b=[b]:(b=ea.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!j(d):!ea.isEmptyObject(d))return}(c||(delete g[h].data,j(g[h])))&&(f?ea.cleanData([a],!0):ca.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}function m(){return!0}function n(){return!1}function o(){try{return oa.activeElement}catch(a){}}function p(a){var b=Ka.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function q(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==xa?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==xa?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||ea.nodeName(d,b)?f.push(d):ea.merge(f,q(d,b));return void 0===b||b&&ea.nodeName(a,b)?ea.merge([a],f):f}function r(a){Ea.test(a.type)&&(a.defaultChecked=a.checked)}function s(a,b){return ea.nodeName(a,"table")&&ea.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function t(a){return a.type=(null!==ea.find.attr(a,"type"))+"/"+a.type,a}function u(a){var b=Va.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function v(a,b){for(var c,d=0;null!=(c=a[d]);d++)ea._data(c,"globalEval",!b||ea._data(b[d],"globalEval"))}function w(a,b){if(1===b.nodeType&&ea.hasData(a)){var c,d,e,f=ea._data(a),g=ea._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)ea.event.add(b,c,h[c][d])}g.data&&(g.data=ea.extend({},g.data))}}function x(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ca.noCloneEvent&&b[ea.expando]){e=ea._data(b);for(d in e.events)ea.removeEvent(b,d,e.handle);b.removeAttribute(ea.expando)}"script"===c&&b.text!==a.text?(t(b).text=a.text,u(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ca.html5Clone&&a.innerHTML&&!ea.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Ea.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}}function y(b,c){var d,e=ea(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:ea.css(e[0],"display");return e.detach(),f}function z(a){var b=oa,c=_a[a];return c||(c=y(a,b),"none"!==c&&c||($a=($a||ea("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=($a[0].contentWindow||$a[0].contentDocument).document,b.write(),b.close(),c=y(a,b),$a.detach()),_a[a]=c),c}function A(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}function B(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=mb.length;e--;)if(b=mb[e]+c,b in a)return b;return d}function C(a,b){for(var c,d,e,f=[],g=0,h=a.length;g<h;g++)d=a[g],d.style&&(f[g]=ea._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&Ca(d)&&(f[g]=ea._data(d,"olddisplay",z(d.nodeName)))):(e=Ca(d),(c&&"none"!==c||!e)&&ea._data(d,"olddisplay",e?c:ea.css(d,"display"))));for(g=0;g<h;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function D(a,b,c){var d=ib.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function E(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=ea.css(a,c+Ba[f],!0,e)),d?("content"===c&&(g-=ea.css(a,"padding"+Ba[f],!0,e)),"margin"!==c&&(g-=ea.css(a,"border"+Ba[f]+"Width",!0,e))):(g+=ea.css(a,"padding"+Ba[f],!0,e),"padding"!==c&&(g+=ea.css(a,"border"+Ba[f]+"Width",!0,e)));return g}function F(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=ab(a),g=ca.boxSizing&&"border-box"===ea.css(a,"boxSizing",!1,f);if(e<=0||null==e){if(e=bb(a,b,f),(e<0||null==e)&&(e=a.style[b]),db.test(e))return e;d=g&&(ca.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+E(a,b,c||(g?"border":"content"),d,f)+"px"}function G(a,b,c,d,e){return new G.prototype.init(a,b,c,d,e)}function H(){return setTimeout(function(){nb=void 0}),nb=ea.now()}function I(a,b){var c,d={height:a},e=0;for(b=b?1:0;e<4;e+=2-b)c=Ba[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function J(a,b,c){for(var d,e=(tb[b]||[]).concat(tb["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function K(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&Ca(a),p=ea._data(a,"fxshow");c.queue||(h=ea._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,ea.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=ea.css(a,"display"),k="none"===j?ea._data(a,"olddisplay")||z(a.nodeName):j,"inline"===k&&"none"===ea.css(a,"float")&&(ca.inlineBlockNeedsLayout&&"inline"!==z(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",ca.shrinkWrapBlocks()||l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],pb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||ea.style(a,d)}else j=void 0;if(ea.isEmptyObject(m))"inline"===("none"===j?z(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=ea._data(a,"fxshow",{}),f&&(p.hidden=!o),o?ea(a).show():l.done(function(){ea(a).hide()}),l.done(function(){var b;ea._removeData(a,"fxshow");for(b in m)ea.style(a,b,m[b])});for(d in m)g=J(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function L(a,b){var c,d,e,f,g;for(c in a)if(d=ea.camelCase(c),e=b[d],f=a[c],ea.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ea.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function M(a,b,c){var d,e,f=0,g=sb.length,h=ea.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=nb||H(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ea.extend({},b),opts:ea.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:nb||H(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ea.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(L(k,j.opts.specialEasing);f<g;f++)if(d=sb[f].call(j,a,k,j.opts))return d;return ea.map(k,J,j),ea.isFunction(j.opts.start)&&j.opts.start.call(a,j),ea.fx.timer(ea.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function N(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ta)||[];if(ea.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function O(a,b,c,d){function e(h){var i;return f[h]=!0,ea.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function P(a,b){var c,d,e=ea.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&ea.extend(!0,a,c),a}function Q(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}if(f)return f!==i[0]&&i.unshift(f),c[f]}function R(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(a){return{state:"parsererror",error:g?a:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function S(a,b,c,d){var e;if(ea.isArray(b))ea.each(b,function(b,e){c||Ub.test(a)?d(a,e):S(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ea.type(b))d(a,b);else for(e in b)S(a+"["+e+"]",b[e],c,d)}function T(){try{return new a.XMLHttpRequest}catch(a){}}function U(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}function V(a){return ea.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}var W=[],X=W.slice,Y=W.concat,Z=W.push,$=W.indexOf,_={},aa=_.toString,ba=_.hasOwnProperty,ca={},da="1.11.1",ea=function(a,b){return new ea.fn.init(a,b)},fa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ga=/^-ms-/,ha=/-([\da-z])/gi,ia=function(a,b){return b.toUpperCase()};ea.fn=ea.prototype={jquery:da,constructor:ea,selector:"",length:0,toArray:function(){return X.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:X.call(this)},pushStack:function(a){var b=ea.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ea.each(this,a,b)},map:function(a){return this.pushStack(ea.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:W.sort,splice:W.splice},ea.extend=ea.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||ea.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(ea.isPlainObject(c)||(b=ea.isArray(c)))?(b?(b=!1,f=a&&ea.isArray(a)?a:[]):f=a&&ea.isPlainObject(a)?a:{},g[d]=ea.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},ea.extend({expando:"jQuery"+(da+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===ea.type(a)},isArray:Array.isArray||function(a){return"array"===ea.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!ea.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==ea.type(a)||a.nodeType||ea.isWindow(a))return!1;try{if(a.constructor&&!ba.call(a,"constructor")&&!ba.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}if(ca.ownLast)for(b in a)return ba.call(a,b);for(b in a);return void 0===b||ba.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?_[aa.call(a)]||"object":typeof a},globalEval:function(b){b&&ea.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ga,"ms-").replace(ha,ia)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;f<g&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;f<g&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(fa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ea.merge(d,"string"==typeof a?[a]:a):Z.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if($)return $.call(b,a,c);for(d=b.length,c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;f<g;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return Y.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(e=a[b],b=a,a=e),ea.isFunction(a))return c=X.call(arguments,2),d=function(){return a.apply(b||this,c.concat(X.call(arguments)))},d.guid=a.guid=a.guid||ea.guid++,d},now:function(){return+new Date},support:ca}),ea.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){_["[object "+b+"]"]=b.toLowerCase()});var ja=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=sa.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return _.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName&&b.getElementsByClassName)return _.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ua,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=ta.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return _.apply(c,o.querySelectorAll(p)),c}catch(a){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&typeof a.getElementsByTagName!==V&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?ba.call(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):_.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return ba.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];h<e;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;d<e&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,h<d&&s(a.slice(h,d)),d<e&&s(a=a.slice(d)),d<e&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Z.call(i));r=q(r)}_.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V="undefined",W=1<<31,X={}.hasOwnProperty,Y=[],Z=Y.pop,$=Y.push,_=Y.push,aa=Y.slice,ba=Y.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},ca="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",da="[\\x20\\t\\r\\n\\f]",ea="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",fa=ea.replace("w","w#"),ga="\\["+da+"*("+ea+")(?:"+da+"*([*^$|!~]?=)"+da+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+fa+"))|)"+da+"*\\]",ha=":("+ea+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ga+")*)|.*)\\)|)",ia=new RegExp("^"+da+"+|((?:^|[^\\\\])(?:\\\\.)*)"+da+"+$","g"),ja=new RegExp("^"+da+"*,"+da+"*"),ka=new RegExp("^"+da+"*([>+~]|"+da+")"+da+"*"),la=new RegExp("="+da+"*([^\\]'\"]*?)"+da+"*\\]","g"),ma=new RegExp(ha),na=new RegExp("^"+fa+"$"),oa={ID:new RegExp("^#("+ea+")"),CLASS:new RegExp("^\\.("+ea+")"),TAG:new RegExp("^("+ea.replace("w","w*")+")"),ATTR:new RegExp("^"+ga),PSEUDO:new RegExp("^"+ha),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+da+"*(even|odd|(([+-]|)(\\d*)n|)"+da+"*(?:([+-]|)"+da+"*(\\d+)|))"+da+"*\\)|)","i"),bool:new RegExp("^(?:"+ca+")$","i"),needsContext:new RegExp("^"+da+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+da+"*((?:-\\d)?\\d*)"+da+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=/'|\\/g,va=new RegExp("\\\\([\\da-f]{1,6}"+da+"?|("+da+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{_.apply(Y=aa.call(O.childNodes),O.childNodes),Y[O.childNodes.length].nodeType}catch(a){_={apply:Y.length?function(a,b){$.apply(a,aa.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},F=b.setDocument=function(a){var b,c=a?a.ownerDocument||a:O,d=c.defaultView;return c!==G&&9===c.nodeType&&c.documentElement?(G=c,H=c.documentElement,I=!y(c),d&&d!==d.top&&(d.addEventListener?d.addEventListener("unload",function(){F()},!1):d.attachEvent&&d.attachEvent("onunload",function(){F()})),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=ra.test(c.getElementsByClassName)&&e(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),v.getById=e(function(a){return H.appendChild(a).id=N,!c.getElementsByName||!c.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if(typeof b.getElementById!==V&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==V)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){if(typeof b.getElementsByClassName!==V&&I)return b.getElementsByClassName(a)},K=[],J=[],(v.qsa=ra.test(c.querySelectorAll))&&(e(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&J.push("[*^$]="+da+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+da+"*(?:value|"+ca+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),e(function(a){var b=c.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+da+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=ra.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ha)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=ra.test(H.compareDocumentPosition),M=b||ra.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!v.sortDetached&&b.compareDocumentPosition(a)===d?a===c||a.ownerDocument===O&&M(O,a)?-1:b===c||b.ownerDocument===O&&M(O,b)?1:D?ba.call(D,a)-ba.call(D,b):0:4&d?-1:1)}:function(a,b){if(a===b)return E=!0,0;var d,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===c?-1:b===c?1:f?-1:h?1:D?ba.call(D,a)-ba.call(D,b):0;if(f===h)return g(a,b);for(d=a;d=d.parentNode;)i.unshift(d);for(d=b;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},c):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(la,"='$1']"),v.matchesSelector&&I&&(!K||!K.test(c))&&(!J||!J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(a){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&X.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+da+")"+a+"("+da+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=ba.call(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ia,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[c<0?c+b:c]}),even:j(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){d&&!(e=ja.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in w.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));
if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(va,wa),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(va,wa),ta.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return _.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,ta.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ca,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);ea.find=ja,ea.expr=ja.selectors,ea.expr[":"]=ea.expr.pseudos,ea.unique=ja.uniqueSort,ea.text=ja.getText,ea.isXMLDoc=ja.isXML,ea.contains=ja.contains;var ka=ea.expr.match.needsContext,la=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ma=/^.[^:#\[\.,]*$/;ea.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ea.find.matchesSelector(d,a)?[d]:[]:ea.find.matches(a,ea.grep(b,function(a){return 1===a.nodeType}))},ea.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(ea(a).filter(function(){for(b=0;b<e;b++)if(ea.contains(d[b],this))return!0}));for(b=0;b<e;b++)ea.find(a,d[b],c);return c=this.pushStack(e>1?ea.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&ka.test(a)?ea(a):a||[],!1).length}});var na,oa=a.document,pa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,qa=ea.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:pa.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||na).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof ea?b[0]:b,ea.merge(this,ea.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:oa,!0)),la.test(c[1])&&ea.isPlainObject(b))for(c in b)ea.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=oa.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return na.find(a);this.length=1,this[0]=d}return this.context=oa,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ea.isFunction(a)?"undefined"!=typeof na.ready?na.ready(a):a(ea):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),ea.makeArray(a,this))};qa.prototype=ea.fn,na=ea(oa);var ra=/^(?:parents|prev(?:Until|All))/,sa={children:!0,contents:!0,next:!0,prev:!0};ea.extend({dir:function(a,b,c){for(var d=[],e=a[b];e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!ea(e).is(c));)1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),ea.fn.extend({has:function(a){var b,c=ea(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(ea.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=ka.test(a)||"string"!=typeof a?ea(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ea.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?ea.unique(f):f)},index:function(a){return a?"string"==typeof a?ea.inArray(this[0],ea(a)):ea.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(ea.unique(ea.merge(this.get(),ea(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ea.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ea.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ea.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return ea.dir(a,"nextSibling")},prevAll:function(a){return ea.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ea.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ea.dir(a,"previousSibling",c)},siblings:function(a){return ea.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ea.sibling(a.firstChild)},contents:function(a){return ea.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ea.merge([],a.childNodes)}},function(a,b){ea.fn[a]=function(c,d){var e=ea.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ea.filter(d,e)),this.length>1&&(sa[a]||(e=ea.unique(e)),ra.test(a)&&(e=e.reverse())),this.pushStack(e)}});var ta=/\S+/g,ua={};ea.Callbacks=function(a){a="string"==typeof a?ua[a]||f(a):ea.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(c=a.memory&&f,d=!0,g=h||0,h=0,e=i.length,b=!0;i&&g<e;g++)if(i[g].apply(f[0],f[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var d=i.length;!function b(c){ea.each(c,function(c,d){var e=ea.type(d);"function"===e?a.unique&&l.has(d)||i.push(d):d&&d.length&&"string"!==e&&b(d)})}(arguments),b?e=i.length:c&&(h=d,k(c))}return this},remove:function(){return i&&ea.each(arguments,function(a,c){for(var d;(d=ea.inArray(c,i,d))>-1;)i.splice(d,1),b&&(d<=e&&e--,d<=g&&g--)}),this},has:function(a){return a?ea.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],e=0,this},disable:function(){return i=j=c=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,c){return!i||d&&!j||(c=c||[],c=[a,c.slice?c.slice():c],b?j.push(c):k(c)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},ea.extend({Deferred:function(a){var b=[["resolve","done",ea.Callbacks("once memory"),"resolved"],["reject","fail",ea.Callbacks("once memory"),"rejected"],["notify","progress",ea.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ea.Deferred(function(c){ea.each(b,function(b,f){var g=ea.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&ea.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ea.extend(a,d):d}},e={};return d.pipe=d.then,ea.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=X.call(arguments),g=f.length,h=1!==g||a&&ea.isFunction(a.promise)?g:0,i=1===h?a:ea.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?X.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);e<g;e++)f[e]&&ea.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var va;ea.fn.ready=function(a){return ea.ready.promise().done(a),this},ea.extend({isReady:!1,readyWait:1,holdReady:function(a){a?ea.readyWait++:ea.ready(!0)},ready:function(a){if(a===!0?!--ea.readyWait:!ea.isReady){if(!oa.body)return setTimeout(ea.ready);ea.isReady=!0,a!==!0&&--ea.readyWait>0||(va.resolveWith(oa,[ea]),ea.fn.triggerHandler&&(ea(oa).triggerHandler("ready"),ea(oa).off("ready")))}}}),ea.ready.promise=function(b){if(!va)if(va=ea.Deferred(),"complete"===oa.readyState)setTimeout(ea.ready);else if(oa.addEventListener)oa.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1);else{oa.attachEvent("onreadystatechange",h),a.attachEvent("onload",h);var c=!1;try{c=null==a.frameElement&&oa.documentElement}catch(a){}c&&c.doScroll&&!function a(){if(!ea.isReady){try{c.doScroll("left")}catch(b){return setTimeout(a,50)}g(),ea.ready()}}()}return va.promise(b)};var wa,xa="undefined";for(wa in ea(ca))break;ca.ownLast="0"!==wa,ca.inlineBlockNeedsLayout=!1,ea(function(){var a,b,c,d;c=oa.getElementsByTagName("body")[0],c&&c.style&&(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xa&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ca.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=oa.createElement("div");if(null==ca.deleteExpando){ca.deleteExpando=!0;try{delete a.test}catch(a){ca.deleteExpando=!1}}a=null}(),ea.acceptData=function(a){var b=ea.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return(1===c||9===c)&&(!b||b!==!0&&a.getAttribute("classid")===b)};var ya=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,za=/([A-Z])/g;ea.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?ea.cache[a[ea.expando]]:a[ea.expando],!!a&&!j(a)},data:function(a,b,c){return k(a,b,c)},removeData:function(a,b){return l(a,b)},_data:function(a,b,c){return k(a,b,c,!0)},_removeData:function(a,b){return l(a,b,!0)}}),ea.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=ea.data(f),1===f.nodeType&&!ea._data(f,"parsedAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=ea.camelCase(d.slice(5)),i(f,d,e[d])));ea._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){ea.data(this,a)}):arguments.length>1?this.each(function(){ea.data(this,a,b)}):f?i(f,a,ea.data(f,a)):void 0},removeData:function(a){return this.each(function(){ea.removeData(this,a)})}}),ea.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=ea._data(a,b),c&&(!d||ea.isArray(c)?d=ea._data(a,b,ea.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=ea.queue(a,b),d=c.length,e=c.shift(),f=ea._queueHooks(a,b),g=function(){ea.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ea._data(a,c)||ea._data(a,c,{empty:ea.Callbacks("once memory").add(function(){ea._removeData(a,b+"queue"),ea._removeData(a,c)})})}}),ea.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?ea.queue(this[0],a):void 0===b?this:this.each(function(){var c=ea.queue(this,a,b);ea._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&ea.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ea.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=ea.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=ea._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ba=["Top","Right","Bottom","Left"],Ca=function(a,b){return a=b||a,"none"===ea.css(a,"display")||!ea.contains(a.ownerDocument,a)},Da=ea.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===ea.type(c)){e=!0;for(h in c)ea.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,ea.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(ea(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ea=/^(?:checkbox|radio)$/i;!function(){var a=oa.createElement("input"),b=oa.createElement("div"),c=oa.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ca.leadingWhitespace=3===b.firstChild.nodeType,ca.tbody=!b.getElementsByTagName("tbody").length,ca.htmlSerialize=!!b.getElementsByTagName("link").length,ca.html5Clone="<:nav></:nav>"!==oa.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),ca.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",ca.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",ca.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,ca.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){ca.noCloneEvent=!1}),b.cloneNode(!0).click()),null==ca.deleteExpando){ca.deleteExpando=!0;try{delete b.test}catch(a){ca.deleteExpando=!1}}}(),function(){var b,c,d=oa.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(ca[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),ca[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var Fa=/^(?:input|select|textarea)$/i,Ga=/^key/,Ha=/^(?:mouse|pointer|contextmenu)|click/,Ia=/^(?:focusinfocus|focusoutblur)$/,Ja=/^([^.]*)(?:\.(.+)|)$/;ea.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ea._data(a);if(q){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=ea.guid++),(g=q.events)||(g=q.events={}),(k=q.handle)||(k=q.handle=function(a){return typeof ea===xa||a&&ea.event.triggered===a.type?void 0:ea.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(ta)||[""],h=b.length;h--;)f=Ja.exec(b[h])||[],n=p=f[1],o=(f[2]||"").split(".").sort(),n&&(j=ea.event.special[n]||{},n=(e?j.delegateType:j.bindType)||n,j=ea.event.special[n]||{},l=ea.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&ea.expr.match.needsContext.test(e),namespace:o.join(".")},i),(m=g[n])||(m=g[n]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,o,k)!==!1||(a.addEventListener?a.addEventListener(n,k,!1):a.attachEvent&&a.attachEvent("on"+n,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),ea.event.global[n]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ea.hasData(a)&&ea._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ta)||[""],j=b.length;j--;)if(h=Ja.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ea.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ea.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ea.event.remove(a,n+b[j],c,d,!0);ea.isEmptyObject(k)&&(delete q.handle,ea._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||oa],n=ba.call(b,"type")?b.type:b,o=ba.call(b,"namespace")?b.namespace.split("."):[];if(h=k=d=d||oa,3!==d.nodeType&&8!==d.nodeType&&!Ia.test(n+ea.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),g=n.indexOf(":")<0&&"on"+n,b=b[ea.expando]?b:new ea.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:ea.makeArray(c,[b]),j=ea.event.special[n]||{},e||!j.trigger||j.trigger.apply(d,c)!==!1)){if(!e&&!j.noBubble&&!ea.isWindow(d)){for(i=j.delegateType||n,Ia.test(i+n)||(h=h.parentNode);h;h=h.parentNode)m.push(h),k=h;k===(d.ownerDocument||oa)&&m.push(k.defaultView||k.parentWindow||a)}for(l=0;(h=m[l++])&&!b.isPropagationStopped();)b.type=l>1?i:j.bindType||n,f=(ea._data(h,"events")||{})[b.type]&&ea._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&ea.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=n,!e&&!b.isDefaultPrevented()&&(!j._default||j._default.apply(m.pop(),c)===!1)&&ea.acceptData(d)&&g&&d[n]&&!ea.isWindow(d)){k=d[g],k&&(d[g]=null),ea.event.triggered=n;try{d[n]()}catch(a){}ea.event.triggered=void 0,k&&(d[g]=k)}return b.result}},dispatch:function(a){a=ea.event.fix(a);var b,c,d,e,f,g=[],h=X.call(arguments),i=(ea._data(this,"events")||{})[a.type]||[],j=ea.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=ea.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,f=0;(d=e.handlers[f++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(d.namespace)||(a.handleObj=d,a.data=d.data,c=((ea.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,h),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;f<h;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?ea(c,this).index(i)>=0:ea.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[ea.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ha.test(e)?this.mouseHooks:Ga.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ea.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||oa),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||oa,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==o()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===o()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ea.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return ea.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ea.extend(new ea.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ea.event.trigger(e,null,b):ea.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ea.removeEvent=oa.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===xa&&(a[d]=null),a.detachEvent(d,c))},ea.Event=function(a,b){return this instanceof ea.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?m:n):this.type=a,b&&ea.extend(this,b),this.timeStamp=a&&a.timeStamp||ea.now(),void(this[ea.expando]=!0)):new ea.Event(a,b)},ea.Event.prototype={isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=m,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=m,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=m,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},ea.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){ea.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||ea.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ca.submitBubbles||(ea.event.special.submit={setup:function(){return!ea.nodeName(this,"form")&&void ea.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=ea.nodeName(b,"input")||ea.nodeName(b,"button")?b.form:void 0;c&&!ea._data(c,"submitBubbles")&&(ea.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),ea._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ea.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return!ea.nodeName(this,"form")&&void ea.event.remove(this,"._submit")}}),ca.changeBubbles||(ea.event.special.change={setup:function(){return Fa.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(ea.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ea.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ea.event.simulate("change",this,a,!0)})),!1):void ea.event.add(this,"beforeactivate._change",function(a){var b=a.target;Fa.test(b.nodeName)&&!ea._data(b,"changeBubbles")&&(ea.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ea.event.simulate("change",this.parentNode,a,!0)}),ea._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return ea.event.remove(this,"._change"),!Fa.test(this.nodeName)}}),ca.focusinBubbles||ea.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){ea.event.simulate(b,a.target,ea.event.fix(a),!0)};ea.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=ea._data(d,b);e||d.addEventListener(a,c,!0),ea._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=ea._data(d,b)-1;e?ea._data(d,b,e):(d.removeEventListener(a,c,!0),ea._removeData(d,b))}}}),ea.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=n;else if(!d)return this;return 1===e&&(g=d,d=function(a){return ea().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=ea.guid++)),this.each(function(){ea.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,ea(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=n),this.each(function(){ea.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){ea.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return ea.event.trigger(a,b,c,!0)}});var Ka="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",La=/ jQuery\d+="(?:null|\d+)"/g,Ma=new RegExp("<(?:"+Ka+")[\\s/>]","i"),Na=/^\s+/,Oa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pa=/<([\w:]+)/,Qa=/<tbody/i,Ra=/<|&#?\w+;/,Sa=/<(?:script|style|link)/i,Ta=/checked\s*(?:[^=]|=\s*.checked.)/i,Ua=/^$|\/(?:java|ecma)script/i,Va=/^true\/(.*)/,Wa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ca.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ya=p(oa),Za=Ya.appendChild(oa.createElement("div"));Xa.optgroup=Xa.option,Xa.tbody=Xa.tfoot=Xa.colgroup=Xa.caption=Xa.thead,Xa.th=Xa.td,ea.extend({clone:function(a,b,c){var d,e,f,g,h,i=ea.contains(a.ownerDocument,a);if(ca.html5Clone||ea.isXMLDoc(a)||!Ma.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Za.innerHTML=a.outerHTML,Za.removeChild(f=Za.firstChild)),!(ca.noCloneEvent&&ca.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ea.isXMLDoc(a)))for(d=q(f),h=q(a),g=0;null!=(e=h[g]);++g)d[g]&&x(e,d[g]);if(b)if(c)for(h=h||q(a),d=d||q(f),g=0;null!=(e=h[g]);g++)w(e,d[g]);else w(a,f);return d=q(f,"script"),d.length>0&&v(d,!i&&q(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=p(b),n=[],o=0;o<l;o++)if(f=a[o],f||0===f)if("object"===ea.type(f))ea.merge(n,f.nodeType?[f]:f);else if(Ra.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Pa.exec(f)||["",""])[1].toLowerCase(),k=Xa[i]||Xa._default,h.innerHTML=k[1]+f.replace(Oa,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ca.leadingWhitespace&&Na.test(f)&&n.push(b.createTextNode(Na.exec(f)[0])),!ca.tbody)for(f="table"!==i||Qa.test(f)?"<table>"!==k[1]||Qa.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ea.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ea.merge(n,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else n.push(b.createTextNode(f));for(h&&m.removeChild(h),ca.appendChecked||ea.grep(q(n,"input"),r),o=0;f=n[o++];)if((!d||ea.inArray(f,d)===-1)&&(g=ea.contains(f.ownerDocument,f),h=q(m.appendChild(f),"script"),g&&v(h),c))for(e=0;f=h[e++];)Ua.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ea.expando,i=ea.cache,j=ca.deleteExpando,k=ea.event.special;null!=(c=a[g]);g++)if((b||ea.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ea.event.remove(c,d):ea.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==xa?c.removeAttribute(h):c[h]=null,W.push(e))}}}),ea.fn.extend({text:function(a){return Da(this,function(a){return void 0===a?ea.text(this):this.empty().append((this[0]&&this[0].ownerDocument||oa).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?ea.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||ea.cleanData(q(c)),c.parentNode&&(b&&ea.contains(c.ownerDocument,c)&&v(q(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ea.cleanData(q(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ea.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return ea.clone(this,a,b)})},html:function(a){return Da(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(La,""):void 0;if("string"==typeof a&&!Sa.test(a)&&(ca.htmlSerialize||!Ma.test(a))&&(ca.leadingWhitespace||!Na.test(a))&&!Xa[(Pa.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Oa,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(ea.cleanData(q(b,!1)),b.innerHTML=a);b=0}catch(a){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,ea.cleanData(q(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=Y.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=ea.isFunction(m);if(n||j>1&&"string"==typeof m&&!ca.checkClone&&Ta.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(h=ea.buildFragment(a,this[0].ownerDocument,!1,this),c=h.firstChild,1===h.childNodes.length&&(h=c),c)){for(f=ea.map(q(h,"script"),t),e=f.length;i<j;i++)d=h,i!==l&&(d=ea.clone(d,!0,!0),e&&ea.merge(f,q(d,"script"))),b.call(this[i],d,i);if(e)for(g=f[f.length-1].ownerDocument,ea.map(f,u),i=0;i<e;i++)d=f[i],Ua.test(d.type||"")&&!ea._data(d,"globalEval")&&ea.contains(g,d)&&(d.src?ea._evalUrl&&ea._evalUrl(d.src):ea.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Wa,"")));h=c=null}return this}}),ea.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ea.fn[a]=function(a){for(var c,d=0,e=[],f=ea(a),g=f.length-1;d<=g;d++)c=d===g?this:this.clone(!0),ea(f[d])[b](c),Z.apply(e,c.get());return this.pushStack(e)}});var $a,_a={};!function(){var a;ca.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=oa.getElementsByTagName("body")[0],c&&c.style?(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xa&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(oa.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var ab,bb,cb=/^margin/,db=new RegExp("^("+Aa+")(?!px)[a-z%]+$","i"),eb=/^(top|right|bottom|left)$/;a.getComputedStyle?(ab=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},bb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ab(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||ea.contains(a.ownerDocument,a)||(g=ea.style(a,b)),db.test(g)&&cb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):oa.documentElement.currentStyle&&(ab=function(a){
return a.currentStyle},bb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ab(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),db.test(g)&&!eb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"}),function(){function b(){var b,c,d,e;c=oa.getElementsByTagName("body")[0],c&&c.style&&(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f=g=!1,i=!0,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(b,null)||{}).top,g="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,e=b.appendChild(oa.createElement("div")),e.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",b.style.width="1px",i=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=b.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",h=0===e[0].offsetHeight,h&&(e[0].style.display="",e[1].style.display="none",h=0===e[0].offsetHeight),c.removeChild(d))}var c,d,e,f,g,h,i;c=oa.createElement("div"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=c.getElementsByTagName("a")[0],d=e&&e.style,d&&(d.cssText="float:left;opacity:.5",ca.opacity="0.5"===d.opacity,ca.cssFloat=!!d.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",ca.clearCloneStyle="content-box"===c.style.backgroundClip,ca.boxSizing=""===d.boxSizing||""===d.MozBoxSizing||""===d.WebkitBoxSizing,ea.extend(ca,{reliableHiddenOffsets:function(){return null==h&&b(),h},boxSizingReliable:function(){return null==g&&b(),g},pixelPosition:function(){return null==f&&b(),f},reliableMarginRight:function(){return null==i&&b(),i}}))}(),ea.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var fb=/alpha\([^)]*\)/i,gb=/opacity\s*=\s*([^)]*)/,hb=/^(none|table(?!-c[ea]).+)/,ib=new RegExp("^("+Aa+")(.*)$","i"),jb=new RegExp("^([+-])=("+Aa+")","i"),kb={position:"absolute",visibility:"hidden",display:"block"},lb={letterSpacing:"0",fontWeight:"400"},mb=["Webkit","O","Moz","ms"];ea.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:ca.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=ea.camelCase(b),i=a.style;if(b=ea.cssProps[h]||(ea.cssProps[h]=B(i,h)),g=ea.cssHooks[b]||ea.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=jb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(ea.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||ea.cssNumber[h]||(c+="px"),ca.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(a){}}},css:function(a,b,c,d){var e,f,g,h=ea.camelCase(b);return b=ea.cssProps[h]||(ea.cssProps[h]=B(a.style,h)),g=ea.cssHooks[b]||ea.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=bb(a,b,d)),"normal"===f&&b in lb&&(f=lb[b]),""===c||c?(e=parseFloat(f),c===!0||ea.isNumeric(e)?e||0:f):f}}),ea.each(["height","width"],function(a,b){ea.cssHooks[b]={get:function(a,c,d){if(c)return hb.test(ea.css(a,"display"))&&0===a.offsetWidth?ea.swap(a,kb,function(){return F(a,b,d)}):F(a,b,d)},set:function(a,c,d){var e=d&&ab(a);return D(a,c,d?E(a,b,d,ca.boxSizing&&"border-box"===ea.css(a,"boxSizing",!1,e),e):0)}}}),ca.opacity||(ea.cssHooks.opacity={get:function(a,b){return gb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ea.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ea.trim(f.replace(fb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=fb.test(f)?f.replace(fb,e):f+" "+e)}}),ea.cssHooks.marginRight=A(ca.reliableMarginRight,function(a,b){if(b)return ea.swap(a,{display:"inline-block"},bb,[a,"marginRight"])}),ea.each({margin:"",padding:"",border:"Width"},function(a,b){ea.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+Ba[d]+b]=f[d]||f[d-2]||f[0];return e}},cb.test(a)||(ea.cssHooks[a+b].set=D)}),ea.fn.extend({css:function(a,b){return Da(this,function(a,b,c){var d,e,f={},g=0;if(ea.isArray(b)){for(d=ab(a),e=b.length;g<e;g++)f[b[g]]=ea.css(a,b[g],!1,d);return f}return void 0!==c?ea.style(a,b,c):ea.css(a,b)},a,b,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Ca(this)?ea(this).show():ea(this).hide()})}}),ea.Tween=G,G.prototype={constructor:G,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ea.cssNumber[c]?"":"px")},cur:function(){var a=G.propHooks[this.prop];return a&&a.get?a.get(this):G.propHooks._default.get(this)},run:function(a){var b,c=G.propHooks[this.prop];return this.options.duration?this.pos=b=ea.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):G.propHooks._default.set(this),this}},G.prototype.init.prototype=G.prototype,G.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ea.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ea.fx.step[a.prop]?ea.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ea.cssProps[a.prop]]||ea.cssHooks[a.prop])?ea.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},G.propHooks.scrollTop=G.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ea.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ea.fx=G.prototype.init,ea.fx.step={};var nb,ob,pb=/^(?:toggle|show|hide)$/,qb=new RegExp("^(?:([+-])=|)("+Aa+")([a-z%]*)$","i"),rb=/queueHooks$/,sb=[K],tb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=qb.exec(b),f=e&&e[3]||(ea.cssNumber[a]?"":"px"),g=(ea.cssNumber[a]||"px"!==f&&+d)&&qb.exec(ea.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,ea.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};ea.Animation=ea.extend(M,{tweener:function(a,b){ea.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],tb[c]=tb[c]||[],tb[c].unshift(b)},prefilter:function(a,b){b?sb.unshift(a):sb.push(a)}}),ea.speed=function(a,b,c){var d=a&&"object"==typeof a?ea.extend({},a):{complete:c||!c&&b||ea.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ea.isFunction(b)&&b};return d.duration=ea.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ea.fx.speeds?ea.fx.speeds[d.duration]:ea.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){ea.isFunction(d.old)&&d.old.call(this),d.queue&&ea.dequeue(this,d.queue)},d},ea.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Ca).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ea.isEmptyObject(a),f=ea.speed(b,c,d),g=function(){var b=M(this,ea.extend({},a),f);(e||ea._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=ea.timers,g=ea._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&rb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||ea.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ea._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ea.timers,g=d?d.length:0;for(c.finish=!0,ea.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ea.each(["toggle","show","hide"],function(a,b){var c=ea.fn[b];ea.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(I(b,!0),a,d,e)}}),ea.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ea.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ea.timers=[],ea.fx.tick=function(){var a,b=ea.timers,c=0;for(nb=ea.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||ea.fx.stop(),nb=void 0},ea.fx.timer=function(a){ea.timers.push(a),a()?ea.fx.start():ea.timers.pop()},ea.fx.interval=13,ea.fx.start=function(){ob||(ob=setInterval(ea.fx.tick,ea.fx.interval))},ea.fx.stop=function(){clearInterval(ob),ob=null},ea.fx.speeds={slow:600,fast:200,_default:400},ea.fn.delay=function(a,b){return a=ea.fx?ea.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=oa.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=oa.createElement("select"),e=c.appendChild(oa.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",ca.getSetAttribute="t"!==b.className,ca.style=/top/.test(d.getAttribute("style")),ca.hrefNormalized="/a"===d.getAttribute("href"),ca.checkOn=!!a.value,ca.optSelected=e.selected,ca.enctype=!!oa.createElement("form").enctype,c.disabled=!0,ca.optDisabled=!e.disabled,a=oa.createElement("input"),a.setAttribute("value",""),ca.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),ca.radioValue="t"===a.value}();var ub=/\r/g;ea.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=ea.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,ea(this).val()):a,null==e?e="":"number"==typeof e?e+="":ea.isArray(e)&&(e=ea.map(e,function(a){return null==a?"":a+""})),b=ea.valHooks[this.type]||ea.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=ea.valHooks[e.type]||ea.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ub,""):null==c?"":c)}}}),ea.extend({valHooks:{option:{get:function(a){var b=ea.find.attr(a,"value");return null!=b?b:ea.trim(ea.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&(ca.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!ea.nodeName(c.parentNode,"optgroup"))){if(b=ea(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ea.makeArray(b),g=e.length;g--;)if(d=e[g],ea.inArray(ea.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(a){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),ea.each(["radio","checkbox"],function(){ea.valHooks[this]={set:function(a,b){if(ea.isArray(b))return a.checked=ea.inArray(ea(a).val(),b)>=0}},ca.checkOn||(ea.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var vb,wb,xb=ea.expr.attrHandle,yb=/^(?:checked|selected)$/i,zb=ca.getSetAttribute,Ab=ca.input;ea.fn.extend({attr:function(a,b){return Da(this,ea.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ea.removeAttr(this,a)})}}),ea.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===xa?ea.prop(a,b,c):(1===f&&ea.isXMLDoc(a)||(b=b.toLowerCase(),d=ea.attrHooks[b]||(ea.expr.match.bool.test(b)?wb:vb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=ea.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void ea.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ta);if(f&&1===a.nodeType)for(;c=f[e++];)d=ea.propFix[c]||c,ea.expr.match.bool.test(c)?Ab&&zb||!yb.test(c)?a[d]=!1:a[ea.camelCase("default-"+c)]=a[d]=!1:ea.attr(a,c,""),a.removeAttribute(zb?c:d)},attrHooks:{type:{set:function(a,b){if(!ca.radioValue&&"radio"===b&&ea.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),wb={set:function(a,b,c){return b===!1?ea.removeAttr(a,c):Ab&&zb||!yb.test(c)?a.setAttribute(!zb&&ea.propFix[c]||c,c):a[ea.camelCase("default-"+c)]=a[c]=!0,c}},ea.each(ea.expr.match.bool.source.match(/\w+/g),function(a,b){var c=xb[b]||ea.find.attr;xb[b]=Ab&&zb||!yb.test(b)?function(a,b,d){var e,f;return d||(f=xb[b],xb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,xb[b]=f),e}:function(a,b,c){if(!c)return a[ea.camelCase("default-"+b)]?b.toLowerCase():null}}),Ab&&zb||(ea.attrHooks.value={set:function(a,b,c){return ea.nodeName(a,"input")?void(a.defaultValue=b):vb&&vb.set(a,b,c)}}),zb||(vb={set:function(a,b,c){var d=a.getAttributeNode(c);if(d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c))return b}},xb.id=xb.name=xb.coords=function(a,b,c){var d;if(!c)return(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},ea.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);if(c&&c.specified)return c.value},set:vb.set},ea.attrHooks.contenteditable={set:function(a,b,c){vb.set(a,""!==b&&b,c)}},ea.each(["width","height"],function(a,b){ea.attrHooks[b]={set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}}})),ca.style||(ea.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var Bb=/^(?:input|select|textarea|button|object)$/i,Cb=/^(?:a|area)$/i;ea.fn.extend({prop:function(a,b){return Da(this,ea.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ea.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(a){}})}}),ea.extend({propFix:{for:"htmlFor",class:"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!ea.isXMLDoc(a),f&&(b=ea.propFix[b]||b,e=ea.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=ea.find.attr(a,"tabindex");return b?parseInt(b,10):Bb.test(a.nodeName)||Cb.test(a.nodeName)&&a.href?0:-1}}}}),ca.hrefNormalized||ea.each(["href","src"],function(a,b){ea.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),ca.optSelected||(ea.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),ea.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ea.propFix[this.toLowerCase()]=this}),ca.enctype||(ea.propFix.enctype="encoding");var Db=/[\t\r\n\f]/g;ea.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(ea.isFunction(a))return this.each(function(b){ea(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(ta)||[];h<i;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Db," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=ea.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(ea.isFunction(a))return this.each(function(b){ea(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(ta)||[];h<i;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Db," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?ea.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):ea.isFunction(a)?this.each(function(c){ea(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=ea(this),f=a.match(ta)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else c!==xa&&"boolean"!==c||(this.className&&ea._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ea._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Db," ").indexOf(b)>=0)return!0;return!1}}),ea.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ea.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ea.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Eb=ea.now(),Fb=/\?/,Gb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ea.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=ea.trim(b+"");return e&&!ea.trim(e.replace(Gb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():ea.error("Invalid JSON: "+b)},ea.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(a){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||ea.error("Invalid XML: "+b),c};var Hb,Ib,Jb=/#.*$/,Kb=/([?&])_=[^&]*/,Lb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Mb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nb=/^(?:GET|HEAD)$/,Ob=/^\/\//,Pb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Qb={},Rb={},Sb="*/".concat("*");try{Ib=location.href}catch(a){Ib=oa.createElement("a"),Ib.href="",Ib=Ib.href}Hb=Pb.exec(Ib.toLowerCase())||[],ea.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ib,type:"GET",isLocal:Mb.test(Hb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ea.parseJSON,"text xml":ea.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?P(P(a,ea.ajaxSettings),b):P(ea.ajaxSettings,a)},ajaxPrefilter:N(Qb),ajaxTransport:N(Rb),ajax:function(a,b){function c(a,b,c,d){var e,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),j=void 0,g=d||"",v.readyState=a>0?4:0,e=a>=200&&a<300||304===a,c&&(s=Q(l,v,c)),s=R(l,s,v,e),e?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(ea.lastModified[f]=u),u=v.getResponseHeader("etag"),u&&(ea.etag[f]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,e=!r)):(r=w,!a&&w||(w="error",a<0&&(a=0))),v.status=a,v.statusText=(b||w)+"",e?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,i&&n.trigger(e?"ajaxSuccess":"ajaxError",[v,l,e?k:r]),p.fireWith(m,[v,w]),i&&(n.trigger("ajaxComplete",[v,l]),--ea.active||ea.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=ea.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?ea(m):ea.event,o=ea.Deferred(),p=ea.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!k)for(k={};b=Lb.exec(g);)k[b[1].toLowerCase()]=b[2];b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(t<2)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return j&&j.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||Ib)+"").replace(Jb,"").replace(Ob,Hb[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=ea.trim(l.dataType||"*").toLowerCase().match(ta)||[""],null==l.crossDomain&&(d=Pb.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Hb[1]&&d[2]===Hb[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Hb[3]||("http:"===Hb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=ea.param(l.data,l.traditional)),O(Qb,l,b,v),2===t)return v;i=l.global,i&&0===ea.active++&&ea.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Nb.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Fb.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Kb.test(f)?f.replace(Kb,"$1_="+Eb++):f+(Fb.test(f)?"&":"?")+"_="+Eb++)),l.ifModified&&(ea.lastModified[f]&&v.setRequestHeader("If-Modified-Since",ea.lastModified[f]),ea.etag[f]&&v.setRequestHeader("If-None-Match",ea.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Sb+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)v.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(e in{success:1,error:1,complete:1})v[e](l[e]);if(j=O(Rb,l,b,v)){v.readyState=1,i&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,j.send(r,c)}catch(a){if(!(t<2))throw a;c(-1,a)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return ea.get(a,b,c,"json")},getScript:function(a,b){return ea.get(a,void 0,b,"script")}}),ea.each(["get","post"],function(a,b){ea[b]=function(a,c,d,e){return ea.isFunction(c)&&(e=e||d,d=c,c=void 0),ea.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),ea.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ea.fn[b]=function(a){return this.on(b,a)}}),ea._evalUrl=function(a){return ea.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},ea.fn.extend({wrapAll:function(a){if(ea.isFunction(a))return this.each(function(b){ea(this).wrapAll(a.call(this,b))});if(this[0]){var b=ea(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ea.isFunction(a)?this.each(function(b){ea(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ea(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ea.isFunction(a);return this.each(function(c){ea(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ea.nodeName(this,"body")||ea(this).replaceWith(this.childNodes)}).end()}}),ea.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!ca.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||ea.css(a,"display"))},ea.expr.filters.visible=function(a){return!ea.expr.filters.hidden(a)};var Tb=/%20/g,Ub=/\[\]$/,Vb=/\r?\n/g,Wb=/^(?:submit|button|image|reset|file)$/i,Xb=/^(?:input|select|textarea|keygen)/i;ea.param=function(a,b){var c,d=[],e=function(a,b){b=ea.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=ea.ajaxSettings&&ea.ajaxSettings.traditional),ea.isArray(a)||a.jquery&&!ea.isPlainObject(a))ea.each(a,function(){e(this.name,this.value)});else for(c in a)S(c,a[c],b,e);return d.join("&").replace(Tb,"+")},ea.fn.extend({serialize:function(){return ea.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ea.prop(this,"elements");return a?ea.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ea(this).is(":disabled")&&Xb.test(this.nodeName)&&!Wb.test(a)&&(this.checked||!Ea.test(a))}).map(function(a,b){var c=ea(this).val();return null==c?null:ea.isArray(c)?ea.map(c,function(a){return{name:b.name,value:a.replace(Vb,"\r\n")}}):{name:b.name,value:c.replace(Vb,"\r\n")}}).get()}}),ea.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&T()||U()}:T;var Yb=0,Zb={},$b=ea.ajaxSettings.xhr();a.ActiveXObject&&ea(a).on("unload",function(){for(var a in Zb)Zb[a](void 0,!0)}),ca.cors=!!$b&&"withCredentials"in $b,$b=ca.ajax=!!$b,$b&&ea.ajaxTransport(function(a){if(!a.crossDomain||ca.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Yb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Zb[g],b=void 0,f.onreadystatechange=ea.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(a){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Zb[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}}),ea.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ea.globalEval(a),a}}}),ea.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ea.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=oa.head||ea("head")[0]||oa.documentElement;return{send:function(d,e){b=oa.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _b=[],ac=/(=)\?(?=&|$)|\?\?/;ea.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_b.pop()||ea.expando+"_"+Eb++;return this[a]=!0,a}}),ea.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ac.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=ea.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ac,"$1"+e):b.jsonp!==!1&&(b.url+=(Fb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||ea.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_b.push(e)),g&&ea.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),ea.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||oa;var d=la.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ea.buildFragment([a],b,e),e&&e.length&&ea(e).remove(),ea.merge([],d.childNodes))};var bc=ea.fn.load;ea.fn.load=function(a,b,c){if("string"!=typeof a&&bc)return bc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=ea.trim(a.slice(h,a.length)),a=a.slice(0,h)),ea.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&ea.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?ea("<div>").append(ea.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},ea.expr.filters.animated=function(a){return ea.grep(ea.timers,function(b){return a===b.elem}).length};var cc=a.document.documentElement;ea.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=ea.css(a,"position"),l=ea(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=ea.css(a,"top"),i=ea.css(a,"left"),j=("absolute"===k||"fixed"===k)&&ea.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),ea.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},ea.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){ea.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,ea.contains(b,e)?(typeof e.getBoundingClientRect!==xa&&(d=e.getBoundingClientRect()),c=V(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ea.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ea.nodeName(a[0],"html")||(c=a.offset()),c.top+=ea.css(a[0],"borderTopWidth",!0),c.left+=ea.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ea.css(d,"marginTop",!0),left:b.left-c.left-ea.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||cc;a&&!ea.nodeName(a,"html")&&"static"===ea.css(a,"position");)a=a.offsetParent;return a||cc})}}),ea.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);ea.fn[a]=function(d){return Da(this,function(a,d,e){var f=V(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?ea(f).scrollLeft():e,c?e:ea(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),ea.each(["top","left"],function(a,b){ea.cssHooks[b]=A(ca.pixelPosition,function(a,c){if(c)return c=bb(a,b),db.test(c)?ea(a).position()[b]+"px":c})}),ea.each({Height:"height",Width:"width"},function(a,b){ea.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){ea.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return Da(this,function(b,c,d){var e;return ea.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?ea.css(b,c,g):ea.style(b,c,d,g);
},b,f?d:void 0,f,null)}})}),ea.fn.size=function(){return this.length},ea.fn.andSelf=ea.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ea});var dc=a.jQuery,ec=a.$;return ea.noConflict=function(b){return a.$===ea&&(a.$=ec),b&&a.jQuery===ea&&(a.jQuery=dc),ea},typeof b===xa&&(a.jQuery=a.$=ea),ea}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,!(!b.href||!f||"map"!==e.nodeName.toLowerCase())&&(g=a("img[usemap='#"+f+"']")[0],!!g&&c(g))):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}function d(a){for(var b,c;a.length&&a[0]!==document;){if(b=a.css("position"),("absolute"===b||"relative"===b||"fixed"===b)&&(c=parseInt(a.css("zIndex"),10),!isNaN(c)&&0!==c))return c;a=a.parent()}return 0}function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.regional.en=a.extend(!0,{},this.regional[""]),this.regional["en-US"]=a.extend(!0,{},this.regional.en),this.dpDiv=f(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function f(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",g)}function g(){a.datepicker._isDisabledDatepicker(r.inline?r.dpDiv.parent()[0]:r.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))}function h(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}function i(a){return function(){var b=this.element.val();a.apply(this,arguments),this._refresh(),b!==this.element.val()&&this._trigger("change")}}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return(!d||"static"!==b.css("position"))&&e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length)for(var c,d,e=a(this[0]);e.length&&e[0]!==document;){if(c=e.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d))return d;e=e.parent()}return 0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;f.length>e;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}};var j=0,k=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(a){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var c,d,e=k.call(arguments,1),f=0,g=e.length;g>f;f++)for(c in e[f])d=e[f][c],e[f].hasOwnProperty(c)&&void 0!==d&&(b[c]=a.isPlainObject(d)?a.isPlainObject(b[c])?a.widget.extend({},b[c],d):a.widget.extend({},d):d);return b},a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(e){var f="string"==typeof e,g=k.call(arguments,1),h=this;return e=!f&&g.length?a.widget.extend.apply(null,[e].concat(g)):e,f?this.each(function(){var c,f=a.data(this,d);return"instance"===e?(h=f,!1):f?a.isFunction(f[e])&&"_"!==e.charAt(0)?(c=f[e].apply(f,g),c!==f&&void 0!==c?(h=c&&c.jquery?h.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+e+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+e+"'")}):this.each(function(){var b=a.data(this,d);b?(b.option(e||{}),b._init&&b._init()):a.data(this,d,new c(e,this))}),h}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.uuid=j++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;d.length-1>f;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.widget;var l=!1;a(document).mouseup(function(){l=!1}),a.widget("ui.mouse",{version:"1.11.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!l){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,d=1===b.which,e=!("string"!=typeof this.options.cancel||!b.target.nodeName)&&a(b.target).closest(this.options.cancel).length;return!(d&&!e&&this._mouseCapture(b))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),l=!0,!0))}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):b.which?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),l=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function b(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function c(b,c){return parseInt(a.css(b,c),10)||0}function d(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var e,f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==e)return e;var b,c,d=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=d.children()[0];return a("body").append(d),b=f.offsetWidth,d.css("overflow","scroll"),c=f.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),e=b-c},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d||e?c.width():c.outerWidth(),height:d||e?c.height():c.outerHeight()}}},a.fn.position=function(e){if(!e||!e.of)return o.apply(this,arguments);e=a.extend({},e);var n,p,q,r,s,t,u=a(e.of),v=a.position.getWithinInfo(e.within),w=a.position.getScrollInfo(v),x=(e.collision||"flip").split(" "),y={};return t=d(u),u[0].preventDefault&&(e.at="left top"),p=t.width,q=t.height,r=t.offset,s=a.extend({},r),a.each(["my","at"],function(){var a,b,c=(e[this]||"").split(" ");1===c.length&&(c=j.test(c[0])?c.concat(["center"]):k.test(c[0])?["center"].concat(c):["center","center"]),c[0]=j.test(c[0])?c[0]:"center",c[1]=k.test(c[1])?c[1]:"center",a=l.exec(c[0]),b=l.exec(c[1]),y[this]=[a?a[0]:0,b?b[0]:0],e[this]=[m.exec(c[0])[0],m.exec(c[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?s.left+=p:"center"===e.at[0]&&(s.left+=p/2),"bottom"===e.at[1]?s.top+=q:"center"===e.at[1]&&(s.top+=q/2),n=b(y.at,p,q),s.left+=n[0],s.top+=n[1],this.each(function(){var d,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=c(this,"marginLeft"),t=c(this,"marginTop"),z=l+o+c(this,"marginRight")+w.width,A=m+t+c(this,"marginBottom")+w.height,B=a.extend({},s),C=b(y.my,k.outerWidth(),k.outerHeight());"right"===e.my[0]?B.left-=l:"center"===e.my[0]&&(B.left-=l/2),"bottom"===e.my[1]?B.top-=m:"center"===e.my[1]&&(B.top-=m/2),B.left+=C[0],B.top+=C[1],f||(B.left=i(B.left),B.top=i(B.top)),d={marginLeft:o,marginTop:t},a.each(["left","top"],function(b,c){a.ui.position[x[b]]&&a.ui.position[x[b]][c](B,{targetWidth:p,targetHeight:q,elemWidth:l,elemHeight:m,collisionPosition:d,collisionWidth:z,collisionHeight:A,offset:[n[0]+C[0],n[1]+C[1]],my:e.my,at:e.at,within:v,elem:k})}),e.using&&(j=function(a){var b=r.left-B.left,c=b+p-l,d=r.top-B.top,f=d+q-m,i={target:{element:u,left:r.left,top:r.top,width:p,height:q},element:{element:k,left:B.left,top:B.top,width:l,height:m},horizontal:0>c?"left":b>0?"right":"center",vertical:0>f?"top":d>0?"bottom":"middle"};l>p&&p>h(b+c)&&(i.horizontal="center"),m>q&&q>h(d+f)&&(i.vertical="middle"),i.important=g(h(b),h(c))>g(h(d),h(f))?"horizontal":"vertical",e.using.call(this,a,i)}),k.offset(a.extend(B,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+f-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+f-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||h(k)>c)&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||l>h(d))&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||h(k)>d)&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||l>h(c))&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,g,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(g in d)b.style[g]=d[g];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px;",e=a(i).offset().left,f=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(),a.ui.position,a.widget("ui.accordion",{version:"1.11.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=a(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),b.collapsible||b.active!==!1&&null!=b.active||(b.active=0),this._processPanels(),0>b.active&&(b.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),a=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){return"active"===a?void this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||this.options.active!==!1||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),void("disabled"===a&&(this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b))))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1]}f&&(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b=this.options;this._processPanels(),b.active===!1&&b.collapsible===!0||!this.headers.length?(b.active=!1,this.active=a()):b.active===!1?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var b,c=this.options,d=c.heightStyle,e=this.element.parent();this.active=this._findActive(c.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var b=a(this),c=b.uniqueId().attr("id"),d=b.next(),e=d.uniqueId().attr("id");b.attr("aria-controls",e),d.attr("aria-labelledby",c)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(c.event),"fill"===d?(b=e.height(),this.element.siblings(":visible").each(function(){var c=a(this),d=c.css("position");"absolute"!==d&&"fixed"!==d&&(b-=c.outerHeight(!0))}),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===d&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).css("height","").height())}).height(b))},_activate:function(b){var c=this._findActive(b)[0];c!==this.active[0]&&(c=c||this.active[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={keydown:"_keydown"};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,c),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e[0]===d[0],g=f&&c.collapsible,h=g?a():e.next(),i=d.next(),j={oldHeader:d,oldPanel:i,newHeader:g?a():e,newPanel:h};b.preventDefault(),f&&!c.collapsible||this._trigger("beforeActivate",b,j)===!1||(c.active=!g&&this.headers.index(e),this.active=f?a():e,this._toggle(j),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),f||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=c,this.prevHide=d,this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b)),d.attr({"aria-hidden":"true"}),d.prev().attr("aria-selected","false"),c.length&&d.length?d.prev().attr({tabIndex:-1,"aria-expanded":"false"}):c.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),c.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(a,b,c){var d,e,f,g=this,h=0,i=a.length&&(!b.length||a.index()<b.index()),j=this.options.animate||{},k=i&&j.down||j,l=function(){g._toggleComplete(c)};return"number"==typeof k&&(f=k),"string"==typeof k&&(e=k),e=e||k.easing||j.easing,f=f||k.duration||j.duration,b.length?a.length?(d=a.show().outerHeight(),b.animate(this.hideProps,{duration:f,easing:e,step:function(a,b){b.now=Math.round(a)}}),void a.hide().animate(this.showProps,{duration:f,easing:e,complete:l,step:function(a,c){c.now=Math.round(a),"height"!==c.prop?h+=c.now:"content"!==g.options.heightStyle&&(c.now=Math.round(d-b.outerHeight()-h),h=0)}})):b.animate(this.hideProps,f,e,l):a.animate(this.showProps,f,e,l)},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),b.length&&(b.parent()[0].className=b.parent()[0].className),this._trigger("activate",null,a)}}),a.widget("ui.menu",{version:"1.11.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},"click .ui-menu-item":function(b){var c=a(b.target);!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll",
"mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.find(this.options.items).eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&this.collapseAll(a),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d,e,f,g,h,i=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:i=!1,e=this.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1,clearTimeout(this.filterTimer),f===e?g=!0:f=e+f,h=RegExp("^"+c(f),"i"),d=this.activeMenu.find(this.options.items).filter(function(){return h.test(a(this).text())}),d=g&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),h=RegExp("^"+c(f),"i"),d=this.activeMenu.find(this.options.items).filter(function(){return h.test(a(this).text())})),d.length?(this.focus(b,d),d.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}i&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(a):this.select(a))},refresh:function(){var b,c,d=this,e=this.options.icons.submenu,f=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),f.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),c=b.parent(),d=a("<span>").addClass("ui-menu-icon ui-icon "+e).data("ui-menu-submenu-carat",!0);c.attr("aria-haspopup","true").prepend(d),b.attr("aria-labelledby",c.attr("id"))}),b=f.add(this.element),c=b.find(this.options.items),c.not(".ui-menu-item").each(function(){var b=a(this);d._isDivider(b)&&b.addClass("ui-widget-content ui-menu-divider")}),c.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),c.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),"disabled"===a&&this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.outerHeight(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(b){return!a(b.target).closest(".ui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.find(this.options.items)[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),0>c.offset().top-d-e}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items).first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}}),a.widget("ui.autocomplete",{version:"1.11.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=!!f||!g&&this.element.prop("isContentEditable"),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,void(c=!0);b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&d.preventDefault());if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,void a.preventDefault()):void this._searchTimeout(a)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),void this._change(a))}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){var d,e;return this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)})):(e=c.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",b,{item:e})&&b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(e.value),d=c.item.attr("aria-label")||e.value,void(d&&a.trim(d).length&&(this.liveRegion.children().hide(),a("<div>").text(d).appendTo(this.liveRegion))))},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){var b=this.term===this._value(),c=this.menu.element.is(":visible"),d=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;(!b||b&&!c&&!d)&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({},b,{label:b.label||b.value,value:b.value||b.label})})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").text(c.label).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var c;this._superApply(arguments),this.options.disabled||this.cancelSearch||(c=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults,this.liveRegion.children().hide(),a("<div>").text(c).appendTo(this.liveRegion))}}),a.ui.autocomplete;var m,n="ui-button ui-widget ui-state-default ui-corner-all",o="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",p=function(){var b=a(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},q=function(b){var c=b.name,d=b.form,e=a([]);return c&&(c=c.replace(/'/g,"\\'"),e=d?a(d).find("[name='"+c+"'][type=radio]"):a("[name='"+c+"'][type=radio]",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"1.11.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,p),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,c=this.options,d="checkbox"===this.type||"radio"===this.type,e=d?"":"ui-state-active";null===c.label&&(c.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(n).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){c.disabled||this===m&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){c.disabled||a(this).removeClass(e)}).bind("click"+this.eventNamespace,function(a){c.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),d&&this.element.bind("change"+this.eventNamespace,function(){b.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return!c.disabled&&void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(c.disabled)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var d=b.element[0];q(d).not(d).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return!c.disabled&&(a(this).addClass("ui-state-active"),m=this,void b.document.one("mouseup",function(){m=null}))}).bind("mouseup"+this.eventNamespace,function(){return!c.disabled&&void a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){return!c.disabled&&void((b.keyCode===a.ui.keyCode.SPACE||b.keyCode===a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",c.disabled),this._resetButton()},_determineButtonType:function(){var a,b,c;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(n+" ui-state-active "+o).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?(this.widget().toggleClass("ui-state-disabled",!!b),this.element.prop("disabled",!!b),void(b&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")))):void this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?q(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(o),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{version:"1.11.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b),this._super(a,b)},refresh:function(){var b="rtl"===this.element.css("direction"),c=this.element.find(this.options.items),d=c.filter(":ui-button");c.not(":ui-button").button(),d.button("refresh"),this.buttons=c.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),a.ui.button,a.extend(a.ui,{datepicker:{version:"1.11.1"}});var r;a.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return h(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var d=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:d,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?f(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),("focus"===d||"both"===d)&&b.focus(this._showDatepicker),("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;a.length>e;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,e,f){var g,i,j,k,l,m=this._dialogInst;return m||(this.uuid+=1,g="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+g+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),m=this._dialogInst=this._newInst(this._dialogInput,!1),m.settings={},a.data(this._dialogInput[0],"datepicker",m)),h(m.settings,e||{}),c=c&&c.constructor===Date?this._formatDate(m,c):c,this._dialogInput.val(c),this._pos=f?f.length?f:[f.pageX,f.pageY]:null,this._pos||(i=document.documentElement.clientWidth,j=document.documentElement.clientHeight,k=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[i/2-100+k,j/2-150+l]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),m.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],"datepicker",m),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,"datepicker");d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,"datepicker"),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===c||"span"===c)&&d.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;this._disabledInputs.length>b;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(a){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(b,c,d){var e,f,g,i,j=this._getInst(b);return 2===arguments.length&&"string"==typeof c?"defaults"===c?a.extend({},a.datepicker._defaults):j?"all"===c?a.extend({},j.settings):this._get(j,c):null:(e=c||{},"string"==typeof c&&(e={},e[c]=d),void(j&&(this._curInst===j&&this._hideDatepicker(),f=this._getDateDatepicker(b,!0),g=this._getMinMaxDate(j,"min"),i=this._getMinMaxDate(j,"max"),h(j.settings,e),null!==g&&void 0!==e.dateFormat&&void 0===e.minDate&&(j.settings.minDate=this._formatDate(j,g)),null!==i&&void 0!==e.dateFormat&&void 0===e.maxDate&&(j.settings.maxDate=this._formatDate(j,i)),"disabled"in e&&(e.disabled?this._disableDatepicker(b):this._enableDatepicker(b)),this._attachments(a(b),j),this._autoSize(j),this._setDate(j,f),this._updateAlternate(j),this._updateDatepicker(j))))},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c,d,e=a.datepicker._getInst(b.target);return a.datepicker._get(e,"constrainInput")?(c=a.datepicker._possibleChars(a.datepicker._get(e,"dateFormat")),
d=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||" ">d||!c||c.indexOf(d)>-1):void 0},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(a){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,e,f,g,i,j,k;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),e=a.datepicker._get(c,"beforeShow"),f=e?e.apply(b,[b,c]):{},f!==!1&&(h(c.settings,f),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),g=!1,a(b).parents().each(function(){return g|="fixed"===a(this).css("position"),!g}),i={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),i=a.datepicker._checkOffset(c,i,g),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"}),c.inline||(j=a.datepicker._get(c,"showAnim"),k=a.datepicker._get(c,"duration"),c.dpDiv.css("z-index",d(a(b))+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[j]?c.dpDiv.show(j,a.datepicker._get(c,"showOptions"),k):c.dpDiv[j||"show"](j?k:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,r=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b);var c,d=this._getNumberOfMonths(b),e=d[1],f=17,h=b.dpDiv.find("."+this._dayOverClass+" a");h.length>0&&g.apply(h.get(0)),b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",f*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,g=this._curInst;!g||b&&g!==a.data(b,"datepicker")||this._datepickerShowing&&(c=this._get(g,"showAnim"),d=this._get(g,"duration"),e=function(){a.datepicker._tidyDialog(g)},a.effects&&(a.effects.effect[c]||a.effects[c])?g.dpDiv.hide(c,a.datepicker._get(g,"showOptions"),d,e):g.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(g,"onClose"),f&&f.apply(g.input?g.input[0]:null,[g.input?g.input.val():"",g]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id!==a.datepicker._mainDivId&&0===c.parents("#"+a.datepicker._mainDivId).length&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";if(c="object"==typeof c?""+c:c+"",""===c)return null;var e,f,g,h,i=0,j=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,k="string"!=typeof j?j:(new Date).getFullYear()%100+parseInt(j,10),l=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,m=(d?d.dayNames:null)||this._defaults.dayNames,n=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,o=(d?d.monthNames:null)||this._defaults.monthNames,p=-1,q=-1,r=-1,s=-1,t=!1,u=function(a){var c=b.length>e+1&&b.charAt(e+1)===a;return c&&e++,c},v=function(a){var b=u(a),d="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e="y"===a?d:1,f=RegExp("^\\d{"+e+","+d+"}"),g=c.substring(i).match(f);if(!g)throw"Missing number at position "+i;return i+=g[0].length,parseInt(g[0],10)},w=function(b,d,e){var f=-1,g=a.map(u(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(g,function(a,b){var d=b[1];return c.substr(i,d.length).toLowerCase()===d.toLowerCase()?(f=b[0],i+=d.length,!1):void 0}),-1!==f)return f+1;throw"Unknown name at position "+i},x=function(){if(c.charAt(i)!==b.charAt(e))throw"Unexpected literal at position "+i;i++};for(e=0;b.length>e;e++)if(t)"'"!==b.charAt(e)||u("'")?x():t=!1;else switch(b.charAt(e)){case"d":r=v("d");break;case"D":w("D",l,m);break;case"o":s=v("o");break;case"m":q=v("m");break;case"M":q=w("M",n,o);break;case"y":p=v("y");break;case"@":h=new Date(v("@")),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"!":h=new Date((v("!")-this._ticksTo1970)/1e4),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"'":u("'")?x():t=!0;break;default:x()}if(c.length>i&&(g=c.substr(i),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===p?p=(new Date).getFullYear():100>p&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(k>=p?0:-100)),s>-1)for(q=1,r=s;f=this._getDaysInMonth(p,q-1),!(f>=r);)q++,r-=f;if(h=this._daylightSavingAdjust(new Date(p,q-1,r)),h.getFullYear()!==p||h.getMonth()+1!==q||h.getDate()!==r)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=a.length>d+1&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;c>d.length;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;a.length>d;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=a.length>b+1&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;a.length>b;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(a){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(a){}for(var d=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(c);i;){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=7*parseInt(i[1],10);break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,a.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,a.datepicker._getDaysInMonth(e,f))}i=h.exec(c)}return new Date(e,f,g)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"==""+g?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,aa=a.drawYear;if(0>_&&(_+=12,aa--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(aa,_,1))>b;)_--,0>_&&(_=11,aa--);for(a.drawMonth=_,a.drawYear=aa,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(aa,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,aa,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(aa,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,aa,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;U[0]>w;w++){for(x="",this.maxRows=4,y=0;U[1]>y;y++){if(z=this._daylightSavingAdjust(new Date(aa,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,aa,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th scope='col'"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(aa,_),aa===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(aa,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(aa,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,aa++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||e.getMonth()>=k)&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||h>=b.getFullYear())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new e,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.11.1",a.datepicker,a.widget("ui.draggable",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(b){var c=this.document[0],d=this.options;try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(a){}return!(this.helper||d.disabled||a(b.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(b),!!this.handle&&(a(d.iframeFix===!0?"iframe":d.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0))},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return!this.options.handle||!!a(b.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],
this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c,d){var e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;e.css("cursor")&&(f._cursor=e.css("cursor")),e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;e._cursor&&a("body").css("cursor",e._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("opacity")&&(f._opacity=e.css("opacity")),e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;e._opacity&&a(c.helper).css("opacity",e._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1)),c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){var e=d.options,f=!1,g=d.scrollParentNotHidden[0],h=d.document[0];g!==h&&"HTML"!==g.tagName?(e.axis&&"x"===e.axis||(d.overflowOffset.top+g.offsetHeight-b.pageY<e.scrollSensitivity?g.scrollTop=f=g.scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(g.scrollTop=f=g.scrollTop-e.scrollSpeed)),e.axis&&"y"===e.axis||(d.overflowOffset.left+g.offsetWidth-b.pageX<e.scrollSensitivity?g.scrollLeft=f=g.scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(g.scrollLeft=f=g.scrollLeft-e.scrollSpeed))):(e.axis&&"x"===e.axis||(b.pageY-a(h).scrollTop()<e.scrollSensitivity?f=a(h).scrollTop(a(h).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(h).scrollTop())<e.scrollSensitivity&&(f=a(h).scrollTop(a(h).scrollTop()+e.scrollSpeed))),e.axis&&"y"===e.axis||(b.pageX-a(h).scrollLeft()<e.scrollSensitivity?f=a(h).scrollLeft(a(h).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(h).scrollLeft())<e.scrollSensitivity&&(f=a(h).scrollLeft(a(h).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[],a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--)i=d.snapElements[m].left,j=i+d.snapElements[m].width,k=d.snapElements[m].top,l=k+d.snapElements[m].height,i-p>r||q>j+p||k-p>t||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)?(d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1):("inner"!==o.snapMode&&(e=p>=Math.abs(k-t),f=p>=Math.abs(l-s),g=p>=Math.abs(i-r),h=p>=Math.abs(j-q),e&&(c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top-d.margins.top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top-d.margins.top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left-d.margins.left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left-d.margins.left)),n=e||f||g||h,"outer"!==o.snapMode&&(e=p>=Math.abs(k-s),f=p>=Math.abs(l-t),g=p>=Math.abs(i-q),h=p>=Math.abs(j-r),e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top-d.margins.top),f&&(c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top-d.margins.top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left-d.margins.left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left-d.margins.left)),!d.snapElements[m].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=e||f||g||h||n)}}),a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});g.length&&(e=parseInt(a(g[0]).css("zIndex"),10)||0,a(g).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+g.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("zIndex")&&(f._zIndex=e.css("zIndex")),e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}}),a.ui.draggable,a.widget("ui.resizable",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseInt(a,10)||0},_isNumber:function(a){return!isNaN(parseInt(a,10))},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0||(b[d]=1,e=b[d]>0,b[d]=0,e)},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;b.length>c;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=this.element.children(this.handles[c]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var c,d,e,f=this.options,g=this.element;return this.resizing=!0,this._renderProxy(),c=this._num(this.helper.css("left")),d=this._num(this.helper.css("top")),f.containment&&(c+=a(f.containment).scrollLeft()||0,d+=a(f.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:c,top:d},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()},this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()},this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()},this.originalPosition={left:c,top:d},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1,e=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===e?this.axis+"-resize":e),g.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d,e=this.originalMousePosition,f=this.axis,g=b.pageX-e.left||0,h=b.pageY-e.top||0,i=this._change[f];return this._updatePrevProperties(),!!i&&(c=i.apply(this,[b,g,h]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),d=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(d)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges()),!1)},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&this._hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};return this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px"),this.helper.css(a),a},_updateVirtualBoundaries:function(a){var b,c,d,e,f,g=this.options;f={minWidth:this._isNumber(g.minWidth)?g.minWidth:0,maxWidth:this._isNumber(g.maxWidth)?g.maxWidth:1/0,minHeight:this._isNumber(g.minHeight)?g.minHeight:0,maxHeight:this._isNumber(g.maxHeight)?g.maxHeight:1/0},(this._aspectRatio||a)&&(b=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,c=f.maxHeight*this.aspectRatio,e=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),d>f.minHeight&&(f.minHeight=d),f.maxWidth>c&&(f.maxWidth=c),f.maxHeight>e&&(f.maxHeight=e)),this._vBoundaries=f},_updateCache:function(a){this.offset=this.helper.offset(),this._isNumber(a.left)&&(this.position.left=a.left),this._isNumber(a.top)&&(this.position.top=a.top),this._isNumber(a.height)&&(this.size.height=a.height),this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;return this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===d&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===d&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,d=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,e=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,i=this.position.top+this.size.height,j=/sw|nw|w/.test(c),k=/nw|ne|n/.test(c);return f&&(a.width=b.minWidth),g&&(a.height=b.minHeight),d&&(a.width=b.maxWidth),e&&(a.height=b.maxHeight),f&&j&&(a.left=h-b.minWidth),d&&j&&(a.left=h-b.maxWidth),g&&k&&(a.top=i-b.minHeight),e&&k&&(a.top=i-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_getPaddingPlusBorderDimensions:function(a){for(var b=0,c=[],d=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],e=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];4>b;b++)c[b]=parseInt(d[b],10)||0,c[b]+=parseInt(e[b],10)||0;return{height:c[0]+c[2],width:c[1]+c[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a,b=0,c=this.helper||this.element;this._proportionallyResizeElements.length>b;b++)a=this._proportionallyResizeElements[b],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(a)),a.css({height:c.height()-this.outerDimensions.height||0,width:c.width()-this.outerDimensions.width||0})},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).resizable("instance"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&c._hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,c,d,e,f,g,h,i=a(this).resizable("instance"),j=i.options,k=i.element,l=j.containment,m=l instanceof a?l.get(0):/parent/.test(l)?k.parent().get(0):l;m&&(i.containerElement=a(m),/document/.test(l)||l===document?(i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(m),c=[],a(["Top","Right","Left","Bottom"]).each(function(a,d){c[a]=i._num(b.css("padding"+d))}),i.containerOffset=b.offset(),i.containerPosition=b.position(),i.containerSize={height:b.innerHeight()-c[3],width:b.innerWidth()-c[1]},d=i.containerOffset,e=i.containerSize.height,f=i.containerSize.width,g=i._hasScroll(m,"left")?m.scrollWidth:f,h=i._hasScroll(m)?m.scrollHeight:e,i.parentData={element:m,left:d.left,top:d.top,width:g,height:h}))},resize:function(b){var c,d,e,f,g=a(this).resizable("instance"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement,n=!0;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio,n=!1),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio,n=!1),g.position.top=g._helper?i.top:0),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f?(g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top):(g.offset.left=g.element.offset().left,g.offset.top=g.element.offset().top),c=Math.abs(g.sizeDiff.width+(g._helper?g.offset.left-l.left:g.offset.left-i.left)),d=Math.abs(g.sizeDiff.height+(g._helper?g.offset.top-l.top:g.offset.top-i.top)),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio,n=!1)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio,n=!1)),n||(g.position.left=g.prevPosition.left,g.position.top=g.prevPosition.top,g.size.width=g.prevSize.width,g.size.height=g.prevSize.height)},stop:function(){var b=a(this).resizable("instance"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).resizable("instance"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).resizable("instance"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b,c=a(this).resizable("instance"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis,i="number"==typeof d.grid?[d.grid,d.grid]:d.grid,j=i[0]||1,k=i[1]||1,l=Math.round((e.width-f.width)/j)*j,m=Math.round((e.height-f.height)/k)*k,n=f.width+l,o=f.height+m,p=d.maxWidth&&n>d.maxWidth,q=d.maxHeight&&o>d.maxHeight,r=d.minWidth&&d.minWidth>n,s=d.minHeight&&d.minHeight>o;d.grid=i,r&&(n+=j),s&&(o+=k),p&&(n-=j),q&&(o-=k),/^(se|s|e)$/.test(h)?(c.size.width=n,c.size.height=o):/^(ne)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.top=g.top-m):/^(sw)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.left=g.left-l):((0>=o-k||0>=n-j)&&(b=c._getPaddingPlusBorderDimensions(this)),o-k>0?(c.size.height=o,c.position.top=g.top-m):(o=k-b.height,c.size.height=o,c.position.top=g.top+f.height-o),n-j>0?(c.size.width=n,c.position.left=g.left-l):(n=k-b.height,c.size.width=n,c.position.left=g.left+f.width-n))}}),a.ui.resizable,a.widget("ui.dialog",{version:"1.11.1",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c,d=this;if(this._isOpen&&this._trigger("beforeClose",b)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{c=this.document[0].activeElement,c&&"body"!==c.nodeName.toLowerCase()&&a(c).blur()}catch(a){}this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",b)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,c){var d=!1,e=this.uiDialog.siblings(".ui-front:visible").map(function(){return+a(this).css("z-index")}).get(),f=Math.max.apply(null,e);return f>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",f+1),d=!0),d&&!c&&this._trigger("focus",b),d},open:function(){var b=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var a=this._focusedElement;a||(a=this.element.find("[autofocus]")),a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable();
}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===a.ui.keyCode.TAB&&!b.isDefaultPrevented()){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(this._delay(function(){e.focus()}),b.preventDefault()):(this._delay(function(){d.focus()}),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=a("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(b),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,d.click=function(){e.apply(b.element[0],arguments)},f={icons:d.icons,text:d.showText},delete d.icons,delete d.showText,a("<button></button>",d).button(f).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("ui-dialog-dragging"),c._blockFrames(),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){var g=f.offset.left-c.document.scrollLeft(),h=f.offset.top-c.document.scrollTop();d.position={my:"left top",at:"left"+(g>=0?"+":"")+g+" top"+(h>=0?"+":"")+h,of:c.window},a(this).removeClass("ui-dialog-dragging"),c._unblockFrames(),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){a(this).addClass("ui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){var g=c.uiDialog.offset(),h=g.left-c.document.scrollLeft(),i=g.top-c.document.scrollTop();d.height=c.uiDialog.height(),d.width=c.uiDialog.width(),d.position={my:"left top",at:"left"+(h>=0?"+":"")+h+" top"+(i>=0?"+":"")+i,of:c.window},a(this).removeClass("ui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget(),this._focusedElement=a(b.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),c=a.inArray(this,b);-1!==c&&b.splice(c,1)},_trackingInstances:function(){var a=this.document.data("ui-dialog-instances");return a||(a=[],this.document.data("ui-dialog-instances",a)),a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(b){var c=this,d=!1,e={};a.each(b,function(a,b){c._setOption(a,b),a in c.sizeRelatedOptions&&(d=!0),a in c.resizableRelatedOptions&&(e[a]=b)}),d&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b),"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(ui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(ui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return!!a(b.target).closest(".ui-dialog").length||!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=!0;this._delay(function(){b=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(a){b||this._allowInteraction(a)||(a.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var a=this.document.data("ui-dialog-overlays")-1;a?this.document.data("ui-dialog-overlays",a):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),a.widget("ui.droppable",{version:"1.11.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(d)?d:function(a){return a.is(d)},this.proportions=function(){return arguments.length?void(b=arguments[0]):b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(c.scope),c.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[],a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){for(var b=0;a.length>b;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];this._splice(b),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){if("accept"===b)this.accept=a.isFunction(c)?c:function(a){return a.is(c)};else if("scope"===b){var d=a.ui.ddmanager.droppables[this.options.scope];this._splice(d),this._addToManager(c)}this._super(b,c)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return!(!d||(d.currentItem||d.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");return c.options.greedy&&!c.options.disabled&&c.options.scope===d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,b)?(e=!0,!1):void 0}),!e&&(!!this.accept.call(this.element[0],d.currentItem||d.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element)))},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(){function a(a,b,c){return a>=b&&b+c>a}return function(b,c,d,e){if(!c.offset)return!1;var f=(b.positionAbs||b.position.absolute).left,g=(b.positionAbs||b.position.absolute).top,h=f+b.helperProportions.width,i=g+b.helperProportions.height,j=c.offset.left,k=c.offset.top,l=j+c.proportions().width,m=k+c.proportions().height;switch(d){case"fit":return f>=j&&l>=h&&g>=k&&m>=i;case"intersect":return f+b.helperProportions.width/2>j&&l>h-b.helperProportions.width/2&&g+b.helperProportions.height/2>k&&m>i-b.helperProportions.height/2;case"pointer":return a(e.pageY,k,c.proportions().height)&&a(e.pageX,j,c.proportions().width);case"touch":return(g>=k&&m>=g||i>=k&&m>=i||k>g&&i>m)&&(f>=j&&l>=f||h>=j&&l>=h||j>f&&h>l);default:return!1}}}(),a.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;f.length>d;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;h.length>e;e++)if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance,c)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance,c),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===e}),f.length&&(d=a(f[0]).droppable("instance"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}},a.ui.droppable;var s="ui-effects-",t=a;a.effects={effect:{}},function(a,b){function c(a,b,c){var d=l[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:a>d.max?d.max:a)}function d(c){var d=j(),e=d._rgba=[];return c=c.toLowerCase(),o(i,function(a,f){var g,h=f.re.exec(c),i=h&&f.parse(h),j=f.space||"rgba";return i?(g=d[j](i),d[k[j].cache]=g[k[j].cache],e=d._rgba=g._rgba,!1):b}),e.length?("0,0,0,0"===e.join()&&a.extend(e,f.transparent),d):f[c]}function e(a,b,c){return c=(c+1)%1,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},n=a("<p>")[0],o=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)}),l[f]&&0>a.inArray(null,l[f].slice(0,3))&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):b},is:function(a){var c=j(a),d=!0,e=this;return o(k,function(a,f){var g,h=c[f.cache];return h&&(g=e[f.cache]||f.to&&f.to(e._rgba)||[],o(f.props,function(a,c){return null!=h[c.idx]?d=h[c.idx]===g[c.idx]:b})),d}),d},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:.5>=l?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=.5>=d?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(a){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(a){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(t),function(){function b(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(d=e.length;d--;)c=e[d],"string"==typeof e[c]&&(f[a.camelCase(c)]=e[c]);else for(c in e)"string"==typeof e[c]&&(f[c]=e[c]);return f}function c(b,c){var d,f,g={};for(d in c)f=c[d],b[d]!==f&&(e[d]||(a.fx.step[d]||!isNaN(parseFloat(f)))&&(g[d]=f));return g}var d=["add","remove","toggle"],e={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(t.style(a.elem,c,a.end),a.setAttr=!0)}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.effects.animateClass=function(e,f,g,h){var i=a.speed(f,g,h);return this.queue(function(){var f,g=a(this),h=g.attr("class")||"",j=i.children?g.find("*").addBack():g;j=j.map(function(){var c=a(this);return{el:c,start:b(this)}}),f=function(){a.each(d,function(a,b){e[b]&&g[b+"Class"](e[b])})},f(),j=j.map(function(){return this.end=b(this.el[0]),this.diff=c(this.start,this.end),this}),g.attr("class",h),j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){f(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(g[0])})})},a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(c,d,e,f,g){return"boolean"==typeof d||void 0===d?e?a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,f,g):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:c},d,e,f)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function b(b,c,d,e){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function c(b){return!(b&&"number"!=typeof b&&!a.fx.speeds[b])||("string"==typeof b&&!a.effects.effect[b]||(!!a.isFunction(b)||"object"==typeof b&&!b.effect))}a.extend(a.effects,{version:"1.11.1",save:function(a,b){for(var c=0;b.length>c;c++)null!==b[c]&&a.data(s+b[c],a[0].style[b[c]])},restore:function(a,b){var c,d;for(d=0;b.length>d;d++)null!==b[d]&&(c=a.data(s+b[d]),void 0===c&&(c=""),a.css(b[d],c))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),float:b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(a){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).focus(),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus()),b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function c(b){function c(){a.isFunction(f)&&f.call(e[0]),a.isFunction(b)&&b()}var e=a(this),f=d.complete,h=d.mode;(e.is(":hidden")?"hide"===h:"show"===h)?(e[h](),c()):g.call(e[0],d,c)}var d=b.apply(this,arguments),e=d.mode,f=d.queue,g=a.effects.effect[d.effect];return a.fx.off||!g?e?this[e](d.duration,d.complete):this.each(function(){d.complete&&d.complete.call(this)}):f===!1?this.each(c):this.queue(f||"fx",c)},show:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}}(a.fn.show),hide:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}}(a.fn.hide),toggle:function(a){return function(d){if(c(d)||"boolean"==typeof d)return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}})}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;((b=Math.pow(2,--c))-1)/11>a;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})}(),a.effects,a.effects.effect.blind=function(b,c){var d,e,f,g=a(this),h=/up|down|vertical/,i=/up|left|vertical|horizontal/,j=["position","top","bottom","left","right","height","width"],k=a.effects.setMode(g,b.mode||"hide"),l=b.direction||"up",m=h.test(l),n=m?"height":"width",o=m?"top":"left",p=i.test(l),q={},r="show"===k;g.parent().is(".ui-effects-wrapper")?a.effects.save(g.parent(),j):a.effects.save(g,j),g.show(),d=a.effects.createWrapper(g).css({overflow:"hidden"}),e=d[n](),f=parseFloat(d.css(o))||0,q[n]=r?e:0,p||(g.css(m?"bottom":"right",0).css(m?"top":"left","auto").css({position:"absolute"}),q[o]=r?f:e+f),r&&(d.css(n,0),p||d.css(o,f+e)),d.animate(q,{duration:b.duration,easing:b.easing,queue:!1,complete:function(){"hide"===k&&g.hide(),a.effects.restore(g,j),a.effects.removeWrapper(g),c()}})},a.effects.effect.bounce=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"effect"),j="hide"===i,k="show"===i,l=b.direction||"up",m=b.distance,n=b.times||5,o=2*n+(k||j?1:0),p=b.duration/o,q=b.easing,r="up"===l||"down"===l?"top":"left",s="up"===l||"left"===l,t=g.queue(),u=t.length;for((k||j)&&h.push("opacity"),a.effects.save(g,h),g.show(),a.effects.createWrapper(g),m||(m=g["top"===r?"outerHeight":"outerWidth"]()/3),k&&(f={opacity:1},f[r]=0,g.css("opacity",0).css(r,s?2*-m:2*m).animate(f,p,q)),j&&(m/=Math.pow(2,n-1)),f={},f[r]=0,d=0;n>d;d++)e={},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q).animate(f,p,q),m=j?2*m:m/2;j&&(e={opacity:0},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q)),g.queue(function(){j&&g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}),u>1&&t.splice.apply(t,[1,0].concat(t.splice(u,o+1))),g.dequeue()},a.effects.effect.clip=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"hide"),j="show"===i,k=b.direction||"vertical",l="vertical"===k,m=l?"height":"width",n=l?"top":"left",o={};a.effects.save(g,h),g.show(),d=a.effects.createWrapper(g).css({overflow:"hidden"}),e="IMG"===g[0].tagName?d:g,f=e[m](),j&&(e.css(m,0),e.css(n,f/2)),o[m]=j?f:0,o[n]=j?0:f/2,e.animate(o,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){j||g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}})},a.effects.effect.drop=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","opacity","height","width"],g=a.effects.setMode(e,b.mode||"hide"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i?"pos":"neg",l={opacity:h?1:0};a.effects.save(e,f),e.show(),a.effects.createWrapper(e),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0)/2,h&&e.css("opacity",0).css(j,"pos"===k?-d:d),l[j]=(h?"pos"===k?"+=":"-=":"pos"===k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})},a.effects.effect.explode=function(b,c){function d(){t.push(this),t.length===l*m&&e()}function e(){n.css({visibility:"visible"}),a(t).remove(),p||n.hide(),c()}var f,g,h,i,j,k,l=b.pieces?Math.round(Math.sqrt(b.pieces)):3,m=l,n=a(this),o=a.effects.setMode(n,b.mode||"hide"),p="show"===o,q=n.show().css("visibility","hidden").offset(),r=Math.ceil(n.outerWidth()/m),s=Math.ceil(n.outerHeight()/l),t=[];for(f=0;l>f;f++)for(i=q.top+f*s,k=f-(l-1)/2,g=0;m>g;g++)h=q.left+g*r,j=g-(m-1)/2,n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*r,top:-f*s}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:r,height:s,left:h+(p?j*r:0),top:i+(p?k*s:0),opacity:p?0:1}).animate({left:h+(p?0:j*r),top:i+(p?0:k*s),opacity:p?1:0},b.duration||500,b.easing,d)},a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:c})},a.effects.effect.fold=function(b,c){var d,e,f=a(this),g=["position","top","bottom","left","right","height","width"],h=a.effects.setMode(f,b.mode||"hide"),i="show"===h,j="hide"===h,k=b.size||15,l=/([0-9]+)%/.exec(k),m=!!b.horizFirst,n=i!==m,o=n?["width","height"]:["height","width"],p=b.duration/2,q={},r={};a.effects.save(f,g),f.show(),d=a.effects.createWrapper(f).css({overflow:"hidden"}),e=n?[d.width(),d.height()]:[d.height(),d.width()],l&&(k=parseInt(l[1],10)/100*e[j?0:1]),i&&d.css(m?{height:0,width:k}:{height:k,width:0}),q[o[0]]=i?e[0]:k,r[o[1]]=i?e[1]:0,d.animate(q,p,b.easing).animate(r,p,b.easing,function(){j&&f.hide(),a.effects.restore(f,g),a.effects.removeWrapper(f),c()})},a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),g={backgroundColor:d.css("backgroundColor")};"hide"===f&&(g.opacity=0),a.effects.save(d,e),d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(g,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),c()}})},a.effects.effect.size=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],j=["width","height","overflow"],k=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],m=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=a.effects.setMode(g,b.mode||"effect"),o=b.restore||"effect"!==n,p=b.scale||"both",q=b.origin||["middle","center"],r=g.css("position"),s=o?h:i,t={
height:0,width:0,outerHeight:0,outerWidth:0};"show"===n&&g.show(),d={height:g.height(),width:g.width(),outerHeight:g.outerHeight(),outerWidth:g.outerWidth()},"toggle"===b.mode&&"show"===n?(g.from=b.to||t,g.to=b.from||d):(g.from=b.from||("show"===n?t:d),g.to=b.to||("hide"===n?t:d)),f={from:{y:g.from.height/d.height,x:g.from.width/d.width},to:{y:g.to.height/d.height,x:g.to.width/d.width}},("box"===p||"both"===p)&&(f.from.y!==f.to.y&&(s=s.concat(l),g.from=a.effects.setTransition(g,l,f.from.y,g.from),g.to=a.effects.setTransition(g,l,f.to.y,g.to)),f.from.x!==f.to.x&&(s=s.concat(m),g.from=a.effects.setTransition(g,m,f.from.x,g.from),g.to=a.effects.setTransition(g,m,f.to.x,g.to))),("content"===p||"both"===p)&&f.from.y!==f.to.y&&(s=s.concat(k).concat(j),g.from=a.effects.setTransition(g,k,f.from.y,g.from),g.to=a.effects.setTransition(g,k,f.to.y,g.to)),a.effects.save(g,s),g.show(),a.effects.createWrapper(g),g.css("overflow","hidden").css(g.from),q&&(e=a.effects.getBaseline(q,d),g.from.top=(d.outerHeight-g.outerHeight())*e.y,g.from.left=(d.outerWidth-g.outerWidth())*e.x,g.to.top=(d.outerHeight-g.to.outerHeight)*e.y,g.to.left=(d.outerWidth-g.to.outerWidth)*e.x),g.css(g.from),("content"===p||"both"===p)&&(l=l.concat(["marginTop","marginBottom"]).concat(k),m=m.concat(["marginLeft","marginRight"]),j=h.concat(l).concat(m),g.find("*[width]").each(function(){var c=a(this),d={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()};o&&a.effects.save(c,j),c.from={height:d.height*f.from.y,width:d.width*f.from.x,outerHeight:d.outerHeight*f.from.y,outerWidth:d.outerWidth*f.from.x},c.to={height:d.height*f.to.y,width:d.width*f.to.x,outerHeight:d.height*f.to.y,outerWidth:d.width*f.to.x},f.from.y!==f.to.y&&(c.from=a.effects.setTransition(c,l,f.from.y,c.from),c.to=a.effects.setTransition(c,l,f.to.y,c.to)),f.from.x!==f.to.x&&(c.from=a.effects.setTransition(c,m,f.from.x,c.from),c.to=a.effects.setTransition(c,m,f.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.easing,function(){o&&a.effects.restore(c,j)})})),g.animate(g.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===g.to.opacity&&g.css("opacity",g.from.opacity),"hide"===n&&g.hide(),a.effects.restore(g,s),o||("static"===r?g.css({position:"relative",top:g.to.top,left:g.to.left}):a.each(["top","left"],function(a,b){g.css(b,function(b,c){var d=parseInt(c,10),e=a?g.to.left:g.to.top;return"auto"===c?e+"px":d+e+"px"})})),a.effects.removeWrapper(g),c()}})},a.effects.effect.scale=function(b,c){var d=a(this),e=a.extend(!0,{},b),f=a.effects.setMode(d,b.mode||"effect"),g=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===f?0:100),h=b.direction||"both",i=b.origin,j={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},k={y:"horizontal"!==h?g/100:1,x:"vertical"!==h?g/100:1};e.effect="size",e.queue=!1,e.complete=c,"effect"!==f&&(e.origin=i||["middle","center"],e.restore=!0),e.from=b.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:j),e.to={height:j.height*k.y,width:j.width*k.x,outerHeight:j.outerHeight*k.y,outerWidth:j.outerWidth*k.x},e.fade&&("show"===f&&(e.from.opacity=0,e.to.opacity=1),"hide"===f&&(e.from.opacity=1,e.to.opacity=0)),d.effect(e)},a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f="hide"===e,g=parseInt(b.percent,10)||150,h=g/100,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:f?g:100,from:f?i:{height:i.height*h,width:i.width*h,outerHeight:i.outerHeight*h,outerWidth:i.outerWidth*h}}),d.effect(b)},a.effects.effect.pulsate=function(b,c){var d,e=a(this),f=a.effects.setMode(e,b.mode||"show"),g="show"===f,h="hide"===f,i=g||"hide"===f,j=2*(b.times||5)+(i?1:0),k=b.duration/j,l=0,m=e.queue(),n=m.length;for((g||!e.is(":visible"))&&(e.css("opacity",0).show(),l=1),d=1;j>d;d++)e.animate({opacity:l},k,b.easing),l=1-l;e.animate({opacity:l},k,b.easing),e.queue(function(){h&&e.hide(),c()}),n>1&&m.splice.apply(m,[1,0].concat(m.splice(n,j+1))),e.dequeue()},a.effects.effect.shake=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","height","width"],g=a.effects.setMode(e,b.mode||"effect"),h=b.direction||"left",i=b.distance||20,j=b.times||3,k=2*j+1,l=Math.round(b.duration/k),m="up"===h||"down"===h?"top":"left",n="up"===h||"left"===h,o={},p={},q={},r=e.queue(),s=r.length;for(a.effects.save(e,f),e.show(),a.effects.createWrapper(e),o[m]=(n?"-=":"+=")+i,p[m]=(n?"+=":"-=")+2*i,q[m]=(n?"-=":"+=")+2*i,e.animate(o,l,b.easing),d=1;j>d;d++)e.animate(p,l,b.easing).animate(q,l,b.easing);e.animate(p,l,b.easing).animate(o,l/2,b.easing).queue(function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}),s>1&&r.splice.apply(r,[1,0].concat(r.splice(s,k+1))),e.dequeue()},a.effects.effect.slide=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","width","height"],g=a.effects.setMode(e,b.mode||"show"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i,l={};a.effects.save(e,f),e.show(),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0),a.effects.createWrapper(e).css({overflow:"hidden"}),h&&e.css(j,k?isNaN(d)?"-"+d:-d:d),l[j]=(h?k?"+=":"-=":k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})},a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove(),c()})},a.widget("ui.progressbar",{version:"1.11.1",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(a){return void 0===a?this.options.value:(this.options.value=this._constrainedValue(a),void this._refreshValue())},_constrainedValue:function(a){return void 0===a&&(a=this.options.value),this.indeterminate=a===!1,"number"!=typeof a&&(a=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value,this._super(a),this.options.value=this._constrainedValue(b),this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,b)),"disabled"===a&&this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b),this._super(a,b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).toggleClass("ui-corner-right",b===this.options.max).width(c.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==b&&(this.oldValue=b,this._trigger("change")),b===this.options.max&&this._trigger("complete")}}),a.widget("ui.selectable",a.ui.mouse,{version:"1.11.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b=a(c.options.filter,c.element[0]),b.addClass("ui-selectee"),b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=b.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY],this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;return f>h&&(c=h,h=f,f=c),g>i&&(c=i,i=g,g=c),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=!1;c&&c.element!==d.element[0]&&("touch"===e.tolerance?j=!(c.left>h||f>c.right||c.top>i||g>c.bottom):"fit"===e.tolerance&&(j=c.left>f&&h>c.right&&c.top>g&&i>c.bottom),j?(c.selected&&(c.$element.removeClass("ui-selected"),c.selected=!1),c.unselecting&&(c.$element.removeClass("ui-unselecting"),c.unselecting=!1),c.selecting||(c.$element.addClass("ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.widget("ui.selectmenu",{version:"1.11.1",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var a=this.element.uniqueId().attr("id");this.ids={element:a,button:a+"-button",menu:a+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var b=this,c=this.element.attr("tabindex");this.label=a("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(a){this.button.focus(),a.preventDefault()}}),this.element.hide(),this.button=a("<span>",{class:"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:c||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),a("<span>",{class:"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=a("<span>",{class:"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){b.menuItems||b._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var b=this;this.menu=a("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=a("<div>",{class:"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(a,c){a.preventDefault(),b._select(c.item.data("ui-selectmenu-item"),a)},focus:function(a,c){var d=c.item.data("ui-selectmenu-item");null!=b.focusIndex&&d.index!==b.focusIndex&&(b._trigger("focus",a,{item:d}),b.isOpen||b._select(d,a)),b.focusIndex=d.index,b.button.attr("aria-activedescendant",b.menuItems.eq(d.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var a,b=this.element.find("option");b.length&&(this._parseOptions(b),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),a=this._getSelectedItem(),this.menuInstance.focus(null,a),this._setAria(a.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(a){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",a))},_position:function(){this.menuWrap.position(a.extend({of:this.button},this.options.position))},close:function(a){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this._off(this.document),this._trigger("close",a))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(b,c){var d=this,e="";a.each(c,function(c,f){f.optgroup!==e&&(a("<li>",{class:"ui-selectmenu-optgroup ui-menu-divider"+(f.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:f.optgroup}).appendTo(b),e=f.optgroup),d._renderItemData(b,f)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-selectmenu-item",b)},_renderItem:function(b,c){var d=a("<li>");return c.disabled&&d.addClass("ui-state-disabled"),this._setText(d,c.label),d.appendTo(b)},_setText:function(a,b){b?a.text(b):a.html("&#160;")},_move:function(a,b){var c,d,e=".ui-menu-item";this.isOpen?c=this.menuItems.eq(this.focusIndex):(c=this.menuItems.eq(this.element[0].selectedIndex),e+=":not(.ui-state-disabled)"),d="first"===a||"last"===a?c["first"===a?"prevAll":"nextAll"](e).eq(-1):c[a+"All"](e).eq(0),d.length&&this.menuInstance.focus(b,d)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(a){this[this.isOpen?"close":"open"](a)},_documentClick:{mousedown:function(b){this.isOpen&&(a(b.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(b))}},_buttonEvents:{mousedown:function(a){a.preventDefault()},click:"_toggle",keydown:function(b){var c=!0;switch(b.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(b),c=!1;break;case a.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case a.ui.keyCode.UP:b.altKey?this._toggle(b):this._move("prev",b);break;case a.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case a.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):this._toggle(b);break;case a.ui.keyCode.LEFT:this._move("prev",b);break;case a.ui.keyCode.RIGHT:this._move("next",b);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",b);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b),c=!1}c&&b.preventDefault()}},_selectFocusedItem:function(a){var b=this.menuItems.eq(this.focusIndex);b.hasClass("ui-state-disabled")||this._select(b.data("ui-selectmenu-item"),a)},_select:function(a,b){var c=this.element[0].selectedIndex;this.element[0].selectedIndex=a.index,this._setText(this.buttonText,a.label),this._setAria(a),this._trigger("select",b,{item:a}),a.index!==c&&this._trigger("change",b,{item:a}),this.close(b)},_setAria:function(a){var b=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":b,"aria-activedescendant":b}),this.menu.attr("aria-activedescendant",b)},_setOption:function(a,b){"icons"===a&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(b.button),this._super(a,b),"appendTo"===a&&this.menuWrap.appendTo(this._appendTo()),"disabled"===a&&(this.menuInstance.option("disabled",b),this.button.toggleClass("ui-state-disabled",b).attr("aria-disabled",b),this.element.prop("disabled",b),b?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===a&&this._resizeButton()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var a=this.options.width;a||(a=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(a)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(b){var c=[];b.each(function(b,d){var e=a(d),f=e.parent("optgroup");c.push({element:e,index:b,value:e.attr("value"),label:e.text(),optgroup:f.attr("label")||"",disabled:f.prop("disabled")||e.prop("disabled")})}),this.items=c},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),a.widget("ui.slider",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return!l.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h!==!1&&(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;d.length>f;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),"disabled"===b&&this.element.toggleClass("ui-state-disabled",!!c),this._super(b,c),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===c?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;c.length>d;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(this._valueMin()>=a)return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=!this._animateOff&&h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=100*((i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())),k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?100*((d-e)/(f-e)):0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(b){var c,d,e,f,g=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),c=this._start(b,g),c===!1))return}switch(f=this.options.step,d=e=this.options.values&&this.options.values.length?this.values(g):this.value(),b.keyCode){case a.ui.keyCode.HOME:e=this._valueMin();break;case a.ui.keyCode.END:e=this._valueMax();break;case a.ui.keyCode.PAGE_UP:e=this._trimAlignValue(d+(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.PAGE_DOWN:e=this._trimAlignValue(d-(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(d===this._valueMax())return;e=this._trimAlignValue(d+f);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d===this._valueMin())return;e=this._trimAlignValue(d-f)}this._slide(b,g,e)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}}),a.widget("ui.sortable",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&b+c>a},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===a.axis||this._isFloating(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(a,b){this._super(a,b),"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),a.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),!!d&&(!(this.options.handle&&!c&&(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),!e))&&(this.currentItem=d,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(b,c,d){var e,f,g=this.options;
if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"!==this.options.type||!a.contains(this.element[0],e))){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:b+this.helperProportions.width/2>f&&g>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>h&&i>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var b="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),c="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),d=b&&c,e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return!!d&&(this.floating?f&&"right"===f||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&c||"left"===e&&!c:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){h.push(this)}var d,e,f,g,h=[],i=[],j=this._connectWith();if(j&&b)for(d=j.length-1;d>=0;d--)for(f=a(j[d]),e=f.length-1;e>=0;e--)g=a.data(f[e],this.widgetFullName),g&&g!==this&&!g.options.disabled&&i.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g]);for(i.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=i.length-1;d>=0;d--)i[d][0].each(c);return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(b){var c,d,e,f,g,h,i,j,k,l,m=null,n=null;for(c=this.containers.length-1;c>=0;c--)if(!a.contains(this.currentItem[0],this.containers[c].element[0]))if(this._intersectsWith(this.containers[c].containerCache)){if(m&&a.contains(this.containers[c].element[0],m.element[0]))continue;m=this.containers[c],n=c}else this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",b,this._uiHash(this)),this.containers[c].containerCache.over=0);if(m)if(1===this.containers.length)this.containers[n].containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1);else{for(e=1e4,f=null,k=m.floating||this._isFloating(this.currentItem),g=k?"left":"top",h=k?"width":"height",l=k?"clientX":"clientY",d=this.items.length-1;d>=0;d--)a.contains(this.containers[n].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(i=this.items[d].item.offset()[g],j=!1,b[l]-i>this.items[d][h]/2&&(j=!0),e>Math.abs(b[l]-i)&&(e=Math.abs(b[l]-i),f=this.items[d],this.direction=j?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[n])return;f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[n].element,!0),this._trigger("change",b,this._uiHash()),this.containers[n]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[n],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)("auto"===this._storedCSS[d]||"static"===this._storedCSS[d])&&(this._storedCSS[d]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){for(this._trigger("beforeStop",a,this._uiHash()),d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!b){for(d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.widget("ui.spinner",{version:"1.11.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},c=this.element;return a.each(["min","max","step"],function(a,d){var e=c.attr(d);void 0!==e&&e.length&&(b[d]=e)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",a)))},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((b>0?1:-1)*this.options.step,a),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100),a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){var a=this.element[0]===this.document[0].activeElement;a||(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),b.preventDefault(),c.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,c.call(this)}),this._start(b)!==!1&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){return a(b.currentTarget).hasClass("ui-state-active")?this._start(b)!==!1&&void this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*a.height())&&a.height()>0&&a.height(a.height()),this.options.disabled&&this.disable()},_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,c.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){return!(!this.spinning&&this._trigger("start",a)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(a,b,c){a=a||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,b,c)},a),this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1),c=this._adjustValue(c+a*this._increment(this.counter)),this.spinning&&this._trigger("spin",b,{value:c})===!1||(this._value(c),this.counter++)},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5e4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var b=""+a,c=b.indexOf(".");return-1===c?0:b.length-c-1},_adjustValue:function(a){var b,c,d=this.options;return b=null!==d.min?d.min:0,c=a-b,c=Math.round(c/d.step)*d.step,a=b+c,a=parseFloat(a.toFixed(this._precision())),null!==d.max&&a>d.max?d.max:null!==d.min&&d.min>a?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){if("culture"===a||"numberFormat"===a){var c=this._parse(this.element.val());return this.options[a]=b,void this.element.val(this._format(c))}("max"===a||"min"===a||"step"===a)&&"string"==typeof b&&(b=this._parse(b)),"icons"===a&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(b.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(b.down)),this._super(a,b),"disabled"===a&&(this.widget().toggleClass("ui-state-disabled",!!b),this.element.prop("disabled",!!b),this.buttons.button(b?"disable":"enable"))},_setOptions:i(function(a){this._super(a)}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var a=this.value();return null!==a&&a===this._adjustValue(a)},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(b||(c=this._adjustValue(c)),a=this._format(c))),this.element.val(a),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:i(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&(this._spin((a||1)*this.options.step),this._stop())},stepDown:i(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),this._stop())},pageUp:i(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:i(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){return arguments.length?void i(this._value).call(this,a):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),a.widget("ui.tabs",{version:"1.11.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=/#.*$/;return function(b){var c,d;b=b.cloneNode(!1),c=b.href.replace(a,""),d=location.href.replace(a,"");try{c=decodeURIComponent(c)}catch(a){}try{d=decodeURIComponent(d)}catch(a){}return b.hash.length>1&&c===d}}(),_create:function(){var b=this,c=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible),this._processTabs(),c.active=this._initialActive(),a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(c.active):a(),this._refresh(),this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);return null===b&&(d&&this.tabs.each(function(c,e){return a(e).attr("aria-controls")===d?(b=c,!1):void 0}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===b||-1===b)&&(b=!!this.tabs.length&&0)),b!==!1&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=!c&&0)),!c&&b===!1&&this.anchors.length&&(b=0),b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1,d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d);case a.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d!==this.options.active&&d);default:return}b.preventDefault(),clearTimeout(this.activating),d=this._focusNextTab(d,e),b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){return b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,c){function d(){return b>e&&(b=0),0>b&&(b=e),b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,b){return"active"===a?void this._activate(b):"disabled"===a?void this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(b),void("heightStyle"===a&&this._setupHeightStyle(b)))},_sanitizeSelector:function(a){
return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=a(),this.anchors.each(function(c,d){var e,f,g,h=a(d).uniqueId().attr("id"),i=a(d).closest("li"),j=i.attr("aria-controls");b._isLocal(d)?(e=d.hash,g=e.substring(1),f=b.element.find(b._sanitizeSelector(e))):(g=i.attr("aria-controls")||a({}).uniqueId()[0].id,e="#"+g,f=b.element.find(e),f.length||(f=b._createPanel(g),f.insertAfter(b.panels[c-1]||b.tablist)),f.attr("aria-live","polite")),f.length&&(b.panels=b.panels.add(f)),j&&i.data("ui-tabs-aria-controls",j),i.attr({"aria-controls":g,"aria-labelledby":h}),f.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c,d=0;c=this.tabs[d];d++)b===!0||-1!==a.inArray(d,b)?a(c).addClass("ui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(a){a.preventDefault()}}),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=!h&&this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h.hide(),e()),h.attr("aria-hidden","true"),c.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr("aria-hidden","false"),c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var c=this.options.disabled;c!==!1&&(void 0===b?c=!1:(b=this._getIndex(b),c=a.isArray(c)?a.map(c,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,c){return c!==b?c:null})),this._setupDisabled(c))},disable:function(b){var c=this.options.disabled;if(c!==!0){if(void 0===b)c=!0;else{if(b=this._getIndex(b),-1!==a.inArray(b,c))return;c=a.isArray(c)?a.merge([b],c).sort():[b]}this._setupDisabled(c)}},load:function(b,c){b=this._getIndex(b);var d=this,e=this.tabs.eq(b),f=e.find(".ui-tabs-anchor"),g=this._getPanelForTab(e),h={tab:e,panel:g};this._isLocal(f[0])||(this.xhr=a.ajax(this._ajaxSettings(f,c,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(e.addClass("ui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){g.html(a),d._trigger("load",c,h)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&d.panels.stop(!1,!0),e.removeClass("ui-tabs-loading"),g.removeAttr("aria-busy"),a===d.xhr&&delete d.xhr},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}}),a.widget("ui.tooltip",{version:"1.11.1",options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c),b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))},_removeDescribedBy:function(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);-1!==e&&d.splice(e,1),b.removeData("ui-tooltip-id"),d=a.trim(d.join(" ")),d?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=a("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(b,c){var d=this;return"disabled"===b?(this[c?"_disable":"_enable"](),void(this.options[b]=c)):(this._super(b,c),void("content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b)})))},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0)}),this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("ui-tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0)),d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){a.data("ui-tooltip-open")&&e._delay(function(){b&&(b.type=f),this._open(b,a,c)})}),void(c&&this._open(b,a,c)))},_open:function(b,c,d){function e(a){j.of=a,f.is(":hidden")||f.position(j)}var f,g,h,i,j=a.extend({},this.options.position);if(d){if(f=this._find(c),f.length)return void f.find(".ui-tooltip-content").html(d);c.is("[title]")&&(b&&"mouseover"===b.type?c.attr("title",""):c.removeAttr("title")),f=this._tooltip(c),this._addDescribedBy(c,f.attr("id")),f.find(".ui-tooltip-content").html(d),this.liveRegion.children().hide(),d.clone?(i=d.clone(),i.removeAttr("id").find("[id]").removeAttr("id")):i=d,a("<div>").html(i).appendTo(this.liveRegion),this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:e}),e(b)):f.position(a.extend({of:c},this.options.position)),this.hiding=!1,this.closing=!1,f.hide(),this._show(f,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){f.is(":visible")&&(e(j.of),clearInterval(h))},a.fx.interval)),this._trigger("open",b,{tooltip:f}),g={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var d=a.Event(b);d.currentTarget=c[0],this.close(d,!0)}}},c[0]!==this.element[0]&&(g.remove=function(){this._removeTooltip(f)}),b&&"mouseover"!==b.type||(g.mouseleave="close"),b&&"focusin"!==b.type||(g.focusout="close"),this._on(!0,c,g)}},close:function(b){var c=this,d=a(b?b.currentTarget:this.element),e=this._find(d);this.closing||(clearInterval(this.delayedShow),d.data("ui-tooltip-title")&&!d.attr("title")&&d.attr("title",d.data("ui-tooltip-title")),this._removeDescribedBy(d),this.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){c._removeTooltip(a(this)),this.hiding=!1,this.closing=!1}),d.removeData("ui-tooltip-open"),this._off(d,"mouseleave focusout keyup"),d[0]!==this.element[0]&&this._off(d,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,d){a(d.element).attr("title",d.title),delete c.parents[b]}),this.closing=!0,this._trigger("close",b,{tooltip:e}),this.hiding||(this.closing=!1))},_tooltip:function(b){var c=a("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),d=c.uniqueId().attr("id");return a("<div>").addClass("ui-tooltip-content").appendTo(c),c.appendTo(this.document[0].body),this.tooltips[d]=b,c},_find:function(b){var c=b.data("ui-tooltip-id");return c?a("#"+c):a()},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0),a("#"+c).remove(),d.data("ui-tooltip-title")&&(d.attr("title")||d.attr("title",d.data("ui-tooltip-title")),d.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})}),function(){function a(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function b(b,c){var d=typeof c;if(b=b.cache,"boolean"==d||null==c)return b[c]?0:-1;"number"!=d&&"string"!=d&&(d="object");var e="number"==d?c:u+c;return b=(b=b[d])&&b[e],"object"==d?b&&a(b,c)>-1?0:-1:b?0:-1}function c(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:u+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function d(a){return a.charCodeAt(0)}function e(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(g<h||"undefined"==typeof h)return-1}}return a.index-b.index}function f(a){var b=-1,d=a.length,e=a[0],f=a[d/2|0],g=a[d-1];if(e&&"object"==typeof e&&f&&"object"==typeof f&&g&&"object"==typeof g)return!1;var h=i();h.false=h.null=h.true=h.undefined=!1;var j=i();for(j.array=a,j.cache=h,j.push=c;++b<d;)j.push(a[b]);return j}function g(a){return"\\"+_[a]}function h(){return q.pop()||[]}function i(){return r.pop()||{array:null,cache:null,criteria:null,false:!1,index:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,value:null}}function j(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}function l(a){a.length=0,q.length<w&&q.push(a)}function m(a){var b=a.cache;b&&m(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,r.length<w&&r.push(a)}function n(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(e<0?0:e);++d<e;)f[d]=a[b+d];return f}function o(c){function q(a){return a&&"object"==typeof a&&!kd(a)&&Rc.call(a,"__wrapped__")?a:new r(a)}function r(a,b){this.__chain__=!!b,this.__wrapped__=a}function w(a){function b(){if(d){var a=n(d);Sc.apply(a,arguments)}if(this instanceof b){var f=ba(c.prototype),g=c.apply(f,a||arguments);return La(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return jd(b,a),b}function _(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}var g=La(a);if(!g)return a;var i=Kc.call(a);if(!W[i]||!hd.nodeClass&&j(a))return a;var k=fd[i];switch(i){case O:case P:return new k((+a));case S:case V:return new k(a);case U:return f=k(a.source,C.exec(a)),f.lastIndex=a.lastIndex,f}var m=kd(a);if(b){var o=!d;d||(d=h()),e||(e=h());for(var p=d.length;p--;)if(d[p]==a)return e[p];f=m?k(a.length):{}}else f=m?n(a):vd({},a);return m&&(Rc.call(a,"index")&&(f.index=a.index),Rc.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(m?ud:yd)(a,function(a,g){f[g]=_(a,b,c,d,e)}),o&&(l(d),l(e)),f):f}function ba(a,b){return La(a)?Yc(a):{}}function ca(a,b,c){if("function"!=typeof a)return ec;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(hd.funcNames&&(d=!a.name),d=d||!hd.funcDecomp,!d)){var e=Pc.call(a);hd.funcNames||(d=!D.test(e)),d||(d=H.test(e),jd(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Pb(a,b)}function da(a){function b(){var a=i?g:this;if(e){var o=n(e);Sc.apply(o,arguments)}if((f||k)&&(o||(o=n(arguments)),f&&Sc.apply(o,f),k&&o.length<h))return d|=16,da([c,l?d:d&-4,o,null,g,h]);if(o||(o=arguments),j&&(c=a[m]),this instanceof b){a=ba(c.prototype);var p=c.apply(a,o);return La(p)?p:a}return c.apply(a,o)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,l=8&d,m=c;return jd(b,a),b}function ea(c,d){var e=-1,g=pa(),h=c?c.length:0,i=h>=v&&g===a,j=[];if(i){var k=f(d);k?(g=b,d=k):i=!1}for(;++e<h;){var l=c[e];g(d,l)<0&&j.push(l)}return i&&m(d),j}function ga(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(kd(h)||ta(h))){b||(h=ga(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function ha(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var i=typeof a,k=typeof b;if(!(a!==a||a&&$[i]||b&&$[k]))return!1;if(null==a||null==b)return a===b;var m=Kc.call(a),n=Kc.call(b);if(m==M&&(m=T),n==M&&(n=T),m!=n)return!1;switch(m){case O:case P:return+a==+b;case S:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case U:case V:return a==Dc(b)}var o=m==N;if(!o){var p=Rc.call(a,"__wrapped__"),q=Rc.call(b,"__wrapped__");if(p||q)return ha(p?a.__wrapped__:a,q?b.__wrapped__:b,c,d,e,f);if(m!=T||!hd.nodeClass&&(j(a)||j(b)))return!1;var r=!hd.argsObject&&ta(a)?Bc:a.constructor,s=!hd.argsObject&&ta(b)?Bc:b.constructor;if(r!=s&&!(Ka(r)&&r instanceof r&&Ka(s)&&s instanceof s)&&"constructor"in a&&"constructor"in b)return!1}var t=!e;e||(e=h()),f||(f=h());for(var u=e.length;u--;)if(e[u]==a)return f[u]==b;var v=0;if(g=!0,e.push(a),f.push(b),o){if(u=a.length,v=b.length,g=v==u,g||d)for(;v--;){var w=u,x=b[v];if(d)for(;w--&&!(g=ha(a[w],x,c,d,e,f)););else if(!(g=ha(a[v],x,c,d,e,f)))break}}else xd(b,function(b,h,i){if(Rc.call(i,h))return v++,g=Rc.call(a,h)&&ha(a[h],b,c,d,e,f)}),g&&!d&&xd(a,function(a,b,c){if(Rc.call(c,b))return g=--v>-1});return e.pop(),f.pop(),t&&(l(e),l(f)),g}function ia(a,b,c,d,e){(kd(b)?db:yd)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=kd(b))||zd(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?kd(j)?j:[]:zd(j)?j:{}),d.push(b),e.push(j),l||ia(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function ja(a,b){return a+Oc(ed()*(b-a+1))}function ka(c,d,e){var g=-1,i=pa(),j=c?c.length:0,k=[],n=!d&&j>=v&&i===a,o=e||n?h():k;if(n){var p=f(o);i=b,o=p}for(;++g<j;){var q=c[g],r=e?e(q,g,c):q;(d?!g||o[o.length-1]!==r:i(o,r)<0)&&((e||n)&&o.push(r),k.push(q))}return n?(l(o.array),m(o)):e&&l(o),k}function la(a){return function(b,c,d){var e={};if(c=q.createCallback(c,d,3),kd(b))for(var f=-1,g=b.length;++f<g;){var h=b[f];a(e,h,c(h,f,b),b)}else ud(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function ma(a,b,c,d,e,f){var g=1&b,h=2&b,i=4&b,j=16&b,k=32&b;if(!h&&!Ka(a))throw new Ec;j&&!c.length&&(b&=-17,j=c=!1),k&&!d.length&&(b&=-33,k=d=!1);var l=a&&a.__bindData__;if(l&&l!==!0)return l=n(l),l[2]&&(l[2]=n(l[2])),l[3]&&(l[3]=n(l[3])),!g||1&l[1]||(l[4]=e),!g&&1&l[1]&&(b|=8),!i||4&l[1]||(l[5]=f),j&&Sc.apply(l[2]||(l[2]=[]),c),k&&Wc.apply(l[3]||(l[3]=[]),d),l[1]|=b,ma.apply(null,l);var m=1==b||17===b?w:da;return m([a,b,c,d,e,f])}function na(){Z.shadowedProps=K,Z.array=Z.bottom=Z.loop=Z.top="",Z.init="iterable",Z.useHas=!0;for(var a,b=0;a=arguments[b];b++)for(var c in a)Z[c]=a[c];var d=Z.args;Z.firstArg=/^[^,]+/.exec(d)[0];var e=yc("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+d+") {\n"+id(Z)+"\n}");return e(ca,Q,Gc,Rc,t,ta,kd,Qa,Z.keys,Hc,$,gd,V,Ic,Kc)}function oa(a){return qd[a]}function pa(){var b=(b=q.indexOf)===yb?a:b;return b}function qa(a){return"function"==typeof a&&Lc.test(a)}function ra(a){var b,c;return!(!(a&&Kc.call(a)==T&&(b=a.constructor,!Ka(b)||b instanceof b))||!hd.argsClass&&ta(a)||!hd.nodeClass&&j(a))&&(hd.ownLast?(xd(a,function(a,b,d){return c=Rc.call(d,b),!1}),c!==!1):(xd(a,function(a,b){c=b}),"undefined"==typeof c||Rc.call(a,c)))}function sa(a){return rd[a]}function ta(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kc.call(a)==M||!1}function ua(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),_(a,b,"function"==typeof c&&ca(c,d,1))}function va(a,b,c){return _(a,!0,"function"==typeof b&&ca(b,c,1))}function wa(a,b){var c=ba(a);return b?vd(c,b):c}function xa(a,b,c){var d;return b=q.createCallback(b,c,3),yd(a,function(a,c,e){if(b(a,c,e))return d=c,!1}),d}function ya(a,b,c){var d;return b=q.createCallback(b,c,3),Aa(a,function(a,c,e){if(b(a,c,e))return d=c,!1}),d}function za(a,b,c){var d=[];xd(a,function(a,b){d.push(b,a)});var e=d.length;for(b=ca(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function Aa(a,b,c){var d=md(a),e=d.length;for(b=ca(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function Ba(a){var b=[];return xd(a,function(a,c){Ka(a)&&b.push(c)}),b.sort()}function Ca(a,b){return!!a&&Rc.call(a,b)}function Da(a){for(var b=-1,c=md(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function Ea(a){return a===!0||a===!1||a&&"object"==typeof a&&Kc.call(a)==O||!1}function Fa(a){return a&&"object"==typeof a&&Kc.call(a)==P||!1}function Ga(a){return a&&1===a.nodeType||!1}function Ha(a){var b=!0;if(!a)return b;var c=Kc.call(a),d=a.length;return c==N||c==V||(hd.argsClass?c==M:ta(a))||c==T&&"number"==typeof d&&Ka(a.splice)?!d:(yd(a,function(){return b=!1}),b)}function Ia(a,b,c,d){return ha(a,b,"function"==typeof c&&ca(c,d,2))}function Ja(a){return $c(a)&&!_c(parseFloat(a))}function Ka(a){return"function"==typeof a}function La(a){return!(!a||!$[typeof a])}function Ma(a){return Oa(a)&&a!=+a}function Na(a){return null===a}function Oa(a){return"number"==typeof a||a&&"object"==typeof a&&Kc.call(a)==S||!1}function Pa(a){return a&&$[typeof a]&&Kc.call(a)==U||!1}function Qa(a){return"string"==typeof a||a&&"object"==typeof a&&Kc.call(a)==V||!1}function Ra(a){return"undefined"==typeof a}function Sa(a,b,c){var d={};return b=q.createCallback(b,c,3),yd(a,function(a,c,e){d[c]=b(a,c,e)}),d}function Ta(a){var b=arguments,c=2;if(!La(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=ca(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=n(arguments,1,c),f=-1,g=h(),i=h();++f<c;)ia(a,e[f],d,g,i);return l(g),l(i),a}function Ua(a,b,c){var d={};if("function"!=typeof b){var e=[];xd(a,function(a,b){e.push(b)}),e=ea(e,ga(arguments,!0,!1,1));for(var f=-1,g=e.length;++f<g;){var h=e[f];d[h]=a[h]}}else b=q.createCallback(b,c,3),xd(a,function(a,c,e){b(a,c,e)||(d[c]=a)});return d}function Va(a){for(var b=-1,c=md(a),d=c.length,e=uc(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Wa(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,f=ga(arguments,!0,!1,1),g=La(a)?f.length:0;++e<g;){var h=f[e];h in a&&(d[h]=a[h])}else b=q.createCallback(b,c,3),xd(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d}function Xa(a,b,c,d){var e=kd(a);if(null==c)if(e)c=[];else{var f=a&&a.constructor,g=f&&f.prototype;c=ba(g)}return b&&(b=q.createCallback(b,d,4),(e?ud:yd)(a,function(a,d,e){return b(c,a,d,e)})),c}function Ya(a){for(var b=-1,c=md(a),d=c.length,e=uc(d);++b<d;)e[b]=a[c[b]];return e}function Za(a){var b=arguments,c=-1,d=ga(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=uc(e);for(hd.unindexedChars&&Qa(a)&&(a=a.split(""));++c<e;)f[c]=a[d[c]];return f}function $a(a,b,c){var d=-1,e=pa(),f=a?a.length:0,g=!1;return c=(c<0?bd(0,f+c):c)||0,kd(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Qa(a)?a.indexOf(b,c):e(a,b,c))>-1:ud(a,function(a){if(++d>=c)return!(g=a===b)}),g}function _a(a,b,c){var d=!0;if(b=q.createCallback(b,c,3),kd(a))for(var e=-1,f=a.length;++e<f&&(d=!!b(a[e],e,a)););else ud(a,function(a,c,e){return d=!!b(a,c,e)});return d}function ab(a,b,c){var d=[];if(b=q.createCallback(b,c,3),kd(a))for(var e=-1,f=a.length;++e<f;){var g=a[e];b(g,e,a)&&d.push(g)}else ud(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function bb(a,b,c){if(b=q.createCallback(b,c,3),!kd(a)){var d;return ud(a,function(a,c,e){if(b(a,c,e))return d=a,!1}),d}for(var e=-1,f=a.length;++e<f;){var g=a[e];if(b(g,e,a))return g}}function cb(a,b,c){var d;return b=q.createCallback(b,c,3),eb(a,function(a,c,e){if(b(a,c,e))return d=a,!1}),d}function db(a,b,c){if(b&&"undefined"==typeof c&&kd(a))for(var d=-1,e=a.length;++d<e&&b(a[d],d,a)!==!1;);else ud(a,b,c);return a}function eb(a,b,c){var d=a,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:ca(b,c,3),kd(a))for(;e--&&b(a[e],e,a)!==!1;);else{if("number"!=typeof e){var f=md(a);e=f.length}else hd.unindexedChars&&Qa(a)&&(d=a.split(""));ud(a,function(a,c,g){return c=f?f[--e]:--e,b(d[c],c,g)})}return a}function fb(a,b){var c=n(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=uc("number"==typeof f?f:0);return db(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function gb(a,b,c){var d=-1,e=a?a.length:0,f=uc("number"==typeof e?e:0);if(b=q.createCallback(b,c,3),kd(a))for(;++d<e;)f[d]=b(a[d],d,a);else ud(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function hb(a,b,c){var e=-(1/0),f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&kd(a))for(var g=-1,h=a.length;++g<h;){var i=a[g];i>f&&(f=i)}else b=null==b&&Qa(a)?d:q.createCallback(b,c,3),ud(a,function(a,c,d){var g=b(a,c,d);g>e&&(e=g,f=a)});return f}function ib(a,b,c){var e=1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&kd(a))for(var g=-1,h=a.length;++g<h;){var i=a[g];i<f&&(f=i)}else b=null==b&&Qa(a)?d:q.createCallback(b,c,3),ud(a,function(a,c,d){var g=b(a,c,d);g<e&&(e=g,f=a)});return f}function jb(a,b,c,d){var e=arguments.length<3;if(b=q.createCallback(b,d,4),kd(a)){var f=-1,g=a.length;for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a)}else ud(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function kb(a,b,c,d){var e=arguments.length<3;return b=q.createCallback(b,d,4),eb(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function lb(a,b,c){return b=q.createCallback(b,c,3),ab(a,function(a,c,d){return!b(a,c,d)})}function mb(a,b,c){if(a&&"number"!=typeof a.length?a=Ya(a):hd.unindexedChars&&Qa(a)&&(a=a.split("")),null==b||c)return a?a[ja(0,a.length-1)]:p;var d=nb(a);return d.length=cd(bd(0,b),d.length),d}function nb(a){var b=-1,c=a?a.length:0,d=uc("number"==typeof c?c:0);return db(a,function(a){var c=ja(0,++b);d[b]=d[c],d[c]=a}),d}function ob(a){var b=a?a.length:0;return"number"==typeof b?b:md(a).length}function pb(a,b,c){var d;if(b=q.createCallback(b,c,3),kd(a))for(var e=-1,f=a.length;++e<f&&!(d=b(a[e],e,a)););else ud(a,function(a,c,e){return!(d=b(a,c,e))});return!!d}function qb(a,b,c){var d=-1,f=kd(b),g=a?a.length:0,j=uc("number"==typeof g?g:0);for(f||(b=q.createCallback(b,c,3)),db(a,function(a,c,e){var g=j[++d]=i();f?g.criteria=gb(b,function(b){return a[b]}):(g.criteria=h())[0]=b(a,c,e),g.index=d,g.value=a}),g=j.length,j.sort(e);g--;){var k=j[g];j[g]=k.value,f||l(k.criteria),m(k)}return j}function rb(a){return a&&"number"==typeof a.length?hd.unindexedChars&&Qa(a)?a.split(""):n(a):Ya(a)}function sb(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function tb(a){return ea(a,ga(arguments,!0,!0,1))}function ub(a,b,c){var d=-1,e=a?a.length:0;for(b=q.createCallback(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1}function vb(a,b,c){var d=a?a.length:0;for(b=q.createCallback(b,c,3);d--;)if(b(a[d],d,a))return d;return-1}function wb(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=-1;for(b=q.createCallback(b,c,3);++f<e&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[0]:p;return n(a,0,cd(bd(0,d),e))}function xb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=gb(a,c,d)),ga(a,b)}function yb(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=d<0?bd(0,e+d):d||0}else if(d){var f=Hb(b,c);return b[f]===c?f:-1}return a(b,c,d)}function zb(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=q.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return n(a,0,cd(bd(0,e-d),e))}function Ab(){for(var c=[],d=-1,e=arguments.length,g=h(),i=pa(),j=i===a,k=h();++d<e;){var n=arguments[d];(kd(n)||ta(n))&&(c.push(n),g.push(j&&n.length>=v&&f(d?c[d]:k)))}var o=c[0],p=-1,q=o?o.length:0,r=[];a:for(;++p<q;){var s=g[0];if(n=o[p],(s?b(s,n):i(k,n))<0){for(d=e,(s||k).push(n);--d;)if(s=g[d],(s?b(s,n):i(c[d],n))<0)continue a;r.push(n)}}for(;e--;)s=g[e],s&&m(s);return l(g),l(k),r}function Bb(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=q.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[e-1]:p;return n(a,bd(0,e-d))}function Cb(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(c<0?bd(0,d+c):cd(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function Db(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Vc.call(a,f--,1),e--);return a}function Eb(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=bd(0,Mc((b-a)/(c||1))),f=uc(e);++d<e;)f[d]=a,a+=c;return f}function Fb(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=q.createCallback(b,c,3);++d<e;){var g=a[d];b(g,d,a)&&(f.push(g),Vc.call(a,d--,1),e--)}return f}function Gb(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=q.createCallback(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:bd(0,b);return n(a,d)}function Hb(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?q.createCallback(c,d,1):ec,b=c(b);e<f;){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function Ib(){return ka(ga(arguments,!0,!0))}function Jb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=q.createCallback(c,d,3)),ka(a,b,c)}function Kb(a){return ea(a,n(arguments,1))}function Lb(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(kd(c)||ta(c))var d=d?ka(ea(d,c).concat(ea(c,d))):c}return d||[]}function Mb(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?hb(Dd(a,"length")):0,d=uc(c<0?0:c);++b<c;)d[b]=Dd(a,b);return d}function Nb(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||kd(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Ob(a,b){if(!Ka(b))throw new Ec;return function(){if(--a<1)return b.apply(this,arguments)}}function Pb(a,b){return arguments.length>2?ma(a,17,n(arguments,2),null,b):ma(a,1,null,null,b)}function Qb(a){for(var b=arguments.length>1?ga(arguments,!0,!1,1):Ba(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=ma(a[e],1,null,null,a)}return a}function Rb(a,b){return arguments.length>2?ma(b,19,n(arguments,2),null,a):ma(b,3,null,null,a)}function Sb(){for(var a=arguments,b=a.length;b--;)if(!Ka(a[b]))throw new Ec;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Tb(a,b){return b="number"==typeof b?b:+b||a.length,ma(a,4,null,null,null,b)}function Ub(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Ka(a))throw new Ec;if(b=bd(0,b)||0,c===!0){var n=!0;m=!1}else La(c)&&(n=c.leading,l="maxWait"in c&&(bd(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(Fd()-g);if(c<=0){e&&Nc(e);var l=j;e=i=j=p,l&&(k=Fd(),f=a.apply(h,d),i||e||(d=h=null))}else i=Uc(o,c)},q=function(){i&&Nc(i),e=i=j=p,(m||l!==b)&&(k=Fd(),f=a.apply(h,d),
i||e||(d=h=null))};return function(){if(d=arguments,g=Fd(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var p=l-(g-k),r=p<=0;r?(e&&(e=Nc(e)),k=g,f=a.apply(h,d)):e||(e=Uc(q,p))}return r&&i?i=Nc(i):i||b===l||(i=Uc(o,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Vb(a){if(!Ka(a))throw new Ec;var b=n(arguments,1);return Uc(function(){a.apply(p,b)},1)}function Wb(a,b){if(!Ka(a))throw new Ec;var c=n(arguments,2);return Uc(function(){a.apply(p,c)},b)}function Xb(a,b){if(!Ka(a))throw new Ec;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):u+arguments[0];return Rc.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Yb(a){var b,c;if(!Ka(a))throw new Ec;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Zb(a){return ma(a,16,n(arguments,1))}function $b(a){return ma(a,32,null,n(arguments,1))}function _b(a,b,c){var d=!0,e=!0;if(!Ka(a))throw new Ec;return c===!1?d=!1:La(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),X.leading=d,X.maxWait=b,X.trailing=e,Ub(a,b,X)}function ac(a,b){return ma(b,16,[a])}function bc(a){return function(){return a}}function cc(a,b,c){var d=typeof a;if(null==a||"function"==d)return ca(a,b,c);if("object"!=d)return ic(a);var e=md(a),f=e[0],g=a[f];return 1!=e.length||g!==g||La(g)?function(b){for(var c=e.length,d=!1;c--&&(d=ha(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function dc(a){return null==a?"":Dc(a).replace(td,oa)}function ec(a){return a}function fc(a,b,c){var d=!0,e=b&&Ba(b);b&&(c||e.length)||(null==c&&(c=b),f=r,b=a,a=q,e=Ba(b)),c===!1?d=!1:La(c)&&"chain"in c&&(d=c.chain);var f=a,g=Ka(f);db(e,function(c){var e=a[c]=b[c];g&&(f.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,g=[c];Sc.apply(g,arguments);var h=e.apply(a,g);if(d||b){if(c===h&&La(h))return this;h=new f(h),h.__chain__=b}return h})})}function gc(){return c._=Jc,this}function hc(){}function ic(a){return function(b){return b[a]}}function jc(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=ed();return cd(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return ja(a,b)}function kc(a,b){if(a){var c=a[b];return Ka(c)?a[b]():c}}function lc(a,b,c){var d=q.templateSettings;a=Dc(a||""),c=wd({},c,d);var e,f=wd({},c.imports,d.imports),h=md(f),i=Ya(f),j=0,k=c.interpolate||G,l="__p += '",m=Cc((c.escape||G).source+"|"+k.source+"|"+(k===E?B:G).source+"|"+(c.evaluate||G).source+"|$","g");a.replace(m,function(b,c,d,f,h,i){return d||(d=f),l+=a.slice(j,i).replace(I,g),c&&(l+="' +\n__e("+c+") +\n'"),h&&(e=!0,l+="';\n"+h+";\n__p += '"),d&&(l+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),j=i+b.length,b}),l+="';\n";var n=c.variable,o=n;o||(n="obj",l="with ("+n+") {\n"+l+"\n}\n"),l=(e?l.replace(y,""):l).replace(z,"$1").replace(A,"$1;"),l="function("+n+") {\n"+(o?"":n+" || ("+n+" = {});\n")+"var __t, __p = '', __e = _.escape"+(e?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var r="\n/*\n//# sourceURL="+(c.sourceURL||"/lodash/template/source["+L++ +"]")+"\n*/";try{var s=yc(h,"return "+l+r).apply(p,i)}catch(a){throw a.source=l,a}return b?s(b):(s.source=l,s)}function mc(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=uc(a);for(b=ca(b,c,1);++d<a;)e[d]=b(d);return e}function nc(a){return null==a?"":Dc(a).replace(sd,sa)}function oc(a){var b=++s;return Dc(null==a?"":a)+b}function pc(a){return a=new r(a),a.__chain__=!0,a}function qc(a,b){return b(a),a}function rc(){return this.__chain__=!0,this}function sc(){return Dc(this.__wrapped__)}function tc(){return this.__wrapped__}c=c?fa.defaults(aa.Object(),c,fa.pick(aa,J)):aa;var uc=c.Array,vc=c.Boolean,wc=c.Date,xc=c.Error,yc=c.Function,zc=c.Math,Ac=c.Number,Bc=c.Object,Cc=c.RegExp,Dc=c.String,Ec=c.TypeError,Fc=[],Gc=xc.prototype,Hc=Bc.prototype,Ic=Dc.prototype,Jc=c._,Kc=Hc.toString,Lc=Cc("^"+Dc(Kc).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Mc=zc.ceil,Nc=c.clearTimeout,Oc=zc.floor,Pc=yc.prototype.toString,Qc=qa(Qc=Bc.getPrototypeOf)&&Qc,Rc=Hc.hasOwnProperty,Sc=Fc.push,Tc=Hc.propertyIsEnumerable,Uc=c.setTimeout,Vc=Fc.splice,Wc=Fc.unshift,Xc=function(){try{var a={},b=qa(b=Bc.defineProperty)&&b,c=b(a,a,a)&&b}catch(a){}return c}(),Yc=qa(Yc=Bc.create)&&Yc,Zc=qa(Zc=uc.isArray)&&Zc,$c=c.isFinite,_c=c.isNaN,ad=qa(ad=Bc.keys)&&ad,bd=zc.max,cd=zc.min,dd=c.parseInt,ed=zc.random,fd={};fd[N]=uc,fd[O]=vc,fd[P]=wc,fd[R]=yc,fd[T]=Bc,fd[S]=Ac,fd[U]=Cc,fd[V]=Dc;var gd={};gd[N]=gd[P]=gd[S]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},gd[O]=gd[V]={constructor:!0,toString:!0,valueOf:!0},gd[Q]=gd[R]=gd[U]={constructor:!0,toString:!0},gd[T]={constructor:!0},function(){for(var a=K.length;a--;){var b=K[a];for(var c in gd)Rc.call(gd,c)&&!Rc.call(gd[c],b)&&(gd[c][b]=!1)}}(),r.prototype=q.prototype;var hd=q.support={};!function(){var a=function(){this.x=1},b={0:1,length:1},d=[];a.prototype={valueOf:1,y:1};for(var e in new a)d.push(e);for(e in arguments);hd.argsClass=Kc.call(arguments)==M,hd.argsObject=arguments.constructor==Bc&&!(arguments instanceof uc),hd.enumErrorProps=Tc.call(Gc,"message")||Tc.call(Gc,"name"),hd.enumPrototypes=Tc.call(a,"prototype"),hd.funcDecomp=!qa(c.WinRTError)&&H.test(o),hd.funcNames="string"==typeof yc.name,hd.nonEnumArgs=0!=e,hd.nonEnumShadows=!/valueOf/.test(d),hd.ownLast="x"!=d[0],hd.spliceObjects=(Fc.splice.call(b,0,1),!b[0]),hd.unindexedChars="x"[0]+Bc("x")[0]!="xx";try{hd.nodeClass=!(Kc.call(document)==T&&!({toString:0}+""))}catch(a){hd.nodeClass=!0}}(1),q.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:E,variable:"",imports:{_:q}};var id=function(a){var b="var index, iterable = "+a.firstArg+", result = "+a.init+";\nif (!iterable) return result;\n"+a.top+";";a.array?(b+="\nvar length = iterable.length; index = -1;\nif ("+a.array+") {  ",hd.unindexedChars&&(b+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),b+="\n  while (++index < length) {\n    "+a.loop+";\n  }\n}\nelse {  "):hd.nonEnumArgs&&(b+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+a.loop+";\n    }\n  } else {  "),hd.enumPrototypes&&(b+="\n  var skipProto = typeof iterable == 'function';\n  "),hd.enumErrorProps&&(b+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var c=[];if(hd.enumPrototypes&&c.push('!(skipProto && index == "prototype")'),hd.enumErrorProps&&c.push('!(skipErrorProps && (index == "message" || index == "name"))'),a.useHas&&a.keys)b+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }  ";else if(b+="\n  for (index in iterable) {\n",a.useHas&&c.push("hasOwnProperty.call(iterable, index)"),c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }    ",hd.nonEnumShadows){for(b+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)b+="\n    index = '"+a.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",a.useHas||(b+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),b+=") {\n      "+a.loop+";\n    }      ";b+="\n  }    "}return(a.array||hd.nonEnumArgs)&&(b+="\n}"),b+=a.bottom+";\nreturn result"};Yc||(ba=function(){function a(){}return function(b){if(La(b)){a.prototype=b;var d=new a;a.prototype=null}return d||c.Object()}}());var jd=Xc?function(a,b){Y.value=b,Xc(a,"__bindData__",Y)}:hc;hd.argsClass||(ta=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Rc.call(a,"callee")&&!Tc.call(a,"callee")||!1});var kd=Zc||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kc.call(a)==N||!1},ld=na({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),md=ad?function(a){return La(a)?hd.enumPrototypes&&"function"==typeof a||hd.nonEnumArgs&&a.length&&ta(a)?ld(a):ad(a):[]}:ld,nd={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:md,loop:"if (callback(iterable[index], index, collection) === false) return result"},od={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:md,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},pd={top:"if (!objectTypes[typeof iterable]) return result;\n"+nd.top,array:!1},qd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rd=Da(qd),sd=Cc("("+md(rd).join("|")+")","g"),td=Cc("["+md(qd).join("")+"]","g"),ud=na(nd),vd=na(od,{top:od.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),wd=na(od),xd=na(nd,pd,{useHas:!1}),yd=na(nd,pd);Ka(/x/)&&(Ka=function(a){return"function"==typeof a&&Kc.call(a)==R});var zd=Qc?function(a){if(!a||Kc.call(a)!=T||!hd.argsClass&&ta(a))return!1;var b=a.valueOf,c=qa(b)&&(c=Qc(b))&&Qc(c);return c?a==c||Qc(a)==c:ra(a)}:ra,Ad=la(function(a,b,c){Rc.call(a,c)?a[c]++:a[c]=1}),Bd=la(function(a,b,c){(Rc.call(a,c)?a[c]:a[c]=[]).push(b)}),Cd=la(function(a,b,c){a[c]=b}),Dd=gb,Ed=ab,Fd=qa(Fd=wc.now)&&Fd||function(){return(new wc).getTime()},Gd=8==dd(x+"08")?dd:function(a,b){return dd(Qa(a)?a.replace(F,""):a,b||0)};return q.after=Ob,q.assign=vd,q.at=Za,q.bind=Pb,q.bindAll=Qb,q.bindKey=Rb,q.chain=pc,q.compact=sb,q.compose=Sb,q.constant=bc,q.countBy=Ad,q.create=wa,q.createCallback=cc,q.curry=Tb,q.debounce=Ub,q.defaults=wd,q.defer=Vb,q.delay=Wb,q.difference=tb,q.filter=ab,q.flatten=xb,q.forEach=db,q.forEachRight=eb,q.forIn=xd,q.forInRight=za,q.forOwn=yd,q.forOwnRight=Aa,q.functions=Ba,q.groupBy=Bd,q.indexBy=Cd,q.initial=zb,q.intersection=Ab,q.invert=Da,q.invoke=fb,q.keys=md,q.map=gb,q.mapValues=Sa,q.max=hb,q.memoize=Xb,q.merge=Ta,q.min=ib,q.omit=Ua,q.once=Yb,q.pairs=Va,q.partial=Zb,q.partialRight=$b,q.pick=Wa,q.pluck=Dd,q.property=ic,q.pull=Db,q.range=Eb,q.reject=lb,q.remove=Fb,q.rest=Gb,q.shuffle=nb,q.sortBy=qb,q.tap=qc,q.throttle=_b,q.times=mc,q.toArray=rb,q.transform=Xa,q.union=Ib,q.uniq=Jb,q.values=Ya,q.where=Ed,q.without=Kb,q.wrap=ac,q.xor=Lb,q.zip=Mb,q.zipObject=Nb,q.collect=gb,q.drop=Gb,q.each=db,q.eachRight=eb,q.extend=vd,q.methods=Ba,q.object=Nb,q.select=ab,q.tail=Gb,q.unique=Jb,q.unzip=Mb,fc(q),q.clone=ua,q.cloneDeep=va,q.contains=$a,q.escape=dc,q.every=_a,q.find=bb,q.findIndex=ub,q.findKey=xa,q.findLast=cb,q.findLastIndex=vb,q.findLastKey=ya,q.has=Ca,q.identity=ec,q.indexOf=yb,q.isArguments=ta,q.isArray=kd,q.isBoolean=Ea,q.isDate=Fa,q.isElement=Ga,q.isEmpty=Ha,q.isEqual=Ia,q.isFinite=Ja,q.isFunction=Ka,q.isNaN=Ma,q.isNull=Na,q.isNumber=Oa,q.isObject=La,q.isPlainObject=zd,q.isRegExp=Pa,q.isString=Qa,q.isUndefined=Ra,q.lastIndexOf=Cb,q.mixin=fc,q.noConflict=gc,q.noop=hc,q.now=Fd,q.parseInt=Gd,q.random=jc,q.reduce=jb,q.reduceRight=kb,q.result=kc,q.runInContext=o,q.size=ob,q.some=pb,q.sortedIndex=Hb,q.template=lc,q.unescape=nc,q.uniqueId=oc,q.all=_a,q.any=pb,q.detect=bb,q.findWhere=bb,q.foldl=jb,q.foldr=kb,q.include=$a,q.inject=jb,fc(function(){var a={};return yd(q,function(b,c){q.prototype[c]||(a[c]=b)}),a}(),!1),q.first=wb,q.last=Bb,q.sample=mb,q.take=wb,q.head=wb,yd(q,function(a,b){var c="sample"!==b;q.prototype[b]||(q.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new r(f,e):f})}),q.VERSION="2.4.1",q.prototype.chain=rc,q.prototype.toString=sc,q.prototype.value=tc,q.prototype.valueOf=tc,ud(["join","pop","shift"],function(a){var b=Fc[a];q.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);return a?new r(c,a):c}}),ud(["push","reverse","sort","unshift"],function(a){var b=Fc[a];q.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),ud(["concat","slice","splice"],function(a){var b=Fc[a];q.prototype[a]=function(){return new r(b.apply(this.__wrapped__,arguments),this.__chain__)}}),hd.spliceObjects||ud(["pop","shift","splice"],function(a){var b=Fc[a],c="splice"==a;q.prototype[a]=function(){var a=this.__chain__,d=this.__wrapped__,e=b.apply(d,arguments);return 0===d.length&&delete d[0],a||c?new r(e,a):e}}),q}var p,q=[],r=[],s=0,t={},u=+new Date+"",v=75,w=40,x=" \t\v\f¬†\ufeff\n\r\u2028\u2029·öÄ·†é‚ÄÄ‚ÄÅ‚ÄÇ‚ÄÉ‚ÄÑ‚ÄÖ‚ÄÜ‚Äá‚Äà‚Äâ‚Ää‚ÄØ‚Åü„ÄÄ",y=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,A=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,D=/^\s*function[ \n\r\t]+\w/,E=/<%=([\s\S]+?)%>/g,F=RegExp("^["+x+"]*0+(?=.$)"),G=/($^)/,H=/\bthis\b/,I=/['\n\r\t\u2028\u2029\\]/g,J=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],K=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],L=0,M="[object Arguments]",N="[object Array]",O="[object Boolean]",P="[object Date]",Q="[object Error]",R="[object Function]",S="[object Number]",T="[object Object]",U="[object RegExp]",V="[object String]",W={};W[R]=!1,W[M]=W[N]=W[O]=W[P]=W[S]=W[T]=W[U]=W[V]=!0;var X={leading:!1,maxWait:0,trailing:!1},Y={configurable:!1,enumerable:!1,value:null,writable:!1},Z={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},$={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},_={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},aa=$[typeof window]&&window||this,ba=$[typeof exports]&&exports&&!exports.nodeType&&exports,ca=$[typeof module]&&module&&!module.nodeType&&module,da=ca&&ca.exports===ba&&ba,ea=$[typeof global]&&global;!ea||ea.global!==ea&&ea.window!==ea||(aa=ea);var fa=o();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(aa._=fa,define(function(){return fa})):ba&&ca?da?(ca.exports=fa)._=fa:ba._=fa:aa._=fa}.call(this),function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,c,e,f){if(Object.defineProperty)try{return void Object.defineProperty(b,c,{configurable:!0,enumerable:!0,get:function(){return d(f),e},set:function(a){d(f),e=a}})}catch(a){}a._definePropertyBroken=!0,b[c]=e}var f={};a.migrateWarnings=[],!a.migrateMute&&b.console&&b.console.log&&b.console.log("JQMIGRATE: Logging is active"),a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(h.length<4&&d("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):("type"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return f===!0||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d("jQuery.fn.attr('"+j+"') may use property instead of attribute")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?j.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value', val) no longer sets properties"),void(a.value=b))}};var o,p,q=a.fn.init,r=a.parseJSON,s=/^([^<]*)(<[\w\W]+>)([^>]*)$/;a.fn.init=function(b,c,e){var f;return b&&"string"==typeof b&&!a.isPlainObject(c)&&(f=s.exec(a.trim(b)))&&f[0]&&("<"!==b.charAt(0)&&d("$(html) HTML strings must start with '<' character"),f[3]&&d("$(html) HTML text after last tag is ignored"),"#"===f[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),c&&c.context&&(c=c.context),a.parseHTML)?q.call(this,a.parseHTML(f[2],c,!0),c,e):q.apply(this,arguments)},a.fn.init.prototype=a.fn,a.parseJSON=function(a){return a||null===a?r.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,"browser",a.browser,"jQuery.browser is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){return e&&e instanceof a&&!(e instanceof b)&&(e=b(e)),a.fn.init.call(this,d,e,c)},b.fn.init.prototype=b.fn;var c=b(document);return d("jQuery.sub() is deprecated"),b},a.ajaxSetup({converters:{"text json":a.parseJSON}});var t=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?t.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),f)};var u=/\/(java|ecma)script/i,v=a.fn.andSelf||a.fn.addBack;a.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),v.apply(this,arguments)},a.clean||(a.clean=function(b,c,e,f){c=c||document,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,d("jQuery.clean() is deprecated");var g,h,i,j,k=[];if(a.merge(k,a.buildFragment(b,c).childNodes),e)for(i=function(a){if(!a.type||u.test(a.type))return f?f.push(a.parentNode?a.parentNode.removeChild(a):a):e.appendChild(a)},g=0;null!=(h=k[g]);g++)a.nodeName(h,"script")&&i(h)||(e.appendChild(h),"undefined"!=typeof h.getElementsByTagName&&(j=a.grep(a.merge([],h.getElementsByTagName("script")),i),k.splice.apply(k,[g+1,0].concat(j)),g+=j.length));return k});var w=a.event.add,x=a.event.remove,y=a.event.trigger,z=a.fn.toggle,A=a.fn.live,B=a.fn.die,C="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",D=new RegExp("\\b(?:"+C+")\\b"),E=/(?:^|\s)hover(\.\S+|)\b/,F=function(b){return"string"!=typeof b||a.event.special.hover?b:(E.test(b)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(E,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&e(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,e,f){a!==document&&D.test(b)&&d("AJAX events should be attached to document: "+b),w.call(this,a,F(b||""),c,e,f)},a.event.remove=function(a,b,c,d,e){x.call(this,a,F(b)||"",c,d,e)},a.fn.error=function(){var a=Array.prototype.slice.call(arguments,0);return d("jQuery.fn.error() is deprecated"),a.splice(0,0,"error"),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this)},a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return z.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,"lastToggle"+b.guid)||0)%g;return a._data(this,"lastToggle"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;g<e.length;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d("jQuery.fn.live() is deprecated"),A?A.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d("jQuery.fn.die() is deprecated"),B?B.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,e){return c||D.test(a)||d("Global events are undocumented and deprecated"),y.call(this,a,b,c||document,e)},a.each(C.split("|"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,function(){a.event.trigger(c,null,b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}})}(jQuery,window),function(a){var b=Array.prototype.slice,c={dict:null,load:function(b){null!==this.dict?a.extend(this.dict,b):this.dict=b},_:function(a){return dict=this.dict,dict&&dict.hasOwnProperty(a)&&(a=dict[a]),args=b.call(arguments),args[0]=a,this.printf.apply(this,args)},printf:function(c,d){return arguments.length<2?c:(d=a.isArray(d)?d:b.call(arguments,1),c.replace(/([^%]|^)%(?:(\d+)\$)?s/g,function(a,b,c){return c?b+d[parseInt(c)-1]:b+d.shift()}).replace(/%%s/g,"%s"))}};a.fn._t=function(b,d){return a(this).html(c._.apply(c,arguments))},a.i18n=c}(jQuery),function(a){"undefined"==typeof a.fn.each2&&a.extend(a.fn,{each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})}(jQuery),function(a,b){"use strict";function c(b){var c=a(document.createTextNode(""));b.before(c),c.before(b),c.remove()}function d(a){function b(a){return O[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function e(a,b){for(var c=0,d=b.length;c<d;c+=1)if(g(a,b[c]))return c;return-1}function f(){var b=a(N);b.appendTo(document.body);var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}function g(a,c){return a===c||a!==b&&c!==b&&(null!==a&&null!==c&&(a.constructor===String?a+""==c+"":c.constructor===String&&c+""==a+""))}function h(a,b,c){var d,e,f;if(null===a||a.length<1)return[];for(d=a.split(b),e=0,f=d.length;e<f;e+=1)d[e]=c(d[e]);return d}function i(a){return a.outerWidth(!1)-a.width()}function j(c){var d="keyup-change-value";c.on("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on("keyup",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger("keyup-change"))})}function k(c){c.on("mousemove",function(c){var d=L;d!==b&&d.x===c.pageX&&d.y===c.pageY||a(c.target).trigger("mousemove-filtered",c)})}function l(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function m(a,b){var c=l(a,function(a){b.trigger("scroll-debounced",a)});b.on("scroll",function(a){e(a.target,b.get())>=0&&c(a)})}function n(a){a[0]!==document.activeElement&&window.setTimeout(function(){var b,c=a[0],d=a.val().length;a.focus();var e=c.offsetWidth>0||c.offsetHeight>0;e&&c===document.activeElement&&(c.setSelectionRange?c.setSelectionRange(d,d):c.createTextRange&&(b=c.createTextRange(),b.collapse(!1),b.select()))},0)}function o(b){b=a(b)[0];var c=0,d=0;if("selectionStart"in b)c=b.selectionStart,d=b.selectionEnd-c;else if("selection"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart("character",-b.value.length),c=e.text.length-d}return{offset:c,length:d}}function p(a){a.preventDefault(),a.stopPropagation()}function q(a){a.preventDefault(),a.stopImmediatePropagation()}function r(b){if(!I){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);I=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),I.attr("class","select2-sizer"),a(document.body).append(I)}return I.text(b.val()),I.width()}function s(b,c,d){var e,f,g=[];e=a.trim(b.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&g.push(this)})),e=a.trim(c.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(f=d(this),f&&g.push(f))})),b.attr("class",g.join(" "))}function t(a,b,c,e){var f=d(a.toUpperCase()).indexOf(d(b.toUpperCase())),g=b.length;return f<0?void c.push(e(a)):(c.push(e(a.substring(0,f))),c.push("<span class='select2-match'>"),c.push(e(a.substring(f,f+g))),c.push("</span>"),void c.push(e(a.substring(f+g,a.length))))}function u(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function v(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this;return function(i){window.clearTimeout(d),d=window.setTimeout(function(){var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||"GET",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||"json"},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f="function"==typeof f?f.call(h,i.term,i.page,i.context):f,e&&"function"==typeof e.abort&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page,i);i.callback(b)},error:function(a,b,c){var d={hasError:!0,jqXHR:a,textStatus:b,errorThrown:c};i.callback(d)}}),e=j.call(h,l)},f)}}function w(b){var c,d,e=b,f=function(a){return""+a.text};a.isArray(e)&&(d=e,e={results:d}),a.isFunction(e)===!1&&(d=e,e=function(){return d});var g=e();return g.text&&(f=g.text,a.isFunction(f)||(c=g.text,f=function(a){return a[c]})),function(b){var c,d=b.term,g={results:[]};return""===d?void b.callback(e()):(c=function(e,g){var h,i;if(e=e[0],e.children){h={};for(i in e)e.hasOwnProperty(i)&&(h[i]=e[i]);h.children=[],a(e.children).each2(function(a,b){c(b,h.children)}),(h.children.length||b.matcher(d,f(h),e))&&g.push(h)}else b.matcher(d,f(e),e)&&g.push(e)},a(e().results).each2(function(a,b){c(b,g.results)}),void b.callback(g))}}function x(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]},h=d?c(e):c;a.isArray(h)&&(a(h).each(function(){var a=this.text!==b,c=a?this.text:this;(""===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g))}}function y(b,c){if(a.isFunction(b))return!0;if(!b)return!1;if("string"==typeof b)return!0;throw new Error(c+" must be a string, function, or falsy value")}function z(b,c){if(a.isFunction(b)){var d=Array.prototype.slice.call(arguments,2);return b.apply(c,d)}return b}function A(b){var c=0;return a.each(b,function(b,d){a(d.element).is("optgroup")?c+=A(d.children):(d.children&&d.children.length&&(c+=A(d.children)),c++)}),c}function B(a,c,d,e){var f,h,i,j,k,l=a,m=!1;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){for(h=-1,i=0,j=e.tokenSeparators.length;i<j&&(k=e.tokenSeparators[i],h=a.indexOf(k),!(h>=0));i++);if(h<0)break;if(f=a.substring(0,h),a=a.substring(h+k.length),f.length>0&&(f=e.createSearchChoice.call(this,f,c),f!==b&&null!==f&&e.id(f)!==b&&null!==e.id(f))){for(m=!1,i=0,j=c.length;i<j;i++)if(g(e.id(f),e.id(c[i]))){m=!0;break}m||d(f)}}return l!==a?a:void 0}function C(){var b=this;a.each(arguments,function(a,c){b[c].remove(),b[c]=null})}function D(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var E,F,G,H,I,J,K,L={x:0,y:0},M={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case M.LEFT:case M.RIGHT:case M.UP:case M.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case M.SHIFT:case M.CTRL:case M.ALT:return!0}return!!a.metaKey},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&a<=123}},N="<div class='select2-measure-scrollbar'></div>",O={"‚í∂":"A","Ôº°":"A","√Ä":"A","√Å":"A","√Ç":"A","·∫¶":"A","·∫§":"A","·∫™":"A","·∫®":"A","√É":"A","ƒÄ":"A","ƒÇ":"A","·∫∞":"A","·∫Æ":"A","·∫¥":"A","·∫≤":"A","»¶":"A","«†":"A","√Ñ":"A","«û":"A","·∫¢":"A","√Ö":"A","«∫":"A","«ç":"A","»Ä":"A","»Ç":"A","·∫†":"A","·∫¨":"A","·∫∂":"A","·∏Ä":"A","ƒÑ":"A","»∫":"A","‚±Ø":"A","Íú≤":"AA","√Ü":"AE","«º":"AE","«¢":"AE","Íú¥":"AO","Íú∂":"AU","Íú∏":"AV","Íú∫":"AV","Íúº":"AY","‚í∑":"B","Ôº¢":"B","·∏Ç":"B","·∏Ñ":"B","·∏Ü":"B","…É":"B","∆Ç":"B","∆Å":"B","‚í∏":"C","Ôº£":"C","ƒÜ":"C","ƒà":"C","ƒä":"C","ƒå":"C","√á":"C","·∏à":"C","∆á":"C","»ª":"C","Íúæ":"C","‚íπ":"D","Ôº§":"D","·∏ä":"D","ƒé":"D","·∏å":"D","·∏ê":"D","·∏í":"D","·∏é":"D","ƒê":"D","∆ã":"D","∆ä":"D","∆â":"D","Íùπ":"D","«±":"DZ","«Ñ":"DZ","«≤":"Dz","«Ö":"Dz","‚í∫":"E","Ôº•":"E","√à":"E","√â":"E","√ä":"E","·ªÄ":"E","·∫æ":"E","·ªÑ":"E","·ªÇ":"E","·∫º":"E","ƒí":"E","·∏î":"E","·∏ñ":"E","ƒî":"E","ƒñ":"E","√ã":"E","·∫∫":"E","ƒö":"E","»Ñ":"E","»Ü":"E","·∫∏":"E","·ªÜ":"E","»®":"E","·∏ú":"E","ƒò":"E","·∏ò":"E","·∏ö":"E","∆ê":"E","∆é":"E","‚íª":"F","Ôº¶":"F","·∏û":"F","∆ë":"F","Íùª":"F","‚íº":"G","Ôºß":"G","«¥":"G","ƒú":"G","·∏†":"G","ƒû":"G","ƒ†":"G","«¶":"G","ƒ¢":"G","«§":"G","∆ì":"G","Íû†":"G","ÍùΩ":"G","Íùæ":"G","‚íΩ":"H","Ôº®":"H","ƒ§":"H","·∏¢":"H","·∏¶":"H","»û":"H","·∏§":"H","·∏®":"H","·∏™":"H","ƒ¶":"H","‚±ß":"H","‚±µ":"H","Íûç":"H","‚íæ":"I","Ôº©":"I","√å":"I","√ç":"I","√é":"I","ƒ®":"I","ƒ™":"I","ƒ¨":"I","ƒ∞":"I","√è":"I","·∏Æ":"I","·ªà":"I","«è":"I","»à":"I","»ä":"I","·ªä":"I","ƒÆ":"I","·∏¨":"I","∆ó":"I","‚íø":"J","Ôº™":"J","ƒ¥":"J","…à":"J","‚ìÄ":"K","Ôº´":"K","·∏∞":"K","«®":"K","·∏≤":"K","ƒ∂":"K","·∏¥":"K","∆ò":"K","‚±©":"K","ÍùÄ":"K","ÍùÇ":"K","ÍùÑ":"K","Íû¢":"K","‚ìÅ":"L","Ôº¨":"L","ƒø":"L","ƒπ":"L","ƒΩ":"L","·∏∂":"L","·∏∏":"L","ƒª":"L","·∏º":"L","·∏∫":"L","≈Å":"L","»Ω":"L","‚±¢":"L","‚±†":"L","Íùà":"L","ÍùÜ":"L","ÍûÄ":"L","«á":"LJ","«à":"Lj","‚ìÇ":"M","Ôº≠":"M","·∏æ":"M","·πÄ":"M","·πÇ":"M","‚±Æ":"M","∆ú":"M","‚ìÉ":"N","ÔºÆ":"N","«∏":"N","≈É":"N","√ë":"N","·πÑ":"N","≈á":"N","·πÜ":"N","≈Ö":"N","·πä":"N","·πà":"N","»†":"N","∆ù":"N","Íûê":"N","Íû§":"N","«ä":"NJ","«ã":"Nj","‚ìÑ":"O","ÔºØ":"O","√í":"O","√ì":"O","√î":"O","·ªí":"O","·ªê":"O","·ªñ":"O","·ªî":"O","√ï":"O","·πå":"O","»¨":"O","·πé":"O","≈å":"O","·πê":"O","·πí":"O","≈é":"O","»Æ":"O","»∞":"O","√ñ":"O","»™":"O","·ªé":"O","≈ê":"O","«ë":"O","»å":"O","»é":"O","∆†":"O","·ªú":"O","·ªö":"O","·ª†":"O","·ªû":"O","·ª¢":"O","·ªå":"O","·ªò":"O","«™":"O","«¨":"O","√ò":"O","«æ":"O","∆Ü":"O","∆ü":"O","Íùä":"O","Íùå":"O","∆¢":"OI","Íùé":"OO","»¢":"OU","‚ìÖ":"P","Ôº∞":"P","·πî":"P","·πñ":"P","∆§":"P","‚±£":"P","Íùê":"P","Íùí":"P","Íùî":"P","‚ìÜ":"Q","Ôº±":"Q","Íùñ":"Q","Íùò":"Q","…ä":"Q","‚ìá":"R","Ôº≤":"R","≈î":"R","·πò":"R","≈ò":"R","»ê":"R","»í":"R","·πö":"R","·πú":"R","≈ñ":"R","·πû":"R","…å":"R","‚±§":"R","Íùö":"R","Íû¶":"R","ÍûÇ":"R","‚ìà":"S","Ôº≥":"S","·∫û":"S","≈ö":"S","·π§":"S","≈ú":"S","·π†":"S","≈†":"S","·π¶":"S","·π¢":"S","·π®":"S","»ò":"S","≈û":"S","‚±æ":"S","Íû®":"S","ÍûÑ":"S","‚ìâ":"T","Ôº¥":"T","·π™":"T","≈§":"T","·π¨":"T",
"»ö":"T","≈¢":"T","·π∞":"T","·πÆ":"T","≈¶":"T","∆¨":"T","∆Æ":"T","»æ":"T","ÍûÜ":"T","Íú®":"TZ","‚ìä":"U","Ôºµ":"U","√ô":"U","√ö":"U","√õ":"U","≈®":"U","·π∏":"U","≈™":"U","·π∫":"U","≈¨":"U","√ú":"U","«õ":"U","«ó":"U","«ï":"U","«ô":"U","·ª¶":"U","≈Æ":"U","≈∞":"U","«ì":"U","»î":"U","»ñ":"U","∆Ø":"U","·ª™":"U","·ª®":"U","·ªÆ":"U","·ª¨":"U","·ª∞":"U","·ª§":"U","·π≤":"U","≈≤":"U","·π∂":"U","·π¥":"U","…Ñ":"U","‚ìã":"V","Ôº∂":"V","·πº":"V","·πæ":"V","∆≤":"V","Íùû":"V","…Ö":"V","Íù†":"VY","‚ìå":"W","Ôº∑":"W","·∫Ä":"W","·∫Ç":"W","≈¥":"W","·∫Ü":"W","·∫Ñ":"W","·∫à":"W","‚±≤":"W","‚ìç":"X","Ôº∏":"X","·∫ä":"X","·∫å":"X","‚ìé":"Y","Ôºπ":"Y","·ª≤":"Y","√ù":"Y","≈∂":"Y","·ª∏":"Y","»≤":"Y","·∫é":"Y","≈∏":"Y","·ª∂":"Y","·ª¥":"Y","∆≥":"Y","…é":"Y","·ªæ":"Y","‚ìè":"Z","Ôº∫":"Z","≈π":"Z","·∫ê":"Z","≈ª":"Z","≈Ω":"Z","·∫í":"Z","·∫î":"Z","∆µ":"Z","»§":"Z","‚±ø":"Z","‚±´":"Z","Íù¢":"Z","‚ìê":"a","ÔΩÅ":"a","·∫ö":"a","√†":"a","√°":"a","√¢":"a","·∫ß":"a","·∫•":"a","·∫´":"a","·∫©":"a","√£":"a","ƒÅ":"a","ƒÉ":"a","·∫±":"a","·∫Ø":"a","·∫µ":"a","·∫≥":"a","»ß":"a","«°":"a","√§":"a","«ü":"a","·∫£":"a","√•":"a","«ª":"a","«é":"a","»Å":"a","»É":"a","·∫°":"a","·∫≠":"a","·∫∑":"a","·∏Å":"a","ƒÖ":"a","‚±•":"a","…ê":"a","Íú≥":"aa","√¶":"ae","«Ω":"ae","«£":"ae","Íúµ":"ao","Íú∑":"au","Íúπ":"av","Íúª":"av","ÍúΩ":"ay","‚ìë":"b","ÔΩÇ":"b","·∏É":"b","·∏Ö":"b","·∏á":"b","∆Ä":"b","∆É":"b","…ì":"b","‚ìí":"c","ÔΩÉ":"c","ƒá":"c","ƒâ":"c","ƒã":"c","ƒç":"c","√ß":"c","·∏â":"c","∆à":"c","»º":"c","Íúø":"c","‚ÜÑ":"c","‚ìì":"d","ÔΩÑ":"d","·∏ã":"d","ƒè":"d","·∏ç":"d","·∏ë":"d","·∏ì":"d","·∏è":"d","ƒë":"d","∆å":"d","…ñ":"d","…ó":"d","Íù∫":"d","«≥":"dz","«Ü":"dz","‚ìî":"e","ÔΩÖ":"e","√®":"e","√©":"e","√™":"e","·ªÅ":"e","·∫ø":"e","·ªÖ":"e","·ªÉ":"e","·∫Ω":"e","ƒì":"e","·∏ï":"e","·∏ó":"e","ƒï":"e","ƒó":"e","√´":"e","·∫ª":"e","ƒõ":"e","»Ö":"e","»á":"e","·∫π":"e","·ªá":"e","»©":"e","·∏ù":"e","ƒô":"e","·∏ô":"e","·∏õ":"e","…á":"e","…õ":"e","«ù":"e","‚ìï":"f","ÔΩÜ":"f","·∏ü":"f","∆í":"f","Íùº":"f","‚ìñ":"g","ÔΩá":"g","«µ":"g","ƒù":"g","·∏°":"g","ƒü":"g","ƒ°":"g","«ß":"g","ƒ£":"g","«•":"g","…†":"g","Íû°":"g","·µπ":"g","Íùø":"g","‚ìó":"h","ÔΩà":"h","ƒ•":"h","·∏£":"h","·∏ß":"h","»ü":"h","·∏•":"h","·∏©":"h","·∏´":"h","·∫ñ":"h","ƒß":"h","‚±®":"h","‚±∂":"h","…•":"h","∆ï":"hv","‚ìò":"i","ÔΩâ":"i","√¨":"i","√≠":"i","√Æ":"i","ƒ©":"i","ƒ´":"i","ƒ≠":"i","√Ø":"i","·∏Ø":"i","·ªâ":"i","«ê":"i","»â":"i","»ã":"i","·ªã":"i","ƒØ":"i","·∏≠":"i","…®":"i","ƒ±":"i","‚ìô":"j","ÔΩä":"j","ƒµ":"j","«∞":"j","…â":"j","‚ìö":"k","ÔΩã":"k","·∏±":"k","«©":"k","·∏≥":"k","ƒ∑":"k","·∏µ":"k","∆ô":"k","‚±™":"k","ÍùÅ":"k","ÍùÉ":"k","ÍùÖ":"k","Íû£":"k","‚ìõ":"l","ÔΩå":"l","≈Ä":"l","ƒ∫":"l","ƒæ":"l","·∏∑":"l","·∏π":"l","ƒº":"l","·∏Ω":"l","·∏ª":"l","≈ø":"l","≈Ç":"l","∆ö":"l","…´":"l","‚±°":"l","Íùâ":"l","ÍûÅ":"l","Íùá":"l","«â":"lj","‚ìú":"m","ÔΩç":"m","·∏ø":"m","·πÅ":"m","·πÉ":"m","…±":"m","…Ø":"m","‚ìù":"n","ÔΩé":"n","«π":"n","≈Ñ":"n","√±":"n","·πÖ":"n","≈à":"n","·πá":"n","≈Ü":"n","·πã":"n","·πâ":"n","∆û":"n","…≤":"n","≈â":"n","Íûë":"n","Íû•":"n","«å":"nj","‚ìû":"o","ÔΩè":"o","√≤":"o","√≥":"o","√¥":"o","·ªì":"o","·ªë":"o","·ªó":"o","·ªï":"o","√µ":"o","·πç":"o","»≠":"o","·πè":"o","≈ç":"o","·πë":"o","·πì":"o","≈è":"o","»Ø":"o","»±":"o","√∂":"o","»´":"o","·ªè":"o","≈ë":"o","«í":"o","»ç":"o","»è":"o","∆°":"o","·ªù":"o","·ªõ":"o","·ª°":"o","·ªü":"o","·ª£":"o","·ªç":"o","·ªô":"o","«´":"o","«≠":"o","√∏":"o","«ø":"o","…î":"o","Íùã":"o","Íùç":"o","…µ":"o","∆£":"oi","»£":"ou","Íùè":"oo","‚ìü":"p","ÔΩê":"p","·πï":"p","·πó":"p","∆•":"p","·µΩ":"p","Íùë":"p","Íùì":"p","Íùï":"p","‚ì†":"q","ÔΩë":"q","…ã":"q","Íùó":"q","Íùô":"q","‚ì°":"r","ÔΩí":"r","≈ï":"r","·πô":"r","≈ô":"r","»ë":"r","»ì":"r","·πõ":"r","·πù":"r","≈ó":"r","·πü":"r","…ç":"r","…Ω":"r","Íùõ":"r","Íûß":"r","ÍûÉ":"r","‚ì¢":"s","ÔΩì":"s","√ü":"s","≈õ":"s","·π•":"s","≈ù":"s","·π°":"s","≈°":"s","·πß":"s","·π£":"s","·π©":"s","»ô":"s","≈ü":"s","»ø":"s","Íû©":"s","ÍûÖ":"s","·∫õ":"s","‚ì£":"t","ÔΩî":"t","·π´":"t","·∫ó":"t","≈•":"t","·π≠":"t","»õ":"t","≈£":"t","·π±":"t","·πØ":"t","≈ß":"t","∆≠":"t"," à":"t","‚±¶":"t","Íûá":"t","Íú©":"tz","‚ì§":"u","ÔΩï":"u","√π":"u","√∫":"u","√ª":"u","≈©":"u","·ππ":"u","≈´":"u","·πª":"u","≈≠":"u","√º":"u","«ú":"u","«ò":"u","«ñ":"u","«ö":"u","·ªß":"u","≈Ø":"u","≈±":"u","«î":"u","»ï":"u","»ó":"u","∆∞":"u","·ª´":"u","·ª©":"u","·ªØ":"u","·ª≠":"u","·ª±":"u","·ª•":"u","·π≥":"u","≈≥":"u","·π∑":"u","·πµ":"u"," â":"u","‚ì•":"v","ÔΩñ":"v","·πΩ":"v","·πø":"v"," ã":"v","Íùü":"v"," å":"v","Íù°":"vy","‚ì¶":"w","ÔΩó":"w","·∫Å":"w","·∫É":"w","≈µ":"w","·∫á":"w","·∫Ö":"w","·∫ò":"w","·∫â":"w","‚±≥":"w","‚ìß":"x","ÔΩò":"x","·∫ã":"x","·∫ç":"x","‚ì®":"y","ÔΩô":"y","·ª≥":"y","√Ω":"y","≈∑":"y","·ªπ":"y","»≥":"y","·∫è":"y","√ø":"y","·ª∑":"y","·∫ô":"y","·ªµ":"y","∆¥":"y","…è":"y","·ªø":"y","‚ì©":"z","ÔΩö":"z","≈∫":"z","·∫ë":"z","≈º":"z","≈æ":"z","·∫ì":"z","·∫ï":"z","∆∂":"z","»•":"z","…Ä":"z","‚±¨":"z","Íù£":"z","ŒÜ":"Œë","Œà":"Œï","Œâ":"Œó","Œä":"Œô","Œ™":"Œô","Œå":"Œü","Œé":"Œ•","Œ´":"Œ•","Œè":"Œ©","Œ¨":"Œ±","Œ≠":"Œµ","ŒÆ":"Œ∑","ŒØ":"Œπ","œä":"Œπ","Œê":"Œπ","œå":"Œø","œç":"œÖ","œã":"œÖ","Œ∞":"œÖ","œâ":"œâ","œÇ":"œÉ"};J=a(document),H=function(){var a=1;return function(){return a++}}(),E=D(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,g=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&null!==c.element.data("select2")&&c.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=a(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(c.element.attr("id")||"autogen"+H()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",c.element.attr("title")),this.body=a(document.body),s(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",c.element.attr("style")),this.container.css(z(c.containerCss,this.opts.element)),this.container.addClass(z(c.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",p),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),s(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(z(c.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",p),this.results=d=this.container.find(g),this.search=e=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",function(b){if(!b.target||!a(b.target).is(".select2-search-choice *"))return p(b)}),k(this.results),this.dropdown.on("mousemove-filtered",g,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",g,this.bind(function(a){this._touchEvent=!0,this.highlightUnderEvent(a)})),this.dropdown.on("touchmove",g,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",g,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(a){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),m(80,this.results),this.dropdown.on("scroll-debounced",g,this.bind(this.loadMoreIfNeeded)),a(this.container).on("change",".select2-input",function(a){a.stopPropagation()}),a(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&f-e<=0?(d.scrollTop(0),p(a)):e<0&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),p(a))}),j(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",g,this.bind(function(b){a(b.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(b){var c=a.Event(b.type+".sortable");b.stopPropagation(),a(b.target).trigger(c)}),this.nextSearchTerm=b,a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr("maxlength",c.maximumInputLength);var h=c.element.prop("disabled");h===b&&(h=!1),this.enable(!h);var i=c.element.prop("readonly");i===b&&(i=!1),this.readonly(i),K=K||f(),this.autofocus=c.element.prop("autofocus"),c.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",c.searchInputPlaceholder)},destroy:function(){var a=this.opts.element,c=a.data("select2"),d=this;this.close(),a.length&&a[0].detachEvent&&d._sync&&a.each(function(){d._sync&&this.detachEvent("onpropertychange",d._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,c!==b&&(c.container.remove(),c.liveRegion.remove(),c.dropdown.remove(),a.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show()),C.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(a){return a.is("option")?{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:g(a.attr("locked"),"locked")||g(a.data("locked"),!0)}:a.is("optgroup")?{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}:void 0},prepareOpts:function(c){var d,e,f,i,j=this;if(d=c.element,"select"===d.get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),c=a.extend({},{populateResults:function(d,e,f){var g,h=this.opts.id,i=this.liveRegion;(g=function(d,e,k){var l,m,n,o,p,q,r,s,t,u;d=c.sortResults(d,e,f);var v=[];for(l=0,m=d.length;l<m;l+=1)n=d[l],p=n.disabled===!0,o=!p&&h(n)!==b,q=n.children&&n.children.length>0,r=a("<li></li>"),r.addClass("select2-results-dept-"+k),r.addClass("select2-result"),r.addClass(o?"select2-result-selectable":"select2-result-unselectable"),p&&r.addClass("select2-disabled"),q&&r.addClass("select2-result-with-children"),r.addClass(j.opts.formatResultCssClass(n)),r.attr("role","presentation"),s=a(document.createElement("div")),s.addClass("select2-result-label"),s.attr("id","select2-result-label-"+H()),s.attr("role","option"),u=c.formatResult(n,s,f,j.opts.escapeMarkup),u!==b&&(s.html(u),r.append(s)),q&&(t=a("<ul></ul>"),t.addClass("select2-result-sub"),g(n.children,t,k+1),r.append(t)),r.data("select2-data",n),v.push(r[0]);e.append(v),i.text(c.formatMatches(d.length))})(e,d,0)}},a.fn.select2.defaults,c),"function"!=typeof c.id&&(f=c.id,c.id=function(a){return a[f]}),a.isArray(c.element.data("select2Tags"))){if("tags"in c)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+c.element.attr("id");c.tags=c.element.data("select2Tags")}if(e){var k=e.hasClass("js-tree-select");c.query=this.bind(function(c){var e,f,g,h={results:[],more:!1},i=c.term;if(e=d.children(),this.getPlaceholder()!==b&&e.length>0&&(f=this.getPlaceholderOption(),f&&(e=e.not(f))),k){var l=function(b){var c=[],d=null;return b.each2(function(b,e){var f={element:a(e[0]),id:parseInt(e.data("id")),children:[]};e.is("option")?d&&d.id==parseInt(e.data("parent-id"))?d.children.push(f):(d=f,c.push(f)):e.is("optgroup")&&(f.children=l(e.children()),c.push(f),d=null)}),c};g=function(b,d){b.forEach(function(b){if(b.element.is("option")){var e=[];g(b.children,e),c.matcher(i,b.element.text(),b.element)?d.push(a.extend(j.optionToData(b.element),{children:e})):e.length>0&&d.push(a.extend(j.optionToData(b.element),{disabled:!0,children:e}))}else if(b.element.is("optgroup")){var f=j.optionToData(b.element);g(b.children,f.children),f.children.length>0&&d.push(f)}})},g(l(e),h.results)}else g=function(a,b){var d;a.is("option")?c.matcher(i,a.text(),a)&&b.push(j.optionToData(a)):a.is("optgroup")&&(d=j.optionToData(a),a.children().each2(function(a,b){g(b,d.children)}),d.children.length>0&&b.push(d))},e.each2(function(a,b){g(b,h.results)});c.callback(h)}),c.id=function(a){return a.id}}else"query"in c||("ajax"in c?(i=c.element.data("ajax-url"),i&&i.length>0&&(c.ajax.url=i),c.query=v.call(c.element,c.ajax)):"data"in c?c.query=w(c.data):"tags"in c&&(c.query=x(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(h(b.val(),c.separator,c.transformVal)).each(function(){var b={id:this,text:this},d=c.tags;a.isFunction(d)&&(d=d()),a(d).each(function(){if(g(this.id,b.id))return b=this,!1}),e.push(b)}),d(e)})));if("function"!=typeof c.query)throw"query function not defined for Select2 "+c.element.attr("id");if("top"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.unshift(b)};else if("bottom"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.push(b)};else if("function"!=typeof c.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return c},monitorSource:function(){var c,d=this.opts.element,e=this;d.on("change.select2",this.bind(function(a){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var a=d.prop("disabled");a===b&&(a=!1),this.enable(!a);var c=d.prop("readonly");c===b&&(c=!1),this.readonly(c),this.container&&(s(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(z(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(s(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(z(this.opts.dropdownCssClass,this.opts.element)))}),d.length&&d[0].attachEvent&&d.each(function(){this.attachEvent("onpropertychange",e._sync)}),c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,c!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new c(function(b){a.each(b,e._sync)}),this.propertyObserver.observe(d.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event("select2-selecting",{val:this.id(b),object:b,choice:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0),this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){a===b&&(a=!1),this._readonly!==a&&(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var b,c,d,e,f,g=this.dropdown,h=this.container,i=h.offset(),j=h.outerHeight(!1),k=h.outerWidth(!1),l=g.outerHeight(!1),m=a(window),n=m.width(),o=m.height(),p=m.scrollLeft()+n,q=m.scrollTop()+o,r=i.top+j,s=i.left,t=r+l<=q,u=i.top-l>=m.scrollTop(),v=g.outerWidth(!1),w=function(){return s+v<=p},x=function(){return i.left+p+h.outerWidth(!1)>v},y=g.hasClass("select2-drop-above");y?(c=!0,!u&&t&&(d=!0,c=!1)):(c=!1,!t&&u&&(d=!0,c=!0)),d&&(g.hide(),i=this.container.offset(),j=this.container.outerHeight(!1),k=this.container.outerWidth(!1),l=g.outerHeight(!1),p=m.scrollLeft()+n,q=m.scrollTop()+o,r=i.top+j,s=i.left,v=g.outerWidth(!1),g.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(f=a(".select2-results",g)[0],g.addClass("select2-drop-auto-width"),g.css("width",""),v=g.outerWidth(!1)+(f.scrollHeight===f.clientHeight?0:K.width),v>k?k=v:v=k,l=g.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(b=this.body.offset(),r-=b.top,s-=b.left),!w()&&x()&&(s=i.left+this.container.outerWidth(!1)-v),e={left:s,width:k},c?(e.top=i.top-l,e.bottom="auto",this.container.addClass("select2-drop-above"),g.addClass("select2-drop-above")):(e.top=r,e.bottom="auto",this.container.removeClass("select2-drop-above"),g.removeClass("select2-drop-above")),e=a.extend(e,z(this.opts.dropdownCss,this.opts.element)),g.css(e)},shouldOpen:function(){var b;return!this.opened()&&(this._enabled!==!1&&this._readonly!==!0&&(b=a.Event("select2-opening"),this.opts.element.trigger(b),!b.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),J.on("mousemove.select2Event",function(a){L.x=a.pageX,L.y=a.pageY}),!0)},opening:function(){var b,d=this.containerEventName,e="scroll."+d,f="resize."+d,g="orientationchange."+d;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),b=a("#select2-drop-mask"),0===b.length&&(b=a(document.createElement("div")),b.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),b.hide(),b.appendTo(this.body),b.on("mousedown touchstart click",function(d){c(b);var e,f=a("#select2-drop");f.length>0&&(e=f.data("select2"),e.opts.selectOnBlur&&e.selectHighlighted({noFocus:!0}),e.close(),d.preventDefault(),d.stopPropagation())})),this.dropdown.prev()[0]!==b[0]&&this.dropdown.before(b),a("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),b.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var h=this;this.container.parents().add(window).each(function(){a(this).on(f+" "+e+" "+g,function(a){h.opened()&&h.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),J.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(a.Event("select2-close"))}},externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return z(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var b,c,d,e,f,g,h,i,j=this.results;if(c=this.highlight(),!(c<0)){if(0==c)return void j.scrollTop(0);b=this.findHighlightableChoices().find(".select2-result-label"),d=a(b[c]),i=(d.offset()||{}).top||0,e=i+d.outerHeight(!0),c===b.length-1&&(h=j.find("li.select2-more-results"),h.length>0&&(e=h.offset().top+h.outerHeight(!0))),f=j.offset().top+j.outerHeight(!1),e>f&&j.scrollTop(j.scrollTop()+(e-f)),g=i-j.offset().top,g<0&&"none"!=d.css("display")&&j.scrollTop(j.scrollTop()+g)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();d>-1&&d<c.length;){d+=b;var e=a(c[d]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")&&!e.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(b){var c,d,f=this.findHighlightableChoices();return 0===arguments.length?e(f.filter(".select2-highlighted")[0],f.get()):(b>=f.length&&(b=f.length-1),b<0&&(b=0),this.removeHighlight(),c=a(f[b]),c.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",c.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(c.text()),d=c.data("select2-data"),void(d&&this.opts.element.trigger({type:"select2-highlight",val:this.id(d),choice:d})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable");if(c.length>0&&!c.is(".select2-highlighted")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a,b=this.results,c=b.find("li.select2-more-results"),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==c.length&&(a=c.offset().top-b.offset().top-b.height(),a<=this.opts.loadMorePadding&&(c.addClass("select2-active"),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(a){e.opened()&&(e.opts.populateResults.call(this,b,a.results,{term:f,page:d,context:g}),e.postprocessResults(a,!1,!1),a.more===!0?(c.detach().appendTo(b).html(e.opts.escapeMarkup(z(e.opts.formatLoadMore,e.opts.element,d+1))),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):c.remove(),e.positionDropdown(),e.resultsPage=d,e.context=a.context,this.opts.element.trigger({type:"select2-loaded",items:a}))})})))},tokenize:function(){},updateResults:function(c){function d(){j.removeClass("select2-active"),m.positionDropdown(),k.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?m.liveRegion.text(k.text()):m.liveRegion.text(m.opts.formatMatches(k.find('.select2-result-selectable:not(".select2-selected")').length))}function e(a){k.html(a),d()}var f,h,i,j=this.search,k=this.results,l=this.opts,m=this,n=j.val(),o=a.data(this.container,"select2-last-term");if((c===!0||!o||!g(n,o))&&(a.data(this.container,"select2-last-term",n),c===!0||this.showSearchInput!==!1&&this.opened())){i=++this.queryCount;var p=this.getMaximumSelectionSize();if(p>=1&&(f=this.data(),a.isArray(f)&&f.length>=p&&y(l.formatSelectionTooBig,"formatSelectionTooBig")))return void e("<li class='select2-selection-limit'>"+z(l.formatSelectionTooBig,l.element,p)+"</li>");if(j.val().length<l.minimumInputLength)return e(y(l.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+z(l.formatInputTooShort,l.element,j.val(),l.minimumInputLength)+"</li>":""),void(c&&this.showSearch&&this.showSearch(!0));if(l.maximumInputLength&&j.val().length>l.maximumInputLength)return void e(y(l.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+z(l.formatInputTooLong,l.element,j.val(),l.maximumInputLength)+"</li>":"");l.formatSearching&&0===this.findHighlightableChoices().length&&e("<li class='select2-searching'>"+z(l.formatSearching,l.element)+"</li>"),j.addClass("select2-active"),this.removeHighlight(),h=this.tokenize(),h!=b&&null!=h&&j.val(h),this.resultsPage=1,l.query({element:l.element,term:j.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind(function(f){var h;if(i==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(f.hasError!==b&&y(l.formatAjaxError,"formatAjaxError"))return void e("<li class='select2-ajax-error'>"+z(l.formatAjaxError,l.element,f.jqXHR,f.textStatus,f.errorThrown)+"</li>");if(this.context=f.context===b?null:f.context,this.opts.createSearchChoice&&""!==j.val()&&(h=this.opts.createSearchChoice.call(m,j.val(),f.results),h!==b&&null!==h&&m.id(h)!==b&&null!==m.id(h)&&0===a(f.results).filter(function(){return g(m.id(this),m.id(h))}).length&&this.opts.createSearchChoicePosition(f.results,h)),0===f.results.length&&y(l.formatNoMatches,"formatNoMatches"))return void e("<li class='select2-no-results'>"+z(l.formatNoMatches,l.element,j.val())+"</li>");k.empty(),m.opts.populateResults.call(this,k,f.results,{term:j.val(),page:this.resultsPage,context:null}),f.more===!0&&y(l.formatLoadMore,"formatLoadMore")&&(k.append("<li class='select2-more-results'>"+l.escapeMarkup(z(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout(function(){m.loadMoreIfNeeded()},10)),this.postprocessResults(f,c),d(),this.opts.element.trigger({type:"select2-loaded",items:f})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){n(this.search)},selectHighlighted:function(a){if(this._touchMoved)return void this.clearTouchMoved();var b=this.highlight(),c=this.results.find(".select2-highlighted"),d=c.closest(".select2-result").data("select2-data");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)},getPlaceholderOption:function(){if(this.select){var c=this.select.children("option").first();if(this.opts.placeholderOption!==b)return"first"===this.opts.placeholderOption&&c||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.trim(c.text())&&""===c.val())return c}},initContainerWidth:function(){function c(){var c,d,e,f,g,h;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(c=this.opts.element.attr("style"),c!==b)for(d=c.split(";"),f=0,g=d.length;f<g;f+=1)if(h=d[f].replace(/\s/g,""),e=h.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==e&&e.length>=1)return e[1];return"resolve"===this.opts.width?(c=this.opts.element.css("width"),c.indexOf("%")>0?c:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.css("width",d)}}),F=D(E,{createContainer:function(){var b=a(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return b},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var c,d,e;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),c=this.search.get(0),c.createTextRange?(d=c.createTextRange(),d.collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e))),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){a("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"selection","focusser")},initContainer:function(){var b,d,e=this.container,f=this.dropdown,g=H();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=b=e.find(".select2-choice"),this.focusser=e.find(".select2-focusser"),b.find(".select2-chosen").attr("id","select2-chosen-"+g),this.focusser.attr("aria-labelledby","select2-chosen-"+g),this.results.attr("id","select2-results-"+g),this.search.attr("aria-owns","select2-results-"+g),this.focusser.attr("id","s2id_autogen"+g),d=a("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(d.text()).attr("for",this.focusser.attr("id"));var h=this.opts.element.attr("title");this.opts.element.attr("title",h||d.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(a("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&229!=a.keyCode){if(a.which===M.PAGE_UP||a.which===M.PAGE_DOWN)return void p(a);switch(a.which){case M.UP:case M.DOWN:return this.moveHighlight(a.which===M.UP?-1:1),void p(a);case M.ENTER:return this.selectHighlighted(),void p(a);case M.TAB:return void this.selectHighlighted({noFocus:!0});case M.ESC:return this.cancel(a),void p(a)}}})),this.search.on("blur",this.bind(function(a){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==M.TAB&&!M.isControl(a)&&!M.isFunctionKey(a)&&a.which!==M.ESC){if(this.opts.openOnEnter===!1&&a.which===M.ENTER)return void p(a);if(a.which==M.DOWN||a.which==M.UP||a.which==M.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;return this.open(),void p(a)}return a.which==M.DELETE||a.which==M.BACKSPACE?(this.opts.allowClear&&this.clear(),void p(a)):void 0}})),j(this.focusser),this.focusser.on("keyup-change input",this.bind(function(a){if(this.opts.minimumResultsForSearch>=0){if(a.stopPropagation(),this.opened())return;this.open()}})),b.on("mousedown touchstart","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),q(a),this.close(),this.selection&&this.selection.focus())})),b.on("mousedown touchstart",this.bind(function(d){c(b),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),p(d)})),f.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),b.on("focus",this.bind(function(a){p(a)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(a.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),
this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(b){var c=this.selection.data("select2-data");if(c){var d=a.Event("select2-clearing");if(this.opts.element.trigger(d),d.isDefaultPrevented())return;var e=this.getPlaceholderOption();this.opts.element.val(e?e.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),b!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.setPlaceholder(),a.nextSearchTerm=a.opts.nextSearchTerm(c,a.search.val()))})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()!==b&&((a=this.getPlaceholderOption())!==b&&a.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val())},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find("option").filter(function(){return this.selected&&!this.disabled});b(c.optionToData(d))}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null;b.query({matcher:function(a,c,d){var h=g(e,b.id(d));return h&&(f=d),h},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(this.select&&this.getPlaceholderOption()===b)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(a,b,c){var d=0,e=this;if(this.findHighlightableChoices().each2(function(a,b){if(g(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1}),c!==!1&&(b===!0&&d>=0?this.highlight(d):this.highlight(0)),b===!0){var f=this.opts.minimumResultsForSearch;f>=0&&this.showSearch(A(a.results)>=f)}},showSearch:function(b){this.showSearchInput!==b&&(this.showSearchInput=b,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!b),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!b),a(this.dropdown,this.container).toggleClass("select2-with-searchbox",b))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),b&&b.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),g(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(c){var d,e,f=this.selection.find(".select2-chosen");this.selection.data("select2-data",c),f.empty(),null!==c&&(d=this.opts.formatSelection(c,f,this.opts.escapeMarkup),f.prop("title",a(c.element).prop("title")||c.text)),d!==b&&f.append(d),e=this.opts.formatSelectionCssClass(c,f),e!==b&&f.addClass(e),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass("select2-allowclear")},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],arguments.length>1&&(c=arguments[1]),this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&0!==a)return void this.clear(c);if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):""),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(a){var c,d=!1;return 0===arguments.length?(c=this.selection.data("select2-data"),c==b&&(c=null),c):(arguments.length>1&&(d=arguments[1]),void(a?(c=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d)))}}),G=D(E,{createContainer:function(){var b=a(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=h(c.val(),b.separator,b.transformVal),f=[];b.query({matcher:function(c,d,h){var i=a.grep(e,function(a){return g(a,b.id(h))}).length;return i&&f.push(h),i},callback:a.isFunction(d)?function(){for(var a=[],c=0;c<e.length;c++)for(var h=e[c],i=0;i<f.length;i++){var j=f[i];if(g(h,b.id(j))){a.push(j),f.splice(i,1);break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a)))},destroy:function(){a("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"searchContainer","selection")},initContainer:function(){var b,c=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=b=this.container.find(c);var d=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(b){d.search[0].focus(),d.selectChoice(a(this))}),this.search.attr("id","s2id_autogen"+H()),this.search.prev().text(a("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;var c=b.find(".select2-search-choice-focus"),d=c.prev(".select2-search-choice:not(.select2-locked)"),e=c.next(".select2-search-choice:not(.select2-locked)"),f=o(this.search);if(c.length&&(a.which==M.LEFT||a.which==M.RIGHT||a.which==M.BACKSPACE||a.which==M.DELETE||a.which==M.ENTER)){var g=c;return a.which==M.LEFT&&d.length?g=d:a.which==M.RIGHT?g=e.length?e:null:a.which===M.BACKSPACE?this.unselect(c.first())&&(this.search.width(10),g=d.length?d:e):a.which==M.DELETE?this.unselect(c.first())&&(this.search.width(10),g=e.length?e:null):a.which==M.ENTER&&(g=null),this.selectChoice(g),p(a),void(g&&g.length||this.open())}if((a.which===M.BACKSPACE&&1==this.keydowns||a.which==M.LEFT)&&0==f.offset&&!f.length)return this.selectChoice(b.find(".select2-search-choice:not(.select2-locked)").last()),void p(a);if(this.selectChoice(null),this.opened())switch(a.which){case M.UP:case M.DOWN:return this.moveHighlight(a.which===M.UP?-1:1),void p(a);case M.ENTER:return this.selectHighlighted(),void p(a);case M.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case M.ESC:return this.cancel(a),void p(a)}if(a.which!==M.TAB&&!M.isControl(a)&&!M.isFunctionKey(a)&&a.which!==M.BACKSPACE&&a.which!==M.ESC){if(a.which===M.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),a.which!==M.PAGE_UP&&a.which!==M.PAGE_DOWN||p(a),a.which===M.ENTER&&p(a)}}})),this.search.on("keyup",this.bind(function(a){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(b){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event("select2-blur"))})),this.container.on("click",c,this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on("focus",c,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.search.width(c>0?c:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var c=[],d=[],f=this;a(b).each(function(){e(f.id(this),c)<0&&(c.push(f.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){f.addSelectedChoice(this)}),f.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,c){this.triggerSelect(a)&&""!==a.text&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(a,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),c&&c.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var d,e,f=!c.locked,g=a("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),h=a("<li class='select2-search-choice select2-locked'><div></div></li>"),i=f?g:h,j=this.id(c),k=this.getVal();d=this.opts.formatSelection(c,i.find("div"),this.opts.escapeMarkup),d!=b&&i.find("div").replaceWith(a("<div></div>").html(d)),e=this.opts.formatSelectionCssClass(c,i.find("div")),e!=b&&i.addClass(e),f&&i.find(".select2-search-choice-close").on("mousedown",p).on("click dblclick",this.bind(function(b){this.isInterfaceEnabled()&&(this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),p(b),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),i.data("select2-data",c),i.insertBefore(this.searchContainer),k.push(j),this.setVal(k)},unselect:function(b){var c,d,f=this.getVal();if(b=b.closest(".select2-search-choice"),0===b.length)throw"Invalid argument: "+b+". Must be .select2-search-choice";if(c=b.data("select2-data")){var g=a.Event("select2-removing");if(g.val=this.id(c),g.choice=c,this.opts.element.trigger(g),g.isDefaultPrevented())return!1;for(;(d=e(this.id(c),f))>=0;)f.splice(d,1),this.setVal(f),this.select&&this.postprocessResults();return b.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}),!0}},postprocessResults:function(a,b,c){var d=this.getVal(),f=this.results.find(".select2-result"),g=this.results.find(".select2-result-with-children"),h=this;f.each2(function(a,b){var c=h.id(b.data("select2-data"));e(c,d)>=0&&(b.is("optgroup")?(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected")):b.find(".select2-result-selectable").length>0?b.addClass("select2-disabled"):b.addClass("select2-selected"))}),g.each2(function(a,b){0===b.find(".select2-result-selectable:not(.select2-selected)").length&&(b.is(".select2-result-selectable")&&!b.is(".select2-disabled")||b.addClass("select2-selected"))}),this.highlight()==-1&&c!==!1&&this.opts.closeOnSelect===!0&&h.highlight(0),!this.opts.createSearchChoice&&!f.filter(".select2-result:not(.select2-selected)").length>0&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&y(h.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+z(h.opts.formatNoMatches,h.opts.element,h.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-i(this.search)},resizeSearch:function(){var a,b,c,d,e,f=i(this.search);a=r(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,e<a&&(e=c-f),e<40&&(e=c-f),e<=0&&(e=a),this.search.width(Math.floor(e))},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),h(a,this.opts.separator,this.opts.transformVal))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){e(this,c)<0&&c.push(this)}),this.opts.element.val(0===c.length?"":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)g(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c>0&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if(e=this.data(),e.length||(e=[]),!c&&0!==c)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(d&&this.triggerChange({added:this.data(),removed:e}));if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,f.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(b,c){var d,e,f=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get():(e=this.data(),b||(b=[]),d=a.map(b,function(a){return f.opts.id(a)}),this.setVal(d),this.updateSelection(b),this.clearSearch(),c&&this.triggerChange(this.buildChangeDetails(e,this.data())),void 0)}}),a.fn.select2=function(){var c,d,f,g,h,i=Array.prototype.slice.call(arguments,0),j=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],k=["opened","isFocused","container","dropdown"],l=["val","data"],m={search:"externalSearch"};return this.each(function(){if(0===i.length||"object"==typeof i[0])c=0===i.length?{}:a.extend({},i[0]),c.element=a(this),"select"===c.element.get(0).tagName.toLowerCase()?h=c.element.prop("multiple"):(h=c.multiple||!1,"tags"in c&&(c.multiple=h=!0)),d=h?new window.Select2.class.multi:new window.Select2.class.single,d.init(c);else{if("string"!=typeof i[0])throw"Invalid arguments to select2 plugin: "+i;if(e(i[0],j)<0)throw"Unknown method: "+i[0];if(g=b,d=a(this).data("select2"),d===b)return;if(f=i[0],"container"===f?g=d.container:"dropdown"===f?g=d.dropdown:(m[f]&&(f=m[f]),g=d[f].apply(d,i.slice(1))),e(i[0],k)>=0||e(i[0],l)>=0&&1==i.length)return!1}}),g===b?this:g},a.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){var e=[];return t(this.text(a),c.term,e,d),e.join("")},transformVal:function(b){return a.trim(b)},formatSelection:function(a,c,d){return a?d(this.text(a)):b},sortResults:function(a,b,c){return a},formatResultCssClass:function(a){return a.css},formatSelectionCssClass:function(a,c){return b},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a==b?null:a.id},text:function(b){return b&&this.data&&this.data.text?a.isFunction(this.data.text)?this.data.text(b):b[this.data.text]:b.text},matcher:function(a,b){return d(""+b).toUpperCase().indexOf(d(""+a).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:B,escapeMarkup:u,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(a){return null},nextSearchTerm:function(a,c){return b},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(a){var b="ontouchstart"in window||navigator.msMaxTouchPoints>0;return!b||!(a.opts.minimumResultsForSearch<0)}},a.fn.select2.locales=[],a.fn.select2.locales.en={formatMatches:function(a){return 1===a?"One result is available, press enter to select it.":a+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(a,b,c){return"Loading failed"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" or more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(a){return"Loading more results‚Ä¶"},formatSearching:function(){return"Searching‚Ä¶"}},a.extend(a.fn.select2.defaults,a.fn.select2.locales.en),a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:v,local:w,tags:x},util:{debounce:l,markMatch:t,escapeMarkup:u,stripDiacritics:d},class:{abstract:E,single:F,multi:G}}}}(jQuery);var EndlessScroll;if(EndlessScroll=function(){function a(a,c){var d=this;this.options=$.extend({},b,c),this.firing=!0,this.fired=!1,this.fireSequence=0,this.didScroll=!1,this.isScrollable=!0,this.target=a,this.targetId="",this.content="",this.innerWrap=$(".endless_scroll_inner_wrap",this.target),this.options.data&&(this.options.content=this.options.data),$(a).scroll(function(){return d.didScroll=!0,d.target=a,d.targetId=$(d.target).attr("id")})}var b;return a.name="EndlessScroll",b={bottomPixels:50,fireOnce:!0,fireDelay:150,loader:"Loading...",content:"",insertAfter:"div:last",intervalFrequency:250,resetCounter:function(){return!1},callback:function(){return!0},ceaseFire:function(){return!1}},a.prototype.run=function(){var a=this;return setInterval(function(){if(a.shouldTryFiring()){if(a.didScroll=!1,a.ceaseFireWhenNecessary())return;if(a.shouldBeFiring())return a.resetFireSequenceWhenNecessary(),a.acknowledgeFiring(),a.insertLoader(),a.hasContent()&&(a.showContent(),a.fireCallback(),a.delayFireingWhenNecessary()),a.removeLoader()}},this.options.intervalFrequency)},a.prototype.shouldTryFiring=function(){return this.didScroll&&this.firing===!0},a.prototype.ceaseFireWhenNecessary=function(){return!!this.options.ceaseFire.apply(this.target,[this.fireSequence])&&(this.firing=!1,!0)},a.prototype.wrapContainer=function(){if(0===this.innerWrap.length)return this.innerWrap=$(this.target).wrapInner('<div class="endless_scroll_inner_wrap" />').find(".endless_scroll_inner_wrap")},a.prototype.isScrollableOrNot=function(){return this.target===document||this.target===window?this.isScrollable=$(document).height()-$(window).height()<=$(window).scrollTop()+this.options.bottomPixels:(this.wrapContainer(),this.isScrollable=this.innerWrap.length>0&&this.innerWrap.height()-$(this.target).height()<=$(this.target).scrollTop()+this.options.bottomPixels)},a.prototype.shouldBeFiring=function(){return this.isScrollableOrNot(),this.isScrollable&&(this.options.fireOnce===!1||this.options.fireOnce===!0&&this.fired!==!0)},a.prototype.resetFireSequenceWhenNecessary=function(){if(this.options.resetCounter.apply(this.target)===!0)return this.fireSequence=0},a.prototype.acknowledgeFiring=function(){return this.fired=!0,this.fireSequence++},a.prototype.insertLoader=function(){return $(this.options.insertAfter).after('<div class="endless_scroll_loader_'+this.targetId+' endless_scroll_loader">'+this.options.loader+"</div>")},a.prototype.removeLoader=function(){return $(".endless_scroll_loader_"+this.targetId).fadeOut(function(){return $(this).remove()})},a.prototype.hasContent=function(){return"function"==typeof this.options.content?this.content=this.options.content.apply(this.target,[this.fireSequence]):this.content=this.options.content,this.content!==!1},a.prototype.showContent=function(){return $(this.options.insertAfter).after('<div id="endless_scroll_content">'+this.content+"</div>"),$("#endless_scroll_content").hide().fadeIn(250,function(){return $(this).removeAttr("id")})},a.prototype.fireCallback=function(){return this.options.callback.apply(this.target,[this.fireSequence])},a.prototype.delayFireingWhenNecessary=function(){var a=this;return this.options.fireDelay>0?($("body").after('<div id="endless_scroll_marker"></div>'),$("#endless_scroll_marker").fadeTo(this.options.fireDelay,1,function(){return $("#endless_scroll_marker").remove(),a.fired=!1})):this.fired=!1},a}(),function(a){return a.fn.endlessScroll=function(a){return new EndlessScroll(this,a).run()}}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||b.preventDropdownClose||(a(e).remove(),a(f).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(document).find(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.2.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(d),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f+', [role="menu"], [role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.2.0",c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one("bsTransitionEnd",function(){c.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(300):c.$element.trigger("focus").trigger(e)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),this.$backdrop.on("click.dismiss.bs.modal",a.proxy(function(a){this.hide.call(this)},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(150):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var f=function(){c.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(150):f()}else b&&b()},c.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,""),g=a(document).find(f),h=g.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},g.data(),d.data());d.is("a")&&c.preventDefault(),g.one("show.bs.modal",function(a){a.isDefaultPrevented()||g.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(g,h,this)})}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.2.0",c.DEFAULTS={animation:!0,placement:"top",
selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(document.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade"),e.detach().css({top:0,left:0,display:"block"}).data("bs."+this.type,this),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.addClass(g);var j=this.getPosition(),k=e[0].offsetWidth,l=e[0].offsetHeight;if(i){var m=g,n=this.$element.parent(),o=this.getPosition(n);g="bottom"==g&&j.top+j.height+l-o.scroll>o.height?"top":"top"==g&&j.top-o.scroll-l<0?"bottom":"right"==g&&j.right+k>o.width?"left":"left"==g&&j.left-k<o.left?"right":g,e.removeClass(m).addClass(g)}var p=this.getCalculatedOffset(g,j,k,l);this.applyPlacement(p,g);var q=function(){d.$element.trigger("shown.bs."+d.type),d.hoverState=null};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(150):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=k.left?2*k.left-e+i:2*k.top-f+j,m=k.left?"left":"top",n=k.left?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(l,d[0][n],m)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);if(this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),!e.isDefaultPrevented())return d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",b).emulateTransitionEnd(150):b(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName;return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():null,{scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop(),width:d?a(window).width():b.outerWidth(),height:d?a(window).height():b.outerHeight()},d?{top:0,left:0}:b.offset())},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.validate=function(){document.contains(this.$element[0])||(this.hide(),this.$element=null,this.options=null)},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var d=a.fn.bsTooltip;a.fn.bsTooltip=b,a.fn.bsTooltip.Constructor=c,a.fn.bsTooltip.noConflict=function(){return a.fn.bsTooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.bsTooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.2.0",c.DEFAULTS=a.extend({},a.fn.bsTooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.bsTooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").empty()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),function(a,b){if("function"==typeof define&&define.amd)define(["jquery"],b);else if("object"==typeof module&&module.exports){var c;try{c=require("jquery")}catch(a){c=null}module.exports=b(c)}else a.Slider=b(a.jQuery)}(this,function(a){var b;return function(a){"use strict";function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;h<i;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l&&l!==k)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}var m=this.map(function(){var d=a.data(this,b);return d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d)),a(this)});return!m||m.length>1?m:m[0]}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;c(a)}(a),function(a){function c(b,c){function d(a,b){var c="data-slider-"+b.replace(/_/g,"-"),d=a.getAttribute(c);try{return JSON.parse(d)}catch(a){return d}}"string"==typeof b?this.element=document.querySelector(b):b instanceof HTMLElement&&(this.element=b),c=c?c:{};for(var f=Object.keys(this.defaultOptions),g=0;g<f.length;g++){var h=f[g],i=c[h];i="undefined"!=typeof i?i:d(this.element,h),i=null!==i?i:this.defaultOptions[h],this.options||(this.options={}),this.options[h]=i}var j,k,l,m,n,o=this.element.style.width,p=!1,q=this.element.parentNode;if(this.sliderElem)p=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var r=document.createElement("div");if(r.className="slider-track",k=document.createElement("div"),k.className="slider-track-low",j=document.createElement("div"),j.className="slider-selection",l=document.createElement("div"),l.className="slider-track-high",m=document.createElement("div"),m.className="slider-handle min-slider-handle",n=document.createElement("div"),n.className="slider-handle max-slider-handle",r.appendChild(k),r.appendChild(j),r.appendChild(l),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(g=0;g<this.options.ticks.length;g++){var s=document.createElement("div");s.className="slider-tick",this.ticks.push(s),r.appendChild(s)}j.className+=" tick-slider-selection"}if(r.appendChild(m),r.appendChild(n),this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",g=0;g<this.options.ticks_labels.length;g++){var t=document.createElement("div");t.className="slider-tick-label",t.innerHTML=this.options.ticks_labels[g],this.tickLabels.push(t),this.tickLabelContainer.appendChild(t)}var u=function(a){var b=document.createElement("div");b.className="tooltip-arrow";var c=document.createElement("div");c.className="tooltip-inner",a.appendChild(b),a.appendChild(c)},v=document.createElement("div");v.className="tooltip tooltip-main",u(v);var w=document.createElement("div");w.className="tooltip tooltip-min",u(w);var x=document.createElement("div");x.className="tooltip tooltip-max",u(x),this.sliderElem.appendChild(r),this.sliderElem.appendChild(v),this.sliderElem.appendChild(w),this.sliderElem.appendChild(x),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),q.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(a&&(this.$element=a(this.element),this.$sliderElem=a(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),e[this.options.scale]&&(this.options.scale=e[this.options.scale]),p===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(a){this._removeProperty(this.trackLow,a),this._removeProperty(this.trackSelection,a),this._removeProperty(this.trackHigh,a)},this),[this.handle1,this.handle2].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top"),this._removeProperty(a,"margin-left"),this._removeProperty(a,"margin-top"),this._removeClass(a,"right"),this._removeClass(a,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight",this._addClass(this.tooltip,"right"),this.tooltip.style.left="100%",this._addClass(this.tooltip_min,"right"),this.tooltip_min.style.left="100%",this._addClass(this.tooltip_max,"right"),this.tooltip_max.style.left="100%"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=o,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth",this._addClass(this.tooltip,"top"),this.tooltip.style.top=-this.tooltip.outerHeight-14+"px",this._addClass(this.tooltip_min,"top"),this.tooltip_min.style.top=-this.tooltip_min.outerHeight-14+"px",this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=-this.tooltip_max.outerHeight-14+"px"),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?this.options.range=!0:this.options.range&&(this.options.value=[this.options.value,this.options.max]),this.trackLow=k||this.trackLow,this.trackSelection=j||this.trackSelection,this.trackHigh=l||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=m||this.handle1,this.handle2=n||this.handle2,p===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),g=0;g<this.ticks.length;g++)this._removeClass(this.ticks[g],"round triangle hide");var y=["round","triangle","custom"],z=y.indexOf(this.options.handle)!==-1;if(z)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),g=0;g<this.ticks.length;g++)this._addClass(this.ticks[g],this.options.handle);this.offset=this._offset(this.sliderElem),this.size=this.sliderElem[this.sizePos],this.setValue(this.options.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchCapable&&this.sliderElem.addEventListener("touchstart",this.mousedown,!1),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var d={formatInvalidInputErrorMsg:function(a){return"Invalid input value '"+a+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},e={linear:{toValue:function(a){var b=a/100*(this.options.max-this.options.min);if(this.options.ticks_positions.length>0){for(var c,d,e,f=0,g=0;g<this.options.ticks_positions.length;g++)if(a<=this.options.ticks_positions[g]){c=g>0?this.options.ticks[g-1]:0,e=g>0?this.options.ticks_positions[g-1]:0,d=this.options.ticks[g],f=this.options.ticks_positions[g];break}if(g>0){var h=(a-e)/(f-e);b=c+h*(d-c)}}var i=this.options.min+Math.round(b/this.options.step)*this.options.step;return i<this.options.min?this.options.min:i>this.options.max?this.options.max:i},toPercentage:function(a){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var b,c,d,e=0,f=0;f<this.options.ticks.length;f++)if(a<=this.options.ticks[f]){b=f>0?this.options.ticks[f-1]:0,d=f>0?this.options.ticks_positions[f-1]:0,c=this.options.ticks[f],e=this.options.ticks_positions[f];break}if(f>0){var g=(a-b)/(c-b);return d+g*(e-d)}}return 100*(a-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(a){var b=0===this.options.min?0:Math.log(this.options.min),c=Math.log(this.options.max),d=Math.exp(b+(c-b)*a/100);return d=this.options.min+Math.round((d-this.options.min)/this.options.step)*this.options.step,d<this.options.min?this.options.min:d>this.options.max?this.options.max:d},toPercentage:function(a){if(this.options.max===this.options.min)return 0;var b=Math.log(this.options.max),c=0===this.options.min?0:Math.log(this.options.min),d=0===a?0:Math.log(a);return 100*(d-c)/(b-c)}}};if(b=function(a,b){return c.call(this,a,b),this},b.prototype={_init:function(){},constructor:b,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(a){return Array.isArray(a)?a[0]+" : "+a[1]:a},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1},over:!1,inDrag:!1,getValue:function(){return this.options.range?this.options.value:this.options.value[0]},setValue:function(a,b,c){a||(a=0);var d=this.getValue();this.options.value=this._validateInputValue(a);var e=this._applyPrecision.bind(this);this.options.range?(this.options.value[0]=e(this.options.value[0]),this.options.value[1]=e(this.options.value[1]),this.options.value[0]=Math.max(this.options.min,Math.min(this.options.max,this.options.value[0])),this.options.value[1]=Math.max(this.options.min,Math.min(this.options.max,this.options.value[1]))):(this.options.value=e(this.options.value),this.options.value=[Math.max(this.options.min,Math.min(this.options.max,this.options.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this.options.value[1]=this.options.max:this.options.value[1]=this.options.min),this.options.max>this.options.min?this.percentage=[this._toPercentage(this.options.value[0]),this._toPercentage(this.options.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this.percentage=[0,0,100],this._layout();var f=this.options.range?this.options.value:this.options.value[0];return b===!0&&this._trigger("slide",f),d!==f&&c===!0&&this._trigger("change",{oldValue:d,newValue:f}),this._setDataVal(f),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),a&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this.options.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this.options.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this.options.enabled?this.disable():this.enable(),this},isEnabled:function(){return this.options.enabled},on:function(a,b){return this._bindNonQueryEventHandler(a,b),this},getAttribute:function(a){return a?this.options[a]:this.options},setAttribute:function(a,b){return this.options[a]=b,this},refresh:function(){return this._removeSliderEventHandlers(),c.call(this,this.element,this.options),a&&a.data(this.element,"slider",this),this},relayout:function(){return this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.handle2.removeEventListener("focus",this.handle2Keydown,!1),this.handle2.removeEventListener("blur",this.handle2Keydown,!1),this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.mousedown,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1)},_bindNonQueryEventHandler:function(a,b){void 0===this.eventToCallbackMap[a]&&(this.eventToCallbackMap[a]=[]),this.eventToCallbackMap[a].push(b)},_cleanUpEventCallbacksMap:function(){for(var a=Object.keys(this.eventToCallbackMap),b=0;b<a.length;b++){var c=a[b];this.eventToCallbackMap[c]=null}},_showTooltip:function(){this.options.tooltip_split===!1?this._addClass(this.tooltip,"in"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in")),this.over=!0},_hideTooltip:function(){this.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this.over=!1},_layout:function(){var a;if(a=this.options.reversed?[100-this.percentage[0],this.percentage[1]]:[this.percentage[0],this.percentage[1]],this.handle1.style[this.stylePos]=a[0]+"%",this.handle2.style[this.stylePos]=a[1]+"%",Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var b=Math.max.apply(Math,this.options.ticks),c=Math.min.apply(Math,this.options.ticks),d="vertical"===this.options.orientation?"height":"width",e="vertical"===this.options.orientation?"marginTop":"marginLeft",f=this.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var g=0;if(0===this.options.ticks_positions.length)this.tickLabelContainer.style[e]=-f/2+"px",g=this.tickLabelContainer.offsetHeight;else for(h=0;h<this.tickLabelContainer.childNodes.length;h++)this.tickLabelContainer.childNodes[h].offsetHeight>g&&(g=this.tickLabelContainer.childNodes[h].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=g+"px")}for(var h=0;h<this.options.ticks.length;h++){var i=this.options.ticks_positions[h]||100*(this.options.ticks[h]-c)/(b-c);this.ticks[h].style[this.stylePos]=i+"%",this._removeClass(this.ticks[h],"in-selection"),this.options.range?i>=a[0]&&i<=a[1]&&this._addClass(this.ticks[h],"in-selection"):"after"===this.options.selection&&i>=a[0]?this._addClass(this.ticks[h],"in-selection"):"before"===this.options.selection&&i<=a[0]&&this._addClass(this.ticks[h],"in-selection"),this.tickLabels[h]&&(this.tickLabels[h].style[d]=f+"px",void 0!==this.options.ticks_positions[h]&&(this.tickLabels[h].style.position="absolute",this.tickLabels[h].style[this.stylePos]=this.options.ticks_positions[h]+"%",this.tickLabels[h].style[e]=-f/2+"px"))}}if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(a[0],a[1])+"%",this.trackSelection.style.top=Math.min(a[0],a[1])+"%",this.trackSelection.style.height=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(a[0],a[1])+"%",this.trackSelection.style.left=Math.min(a[0],a[1])+"%",this.trackSelection.style.width=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%";var j=this.tooltip_min.getBoundingClientRect(),k=this.tooltip_max.getBoundingClientRect();j.right>k.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}var l;if(this.options.range){l=this.options.formatter(this.options.value),this._setText(this.tooltipInner,l),this.tooltip.style[this.stylePos]=(a[1]+a[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var m=this.options.formatter(this.options.value[0]);this._setText(this.tooltipInner_min,m);var n=this.options.formatter(this.options.value[1]);this._setText(this.tooltipInner_max,n),this.tooltip_min.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=a[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else l=this.options.formatter(this.options.value[0]),this._setText(this.tooltipInner,l),this.tooltip.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px")},_removeProperty:function(a,b){a.style.removeProperty?a.style.removeProperty(b):a.style.removeAttribute(b)},_mousedown:function(a){if(!this.options.enabled)return!1;this.offset=this._offset(this.sliderElem),this.size=this.sliderElem[this.sizePos];var b=this._getPercentage(a);if(this.options.range){var c=Math.abs(this.percentage[0]-b),d=Math.abs(this.percentage[1]-b);this.dragged=c<d?0:1}else this.dragged=0;this.percentage[this.dragged]=this.options.reversed?100-b:b,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this.inDrag=!0;var e=this._calculateValue();return this._trigger("slideStart",e),this._setDataVal(e),this.setValue(e,!1,!0),this._pauseEvent(a),this.options.focus&&this._triggerFocusOnHandle(this.dragged),!0},_triggerFocusOnHandle:function(a){0===a&&this.handle1.focus(),1===a&&this.handle2.focus()},_keydown:function(a,b){if(!this.options.enabled)return!1;var c;switch(b.keyCode){case 37:case 40:c=-1;break;case 39:case 38:c=1}if(c){if(this.options.natural_arrow_keys){var d="vertical"===this.options.orientation&&!this.options.reversed,e="horizontal"===this.options.orientation&&this.options.reversed;(d||e)&&(c=-c)}var f=this.options.value[a]+c*this.options.step;return this.options.range&&(f=[a?this.options.value[0]:f,a?f:this.options.value[1]]),this._trigger("slideStart",f),this._setDataVal(f),this.setValue(f,!0,!0),this._trigger("slideStop",f),this._setDataVal(f),this._layout(),this._pauseEvent(b),!1}},_pauseEvent:function(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.returnValue=!1},_mousemove:function(a){if(!this.options.enabled)return!1;var b=this._getPercentage(a);this._adjustPercentageForRangeSliders(b),this.percentage[this.dragged]=this.options.reversed?100-b:b,this._layout();var c=this._calculateValue(!0);return this.setValue(c,!0,!0),!1},_adjustPercentageForRangeSliders:function(a){this.options.range&&(0===this.dragged&&this.percentage[1]<a?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>a&&(this.percentage[1]=this.percentage[0],this.dragged=0))},_mouseup:function(){if(!this.options.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this.inDrag=!1,this.over===!1&&this._hideTooltip();var a=this._calculateValue(!0);return this._layout(),this._trigger("slideStop",a),this._setDataVal(a),!1},_calculateValue:function(a){var b;if(this.options.range?(b=[this.options.min,this.options.max],0!==this.percentage[0]&&(b[0]=this._toValue(this.percentage[0]),b[0]=this._applyPrecision(b[0])),100!==this.percentage[1]&&(b[1]=this._toValue(this.percentage[1]),b[1]=this._applyPrecision(b[1]))):(b=this._toValue(this.percentage[0]),b=parseFloat(b),b=this._applyPrecision(b)),a){for(var c=[b,1/0],d=0;d<this.options.ticks.length;d++){var e=Math.abs(this.options.ticks[d]-b);e<=c[1]&&(c=[this.options.ticks[d],e])}if(c[1]<=this.options.ticks_snap_bounds)return c[0]}return b},_applyPrecision:function(a){var b=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(a,b)},_getNumDigitsAfterDecimalPlace:function(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0},_applyToFixedAndParseFloat:function(a,b){var c=a.toFixed(b);return parseFloat(c)},_getPercentage:function(a){!this.touchCapable||"touchstart"!==a.type&&"touchmove"!==a.type||(a=a.touches[0]);
var b=a[this.mousePos],c=this.offset[this.stylePos],d=b-c,e=d/this.size*100;return e=Math.round(e/this.percentage[2])*this.percentage[2],Math.max(0,Math.min(100,e))},_validateInputValue:function(a){if("number"==typeof a)return a;if(Array.isArray(a))return this._validateArray(a),a;throw new Error(d.formatInvalidInputErrorMsg(a))},_validateArray:function(a){for(var b=0;b<a.length;b++){var c=a[b];if("number"!=typeof c)throw new Error(d.formatInvalidInputErrorMsg(c))}},_setDataVal:function(a){var b="value: '"+a+"'";this.element.setAttribute("data",b),this.element.setAttribute("value",a),this.element.value=a},_trigger:function(b,c){c=c||0===c?c:void 0;var d=this.eventToCallbackMap[b];if(d&&d.length)for(var e=0;e<d.length;e++){var f=d[e];f(c)}a&&this._triggerJQueryEvent(b,c)},_triggerJQueryEvent:function(a,b){var c={type:a,value:b};this.$element.trigger(c),this.$sliderElem.trigger(c)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(a,b){"undefined"!=typeof a.innerText?a.innerText=b:"undefined"!=typeof a.textContent&&(a.textContent=b)},_removeClass:function(a,b){for(var c=b.split(" "),d=a.className,e=0;e<c.length;e++){var f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)");d=d.replace(g," ")}a.className=d.trim()},_addClass:function(a,b){for(var c=b.split(" "),d=a.className,e=0;e<c.length;e++){var f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)"),h=g.test(d);h||(d+=" "+f)}a.className=d.trim()},_offsetLeft:function(a){for(var b=a.offsetLeft;(a=a.offsetParent)&&!isNaN(a.offsetLeft);)b+=a.offsetLeft;return b},_offsetTop:function(a){for(var b=a.offsetTop;(a=a.offsetParent)&&!isNaN(a.offsetTop);)b+=a.offsetTop;return b},_offset:function(a){return{left:this._offsetLeft(a),top:this._offsetTop(a)}},_css:function(b,c,d){if(a)a.style(b,c,d);else{var e=c.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()});b.style[e]=d}},_toValue:function(a){return this.options.scale.toValue.apply(this,[a])},_toPercentage:function(a){return this.options.scale.toPercentage.apply(this,[a])}},a){var f=a.fn.slider?"bootstrapSlider":"slider";a.bridget(f,b)}}(a),b}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):window.jQuery&&!window.jQuery.fn.colorpicker&&a(window.jQuery)}(function(a){"use strict";var b=function(a){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,a&&(void 0!==a.toLowerCase?(a+="",this.setColor(a)):void 0!==a.h&&(this.value=a))};b.prototype={constructor:b,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"},_sanitizeNumber:function(a){return"number"==typeof a?a:isNaN(a)||null===a||""===a||void 0===a?1:void 0!==a.toLowerCase?parseFloat(a):1},isTransparent:function(a){return!!a&&(a=a.toLowerCase().trim(),"transparent"===a||a.match(/#?00000000/)||a.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/))},rgbaIsTransparent:function(a){return 0===a.r&&0===a.g&&0===a.b&&0===a.a},setColor:function(a){a=a.toLowerCase().trim(),a&&(this.isTransparent(a)?this.value={h:0,s:0,b:0,a:0}:this.value=this.stringToHSB(a)||{h:0,s:0,b:0,a:1})},stringToHSB:function(b){b=b.toLowerCase();var c=this,d=!1;return a.each(this.stringParsers,function(a,e){var f=e.re.exec(b),g=f&&e.parse.apply(c,[f]),h=e.format||"rgba";return!g||(d=h.match(/hsla?/)?c.RGBtoHSB.apply(c,c.HSLtoRGB.apply(c,g)):c.RGBtoHSB.apply(c,g),c.origFormat=h,!1)}),d},setHue:function(a){this.value.h=1-a},setSaturation:function(a){this.value.s=a},setBrightness:function(a){this.value.b=1-a},setAlpha:function(a){this.value.a=parseInt(100*(1-a),10)/100},toRGB:function(a,b,c,d){a||(a=this.value.h,b=this.value.s,c=this.value.b),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-Math.abs(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],{r:Math.round(255*e),g:Math.round(255*f),b:Math.round(255*g),a:d||this.value.a}},toHex:function(a,b,c,d){var e=this.toRGB(a,b,c,d);return this.rgbaIsTransparent(e)?"transparent":"#"+(1<<24|parseInt(e.r)<<16|parseInt(e.g)<<8|parseInt(e.b)).toString(16).substr(1)},toHSL:function(a,b,c,d){a=a||this.value.h,b=b||this.value.s,c=c||this.value.b,d=d||this.value.a;var e=a,f=(2-b)*c,g=b*c;return g/=f>0&&f<=1?f:2-f,f/=2,g>1&&(g=1),{h:isNaN(e)?0:e,s:isNaN(g)?0:g,l:isNaN(f)?0:f,a:isNaN(d)?0:d}},toAlias:function(a,b,c,d){var e=this.toHex(a,b,c,d);for(var f in this.colors)if(this.colors[f]===e)return f;return!1},RGBtoHSB:function(a,b,c,d){a/=255,b/=255,c/=255;var e,f,g,h;return g=Math.max(a,b,c),h=g-Math.min(a,b,c),e=0===h?null:g===a?(b-c)/h:g===b?(c-a)/h+2:(a-b)/h+4,e=(e+360)%6*60/360,f=0===h?0:h/g,{h:this._sanitizeNumber(e),s:f,b:g,a:this._sanitizeNumber(d)}},HueToRGB:function(a,b,c){return c<0?c+=1:c>1&&(c-=1),6*c<1?a+(b-a)*c*6:2*c<1?b:3*c<2?a+(b-a)*(2/3-c)*6:a},HSLtoRGB:function(a,b,c,d){b<0&&(b=0);var e;e=c<=.5?c*(1+b):c+b-c*b;var f=2*c-e,g=a+1/3,h=a,i=a-1/3,j=Math.round(255*this.HueToRGB(f,e,g)),k=Math.round(255*this.HueToRGB(f,e,h)),l=Math.round(255*this.HueToRGB(f,e,i));return[j,k,l,this._sanitizeNumber(d)]},toString:function(a){a=a||"rgba";var b=!1;switch(a){case"rgb":return b=this.toRGB(),this.rgbaIsTransparent(b)?"transparent":"rgb("+b.r+","+b.g+","+b.b+")";case"rgba":return b=this.toRGB(),"rgba("+b.r+","+b.g+","+b.b+","+b.a+")";case"hsl":return b=this.toHSL(),"hsl("+Math.round(360*b.h)+","+Math.round(100*b.s)+"%,"+Math.round(100*b.l)+"%)";case"hsla":return b=this.toHSL(),"hsla("+Math.round(360*b.h)+","+Math.round(100*b.s)+"%,"+Math.round(100*b.l)+"%,"+b.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return b}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(a){return[a[1],a[2],a[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(a){return[a[1]/360,a[2]/100,a[3]/100,a[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(a){return[a[1]/360,a[2]/100,a[3]/100,a[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16),1]}},{re:/^([a-z]{3,})$/,format:"alias",parse:function(a){var b=this.colorNameToHex(a[0])||"#000000",c=this.stringParsers[6].re.exec(b),d=c&&this.stringParsers[6].parse.apply(this,[c]);return d}}],colorNameToHex:function(a){return"undefined"!=typeof this.colors[a.toLowerCase()]&&this.colors[a.toLowerCase()]}};var c={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>',align:"right",customClass:null},d=function(d,e){this.element=a(d).addClass("colorpicker-element"),this.options=a.extend(!0,{},c,this.element.data(),e),this.component=this.options.component,this.component=this.component!==!1&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=this.options.container===!0?this.element:this.options.container,this.container=this.container!==!1&&a(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=new b(this.options.color!==!1?this.options.color:this.getValue()),this.format=this.options.format!==!1?this.options.format:this.color.origFormat,this.picker=a(this.options.template),this.options.customClass&&this.picker.addClass(this.options.customClass),this.options.inline?this.picker.addClass("colorpicker-inline colorpicker-visible"):this.picker.addClass("colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),"rgba"!==this.format&&"hsla"!==this.format&&this.options.format!==!1||this.picker.addClass("colorpicker-with-alpha"),"right"===this.options.align&&this.picker.addClass("colorpicker-right"),this.picker.on("mousedown.colorpicker touchstart.colorpicker",a.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:a("body")),this.input!==!1&&(this.input.on({"keyup.colorpicker":a.proxy(this.keyup,this)}),this.component===!1&&this.element.on({"focus.colorpicker":a.proxy(this.show,this)}),this.options.inline===!1&&this.element.on({"focusout.colorpicker":a.proxy(this.hide,this)})),this.component!==!1&&this.component.on({"click.colorpicker":a.proxy(this.show,this)}),this.input===!1&&this.component===!1&&this.element.on({"click.colorpicker":a.proxy(this.show,this)}),this.input!==!1&&this.component!==!1&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":a.proxy(this.show,this),"focus.colorpicker":a.proxy(this.show,this)}),this.update(),a(a.proxy(function(){this.element.trigger("create")},this))};d.Color=b,d.prototype={constructor:d,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),this.input!==!1&&this.input.off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==!1||this.options.container)return!1;var a=this.container&&this.container[0]!==document.body?"position":"offset",b=this.component||this.element,c=b[a]();"right"===this.options.align&&(c.left-=this.picker.outerWidth()-b.outerWidth()),this.picker.css({top:c.top+b.outerHeight(),left:c.left})},show:function(b){return!this.isDisabled()&&(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),a(window).on("resize.colorpicker",a.proxy(this.reposition,this)),!b||this.hasInput()&&"color"!==this.input.attr("type")||b.stopPropagation&&b.preventDefault&&(b.stopPropagation(),b.preventDefault()),this.options.inline===!1&&a(window.document).on({"mousedown.colorpicker":a.proxy(this.hide,this)}),void this.element.trigger({type:"showPicker",color:this.color}))},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),a(window).off("resize.colorpicker",this.reposition),a(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(a){return a=a||this.color.toString(this.format),this.element.data("color",a),a},updateInput:function(a){return a=a||this.color.toString(this.format),this.input!==!1&&this.input.prop("value",a),a},updatePicker:function(a){void 0!==a&&(this.color=new b(a));var c=this.options.horizontal===!1?this.options.sliders:this.options.slidersHorz,d=this.picker.find("i");if(0!==d.length)return this.options.horizontal===!1?(c=this.options.sliders,d.eq(1).css("top",c.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",c.alpha.maxTop*(1-this.color.value.a))):(c=this.options.slidersHorz,d.eq(1).css("left",c.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",c.alpha.maxLeft*(1-this.color.value.a))),d.eq(0).css({top:c.saturation.maxTop-this.color.value.b*c.saturation.maxTop,left:this.color.value.s*c.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),a},updateComponent:function(a){if(a=a||this.color.toString(this.format),this.component!==!1){var b=this.component.find("i").eq(0);b.length>0?b.css({backgroundColor:a}):this.component.css({backgroundColor:a})}return a},update:function(a){var b;return this.getValue(!1)===!1&&a!==!0||(b=this.updateComponent(),this.updateInput(b),this.updateData(b),this.updatePicker()),b},setValue:function(a){this.color=new b(a),this.update(),this.element.trigger({type:"changeColor",color:this.color,value:a})},getValue:function(a){a=void 0===a?"#000000":a;var b;return b=this.hasInput()?this.input.val():this.element.data("color"),void 0!==b&&""!==b&&null!==b||(b=a),b},hasInput:function(){return this.input!==!1},isDisabled:function(){return!!this.hasInput()&&this.input.prop("disabled")===!0},disable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0)},enable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0)},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(b){b.pageX||b.pageY||!b.originalEvent||(b.pageX=b.originalEvent.touches[0].pageX,b.pageY=b.originalEvent.touches[0].pageY),b.stopPropagation(),b.preventDefault();var c=a(b.target),d=c.closest("div"),e=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!d.is(".colorpicker")){if(d.is(".colorpicker-saturation"))this.currentSlider=a.extend({},e.saturation);else if(d.is(".colorpicker-hue"))this.currentSlider=a.extend({},e.hue);else{if(!d.is(".colorpicker-alpha"))return!1;this.currentSlider=a.extend({},e.alpha)}var f=d.offset();this.currentSlider.guide=d.find("i")[0].style,this.currentSlider.left=b.pageX-f.left,this.currentSlider.top=b.pageY-f.top,this.mousePointer={left:b.pageX,top:b.pageY},a(document).on({"mousemove.colorpicker":a.proxy(this.mousemove,this),"touchmove.colorpicker":a.proxy(this.mousemove,this),"mouseup.colorpicker":a.proxy(this.mouseup,this),"touchend.colorpicker":a.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(a){a.pageX||a.pageY||!a.originalEvent||(a.pageX=a.originalEvent.touches[0].pageX,a.pageY=a.originalEvent.touches[0].pageY),a.stopPropagation(),a.preventDefault();var b=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((a.pageX||this.mousePointer.left)-this.mousePointer.left))),c=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((a.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=b+"px",this.currentSlider.guide.top=c+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,b/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,c/this.currentSlider.maxTop),"setAlpha"===this.currentSlider.callTop&&this.options.format===!1&&(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(b){return b.stopPropagation(),b.preventDefault(),a(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},keyup:function(a){38===a.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===a.keyCode?(this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)):(this.color=new b(this.input.val()),this.color.origFormat&&this.options.format===!1&&(this.format=this.color.origFormat),this.getValue(!1)!==!1&&(this.updateData(),this.updateComponent(),this.updatePicker())),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},a.colorpicker=d,a.fn.colorpicker=function(b){var c,e=arguments,f=this.each(function(){var f=a(this),g=f.data("colorpicker"),h="object"==typeof b?b:{};g||"string"==typeof b?"string"==typeof b&&(c=g[b].apply(g,Array.prototype.slice.call(e,1))):f.data("colorpicker",new d(this,h))});return"getValue"===b?c:f},a.fn.colorpicker.constructor=d}),!function(){function a(a){return a&&(a.ownerDocument||a.document||a).documentElement}function b(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function c(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function d(a){return null===a?NaN:+a}function e(a){return!isNaN(a)}function f(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function g(a){return a.length}function h(a){for(var b=1;a*b%1;)b*=10;return b}function i(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function j(){this._=Object.create(null)}function k(a){return(a+="")===mg||a[0]===ng?ng+a:a}function l(a){return(a+="")[0]===ng?a.slice(1):a}function m(a){return k(a)in this._}function n(a){return(a=k(a))in this._&&delete this._[a]}function o(){var a=[];for(var b in this._)a.push(l(b));return a}function p(){var a=0;for(var b in this._)++a;return a}function q(){for(var a in this._)return!1;return!0}function r(){this._=Object.create(null)}function s(a){return a}function t(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function u(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=og.length;c<d;++c){var e=og[c]+b;if(e in a)return e}}function v(){}function w(){}function x(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new j;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function y(){bg.event.preventDefault()}function z(){for(var a,b=bg.event;a=b.sourceEvent;)b=a;return b}function A(a){for(var b=new w,c=0,d=arguments.length;++c<d;)b[arguments[c]]=x(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=bg.event;e.target=a,bg.event=e,b[e.type].apply(c,d)}finally{bg.event=f}}},b}function B(a){return qg(a,ug),a}function C(a){return"function"==typeof a?a:function(){return rg(a,this)}}function D(a){return"function"==typeof a?a:function(){return sg(a,this)}}function E(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=bg.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function F(a){return a.trim().replace(/\s+/g," ")}function G(a){return new RegExp("(?:^|\\s+)"+bg.requote(a)+"(?:\\s+|$)","g")}function H(a){return(a+"").trim().split(/^|\s+/)}function I(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=H(a).map(J);var e=a.length;return"function"==typeof b?d:c}function J(a){var b=G(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",F(e+" "+a))):c.setAttribute("class",F(e.replace(b," ")))}}function K(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function L(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function M(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return c?b.createElementNS(c,a):b.createElement(a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"==typeof a?a:(a=bg.ns.qualify(a)).local?c:b}function N(){var a=this.parentNode;a&&a.removeChild(this)}function O(a){return{__data__:a}}function P(a){return function(){return tg(this,a)}}function Q(a){return arguments.length||(a=c),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function R(a,b){for(var c=0,d=a.length;c<d;c++)for(var e,f=a[c],g=0,h=f.length;g<h;g++)(e=f[g])&&b(e,g,c);return a}function S(a){return qg(a,wg),a}function T(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function U(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,dg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+bg.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=V;h>0&&(a=a.slice(0,h));var j=xg.get(a);return j&&(a=j,i=W),h?b?e:d:b?v:f}function V(a,b){return function(c){var d=bg.event;bg.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{bg.event=d}}}function W(a,b){var c=V(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function X(c){var d=".dragsuppress-"+ ++zg,e="click"+d,f=bg.select(b(c)).on("touchmove"+d,y).on("dragstart"+d,y).on("selectstart"+d,y);if(null==yg&&(yg=!("onselectstart"in c)&&u(c.style,"userSelect")),yg){var g=a(c).style,h=g[yg];g[yg]="none"}return function(a){if(f.on(d,null),yg&&(g[yg]=h),a){var b=function(){f.on(e,null)};f.on(e,function(){y(),b()},!0),setTimeout(b,0)}}}function Y(a,c){c.changedTouches&&(c=c.changedTouches[0]);var d=a.ownerSVGElement||a;if(d.createSVGPoint){var e=d.createSVGPoint();if(Ag<0){var f=b(a);if(f.scrollX||f.scrollY){d=bg.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=d[0][0].getScreenCTM();Ag=!(g.f||g.e),d.remove()}}return Ag?(e.x=c.pageX,e.y=c.pageY):(e.x=c.clientX,e.y=c.clientY),e=e.matrixTransform(a.getScreenCTM().inverse()),[e.x,e.y]}var h=a.getBoundingClientRect();return[c.clientX-h.left-a.clientLeft,c.clientY-h.top-a.clientTop]}function Z(){return bg.event.changedTouches[0].identifier}function $(a){return a>0?1:a<0?-1:0}function _(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function aa(a){return a>1?0:a<-1?Dg:Math.acos(a)}function ba(a){return a>1?Gg:a<-1?-Gg:Math.asin(a)}function ca(a){return((a=Math.exp(a))-1/a)/2}function da(a){return((a=Math.exp(a))+1/a)/2}function ea(a){return((a=Math.exp(2*a))-1)/(a+1)}function fa(a){return(a=Math.sin(a/2))*a}function ga(){}function ha(a,b,c){return this instanceof ha?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof ha?new ha(a.h,a.s,a.l):va(""+a,wa,ha):new ha(a,b,c)}function ia(a,b,c){function d(a){return a>360?a-=360:a<0&&(a+=360),a<60?f+(g-f)*a/60:a<180?g:a<240?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:b<0?0:b>1?1:b,c=c<0?0:c>1?1:c,g=c<=.5?c*(1+b):c+b-c*b,f=2*c-g,new ra(e(a+120),e(a),e(a-120))}function ja(a,b,c){return this instanceof ja?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof ja?new ja(a.h,a.c,a.l):a instanceof la?na(a.l,a.a,a.b):na((a=xa((a=bg.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ja(a,b,c)}function ka(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new la(c,Math.cos(a*=Hg)*b,Math.sin(a)*b)}function la(a,b,c){return this instanceof la?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof la?new la(a.l,a.a,a.b):a instanceof ja?ka(a.h,a.c,a.l):xa((a=ra(a)).r,a.g,a.b):new la(a,b,c)}function ma(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=oa(e)*Sg,d=oa(d)*Tg,f=oa(f)*Ug,new ra(qa(3.2404542*e-1.5371385*d-.4985314*f),qa(-.969266*e+1.8760108*d+.041556*f),qa(.0556434*e-.2040259*d+1.0572252*f))}function na(a,b,c){return a>0?new ja(Math.atan2(c,b)*Ig,Math.sqrt(b*b+c*c),a):new ja(NaN,NaN,a)}function oa(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function pa(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function qa(a){return Math.round(255*(a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function ra(a,b,c){return this instanceof ra?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof ra?new ra(a.r,a.g,a.b):va(""+a,ra,ia):new ra(a,b,c)}function sa(a){return new ra(a>>16,a>>8&255,255&a)}function ta(a){return sa(a)+""}function ua(a){return a<16?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function va(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(za(e[0]),za(e[1]),za(e[2]))}return(f=Xg.get(a.toLowerCase()))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function wa(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=i<.5?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(b<c?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&i<1?0:d),new ha(d,e,i)}function xa(a,b,c){a=ya(a),b=ya(b),c=ya(c);var d=pa((.4124564*a+.3575761*b+.1804375*c)/Sg),e=pa((.2126729*a+.7151522*b+.072175*c)/Tg),f=pa((.0193339*a+.119192*b+.9503041*c)/Ug);return la(116*e-16,500*(d-e),200*(e-f))}function ya(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function za(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Aa(a){return"function"==typeof a?a:function(){return a}}function Ba(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Ca(b,c,a,d)}}function Ca(a,b,c,d){function e(){var a,b=i.status;if(!b&&Ea(i)||b>=200&&b<300||304===b){try{a=c.call(f,i)}catch(a){return void g.error.call(f,a)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=bg.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=bg.event;bg.event=a;try{g.progress.call(f,i)}finally{bg.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(dg(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},bg.rebind(f,g,"on"),null==d?f:f.get(Da(d))}function Da(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Ea(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Fa(){var a=Ga(),b=Ha()-a;b>24?(isFinite(b)&&(clearTimeout(_g),_g=setTimeout(Fa,b)),$g=0):($g=1,bh(Fa))}function Ga(){var a=Date.now();for(ah=Yg;ah;)a>=ah.t&&(ah.f=ah.c(a-ah.t)),ah=ah.n;return a}function Ha(){for(var a,b=Yg,c=1/0;b;)b.f?b=a?a.n=b.n:Yg=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return Zg=a,c}function Ia(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Ja(a,b){var c=Math.pow(10,3*lg(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Ka(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:s;return function(a){var c=dh.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;
switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):"e"!=n&&"f"!=n||(m=Math.max(0,Math.min(20,m)))),n=eh.get(n)||La;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=a<0||0===a&&1/a<0?(a=-a,"-"):"-"===h?"":h;if(o<0){var i=bg.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(w<0){var x=s?a.lastIndexOf("e"):-1;x<0?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=y<k?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function La(a){return a+""}function Ma(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Na(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){return b(c=a(new gh(c-1)),1),c}function f(a,c){return b(a=new gh((+a)),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;g<d;)c(g)%f||h.push(new Date((+g))),b(g,1);else for(;g<d;)h.push(new Date((+g))),b(g,1);return h}function h(a,b,c){try{gh=Ma;var d=new Ma;return d._=a,g(d,b,c)}finally{gh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Oa(a);return i.floor=i,i.round=Oa(d),i.ceil=Oa(e),i.offset=Oa(f),i.range=h,a}function Oa(a){return function(b,c){try{gh=Ma;var d=new Ma;return d._=b,a(d,c)._}finally{gh=Date}}}function Pa(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=ih[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&gh!==Ma,g=new(f?Ma:gh);return"j"in d?g.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;h<i;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in ih?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{gh=Ma;var b=new gh;return b._=a,d(b)}finally{gh=Date}}var d=b(a);return c.parse=function(a){try{gh=Ma;var b=d.parse(a);return b&&b._}finally{gh=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=hb;var t=bg.map(),u=Ra(p),v=Sa(p),w=Ra(q),x=Sa(q),y=Ra(r),z=Sa(r),A=Ra(s),B=Sa(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Qa(a.getDate(),b,2)},e:function(a,b){return Qa(a.getDate(),b,2)},H:function(a,b){return Qa(a.getHours(),b,2)},I:function(a,b){return Qa(a.getHours()%12||12,b,2)},j:function(a,b){return Qa(1+fh.dayOfYear(a),b,3)},L:function(a,b){return Qa(a.getMilliseconds(),b,3)},m:function(a,b){return Qa(a.getMonth()+1,b,2)},M:function(a,b){return Qa(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Qa(a.getSeconds(),b,2)},U:function(a,b){return Qa(fh.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Qa(fh.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Qa(a.getFullYear()%100,b,2)},Y:function(a,b){return Qa(a.getFullYear()%1e4,b,4)},Z:fb,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:_a,e:_a,H:bb,I:bb,j:ab,L:eb,m:$a,M:cb,p:k,S:db,U:Ua,w:Ta,W:Va,x:i,X:j,y:Xa,Y:Wa,Z:Ya,"%":gb};return b}function Qa(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?new Array(c-f+1).join(b)+e:e)}function Ra(a){return new RegExp("^(?:"+a.map(bg.requote).join("|")+")","i")}function Sa(a){for(var b=new j,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Ta(a,b,c){jh.lastIndex=0;var d=jh.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Ua(a,b,c){jh.lastIndex=0;var d=jh.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Va(a,b,c){jh.lastIndex=0;var d=jh.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Wa(a,b,c){jh.lastIndex=0;var d=jh.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Xa(a,b,c){jh.lastIndex=0;var d=jh.exec(b.slice(c,c+2));return d?(a.y=Za(+d[0]),c+d[0].length):-1}function Ya(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function Za(a){return a+(a>68?1900:2e3)}function $a(a,b,c){jh.lastIndex=0;var d=jh.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function _a(a,b,c){jh.lastIndex=0;var d=jh.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function ab(a,b,c){jh.lastIndex=0;var d=jh.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function bb(a,b,c){jh.lastIndex=0;var d=jh.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function cb(a,b,c){jh.lastIndex=0;var d=jh.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function db(a,b,c){jh.lastIndex=0;var d=jh.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function eb(a,b,c){jh.lastIndex=0;var d=jh.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function fb(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=lg(b)/60|0,e=lg(b)%60;return c+Qa(d,"0",2)+Qa(e,"0",2)}function gb(a,b,c){kh.lastIndex=0;var d=kh.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function hb(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function ib(){}function jb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function kb(a,b){a&&oh.hasOwnProperty(a.type)&&oh[a.type](a,b)}function lb(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function mb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)lb(a[c],b,1);b.polygonEnd()}function nb(){function a(a,b){a*=Hg,b=b*Hg/2+Dg/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);qh.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;rh.point=function(g,h){rh.point=a,d=(b=g)*Hg,e=Math.cos(h=(c=h)*Hg/2+Dg/4),f=Math.sin(h)},rh.lineEnd=function(){a(b,c)}}function ob(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function pb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function qb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function rb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function sb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function tb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function ub(a){return[Math.atan2(a[1],a[0]),ba(a[2])]}function vb(a,b){return lg(a[0]-b[0])<Bg&&lg(a[1]-b[1])<Bg}function wb(a,b){a*=Hg;var c=Math.cos(b*=Hg);xb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function xb(a,b,c){++sh,uh+=(a-uh)/sh,vh+=(b-vh)/sh,wh+=(c-wh)/sh}function yb(){function a(a,e){a*=Hg;var f=Math.cos(e*=Hg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);th+=j,xh+=j*(b+(b=g)),yh+=j*(c+(c=h)),zh+=j*(d+(d=i)),xb(b,c,d)}var b,c,d;Dh.point=function(e,f){e*=Hg;var g=Math.cos(f*=Hg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Dh.point=a,xb(b,c,d)}}function zb(){Dh.point=wb}function Ab(){function a(a,b){a*=Hg;var c=Math.cos(b*=Hg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-aa(n)/m,p=Math.atan2(m,n);Ah+=o*j,Bh+=o*k,Ch+=o*l,th+=p,xh+=p*(d+(d=g)),yh+=p*(e+(e=h)),zh+=p*(f+(f=i)),xb(d,e,f)}var b,c,d,e,f;Dh.point=function(g,h){b=g,c=h,Dh.point=a,g*=Hg;var i=Math.cos(h*=Hg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),xb(d,e,f)},Dh.lineEnd=function(){a(b,c),Dh.lineEnd=zb,Dh.point=wb}}function Bb(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Cb(){return!0}function Db(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(vb(c,d)){e.lineStart();for(var h=0;h<b;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Fb(c,a,null,(!0)),j=new Fb(c,null,i,(!1));i.o=j,f.push(i),g.push(j),i=new Fb(d,a,null,(!1)),j=new Fb(d,null,i,(!0)),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Eb(f),Eb(g),f.length){for(var h=0,i=c,j=g.length;h<j;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;h<j;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Eb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Fb(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Gb(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Hb))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=bg.merge(n);var a=Nb(r,o);n.length?(v||(f.polygonStart(),v=!0),Db(n,Jb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Ib(),u=b(t),v=!1;return s}}function Hb(a){return a.length>1}function Ib(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:v,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Jb(a,b){return((a=a.x)[0]<0?a[1]-Gg-Bg:Gg-a[1])-((b=b.x)[0]<0?b[1]-Gg-Bg:Gg-b[1])}function Kb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Dg:-Dg,i=lg(f-c);lg(i-Dg)<Bg?(a.point(c,d=(d+g)/2>0?Gg:-Gg),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Dg&&(lg(c-e)<Bg&&(c-=e*Bg),lg(f-h)<Bg&&(f-=h*Bg),d=Lb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Lb(a,b,c,d){var e,f,g=Math.sin(a-c);return lg(g)>Bg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Mb(a,b,c,d){var e;if(null==a)e=c*Gg,d.point(-Dg,e),d.point(0,e),d.point(Dg,e),d.point(Dg,0),d.point(Dg,-e),d.point(0,-e),d.point(-Dg,-e),d.point(-Dg,0),d.point(-Dg,e);else if(lg(a[0]-b[0])>Bg){var f=a[0]<b[0]?Dg:-Dg;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Nb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;qh.reset();for(var h=0,i=b.length;h<i;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Dg/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Dg/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Dg,z=o*t;if(qh.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Eg:v,y^m>=c^r>=c){var A=qb(ob(l),ob(a));tb(A);var B=qb(e,A);tb(B);var C=(y^v>=0?-1:1)*ba(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(f<-Bg||f<Bg&&qh<0)^1&g}function Ob(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(l<0?Dg:-Dg),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(vb(c,n)||vb(o,n))&&(o[0]+=Bg,o[1]+=Bg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&vb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=ob(a),e=ob(b),g=[1,0,0],h=qb(d,e),i=pb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=qb(g,h),o=sb(g,l),p=sb(h,m);rb(o,p);var q=n,r=pb(o,q),s=pb(q,q),t=r*r-s*(pb(o,o)-1);if(!(t<0)){var u=Math.sqrt(t),v=sb(q,(-r-u)/s);if(rb(v,o),v=ub(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];y<x&&(w=x,x=y,y=w);var B=y-x,C=lg(B-Dg)<Bg,D=C||B<Bg;if(!C&&A<z&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(lg(v[0]-x)<Bg?z:A):z<=v[1]&&v[1]<=A:B>Dg^(x<=v[0]&&v[0]<=y)){var E=sb(q,(-r+u)/s);return rb(E,o),[v,ub(E)]}}}function e(b,c){var d=g?a:Dg-a,e=0;return b<-d?e|=1:b>d&&(e|=2),c<-d?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=lg(f)>Bg,i=nc(a,6*Hg);return Gb(b,c,i,g?[0,-a]:[-Dg,a-Dg])}function Pb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,o<0){if(f<m)return;f<n&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(f<0)){if(f/=o,o<0){if(f>n)return;f>m&&(m=f)}else if(o>0){if(f<m)return;f<n&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,p<0){if(f<m)return;f<n&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(f<0)){if(f/=p,p<0){if(f>n)return;f>m&&(m=f)}else if(p>0){if(f<m)return;f<n&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),n<1&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Qb(a,b,c,d){function e(d,e){return lg(d[0]-a)<Bg?e>0?0:3:lg(d[0]-c)<Bg?e>0?2:1:lg(d[1]-b)<Bg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;e<c;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];g<i;++g)f=h[g],j[1]<=d?f[1]>d&&_(j,f,a)>0&&++b:f[1]<=d&&_(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return a<=e&&e<=c&&b<=f&&f<=d}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Fh,Math.min(Fh,a)),b=Math.max(-Fh,Math.min(Fh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Ib(),C=Pb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=bg.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Db(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Rb(a){var b=0,c=Dg/3,d=fc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Dg/180,c=a[1]*Dg/180):[b/Dg*180,c/Dg*180]},e}function Sb(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,ba((f-(a*a+c*c)*e*e)/(2*e))]},c}function Tb(){function a(a,b){Hh+=e*a-d*b,d=a,e=b}var b,c,d,e;Mh.point=function(f,g){Mh.point=a,b=d=f,c=e=g},Mh.lineEnd=function(){a(b,c)}}function Ub(a,b){a<Ih&&(Ih=a),a>Kh&&(Kh=a),b<Jh&&(Jh=b),b>Lh&&(Lh=b)}function Vb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Wb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Wb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Wb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Xb(a,b){uh+=a,vh+=b,++wh}function Yb(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);xh+=g*(b+a)/2,yh+=g*(c+d)/2,zh+=g,Xb(b=a,c=d)}var b,c;Oh.point=function(d,e){Oh.point=a,Xb(b=d,c=e)}}function Zb(){Oh.point=Xb}function $b(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);xh+=g*(d+a)/2,yh+=g*(e+b)/2,zh+=g,g=e*a-d*b,Ah+=g*(d+a),Bh+=g*(e+b),Ch+=3*g,Xb(d=a,e=b)}var b,c,d,e;Oh.point=function(f,g){Oh.point=a,Xb(b=d=f,c=e=g)},Oh.lineEnd=function(){a(b,c)}}function _b(a){function b(b,c){a.moveTo(b+g,c),a.arc(b,c,g,0,Eg)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:v};return h}function ac(a){function b(a){return(h?d:c)(a)}function c(b){return dc(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=ob([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=lg(lg(x)-1)<Bg||lg(d-m)<Bg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||lg((s*E+t*F)/u-.5)>.3||h*n+i*o+j*p<g)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Hg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function bc(a){var b=ac(function(b,c){return a([b*Ig,c*Ig])});return function(a){return gc(b(a))}}function cc(a){this.stream=a}function dc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function ec(a){return fc(function(){return a})()}function fc(a){function b(a){return a=h(a[0]*Hg,a[1]*Hg),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Ig,a[1]*Ig]}function d(){h=Bb(g=jc(r,t,u),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=ac(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,t=0,u=0,v=Eh,w=s,x=null,y=null;return b.stream=function(a){return k&&(k.valid=!1),k=gc(v(g,l(w(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(v=null==a?(x=a,Eh):Ob((x=+a)*Hg),e()):x},b.clipExtent=function(a){return arguments.length?(y=a,w=a?Qb(a[0][0],a[0][1],a[1][0],a[1][1]):s,e()):y},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Hg,q=a[1]%360*Hg,d()):[p*Ig,q*Ig]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Hg,t=a[1]%360*Hg,u=a.length>2?a[2]%360*Hg:0,d()):[r*Ig,t*Ig,u*Ig]},bg.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function gc(a){return dc(a,function(b,c){a.point(b*Hg,c*Hg)})}function hc(a,b){return[a,b]}function ic(a,b){return[a>Dg?a-Eg:a<-Dg?a+Eg:a,b]}function jc(a,b,c){return a?b||c?Bb(lc(a),mc(b,c)):lc(a):b||c?mc(b,c):ic}function kc(a){return function(b,c){return b+=a,[b>Dg?b-Eg:b<-Dg?b+Eg:b,c]}}function lc(a){var b=kc(a);return b.invert=kc(-a),b}function mc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),ba(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),ba(k*d-h*e)]},c}function nc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=oc(c,e),f=oc(c,f),(g>0?e<f:e>f)&&(e+=g*Eg)):(e=a+g*Eg,f=a-.5*i);for(var j,k=e;g>0?k>f:k<f;k-=i)h.point((j=ub([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function oc(a,b){var c=ob(b);c[0]-=a,tb(c);var d=aa(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Bg)%(2*Math.PI)}function pc(a,b,c){var d=bg.range(a,b-Bg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function qc(a,b,c){var d=bg.range(a,b-Bg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function rc(a){return a.source}function sc(a){return a.target}function tc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(fa(d-b)+e*g*fa(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Ig,Math.atan2(g,Math.sqrt(d*d+e*e))*Ig]}:function(){return[a*Ig,b*Ig]};return o.distance=m,o}function uc(){function a(a,e){var f=Math.sin(e*=Hg),g=Math.cos(e),h=lg((a*=Hg)-b),i=Math.cos(h);Ph+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Qh.point=function(e,f){b=e*Hg,c=Math.sin(f*=Hg),d=Math.cos(f),Qh.point=a},Qh.lineEnd=function(){Qh.point=Qh.lineEnd=v}}function vc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function wc(a,b){function c(a,b){g>0?b<-Gg+Bg&&(b=-Gg+Bg):b>Gg-Bg&&(b=Gg-Bg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Dg/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=$(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Gg]},c):yc}function xc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return lg(e)<Bg?hc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-$(e)*Math.sqrt(a*a+c*c)]},c)}function yc(a,b){return[a,Math.log(Math.tan(Dg/4+b/2))]}function zc(a){var b,c=ec(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Dg*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Ac(a,b){return[Math.log(Math.tan(Dg/4+b/2)),-a]}function Bc(a){return a[0]}function Cc(a){return a[1]}function Dc(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;d>1&&_(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Ec(a,b){return a[0]-b[0]||a[1]-b[1]}function Fc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Gc(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Hc(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Ic(){bd(this),this.edge=this.site=this.circle=null}function Jc(a){var b=ai.pop()||new Ic;return b.site=a,b}function Kc(a){Uc(a),Zh.remove(a),ai.push(a),bd(a)}function Lc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Kc(a);for(var i=f;i.circle&&lg(c-i.circle.x)<Bg&&lg(d-i.circle.cy)<Bg;)f=i.P,h.unshift(i),Kc(i),i=f;h.unshift(i),Uc(i);for(var j=g;j.circle&&lg(c-j.circle.x)<Bg&&lg(d-j.circle.cy)<Bg;)g=j.N,h.push(j),Kc(j),j=g;h.push(j),Uc(j);var k,l=h.length;for(k=1;k<l;++k)j=h[k],i=h[k-1],$c(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=Yc(i.site,j.site,null,e),Tc(i),Tc(j)}function Mc(a){for(var b,c,d,e,f=a.x,g=a.y,h=Zh._;h;)if(d=Nc(h,g)-f,d>Bg)h=h.L;else{if(e=f-Oc(h,g),!(e>Bg)){d>-Bg?(b=h.P,c=h):e>-Bg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Jc(a);if(Zh.insert(b,i),b||c){if(b===c)return Uc(b),c=Jc(b.site),Zh.insert(i,c),i.edge=c.edge=Yc(b.site,i.site),Tc(b),void Tc(c);if(!c)return void(i.edge=Yc(b.site,i.site));Uc(b),Uc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};$c(c.edge,j,o,u),i.edge=Yc(j,a,null,u),c.edge=Yc(a,o,null,u),Tc(b),Tc(c)}}function Nc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-(1/0);c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Oc(a,b){var c=a.N;if(c)return Nc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Pc(a){this.site=a,this.edges=[]}function Qc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=Yh,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;g<i;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(lg(d-b)>Bg||lg(e-c)>Bg)&&(h.splice(g,0,new _c(Zc(f.site,k,lg(d-l)<Bg&&o-e>Bg?{x:l,y:lg(b-l)<Bg?c:o}:lg(e-o)<Bg&&m-d>Bg?{x:lg(c-o)<Bg?b:m,y:o}:lg(d-m)<Bg&&e-n>Bg?{x:m,y:lg(b-m)<Bg?c:n}:lg(e-n)<Bg&&d-l>Bg?{x:lg(c-n)<Bg?b:l,y:n}:null),f.site,null)),++i)}function Rc(a,b){return b.angle-a.angle}function Sc(){bd(this),this.x=this.y=this.arc=this.site=this.cy=null}function Tc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Cg)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=bi.pop()||new Sc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=_h._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}_h.insert(s,r),s||($h=r)}}}}function Uc(a){var b=a.circle;b&&(b.P||($h=b.N),_h.remove(b),bi.push(b),bd(b),a.circle=null)}function Vc(a){for(var b,c=Xh,d=Pb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Wc(b,a)||!d(b)||lg(b.a.x-b.b.x)<Bg&&lg(b.a.y-b.b.y)<Bg)&&(b.a=b.b=null,c.splice(e,1))}function Wc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(q<g||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,d<-1||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(n<p){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Xc(a,b){this.l=a,this.r=b,this.a=this.b=null}function Yc(a,b,c,d){var e=new Xc(a,b);return Xh.push(e),c&&$c(e,a,b,c),d&&$c(e,b,a,d),Yh[a.i].edges.push(new _c(e,a,b)),Yh[b.i].edges.push(new _c(e,b,a)),e}function Zc(a,b,c){var d=new Xc(a,null);return d.a=b,d.b=c,Xh.push(d),d}function $c(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function _c(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function ad(){this._=null}function bd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function cd(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function dd(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function ed(a){for(;a.L;)a=a.L;return a}function fd(a,b){var c,d,e,f=a.sort(gd).pop();for(Xh=[],Yh=new Array(a.length),Zh=new ad,_h=new ad;;)if(e=$h,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))f.x===c&&f.y===d||(Yh[f.i]=new Pc(f),Mc(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Lc(e.arc)}b&&(Vc(b),Qc(b));var g={cells:Yh,edges:Xh};return Zh=_h=Xh=Yh=null,g}function gd(a,b){return b.y-a.y||b.x-a.x}function hd(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function id(a){return a.x}function jd(a){return a.y}function kd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ld(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&ld(a,i[0],c,d,g,h),i[1]&&ld(a,i[1],g,d,e,h),i[2]&&ld(a,i[2],c,h,g,f),i[3]&&ld(a,i[3],g,h,e,f)}}function md(a,b,c,d,e,f,g){var h,i=1/0;return function a(j,k,l,m,n){if(!(k>f||l>g||m<d||n<e)){if(o=j.point){var o,p=b-j.x,q=c-j.y,r=p*p+q*q;if(r<i){var s=Math.sqrt(i=r);d=b-s,e=c-s,f=b+s,g=c+s,h=o}}for(var t=j.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;y<z;++y)if(j=t[3&y])switch(3&y){case 0:a(j,k,l,u,v);break;case 1:a(j,u,l,m,v);break;case 2:a(j,k,v,u,n);break;case 3:a(j,u,v,m,n)}}}(a,d,e,f,g),h}function nd(a,b){a=bg.rgb(a),b=bg.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+ua(Math.round(c+f*a))+ua(Math.round(d+g*a))+ua(Math.round(e+h*a))}}function od(a,b){var c,d={},e={};for(c in a)c in b?d[c]=rd(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function pd(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function qd(a,b){var c,d,e,f=di.lastIndex=ei.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=di.exec(a))&&(d=ei.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:pd(c,d)})),f=ei.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){
return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;d<b;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function rd(a,b){for(var c,d=bg.interpolators.length;--d>=0&&!(c=bg.interpolators[d](a,b)););return c}function sd(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;c<h;++c)d.push(rd(a[c],b[c]));for(;c<f;++c)e[c]=a[c];for(;c<g;++c)e[c]=b[c];return function(a){for(c=0;c<h;++c)e[c]=d[c](a);return e}}function td(a){return function(b){return b<=0?0:b>=1?1:a(b)}}function ud(a){return function(b){return 1-a(1-b)}}function vd(a){return function(b){return.5*(b<.5?a(2*b):2-a(2-2*b))}}function wd(a){return a*a}function xd(a){return a*a*a}function yd(a){if(a<=0)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(a<.5?c:3*(a-b)+c-.75)}function zd(a){return function(b){return Math.pow(b,a)}}function Ad(a){return 1-Math.cos(a*Gg)}function Bd(a){return Math.pow(2,10*(a-1))}function Cd(a){return 1-Math.sqrt(1-a*a)}function Dd(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Eg*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Eg/b)}}function Ed(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Fd(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Gd(a,b){a=bg.hcl(a),b=bg.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return ka(c+f*a,d+g*a,e+h*a)+""}}function Hd(a,b){a=bg.hsl(a),b=bg.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return ia(c+f*a,d+g*a,e+h*a)+""}}function Id(a,b){a=bg.lab(a),b=bg.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return ma(c+f*a,d+g*a,e+h*a)+""}}function Jd(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Kd(a){var b=[a.a,a.b],c=[a.c,a.d],d=Md(b),e=Ld(b,c),f=Md(Nd(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Ig,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Ig:0}function Ld(a,b){return a[0]*b[0]+a[1]*b[1]}function Md(a){var b=Math.sqrt(Ld(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Nd(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Od(a,b){var c,d=[],e=[],f=bg.transform(a),g=bg.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:pd(h[0],i[0])},{i:3,x:pd(h[1],i[1])})):i[0]||i[1]?d.push("translate("+i+")"):d.push(""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:pd(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:pd(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:pd(n[0],o[0])},{i:c-2,x:pd(n[1],o[1])})):1==o[0]&&1==o[1]||d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function Pd(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Qd(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Rd(a){for(var b=a.source,c=a.target,d=Td(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Sd(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Td(a,b){if(a===b)return a;for(var c=Sd(a),d=Sd(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function Ud(a){a.fixed|=2}function Vd(a){a.fixed&=-7}function Wd(a){a.fixed|=4,a.px=a.x,a.py=a.y}function Xd(a){a.fixed&=-5}function Yd(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(Yd(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function Zd(a,b){return bg.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=de,a}function $d(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function _d(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function ae(a){return a.children}function be(a){return a.value}function ce(a,b){return b.value-a.value}function de(a){return bg.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function ee(a){return a.x}function fe(a){return a.y}function ge(a,b,c){a.y0=b,a.y=c}function he(a){return bg.range(a.length)}function ie(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function je(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;c<f;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function ke(a){return a.reduce(le,0)}function le(a,b){return a+b[1]}function me(a,b){return ne(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function ne(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function oe(a){return[bg.min(a),bg.max(a)]}function pe(a,b){return a.value-b.value}function qe(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function re(a,b){a._pack_next=b,b._pack_prev=a}function se(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function te(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-(1/0),m=1/0,n=-(1/0);if(c.forEach(ue),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],xe(d,e,f),b(f),qe(d,f),d._pack_prev=f,qe(f,e),e=d._pack_next,g=3;g<j;g++){xe(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(se(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!se(i,f);i=i._pack_prev,q++);o?(p<q||p==q&&e.r<d.r?re(d,e=h):re(d=i,e),g--):(qe(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;g<j;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(ve)}}function ue(a){a._pack_next=a._pack_prev=a}function ve(a){delete a._pack_next,delete a._pack_prev}function we(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)we(e[f],b,c,d)}function xe(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function ye(a,b){return a.parent==b.parent?1:2}function ze(a){var b=a.children;return b.length?b[0]:a.t}function Ae(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function Be(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Ce(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function De(a,b,c){return a.a.parent===b.parent?a.a:c}function Ee(a){return 1+bg.max(a,function(a){return a.y})}function Fe(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Ge(a){var b=a.children;return b&&b.length?Ge(b[0]):a}function He(a){var b,c=a.children;return c&&(b=c.length)?He(c[b-1]):a}function Ie(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Je(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return e<0&&(c+=e/2,e=0),f<0&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Ke(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function Le(a){return a.rangeExtent?a.rangeExtent():Ke(a.range())}function Me(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Ne(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return g<f&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Oe(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:pi}function Pe(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=bg.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Qe(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Pe:Me,i=d?Qd:Pd;return g=e(a,b,i,c),h=e(b,a,i,rd),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Jd)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return Ue(a,b)},f.tickFormat=function(b,c){return Ve(a,b,c)},f.nice=function(b){return Se(a,b),e()},f.copy=function(){return Qe(a,b,c,d)},e()}function Re(a,b){return bg.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Se(a,b){return Ne(a,Oe(Te(a,b)[2]))}function Te(a,b){null==b&&(b=10);var c=Ke(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return f<=.15?e*=10:f<=.35?e*=5:f<=.75&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function Ue(a,b){return bg.range.apply(bg,Te(a,b))}function Ve(a,b,c){var d=Te(a,b);if(c){var e=dh.exec(c);if(e.shift(),"s"===e[8]){var f=bg.formatPrefix(Math.max(lg(d[0]),lg(d[1])));return e[7]||(e[7]="."+We(f.scale(d[2]))),e[8]="f",c=bg.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+Xe(e[8],d)),c=e.join("")}else c=",."+We(d[2])+"f";return bg.format(c)}function We(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Xe(a,b){var c=We(b[2]);return a in qi?Math.abs(c-We(Math.max(lg(b[0]),lg(b[1]))))+ +("e"!==a):c-2*("%"===a)}function Ye(a,b,c,d){function e(a){return(c?Math.log(a<0?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Ne(d.map(e),c?Math:si);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Ke(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;j<k;j++)for(var m=1;m<l;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,b){if(!arguments.length)return ri;arguments.length<2?b=ri:"function"!=typeof b&&(b=bg.format(b));var d,h=Math.max(.1,a/g.ticks().length),i=c?(d=1e-12,Math.ceil):(d=-1e-12,Math.floor);return function(a){return a/f(i(e(a)+d))<=h?b(a):""}},g.copy=function(){return Ye(a.copy(),b,c,d)},Re(g,a)}function Ze(a,b,c){function d(b){return a(e(b))}var e=$e(b),f=$e(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return Ue(c,a)},d.tickFormat=function(a,b){return Ve(c,a,b)},d.nice=function(a){return d.domain(Se(c,a))},d.exponent=function(g){return arguments.length?(e=$e(b=g),f=$e(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return Ze(a.copy(),b,c)},Re(d,a)}function $e(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function _e(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return bg.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new j;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=(i+j)/2,0):(j-i)/(a.length-1+h);return f=d(i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(a.length-1+h)|0;return f=d(i+Math.round(k*h/2+(j-i-(a.length-1+h)*k)/2),k),g=0,b={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i));return f=d(k+Math.round((l-k-(a.length-h)*m)/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Ke(b.a[0])},c.copy=function(){return _e(a,b)},c.domain(a)}function af(a,b){function f(){var c=0,d=b.length;for(h=[];++c<d;)h[c-1]=bg.quantile(a,c/d);return g}function g(a){if(!isNaN(a=+a))return b[bg.bisect(h,a)]}var h;return g.domain=function(b){return arguments.length?(a=b.map(d).filter(e).sort(c),f()):a},g.range=function(a){return arguments.length?(b=a,f()):b},g.quantiles=function(){return h},g.invertExtent=function(c){return c=b.indexOf(c),c<0?[NaN,NaN]:[c>0?h[c-1]:a[0],c<h.length?h[c]:a[a.length-1]]},g.copy=function(){return af(a,b)},f()}function bf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=b<0?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return bf(a,b,c)},e()}function cf(a,b){function c(c){if(c<=c)return b[bg.bisect(a,c)]}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return cf(a,b)},c}function df(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return Ue(a,b)},b.tickFormat=function(b,c){return Ve(a,b,c)},b.copy=function(){return df(a)},b}function ef(){return 0}function ff(a){return a.innerRadius}function gf(a){return a.outerRadius}function hf(a){return a.startAngle}function jf(a){return a.endAngle}function kf(a){return a&&a.padAngle}function lf(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function mf(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(r<0?-1:1)*Math.sqrt(t*t*s-u*u),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function nf(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Aa(c),o=Aa(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Bc,d=Cc,e=Cb,f=of,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=yi.get(a)||of).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function of(a){return a.join("L")}function pf(a){return of(a)+"Z"}function qf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function rf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function sf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function tf(a,b){return a.length<4?of(a):a[1]+wf(a.slice(1,-1),xf(a,b))}function uf(a,b){return a.length<3?of(a):a[0]+wf((a.push(a[0]),a),xf([a[a.length-2]].concat(a,[a[1]]),b))}function vf(a,b){return a.length<3?of(a):a[0]+wf(a,xf(a,b))}function wf(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return of(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function xf(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function yf(a){if(a.length<3)return of(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",Cf(Bi,g),",",Cf(Bi,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Df(i,g,h);return a.pop(),i.push("L",d),i.join("")}function zf(a){if(a.length<4)return of(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Cf(Bi,f)+","+Cf(Bi,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Df(c,f,g);return c.join("")}function Af(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Cf(Bi,g),",",Cf(Bi,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Df(b,g,h);return b.join("")}function Bf(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return yf(a)}function Cf(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Df(a,b,c){a.push("C",Cf(zi,b),",",Cf(zi,c),",",Cf(Ai,b),",",Cf(Ai,c),",",Cf(Bi,b),",",Cf(Bi,c))}function Ef(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Ff(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Ef(e,f);++b<c;)d[b]=(g+(g=Ef(e=f,f=a[b+1])))/2;return d[b]=g,d}function Gf(a){for(var b,c,d,e,f=[],g=Ff(a),h=-1,i=a.length-1;++h<i;)b=Ef(a[h],a[h+1]),lg(b)<Bg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Hf(a){return a.length<3?of(a):a[0]+wf(a,Gf(a))}function If(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]-Gg,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Jf(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Aa(c),v=Aa(e),w=c===d?function(){return n}:Aa(d),x=e===f?function(){return o}:Aa(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Bc,d=Bc,e=0,f=Cc,g=Cb,h=of,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=yi.get(a)||of).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Kf(a){return a.radius}function Lf(a){return[a.x,a.y]}function Mf(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Gg;return[c*Math.cos(d),c*Math.sin(d)]}}function Nf(){return 64}function Of(){return"circle"}function Pf(a){var b=Math.sqrt(a/Dg);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Qf(a){return function(){var b,c;(b=this[a])&&(c=b[b.active])&&(--b.count?delete b[b.active]:delete this[a],b.active+=.5,c.event&&c.event.interrupt.call(this,this.__data__,c.index))}}function Rf(a,b,c){return qg(a,Ii),a.namespace=b,a.id=c,a}function Sf(a,b,c,d){var e=a.id,f=a.namespace;return R(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function Tf(a){return null==a&&(a=""),function(){this.textContent=a}}function Uf(a){return null==a?"__transition__":"__transition_"+a+"__"}function Vf(a,b,c,d,e){var f=a[c]||(a[c]={active:0,count:0}),g=f[d];if(!g){var h=e.time;g=f[d]={tween:new j,time:h,delay:e.delay,duration:e.duration,ease:e.ease,index:b},e=null,++f.count,bg.timer(function(e){function i(c){if(f.active>d)return k();var e=f[f.active];e&&(--f.count,delete f[f.active],e.event&&e.event.interrupt.call(a,a.__data__,e.index)),f.active=d,g.event&&g.event.start.call(a,a.__data__,b),g.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&p.push(d)}),m=g.ease,l=g.duration,bg.timer(function(){return o.c=j(c||1)?Cb:j,1},0,h)}function j(c){if(f.active!==d)return 1;for(var e=c/l,h=m(e),i=p.length;i>0;)p[--i].call(a,h);return e>=1?(g.event&&g.event.end.call(a,a.__data__,b),k()):void 0}function k(){return--f.count?delete f[d]:delete a[c],1}var l,m,n=g.delay,o=ah,p=[];return o.t=n+h,n<=e?i(e-n):void(o.c=i)},0,h)}}function Wf(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function Xf(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function Yf(a){return a.toISOString()}function Zf(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=bg.bisect(Ri,e);return f==Ri.length?[b.year,Te(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Ri[f-1]<Ri[f]/e?f-1:f]:[Ui,Te(a,c)[2]]}return d.invert=function(b){return $f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map($f)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,$f(+c+1),b).length}var f=d.domain(),g=Ke(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Ne(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=$f(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=$f(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Ke(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],$f(+c[1]+1),b<1?1:b)},d.tickFormat=function(){return c},d.copy=function(){return Zf(a.copy(),b,c)},Re(d,a)}function $f(a){return new Date(a)}function _f(a){return JSON.parse(a.responseText)}function ag(a){var b=eg.createRange();return b.selectNode(eg.body),b.createContextualFragment(a.responseText)}var bg={version:"3.5.5"},cg=[].slice,dg=function(a){return cg.call(a)},eg=this.document;if(eg)try{dg(eg.documentElement.childNodes)[0].nodeType}catch(a){dg=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}if(Date.now||(Date.now=function(){return+new Date}),eg)try{eg.createElement("DIV").style.setProperty("opacity",0,"")}catch(a){var fg=this.Element.prototype,gg=fg.setAttribute,hg=fg.setAttributeNS,ig=this.CSSStyleDeclaration.prototype,jg=ig.setProperty;fg.setAttribute=function(a,b){gg.call(this,a,b+"")},fg.setAttributeNS=function(a,b,c){hg.call(this,a,b,c+"")},ig.setProperty=function(a,b,c){jg.call(this,a,b+"",c)}}bg.ascending=c,bg.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},bg.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},bg.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},bg.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),e<d&&(e=d))}else{for(;++f<g;)if(null!=(d=b.call(a,a[f],f))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),e<d&&(e=d))}return[c,e]},bg.sum=function(a,b){var c,d=0,f=a.length,g=-1;if(1===arguments.length)for(;++g<f;)e(c=+a[g])&&(d+=c);else for(;++g<f;)e(c=+b.call(a,a[g],g))&&(d+=c);return d},bg.mean=function(a,b){var c,f=0,g=a.length,h=-1,i=g;if(1===arguments.length)for(;++h<g;)e(c=d(a[h]))?f+=c:--i;else for(;++h<g;)e(c=d(b.call(a,a[h],h)))?f+=c:--i;if(i)return f/i},bg.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},bg.median=function(a,b){var f,g=[],h=a.length,i=-1;if(1===arguments.length)for(;++i<h;)e(f=d(a[i]))&&g.push(f);else for(;++i<h;)e(f=d(b.call(a,a[i],i)))&&g.push(f);if(g.length)return bg.quantile(g.sort(c),.5)},bg.variance=function(a,b){var c,f,g=a.length,h=0,i=0,j=-1,k=0;if(1===arguments.length)for(;++j<g;)e(c=d(a[j]))&&(f=c-h,h+=f/++k,i+=f*(c-h));else for(;++j<g;)e(c=d(b.call(a,a[j],j)))&&(f=c-h,h+=f/++k,i+=f*(c-h));if(k>1)return i/(k-1)},bg.deviation=function(){var a=bg.variance.apply(this,arguments);return a?Math.sqrt(a):a};var kg=f(c);bg.bisectLeft=kg.left,bg.bisect=bg.bisectRight=kg.right,bg.bisector=function(a){return f(1===a.length?function(b,d){return c(a(b),d)}:a)},bg.shuffle=function(a,b,c){(f=arguments.length)<3&&(c=a.length,f<2&&(b=0));for(var d,e,f=c-b;f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},bg.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},bg.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(d<0?0:d);c<d;)f[c]=[b=e,e=a[++c]];return f},bg.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,b=bg.min(arguments,g),c=new Array(b);++a<b;)for(var d,e=-1,f=c[a]=new Array(d);++e<d;)f[e]=arguments[e][a];return c},bg.transpose=function(a){return bg.zip.apply(bg,a)},bg.keys=function(a){var b=[];for(var c in a)b.push(c);return b},bg.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},bg.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},bg.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var lg=Math.abs;bg.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],f=h(lg(c)),g=-1;if(a*=f,b*=f,c*=f,c<0)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e},bg.map=function(a,b){var c=new j;if(a instanceof j)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(1===arguments.length)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b.call(a,d=a[e],e),d)}else for(var g in a)c.set(g,a[g]);return c};var mg="__proto__",ng="\0";i(j,{has:m,get:function(a){return this._[k(a)]},set:function(a,b){return this._[k(a)]=b},remove:n,keys:o,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:l(b),value:this._[b]});return a},size:p,empty:q,forEach:function(a){for(var b in this._)a.call(this,l(b),this._[b])}}),bg.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var i,k,l,m,n=-1,o=g.length,p=f[h++],q=new j;++n<o;)(m=q.get(i=p(k=g[n])))?m.push(k):q.set(i,[k]);return b?(k=b(),l=function(c,d){k.set(c,a(b,d,h))}):(k={},l=function(c,d){k[c]=a(b,d,h)}),q.forEach(l),k}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(bg.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},bg.set=function(a){var b=new r;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b},i(r,{has:m,add:function(a){return this._[k(a+="")]=!0,a},remove:n,values:o,size:p,empty:q,forEach:function(a){for(var b in this._)a.call(this,l(b))}}),bg.behavior={},bg.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=t(a,b,b[c]);return a};var og=["webkit","ms","moz","Moz","o","O"];bg.dispatch=function(){for(var a=new w,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=x(a);return a},w.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},bg.event=null,bg.requote=function(a){return a.replace(pg,"\\$&")};var pg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,qg={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},rg=function(a,b){return b.querySelector(a)},sg=function(a,b){return b.querySelectorAll(a)},tg=function(a,b){var c=a.matches||a[u(a,"matchesSelector")];return(tg=function(a,b){return c.call(a,b)})(a,b)};"function"==typeof Sizzle&&(rg=function(a,b){return Sizzle(a,b)[0]||null},sg=Sizzle,tg=Sizzle.matchesSelector),bg.selection=function(){return bg.select(eg.documentElement)};var ug=bg.selection.prototype=[];ug.select=function(a){var b,c,d,e,f=[];a=C(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return B(f)},ug.selectAll=function(a){var b,c,d=[];a=D(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=dg(a.call(c,c.__data__,h,e))),b.parentNode=c);return B(d)};var vg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};bg.ns={prefix:vg,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.slice(0,b),a=a.slice(b+1)),vg.hasOwnProperty(c)?{space:vg[c],local:a}:a}},ug.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=bg.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(E(b,a[b]));return this}return this.each(E(a,b))},ug.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=H(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!G(a[e]).test(b))return!1;return!0}for(b in a)this.each(I(b,a[b]));return this}return this.each(I(a,b))},ug.style=function(a,c,d){var e=arguments.length;if(e<3){if("string"!=typeof a){e<2&&(c="");for(d in a)this.each(K(d,a[d],c));return this}if(e<2){var f=this.node();return b(f).getComputedStyle(f,null).getPropertyValue(a)}d=""}return this.each(K(a,c,d))},ug.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(L(b,a[b]));return this}return this.each(L(a,b))},ug.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent;
},ug.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},ug.append=function(a){return a=M(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},ug.insert=function(a,b){return a=M(a),b=C(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},ug.remove=function(){return this.each(N)},ug.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,m=Math.min(g,l),n=new Array(l),o=new Array(l),p=new Array(g);if(b){var q,r=new j,s=new Array(g);for(d=-1;++d<g;)r.has(q=b.call(e=a[d],e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q;for(d=-1;++d<l;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=O(f),r.set(q,!0);for(d=-1;++d<g;)r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=O(f);for(;d<l;++d)o[d]=O(c[d]);for(;d<g;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),i.push(n),k.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=S([]),i=B([]),k=B([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return i.enter=function(){return h},i.exit=function(){return k},i},ug.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},ug.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=P(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return B(e)},ug.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},ug.sort=function(a){a=Q.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},ug.each=function(a){return R(this,function(b,c,d){a.call(b,b.__data__,c,d)})},ug.call=function(a){var b=dg(arguments);return a.apply(b[0]=this,b),this},ug.empty=function(){return!this.node()},ug.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null},ug.size=function(){var a=0;return R(this,function(){++a}),a};var wg=[];bg.selection.enter=S,bg.selection.enter.prototype=wg,wg.append=ug.append,wg.empty=ug.empty,wg.node=ug.node,wg.call=ug.call,wg.size=ug.size,wg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return B(g)},wg.insert=function(a,b){return arguments.length<2&&(b=T(this)),ug.insert.call(this,a,b)},bg.select=function(b){var c;return"string"==typeof b?(c=[rg(b,eg)],c.parentNode=eg.documentElement):(c=[b],c.parentNode=a(b)),B([c])},bg.selectAll=function(a){var b;return"string"==typeof a?(b=dg(sg(a,eg)),b.parentNode=eg.documentElement):(b=a,b.parentNode=null),B([b])},ug.on=function(a,b,c){var d=arguments.length;if(d<3){if("string"!=typeof a){d<2&&(b=!1);for(c in a)this.each(U(c,a[c],b));return this}if(d<2)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(U(a,b,c))};var xg=bg.map({mouseenter:"mouseover",mouseleave:"mouseout"});eg&&xg.forEach(function(a){"on"+a in eg&&xg.remove(a)});var yg,zg=0;bg.mouse=function(a){return Y(a,z())};var Ag=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;bg.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=z().changedTouches),b)for(var d,e=0,f=b.length;e<f;++e)if((d=b[e]).identifier===c)return Y(a,d)},bg.behavior.drag=function(){function a(){this.on("mousedown.drag",f).on("touchstart.drag",g)}function c(a,b,c,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o&&bg.event.target===l),n({type:"dragend"}))}var j,k=this,l=bg.event.target,m=k.parentNode,n=d.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=bg.select(c(l)).on(f+q,h).on(g+q,i),s=X(l),t=b(m,p);e?(j=e.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var d=A(a,"drag","dragstart","dragend"),e=null,f=c(v,bg.mouse,b,"mousemove","mouseup"),g=c(Z,bg.touch,s,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},bg.rebind(a,d,"on")},bg.touches=function(a,b){return arguments.length<2&&(b=z().touches),b?dg(b).map(function(b){var c=Y(a,b);return c.identifier=b.identifier,c}):[]};var Bg=1e-6,Cg=Bg*Bg,Dg=Math.PI,Eg=2*Dg,Fg=Eg-Bg,Gg=Dg/2,Hg=Dg/180,Ig=180/Dg,Jg=Math.SQRT2,Kg=2,Lg=4;bg.interpolateZoom=function(a,b){function c(a){var b=a*s;if(r){var c=da(p),g=f/(Kg*m)*(c*ea(Jg*b+p)-ca(p));return[d+g*j,e+g*k,f*c/da(Jg*b+p)]}return[d+a*j,e+a*k,f*Math.exp(Jg*b)]}var d=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2],j=g-d,k=h-e,l=j*j+k*k,m=Math.sqrt(l),n=(i*i-f*f+Lg*l)/(2*f*Kg*m),o=(i*i-f*f-Lg*l)/(2*i*Kg*m),p=Math.log(Math.sqrt(n*n+1)-n),q=Math.log(Math.sqrt(o*o+1)-o),r=q-p,s=(r||Math.log(i/f))/Jg;return c.duration=1e3*s,c},bg.behavior.zoom=function(){function a(a){a.on(F,l).on(Ng+".zoom",n).on("dblclick.zoom",o).on(I,m)}function c(a){return[(a[0]-z.x)/z.k,(a[1]-z.y)/z.k]}function d(a){return[a[0]*z.k+z.x,a[1]*z.k+z.y]}function e(a){z.k=Math.max(C[0],Math.min(C[1],a))}function f(a,b){b=d(b),z.x+=a[0]-b[0],z.y+=a[1]-b[1]}function g(b,c,d,g){b.__chart__={x:z.x,y:z.y,k:z.k},e(Math.pow(2,g)),f(q=c,d),b=bg.select(b),D>0&&(b=b.transition().duration(D)),b.call(a.event)}function h(){v&&v.domain(u.range().map(function(a){return(a-z.x)/z.k}).map(u.invert)),x&&x.domain(w.range().map(function(a){return(a-z.y)/z.k}).map(w.invert))}function i(a){E++||a({type:"zoomstart"})}function j(a){h(),a({type:"zoom",scale:z.k,translate:[z.x,z.y]})}function k(a){--E||a({type:"zoomend"}),q=null}function l(){function a(){l=1,f(bg.mouse(e),n),j(h)}function d(){m.on(G,null).on(H,null),o(l&&bg.event.target===g),k(h)}var e=this,g=bg.event.target,h=J.of(e,arguments),l=0,m=bg.select(b(e)).on(G,a).on(H,d),n=c(bg.mouse(e)),o=X(e);Hi.call(e),i(h)}function m(){function a(){var a=bg.touches(o);return n=z.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=c(a))}),a}function b(){var b=bg.event.target;bg.select(b).on(u,d).on(v,h),w.push(b);for(var c=bg.event.changedTouches,e=0,f=c.length;e<f;++e)q[c[e].identifier]=null;var i=a(),j=Date.now();if(1===i.length){if(j-t<500){var k=i[0];g(o,k,q[k.identifier],Math.floor(Math.log(z.k)/Math.LN2)+1),y()}t=j}else if(i.length>1){var k=i[0],l=i[1],m=k[0]-l[0],n=k[1]-l[1];r=m*m+n*n}}function d(){var a,b,c,d,g=bg.touches(o);Hi.call(o);for(var h=0,i=g.length;h<i;++h,d=null)if(c=g[h],d=q[c.identifier]){if(b)break;a=c,b=d}if(d){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+d[0])/2,(b[1]+d[1])/2],e(l*n)}t=null,f(a,b),j(p)}function h(){if(bg.event.touches.length){for(var b=bg.event.changedTouches,c=0,d=b.length;c<d;++c)delete q[b[c].identifier];for(var e in q)return void a()}bg.selectAll(w).on(s,null),x.on(F,l).on(I,m),A(),k(p)}var n,o=this,p=J.of(o,arguments),q={},r=0,s=".zoom-"+bg.event.changedTouches[0].identifier,u="touchmove"+s,v="touchend"+s,w=[],x=bg.select(o),A=X(o);b(),i(p),x.on(F,null).on(I,b)}function n(){var a=J.of(this,arguments);s?clearTimeout(s):(p=c(q=r||bg.mouse(this)),Hi.call(this),i(a)),s=setTimeout(function(){s=null,k(a)},50),y(),e(Math.pow(2,.002*Mg())*z.k),f(q,p),j(a)}function o(){var a=bg.mouse(this),b=Math.log(z.k)/Math.LN2;g(this,a,c(a),bg.event.shiftKey?Math.ceil(b)-1:Math.floor(b)+1)}var p,q,r,s,t,u,v,w,x,z={x:0,y:0,k:1},B=[960,500],C=Og,D=250,E=0,F="mousedown.zoom",G="mousemove.zoom",H="mouseup.zoom",I="touchstart.zoom",J=A(a,"zoomstart","zoom","zoomend");return Ng||(Ng="onwheel"in eg?(Mg=function(){return-bg.event.deltaY*(bg.event.deltaMode?120:1)},"wheel"):"onmousewheel"in eg?(Mg=function(){return bg.event.wheelDelta},"mousewheel"):(Mg=function(){return-bg.event.detail},"MozMousePixelScroll")),a.event=function(a){a.each(function(){var a=J.of(this,arguments),b=z;Fi?bg.select(this).transition().each("start.zoom",function(){z=this.__chart__||{x:0,y:0,k:1},i(a)}).tween("zoom:zoom",function(){var c=B[0],d=B[1],e=q?q[0]:c/2,f=q?q[1]:d/2,g=bg.interpolateZoom([(e-z.x)/z.k,(f-z.y)/z.k,c/z.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),h=c/d[2];this.__chart__=z={x:e-d[0]*h,y:f-d[1]*h,k:h},j(a)}}).each("interrupt.zoom",function(){k(a)}).each("end.zoom",function(){k(a)}):(this.__chart__=z,i(a),j(a),k(a))})},a.translate=function(b){return arguments.length?(z={x:+b[0],y:+b[1],k:z.k},h(),a):[z.x,z.y]},a.scale=function(b){return arguments.length?(z={x:z.x,y:z.y,k:+b},h(),a):z.k},a.scaleExtent=function(b){return arguments.length?(C=null==b?Og:[+b[0],+b[1]],a):C},a.center=function(b){return arguments.length?(r=b&&[+b[0],+b[1]],a):r},a.size=function(b){return arguments.length?(B=b&&[+b[0],+b[1]],a):B},a.duration=function(b){return arguments.length?(D=+b,a):D},a.x=function(b){return arguments.length?(v=b,u=b.copy(),z={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),z={x:0,y:0,k:1},a):x},bg.rebind(a,J,"on")};var Mg,Ng,Og=[0,1/0];bg.color=ga,ga.prototype.toString=function(){return this.rgb()+""},bg.hsl=ha;var Pg=ha.prototype=new ga;Pg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ha(this.h,this.s,this.l/a)},Pg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ha(this.h,this.s,a*this.l)},Pg.rgb=function(){return ia(this.h,this.s,this.l)},bg.hcl=ja;var Qg=ja.prototype=new ga;Qg.brighter=function(a){return new ja(this.h,this.c,Math.min(100,this.l+Rg*(arguments.length?a:1)))},Qg.darker=function(a){return new ja(this.h,this.c,Math.max(0,this.l-Rg*(arguments.length?a:1)))},Qg.rgb=function(){return ka(this.h,this.c,this.l).rgb()},bg.lab=la;var Rg=18,Sg=.95047,Tg=1,Ug=1.08883,Vg=la.prototype=new ga;Vg.brighter=function(a){return new la(Math.min(100,this.l+Rg*(arguments.length?a:1)),this.a,this.b)},Vg.darker=function(a){return new la(Math.max(0,this.l-Rg*(arguments.length?a:1)),this.a,this.b)},Vg.rgb=function(){return ma(this.l,this.a,this.b)},bg.rgb=ra;var Wg=ra.prototype=new ga;Wg.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&b<e&&(b=e),c&&c<e&&(c=e),d&&d<e&&(d=e),new ra(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new ra(e,e,e)},Wg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ra(a*this.r,a*this.g,a*this.b)},Wg.hsl=function(){return wa(this.r,this.g,this.b)},Wg.toString=function(){return"#"+ua(this.r)+ua(this.g)+ua(this.b)};var Xg=bg.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Xg.forEach(function(a,b){Xg.set(a,sa(b))}),bg.functor=Aa,bg.xhr=Ba(s),bg.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Ca(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;k<j;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new r,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},bg.csv=bg.dsv(",","text/csv"),bg.tsv=bg.dsv(" ","text/tab-separated-values");var Yg,Zg,$g,_g,ah,bh=this[u(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};bg.timer=function(a,b,c){var d=arguments.length;d<2&&(b=0),d<3&&(c=Date.now());var e=c+b,f={c:a,t:e,f:!1,n:null};Zg?Zg.n=f:Yg=f,Zg=f,$g||(_g=clearTimeout(_g),$g=1,bh(Fa))},bg.timer.flush=function(){Ga(),Ha()},bg.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var ch=["y","z","a","f","p","n","¬µ","m","","k","M","G","T","P","E","Z","Y"].map(Ja);bg.formatPrefix=function(a,b){var c=0;return a&&(a<0&&(a*=-1),b&&(a=bg.round(a,Ia(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),ch[8+c/3]};var dh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,eh=bg.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=bg.round(a,Ia(a,b))).toFixed(Math.max(0,Math.min(20,Ia(a*(1+1e-15),b))))}}),fh=bg.time={},gh=Date;Ma.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){hh.setUTCDate.apply(this._,arguments)},setDay:function(){hh.setUTCDay.apply(this._,arguments)},setFullYear:function(){hh.setUTCFullYear.apply(this._,arguments)},setHours:function(){hh.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){hh.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){hh.setUTCMinutes.apply(this._,arguments)},setMonth:function(){hh.setUTCMonth.apply(this._,arguments)},setSeconds:function(){hh.setUTCSeconds.apply(this._,arguments)},setTime:function(){hh.setTime.apply(this._,arguments)}};var hh=Date.prototype;fh.year=Na(function(a){return a=fh.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),fh.years=fh.year.range,fh.years.utc=fh.year.utc.range,fh.day=Na(function(a){var b=new gh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),fh.days=fh.day.range,fh.days.utc=fh.day.utc.range,fh.dayOfYear=function(a){var b=fh.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=fh[a]=Na(function(a){return(a=fh.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=fh.year(a).getDay();return Math.floor((fh.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});fh[a+"s"]=c.range,fh[a+"s"].utc=c.utc.range,fh[a+"OfYear"]=function(a){var c=fh.year(a).getDay();return Math.floor((fh.dayOfYear(a)+(c+b)%7)/7)}}),fh.week=fh.sunday,fh.weeks=fh.sunday.range,fh.weeks.utc=fh.sunday.utc.range,fh.weekOfYear=fh.sundayOfYear;var ih={"-":"",_:" ",0:"0"},jh=/^\s*\d+/,kh=/^%/;bg.locale=function(a){return{numberFormat:Ka(a),timeFormat:Pa(a)}};var lh=bg.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});bg.format=lh.numberFormat,bg.geo={},ib.prototype={s:0,t:0,add:function(a){jb(a,this.t,mh),jb(mh.s,this.s,this),this.s?this.t+=mh.t:this.s=mh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var mh=new ib;bg.geo.stream=function(a,b){a&&nh.hasOwnProperty(a.type)?nh[a.type](a,b):kb(a,b)};var nh={Feature:function(a,b){kb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)kb(c[d].geometry,b)}},oh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){lb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)lb(c[d],b,0)},Polygon:function(a,b){mb(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)mb(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)kb(c[d],b)}};bg.geo.area=function(a){return ph=0,bg.geo.stream(a,rh),ph};var ph,qh=new ib,rh={sphere:function(){ph+=4*Dg},point:v,lineStart:v,lineEnd:v,polygonStart:function(){qh.reset(),rh.lineStart=nb},polygonEnd:function(){var a=2*qh;ph+=a<0?4*Dg+a:a,rh.lineStart=rh.lineEnd=rh.point=v}};bg.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),b<l&&(l=b),b>n&&(n=b)}function b(b,c){var d=ob([b*Hg,c*Hg]);if(r){var e=qb(r,d),f=[e[1],-e[0],0],g=qb(f,e);tb(g),g=ub(g);var i=b-o,j=i>0?1:-1,p=g[0]*Ig*j,q=lg(i)>180;if(q^(j*o<p&&p<j*b)){var s=g[1]*Ig;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(j*o<p&&p<j*b)){var s=-g[1]*Ig;s<l&&(l=s)}else c<l&&(l=c),c>n&&(n=c);q?b<o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(b<k&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=lg(d)>180?d+(d>0?360:-360):d}else p=a,q=c;rh.point(a,c),b(a,c)}function f(){rh.lineStart()}function g(){e(p,q),rh.lineEnd(),lg(s)>Bg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,rh.polygonStart()},polygonEnd:function(){rh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,qh<0?(k=-(m=180),l=-(n=90)):s>Bg?n=90:s<-Bg&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],bg.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];d<b;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-(1/0),b=f.length-1,d=0,e=f[b];d<=b;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),bg.geo.centroid=function(a){sh=th=uh=vh=wh=xh=yh=zh=Ah=Bh=Ch=0,bg.geo.stream(a,Dh);var b=Ah,c=Bh,d=Ch,e=b*b+c*c+d*d;return e<Cg&&(b=xh,c=yh,d=zh,th<Bg&&(b=uh,c=vh,d=wh),e=b*b+c*c+d*d,e<Cg)?[NaN,NaN]:[Math.atan2(c,b)*Ig,ba(d/Math.sqrt(e))*Ig]};var sh,th,uh,vh,wh,xh,yh,zh,Ah,Bh,Ch,Dh={sphere:v,point:wb,lineStart:yb,lineEnd:zb,polygonStart:function(){Dh.lineStart=Ab},polygonEnd:function(){Dh.lineStart=yb}},Eh=Gb(Cb,Kb,Mb,[-Dg,-Dg/2]),Fh=1e9;bg.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Qb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(bg.geo.conicEqualArea=function(){return Rb(Sb)}).raw=Sb,bg.geo.albers=function(){return bg.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},bg.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=bg.geo.albers(),g=bg.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=bg.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&e<.234&&d>=-.425&&d<-.214?g:e>=.166&&e<.234&&d>=-.214&&d<-.115?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Bg,l+.12*j+Bg],[k-.214*j-Bg,l+.234*j-Bg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Bg,l+.166*j+Bg],[k-.115*j-Bg,l+.234*j-Bg]]).stream(i).point,a},a.scale(1070)};var Gh,Hh,Ih,Jh,Kh,Lh,Mh={point:v,lineStart:v,lineEnd:v,polygonStart:function(){Hh=0,Mh.lineStart=Tb},polygonEnd:function(){Mh.lineStart=Mh.lineEnd=Mh.point=v,Gh+=lg(Hh/2)}},Nh={point:Ub,lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},Oh={point:Xb,lineStart:Yb,lineEnd:Zb,polygonStart:function(){Oh.lineStart=$b},polygonEnd:function(){Oh.point=Xb,Oh.lineStart=Yb,Oh.lineEnd=Zb}};bg.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),bg.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Gh=0,bg.geo.stream(a,e(Mh)),Gh},a.centroid=function(a){return uh=vh=wh=xh=yh=zh=Ah=Bh=Ch=0,bg.geo.stream(a,e(Oh)),Ch?[Ah/Ch,Bh/Ch]:zh?[xh/zh,yh/zh]:wh?[uh/wh,vh/wh]:[NaN,NaN]},a.bounds=function(a){return Kh=Lh=-(Ih=Jh=1/0),bg.geo.stream(a,e(Nh)),[[Ih,Jh],[Kh,Lh]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||bc(a):s,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Vb:new _b(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(bg.geo.albersUsa()).context(null)},bg.geo.transform=function(a){return{stream:function(b){var c=new cc(b);for(var d in a)c[d]=a[d];return c}}},cc.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},bg.geo.projection=ec,bg.geo.projectionMutator=fc,(bg.geo.equirectangular=function(){return ec(hc)}).raw=hc.invert=hc,bg.geo.rotation=function(a){function b(b){return b=a(b[0]*Hg,b[1]*Hg),b[0]*=Ig,b[1]*=Ig,b}return a=jc(a[0]%360*Hg,a[1]*Hg,a.length>2?a[2]*Hg:0),b.invert=function(b){return b=a.invert(b[0]*Hg,b[1]*Hg),b[0]*=Ig,b[1]*=Ig,b},b},ic.invert=hc,bg.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=jc(-a[0]*Hg,-a[1]*Hg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Ig,a[1]*=Ig}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=nc((b=+d)*Hg,e*Hg),a):b},a.precision=function(d){return arguments.length?(c=nc(b*Hg,(e=+d)*Hg),a):e},a.angle(90)},bg.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Hg,e=a[1]*Hg,f=b[1]*Hg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},bg.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return bg.range(Math.ceil(f/q)*q,e,q).map(m).concat(bg.range(Math.ceil(j/r)*r,i,r).map(n)).concat(bg.range(Math.ceil(d/o)*o,c,o).filter(function(a){return lg(a%q)>Bg}).map(k)).concat(bg.range(Math.ceil(h/p)*p,g,p).filter(function(a){return lg(a%r)>Bg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=pc(h,g,90),l=qc(d,c,s),m=pc(j,i,90),n=qc(f,e,s),a):s},a.majorExtent([[-180,-90+Bg],[180,90-Bg]]).minorExtent([[-180,-80-Bg],[180,80+Bg]])},bg.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=rc,e=sc;return a.distance=function(){return bg.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},bg.geo.interpolate=function(a,b){return tc(a[0]*Hg,a[1]*Hg,b[0]*Hg,b[1]*Hg)},bg.geo.length=function(a){return Ph=0,bg.geo.stream(a,Qh),Ph};var Ph,Qh={sphere:v,point:v,lineStart:uc,lineEnd:v,polygonStart:v,polygonEnd:v},Rh=vc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(bg.geo.azimuthalEqualArea=function(){return ec(Rh)}).raw=Rh;var Sh=vc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},s);(bg.geo.azimuthalEquidistant=function(){return ec(Sh)}).raw=Sh,(bg.geo.conicConformal=function(){return Rb(wc)}).raw=wc,(bg.geo.conicEquidistant=function(){return Rb(xc)}).raw=xc;var Th=vc(function(a){return 1/a},Math.atan);(bg.geo.gnomonic=function(){return ec(Th)}).raw=Th,yc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Gg]},(bg.geo.mercator=function(){return zc(yc)}).raw=yc;var Uh=vc(function(){return 1},Math.asin);(bg.geo.orthographic=function(){return ec(Uh)}).raw=Uh;var Vh=vc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(bg.geo.stereographic=function(){return ec(Vh)}).raw=Vh,Ac.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Gg]},(bg.geo.transverseMercator=function(){var a=zc(Ac),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Ac,bg.geom={},bg.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Aa(c),f=Aa(d),g=a.length,h=[],i=[];for(b=0;b<g;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Ec),b=0;b<g;b++)i.push([h[b][0],-h[b][1]]);var j=Dc(h),k=Dc(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Bc,d=Cc;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},bg.geom.polygon=function(a){return qg(a,Wh),a};var Wh=bg.geom.polygon.prototype=[];Wh.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},Wh.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,
g+=(b[1]+h[1])*c;return[f*a,g*a]},Wh.clip=function(a){for(var b,c,d,e,f,g,h=Hc(a),i=-1,j=this.length-Hc(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Fc(g,k,e)?(Fc(f,k,e)||a.push(Gc(f,g,k,e)),a.push(g)):Fc(f,k,e)&&a.push(Gc(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var Xh,Yh,Zh,$h,_h,ai=[],bi=[];Pc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Rc),b.length},_c.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ad.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=ed(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(cd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,dd(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(dd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,cd(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?ed(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,cd(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,dd(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,cd(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,dd(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,cd(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,dd(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},bg.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return fd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Bg)*Bg,y:Math.round(g(a,b)/Bg)*Bg,i:b}})}var d=Bc,e=Cc,f=d,g=e,h=ci;return a?b(a):(b.links=function(a){return fd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return fd(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Rc),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&hd(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Aa(d=a),b):d},b.y=function(a){return arguments.length?(g=Aa(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?ci:a,b):h===ci?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===ci?null:h&&h[1]},b)};var ci=[[-1e6,-1e6],[1e6,1e6]];bg.geom.delaunay=function(a){return bg.geom.voronoi().triangles(a)},bg.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(lg(i-c)+lg(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=m<<1|l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=kd()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Aa(h),u=Aa(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;n<o;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;n<o;++n){var v=+t(k=a[n],n),w=+u(k,n);v<p&&(p=v),w<q&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=kd();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){ld(a,z,p,q,r,s)},z.find=function(a){return md(z,a[0],a[1],p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Bc,i=Cc;return(g=arguments.length)?(h=id,i=jd,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},bg.interpolateRgb=nd,bg.interpolateObject=od,bg.interpolateNumber=pd,bg.interpolateString=qd;var di=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ei=new RegExp(di.source,"g");bg.interpolate=rd,bg.interpolators=[function(a,b){var c=typeof b;return("string"===c?Xg.has(b)||/^(#|rgb\(|hsl\()/.test(b)?nd:qd:b instanceof ga?nd:Array.isArray(b)?sd:"object"===c&&isNaN(b)?od:pd)(a,b)}],bg.interpolateArray=sd;var fi=function(){return s},gi=bg.map({linear:fi,poly:zd,quad:function(){return wd},cubic:function(){return xd},sin:function(){return Ad},exp:function(){return Bd},circle:function(){return Cd},elastic:Dd,back:Ed,bounce:function(){return Fd}}),hi=bg.map({in:s,out:ud,"in-out":vd,"out-in":function(a){return vd(ud(a))}});bg.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=gi.get(c)||fi,d=hi.get(d)||s,td(d(c.apply(null,cg.call(arguments,1))))},bg.interpolateHcl=Gd,bg.interpolateHsl=Hd,bg.interpolateLab=Id,bg.interpolateRound=Jd,bg.transform=function(a){var b=eg.createElementNS(bg.ns.prefix.svg,"g");return(bg.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Kd(c?c.matrix:ii)})(a)},Kd.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ii={a:1,b:0,c:0,d:1,e:0,f:0};bg.interpolateTransform=Od,bg.layout={},bg.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Rd(a[c]));return b}},bg.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=bg.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(bg.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Eg-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},bg.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(h*h/q<i){if(i<o){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&i<o){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=bg.event.x,a.py=bg.event.y,h.resume()}var c,d,e,f,g,h={},i=bg.dispatch("start","tick","end"),j=[1,1],k=.9,l=ji,m=ki,n=-30,o=li,p=.1,q=.64,r=[],t=[];return h.tick=function(){if((d*=.99)<.005)return i.end({type:"end",alpha:d=0}),!0;var b,c,h,l,m,o,q,s,u,v=r.length,w=t.length;for(c=0;c<w;++c)h=t[c],l=h.source,m=h.target,s=m.x-l.x,u=m.y-l.y,(o=s*s+u*u)&&(o=d*f[c]*((o=Math.sqrt(o))-e[c])/o,s*=o,u*=o,m.x-=s*(q=l.weight/(m.weight+l.weight)),m.y-=u*q,l.x+=s*(q=1-q),l.y+=u*q);if((q=d*p)&&(s=j[0]/2,u=j[1]/2,c=-1,q))for(;++c<v;)h=r[c],h.x+=(s-h.x)*q,h.y+=(u-h.y)*q;if(n)for(Yd(b=bg.geom.quadtree(r),d,g),c=-1;++c<v;)(h=r[c]).fixed||b.visit(a(h));for(c=-1;++c<v;)h=r[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*k,h.y-=(h.py-(h.py=h.y))*k);i.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(r=a,h):r},h.links=function(a){return arguments.length?(t=a,h):t},h.size=function(a){return arguments.length?(j=a,h):j},h.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,h):l},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(m="function"==typeof a?a:+a,h):m},h.friction=function(a){return arguments.length?(k=+a,h):k},h.charge=function(a){return arguments.length?(n="function"==typeof a?a:+a,h):n},h.chargeDistance=function(a){return arguments.length?(o=a*a,h):Math.sqrt(o)},h.gravity=function(a){return arguments.length?(p=+a,h):p},h.theta=function(a){return arguments.length?(q=a*a,h):Math.sqrt(q)},h.alpha=function(a){return arguments.length?(a=+a,d?d=a>0?a:0:a>0&&(i.start({type:"start",alpha:d=a}),bg.timer(h.tick)),h):d},h.start=function(){function a(a,d){if(!c){for(c=new Array(i),h=0;h<i;++h)c[h]=[];for(h=0;h<k;++h){var e=t[h];c[e.source.index].push(e.target),c[e.target.index].push(e.source)}}for(var f,g=c[b],h=-1,j=g.length;++h<j;)if(!isNaN(f=g[h][a]))return f;return Math.random()*d}var b,c,d,i=r.length,k=t.length,o=j[0],p=j[1];for(b=0;b<i;++b)(d=r[b]).index=b,d.weight=0;for(b=0;b<k;++b)d=t[b],"number"==typeof d.source&&(d.source=r[d.source]),"number"==typeof d.target&&(d.target=r[d.target]),++d.source.weight,++d.target.weight;for(b=0;b<i;++b)d=r[b],isNaN(d.x)&&(d.x=a("x",o)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof l)for(b=0;b<k;++b)e[b]=+l.call(this,t[b],b);else for(b=0;b<k;++b)e[b]=l;if(f=[],"function"==typeof m)for(b=0;b<k;++b)f[b]=+m.call(this,t[b],b);else for(b=0;b<k;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;b<i;++b)g[b]=+n.call(this,r[b],b);else for(b=0;b<i;++b)g[b]=n;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return c||(c=bg.behavior.drag().origin(s).on("dragstart.force",Ud).on("drag.force",b).on("dragend.force",Vd)),arguments.length?void this.on("mouseover.force",Wd).on("mouseout.force",Xd).call(c):c},bg.rebind(h,i,"on")};var ji=20,ki=1,li=1/0;bg.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return _d(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=ce,c=ae,d=be;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&($d(b,function(a){a.children&&(a.value=0)}),_d(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},bg.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=bg.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},Zd(c,d)},bg.layout.pie=function(){function a(g){var h,i=g.length,j=g.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(l<0?-1:1),o=(l-i*n)/bg.sum(j),p=bg.range(i),q=[];return null!=c&&p.sort(c===mi?function(a,b){return j[b]-j[a]}:function(a,b){return c(g[a],g[b])}),p.forEach(function(a){q[a]={data:g[a],value:h=j[a],startAngle:k,endAngle:k+=h*o+n,padAngle:m}}),q}var b=Number,c=mi,d=0,e=Eg,f=0;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a.padAngle=function(b){return arguments.length?(f=b,a):f},a};var mi={};bg.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=bg.permute(j,l),k=bg.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;o<r;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;n<m;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=s,c=he,d=ie,e=ge,f=ee,g=fe;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:ni.get(b)||he,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:oi.get(b)||ie,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var ni=bg.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(je),f=a.map(ke),g=bg.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;b<d;++b)c=g[b],h<i?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return bg.range(a.length).reverse()},default:he}),oi=bg.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;c<f;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;c<m;++c){for(b=0,e=0;b<k;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];b<k;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);d<b;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,i<j&&(j=i)}for(c=0;c<m;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];if(d)for(b=0;b<e;b++)a[b][c][1]/=d;else for(b=0;b<e;b++)a[b][c][1]=g}for(c=0;c<f;++c)h[c]=0;return h},zero:ie});bg.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[bg.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=oe,e=me;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Aa(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return ne(a,b)}:Aa(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},bg.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,_d(h,function(a){a.r=+k(a.value)}),_d(h,te),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;_d(h,function(a){a.r+=l}),_d(h,te),_d(h,function(a){a.r-=l})}return we(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=bg.layout.hierarchy().sort(pe),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},Zd(a,c)},bg.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(_d(m,c),m.parent.m=-m.z,$d(m,d),j)$d(l,f);else{var n=l,o=l,p=l;$d(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);$d(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;g<h;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Ce(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=Ae(g),e=ze(e),g&&e;)i=ze(i),f=Ae(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(Be(De(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!Ae(f)&&(f.t=g,f.m+=l-k),e&&!ze(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=bg.layout.hierarchy().sort(null).value(null),h=ye,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},Zd(a,g)},bg.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;_d(i,function(a){var b=a.children;b&&b.length?(a.x=Fe(b),a.y=Ee(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Ge(i),l=He(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return _d(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=bg.layout.hierarchy().sort(null).value(null),c=ye,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},Zd(a,b)},bg.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(b<0?0:b),c.area=isNaN(d)||d<=0?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(c<f&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=bg.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Ie,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Ie(b):Je(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Je(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Ie:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},Zd(f,h)},bg.random={normal:function(a,b){var c=arguments.length;return c<2&&(b=1),c<1&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=bg.random.normal.apply(bg,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=bg.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}},bg.scale={};var pi={floor:s,ceil:s};bg.scale.linear=function(){return Qe([0,1],[0,1],rd,!1)};var qi={s:1,g:1,p:1,r:1,e:1};bg.scale.log=function(){return Ye(bg.scale.linear().domain([0,1]),10,!0,[1,10])};var ri=bg.format(".0e"),si={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};bg.scale.pow=function(){return Ze(bg.scale.linear(),1,[0,1])},bg.scale.sqrt=function(){return bg.scale.pow().exponent(.5)},bg.scale.ordinal=function(){return _e([],{t:"range",a:[[]]})},bg.scale.category10=function(){return bg.scale.ordinal().range(ti)},bg.scale.category20=function(){return bg.scale.ordinal().range(ui)},bg.scale.category20b=function(){return bg.scale.ordinal().range(vi)},bg.scale.category20c=function(){return bg.scale.ordinal().range(wi)};var ti=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ta),ui=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ta),vi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ta),wi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ta);bg.scale.quantile=function(){return af([],[])},bg.scale.quantize=function(){return bf(0,1,[0,1])},bg.scale.threshold=function(){return cf([.5],[0,1])},bg.scale.identity=function(){return df([0,1])},bg.svg={},bg.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),j=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-Gg,l=h.apply(this,arguments)-Gg,m=Math.abs(l-k),n=k>l?0:1;if(j<a&&(o=j,j=a,a=o),m>=Fg)return b(j,n)+(a?b(a,1-n):"")+"Z";var o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=[];if((r=(+i.apply(this,arguments)||0)/2)&&(q=f===xi?Math.sqrt(a*a+j*j):+f.apply(this,arguments),n||(B*=-1),j&&(B=ba(q/j*Math.sin(r))),a&&(A=ba(q/a*Math.sin(r)))),j){s=j*Math.cos(k+B),t=j*Math.sin(k+B),u=j*Math.cos(l-B),v=j*Math.sin(l-B);var D=Math.abs(l-k-2*B)<=Dg?0:1;if(B&&lf(s,t,u,v)===n^D){var E=(k+l)/2;s=j*Math.cos(E),t=j*Math.sin(E),u=v=null}}else s=t=0;if(a){w=a*Math.cos(l-A),x=a*Math.sin(l-A),y=a*Math.cos(k+A),z=a*Math.sin(k+A);var F=Math.abs(k-l+2*A)<=Dg?0:1;if(A&&lf(w,x,y,z)===1-n^F){var G=(k+l)/2;w=a*Math.cos(G),x=a*Math.sin(G),y=z=null}}else w=x=0;if((o=Math.min(Math.abs(j-a)/2,+e.apply(this,arguments)))>.001){p=a<j^n?0:1;var H=null==y?[w,x]:null==u?[s,t]:Gc([s,t],[y,z],[u,v],[w,x]),I=s-H[0],J=t-H[1],K=u-H[0],L=v-H[1],M=1/Math.sin(Math.acos((I*K+J*L)/(Math.sqrt(I*I+J*J)*Math.sqrt(K*K+L*L)))/2),N=Math.sqrt(H[0]*H[0]+H[1]*H[1]);if(null!=u){var O=Math.min(o,(j-N)/(M+1)),P=mf(null==y?[w,x]:[y,z],[s,t],j,O,n),Q=mf([u,v],[w,x],j,O,n);o===O?C.push("M",P[0],"A",O,",",O," 0 0,",p," ",P[1],"A",j,",",j," 0 ",1-n^lf(P[1][0],P[1][1],Q[1][0],Q[1][1]),",",n," ",Q[1],"A",O,",",O," 0 0,",p," ",Q[0]):C.push("M",P[0],"A",O,",",O," 0 1,",p," ",Q[0])}else C.push("M",s,",",t);if(null!=y){var R=Math.min(o,(a-N)/(M-1)),S=mf([s,t],[y,z],a,-R,n),T=mf([w,x],null==u?[s,t]:[u,v],a,-R,n);o===R?C.push("L",T[0],"A",R,",",R," 0 0,",p," ",T[1],"A",a,",",a," 0 ",n^lf(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",R,",",R," 0 0,",p," ",S[0]):C.push("L",T[0],"A",R,",",R," 0 0,",p," ",S[0])}else C.push("L",w,",",x)}else C.push("M",s,",",t),null!=u&&C.push("A",j,",",j," 0 ",D,",",n," ",u,",",v),C.push("L",w,",",x),null!=y&&C.push("A",a,",",a," 0 ",F,",",1-n," ",y,",",z);return C.push("Z"),C.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=ff,d=gf,e=ef,f=xi,g=hf,h=jf,i=kf;return a.innerRadius=function(b){return arguments.length?(c=Aa(b),a):c},a.outerRadius=function(b){return arguments.length?(d=Aa(b),a):d},a.cornerRadius=function(b){return arguments.length?(e=Aa(b),a):e},a.padRadius=function(b){return arguments.length?(f=b==xi?xi:Aa(b),a):f},a.startAngle=function(b){return arguments.length?(g=Aa(b),a):g},a.endAngle=function(b){return arguments.length?(h=Aa(b),a):h},a.padAngle=function(b){return arguments.length?(i=Aa(b),a):i},a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-Gg;return[Math.cos(b)*a,Math.sin(b)*a]},a};var xi="auto";bg.svg.line=function(){return nf(s)};var yi=bg.map({linear:of,"linear-closed":pf,step:qf,"step-before":rf,"step-after":sf,basis:yf,"basis-open":zf,"basis-closed":Af,bundle:Bf,cardinal:vf,"cardinal-open":tf,"cardinal-closed":uf,monotone:Hf});yi.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var zi=[0,2/3,1/3,0],Ai=[0,1/3,2/3,0],Bi=[0,1/6,2/3,1/6];bg.svg.line.radial=function(){var a=nf(If);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},rf.reverse=sf,sf.reverse=rf,bg.svg.area=function(){return Jf(s)},bg.svg.area.radial=function(){var a=Jf(If);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},bg.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)-Gg,k=j.call(a,e,d)-Gg;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Dg)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=rc,g=sc,h=Kf,i=hf,j=jf;return a.radius=function(b){return arguments.length?(h=Aa(b),a):h},a.source=function(b){return arguments.length?(f=Aa(b),a):f},a.target=function(b){return arguments.length?(g=Aa(b),a):g},a.startAngle=function(b){return arguments.length?(i=Aa(b),a):i},a.endAngle=function(b){return arguments.length?(j=Aa(b),a):j},a},bg.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=rc,c=sc,d=Lf;return a.source=function(c){return arguments.length?(b=Aa(c),a):b},a.target=function(b){return arguments.length?(c=Aa(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},bg.svg.diagonal.radial=function(){var a=bg.svg.diagonal(),b=Lf,c=a.projection;return a.projection=function(a){return arguments.length?c(Mf(b=a)):b},a},bg.svg.symbol=function(){function a(a,d){return(Ci.get(b.call(this,a,d))||Pf)(c.call(this,a,d))}var b=Of,c=Nf;return a.type=function(c){return arguments.length?(b=Aa(c),a):b},a.size=function(b){return arguments.length?(c=Aa(b),a):c},a};var Ci=bg.map({circle:Pf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Ei)),c=b*Ei;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Di),c=b*Di/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Di),c=b*Di/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});bg.svg.symbolTypes=Ci.keys();var Di=Math.sqrt(3),Ei=Math.tan(30*Hg);ug.transition=function(a){for(var b,c,d=Fi||++Ji,e=Uf(a),f=[],g=Gi||{time:Date.now(),ease:yd,delay:0,duration:250},h=-1,i=this.length;++h<i;){f.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(c=j[k])&&Vf(c,k,e,d,g),b.push(c)}return Rf(f,e,d)},ug.interrupt=function(a){return this.each(null==a?Hi:Qf(Uf(a)))};var Fi,Gi,Hi=Qf(Uf()),Ii=[],Ji=0;Ii.call=ug.call,Ii.empty=ug.empty,Ii.node=ug.node,Ii.size=ug.size,bg.transition=function(a,b){return a&&a.transition?Fi?a.transition(b):a:bg.selection().transition(a)},bg.transition.prototype=Ii,Ii.select=function(a){var b,c,d,e=this.id,f=this.namespace,g=[];a=C(a);for(var h=-1,i=this.length;++h<i;){g.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(d=j[k])&&(c=a.call(d,d.__data__,k,h))?("__data__"in d&&(c.__data__=d.__data__),Vf(c,k,f,e,d[f][e]),b.push(c)):b.push(null)}return Rf(g,f,e)},Ii.selectAll=function(a){var b,c,d,e,f,g=this.id,h=this.namespace,i=[];a=D(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(d=l[m]){f=d[h][g],c=a.call(d,d.__data__,m,j),i.push(b=[]);for(var o=-1,p=c.length;++o<p;)(e=c[o])&&Vf(e,o,h,g,f),b.push(e)}return Rf(i,h,g)},Ii.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=P(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Rf(e,this.namespace,this.id)},Ii.tween=function(a,b){var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):R(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},Ii.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Od:rd,h=bg.ns.qualify(a);return Sf(this,"attr."+a,b,h.local?f:e)},Ii.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=bg.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Ii.style=function(a,c,d){function e(){this.style.removeProperty(a)}function f(c){return null==c?e:(c+="",function(){var e,f=b(this).getComputedStyle(this,null).getPropertyValue(a);return f!==c&&(e=rd(f,c),function(b){this.style.setProperty(a,e(b),d)})})}var g=arguments.length;if(g<3){if("string"!=typeof a){g<2&&(c="");for(d in a)this.style(d,a[d],c);return this}d=""}return Sf(this,"style."+a,c,f)},Ii.styleTween=function(a,c,d){function e(e,f){var g=c.call(this,e,f,b(this).getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),d)}}return arguments.length<3&&(d=""),this.tween("style."+a,e)},Ii.text=function(a){return Sf(this,"text",a,Tf)},Ii.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},Ii.ease=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].ease:("function"!=typeof a&&(a=bg.ease.apply(bg,arguments)),R(this,function(d){d[c][b].ease=a}))},Ii.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:R(this,"function"==typeof a?function(d,e,f){
d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},Ii.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:R(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},Ii.each=function(a,b){var c=this.id,d=this.namespace;if(arguments.length<2){var e=Gi,f=Fi;try{Fi=c,R(this,function(b,e,f){Gi=b[d][c],a.call(b,b.__data__,e,f)})}finally{Gi=e,Fi=f}}else R(this,function(e){var f=e[d][c];(f.event||(f.event=bg.dispatch("start","end","interrupt"))).on(a,b)});return this},Ii.transition=function(){for(var a,b,c,d,e=this.id,f=++Ji,g=this.namespace,h=[],i=0,j=this.length;i<j;i++){h.push(a=[]);for(var b=this[i],k=0,l=b.length;k<l;k++)(c=b[k])&&(d=c[g][e],Vf(c,k,g,f,{time:d.time,ease:d.ease,delay:d.delay+d.duration,duration:d.duration})),a.push(c)}return Rf(h,g,f)},bg.svg.axis=function(){function a(a){a.each(function(){var a,j=bg.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):s:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Bg),q=bg.transition(o.exit()).style("opacity",Bg).remove(),r=bg.transition(o.order()).style("opacity",1),t=Math.max(e,0)+g,u=Le(l),v=j.selectAll(".domain").data([0]),w=(v.enter().append("path").attr("class","domain"),bg.transition(v));p.append("line"),p.append("text");var x,y,z,A,B=p.select("line"),C=r.select("line"),D=o.select("text").text(n),E=p.select("text"),F=r.select("text"),G="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=Wf,x="x",z="y",y="x2",A="y2",D.attr("dy",G<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+u[0]+","+G*f+"V0H"+u[1]+"V"+G*f)):(a=Xf,x="y",z="x",y="y2",A="x2",D.attr("dy",".32em").style("text-anchor",G<0?"end":"start"),w.attr("d","M"+G*f+","+u[0]+"H0V"+u[1]+"H"+G*f)),B.attr(A,G*e),E.attr(z,G*t),C.attr(y,0).attr(A,G*e),F.attr(x,0).attr(z,G*t),l.rangeBand){var H=l,I=H.rangeBand()/2;k=l=function(a){return H(a)+I}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=bg.scale.linear(),d=Ki,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Li?b+"":Ki,a):d},a.ticks=function(){return arguments.length?(h=arguments,a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Ki="bottom",Li={top:1,right:1,bottom:1,left:1};bg.svg.brush=function(){function a(b){b.each(function(){var b=bg.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=b.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),b.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=b.selectAll(".resize").data(p,s);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Mi[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var i,l=bg.transition(b),m=bg.transition(g);j&&(i=Le(j),m.attr("x",i[0]).attr("width",i[1]-i[0]),d(l)),k&&(i=Le(k),m.attr("y",i[0]).attr("height",i[1]-i[0]),e(l)),c(l)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",l[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(a){a.select(".extent").attr("y",m[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function f(){function f(){32==bg.event.keyCode&&(D||(t=null,F[0]-=l[1],F[1]-=m[1],D=2),y())}function p(){32==bg.event.keyCode&&2==D&&(F[0]+=l[1],F[1]+=m[1],D=0,y())}function q(){var a=bg.mouse(v),b=!1;u&&(a[0]+=u[0],a[1]+=u[1]),D||(bg.event.altKey?(t||(t=[(l[0]+l[1])/2,(m[0]+m[1])/2]),F[0]=l[+(a[0]<t[0])],F[1]=m[+(a[1]<t[1])]):t=null),B&&r(a,j,0)&&(d(z),b=!0),C&&r(a,k,1)&&(e(z),b=!0),b&&(c(z),x({type:"brush",mode:D?"move":"resize"}))}function r(a,b,c){var d,e,f=Le(b),i=f[0],j=f[1],k=F[c],p=c?m:l,q=p[1]-p[0];if(D&&(i-=k,j-=q+k),d=(c?o:n)?Math.max(i,Math.min(j,a[c])):a[c],D?e=(d+=k)+q:(t&&(k=Math.max(i,Math.min(j,2*t[c]-d))),k<d?(e=d,d=k):e=k),p[0]!=d||p[1]!=e)return c?h=null:g=null,p[0]=d,p[1]=e,!0}function s(){q(),z.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),bg.select("body").style("cursor",null),G.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),x({type:"brushend"})}var t,u,v=this,w=bg.select(bg.event.target),x=i.of(v,arguments),z=bg.select(v),A=w.datum(),B=!/^(n|s)$/.test(A)&&j,C=!/^(e|w)$/.test(A)&&k,D=w.classed("extent"),E=X(v),F=bg.mouse(v),G=bg.select(b(v)).on("keydown.brush",f).on("keyup.brush",p);if(bg.event.changedTouches?G.on("touchmove.brush",q).on("touchend.brush",s):G.on("mousemove.brush",q).on("mouseup.brush",s),z.interrupt().selectAll("*").interrupt(),D)F[0]=l[0]-F[0],F[1]=m[0]-F[1];else if(A){var H=+/w$/.test(A),I=+/^n/.test(A);u=[l[1-H]-F[0],m[1-I]-F[1]],F[0]=l[H],F[1]=m[I]}else bg.event.altKey&&(t=F.slice());z.style("pointer-events","none").selectAll(".resize").style("display",null),bg.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),q()}var g,h,i=A(a,"brushstart","brush","brushend"),j=null,k=null,l=[0,0],m=[0,0],n=!0,o=!0,p=Ni[0];return a.event=function(a){a.each(function(){var a=i.of(this,arguments),b={x:l,y:m,i:g,j:h},c=this.__chart__||b;this.__chart__=b,Fi?bg.select(this).transition().each("start.brush",function(){g=c.i,h=c.j,l=c.x,m=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=sd(l,b.x),d=sd(m,b.y);return g=h=null,function(e){l=b.x=c(e),m=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i,h=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(j=b,p=Ni[!j<<1|!k],a):j},a.y=function(b){return arguments.length?(k=b,p=Ni[!j<<1|!k],a):k},a.clamp=function(b){return arguments.length?(j&&k?(n=!!b[0],o=!!b[1]):j?n=!!b:k&&(o=!!b),a):j&&k?[n,o]:j?n:k?o:null},a.extent=function(b){var c,d,e,f,i;return arguments.length?(j&&(c=b[0],d=b[1],k&&(c=c[0],d=d[0]),g=[c,d],j.invert&&(c=j(c),d=j(d)),d<c&&(i=c,c=d,d=i),c==l[0]&&d==l[1]||(l=[c,d])),k&&(e=b[0],f=b[1],j&&(e=e[1],f=f[1]),h=[e,f],k.invert&&(e=k(e),f=k(f)),f<e&&(i=e,e=f,f=i),e==m[0]&&f==m[1]||(m=[e,f])),a):(j&&(g?(c=g[0],d=g[1]):(c=l[0],d=l[1],j.invert&&(c=j.invert(c),d=j.invert(d)),d<c&&(i=c,c=d,d=i))),k&&(h?(e=h[0],f=h[1]):(e=m[0],f=m[1],k.invert&&(e=k.invert(e),f=k.invert(f)),f<e&&(i=e,e=f,f=i))),j&&k?[[c,e],[d,f]]:j?[c,d]:k&&[e,f])},a.clear=function(){return a.empty()||(l=[0,0],m=[0,0],g=h=null),a},a.empty=function(){return!!j&&l[0]==l[1]||!!k&&m[0]==m[1]},bg.rebind(a,i,"on")};var Mi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ni=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Oi=fh.format=lh.timeFormat,Pi=Oi.utc,Qi=Pi("%Y-%m-%dT%H:%M:%S.%LZ");Oi.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Yf:Qi,Yf.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},Yf.toString=Qi.toString,fh.second=Na(function(a){return new gh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),fh.seconds=fh.second.range,fh.seconds.utc=fh.second.utc.range,fh.minute=Na(function(a){return new gh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),fh.minutes=fh.minute.range,fh.minutes.utc=fh.minute.utc.range,fh.hour=Na(function(a){var b=a.getTimezoneOffset()/60;return new gh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),fh.hours=fh.hour.range,fh.hours.utc=fh.hour.utc.range,fh.month=Na(function(a){return a=fh.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),fh.months=fh.month.range,fh.months.utc=fh.month.utc.range;var Ri=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Si=[[fh.second,1],[fh.second,5],[fh.second,15],[fh.second,30],[fh.minute,1],[fh.minute,5],[fh.minute,15],[fh.minute,30],[fh.hour,1],[fh.hour,3],[fh.hour,6],[fh.hour,12],[fh.day,1],[fh.day,2],[fh.week,1],[fh.month,1],[fh.month,3],[fh.year,1]],Ti=Oi.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Cb]]),Ui={range:function(a,b,c){return bg.range(Math.ceil(a/c)*c,+b,c).map($f)},floor:s,ceil:s};Si.year=fh.year,fh.scale=function(){return Zf(bg.scale.linear(),Si,Ti)};var Vi=Si.map(function(a){return[a[0].utc,a[1]]}),Wi=Pi.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Cb]]);Vi.year=fh.year.utc,fh.scale.utc=function(){return Zf(bg.scale.linear(),Vi,Wi)},bg.text=Ba(function(a){return a.responseText}),bg.json=function(a,b){return Ca(a,"application/json",_f,b)},bg.html=function(a,b){return Ca(a,"text/html",ag,b)},bg.xml=Ba(function(a){return a.responseXML}),"function"==typeof define&&define.amd?define(bg):"object"==typeof module&&module.exports&&(module.exports=bg),this.d3=bg}(),function(a){"use strict";function b(a){this.owner=a}function c(a,b){if(Object.create)b.prototype=Object.create(a.prototype);else{var c=function(){};c.prototype=a.prototype,b.prototype=new c}return b.prototype.constructor=b,b}function d(a){var b=this.internal=new e(this);b.loadConfig(a),b.init(),function a(b,c,d){Object.keys(b).forEach(function(e){c[e]=b[e].bind(d),Object.keys(b[e]).length>0&&a(b[e],c[e],d)})}(h,this,this)}function e(b){var c=this;c.d3=a.d3?a.d3:"undefined"!=typeof require?require("d3"):void 0,c.api=b,c.config=c.getDefaultConfig(),c.data={},c.cache={},c.axes={}}function f(a){b.call(this,a)}function g(a,b){function c(a,b){a.attr("transform",function(a){return"translate("+Math.ceil(b(a)+u)+", 0)"})}function d(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})}function e(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function f(a){var b,c,d=[];if(a.ticks)return a.ticks.apply(a,n);for(c=a.domain(),b=Math.ceil(c[0]);b<c[1];b++)d.push(b);return d.length>0&&d[0]>0&&d.unshift(d[0]-(d[1]-d[0])),d}function g(){var a,c=p.copy();return b.isCategory&&(a=p.domain(),c.domain([a[0],a[1]-1])),c}function h(a){var b=m?m(a):a;return"undefined"!=typeof b?b:""}function i(a){if(z)return z;var b={h:11.5,w:5.5};return a.select("text").text(h).each(function(a){var c=this.getBoundingClientRect(),d=h(a),e=c.height,f=d?c.width/d.length:void 0;e&&f&&(b.h=e,b.w=f)}).text(""),z=b,b}function j(c){return b.withoutTransition?c:a.transition(c)}function k(m){m.each(function(){function m(a,c){function d(a,b){f=void 0;for(var h=1;h<b.length;h++)if(" "===b.charAt(h)&&(f=h),e=b.substr(0,h+1),g=U.w*e.length,c<g)return d(a.concat(b.substr(0,f?f:h)),b.slice(f?f+1:h));return a.concat(b)}var e,f,g,i=h(a),j=[];return"[object Array]"===Object.prototype.toString.call(i)?i:((!c||c<=0)&&(c=X?95:b.isCategory?Math.ceil(F(G[1])-F(G[0]))-12:110),d(j,i+""))}function n(a,b){var c=U.h;return 0===b&&(c="left"===q||"right"===q?-((V[a.index]-1)*(U.h/2)-3):".71em"),c}function v(a){var b=p(a)+(o?0:u);return L[0]<b&&b<L[1]?r:0}function w(a){return a?a>0?"start":"end":"middle"}function x(a){return a?"rotate("+a+")":""}function y(a){return a?8*Math.sin(Math.PI*(a/180)):0}function z(a){return a?11.5-2.5*(a/15)*(a>0?1:-1):W}var A,B,C,D=k.g=a.select(this),E=this.__chart__||p,F=this.__chart__=g(),G=t?t:f(F),H=D.selectAll(".tick").data(G,F),I=H.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),J=H.exit().remove(),K=j(H).style("opacity",1),L=p.rangeExtent?p.rangeExtent():e(p.range()),M=D.selectAll(".domain").data([0]),N=(M.enter().append("path").attr("class","domain"),j(M));I.append("line"),I.append("text");var O=I.select("line"),P=K.select("line"),Q=I.select("text"),R=K.select("text");b.isCategory?(u=Math.ceil((F(1)-F(0))/2),B=o?0:u,C=o?u:0):u=B=0;var S,T,U=i(D.select(".tick")),V=[],W=Math.max(r,0)+s,X="left"===q||"right"===q;S=H.select("text"),T=S.selectAll("tspan").data(function(a,c){var d=b.tickMultiline?m(a,b.tickWidth):[].concat(h(a));return V[c]=d.length,d.map(function(a){return{index:c,splitted:a}})}),T.enter().append("tspan"),T.exit().remove(),T.text(function(a){return a.splitted});var Y=b.tickTextRotate;switch(q){case"bottom":A=c,O.attr("y2",r),Q.attr("y",W),P.attr("x1",B).attr("x2",B).attr("y2",v),R.attr("x",0).attr("y",z(Y)).style("text-anchor",w(Y)).attr("transform",x(Y)),T.attr("x",0).attr("dy",n).attr("dx",y(Y)),N.attr("d","M"+L[0]+","+l+"V0H"+L[1]+"V"+l);break;case"top":A=c,O.attr("y2",-r),Q.attr("y",-W),P.attr("x2",0).attr("y2",-r),R.attr("x",0).attr("y",-W),S.style("text-anchor","middle"),T.attr("x",0).attr("dy","0em"),N.attr("d","M"+L[0]+","+-l+"V0H"+L[1]+"V"+-l);break;case"left":A=d,O.attr("x2",-r),Q.attr("x",-W),P.attr("x2",-r).attr("y1",C).attr("y2",C),R.attr("x",-W).attr("y",u),S.style("text-anchor","end"),T.attr("x",-W).attr("dy",n),N.attr("d","M"+-l+","+L[0]+"H0V"+L[1]+"H"+-l);break;case"right":A=d,O.attr("x2",r),Q.attr("x",W),P.attr("x2",r).attr("y2",0),R.attr("x",W).attr("y",0),S.style("text-anchor","start"),T.attr("x",W).attr("dy",n),N.attr("d","M"+l+","+L[0]+"H0V"+L[1]+"H"+l)}if(F.rangeBand){var Z=F,$=Z.rangeBand()/2;E=F=function(a){return Z(a)+$}}else E.rangeBand?E=F:J.call(A,F);I.call(A,E),K.call(A,F)})}var l,m,n,o,p=a.scale.linear(),q="bottom",r=6,s=3,t=null,u=0,v=!0;return b=b||{},l=b.withOuterTick?6:0,k.scale=function(a){return arguments.length?(p=a,k):p},k.orient=function(a){return arguments.length?(q=a in{top:1,right:1,bottom:1,left:1}?a+"":"bottom",k):q},k.tickFormat=function(a){return arguments.length?(m=a,k):m},k.tickCentered=function(a){return arguments.length?(o=a,k):o},k.tickOffset=function(){return u},k.tickInterval=function(){var a,c;return b.isCategory?a=2*u:(c=k.g.select("path.domain").node().getTotalLength()-2*l,a=c/k.g.selectAll("line").size()),a===1/0?0:a},k.ticks=function(){return arguments.length?(n=arguments,k):n},k.tickCulling=function(a){return arguments.length?(v=a,k):v},k.tickValues=function(a){if("function"==typeof a)t=function(){return a(p.domain())};else{if(!arguments.length)return t;t=a}return k},k}var h,i,j,k={version:"0.4.10"};k.generate=function(a){return new d(a)},k.chart={fn:d.prototype,internal:{fn:e.prototype,axis:{fn:f.prototype}}},h=k.chart.fn,i=k.chart.internal.fn,j=k.chart.internal.axis.fn,i.init=function(){var a=this,b=a.config;if(a.initParams(),b.data_url)a.convertUrlToData(b.data_url,b.data_mimeType,b.data_keys,a.initWithData);else if(b.data_json)a.initWithData(a.convertJsonToData(b.data_json,b.data_keys));else if(b.data_rows)a.initWithData(a.convertRowsToData(b.data_rows));else{if(!b.data_columns)throw Error("url or json or rows or columns is required.");a.initWithData(a.convertColumnsToData(b.data_columns))}},i.initParams=function(){var a=this,b=a.d3,c=a.config;a.clipId="c3-"+ +new Date+"-clip",a.clipIdForXAxis=a.clipId+"-xaxis",a.clipIdForYAxis=a.clipId+"-yaxis",a.clipIdForGrid=a.clipId+"-grid",a.clipIdForSubchart=a.clipId+"-subchart",a.clipPath=a.getClipPath(a.clipId),a.clipPathForXAxis=a.getClipPath(a.clipIdForXAxis),a.clipPathForYAxis=a.getClipPath(a.clipIdForYAxis),a.clipPathForGrid=a.getClipPath(a.clipIdForGrid),a.clipPathForSubchart=a.getClipPath(a.clipIdForSubchart),a.dragStart=null,a.dragging=!1,a.flowing=!1,a.cancelClick=!1,a.mouseover=!1,a.transiting=!1,a.color=a.generateColor(),a.levelColor=a.generateLevelColor(),a.dataTimeFormat=c.data_xLocaltime?b.time.format:b.time.format.utc,a.axisTimeFormat=c.axis_x_localtime?b.time.format:b.time.format.utc,a.defaultAxisTimeFormat=a.axisTimeFormat.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%-m/%-d",function(a){return a.getDay()&&1!==a.getDate()}],["%-m/%-d",function(a){return 1!==a.getDate()}],["%-m/%-d",function(a){return a.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),a.hiddenTargetIds=[],a.hiddenLegendIds=[],a.focusedTargetIds=[],a.defocusedTargetIds=[],a.xOrient=c.axis_rotated?"left":"bottom",a.yOrient=c.axis_rotated?c.axis_y_inner?"top":"bottom":c.axis_y_inner?"right":"left",a.y2Orient=c.axis_rotated?c.axis_y2_inner?"bottom":"top":c.axis_y2_inner?"left":"right",a.subXOrient=c.axis_rotated?"left":"bottom",a.isLegendRight="right"===c.legend_position,a.isLegendInset="inset"===c.legend_position,a.isLegendTop="top-left"===c.legend_inset_anchor||"top-right"===c.legend_inset_anchor,a.isLegendLeft="top-left"===c.legend_inset_anchor||"bottom-left"===c.legend_inset_anchor,a.legendStep=0,a.legendItemWidth=0,a.legendItemHeight=0,a.currentMaxTickWidths={x:0,y:0,y2:0},a.rotated_padding_left=30,a.rotated_padding_right=c.axis_rotated&&!c.axis_x_show?0:30,a.rotated_padding_top=5,a.withoutFadeIn={},a.intervalForObserveInserted=void 0,a.axes.subx=b.selectAll([])},i.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},i.initWithData=function(b){var c,d,e=this,g=e.d3,h=e.config,i=!0;e.axis=new f(e),e.initPie&&e.initPie(),e.initBrush&&e.initBrush(),e.initZoom&&e.initZoom(),h.bindto?"function"==typeof h.bindto.node?e.selectChart=h.bindto:e.selectChart=g.select(h.bindto):e.selectChart=g.selectAll([]),e.selectChart.empty()&&(e.selectChart=g.select(document.createElement("div")).style("opacity",0),e.observeInserted(e.selectChart),i=!1),e.selectChart.html("").classed("c3",!0),e.data.xs={},e.data.targets=e.convertDataToTargets(b),h.data_filter&&(e.data.targets=e.data.targets.filter(h.data_filter)),h.data_hide&&e.addHiddenTargetIds(h.data_hide===!0?e.mapToIds(e.data.targets):h.data_hide),h.legend_hide&&e.addHiddenLegendIds(h.legend_hide===!0?e.mapToIds(e.data.targets):h.legend_hide),e.hasType("gauge")&&(h.legend_show=!1),e.updateSizes(),e.updateScales(),e.x.domain(g.extent(e.getXDomain(e.data.targets))),e.y.domain(e.getYDomain(e.data.targets,"y")),e.y2.domain(e.getYDomain(e.data.targets,"y2")),e.subX.domain(e.x.domain()),e.subY.domain(e.y.domain()),e.subY2.domain(e.y2.domain()),e.orgXDomain=e.x.domain(),e.brush&&e.brush.scale(e.subX),h.zoom_enabled&&e.zoom.scale(e.x),e.svg=e.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return h.onmouseover.call(e)}).on("mouseleave",function(){return h.onmouseout.call(e)}),c=e.svg.append("defs"),e.clipChart=e.appendClip(c,e.clipId),e.clipXAxis=e.appendClip(c,e.clipIdForXAxis),e.clipYAxis=e.appendClip(c,e.clipIdForYAxis),e.clipGrid=e.appendClip(c,e.clipIdForGrid),e.clipSubchart=e.appendClip(c,e.clipIdForSubchart),e.updateSvgSize(),d=e.main=e.svg.append("g").attr("transform",e.getTranslate("main")),e.initSubchart&&e.initSubchart(),e.initTooltip&&e.initTooltip(),e.initLegend&&e.initLegend(),d.append("text").attr("class",l.text+" "+l.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),e.initRegion(),e.initGrid(),d.append("g").attr("clip-path",e.clipPath).attr("class",l.chart),h.grid_lines_front&&e.initGridLines(),e.initEventRect(),e.initChartElements(),d.insert("rect",h.zoom_privileged?null:"g."+l.regions).attr("class",l.zoomRect).attr("width",e.width).attr("height",e.height).style("opacity",0).on("dblclick.zoom",null),h.axis_x_extent&&e.brush.extent(e.getDefaultExtent()),e.axis.init(),e.updateTargets(e.data.targets),i&&(e.updateDimension(),e.config.oninit.call(e),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),null==a.onresize&&(a.onresize=e.generateResize()),a.onresize.add&&(a.onresize.add(function(){h.onresize.call(e)}),a.onresize.add(function(){e.api.flush()}),a.onresize.add(function(){h.onresized.call(e)})),e.api.element=e.selectChart.node()},i.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),d=a.attr("x2"),e=a.attr("y1"),f=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(d),y1:Math.ceil(e),y2:Math.ceil(f)})})},i.updateSizes=function(){var a=this,b=a.config,c=a.legend?a.getLegendHeight():0,d=a.legend?a.getLegendWidth():0,e=a.isLegendRight||a.isLegendInset?0:c,f=a.hasArcType(),g=b.axis_rotated||f?0:a.getHorizontalAxisHeight("x"),h=b.subchart_show&&!f?b.subchart_size_height+g:0;a.currentWidth=a.getCurrentWidth(),a.currentHeight=a.getCurrentHeight(),a.margin=b.axis_rotated?{top:a.getHorizontalAxisHeight("y2")+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:a.getHorizontalAxisHeight("y")+e+a.getCurrentPaddingBottom(),left:h+(f?0:a.getCurrentPaddingLeft())}:{top:4+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:g+h+e+a.getCurrentPaddingBottom(),left:f?0:a.getCurrentPaddingLeft()},a.margin2=b.axis_rotated?{top:a.margin.top,right:NaN,bottom:20+e,left:a.rotated_padding_left}:{top:a.currentHeight-h-e,right:NaN,bottom:g+e,left:a.margin.left},a.margin3={top:0,right:NaN,bottom:0,left:0},a.updateSizeForLegend&&a.updateSizeForLegend(c,d),a.width=a.currentWidth-a.margin.left-a.margin.right,a.height=a.currentHeight-a.margin.top-a.margin.bottom,a.width<0&&(a.width=0),a.height<0&&(a.height=0),a.width2=b.axis_rotated?a.margin.left-a.rotated_padding_left-a.rotated_padding_right:a.width,a.height2=b.axis_rotated?a.height:a.currentHeight-a.margin2.top-a.margin2.bottom,a.width2<0&&(a.width2=0),a.height2<0&&(a.height2=0),a.arcWidth=a.width-(a.isLegendRight?d+10:0),a.arcHeight=a.height-(a.isLegendRight?0:10),a.hasType("gauge")&&(a.arcHeight+=a.height-a.getGaugeLabelHeight()),a.updateRadius&&a.updateRadius(),a.isLegendRight&&f&&(a.margin3.left=a.arcWidth/2+1.1*a.radiusExpanded)},i.updateTargets=function(a){var b=this;b.updateTargetsForText(a),b.updateTargetsForBar(a),b.updateTargetsForLine(a),b.hasArcType()&&b.updateTargetsForArc&&b.updateTargetsForArc(a),b.updateTargetsForSubchart&&b.updateTargetsForSubchart(a),b.showTargets()},i.showTargets=function(){var a=this;a.svg.selectAll("."+l.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",1)},i.redraw=function(a,b){var c,d,e,f,g,h,i,j,k,m,n,o,p,q,r,s,t,u,v,x,y,z,A,B,C,D,E,F=this,G=F.main,H=F.d3,I=F.config,J=F.getShapeIndices(F.isAreaType),K=F.getShapeIndices(F.isBarType),L=F.getShapeIndices(F.isLineType),M=F.hasArcType(),N=F.filterTargetsToShow(F.data.targets),O=F.xv.bind(F);a=a||{},c=w(a,"withY",!0),d=w(a,"withSubchart",!0),e=w(a,"withTransition",!0),h=w(a,"withTransform",!1),i=w(a,"withUpdateXDomain",!1),j=w(a,"withUpdateOrgXDomain",!1),k=w(a,"withTrimXDomain",!0),p=w(a,"withUpdateXAxis",i),m=w(a,"withLegend",!1),n=w(a,"withEventRect",!0),o=w(a,"withDimension",!0),f=w(a,"withTransitionForExit",e),g=w(a,"withTransitionForAxis",e),v=e?I.transition_duration:0,x=f?v:0,y=g?v:0,b=b||F.axis.generateTransitions(y),m&&I.legend_show?F.updateLegend(F.mapToIds(F.data.targets),a,b):o&&F.updateDimension(!0),F.isCategorized()&&0===N.length&&F.x.domain([0,F.axes.x.selectAll(".tick").size()]),N.length?(F.updateXDomain(N,i,j,k),I.axis_x_tick_values||(B=F.axis.updateXAxisTickValues(N))):(F.xAxis.tickValues([]),F.subXAxis.tickValues([])),I.zoom_rescale&&!a.flow&&(C=F.x.orgDomain()),F.y.domain(F.getYDomain(N,"y",C)),F.y2.domain(F.getYDomain(N,"y2",C)),!I.axis_y_tick_values&&I.axis_y_tick_count&&F.yAxis.tickValues(F.axis.generateTickValues(F.y.domain(),I.axis_y_tick_count)),!I.axis_y2_tick_values&&I.axis_y2_tick_count&&F.y2Axis.tickValues(F.axis.generateTickValues(F.y2.domain(),I.axis_y2_tick_count)),F.axis.redraw(b,M),F.axis.updateLabels(e),(i||p)&&N.length&&(I.axis_x_tick_culling&&B?F.svg.selectAll("."+l.axisX).each(function(){var a=H.select(this),b=a.select("path.domain").node().getTotalLength()-(I.axis_x_tick_outer?12:0),c=[];if(a.selectAll(".tick text").each(function(a){var b=B.indexOf(a);b>=0&&c.push({e:this,index:b})}),c.sort(function(a,b){return a.index-b.index}),I.axis_x_tick_rotate||c.forEach(function(a){var c=a.e.getBoundingClientRect().width/2,d=H.transform(H.select(a.e.parentNode).attr("transform"));H.select(a.e).style("text-anchor",function(){return d.translate[0]<c?"start":d.translate[0]+c>b?"end":"middle"})}),c.length>I.axis_x_tick_culling_max)if(I.axis_x_tick_culling_max>1){for(var d=I.axis_x_tick_culling_max,e=Math.floor(c.length/d);c.length/e>=d+1;)d--,e=Math.floor(c.length/d);var f=Math.floor((c.length-e*(d-1)-1)/2);c.forEach(function(a,b){H.select(a.e).style("display",(b+e-f)%e?"none":"block")})}else{var g=Math.round(c.length/2);c.forEach(function(a,b){H.select(a.e).style("display",b==g?"block":"none")})}else c.forEach(function(a){H.select(a.e).style("display","block")})}):F.svg.selectAll("."+l.axisX+" .tick text").style("display","block")),q=F.generateDrawArea?F.generateDrawArea(J,!1):void 0,r=F.generateDrawBar?F.generateDrawBar(K):void 0,s=F.generateDrawLine?F.generateDrawLine(L,!1):void 0,t=F.generateXYForText(J,K,L,!0),u=F.generateXYForText(J,K,L,!1),c&&(F.subY.domain(F.getYDomain(N,"y")),F.subY2.domain(F.getYDomain(N,"y2"))),F.tooltip.style("display","none"),F.updateXgridFocus(),G.select("text."+l.text+"."+l.empty).attr("x",F.width/2).attr("y",F.height/2).text(I.data_empty_label_text).transition().style("opacity",N.length?0:1),F.updateGrid(v),F.updateRegion(v),F.updateBar(x),F.updateLine(x),F.updateArea(x),F.updateCircle(),F.hasDataLabel()&&F.updateText(x),F.redrawArc&&F.redrawArc(v,x,h),F.redrawSubchart&&F.redrawSubchart(d,b,v,x,J,K,L),G.selectAll("."+l.selectedCircles).filter(F.isBarType.bind(F)).selectAll("circle").remove(),I.interaction_enabled&&!a.flow&&n&&(F.redrawEventRect(),F.updateZoom&&F.updateZoom()),F.updateCircleY(),D=(F.config.axis_rotated?F.circleY:F.circleX).bind(F),E=(F.config.axis_rotated?F.circleX:F.circleY).bind(F),a.flow&&(A=F.generateFlow({targets:N,flow:a.flow,duration:a.flow.duration,drawBar:r,drawLine:s,drawArea:q,cx:D,cy:E,xv:O,xForText:t,yForText:u})),(v||A)&&F.isTabVisible()?H.transition().duration(v).each(function(){var b=[];[F.redrawBar(r,!0),F.redrawLine(s,!0),F.redrawArea(q,!0),F.redrawCircle(D,E,!0),F.redrawText(t,u,a.flow,!0),F.redrawRegion(!0),F.redrawGrid(!0)].forEach(function(a){a.forEach(function(a){b.push(a)})}),z=F.generateWait(),b.forEach(function(a){z.add(a)})}).call(z,function(){A&&A(),I.onrendered&&I.onrendered.call(F)}):(F.redrawBar(r),F.redrawLine(s),F.redrawArea(q),F.redrawCircle(D,E),F.redrawText(t,u,a.flow),F.redrawRegion(),F.redrawGrid(),I.onrendered&&I.onrendered.call(F)),F.mapToIds(F.data.targets).forEach(function(a){F.withoutFadeIn[a]=!0})},i.updateAndRedraw=function(a){var b,c=this,d=c.config;a=a||{},a.withTransition=w(a,"withTransition",!0),a.withTransform=w(a,"withTransform",!1),a.withLegend=w(a,"withLegend",!1),a.withUpdateXDomain=!0,a.withUpdateOrgXDomain=!0,a.withTransitionForExit=!1,a.withTransitionForTransform=w(a,"withTransitionForTransform",a.withTransition),c.updateSizes(),a.withLegend&&d.legend_show||(b=c.axis.generateTransitions(a.withTransitionForAxis?d.transition_duration:0),c.updateScales(),c.updateSvgSize(),c.transformAll(a.withTransitionForTransform,b)),c.redraw(a,b)},i.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},i.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},i.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},i.isCustomX=function(){var a=this,b=a.config;return!a.isTimeSeries()&&(b.data_x||v(b.data_xs))},i.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},i.getTranslate=function(a){var b,c,d=this,e=d.config;return"main"===a?(b=s(d.margin.left),c=s(d.margin.top)):"context"===a?(b=s(d.margin2.left),c=s(d.margin2.top)):"legend"===a?(b=d.margin3.left,c=d.margin3.top):"x"===a?(b=0,c=e.axis_rotated?0:d.height):"y"===a?(b=0,c=e.axis_rotated?d.height:0):"y2"===a?(b=e.axis_rotated?0:d.width,c=e.axis_rotated?1:0):"subx"===a?(b=0,c=e.axis_rotated?0:d.height2):"arc"===a&&(b=d.arcWidth/2,c=d.arcHeight/2),"translate("+b+","+c+")"},i.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?1:0},i.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0},i.opacityForCircle=function(a){var b=this.config.point_show?1:0;return m(a.value)?this.isScatterType(a)?.5:b:0},i.opacityForText=function(){return this.hasDataLabel()?1:0},i.xx=function(a){return a?this.x(a.x):null},i.xv=function(a){var b=this,c=a.value;return b.isTimeSeries()?c=b.parseDate(a.value):b.isCategorized()&&"string"==typeof a.value&&(c=b.config.axis_x_categories.indexOf(a.value)),Math.ceil(b.x(c))},i.yv=function(a){var b=this,c=a.axis&&"y2"===a.axis?b.y2:b.y;return Math.ceil(c(a.value))},i.subxx=function(a){return a?this.subX(a.x):null},i.transformMain=function(a,b){var c,d,e,f=this;b&&b.axisX?c=b.axisX:(c=f.main.select("."+l.axisX),a&&(c=c.transition())),b&&b.axisY?d=b.axisY:(d=f.main.select("."+l.axisY),a&&(d=d.transition())),b&&b.axisY2?e=b.axisY2:(e=f.main.select("."+l.axisY2),a&&(e=e.transition())),(a?f.main.transition():f.main).attr("transform",f.getTranslate("main")),c.attr("transform",f.getTranslate("x")),d.attr("transform",f.getTranslate("y")),e.attr("transform",f.getTranslate("y2")),f.main.select("."+l.chartArcs).attr("transform",f.getTranslate("arc"))},i.transformAll=function(a,b){var c=this;c.transformMain(a,b),c.config.subchart_show&&c.transformContext(a,b),c.legend&&c.transformLegend(a)},i.updateSvgSize=function(){var a=this,b=a.svg.select(".c3-brush .background");a.svg.attr("width",a.currentWidth).attr("height",a.currentHeight),a.svg.selectAll(["#"+a.clipId,"#"+a.clipIdForGrid]).select("rect").attr("width",a.width).attr("height",a.height),a.svg.select("#"+a.clipIdForXAxis).select("rect").attr("x",a.getXAxisClipX.bind(a)).attr("y",a.getXAxisClipY.bind(a)).attr("width",a.getXAxisClipWidth.bind(a)).attr("height",a.getXAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForYAxis).select("rect").attr("x",a.getYAxisClipX.bind(a)).attr("y",a.getYAxisClipY.bind(a)).attr("width",a.getYAxisClipWidth.bind(a)).attr("height",a.getYAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForSubchart).select("rect").attr("width",a.width).attr("height",b.size()?b.attr("height"):0),a.svg.select("."+l.zoomRect).attr("width",a.width).attr("height",a.height),a.selectChart.style("max-height",a.currentHeight+"px")},i.updateDimension=function(a){var b=this;a||(b.config.axis_rotated?(b.axes.x.call(b.xAxis),b.axes.subx.call(b.subXAxis)):(b.axes.y.call(b.yAxis),b.axes.y2.call(b.y2Axis))),
b.updateSizes(),b.updateScales(),b.updateSvgSize(),b.transformAll(!1)},i.observeInserted=function(b){var c,d=this;return"undefined"==typeof MutationObserver?void a.console.error("MutationObserver not defined."):(c=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.previousSibling&&(c.disconnect(),d.intervalForObserveInserted=a.setInterval(function(){b.node().parentNode&&(a.clearInterval(d.intervalForObserveInserted),d.updateDimension(),d.config.oninit.call(d),d.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),b.transition().style("opacity",1))},10))})}),void c.observe(b.node(),{attributes:!0,childList:!0,characterData:!0}))},i.generateResize=function(){function a(){b.forEach(function(a){a()})}var b=[];return a.add=function(a){b.push(a)},a},i.endall=function(a,b){var c=0;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})},i.generateWait=function(){var a=[],b=function(b,c){var d=setInterval(function(){var b=0;a.forEach(function(a){if(a.empty())return void(b+=1);try{a.transition()}catch(a){b+=1}}),b===a.length&&(clearInterval(d),c&&c())},10)};return b.add=function(b){a.push(b)},b},i.parseDate=function(b){var c,d=this;return b instanceof Date?c=b:"string"==typeof b?c=d.dataTimeFormat(d.config.data_xFormat).parse(b):"number"!=typeof b&&isNaN(b)||(c=new Date((+b))),c&&!isNaN(+c)||a.console.error("Failed to parse x '"+b+"' to Date object"),c},i.isTabVisible=function(){var a;return"undefined"!=typeof document.hidden?a="hidden":"undefined"!=typeof document.mozHidden?a="mozHidden":"undefined"!=typeof document.msHidden?a="msHidden":"undefined"!=typeof document.webkitHidden&&(a="webkitHidden"),!document[a]},i.getDefaultConfig=function(){var a={bindto:"#chart",size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_expand:!0,gauge_label_show:!0,gauge_label_format:void 0,gauge_expand:!0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_width:void 0,donut_expand:!0,donut_title:"",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,b,c,d){return this.getTooltipContent?this.getTooltipContent(a,b,c,d):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"}};return Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this),a},i.additionalConfig={},i.loadConfig=function(a){function b(){var a=d.shift();return a&&c&&"object"==typeof c&&a in c?(c=c[a],b()):a?void 0:c}var c,d,e,f=this.config;Object.keys(f).forEach(function(g){c=a,d=g.split("_"),e=b(),q(e)&&(f[g]=e)})},i.getScale=function(a,b,c){return(c?this.d3.time.scale():this.d3.scale.linear()).range([a,b])},i.getX=function(a,b,c,d){var e,f=this,g=f.getScale(a,b,f.isTimeSeries()),h=c?g.domain(c):g;f.isCategorized()?(d=d||function(){return 0},g=function(a,b){var c=h(a)+d(a);return b?c:Math.ceil(c)}):g=function(a,b){var c=h(a);return b?c:Math.ceil(c)};for(e in h)g[e]=h[e];return g.orgDomain=function(){return h.domain()},f.isCategorized()&&(g.domain=function(a){return arguments.length?(h.domain(a),g):(a=this.orgDomain(),[a[0],a[1]+1])}),g},i.getY=function(a,b,c){var d=this.getScale(a,b,this.isTimeSeriesY());return c&&d.domain(c),d},i.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y},i.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY},i.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0,a.xMax=b.axis_rotated?a.height:a.width,a.yMin=b.axis_rotated?0:a.height,a.yMax=b.axis_rotated?a.width:1,a.subXMin=a.xMin,a.subXMax=a.xMax,a.subYMin=b.axis_rotated?0:a.height2,a.subYMax=b.axis_rotated?a.width2:1,a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()}),a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain()),a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain()),a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()}),a.subY=a.getY(a.subYMin,a.subYMax,c?b.axis_y_default:a.subY.domain()),a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain()),a.xAxisTickFormat=a.axis.getXAxisTickFormat(),a.xAxisTickValues=a.axis.getXAxisTickValues(),a.yAxisTickValues=a.axis.getYAxisTickValues(),a.y2AxisTickValues=a.axis.getY2AxisTickValues(),a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.yAxis=a.axis.getYAxis(a.y,a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer),a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer),c||(a.brush&&a.brush.scale(a.subX),b.zoom_enabled&&a.zoom.scale(a.x)),a.updateArc&&a.updateArc()},i.getYDomainMin=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasNegativeValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=a<0?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&+a>0||(k[d][b]+=+a)});return h.d3.min(Object.keys(k).map(function(a){return h.d3.min(k[a])}))},i.getYDomainMax=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasPositiveValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=a>0?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&+a<0||(k[d][b]+=+a)});return h.d3.max(Object.keys(k).map(function(a){return h.d3.max(k[a])}))},i.getYDomain=function(a,b,c){var d,e,f,g,h,i,j,k,l,n,o,p=this,q=p.config,r=a.filter(function(a){return p.axis.getId(a.id)===b}),s=c?p.filterByXDomain(r,c):r,u="y2"===b?q.axis_y2_min:q.axis_y_min,w="y2"===b?q.axis_y2_max:q.axis_y_max,x=p.getYDomainMin(s),y=p.getYDomainMax(s),z="y2"===b?q.axis_y2_center:q.axis_y_center,A=p.hasType("bar",s)&&q.bar_zerobased||p.hasType("area",s)&&q.area_zerobased,B="y2"===b?q.axis_y2_inverted:q.axis_y_inverted,C=p.hasDataLabel()&&q.axis_rotated,D=p.hasDataLabel()&&!q.axis_rotated;return x=m(u)?u:m(w)?x<w?x:w-10:x,y=m(w)?w:m(u)?u<y?y:u+10:y,0===s.length?"y2"===b?p.y2.domain():p.y.domain():(isNaN(x)&&(x=0),isNaN(y)&&(y=x),x===y&&(x<0?y=0:x=0),n=x>=0&&y>=0,o=x<=0&&y<=0,(m(u)&&n||m(w)&&o)&&(A=!1),A&&(n&&(x=0),o&&(y=0)),e=Math.abs(y-x),f=g=h=.1*e,"undefined"!=typeof z&&(i=Math.max(Math.abs(x),Math.abs(y)),y=z+i,x=z-i),C?(j=p.getDataLabelLength(x,y,"width"),k=t(p.y.range()),l=[j[0]/k,j[1]/k],g+=e*(l[1]/(1-l[0]-l[1])),h+=e*(l[0]/(1-l[0]-l[1]))):D&&(j=p.getDataLabelLength(x,y,"height"),g+=p.axis.convertPixelsToAxisPadding(j[1],e),h+=p.axis.convertPixelsToAxisPadding(j[0],e)),"y"===b&&v(q.axis_y_padding)&&(g=p.axis.getPadding(q.axis_y_padding,"top",g,e),h=p.axis.getPadding(q.axis_y_padding,"bottom",h,e)),"y2"===b&&v(q.axis_y2_padding)&&(g=p.axis.getPadding(q.axis_y2_padding,"top",g,e),h=p.axis.getPadding(q.axis_y2_padding,"bottom",h,e)),A&&(n&&(h=x),o&&(g=-y)),d=p.config.axis_rotated?[x,y]:[x-h,y+g],B?d.reverse():d)},i.getXDomainMin=function(a){var b=this,c=b.config;return q(c.axis_x_min)?b.isTimeSeries()?this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})},i.getXDomainMax=function(a){var b=this,c=b.config;return q(c.axis_x_max)?b.isTimeSeries()?this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})},i.getXDomainPadding=function(a){var b,c,d,e,f=this,g=f.config,h=a[1]-a[0];return f.isCategorized()?c=0:f.hasType("bar")?(b=f.getMaxDataCount(),c=b>1?h/(b-1)/2:.5):c=.01*h,"object"==typeof g.axis_x_padding&&v(g.axis_x_padding)?(d=m(g.axis_x_padding.left)?g.axis_x_padding.left:c,e=m(g.axis_x_padding.right)?g.axis_x_padding.right:c):d=e="number"==typeof g.axis_x_padding?g.axis_x_padding:c,{left:d,right:e}},i.getXDomain=function(a){var b=this,c=[b.getXDomainMin(a),b.getXDomainMax(a)],d=c[0],e=c[1],f=b.getXDomainPadding(c),g=0,h=0;return d-e!==0||b.isCategorized()||(b.isTimeSeries()?(d=new Date(.5*d.getTime()),e=new Date(1.5*e.getTime())):(d=0===d?1:.5*d,e=0===e?-1:1.5*e)),(d||0===d)&&(g=b.isTimeSeries()?new Date(d.getTime()-f.left):d-f.left),(e||0===e)&&(h=b.isTimeSeries()?new Date(e.getTime()+f.right):e+f.right),[g,h]},i.updateXDomain=function(a,b,c,d,e){var f=this,g=f.config;return c&&(f.x.domain(e?e:f.d3.extent(f.getXDomain(a))),f.orgXDomain=f.x.domain(),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent(),f.subX.domain(f.x.domain()),f.brush&&f.brush.scale(f.subX)),b&&(f.x.domain(e?e:!f.brush||f.brush.empty()?f.orgXDomain:f.brush.extent()),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent()),d&&f.x.domain(f.trimXDomain(f.x.orgDomain())),f.x.domain()},i.trimXDomain=function(a){var b=this;return a[0]<=b.orgXDomain[0]&&(a[1]=+a[1]+(b.orgXDomain[0]-a[0]),a[0]=b.orgXDomain[0]),b.orgXDomain[1]<=a[1]&&(a[0]=+a[0]-(a[1]-b.orgXDomain[1]),a[1]=b.orgXDomain[1]),a},i.isX=function(a){var b=this,c=b.config;return c.data_x&&a===c.data_x||v(c.data_xs)&&x(c.data_xs,a)},i.isNotX=function(a){return!this.isX(a)},i.getXKey=function(a){var b=this,c=b.config;return c.data_x?c.data_x:v(c.data_xs)?c.data_xs[a]:null},i.getXValuesOfXKey=function(a,b){var c,d=this,e=b&&v(b)?d.mapToIds(b):[];return e.forEach(function(b){d.getXKey(b)===a&&(c=d.data.xs[b])}),c},i.getIndexByX=function(a){var b=this,c=b.filterByX(b.data.targets,a);return c.length?c[0].index:null},i.getXValue=function(a,b){var c=this;return a in c.data.xs&&c.data.xs[a]&&m(c.data.xs[a][b])?c.data.xs[a][b]:b},i.getOtherTargetXs=function(){var a=this,b=Object.keys(a.data.xs);return b.length?a.data.xs[b[0]]:null},i.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null},i.addXs=function(a){var b=this;Object.keys(a).forEach(function(c){b.config.data_xs[c]=a[c]})},i.hasMultipleX=function(a){return this.d3.set(Object.keys(a).map(function(b){return a[b]})).size()>1},i.isMultipleX=function(){return v(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},i.addName=function(a){var b,c=this;return a&&(b=c.config.data_names[a.id],a.name=b?b:a.id),a},i.getValueOnIndex=function(a,b){var c=a.filter(function(a){return a.index===b});return c.length?c[0]:null},i.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(d,e){d.x=c.generateTargetX(b[e],a.id,e)}),c.data.xs[a.id]=b})},i.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&c.updateTargetX([a],b[a.id])})},i.generateTargetX=function(a,b,c){var d,e=this;return d=e.isTimeSeries()?a?e.parseDate(a):e.parseDate(e.getXValue(b,c)):e.isCustomX()&&!e.isCategorized()?m(a)?+a:e.getXValue(b,c):c},i.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}},i.updateXs=function(){var a=this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(b){a.xs[b.index]=b.x}))},i.getPrevX=function(a){var b=this.xs[a-1];return"undefined"!=typeof b?b:null},i.getNextX=function(a){var b=this.xs[a+1];return"undefined"!=typeof b?b:null},i.getMaxDataCount=function(){var a=this;return a.d3.max(a.data.targets,function(a){return a.values.length})},i.getMaxDataCountTarget=function(a){var b,c=a.length,d=0;return c>1?a.forEach(function(a){a.values.length>d&&(b=a,d=a.values.length)}):b=c?a[0]:null,b},i.getEdgeX=function(a){var b=this;return a.length?[b.d3.min(a,function(a){return a.values[0].x}),b.d3.max(a,function(a){return a.values[a.values.length-1].x})]:[0,0]},i.mapToIds=function(a){return a.map(function(a){return a.id})},i.mapToTargetIds=function(a){var b=this;return a?o(a)?[a]:a:b.mapToIds(b.data.targets)},i.hasTarget=function(a,b){var c,d=this.mapToIds(a);for(c=0;c<d.length;c++)if(d[c]===b)return!0;return!1},i.isTargetToShow=function(a){return this.hiddenTargetIds.indexOf(a)<0},i.isLegendToShow=function(a){return this.hiddenLegendIds.indexOf(a)<0},i.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})},i.mapTargetsToUniqueXs=function(a){var b=this,c=b.d3.set(b.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();return b.isTimeSeries()?c.map(function(a){return new Date((+a))}):c.map(function(a){return+a})},i.addHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.concat(a)},i.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return a.indexOf(b)<0})},i.addHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.concat(a)},i.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return a.indexOf(b)<0})},i.getValuesAsIdKeyed=function(a){var b={};return a.forEach(function(a){b[a.id]=[],a.values.forEach(function(c){b[a.id].push(c.value)})}),b},i.checkValueInTargets=function(a,b){var c,d,e,f=Object.keys(a);for(c=0;c<f.length;c++)for(e=a[f[c]].values,d=0;d<e.length;d++)if(b(e[d].value))return!0;return!1},i.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return a<0})},i.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return a>0})},i.isOrderDesc=function(){var a=this.config;return"string"==typeof a.data_order&&"desc"===a.data_order.toLowerCase()},i.isOrderAsc=function(){var a=this.config;return"string"==typeof a.data_order&&"asc"===a.data_order.toLowerCase()},i.orderTargets=function(a){var b=this,c=b.config,d=b.isOrderAsc(),e=b.isOrderDesc();return d||e?a.sort(function(a,b){var c=function(a,b){return a+Math.abs(b.value)},e=a.values.reduce(c,0),f=b.values.reduce(c,0);return d?f-e:e-f}):n(c.data_order)&&a.sort(c.data_order),a},i.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return a.x-b===0})},i.filterRemoveNull=function(a){return a.filter(function(a){return m(a.value)})},i.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})},i.hasDataLabel=function(){var a=this.config;return!("boolean"!=typeof a.data_labels||!a.data_labels)||!("object"!=typeof a.data_labels||!v(a.data_labels))},i.getDataLabelLength=function(a,b,c){var d=this,e=[0,0],f=1.3;return d.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return d.dataLabelFormat(a.id)(a)}).each(function(a,b){e[b]=this.getBoundingClientRect()[c]*f}).remove(),e},i.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)},i.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)},i.findSameXOfValues=function(a,b){var c,d=a[b].x,e=[];for(c=b-1;c>=0&&d===a[c].x;c--)e.push(a[c]);for(c=b;c<a.length&&d===a[c].x;c++)e.push(a[c]);return e},i.findClosestFromTargets=function(a,b){var c,d=this;return c=a.map(function(a){return d.findClosest(a.values,b)}),d.findClosest(c,b)},i.findClosest=function(a,b){var c,d=this,e=100;return a.filter(function(a){return a&&d.isBarType(a.id)}).forEach(function(a){var b=d.main.select("."+l.bars+d.getTargetSelectorSuffix(a.id)+" ."+l.bar+"-"+a.index).node();!c&&d.isWithinBar(b)&&(c=a)}),a.filter(function(a){return a&&!d.isBarType(a.id)}).forEach(function(a){var f=d.dist(a,b);f<e&&(e=f,c=a)}),c},i.dist=function(a,b){var c=this,d=c.config,e=d.axis_rotated?1:0,f=d.axis_rotated?0:1,g=c.circleY(a,a.index),h=c.x(a.x);return Math.pow(h-b[e],2)+Math.pow(g-b[f],2)},i.convertValuesToStep=function(a){var b,c=[].concat(a);if(!this.isCategorized())return a;for(b=a.length+1;0<b;b--)c[b]=c[b-1];return c[0]={x:c[0].x-1,value:c[0].value,id:c[0].id},c[a.length+1]={x:c[a.length].x+1,value:c[a.length].value,id:c[a.length].id},c},i.updateDataAttributes=function(a,b){var c=this,d=c.config,e=d["data_"+a];return"undefined"==typeof b?e:(Object.keys(b).forEach(function(a){e[a]=b[a]}),c.redraw({withLegend:!0}),e)},i.convertUrlToData=function(a,b,c,d){var e=this,f=b?b:"csv";e.d3.xhr(a,function(a,b){var g;if(!b)throw new Error(a.responseURL+" "+a.status+" ("+a.statusText+")");g="json"===f?e.convertJsonToData(JSON.parse(b.response),c):"tsv"===f?e.convertTsvToData(b.response):e.convertCsvToData(b.response),d.call(e,g)})},i.convertXsvToData=function(a,b){var c,d=b.parseRows(a);return 1===d.length?(c=[{}],d[0].forEach(function(a){c[0][a]=null})):c=b.parse(a),c},i.convertCsvToData=function(a){return this.convertXsvToData(a,this.d3.csv)},i.convertTsvToData=function(a){return this.convertXsvToData(a,this.d3.tsv)},i.convertJsonToData=function(a,b){var c,d,e=this,f=[];return b?(b.x?(c=b.value.concat(b.x),e.config.data_x=b.x):c=b.value,f.push(c),a.forEach(function(a){var b=[];c.forEach(function(c){var d=p(a[c])?null:a[c];b.push(d)}),f.push(b)}),d=e.convertRowsToData(f)):(Object.keys(a).forEach(function(b){f.push([b].concat(a[b]))}),d=e.convertColumnsToData(f)),d},i.convertRowsToData=function(a){var b,c,d=a[0],e={},f=[];for(b=1;b<a.length;b++){for(e={},c=0;c<a[b].length;c++){if(p(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[d[c]]=a[b][c]}f.push(e)}return f},i.convertColumnsToData=function(a){var b,c,d,e=[];for(b=0;b<a.length;b++)for(d=a[b][0],c=1;c<a[b].length;c++){if(p(e[c-1])&&(e[c-1]={}),p(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[c-1][d]=a[b][c]}return e},i.convertDataToTargets=function(a,b){var c,d=this,e=d.config,f=d.d3.keys(a[0]).filter(d.isNotX,d),g=d.d3.keys(a[0]).filter(d.isX,d);return f.forEach(function(c){var f=d.getXKey(c);d.isCustomX()||d.isTimeSeries()?g.indexOf(f)>=0?d.data.xs[c]=(b&&d.data.xs[c]?d.data.xs[c]:[]).concat(a.map(function(a){return a[f]}).filter(m).map(function(a,b){return d.generateTargetX(a,c,b)})):e.data_x?d.data.xs[c]=d.getOtherTargetXs():v(e.data_xs)&&(d.data.xs[c]=d.getXValuesOfXKey(f,d.data.targets)):d.data.xs[c]=a.map(function(a,b){return b})}),f.forEach(function(a){if(!d.data.xs[a])throw new Error('x is not defined for id = "'+a+'".')}),c=f.map(function(b,c){var f=e.data_idConverter(b);return{id:f,id_org:b,values:a.map(function(a,g){var h=d.getXKey(b),i=a[h],j=d.generateTargetX(i,b,g);return d.isCustomX()&&d.isCategorized()&&0===c&&i&&(0===g&&(e.axis_x_categories=[]),e.axis_x_categories.push(i)),(p(a[b])||d.data.xs[b].length<=g)&&(j=void 0),{x:j,value:null===a[b]||isNaN(a[b])?null:+a[b],id:f}}).filter(function(a){return q(a.x)})}}),c.forEach(function(a){var b;e.data_xSort&&(a.values=a.values.sort(function(a,b){var c=a.x||0===a.x?a.x:1/0,d=b.x||0===b.x?b.x:1/0;return c-d})),b=0,a.values.forEach(function(a){a.index=b++}),d.data.xs[a.id].sort(function(a,b){return a-b})}),e.data_type&&d.setTargetType(d.mapToIds(c).filter(function(a){return!(a in e.data_types)}),e.data_type),c.forEach(function(a){d.addCache(a.id_org,a)}),c},i.load=function(a,b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){var d=b.types&&b.types[a.id]?b.types[a.id]:b.type;c.setTargetType(a.id,d)}),c.data.targets.forEach(function(b){for(var c=0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values,a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a)),c.updateTargets(c.data.targets),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),b.done&&b.done()},i.loadFromArgs=function(a){var b=this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)},i.unload=function(a,b){var c=this;return b||(b=function(){}),a=a.filter(function(a){return c.hasTarget(c.data.targets,a)}),a&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),void a.forEach(function(a){c.withoutFadeIn[a]=!1,c.legend&&c.legend.selectAll("."+l.legendItem+c.getTargetSelectorSuffix(a)).remove(),c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):void b()},i.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a},i.initEventRect=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.eventRects).style("fill-opacity",0)},i.redrawEventRect=function(){var a,b,c=this,d=c.config,e=c.isMultipleX(),f=c.main.select("."+l.eventRects).style("cursor",d.zoom_enabled?d.axis_rotated?"ns-resize":"ew-resize":null).classed(l.eventRectsMultiple,e).classed(l.eventRectsSingle,!e);f.selectAll("."+l.eventRect).remove(),c.eventRect=f.selectAll("."+l.eventRect),e?(a=c.eventRect.data([0]),c.generateEventRectsForMultipleXs(a.enter()),c.updateEventRect(a)):(b=c.getMaxDataCountTarget(c.data.targets),f.datum(b?b.values:[]),c.eventRect=f.selectAll("."+l.eventRect),a=c.eventRect.data(function(a){return a}),c.generateEventRectsForSingleX(a.enter()),c.updateEventRect(a),a.exit().remove())},i.updateEventRect=function(a){var b,c,d,e,f,g,h=this,i=h.config;a=a||h.eventRect.data(function(a){return a}),h.isMultipleX()?(b=0,c=0,d=h.width,e=h.height):(!h.isCustomX()&&!h.isTimeSeries()||h.isCategorized()?(f=h.getEventRectWidth(),g=function(a){return h.x(a.x)-f/2}):(h.updateXs(),f=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index);return null===b&&null===c?i.axis_rotated?h.height:h.width:(null===b&&(b=h.x.domain()[0]),null===c&&(c=h.x.domain()[1]),Math.max(0,(h.x(c)-h.x(b))/2))},g=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index),d=h.data.xs[a.id][a.index];return null===b&&null===c?0:(null===b&&(b=h.x.domain()[0]),(h.x(d)+h.x(b))/2)}),b=i.axis_rotated?0:g,c=i.axis_rotated?g:0,d=i.axis_rotated?h.width:f,e=i.axis_rotated?f:h.height),a.attr("class",h.classEvent.bind(h)).attr("x",b).attr("y",c).attr("width",d).attr("height",e)},i.generateEventRectsForSingleX=function(a){var b=this,c=b.d3,d=b.config;a.append("rect").attr("class",b.classEvent.bind(b)).style("cursor",d.data_selection_enabled&&d.data_selection_grouped?"pointer":null).on("mouseover",function(a){var c=a.index;b.dragging||b.flowing||b.hasArcType()||(d.point_focus_expand_enabled&&b.expandCircles(c,null,!0),b.expandBars(c,null,!0),b.main.selectAll("."+l.shape+"-"+c).each(function(a){d.data_onmouseover.call(b.api,a)}))}).on("mouseout",function(a){var c=a.index;b.config&&(b.hasArcType()||(b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars(),b.main.selectAll("."+l.shape+"-"+c).each(function(a){d.data_onmouseout.call(b.api,a)})))}).on("mousemove",function(a){var e,f=a.index,g=b.svg.select("."+l.eventRect+"-"+f);b.dragging||b.flowing||b.hasArcType()||(b.isStepType(a)&&"step-after"===b.config.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,f))&&(f-=1),e=b.filterTargetsToShow(b.data.targets).map(function(a){return b.addName(b.getValueOnIndex(a.values,f))}),d.tooltip_grouped&&(b.showTooltip(e,this),b.showXGridFocus(e)),(!d.tooltip_grouped||d.data_selection_enabled&&!d.data_selection_grouped)&&b.main.selectAll("."+l.shape+"-"+f).each(function(){c.select(this).classed(l.EXPANDED,!0),d.data_selection_enabled&&g.style("cursor",d.data_selection_grouped?"pointer":null),d.tooltip_grouped||(b.hideXGridFocus(),b.hideTooltip(),d.data_selection_grouped||(b.unexpandCircles(f),b.unexpandBars(f)))}).filter(function(a){return b.isWithinShape(this,a)}).each(function(a){d.data_selection_enabled&&(d.data_selection_grouped||d.data_selection_isselectable(a))&&g.style("cursor","pointer"),d.tooltip_grouped||(b.showTooltip([a],this),b.showXGridFocus([a]),d.point_focus_expand_enabled&&b.expandCircles(f,a.id,!0),b.expandBars(f,a.id,!0))}))}).on("click",function(a){var e=a.index;if(!b.hasArcType()&&b.toggleShape){if(b.cancelClick)return void(b.cancelClick=!1);b.isStepType(a)&&"step-after"===d.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,e))&&(e-=1),b.main.selectAll("."+l.shape+"-"+e).each(function(a){(d.data_selection_grouped||b.isWithinShape(this,a))&&(b.toggleShape(this,a,e),b.config.data_onclick.call(b.api,a,this))})}}).call(d.data_selection_draggable&&b.drag?c.behavior.drag().origin(Object).on("drag",function(){b.drag(c.mouse(this))}).on("dragstart",function(){b.dragstart(c.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})},i.generateEventRectsForMultipleXs=function(a){function b(){c.svg.select("."+l.eventRect).style("cursor",null),c.hideXGridFocus(),c.hideTooltip(),c.unexpandCircles(),c.unexpandBars()}var c=this,d=c.d3,e=c.config;a.append("rect").attr("x",0).attr("y",0).attr("width",c.width).attr("height",c.height).attr("class",l.eventRect).on("mouseout",function(){c.config&&(c.hasArcType()||b())}).on("mousemove",function(){var a,f,g,h,i=c.filterTargetsToShow(c.data.targets);if(!c.dragging&&!c.hasArcType(i)){if(a=d.mouse(this),f=c.findClosestFromTargets(i,a),!c.mouseover||f&&f.id===c.mouseover.id||(e.data_onmouseout.call(c.api,c.mouseover),c.mouseover=void 0),!f)return void b();g=c.isScatterType(f)||!e.tooltip_grouped?[f]:c.filterByX(i,f.x),h=g.map(function(a){return c.addName(a)}),c.showTooltip(h,this),e.point_focus_expand_enabled&&c.expandCircles(f.index,f.id,!0),c.expandBars(f.index,f.id,!0),c.showXGridFocus(h),(c.isBarType(f.id)||c.dist(f,a)<100)&&(c.svg.select("."+l.eventRect).style("cursor","pointer"),c.mouseover||(e.data_onmouseover.call(c.api,f),c.mouseover=f))}}).on("click",function(){var a,b,f=c.filterTargetsToShow(c.data.targets);c.hasArcType(f)||(a=d.mouse(this),b=c.findClosestFromTargets(f,a),b&&(c.isBarType(b.id)||c.dist(b,a)<100)&&c.main.selectAll("."+l.shapes+c.getTargetSelectorSuffix(b.id)).selectAll("."+l.shape+"-"+b.index).each(function(){(e.data_selection_grouped||c.isWithinShape(this,b))&&(c.toggleShape(this,b,b.index),c.config.data_onclick.call(c.api,b,this))}))}).call(e.data_selection_draggable&&c.drag?d.behavior.drag().origin(Object).on("drag",function(){c.drag(d.mouse(this))}).on("dragstart",function(){c.dragstart(d.mouse(this))}).on("dragend",function(){c.dragend()}):function(){})},i.dispatchEvent=function(b,c,d){var e=this,f="."+l.eventRect+(e.isMultipleX()?"":"-"+c),g=e.main.select(f).node(),h=g.getBoundingClientRect(),i=h.left+(d?d[0]:0),j=h.top+(d?d[1]:0),k=document.createEvent("MouseEvents");k.initMouseEvent(b,!0,!0,a,0,i,j,i,j,!1,!1,!1,!1,0,null),g.dispatchEvent(k)},i.getCurrentWidth=function(){var a=this,b=a.config;return b.size_width?b.size_width:a.getParentWidth()},i.getCurrentHeight=function(){var a=this,b=a.config,c=b.size_height?b.size_height:a.getParentHeight();return c>0?c:320/(a.hasType("gauge")?2:1)},i.getCurrentPaddingTop=function(){var a=this.config;return m(a.padding_top)?a.padding_top:0},i.getCurrentPaddingBottom=function(){var a=this.config;return m(a.padding_bottom)?a.padding_bottom:0},i.getCurrentPaddingLeft=function(a){var b=this,c=b.config;return m(c.padding_left)?c.padding_left:c.axis_rotated?c.axis_x_show?Math.max(r(b.getAxisWidthByAxisId("x",a)),40):1:!c.axis_y_show||c.axis_y_inner?b.axis.getYAxisLabelPosition().isOuter?30:1:r(b.getAxisWidthByAxisId("y",a))},i.getCurrentPaddingRight=function(){var a=this,b=a.config,c=10,d=a.isLegendRight?a.getLegendWidth()+20:0;return m(b.padding_right)?b.padding_right+1:b.axis_rotated?c+d:!b.axis_y2_show||b.axis_y2_inner?2+d+(a.axis.getY2AxisLabelPosition().isOuter?20:0):r(a.getAxisWidthByAxisId("y2"))+d},i.getParentRectValue=function(a){for(var b,c=this.selectChart.node();c&&"BODY"!==c.tagName;){try{b=c.getBoundingClientRect()[a]}catch(d){"width"===a&&(b=c.offsetWidth)}if(b)break;c=c.parentNode}return b},i.getParentWidth=function(){return this.getParentRectValue("width")},i.getParentHeight=function(){var a=this.selectChart.style("height");return a.indexOf("px")>0?+a.replace("px",""):0},i.getSvgLeft=function(a){var b=this,c=b.config,d=c.axis_rotated||!c.axis_rotated&&!c.axis_y_inner,e=c.axis_rotated?l.axisX:l.axisY,f=b.main.select("."+e).node(),g=f&&d?f.getBoundingClientRect():{right:0},h=b.selectChart.node().getBoundingClientRect(),i=b.hasArcType(),j=g.right-h.left-(i?0:b.getCurrentPaddingLeft(a));return j>0?j:0},i.getAxisWidthByAxisId=function(a,b){var c=this,d=c.axis.getLabelPositionById(a);return c.axis.getMaxTickWidth(a,b)+(d.isInner?20:40)},i.getHorizontalAxisHeight=function(a){var b=this,c=b.config,d=30;return"x"!==a||c.axis_x_show?"x"===a&&c.axis_x_height?c.axis_x_height:"y"!==a||c.axis_y_show?"y2"!==a||c.axis_y2_show?("x"===a&&!c.axis_rotated&&c.axis_x_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-c.axis_x_tick_rotate)/180)),
d+(b.axis.getLabelPositionById(a).isInner?0:10)+("y2"===a?-10:0)):b.rotated_padding_top:!c.legend_show||b.isLegendRight||b.isLegendInset?1:10:8},i.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},i.getShapeIndices=function(a){var b,c,d=this,e=d.config,f={},g=0;return d.filterTargetsToShow(d.data.targets.filter(a,d)).forEach(function(a){for(b=0;b<e.data_groups.length;b++)if(!(e.data_groups[b].indexOf(a.id)<0))for(c=0;c<e.data_groups[b].length;c++)if(e.data_groups[b][c]in f){f[a.id]=f[e.data_groups[b][c]];break}p(f[a.id])&&(f[a.id]=g++)}),f.__max__=g-1,f},i.getShapeX=function(a,b,c,d){var e=this,f=d?e.subX:e.x;return function(d){var e=d.id in c?c[d.id]:0;return d.x||0===d.x?f(d.x)-a*(b/2-e):0}},i.getShapeY=function(a){var b=this;return function(c){var d=a?b.getSubYScale(c.id):b.getYScale(c.id);return d(c.value)}},i.getShapeOffset=function(a,b,c){var d=this,e=d.orderTargets(d.filterTargetsToShow(d.data.targets.filter(a,d))),f=e.map(function(a){return a.id});return function(a,g){var h=c?d.getSubYScale(a.id):d.getYScale(a.id),i=h(0),j=i;return e.forEach(function(c){var e=d.isStepType(a)?d.convertValuesToStep(c.values):c.values;c.id!==a.id&&b[c.id]===b[a.id]&&f.indexOf(c.id)<f.indexOf(a.id)&&e[g].value*a.value>=0&&(j+=h(e[g].value)-i)}),j}},i.isWithinShape=function(a,b){var c,d=this,e=d.d3.select(a);return d.isTargetToShow(b.id)?"circle"===a.nodeName?c=d.isStepType(b)?d.isWithinStep(a,d.getYScale(b.id)(b.value)):d.isWithinCircle(a,1.5*d.pointSelectR(b)):"path"===a.nodeName&&(c=!e.classed(l.bar)||d.isWithinBar(a)):c=!1,c},i.getInterpolate=function(a){var b=this;return b.isSplineType(a)?"cardinal":b.isStepType(a)?b.config.line_step_type:"linear"},i.initLine=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.chartLines)},i.updateTargetsForLine=function(a){var b,c,d=this,e=d.config,f=d.classChartLine.bind(d),g=d.classLines.bind(d),h=d.classAreas.bind(d),i=d.classCircles.bind(d),j=d.classFocus.bind(d);b=d.main.select("."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",function(a){return f(a)+j(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g),c.append("g").attr("class",h),c.append("g").attr("class",function(a){return d.generateClass(l.selectedCircles,a.id)}),c.append("g").attr("class",i).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null}),a.forEach(function(a){d.main.selectAll("."+l.selectedCircles+d.getTargetSelectorSuffix(a.id)).selectAll("."+l.selectedCircle).each(function(b){b.value=a.values[b.index].value})})},i.updateLine=function(a){var b=this;b.mainLine=b.main.selectAll("."+l.lines).selectAll("."+l.line).data(b.lineData.bind(b)),b.mainLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.mainLine.style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null),b.mainLine.exit().transition().duration(a).style("opacity",0).remove()},i.redrawLine=function(a,b){return[(b?this.mainLine.transition():this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]},i.generateDrawLine=function(a,b){var c=this,d=c.config,e=c.d3.svg.line(),f=c.generateGetLinePoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x(i).y(h):e.x(h).y(i),d.line_connectNull||(e=e.defined(function(a){return null!=a.value})),function(a){var f,h=d.line_connectNull?c.filterRemoveNull(a.values):a.values,i=b?c.x:c.subX,j=g.call(c,a.id),k=0,l=0;return c.isLineType(a)?d.data_regions[a.id]?f=c.lineWithRegions(h,i,j,d.data_regions[a.id]):(c.isStepType(a)&&(h=c.convertValuesToStep(h)),f=e.interpolate(c.getInterpolate(a))(h)):(h[0]&&(k=i(h[0].x),l=j(h[0].value)),f=d.axis_rotated?"M "+l+" "+k:"M "+k+" "+l),f?f:"M 0 0"}},i.generateGetLinePoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isLineType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&l<e||a.value<0&&e<l)&&(l=e),[[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)]]}},i.lineWithRegions=function(a,b,c,d){function e(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function f(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var g,h,i,j,k,l,m,n,o,r,s,t,u=this,v=u.config,w=-1,x="M",y=u.isCategorized()?.5:0,z=[];if(q(d))for(g=0;g<d.length;g++)z[g]={},p(d[g].start)?z[g].start=a[0].x:z[g].start=u.isTimeSeries()?u.parseDate(d[g].start):d[g].start,p(d[g].end)?z[g].end=a[a.length-1].x:z[g].end=u.isTimeSeries()?u.parseDate(d[g].end):d[g].end;for(s=v.axis_rotated?function(a){return c(a.value)}:function(a){return b(a.x)},t=v.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)},i=u.isTimeSeries()?function(a,d,e,g){var h,i=a.x.getTime(),j=d.x-a.x,l=new Date(i+j*e),m=new Date(i+j*(e+g));return h=v.axis_rotated?[[c(k(e)),b(l)],[c(k(e+g)),b(m)]]:[[b(l),c(k(e))],[b(m),c(k(e+g))]],f(h)}:function(a,d,e,g){var h;return h=v.axis_rotated?[[c(k(e),!0),b(j(e))],[c(k(e+g),!0),b(j(e+g))]]:[[b(j(e),!0),c(k(e))],[b(j(e+g),!0),c(k(e+g))]],f(h)},g=0;g<a.length;g++){if(p(z)||!e(a[g].x,z))x+=" "+s(a[g])+" "+t(a[g]);else for(j=u.getScale(a[g-1].x+y,a[g].x+y,u.isTimeSeries()),k=u.getScale(a[g-1].value,a[g].value),l=b(a[g].x)-b(a[g-1].x),m=c(a[g].value)-c(a[g-1].value),n=Math.sqrt(Math.pow(l,2)+Math.pow(m,2)),o=2/n,r=2*o,h=o;h<=1;h+=r)x+=i(a[g-1],a[g],h,o);w=a[g].x}return x},i.updateArea=function(a){var b=this,c=b.d3;b.mainArea=b.main.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b)),b.mainArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.mainArea.style("opacity",b.orgAreaOpacity),b.mainArea.exit().transition().duration(a).style("opacity",0).remove()},i.redrawArea=function(a,b){return[(b?this.mainArea.transition():this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},i.generateDrawArea=function(a,b){var c=this,d=c.config,e=c.d3.svg.area(),f=c.generateGetAreaPoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(c.getAreaBaseValue(a.id))},j=function(a,b){return d.data_groups.length>0?f(a,b)[1][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x0(i).x1(j).y(h):e.x(h).y0(i).y1(j),d.line_connectNull||(e=e.defined(function(a){return null!==a.value})),function(a){var b,f=d.line_connectNull?c.filterRemoveNull(a.values):a.values,g=0,h=0;return c.isAreaType(a)?(c.isStepType(a)&&(f=c.convertValuesToStep(f)),b=e.interpolate(c.getInterpolate(a))(f)):(f[0]&&(g=c.x(f[0].x),h=c.getYScale(a.id)(f[0].value)),b=d.axis_rotated?"M "+h+" "+g:"M "+g+" "+h),b?b:"M 0 0"}},i.getAreaBaseValue=function(){return 0},i.generateGetAreaPoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isAreaType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&l<e||a.value<0&&e<l)&&(l=e),[[k,j],[k,l-(e-j)],[k,l-(e-j)],[k,j]]}},i.updateCircle=function(){var a=this;a.mainCircle=a.main.selectAll("."+l.circles).selectAll("."+l.circle).data(a.lineOrScatterData.bind(a)),a.mainCircle.enter().append("circle").attr("class",a.classCircle.bind(a)).attr("r",a.pointR.bind(a)).style("fill",a.color),a.mainCircle.style("opacity",a.initialOpacityForCircle.bind(a)),a.mainCircle.exit().remove()},i.redrawCircle=function(a,b,c){var d=this.main.selectAll("."+l.selectedCircle);return[(c?this.mainCircle.transition():this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",a).attr("cy",b),(c?d.transition():d).attr("cx",a).attr("cy",b)]},i.circleX=function(a){return a.x||0===a.x?this.x(a.x):null},i.updateCircleY=function(){var a,b,c=this;c.config.data_groups.length>0?(a=c.getShapeIndices(c.isLineType),b=c.generateGetLinePoints(a),c.circleY=function(a,c){return b(a,c)[0][1]}):c.circleY=function(a){return c.getYScale(a.id)(a.value)}},i.getCircles=function(a,b){var c=this;return(b?c.main.selectAll("."+l.circles+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+l.circle+(m(a)?"-"+a:""))},i.expandCircles=function(a,b,c){var d=this,e=d.pointExpandedR.bind(d);c&&d.unexpandCircles(),d.getCircles(a,b).classed(l.EXPANDED,!0).attr("r",e)},i.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(l.EXPANDED)}).classed(l.EXPANDED,!1).attr("r",c)},i.pointR=function(a){var b=this,c=b.config;return b.isStepType(a)?0:n(c.point_r)?c.point_r(a):c.point_r},i.pointExpandedR=function(a){var b=this,c=b.config;return c.point_focus_expand_enabled?c.point_focus_expand_r?c.point_focus_expand_r:1.75*b.pointR(a):b.pointR(a)},i.pointSelectR=function(a){var b=this,c=b.config;return c.point_select_r?c.point_select_r:4*b.pointR(a)},i.isWithinCircle=function(a,b){var c=this.d3,d=c.mouse(a),e=c.select(a),f=+e.attr("cx"),g=+e.attr("cy");return Math.sqrt(Math.pow(f-d[0],2)+Math.pow(g-d[1],2))<b},i.isWithinStep=function(a,b){return Math.abs(b-this.d3.mouse(a)[1])<30},i.initBar=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.chartBars)},i.updateTargetsForBar=function(a){var b,c,d=this,e=d.config,f=d.classChartBar.bind(d),g=d.classBars.bind(d),h=d.classFocus.bind(d);b=d.main.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",function(a){return f(a)+h(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null})},i.updateBar=function(a){var b=this,c=b.barData.bind(b),d=b.classBar.bind(b),e=b.initialOpacity.bind(b),f=function(a){return b.color(a.id)};b.mainBar=b.main.selectAll("."+l.bars).selectAll("."+l.bar).data(c),b.mainBar.enter().append("path").attr("class",d).style("stroke",f).style("fill",f),b.mainBar.style("opacity",e),b.mainBar.exit().transition().duration(a).style("opacity",0).remove()},i.redrawBar=function(a,b){return[(b?this.mainBar.transition():this.mainBar).attr("d",a).style("fill",this.color).style("opacity",1)]},i.getBarW=function(a,b){var c=this,d=c.config,e="number"==typeof d.bar_width?d.bar_width:b?a.tickInterval()*d.bar_width_ratio/b:0;return d.bar_width_max&&e>d.bar_width_max?d.bar_width_max:e},i.getBars=function(a,b){var c=this;return(b?c.main.selectAll("."+l.bars+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+l.bar+(m(a)?"-"+a:""))},i.expandBars=function(a,b,c){var d=this;c&&d.unexpandBars(),d.getBars(a,b).classed(l.EXPANDED,!0)},i.unexpandBars=function(a){var b=this;b.getBars(a).classed(l.EXPANDED,!1)},i.generateDrawBar=function(a,b){var c=this,d=c.config,e=c.generateGetBarPoints(a,b);return function(a,b){var c=e(a,b),f=d.axis_rotated?1:0,g=d.axis_rotated?0:1,h="M "+c[0][f]+","+c[0][g]+" L"+c[1][f]+","+c[1][g]+" L"+c[2][f]+","+c[2][g]+" L"+c[3][f]+","+c[3][g]+" z";return h}},i.generateGetBarPoints=function(a,b){var c=this,d=b?c.subXAxis:c.xAxis,e=a.__max__+1,f=c.getBarW(d,e),g=c.getShapeX(f,e,a,!!b),h=c.getShapeY(!!b),i=c.getShapeOffset(c.isBarType,a,!!b),j=b?c.getSubYScale:c.getYScale;return function(a,b){var d=j.call(c,a.id)(0),e=i(a,b)||d,k=g(a),l=h(a);return c.config.axis_rotated&&(0<a.value&&l<d||a.value<0&&d<l)&&(l=d),[[k,e],[k,l-(d-e)],[k+f,l-(d-e)],[k+f,e]]}},i.isWithinBar=function(a){var b=this.d3.mouse(a),c=a.getBoundingClientRect(),d=a.pathSegList.getItem(0),e=a.pathSegList.getItem(1),f=Math.min(d.x,e.x),g=Math.min(d.y,e.y),h=c.width,i=c.height,j=2,k=f-j,l=f+h+j,m=g+i+j,n=g-j;return k<b[0]&&b[0]<l&&n<b[1]&&b[1]<m},i.initText=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.chartTexts),a.mainText=a.d3.selectAll([])},i.updateTargetsForText=function(a){var b,c,d=this,e=d.classChartText.bind(d),f=d.classTexts.bind(d),g=d.classFocus.bind(d);b=d.main.select("."+l.chartTexts).selectAll("."+l.chartText).data(a).attr("class",function(a){return e(a)+g(a)}),c=b.enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",f)},i.updateText=function(a){var b=this,c=b.config,d=b.barOrLineData.bind(b),e=b.classText.bind(b);b.mainText=b.main.selectAll("."+l.texts).selectAll("."+l.text).data(d),b.mainText.enter().append("text").attr("class",e).attr("text-anchor",function(a){return c.axis_rotated?a.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(a){return b.color(a)}).style("fill-opacity",0),b.mainText.text(function(a,c,d){return b.dataLabelFormat(a.id)(a.value,a.id,c,d)}),b.mainText.exit().transition().duration(a).style("fill-opacity",0).remove()},i.redrawText=function(a,b,c,d){return[(d?this.mainText.transition():this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]},i.getTextRect=function(a,b){var c,d=this.d3.select("body").append("div").classed("c3",!0),e=d.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0);return e.selectAll(".dummy").data([a]).enter().append("text").classed(b?b:"",!0).text(a).each(function(){c=this.getBoundingClientRect()}),d.remove(),c},i.generateXYForText=function(a,b,c,d){var e=this,f=e.generateGetAreaPoints(a,!1),g=e.generateGetBarPoints(b,!1),h=e.generateGetLinePoints(c,!1),i=d?e.getXForText:e.getYForText;return function(a,b){var c=e.isAreaType(a)?f:e.isBarType(a)?g:h;return i.call(e,c(a,b),a,this)}},i.getXForText=function(a,b,c){var d,e,f=this,g=c.getBoundingClientRect();return f.config.axis_rotated?(e=f.isBarType(b)?4:6,d=a[2][1]+e*(b.value<0?-1:1)):d=f.hasType("bar")?(a[2][0]+a[0][0])/2:a[0][0],null===b.value&&(d>f.width?d=f.width-g.width:d<0&&(d=4)),d},i.getYForText=function(a,b,c){var d,e=this,f=c.getBoundingClientRect();return e.config.axis_rotated?d=(a[0][0]+a[2][0]+.6*f.height)/2:(d=a[2][1],b.value<0?(d+=f.height,e.isBarType(b)&&e.isSafari()?d-=3:!e.isBarType(b)&&e.isChrome()&&(d+=3)):d+=e.isBarType(b)?-3:-6),null!==b.value||e.config.axis_rotated||(d<f.height?d=f.height:d>this.height&&(d=this.height-4)),d},i.setTargetType=function(a,b){var c=this,d=c.config;c.mapToTargetIds(a).forEach(function(a){c.withoutFadeIn[a]=b===d.data_types[a],d.data_types[a]=b}),a||(d.data_type=b)},i.hasType=function(a,b){var c=this,d=c.config.data_types,e=!1;return b=b||c.data.targets,b&&b.length?b.forEach(function(b){var c=d[b.id];(c&&c.indexOf(a)>=0||!c&&"line"===a)&&(e=!0)}):Object.keys(d).length?Object.keys(d).forEach(function(b){d[b]===a&&(e=!0)}):e=c.config.data_type===a,e},i.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",a)},i.isLineType=function(a){var b=this.config,c=o(a)?a:a.id;return!b.data_types[c]||["line","spline","area","area-spline","step","area-step"].indexOf(b.data_types[c])>=0},i.isStepType=function(a){var b=o(a)?a:a.id;return["step","area-step"].indexOf(this.config.data_types[b])>=0},i.isSplineType=function(a){var b=o(a)?a:a.id;return["spline","area-spline"].indexOf(this.config.data_types[b])>=0},i.isAreaType=function(a){var b=o(a)?a:a.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[b])>=0},i.isBarType=function(a){var b=o(a)?a:a.id;return"bar"===this.config.data_types[b]},i.isScatterType=function(a){var b=o(a)?a:a.id;return"scatter"===this.config.data_types[b]},i.isPieType=function(a){var b=o(a)?a:a.id;return"pie"===this.config.data_types[b]},i.isGaugeType=function(a){var b=o(a)?a:a.id;return"gauge"===this.config.data_types[b]},i.isDonutType=function(a){var b=o(a)?a:a.id;return"donut"===this.config.data_types[b]},i.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)},i.lineData=function(a){return this.isLineType(a)?[a]:[]},i.arcData=function(a){return this.isArcType(a.data)?[a]:[]},i.barData=function(a){return this.isBarType(a)?a.values:[]},i.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]},i.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]},i.initGrid=function(){var a=this,b=a.config,c=a.d3;a.grid=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",l.grid),b.grid_x_show&&a.grid.append("g").attr("class",l.xgrids),b.grid_y_show&&a.grid.append("g").attr("class",l.ygrids),b.grid_focus_show&&a.grid.append("g").attr("class",l.xgridFocus).append("line").attr("class",l.xgridFocus),a.xgrid=c.selectAll([]),b.grid_lines_front||a.initGridLines()},i.initGridLines=function(){var a=this,b=a.d3;a.gridLines=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",l.grid+" "+l.gridLines),a.gridLines.append("g").attr("class",l.xgridLines),a.gridLines.append("g").attr("class",l.ygridLines),a.xgridLines=b.selectAll([])},i.updateXGrid=function(a){var b=this,c=b.config,d=b.d3,e=b.generateGridData(c.grid_x_type,b.x),f=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-f},y2:function(a){return b.x(a)-f}}:{x1:function(a){return b.x(a)+f},x2:function(a){return b.x(a)+f},y1:0,y2:b.height},b.xgrid=b.main.select("."+l.xgrids).selectAll("."+l.xgrid).data(e),b.xgrid.enter().append("line").attr("class",l.xgrid),a||b.xgrid.attr(b.xgridAttr).style("opacity",function(){return+d.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1}),b.xgrid.exit().remove()},i.updateYGrid=function(){var a=this,b=a.config,c=a.yAxis.tickValues()||a.y.ticks(b.grid_y_ticks);a.ygrid=a.main.select("."+l.ygrids).selectAll("."+l.ygrid).data(c),a.ygrid.enter().append("line").attr("class",l.ygrid),a.ygrid.attr("x1",b.axis_rotated?a.y:0).attr("x2",b.axis_rotated?a.y:a.width).attr("y1",b.axis_rotated?0:a.y).attr("y2",b.axis_rotated?a.height:a.y),a.ygrid.exit().remove(),a.smoothLines(a.ygrid,"grid")},i.gridTextAnchor=function(a){return a.position?a.position:"end"},i.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4},i.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0},i.yGridTextX=function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width},i.updateGrid=function(a){var b,c,d,e=this,f=e.main,g=e.config;e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),f.select("line."+l.xgridFocus).style("visibility","hidden"),g.grid_x_show&&e.updateXGrid(),e.xgridLines=f.select("."+l.xgridLines).selectAll("."+l.xgridLine).data(g.grid_x_lines),b=e.xgridLines.enter().append("g").attr("class",function(a){return l.xgridLine+(a.class?" "+a.class:"")}),b.append("line").style("opacity",0),b.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"":"rotate(-90)").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),e.xgridLines.exit().transition().duration(a).style("opacity",0).remove(),g.grid_y_show&&e.updateYGrid(),e.ygridLines=f.select("."+l.ygridLines).selectAll("."+l.ygridLine).data(g.grid_y_lines),c=e.ygridLines.enter().append("g").attr("class",function(a){return l.ygridLine+(a.class?" "+a.class:"")}),c.append("line").style("opacity",0),c.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"rotate(-90)":"").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),d=e.yv.bind(e),e.ygridLines.select("line").transition().duration(a).attr("x1",g.axis_rotated?d:0).attr("x2",g.axis_rotated?d:e.width).attr("y1",g.axis_rotated?0:d).attr("y2",g.axis_rotated?e.height:d).style("opacity",1),e.ygridLines.select("text").transition().duration(a).attr("x",g.axis_rotated?e.xGridTextX.bind(e):e.yGridTextX.bind(e)).attr("y",d).text(function(a){return a.text}).style("opacity",1),e.ygridLines.exit().transition().duration(a).style("opacity",0).remove()},i.redrawGrid=function(a){var b=this,c=b.config,d=b.xv.bind(b),e=b.xgridLines.select("line"),f=b.xgridLines.select("text");return[(a?e.transition():e).attr("x1",c.axis_rotated?0:d).attr("x2",c.axis_rotated?b.width:d).attr("y1",c.axis_rotated?d:0).attr("y2",c.axis_rotated?d:b.height).style("opacity",1),(a?f.transition():f).attr("x",c.axis_rotated?b.yGridTextX.bind(b):b.xGridTextX.bind(b)).attr("y",d).text(function(a){return a.text}).style("opacity",1)]},i.showXGridFocus=function(a){var b=this,c=b.config,d=a.filter(function(a){return a&&m(a.value)}),e=b.main.selectAll("line."+l.xgridFocus),f=b.xx.bind(b);c.tooltip_show&&(b.hasType("scatter")||b.hasArcType()||(e.style("visibility","visible").data([d[0]]).attr(c.axis_rotated?"y1":"x1",f).attr(c.axis_rotated?"y2":"x2",f),b.smoothLines(e,"grid")))},i.hideXGridFocus=function(){this.main.select("line."+l.xgridFocus).style("visibility","hidden")},i.updateXgridFocus=function(){var a=this,b=a.config;a.main.select("line."+l.xgridFocus).attr("x1",b.axis_rotated?0:-10).attr("x2",b.axis_rotated?a.width:-10).attr("y1",b.axis_rotated?-10:0).attr("y2",b.axis_rotated?-10:a.height)},i.generateGridData=function(a,b){var c,d,e,f,g=this,h=[],i=g.main.select("."+l.axisX).selectAll(".tick").size();if("year"===a)for(c=g.getXDomain(),d=c[0].getFullYear(),e=c[1].getFullYear(),f=d;f<=e;f++)h.push(new Date(f+"-01-01 00:00:00"));else h=b.ticks(10),h.length>i&&(h=h.filter(function(a){return(""+a).indexOf(".")<0}));return h},i.getGridFilterToRemove=function(a){return a?function(b){var c=!1;return[].concat(a).forEach(function(a){("value"in a&&b.value===a.value||"class"in a&&b.class===a.class)&&(c=!0)}),c}:function(){return!0}},i.removeGridLines=function(a,b){var c=this,d=c.config,e=c.getGridFilterToRemove(a),f=function(a){return!e(a)},g=b?l.xgridLines:l.ygridLines,h=b?l.xgridLine:l.ygridLine;c.main.select("."+g).selectAll("."+h).filter(e).transition().duration(d.transition_duration).style("opacity",0).remove(),b?d.grid_x_lines=d.grid_x_lines.filter(f):d.grid_y_lines=d.grid_y_lines.filter(f)},i.initTooltip=function(){var a,b=this,c=b.config;if(b.tooltip=b.selectChart.style("position","relative").append("div").attr("class",l.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),c.tooltip_init_show){if(b.isTimeSeries()&&o(c.tooltip_init_x)){for(c.tooltip_init_x=b.parseDate(c.tooltip_init_x),a=0;a<b.data.targets[0].values.length&&b.data.targets[0].values[a].x-c.tooltip_init_x!==0;a++);c.tooltip_init_x=a}b.tooltip.html(c.tooltip_contents.call(b,b.data.targets.map(function(a){return b.addName(a.values[c.tooltip_init_x])}),b.axis.getXAxisTickFormat(),b.getYFormat(b.hasArcType()),b.color)),b.tooltip.style("top",c.tooltip_init_position.top).style("left",c.tooltip_init_position.left).style("display","block")}},i.getTooltipContent=function(a,b,c,d){var e,f,g,h,i,j,k=this,m=k.config,n=m.tooltip_format_title||b,o=m.tooltip_format_name||function(a){return a},p=m.tooltip_format_value||c;for(f=0;f<a.length;f++)a[f]&&(a[f].value||0===a[f].value)&&(e||(g=n?n(a[f].x):a[f].x,e="<table class='"+l.tooltip+"'>"+(g||0===g?"<tr><th colspan='2'>"+g+"</th></tr>":"")),h=p(a[f].value,a[f].ratio,a[f].id,a[f].index),void 0!==h&&(i=o(a[f].name,a[f].ratio,a[f].id,a[f].index),j=k.levelColor?k.levelColor(a[f].value):d(a[f].id),e+="<tr class='"+l.tooltipName+"-"+a[f].id+"'>",e+="<td class='name'><span style='background-color:"+j+"'></span>"+i+"</td>",e+="<td class='value'>"+h+"</td>",e+="</tr>"));return e+"</table>"},i.tooltipPosition=function(a,b,c,d){var e,f,g,h,i,j=this,k=j.config,l=j.d3,m=j.hasArcType(),n=l.mouse(d);return m?(f=(j.width-(j.isLegendRight?j.getLegendWidth():0))/2+n[0],h=j.height/2+n[1]+20):(e=j.getSvgLeft(!0),k.axis_rotated?(f=e+n[0]+100,g=f+b,i=j.currentWidth-j.getCurrentPaddingRight(),h=j.x(a[0].x)+20):(f=e+j.getCurrentPaddingLeft(!0)+j.x(a[0].x)+20,g=f+b,i=e+j.currentWidth-j.getCurrentPaddingRight(),h=n[1]+15),g>i&&(f-=g-i+20),h+c>j.currentHeight&&(h-=c+30)),h<0&&(h=0),{top:h,left:f}},i.showTooltip=function(a,b){var c,d,e,f=this,g=f.config,h=f.hasArcType(),j=a.filter(function(a){return a&&m(a.value)}),k=g.tooltip_position||i.tooltipPosition;0!==j.length&&g.tooltip_show&&(f.tooltip.html(g.tooltip_contents.call(f,a,f.axis.getXAxisTickFormat(),f.getYFormat(h),f.color)).style("display","block"),c=f.tooltip.property("offsetWidth"),d=f.tooltip.property("offsetHeight"),e=k.call(this,j,c,d,b),f.tooltip.style("top",e.top+"px").style("left",e.left+"px"))},i.hideTooltip=function(){this.tooltip.style("display","none")},i.initLegend=function(){var a=this;return a.legendItemTextBox={},a.legendHasRendered=!1,a.legend=a.svg.append("g").attr("transform",a.getTranslate("legend")),a.config.legend_show?void a.updateLegendWithDefaults():(a.legend.style("visibility","hidden"),void(a.hiddenLegendIds=a.mapToIds(a.data.targets)))},i.updateLegendWithDefaults=function(){var a=this;a.updateLegend(a.mapToIds(a.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},i.updateSizeForLegend=function(a,b){var c=this,d=c.config,e={top:c.isLegendTop?c.getCurrentPaddingTop()+d.legend_inset_y+5.5:c.currentHeight-a-c.getCurrentPaddingBottom()-d.legend_inset_y,left:c.isLegendLeft?c.getCurrentPaddingLeft()+d.legend_inset_x+.5:c.currentWidth-b-c.getCurrentPaddingRight()-d.legend_inset_x+.5};c.margin3={top:c.isLegendRight?0:c.isLegendInset?e.top:c.currentHeight-a,right:NaN,bottom:0,left:c.isLegendRight?c.currentWidth-b:c.isLegendInset?e.left:0}},i.transformLegend=function(a){var b=this;(a?b.legend.transition():b.legend).attr("transform",b.getTranslate("legend"))},i.updateLegendStep=function(a){this.legendStep=a},i.updateLegendItemWidth=function(a){this.legendItemWidth=a},i.updateLegendItemHeight=function(a){this.legendItemHeight=a},i.getLegendWidth=function(){var a=this;return a.config.legend_show?a.isLegendRight||a.isLegendInset?a.legendItemWidth*(a.legendStep+1):a.currentWidth:0},i.getLegendHeight=function(){var a=this,b=0;return a.config.legend_show&&(b=a.isLegendRight?a.currentHeight:Math.max(20,a.legendItemHeight)*(a.legendStep+1)),b},i.opacityForLegend=function(a){return a.classed(l.legendItemHidden)?null:1},i.opacityForUnfocusedLegend=function(a){return a.classed(l.legendItemHidden)?null:.3},i.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a),c.legend.selectAll("."+l.legendItem).filter(function(b){return a.indexOf(b)>=0}).classed(l.legendItemFocused,b).transition().duration(100).style("opacity",function(){var a=b?c.opacityForLegend:c.opacityForUnfocusedLegend;return a.call(c,c.d3.select(this))})},i.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+l.legendItem).classed(l.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})},i.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),b.legendHasRendered||b.updateLegendWithDefaults()),b.removeHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return b.opacityForLegend(b.d3.select(this))})},i.hideLegend=function(a){var b=this,c=b.config;c.legend_show&&u(a)&&(c.legend_show=!1,b.legend.style("visibility","hidden")),b.addHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("opacity",0).style("visibility","hidden")},i.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},i.updateLegend=function(a,b,c){function d(a,b){return u.legendItemTextBox[b]||(u.legendItemTextBox[b]=u.getTextRect(a.textContent,l.legendItem)),u.legendItemTextBox[b]}function e(b,c,e){function f(a,b){b||(g=(o-D-n)/2,g<B&&(g=(o-n)/2,D=0,J++)),I[a]=J,H[J]=u.isLegendInset?10:g,E[a]=D,D+=n}var g,h,i=0===e,j=e===a.length-1,k=d(b,c),l=k.width+C+(!j||u.isLegendRight||u.isLegendInset?y:0),m=k.height+x,n=u.isLegendRight||u.isLegendInset?m:l,o=u.isLegendRight||u.isLegendInset?u.getLegendHeight():u.getLegendWidth();return i&&(D=0,J=0,z=0,A=0),v.legend_show&&!u.isLegendToShow(c)?void(F[c]=G[c]=I[c]=E[c]=0):(F[c]=l,G[c]=m,(!z||l>=z)&&(z=l),(!A||m>=A)&&(A=m),h=u.isLegendRight||u.isLegendInset?A:z,void(v.legend_equally?(Object.keys(F).forEach(function(a){F[a]=z}),Object.keys(G).forEach(function(a){G[a]=A}),g=(o-h*a.length)/2,g<B?(D=0,J=0,a.forEach(function(a){f(a)})):f(c,!0)):f(c)))}var f,g,h,i,j,k,m,n,o,p,r,s,t,u=this,v=u.config,x=4,y=10,z=0,A=0,B=10,C=15,D=0,E={},F={},G={},H=[0],I={},J=0;b=b||{},n=w(b,"withTransition",!0),o=w(b,"withTransitionForTransform",!0),u.isLegendInset&&(J=v.legend_inset_step?v.legend_inset_step:a.length,u.updateLegendStep(J)),u.isLegendRight?(f=function(a){return z*I[a]},i=function(a){return H[I[a]]+E[a]}):u.isLegendInset?(f=function(a){return z*I[a]+10},i=function(a){return H[I[a]]+E[a]}):(f=function(a){return H[I[a]]+E[a]},i=function(a){return A*I[a]}),g=function(a,b){return f(a,b)+14},j=function(a,b){return i(a,b)+9},h=function(a,b){return f(a,b)},k=function(a,b){return i(a,b)-5},m=u.legend.selectAll("."+l.legendItem).data(a).enter().append("g").attr("class",function(a){return u.generateClass(l.legendItem,a)}).style("visibility",function(a){return u.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){v.legend_item_onclick?v.legend_item_onclick.call(u,a):u.d3.event.altKey?(u.api.hide(),u.api.show(a)):(u.api.toggle(a),u.isTargetToShow(a)?u.api.focus(a):u.api.revert())}).on("mouseover",function(a){u.d3.select(this).classed(l.legendItemFocused,!0),!u.transiting&&u.isTargetToShow(a)&&u.api.focus(a),v.legend_item_onmouseover&&v.legend_item_onmouseover.call(u,a)}).on("mouseout",function(a){u.d3.select(this).classed(l.legendItemFocused,!1),u.api.revert(),v.legend_item_onmouseout&&v.legend_item_onmouseout.call(u,a)}),m.append("text").text(function(a){return q(v.data_names[a])?v.data_names[a]:a}).each(function(a,b){e(this,a,b)}).style("pointer-events","none").attr("x",u.isLegendRight||u.isLegendInset?g:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:j),m.append("rect").attr("class",l.legendItemEvent).style("fill-opacity",0).attr("x",u.isLegendRight||u.isLegendInset?h:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:k),m.append("rect").attr("class",l.legendItemTile).style("pointer-events","none").style("fill",u.color).attr("x",u.isLegendRight||u.isLegendInset?g:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:i).attr("width",10).attr("height",10),t=u.legend.select("."+l.legendBackground+" rect"),u.isLegendInset&&z>0&&0===t.size()&&(t=u.legend.insert("g","."+l.legendItem).attr("class",l.legendBackground).append("rect")),p=u.legend.selectAll("text").data(a).text(function(a){return q(v.data_names[a])?v.data_names[a]:a}).each(function(a,b){e(this,a,b)}),(n?p.transition():p).attr("x",g).attr("y",j),r=u.legend.selectAll("rect."+l.legendItemEvent).data(a),(n?r.transition():r).attr("width",function(a){return F[a]}).attr("height",function(a){return G[a]}).attr("x",h).attr("y",k),s=u.legend.selectAll("rect."+l.legendItemTile).data(a),(n?s.transition():s).style("fill",u.color).attr("x",f).attr("y",i),t&&(n?t.transition():t).attr("height",u.getLegendHeight()-12).attr("width",z*(J+1)+10),u.legend.selectAll("."+l.legendItem).classed(l.legendItemHidden,function(a){return!u.isTargetToShow(a)}),u.updateLegendItemWidth(z),u.updateLegendItemHeight(A),u.updateLegendStep(J),u.updateSizes(),u.updateScales(),u.updateSvgSize(),u.transformAll(o,c),u.legendHasRendered=!0},c(b,f),f.prototype.init=function(){var a=this.owner,b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",l.axis+" "+l.axisX).attr("clip-path",a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",b.axis_x_show?"visible":"hidden"),a.axes.x.append("text").attr("class",l.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),
a.axes.y=c.append("g").attr("class",l.axis+" "+l.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden"),a.axes.y.append("text").attr("class",l.axisYLabel).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),a.axes.y2=c.append("g").attr("class",l.axis+" "+l.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden"),a.axes.y2.append("text").attr("class",l.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},f.prototype.getXAxis=function(a,b,c,d,e,f,h){var i=this.owner,j=i.config,k={isCategory:i.isCategorized(),withOuterTick:e,tickMultiline:j.axis_x_tick_multiline,tickWidth:j.axis_x_tick_width,tickTextRotate:h?0:j.axis_x_tick_rotate,withoutTransition:f},l=g(i.d3,k).scale(a).orient(b);return i.isTimeSeries()&&d&&(d=d.map(function(a){return i.parseDate(a)})),l.tickFormat(c).tickValues(d),i.isCategorized()&&(l.tickCentered(j.axis_x_tick_centered),u(j.axis_x_tick_culling)&&(j.axis_x_tick_culling=!1)),l},f.prototype.updateXAxisTickValues=function(a,b){var c,d=this.owner,e=d.config;return(e.axis_x_tick_fit||e.axis_x_tick_count)&&(c=this.generateTickValues(d.mapTargetsToUniqueXs(a),e.axis_x_tick_count,d.isTimeSeries())),b?b.tickValues(c):(d.xAxis.tickValues(c),d.subXAxis.tickValues(c)),c},f.prototype.getYAxis=function(a,b,c,d,e,f){var h={withOuterTick:e,withoutTransition:f},i=this.owner,j=i.d3,k=i.config,l=g(j,h).scale(a).orient(b).tickFormat(c);return i.isTimeSeriesY()?l.ticks(j.time[k.axis_y_tick_time_value],k.axis_y_tick_time_interval):l.tickValues(d),l},f.prototype.getId=function(a){var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"},f.prototype.getXAxisTickFormat=function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return a<0?a.toFixed(0):a};return b.axis_x_tick_format&&(n(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c):""})),n(c)?function(b){return c.call(a,b)}:c},f.prototype.getTickValues=function(a,b){return a?a:b?b.tickValues():void 0},f.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},f.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},f.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},f.prototype.getLabelOptionByAxisId=function(a){var b,c=this.owner,d=c.config;return"y"===a?b=d.axis_y_label:"y2"===a?b=d.axis_y2_label:"x"===a&&(b=d.axis_x_label),b},f.prototype.getLabelText=function(a){var b=this.getLabelOptionByAxisId(a);return o(b)?b:b?b.text:null},f.prototype.setLabelText=function(a,b){var c=this.owner,d=c.config,e=this.getLabelOptionByAxisId(a);o(e)?"y"===a?d.axis_y_label=b:"y2"===a?d.axis_y2_label=b:"x"===a&&(d.axis_x_label=b):e&&(e.text=b)},f.prototype.getLabelPosition=function(a,b){var c=this.getLabelOptionByAxisId(a),d=c&&"object"==typeof c&&c.position?c.position:b;return{isInner:d.indexOf("inner")>=0,isOuter:d.indexOf("outer")>=0,isLeft:d.indexOf("left")>=0,isCenter:d.indexOf("center")>=0,isRight:d.indexOf("right")>=0,isTop:d.indexOf("top")>=0,isMiddle:d.indexOf("middle")>=0,isBottom:d.indexOf("bottom")>=0}},f.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},f.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},f.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},f.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},f.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},f.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:b.isMiddle?-c.height/2:0},f.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"0.5em":b.isRight?"-0.5em":"0":b.isTop?"-0.5em":b.isBottom?"0.5em":"0"},f.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":b.isBottom?"start":b.isMiddle?"middle":"end"},f.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.dyForXAxisLabel=function(){var a=this.owner,b=a.config,c=this.getXAxisLabelPosition();return b.axis_rotated?c.isInner?"1.2em":-25-this.getMaxTickWidth("x"):c.isInner?"-0.5em":b.axis_x_height?b.axis_x_height-10:"3em"},f.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.5em":"3em":b.isInner?"1.2em":-10-(a.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},f.prototype.dyForY2AxisLabel=function(){var a=this.owner,b=this.getY2AxisLabelPosition();return a.config.axis_rotated?b.isInner?"1.2em":"-2.2em":b.isInner?"-0.5em":15+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},f.prototype.textAnchorForXAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(!a.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.textAnchorForYAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.textAnchorForY2AxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.getMaxTickWidth=function(a,b){var c,d,e,f,g,h=this.owner,i=h.config,j=0;return b&&h.currentMaxTickWidths[a]?h.currentMaxTickWidths[a]:(h.svg&&(c=h.filterTargetsToShow(h.data.targets),"y"===a?(d=h.y.copy().domain(h.getYDomain(c,"y")),e=this.getYAxis(d,h.yOrient,i.axis_y_tick_format,h.yAxisTickValues,!1,!0)):"y2"===a?(d=h.y2.copy().domain(h.getYDomain(c,"y2")),e=this.getYAxis(d,h.y2Orient,i.axis_y2_tick_format,h.y2AxisTickValues,!1,!0)):(d=h.x.copy().domain(h.getXDomain(c)),e=this.getXAxis(d,h.xOrient,h.xAxisTickFormat,h.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(c,e)),f=h.d3.select("body").append("div").classed("c3",!0),g=f.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),g.append("g").call(e).each(function(){h.d3.select(this).selectAll("text").each(function(){var a=this.getBoundingClientRect();j<a.width&&(j=a.width)}),f.remove()})),h.currentMaxTickWidths[a]=j<=0?h.currentMaxTickWidths[a]:j,h.currentMaxTickWidths[a])},f.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+l.axisX+" ."+l.axisXLabel),d=b.main.select("."+l.axisY+" ."+l.axisYLabel),e=b.main.select("."+l.axisY2+" ."+l.axisY2Label);(a?c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(a?d.transition():d).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(a?e.transition():e).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},f.prototype.getPadding=function(a,b,c,d){return m(a[b])?"ratio"===a.unit?a[b]*d:this.convertPixelsToAxisPadding(a[b],d):c},f.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner,d=c.config.axis_rotated?c.width:c.height;return b*(a/d)},f.prototype.generateTickValues=function(a,b,c){var d,e,f,g,h,i,j,k=a;if(b)if(d=n(b)?b():b,1===d)k=[a[0]];else if(2===d)k=[a[0],a[a.length-1]];else if(d>2){for(g=d-2,e=a[0],f=a[a.length-1],h=(f-e)/(g+1),k=[e],i=0;i<g;i++)j=+e+h*(i+1),k.push(c?new Date(j):j);k.push(f)}return c||(k=k.sort(function(a,b){return a-b})),k},f.prototype.generateTransitions=function(a){var b=this.owner,c=b.axes;return{axisX:a?c.x.transition().duration(a):c.x,axisY:a?c.y.transition().duration(a):c.y,axisY2:a?c.y2.transition().duration(a):c.y2,axisSubX:a?c.subx.transition().duration(a):c.subx}},f.prototype.redraw=function(a,b){var c=this.owner;c.axes.x.style("opacity",b?0:1),c.axes.y.style("opacity",b?0:1),c.axes.y2.style("opacity",b?0:1),c.axes.subx.style("opacity",b?0:1),a.axisX.call(c.xAxis),a.axisY.call(c.yAxis),a.axisY2.call(c.y2Axis),a.axisSubX.call(c.subXAxis)},i.getClipPath=function(b){var c=a.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(c?"":document.URL.split("#")[0])+"#"+b+")"},i.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")},i.getAxisClipX=function(a){var b=Math.max(30,this.margin.left);return a?-(1+b):-(b-1)},i.getAxisClipY=function(a){return a?-20:-this.margin.top},i.getXAxisClipX=function(){var a=this;return a.getAxisClipX(!a.config.axis_rotated)},i.getXAxisClipY=function(){var a=this;return a.getAxisClipY(!a.config.axis_rotated)},i.getYAxisClipX=function(){var a=this;return a.config.axis_y_inner?-1:a.getAxisClipX(a.config.axis_rotated)},i.getYAxisClipY=function(){var a=this;return a.getAxisClipY(a.config.axis_rotated)},i.getAxisClipWidth=function(a){var b=this,c=Math.max(30,b.margin.left),d=Math.max(30,b.margin.right);return a?b.width+2+c+d:b.margin.left+20},i.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20},i.getXAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(!a.config.axis_rotated)},i.getXAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(!a.config.axis_rotated)},i.getYAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(a.config.axis_rotated)+(a.config.axis_y_inner?20:0)},i.getYAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(a.config.axis_rotated)},i.initPie=function(){var a=this,b=a.d3,c=a.config;a.pie=b.layout.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)}),c.data_order||a.pie.sort(null)},i.updateRadius=function(){var a=this,b=a.config,c=b.gauge_width||b.donut_width;a.radiusExpanded=Math.min(a.arcWidth,a.arcHeight)/2,a.radius=.95*a.radiusExpanded,a.innerRadiusRatio=c?(a.radius-c)/a.radius:.6,a.innerRadius=a.hasType("donut")||a.hasType("gauge")?a.radius*a.innerRadiusRatio:0},i.updateArc=function(){var a=this;a.svgArc=a.getSvgArc(),a.svgArcExpanded=a.getSvgArcExpanded(),a.svgArcExpandedSub=a.getSvgArcExpanded(.98)},i.updateAngle=function(a){var b,c,d=this,e=d.config,f=!1,g=0,h=e.gauge_min,i=e.gauge_max;return d.pie(d.filterTargetsToShow(d.data.targets)).forEach(function(b){f||b.data.id!==a.data.id||(f=!0,a=b,a.index=g),g++}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),d.isGaugeType(a.data)&&(b=Math.PI/(i-h),c=a.value<h?0:a.value<i?a.value-h:i-h,a.startAngle=-1*(Math.PI/2),a.endAngle=a.startAngle+b*c),f?a:null},i.getSvgArc=function(){var a=this,b=a.d3.svg.arc().outerRadius(a.radius).innerRadius(a.innerRadius),c=function(c,d){var e;return d?b(c):(e=a.updateAngle(c),e?b(e):"M 0 0")};return c.centroid=b.centroid,c},i.getSvgArcExpanded=function(a){var b=this,c=b.d3.svg.arc().outerRadius(b.radiusExpanded*(a?a:1)).innerRadius(b.innerRadius);return function(a){var d=b.updateAngle(a);return d?c(d):"M 0 0"}},i.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"},i.transformForArcLabel=function(a){var b,c,d,e,f,g=this,h=g.updateAngle(a),i="";return h&&!g.hasType("gauge")&&(b=this.svgArc.centroid(h),c=isNaN(b[0])?0:b[0],d=isNaN(b[1])?0:b[1],e=Math.sqrt(c*c+d*d),f=g.radius&&e?(36/g.radius>.375?1.175-36/g.radius:.8)*g.radius/e:0,i="translate("+c*f+","+d*f+")"),i},i.getArcRatio=function(a){var b=this,c=b.hasType("gauge")?Math.PI:2*Math.PI;return a?(a.endAngle-a.startAngle)/c:null},i.convertToArcData=function(a){return this.addName({id:a.data.id,value:a.value,ratio:this.getArcRatio(a),index:a.index})},i.textForArcLabel=function(a){var b,c,d,e,f,g=this;return g.shouldShowArcLabel()?(b=g.updateAngle(a),c=b?b.value:null,d=g.getArcRatio(b),e=a.data.id,g.hasType("gauge")||g.meetsArcLabelThreshold(d)?(f=g.getArcLabelFormat(),f?f(c,d,e):g.defaultArcValueFormat(c,d)):""):""},i.expandArc=function(b){var c,d=this;return d.transiting?void(c=a.setInterval(function(){d.transiting||(a.clearInterval(c),d.legend.selectAll(".c3-legend-item-focused").size()>0&&d.expandArc(b))},10)):(b=d.mapToTargetIds(b),void d.svg.selectAll(d.selectorTargets(b,"."+l.chartArc)).each(function(a){d.shouldExpand(a.data.id)&&d.d3.select(this).selectAll("path").transition().duration(50).attr("d",d.svgArcExpanded).transition().duration(100).attr("d",d.svgArcExpandedSub).each(function(a){d.isDonutType(a.data)})}))},i.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+l.chartArc)).selectAll("path").transition().duration(50).attr("d",b.svgArc),b.svg.selectAll("."+l.arc).style("opacity",1))},i.shouldExpand=function(a){var b=this,c=b.config;return b.isDonutType(a)&&c.donut_expand||b.isGaugeType(a)&&c.gauge_expand||b.isPieType(a)&&c.pie_expand},i.shouldShowArcLabel=function(){var a=this,b=a.config,c=!0;return a.hasType("donut")?c=b.donut_label_show:a.hasType("pie")&&(c=b.pie_label_show),c},i.meetsArcLabelThreshold=function(a){var b=this,c=b.config,d=b.hasType("donut")?c.donut_label_threshold:c.pie_label_threshold;return a>=d},i.getArcLabelFormat=function(){var a=this,b=a.config,c=b.pie_label_format;return a.hasType("gauge")?c=b.gauge_label_format:a.hasType("donut")&&(c=b.donut_label_format),c},i.getArcTitle=function(){var a=this;return a.hasType("donut")?a.config.donut_title:""},i.updateTargetsForArc=function(a){var b,c,d=this,e=d.main,f=d.classChartArc.bind(d),g=d.classArcs.bind(d),h=d.classFocus.bind(d);b=e.select("."+l.chartArcs).selectAll("."+l.chartArc).data(d.pie(a)).attr("class",function(a){return f(a)+h(a.data)}),c=b.enter().append("g").attr("class",f),c.append("g").attr("class",g),c.append("text").attr("dy",d.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},i.initArc=function(){var a=this;a.arcs=a.main.select("."+l.chart).append("g").attr("class",l.chartArcs).attr("transform",a.getTranslate("arc")),a.arcs.append("text").attr("class",l.chartArcsTitle).style("text-anchor","middle").text(a.getArcTitle())},i.redrawArc=function(a,b,c){var d,e=this,f=e.d3,g=e.config,h=e.main;d=h.selectAll("."+l.arcs).selectAll("."+l.arc).data(e.arcData.bind(e)),d.enter().append("path").attr("class",e.classArc.bind(e)).style("fill",function(a){return e.color(a.data)}).style("cursor",function(a){return g.interaction_enabled&&g.data_selection_isselectable(a)?"pointer":null}).style("opacity",0).each(function(a){e.isGaugeType(a.data)&&(a.startAngle=a.endAngle=-1*(Math.PI/2)),this._current=a}),d.attr("transform",function(a){return!e.isGaugeType(a.data)&&c?"scale(0)":""}).style("opacity",function(a){return a===this._current?0:1}).on("mouseover",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),c=e.convertToArcData(b),e.expandArc(b.data.id),e.api.focus(b.data.id),e.toggleFocusLegend(b.data.id,!0),e.config.data_onmouseover(c,this))}:null).on("mousemove",g.interaction_enabled?function(a){var b=e.updateAngle(a),c=e.convertToArcData(b),d=[c];e.showTooltip(d,this)}:null).on("mouseout",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),c=e.convertToArcData(b),e.unexpandArc(b.data.id),e.api.revert(),e.revertLegend(),e.hideTooltip(),e.config.data_onmouseout(c,this))}:null).on("click",g.interaction_enabled?function(a,b){var c=e.updateAngle(a),d=e.convertToArcData(c);e.toggleShape&&e.toggleShape(this,d,b),e.config.data_onclick.call(e.api,d,this)}:null).each(function(){e.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b,c=e.updateAngle(a);return c?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),b=f.interpolate(this._current,c),this._current=b(0),function(c){var d=b(c);return d.data=a.data,e.getArc(d,!0)}):function(){return"M 0 0"}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return e.levelColor?e.levelColor(a.data.values[0].value):e.color(a.data.id)}).style("opacity",1).call(e.endall,function(){e.transiting=!1}),d.exit().transition().duration(b).style("opacity",0).remove(),h.selectAll("."+l.chartArc).select("text").style("opacity",0).attr("class",function(a){return e.isGaugeType(a.data)?l.gaugeValue:""}).text(e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",function(a){return e.isGaugeType(a.data)?Math.round(e.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return e.isTargetToShow(a.data.id)&&e.isArcType(a.data)?1:0}),h.select("."+l.chartArcsTitle).style("opacity",e.hasType("donut")||e.hasType("gauge")?1:0),e.hasType("gauge")&&(e.arcs.select("."+l.chartArcsBackground).attr("d",function(){var a={data:[{value:g.gauge_max}],startAngle:-1*(Math.PI/2),endAngle:Math.PI/2};return e.getArc(a,!0,!0)}),e.arcs.select("."+l.chartArcsGaugeUnit).attr("dy",".75em").text(g.gauge_label_show?g.gauge_units:""),e.arcs.select("."+l.chartArcsGaugeMin).attr("dx",-1*(e.innerRadius+(e.radius-e.innerRadius)/2)+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_min:""),e.arcs.select("."+l.chartArcsGaugeMax).attr("dx",e.innerRadius+(e.radius-e.innerRadius)/2+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_max:""))},i.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&(a.append("path").attr("class",l.chartArcsBackground),a.append("text").attr("class",l.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},i.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},i.initRegion=function(){var a=this;a.region=a.main.append("g").attr("clip-path",a.clipPath).attr("class",l.regions)},i.updateRegion=function(a){var b=this,c=b.config;b.region.style("visibility",b.hasArcType()?"hidden":"visible"),b.mainRegion=b.main.select("."+l.regions).selectAll("."+l.region).data(c.regions),b.mainRegion.enter().append("g").attr("class",b.classRegion.bind(b)).append("rect").style("fill-opacity",0),b.mainRegion.exit().transition().duration(a).style("opacity",0).remove()},i.redrawRegion=function(a){var b=this,c=b.mainRegion.selectAll("rect"),d=b.regionX.bind(b),e=b.regionY.bind(b),f=b.regionWidth.bind(b),g=b.regionHeight.bind(b);return[(a?c.transition():c).attr("x",d).attr("y",e).attr("width",f).attr("height",g).style("fill-opacity",function(a){return m(a.opacity)?a.opacity:.1})]},i.regionX=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"start"in a?e(a.start):0:d.axis_rotated?0:"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},i.regionY=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?0:"end"in a?e(a.end):0:d.axis_rotated&&"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},i.regionWidth=function(a){var b,c=this,d=c.config,e=c.regionX(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"end"in a?f(a.end):c.width:d.axis_rotated?c.width:"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.width,b<e?0:b-e},i.regionHeight=function(a){var b,c=this,d=c.config,e=this.regionY(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?c.height:"start"in a?f(a.start):c.height:d.axis_rotated&&"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.height,b<e?0:b-e},i.isRegionOnX=function(a){return!a.axis||"x"===a.axis},i.drag=function(a){var b,c,d,e,f,g,h,i,j=this,k=j.config,m=j.main,n=j.d3;j.hasArcType()||k.data_selection_enabled&&(k.zoom_enabled&&!j.zoom.altDomain||k.data_selection_multiple&&(b=j.dragStart[0],c=j.dragStart[1],d=a[0],e=a[1],f=Math.min(b,d),g=Math.max(b,d),h=k.data_selection_grouped?j.margin.top:Math.min(c,e),i=k.data_selection_grouped?j.height:Math.max(c,e),m.select("."+l.dragarea).attr("x",f).attr("y",h).attr("width",g-f).attr("height",i-h),m.selectAll("."+l.shapes).selectAll("."+l.shape).filter(function(a){return k.data_selection_isselectable(a)}).each(function(a,b){var c,d,e,k,m,o,p=n.select(this),q=p.classed(l.SELECTED),r=p.classed(l.INCLUDED),s=!1;if(p.classed(l.circle))c=1*p.attr("cx"),d=1*p.attr("cy"),m=j.togglePoint,s=f<c&&c<g&&h<d&&d<i;else{if(!p.classed(l.bar))return;o=y(this),c=o.x,d=o.y,e=o.width,k=o.height,m=j.togglePath,s=!(g<c||c+e<f||i<d||d+k<h)}s^r&&(p.classed(l.INCLUDED,!r),p.classed(l.SELECTED,!q),m.call(j,!q,p,a,b))})))},i.dragstart=function(a){var b=this,c=b.config;b.hasArcType()||c.data_selection_enabled&&(b.dragStart=a,b.main.select("."+l.chart).append("rect").attr("class",l.dragarea).style("opacity",.1),b.dragging=!0)},i.dragend=function(){var a=this,b=a.config;a.hasArcType()||b.data_selection_enabled&&(a.main.select("."+l.dragarea).transition().duration(100).style("opacity",0).remove(),a.main.selectAll("."+l.shape).classed(l.INCLUDED,!1),a.dragging=!1)},i.selectPoint=function(a,b,c){var d=this,e=d.config,f=(e.axis_rotated?d.circleY:d.circleX).bind(d),g=(e.axis_rotated?d.circleX:d.circleY).bind(d),h=d.pointSelectR.bind(d);e.data_onselected.call(d.api,b,a.node()),d.main.select("."+l.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(l.selectedCircle,c)}).attr("cx",f).attr("cy",g).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",h)},i.unselectPoint=function(a,b,c){var d=this;d.config.data_onunselected(b,a.node()),d.main.select("."+l.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()},i.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)},i.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node()),a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})},i.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node()),a.transition().duration(100).style("fill",function(){return c.color(b)})},i.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,c,d)},i.getToggle=function(a,b){var c,d=this;return"circle"===a.nodeName?c=d.isStepType(b)?function(){}:d.togglePoint:"path"===a.nodeName&&(c=d.togglePath),c},i.toggleShape=function(a,b,c){var d=this,e=d.d3,f=d.config,g=e.select(a),h=g.classed(l.SELECTED),i=d.getToggle(a,b).bind(d);f.data_selection_enabled&&f.data_selection_isselectable(b)&&(f.data_selection_multiple||d.main.selectAll("."+l.shapes+(f.data_selection_grouped?d.getTargetSelectorSuffix(b.id):"")).selectAll("."+l.shape).each(function(a,b){var c=e.select(this);c.classed(l.SELECTED)&&i(!1,c.classed(l.SELECTED,!1),a,b)}),g.classed(l.SELECTED,!h),i(!h,g,b,c))},i.initBrush=function(){var a=this,b=a.d3;a.brush=b.svg.brush().on("brush",function(){a.redrawForBrush()}),a.brush.update=function(){return a.context&&a.context.select("."+l.brush).call(this),this},a.brush.scale=function(b){return a.config.axis_rotated?this.y(b):this.x(b)}},i.initSubchart=function(){var a=this,b=a.config,c=a.context=a.svg.append("g").attr("transform",a.getTranslate("context"));c.style("visibility",b.subchart_show?"visible":"hidden"),c.append("g").attr("clip-path",a.clipPathForSubchart).attr("class",l.chart),c.select("."+l.chart).append("g").attr("class",l.chartBars),c.select("."+l.chart).append("g").attr("class",l.chartLines),c.append("g").attr("clip-path",a.clipPath).attr("class",l.brush).call(a.brush),a.axes.subx=c.append("g").attr("class",l.axisX).attr("transform",a.getTranslate("subx")).attr("clip-path",b.axis_rotated?"":a.clipPathForXAxis)},i.updateTargetsForSubchart=function(a){var b,c,d,e,f=this,g=f.context,h=f.config,i=f.classChartBar.bind(f),j=f.classBars.bind(f),k=f.classChartLine.bind(f),m=f.classLines.bind(f),n=f.classAreas.bind(f);h.subchart_show&&(e=g.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",i),d=e.enter().append("g").style("opacity",0).attr("class",i),d.append("g").attr("class",j),c=g.select("."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",k),b=c.enter().append("g").style("opacity",0).attr("class",k),b.append("g").attr("class",m),b.append("g").attr("class",n),g.selectAll("."+l.brush+" rect").attr(h.axis_rotated?"width":"height",h.axis_rotated?f.width2:f.height2))},i.updateBarForSubchart=function(a){var b=this;b.contextBar=b.context.selectAll("."+l.bars).selectAll("."+l.bar).data(b.barData.bind(b)),b.contextBar.enter().append("path").attr("class",b.classBar.bind(b)).style("stroke","none").style("fill",b.color),b.contextBar.style("opacity",b.initialOpacity.bind(b)),b.contextBar.exit().transition().duration(a).style("opacity",0).remove()},i.redrawBarForSubchart=function(a,b,c){(b?this.contextBar.transition().duration(c):this.contextBar).attr("d",a).style("opacity",1)},i.updateLineForSubchart=function(a){var b=this;b.contextLine=b.context.selectAll("."+l.lines).selectAll("."+l.line).data(b.lineData.bind(b)),b.contextLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.contextLine.style("opacity",b.initialOpacity.bind(b)),b.contextLine.exit().transition().duration(a).style("opacity",0).remove()},i.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition().duration(c):this.contextLine).attr("d",a).style("opacity",1)},i.updateAreaForSubchart=function(a){var b=this,c=b.d3;b.contextArea=b.context.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b)),b.contextArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.contextArea.style("opacity",0),b.contextArea.exit().transition().duration(a).style("opacity",0).remove()},i.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition().duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)},i.redrawSubchart=function(a,b,c,d,e,f,g){var h,i,j,k=this,l=k.d3,m=k.config;k.context.style("visibility",m.subchart_show?"visible":"hidden"),m.subchart_show&&(l.event&&"zoom"===l.event.type&&k.brush.extent(k.x.orgDomain()).update(),a&&(k.brush.empty()||k.brush.extent(k.x.orgDomain()).update(),h=k.generateDrawArea(e,!0),i=k.generateDrawBar(f,!0),j=k.generateDrawLine(g,!0),k.updateBarForSubchart(c),k.updateLineForSubchart(c),k.updateAreaForSubchart(c),k.redrawBarForSubchart(i,c,c),k.redrawLineForSubchart(j,c,c),k.redrawAreaForSubchart(h,c,c)))},i.redrawForBrush=function(){var a=this,b=a.x;a.redraw({withTransition:!1,withY:a.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),a.config.subchart_onbrush.call(a.api,b.orgDomain())},i.transformContext=function(a,b){var c,d=this;b&&b.axisSubX?c=b.axisSubX:(c=d.context.select("."+l.axisX),a&&(c=c.transition())),d.context.attr("transform",d.getTranslate("context")),c.attr("transform",d.getTranslate("subx"))},i.getDefaultExtent=function(){var a=this,b=a.config,c=n(b.axis_x_extent)?b.axis_x_extent(a.getXDomain(a.data.targets)):b.axis_x_extent;return a.isTimeSeries()&&(c=[a.parseDate(c[0]),a.parseDate(c[1])]),c},i.initZoom=function(){var a,b=this,c=b.d3,d=b.config;b.zoom=c.behavior.zoom().on("zoomstart",function(){a=c.event.sourceEvent,b.zoom.altDomain=c.event.sourceEvent.altKey?b.x.orgDomain():null,d.zoom_onzoomstart.call(b.api,c.event.sourceEvent)}).on("zoom",function(){b.redrawForZoom.call(b)}).on("zoomend",function(){var e=c.event.sourceEvent;e&&a.clientX===e.clientX&&a.clientY===e.clientY||(b.redrawEventRect(),b.updateZoom(),d.zoom_onzoomend.call(b.api,b.x.orgDomain()))}),b.zoom.scale=function(a){return d.axis_rotated?this.y(a):this.x(a)},b.zoom.orgScaleExtent=function(){var a=d.zoom_extent?d.zoom_extent:[1,10];return[a[0],Math.max(b.getMaxDataCount()/a[1],a[1])]},b.zoom.updateScaleExtent=function(){var a=t(b.x.orgDomain())/t(b.orgXDomain),c=this.orgScaleExtent();return this.scaleExtent([c[0]*a,c[1]*a]),this}},i.updateZoom=function(){var a=this,b=a.config.zoom_enabled?a.zoom:function(){};a.main.select("."+l.zoomRect).call(b).on("dblclick.zoom",null),a.main.selectAll("."+l.eventRect).call(b).on("dblclick.zoom",null)},i.redrawForZoom=function(){var a=this,b=a.d3,c=a.config,d=a.zoom,e=a.x;if(c.zoom_enabled&&0!==a.filterTargetsToShow(a.data.targets).length){if("mousemove"===b.event.sourceEvent.type&&d.altDomain)return e.domain(d.altDomain),void d.scale(e).updateScaleExtent();a.isCategorized()&&e.orgDomain()[0]===a.orgXDomain[0]&&e.domain([a.orgXDomain[0]-1e-10,e.orgDomain()[1]]),a.redraw({withTransition:!1,withY:c.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===b.event.sourceEvent.type&&(a.cancelClick=!0),c.zoom_onzoom.call(a.api,e.orgDomain())}},i.generateColor=function(){var a=this,b=a.config,c=a.d3,d=b.data_colors,e=v(b.color_pattern)?b.color_pattern:c.scale.category10().range(),f=b.data_color,g=[];return function(a){var b,c=a.id||a.data&&a.data.id||a;return d[c]instanceof Function?b=d[c](a):d[c]?b=d[c]:(g.indexOf(c)<0&&g.push(c),b=e[g.indexOf(c)%e.length],d[c]=b),f instanceof Function?f(b,a):b}},i.generateLevelColor=function(){var a=this,b=a.config,c=b.color_pattern,d=b.color_threshold,e="value"===d.unit,f=d.values&&d.values.length?d.values:[],g=d.max||100;return v(b.color_threshold)?function(a){var b,d,h=c[c.length-1];for(b=0;b<f.length;b++)if(d=e?a:100*a/g,d<f[b]){h=c[b];break}return h}:null},i.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,e,f){var g="y2"===b.axis.getId(f)?d:c;return g.call(b,a,e)}},i.yFormat=function(a){var b=this,c=b.config,d=c.axis_y_tick_format?c.axis_y_tick_format:b.defaultValueFormat;return d(a)},i.y2Format=function(a){var b=this,c=b.config,d=c.axis_y2_tick_format?c.axis_y2_tick_format:b.defaultValueFormat;return d(a)},i.defaultValueFormat=function(a){return m(a)?+a:""},i.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"},i.dataLabelFormat=function(a){var b,c=this,d=c.config.data_labels,e=function(a){return m(a)?+a:""};return b="function"==typeof d.format?d.format:"object"==typeof d.format?d.format[a]?d.format[a]===!0?e:d.format[a]:function(){return""}:e},i.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0},i.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)},i.getCaches=function(a){
var b,c=[];for(b=0;b<a.length;b++)a[b]in this.cache&&c.push(this.cloneTarget(this.cache[a[b]]));return c};var l=i.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};i.generateClass=function(a,b){return" "+a+" "+a+this.getTargetSelectorSuffix(b)},i.classText=function(a){return this.generateClass(l.text,a.index)},i.classTexts=function(a){return this.generateClass(l.texts,a.id)},i.classShape=function(a){return this.generateClass(l.shape,a.index)},i.classShapes=function(a){return this.generateClass(l.shapes,a.id)},i.classLine=function(a){return this.classShape(a)+this.generateClass(l.line,a.id)},i.classLines=function(a){return this.classShapes(a)+this.generateClass(l.lines,a.id)},i.classCircle=function(a){return this.classShape(a)+this.generateClass(l.circle,a.index)},i.classCircles=function(a){return this.classShapes(a)+this.generateClass(l.circles,a.id)},i.classBar=function(a){return this.classShape(a)+this.generateClass(l.bar,a.index)},i.classBars=function(a){return this.classShapes(a)+this.generateClass(l.bars,a.id)},i.classArc=function(a){return this.classShape(a.data)+this.generateClass(l.arc,a.data.id)},i.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(l.arcs,a.data.id)},i.classArea=function(a){return this.classShape(a)+this.generateClass(l.area,a.id)},i.classAreas=function(a){return this.classShapes(a)+this.generateClass(l.areas,a.id)},i.classRegion=function(a,b){return this.generateClass(l.region,b)+" "+("class"in a?a.class:"")},i.classEvent=function(a){return this.generateClass(l.eventRect,a.index)},i.classTarget=function(a){var b=this,c=b.config.data_classes[a],d="";return c&&(d=" "+l.target+"-"+c),b.generateClass(l.target,a)+d},i.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)},i.classFocused=function(a){return" "+(this.focusedTargetIds.indexOf(a.id)>=0?l.focused:"")},i.classDefocused=function(a){return" "+(this.defocusedTargetIds.indexOf(a.id)>=0?l.defocused:"")},i.classChartText=function(a){return l.chartText+this.classTarget(a.id)},i.classChartLine=function(a){return l.chartLine+this.classTarget(a.id)},i.classChartBar=function(a){return l.chartBar+this.classTarget(a.id)},i.classChartArc=function(a){return l.chartArc+this.classTarget(a.data.id)},i.getTargetSelectorSuffix=function(a){return a||0===a?("-"+a).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},i.selectorTarget=function(a,b){return(b||"")+"."+l.target+this.getTargetSelectorSuffix(a)},i.selectorTargets=function(a,b){var c=this;return a=a||[],a.length?a.map(function(a){return c.selectorTarget(a,b)}):null},i.selectorLegend=function(a){return"."+l.legendItem+this.getTargetSelectorSuffix(a)},i.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};var m=i.isValue=function(a){return a||0===a},n=i.isFunction=function(a){return"function"==typeof a},o=i.isString=function(a){return"string"==typeof a},p=i.isUndefined=function(a){return"undefined"==typeof a},q=i.isDefined=function(a){return"undefined"!=typeof a},r=i.ceil10=function(a){return 10*Math.ceil(a/10)},s=i.asHalfPixel=function(a){return Math.ceil(a)+.5},t=i.diffDomain=function(a){return a[1]-a[0]},u=i.isEmpty=function(a){return!a||o(a)&&0===a.length||"object"==typeof a&&0===Object.keys(a).length},v=i.notEmpty=function(a){return Object.keys(a).length>0},w=i.getOption=function(a,b,c){return q(a[b])?a[b]:c},x=i.hasValue=function(a,b){var c=!1;return Object.keys(a).forEach(function(d){a[d]===b&&(c=!0)}),c},y=i.getPathBox=function(a){var b=a.getBoundingClientRect(),c=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)],d=c[0].x,e=Math.min(c[0].y,c[1].y);return{x:d,y:e,width:b.width,height:b.height}};h.focus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),this.revert(),this.defocus(),b.classed(l.focused,!0).classed(l.defocused,!1),c.hasArcType()&&c.expandArc(a),c.toggleFocusLegend(a,!0),c.focusedTargetIds=a,c.defocusedTargetIds=c.defocusedTargetIds.filter(function(b){return a.indexOf(b)<0})},h.defocus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),b.classed(l.focused,!1).classed(l.defocused,!0),c.hasArcType()&&c.unexpandArc(a),c.toggleFocusLegend(a,!1),c.focusedTargetIds=c.focusedTargetIds.filter(function(b){return a.indexOf(b)<0}),c.defocusedTargetIds=a},h.revert=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a)),b.classed(l.focused,!1).classed(l.defocused,!1),c.hasArcType()&&c.unexpandArc(a),c.config.legend_show&&(c.showLegend(a.filter(c.isLegendToShow.bind(c))),c.legend.selectAll(c.selectorLegends(a)).filter(function(){return c.d3.select(this).classed(l.legendItemFocused)}).classed(l.legendItemFocused,!1)),c.focusedTargetIds=[],c.defocusedTargetIds=[]},h.show=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.removeHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",1,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",1)}),b.withLegend&&d.showLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},h.hide=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.addHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",0,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",0)}),b.withLegend&&d.hideLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},h.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})},h.zoom=function(a){var b=this.internal;return a&&(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),b.brush.extent(a),b.redraw({withUpdateXDomain:!0,withY:b.config.zoom_rescale}),b.config.zoom_onzoom.call(this,b.x.orgDomain())),b.brush.extent()},h.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a,b.updateAndRedraw()},h.unzoom=function(){var a=this.internal;a.brush.clear().update(),a.redraw({withUpdateXDomain:!0})},h.load=function(a){var b=this.internal,c=b.config;return a.xs&&b.addXs(a.xs),"classes"in a&&Object.keys(a.classes).forEach(function(b){c.data_classes[b]=a.classes[b]}),"categories"in a&&b.isCategorized()&&(c.axis_x_categories=a.categories),"axes"in a&&Object.keys(a.axes).forEach(function(b){c.data_axes[b]=a.axes[b]}),"colors"in a&&Object.keys(a.colors).forEach(function(b){c.data_colors[b]=a.colors[b]}),"cacheIds"in a&&b.hasCaches(a.cacheIds)?void b.load(b.getCaches(a.cacheIds),a.done):void("unload"in a?b.unload(b.mapToTargetIds("boolean"==typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a))},h.unload=function(a){var b=this.internal;a=a||{},a instanceof Array?a={ids:a}:"string"==typeof a&&(a={ids:[a]}),b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()})},h.flow=function(a){var b,c,d,e,f,g,h,i,j=this.internal,k=[],l=j.getMaxDataCount(),n=0,o=0;if(a.json)c=j.convertJsonToData(a.json,a.keys);else if(a.rows)c=j.convertRowsToData(a.rows);else{if(!a.columns)return;c=j.convertColumnsToData(a.columns)}b=j.convertDataToTargets(c,!0),j.data.targets.forEach(function(a){var c,d,e=!1;for(c=0;c<b.length;c++)if(a.id===b[c].id){for(e=!0,a.values[a.values.length-1]&&(o=a.values[a.values.length-1].index+1),n=b[c].values.length,d=0;d<n;d++)b[c].values[d].index=o+d,j.isTimeSeries()||(b[c].values[d].x=o+d);a.values=a.values.concat(b[c].values),b.splice(c,1);break}e||k.push(a.id)}),j.data.targets.forEach(function(a){var b,c;for(b=0;b<k.length;b++)if(a.id===k[b])for(o=a.values[a.values.length-1].index+1,c=0;c<n;c++)a.values.push({id:a.id,index:o+c,x:j.isTimeSeries()?j.getOtherTargetX(o+c):o+c,value:null})}),j.data.targets.length&&b.forEach(function(a){var b,c=[];for(b=j.data.targets[0].values[0].index;b<o;b++)c.push({id:a.id,index:b,x:j.isTimeSeries()?j.getOtherTargetX(b):b,value:null});a.values.forEach(function(a){a.index+=o,j.isTimeSeries()||(a.x+=o)}),a.values=c.concat(a.values)}),j.data.targets=j.data.targets.concat(b),d=j.getMaxDataCount(),f=j.data.targets[0],g=f.values[0],q(a.to)?(n=0,i=j.isTimeSeries()?j.parseDate(a.to):a.to,f.values.forEach(function(a){a.x<i&&n++})):q(a.length)&&(n=a.length),l?1===l&&j.isTimeSeries()&&(h=(f.values[f.values.length-1].x-g.x)/2,e=[new Date(+g.x-h),new Date(+g.x+h)],j.updateXDomain(null,!0,!0,!1,e)):(h=j.isTimeSeries()?f.values.length>1?f.values[f.values.length-1].x-g.x:g.x-j.getXDomain(j.data.targets)[0]:1,e=[g.x-h,g.x],j.updateXDomain(null,!0,!0,!1,e)),j.updateTargets(j.data.targets),j.redraw({flow:{index:g.index,length:n,duration:m(a.duration)?a.duration:j.config.transition_duration,done:a.done,orgDataCount:l},withLegend:!0,withTransition:l>1,withTrimXDomain:!1,withUpdateXAxis:!0})},i.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var e,f,g,h=a.targets,i=a.flow,j=a.drawBar,k=a.drawLine,m=a.drawArea,n=a.cx,o=a.cy,p=a.xv,q=a.xForText,r=a.yForText,s=a.duration,u=1,v=i.index,w=i.length,x=b.getValueOnIndex(b.data.targets[0].values,v),y=b.getValueOnIndex(b.data.targets[0].values,v+w),z=b.x.domain(),A=i.duration||s,B=i.done||function(){},C=b.generateWait(),D=b.xgrid||d.selectAll([]),E=b.xgridLines||d.selectAll([]),F=b.mainRegion||d.selectAll([]),G=b.mainText||d.selectAll([]),H=b.mainBar||d.selectAll([]),I=b.mainLine||d.selectAll([]),J=b.mainArea||d.selectAll([]),K=b.mainCircle||d.selectAll([]);b.flowing=!0,b.data.targets.forEach(function(a){a.values.splice(0,w)}),g=b.updateXDomain(h,!0,!0),b.updateXGrid&&b.updateXGrid(!0),i.orgDataCount?e=1===i.orgDataCount||x.x===y.x?b.x(z[0])-b.x(g[0]):b.isTimeSeries()?b.x(z[0])-b.x(g[0]):b.x(x.x)-b.x(y.x):1!==b.data.targets[0].values.length?e=b.x(z[0])-b.x(g[0]):b.isTimeSeries()?(x=b.getValueOnIndex(b.data.targets[0].values,0),y=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),e=b.x(x.x)-b.x(y.x)):e=t(g)/2,u=t(z)/t(g),f="translate("+e+",0) scale("+u+",1)",b.hideXGridFocus(),b.hideTooltip(),d.transition().ease("linear").duration(A).each(function(){C.add(b.axes.x.transition().call(b.xAxis)),C.add(H.transition().attr("transform",f)),C.add(I.transition().attr("transform",f)),C.add(J.transition().attr("transform",f)),C.add(K.transition().attr("transform",f)),C.add(G.transition().attr("transform",f)),C.add(F.filter(b.isRegionOnX).transition().attr("transform",f)),C.add(D.transition().attr("transform",f)),C.add(E.transition().attr("transform",f))}).call(C,function(){var a,d=[],e=[],f=[];if(w){for(a=0;a<w;a++)d.push("."+l.shape+"-"+(v+a)),e.push("."+l.text+"-"+(v+a)),f.push("."+l.eventRect+"-"+(v+a));b.svg.selectAll("."+l.shapes).selectAll(d).remove(),b.svg.selectAll("."+l.texts).selectAll(e).remove(),b.svg.selectAll("."+l.eventRects).selectAll(f).remove(),b.svg.select("."+l.xgrid).remove()}D.attr("transform",null).attr(b.xgridAttr),E.attr("transform",null),E.select("line").attr("x1",c.axis_rotated?0:p).attr("x2",c.axis_rotated?b.width:p),E.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",p),H.attr("transform",null).attr("d",j),I.attr("transform",null).attr("d",k),J.attr("transform",null).attr("d",m),K.attr("transform",null).attr("cx",n).attr("cy",o),G.attr("transform",null).attr("x",q).attr("y",r).style("fill-opacity",b.opacityForText.bind(b)),F.attr("transform",null),F.select("rect").filter(b.isRegionOnX).attr("x",b.regionX.bind(b)).attr("width",b.regionWidth.bind(b)),c.interaction_enabled&&b.redrawEventRect(),B(),b.flowing=!1})}},h.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+l.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+l.shape).filter(function(){return c.select(this).classed(l.SELECTED)}).map(function(a){return a.map(function(a){var b=a.__data__;return b.data?b.data:b})}))},h.select=function(a,b,c){var d=this.internal,e=d.d3,f=d.config;f.data_selection_enabled&&d.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(g,h){var i=e.select(this),j=g.data?g.data.id:g.id,k=d.getToggle(this,g).bind(d),m=f.data_selection_grouped||!a||a.indexOf(j)>=0,n=!b||b.indexOf(h)>=0,o=i.classed(l.SELECTED);i.classed(l.line)||i.classed(l.area)||(m&&n?f.data_selection_isselectable(g)&&!o&&k(!0,i.classed(l.SELECTED,!0),g,h):q(c)&&c&&o&&k(!1,i.classed(l.SELECTED,!1),g,h))})},h.unselect=function(a,b){var c=this.internal,d=c.d3,e=c.config;e.data_selection_enabled&&c.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(f,g){var h=d.select(this),i=f.data?f.data.id:f.id,j=c.getToggle(this,f).bind(c),k=e.data_selection_grouped||!a||a.indexOf(i)>=0,m=!b||b.indexOf(g)>=0,n=h.classed(l.SELECTED);h.classed(l.line)||h.classed(l.area)||k&&m&&e.data_selection_isselectable(f)&&n&&j(!1,h.classed(l.SELECTED,!1),f,g)})},h.transform=function(a,b){var c=this.internal,d=["pie","donut"].indexOf(a)>=0?{withTransform:!0}:null;c.transformTo(b,a,d)},i.transformTo=function(a,b,c){var d=this,e=!d.hasArcType(),f=c||{withTransitionForAxis:e};f.withTransitionForTransform=!1,d.transiting=!1,d.setTargetType(a,b),d.updateTargets(d.data.targets),d.updateAndRedraw(f)},h.groups=function(a){var b=this.internal,c=b.config;return p(a)?c.data_groups:(c.data_groups=a,b.redraw(),c.data_groups)},h.xgrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_x_lines=a,b.redrawWithoutRescale(),c.grid_x_lines):c.grid_x_lines},h.xgrids.add=function(a){var b=this.internal;return this.xgrids(b.config.grid_x_lines.concat(a?a:[]))},h.xgrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!0)},h.ygrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_y_lines=a,b.redrawWithoutRescale(),c.grid_y_lines):c.grid_y_lines},h.ygrids.add=function(a){var b=this.internal;return this.ygrids(b.config.grid_y_lines.concat(a?a:[]))},h.ygrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!1)},h.regions=function(a){var b=this.internal,c=b.config;return a?(c.regions=a,b.redrawWithoutRescale(),c.regions):c.regions},h.regions.add=function(a){var b=this.internal,c=b.config;return a?(c.regions=c.regions.concat(a),b.redrawWithoutRescale(),c.regions):c.regions},h.regions.remove=function(a){var b,c,d,e=this.internal,f=e.config;return a=a||{},b=e.getOption(a,"duration",f.transition_duration),c=e.getOption(a,"classes",[l.region]),d=e.main.select("."+l.regions).selectAll(c.map(function(a){return"."+a})),(b?d.transition().duration(b):d).style("opacity",0).remove(),f.regions=f.regions.filter(function(a){var b=!1;return!a.class||(a.class.split(" ").forEach(function(a){c.indexOf(a)>=0&&(b=!0)}),!b)}),f.regions},h.data=function(a){var b=this.internal.data.targets;return"undefined"==typeof a?b:b.filter(function(b){return[].concat(a).indexOf(b.id)>=0})},h.data.shown=function(a){return this.internal.filterTargetsToShow(this.data(a))},h.data.values=function(a){var b,c=null;return a&&(b=this.data(a),c=b[0]?b[0].values.map(function(a){return a.value}):null),c},h.data.names=function(a){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",a)},h.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)},h.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)},h.category=function(a,b){var c=this.internal,d=c.config;return arguments.length>1&&(d.axis_x_categories[a]=b,c.redraw()),d.axis_x_categories[a]},h.categories=function(a){var b=this.internal,c=b.config;return arguments.length?(c.axis_x_categories=a,b.redraw(),c.axis_x_categories):c.axis_x_categories},h.color=function(a){var b=this.internal;return b.color(a)},h.x=function(a){var b=this.internal;return arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},h.xs=function(a){var b=this.internal;return arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},h.axis=function(){},h.axis.labels=function(a){var b=this.internal;arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),b.axis.updateLabels())},h.axis.max=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(m(a.x)&&(c.axis_x_max=a.x),m(a.y)&&(c.axis_y_max=a.y),m(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}},h.axis.min=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(m(a.x)&&(c.axis_x_min=a.x),m(a.y)&&(c.axis_y_min=a.y),m(a.y2)&&(c.axis_y2_min=a.y2)):c.axis_y_min=c.axis_y2_min=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}},h.axis.range=function(a){return arguments.length?(q(a.max)&&this.axis.max(a.max),void(q(a.min)&&this.axis.min(a.min))):{max:this.axis.max(),min:this.axis.min()}},h.legend=function(){},h.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},h.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},h.resize=function(a){var b=this.internal,c=b.config;c.size_width=a?a.width:null,c.size_height=a?a.height:null,this.flush()},h.flush=function(){var a=this.internal;a.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},h.destroy=function(){var b=this.internal;return a.clearInterval(b.intervalForObserveInserted),a.onresize=null,b.selectChart.classed("c3",!1).html(""),Object.keys(b).forEach(function(a){b[a]=null}),null},h.tooltip=function(){},h.tooltip.show=function(a){var b,c,d=this.internal;a.mouse&&(c=a.mouse),a.data?d.isMultipleX()?(c=[d.x(a.data.x),d.getYScale(a.data.id)(a.data.value)],b=null):b=m(a.data.index)?a.data.index:d.getIndexByX(a.data.x):"undefined"!=typeof a.x?b=d.getIndexByX(a.x):"undefined"!=typeof a.index&&(b=a.index),d.dispatchEvent("mouseover",b,c),d.dispatchEvent("mousemove",b,c)},h.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0)};var z;i.isSafari=function(){var b=a.navigator.userAgent;return b.indexOf("Safari")>=0&&b.indexOf("Chrome")<0},i.isChrome=function(){var b=a.navigator.userAgent;return b.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),"function"==typeof define&&define.amd?define("c3",["d3"],k):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=k:a.c3=k}(window),function(a){a(["jquery","lodash"],function(a,b){return function(){function c(a,b,c){return q({type:w.alert,title:a,message:b,options:c})}function d(a,b,c){return q({type:w.info,title:a,message:b,options:c})}function e(a,b,c){return q({type:w.success,title:a,message:b,options:c})}function f(a,b,c){return q({type:w.warning,title:a,message:b,options:c})}function g(a){u=a}function h(b,c){return b||(b=r()),t=a("#"+b.containerId),t.length?t:(c&&(t=m(b)),t)}function i(a){var b=r();t||h(b),l(a,b)||k(b)}function j(b){var c=r();return t||h(c),b&&0===a(":focus",b).length?void s(b):void(t.children().length&&t.remove())}function k(b){for(var c=t.children(),d=c.length-1;d>=0;d--)l(a(c[d]),b)}function l(b,c){return!(!b||0!==a(":focus",b).length)&&(b[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){s(b)}}),!0)}function m(b){return t=a("<div/>").attr("id",b.containerId).addClass(b.positionClass).attr("aria-live","polite").attr("role","alert"),t.appendTo(a(b.target)),t}function n(){return{tapToDismiss:!1,toastClass:"notification",containerId:"notifications-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,onCloseClick:void 0,positionClass:"notification-below-header",timeOut:5e3,titleClass:"headline",messageClass:"notification-content",closeIcon:"icon icon-times-circle",target:"body",newestOnTop:!0}}function o(a){u&&u(a)}function p(){return this._template||(this._template='<div class="{{= toastClass }} {{= toastClass }}-{{= type }}"><div class="notification-header"><p class="{{= titleClass }}"><i class="icon icon-state-{{= type }}"></i>&nbsp;<span class="text">{{= title }}</span><i class="js-close close-icon {{= closeIcon }}"></i></p></div><div class="{{= messageClass }}" style="display: none;">{{= message }}</div></div>')}function q(c){function d(b){if(!a(":focus",m).length||b)return m[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){s(m),i.onHidden&&"hidden"!==q.state&&i.onHidden(),q.state="hidden",q.endTime=new Date,o(q)}})}function e(){(i.timeOut>0||i.extendedTimeOut>0)&&(l=setTimeout(d,i.extendedTimeOut))}function f(){clearTimeout(l),m.stop(!0,!0)[i.showMethod]({duration:i.showDuration,easing:i.showEasing})}var g=r(),i=a.extend(g,c);"undefined"!=typeof c.options&&(i=a.extend(i,c.options)),v++,t=h(i,!0);var j=b.template(p(),i),k=a(j),l=null,m=k,n=m.find(".js-close"),q={toastId:v,state:"visible",startTime:new Date,options:i};return i.message&&m.find("."+i.messageClass).show(),m.hide(),i.newestOnTop?t.prepend(m):t.append(m),m[i.showMethod]({duration:i.showDuration,easing:i.showEasing,complete:i.onShown}),i.timeOut>0&&(l=setTimeout(d,i.timeOut)),m.hover(f,e),!i.onclick&&i.tapToDismiss&&m.click(d),n&&n.click(function(a){a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble&&a.cancelBubble!==!0&&(a.cancelBubble=!0),i.onCloseClick&&i.onCloseClick(a),d(!0)}),i.onclick&&m.click(function(){i.onclick(),d()}),o(q),i.debug&&console&&console.log(q),m}function r(){return a.extend({},n(),x.options)}function s(a){t||(t=h()),a.is(":visible")||(a.remove(),a=null,0===t.children().length&&t.remove())}var t,u,v=0,w={alert:"alert",info:"info",success:"success",warning:"warning"},x={clear:i,remove:j,alert:c,getContainer:h,info:d,options:{},subscribe:g,success:e,version:"2.0.3",warning:f,warning_permanent:f};return x}()})}("function"==typeof define&&define.amd?define:function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery","lodash")):window.toastr=b(window.jQuery,window._)}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return Ad.apply(null,arguments)}function b(a){Ad=a}function c(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function d(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function e(a){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(a).length;var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0}function f(a){return void 0===a}function g(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)}function h(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function i(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function j(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function k(a,b){for(var c in b)j(b,c)&&(a[c]=b[c]);return j(b,"toString")&&(a.toString=b.toString),j(b,"valueOf")&&(a.valueOf=b.valueOf),a}function l(a,b,c,d){return yb(a,b,c,d,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function n(a){return null==a._pf&&(a._pf=m()),a._pf}function o(a){if(null==a._isValid){var b=n(a),c=Bd.call(b.parsedDateParts,function(a){return null!=a}),d=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);if(a._strict&&(d=d&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour),null!=Object.isFrozen&&Object.isFrozen(a))return d;a._isValid=d}return a._isValid}function p(a){var b=l(NaN);return null!=a?k(n(b),a):n(b).userInvalidated=!0,b}function q(a,b){var c,d,e;if(f(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),f(b._i)||(a._i=b._i),f(b._f)||(a._f=b._f),f(b._l)||(a._l=b._l),f(b._strict)||(a._strict=b._strict),f(b._tzm)||(a._tzm=b._tzm),f(b._isUTC)||(a._isUTC=b._isUTC),f(b._offset)||(a._offset=b._offset),f(b._pf)||(a._pf=n(b)),f(b._locale)||(a._locale=b._locale),Cd.length>0)for(c=0;c<Cd.length;c++)d=Cd[c],e=b[d],f(e)||(a[d]=e);return a}function r(b){q(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Dd===!1&&(Dd=!0,a.updateOffset(this),Dd=!1)}function s(a){return a instanceof r||null!=a&&null!=a._isAMomentObject}function t(a){return a<0?Math.ceil(a)||0:Math.floor(a)}function u(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=t(b)),c}function v(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;d<e;d++)(c&&a[d]!==b[d]||!c&&u(a[d])!==u(b[d]))&&g++;return g+f}function w(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function x(b,c){var d=!0;return k(function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,b),d){for(var e,f=[],g=0;g<arguments.length;g++){if(e="","object"==typeof arguments[g]){e+="\n["+g+"] ";for(var h in arguments[0])e+=h+": "+arguments[0][h]+", ";e=e.slice(0,-2)}else e=arguments[g];f.push(e)}w(b+"\nArguments: "+Array.prototype.slice.call(f).join("")+"\n"+(new Error).stack),d=!1}return c.apply(this,arguments)},c)}function y(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c),Ed[b]||(w(c),Ed[b]=!0)}function z(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function A(a){var b,c;for(c in a)b=a[c],z(b)?this[c]=b:this["_"+c]=b;this._config=a,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function B(a,b){var c,e=k({},a);for(c in b)j(b,c)&&(d(a[c])&&d(b[c])?(e[c]={},k(e[c],a[c]),k(e[c],b[c])):null!=b[c]?e[c]=b[c]:delete e[c]);for(c in a)j(a,c)&&!j(b,c)&&d(a[c])&&(e[c]=k({},e[c]));return e}function C(a){null!=a&&this.set(a)}function D(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return z(d)?d.call(b,c):d}function E(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function F(){return this._invalidDate}function G(a){return this._ordinal.replace("%d",a)}function H(a,b,c,d){var e=this._relativeTime[c];return z(e)?e(a,b,c,d):e.replace(/%d/i,a)}function I(a,b){var c=this._relativeTime[a>0?"future":"past"];return z(c)?c(b):c.replace(/%s/i,b)}function J(a,b){var c=a.toLowerCase();Md[c]=Md[c+"s"]=Md[b]=a}function K(a){return"string"==typeof a?Md[a]||Md[a.toLowerCase()]:void 0}function L(a){var b,c,d={};for(c in a)j(a,c)&&(b=K(c),b&&(d[b]=a[c]));return d}function M(a,b){Nd[a]=b}function N(a){var b=[];for(var c in a)b.push({unit:c,priority:Nd[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}function O(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function P(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Rd[a]=e),b&&(Rd[b[0]]=function(){return O(e.apply(this,arguments),b[1],b[2])}),c&&(Rd[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function Q(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function R(a){var b,c,d=a.match(Od);for(b=0,c=d.length;b<c;b++)Rd[d[b]]?d[b]=Rd[d[b]]:d[b]=Q(d[b]);return function(b){var e,f="";for(e=0;e<c;e++)f+=z(d[e])?d[e].call(b,a):d[e];return f}}function S(a,b){return a.isValid()?(b=T(b,a.localeData()),Qd[b]=Qd[b]||R(b),Qd[b](a)):a.localeData().invalidDate()}function T(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Pd.lastIndex=0;d>=0&&Pd.test(a);)a=a.replace(Pd,c),Pd.lastIndex=0,d-=1;return a}function U(a,b,c){he[a]=z(b)?b:function(a,d){return a&&c?c:b}}function V(a,b){return j(he,a)?he[a](b._strict,b._locale):new RegExp(W(a))}function W(a){return X(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function X(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Y(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),g(b)&&(d=function(a,c){c[b]=u(a)}),c=0;c<a.length;c++)ie[a[c]]=d}function Z(a,b){Y(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function $(a,b,c){null!=b&&j(ie,a)&&ie[a](b,c._a,c,a)}function _(a){return aa(a)?366:365}function aa(a){return a%4===0&&a%100!==0||a%400===0}function ba(){return aa(this.year())}function ca(b,c){return function(d){return null!=d?(ea(this,b,d),a.updateOffset(this,c),this):da(this,b)}}function da(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function ea(a,b,c){a.isValid()&&!isNaN(c)&&("FullYear"===b&&aa(a.year())&&1===a.month()&&29===a.date()?a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),ia(c,a.month())):a._d["set"+(a._isUTC?"UTC":"")+b](c))}function fa(a){return a=K(a),z(this[a])?this[a]():this}function ga(a,b){if("object"==typeof a){a=L(a);for(var c=N(a),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit])}else if(a=K(a),z(this[a]))return this[a](b);return this}function ha(a,b){return(a%b+b)%b}function ia(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=ha(b,12);return a+=(b-c)/12,1===c?aa(a)?29:28:31-c%7%2}function ja(a,b){return a?c(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||ue).test(b)?"format":"standalone"][a.month()]:c(this._months)?this._months:this._months.standalone}function ka(a,b){return a?c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[ue.test(b)?"format":"standalone"][a.month()]:c(this._monthsShort)?this._monthsShort:this._monthsShort.standalone;
}function la(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;d<12;++d)f=l([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();return c?"MMM"===b?(e=se.call(this._shortMonthsParse,g),e!==-1?e:null):(e=se.call(this._longMonthsParse,g),e!==-1?e:null):"MMM"===b?(e=se.call(this._shortMonthsParse,g),e!==-1?e:(e=se.call(this._longMonthsParse,g),e!==-1?e:null)):(e=se.call(this._longMonthsParse,g),e!==-1?e:(e=se.call(this._shortMonthsParse,g),e!==-1?e:null))}function ma(a,b,c){var d,e,f;if(this._monthsParseExact)return la.call(this,a,b,c);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;d<12;d++){if(e=l([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function na(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=u(b);else if(b=a.localeData().monthsParse(b),!g(b))return a;return c=Math.min(a.date(),ia(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function oa(b){return null!=b?(na(this,b),a.updateOffset(this,!0),this):da(this,"Month")}function pa(){return ia(this.year(),this.month())}function qa(a){return this._monthsParseExact?(j(this,"_monthsRegex")||sa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(j(this,"_monthsShortRegex")||(this._monthsShortRegex=xe),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)}function ra(a){return this._monthsParseExact?(j(this,"_monthsRegex")||sa.call(this),a?this._monthsStrictRegex:this._monthsRegex):(j(this,"_monthsRegex")||(this._monthsRegex=ye),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)}function sa(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;b<12;b++)c=l([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;b<12;b++)d[b]=X(d[b]),e[b]=X(e[b]);for(b=0;b<24;b++)f[b]=X(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}function ta(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return a<100&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function ua(a){var b=new Date(Date.UTC.apply(null,arguments));return a<100&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function va(a,b,c){var d=7+b-c,e=(7+ua(a,0,d).getUTCDay()-b)%7;return-e+d-1}function wa(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=va(a,d,e),j=1+7*(b-1)+h+i;return j<=0?(f=a-1,g=_(f)+j):j>_(a)?(f=a+1,g=j-_(a)):(f=a,g=j),{year:f,dayOfYear:g}}function xa(a,b,c){var d,e,f=va(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return g<1?(e=a.year()-1,d=g+ya(e,b,c)):g>ya(a.year(),b,c)?(d=g-ya(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function ya(a,b,c){var d=va(a,b,c),e=va(a+1,b,c);return(_(a)-d+e)/7}function za(a){return xa(a,this._week.dow,this._week.doy).week}function Aa(){return this._week.dow}function Ba(){return this._week.doy}function Ca(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Da(a){var b=xa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function Ea(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Fa(a,b){return"string"==typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a}function Ga(a,b){return a?c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:c(this._weekdays)?this._weekdays:this._weekdays.standalone}function Ha(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort}function Ia(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin}function Ja(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;d<7;++d)f=l([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();return c?"dddd"===b?(e=se.call(this._weekdaysParse,g),e!==-1?e:null):"ddd"===b?(e=se.call(this._shortWeekdaysParse,g),e!==-1?e:null):(e=se.call(this._minWeekdaysParse,g),e!==-1?e:null):"dddd"===b?(e=se.call(this._weekdaysParse,g),e!==-1?e:(e=se.call(this._shortWeekdaysParse,g),e!==-1?e:(e=se.call(this._minWeekdaysParse,g),e!==-1?e:null))):"ddd"===b?(e=se.call(this._shortWeekdaysParse,g),e!==-1?e:(e=se.call(this._weekdaysParse,g),e!==-1?e:(e=se.call(this._minWeekdaysParse,g),e!==-1?e:null))):(e=se.call(this._minWeekdaysParse,g),e!==-1?e:(e=se.call(this._weekdaysParse,g),e!==-1?e:(e=se.call(this._shortWeekdaysParse,g),e!==-1?e:null)))}function Ka(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Ja.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;d<7;d++){if(e=l([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function La(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Ea(a,this.localeData()),this.add(a-b,"d")):b}function Ma(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Na(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=Fa(a,this.localeData());return this.day(this.day()%7?b:b-7)}return this.day()||7}function Oa(a){return this._weekdaysParseExact?(j(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(j(this,"_weekdaysRegex")||(this._weekdaysRegex=De),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)}function Pa(a){return this._weekdaysParseExact?(j(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(j(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ee),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Qa(a){return this._weekdaysParseExact?(j(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(j(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Fe),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ra(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],j=[];for(b=0;b<7;b++)c=l([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),j.push(d),j.push(e),j.push(f);for(g.sort(a),h.sort(a),i.sort(a),j.sort(a),b=0;b<7;b++)h[b]=X(h[b]),i[b]=X(i[b]),j[b]=X(j[b]);this._weekdaysRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function Sa(){return this.hours()%12||12}function Ta(){return this.hours()||24}function Ua(a,b){P(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Va(a,b){return b._meridiemParse}function Wa(a){return"p"===(a+"").toLowerCase().charAt(0)}function Xa(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Ya(a){return a?a.toLowerCase().replace("_","-"):a}function Za(a){for(var b,c,d,e,f=0;f<a.length;){for(e=Ya(a[f]).split("-"),b=e.length,c=Ya(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=$a(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&v(e,c,!0)>=b-1)break;b--}f++}return Ge}function $a(a){var b=null;if(!Ke[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Ge._abbr;var c=require;c("./locale/"+a),_a(b)}catch(a){}return Ke[a]}function _a(a,b){var c;return a&&(c=f(b)?cb(a):ab(a,b),c?Ge=c:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?")),Ge._abbr}function ab(a,b){if(null!==b){var c,d=Je;if(b.abbr=a,null!=Ke[a])y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),d=Ke[a]._config;else if(null!=b.parentLocale)if(null!=Ke[b.parentLocale])d=Ke[b.parentLocale]._config;else{if(c=$a(b.parentLocale),null==c)return Le[b.parentLocale]||(Le[b.parentLocale]=[]),Le[b.parentLocale].push({name:a,config:b}),null;d=c._config}return Ke[a]=new C(B(d,b)),Le[a]&&Le[a].forEach(function(a){ab(a.name,a.config)}),_a(a),Ke[a]}return delete Ke[a],null}function bb(a,b){if(null!=b){var c,d,e=Je;d=$a(a),null!=d&&(e=d._config),b=B(e,b),c=new C(b),c.parentLocale=Ke[a],Ke[a]=c,_a(a)}else null!=Ke[a]&&(null!=Ke[a].parentLocale?Ke[a]=Ke[a].parentLocale:null!=Ke[a]&&delete Ke[a]);return Ke[a]}function cb(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Ge;if(!c(a)){if(b=$a(a))return b;a=[a]}return Za(a)}function db(){return Fd(Ke)}function eb(a){var b,c=a._a;return c&&n(a).overflow===-2&&(b=c[ke]<0||c[ke]>11?ke:c[le]<1||c[le]>ia(c[je],c[ke])?le:c[me]<0||c[me]>24||24===c[me]&&(0!==c[ne]||0!==c[oe]||0!==c[pe])?me:c[ne]<0||c[ne]>59?ne:c[oe]<0||c[oe]>59?oe:c[pe]<0||c[pe]>999?pe:-1,n(a)._overflowDayOfYear&&(b<je||b>le)&&(b=le),n(a)._overflowWeeks&&b===-1&&(b=qe),n(a)._overflowWeekday&&b===-1&&(b=re),n(a).overflow=b),a}function fb(a,b,c){return null!=a?a:null!=b?b:c}function gb(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function hb(a){var b,c,d,e,f,g=[];if(!a._d){for(d=gb(a),a._w&&null==a._a[le]&&null==a._a[ke]&&ib(a),null!=a._dayOfYear&&(f=fb(a._a[je],d[je]),(a._dayOfYear>_(f)||0===a._dayOfYear)&&(n(a)._overflowDayOfYear=!0),c=ua(f,0,a._dayOfYear),a._a[ke]=c.getUTCMonth(),a._a[le]=c.getUTCDate()),b=0;b<3&&null==a._a[b];++b)a._a[b]=g[b]=d[b];for(;b<7;b++)a._a[b]=g[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[me]&&0===a._a[ne]&&0===a._a[oe]&&0===a._a[pe]&&(a._nextDay=!0,a._a[me]=0),a._d=(a._useUTC?ua:ta).apply(null,g),e=a._useUTC?a._d.getUTCDay():a._d.getDay(),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[me]=24),a._w&&"undefined"!=typeof a._w.d&&a._w.d!==e&&(n(a).weekdayMismatch=!0)}}function ib(a){var b,c,d,e,f,g,h,i;if(b=a._w,null!=b.GG||null!=b.W||null!=b.E)f=1,g=4,c=fb(b.GG,a._a[je],xa(zb(),1,4).year),d=fb(b.W,1),e=fb(b.E,1),(e<1||e>7)&&(i=!0);else{f=a._locale._week.dow,g=a._locale._week.doy;var j=xa(zb(),f,g);c=fb(b.gg,a._a[je],j.year),d=fb(b.w,j.week),null!=b.d?(e=b.d,(e<0||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f}d<1||d>ya(c,f,g)?n(a)._overflowWeeks=!0:null!=i?n(a)._overflowWeekday=!0:(h=wa(c,d,e,f,g),a._a[je]=h.year,a._dayOfYear=h.dayOfYear)}function jb(a){var b,c,d,e,f,g,h=a._i,i=Me.exec(h)||Ne.exec(h);if(i){for(n(a).iso=!0,b=0,c=Pe.length;b<c;b++)if(Pe[b][1].exec(i[1])){e=Pe[b][0],d=Pe[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=Qe.length;b<c;b++)if(Qe[b][1].exec(i[3])){f=(i[2]||" ")+Qe[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Oe.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),rb(a)}else a._isValid=!1}function kb(a,b,c,d,e,f){var g=[lb(a),we.indexOf(b),parseInt(c,10),parseInt(d,10),parseInt(e,10)];return f&&g.push(parseInt(f,10)),g}function lb(a){var b=parseInt(a,10);return b<=49?2e3+b:b<=999?1900+b:b}function mb(a){return a.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function nb(a,b,c){if(a){var d=Be.indexOf(a),e=new Date(b[0],b[1],b[2]).getDay();if(d!==e)return n(c).weekdayMismatch=!0,c._isValid=!1,!1}return!0}function ob(a,b,c){if(a)return Te[a];if(b)return 0;var d=parseInt(c,10),e=d%100,f=(d-e)/100;return 60*f+e}function pb(a){var b=Se.exec(mb(a._i));if(b){var c=kb(b[4],b[3],b[2],b[5],b[6],b[7]);if(!nb(b[1],c,a))return;a._a=c,a._tzm=ob(b[8],b[9],b[10]),a._d=ua.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),n(a).rfc2822=!0}else a._isValid=!1}function qb(b){var c=Re.exec(b._i);return null!==c?void(b._d=new Date((+c[1]))):(jb(b),void(b._isValid===!1&&(delete b._isValid,pb(b),b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b)))))}function rb(b){if(b._f===a.ISO_8601)return void jb(b);if(b._f===a.RFC_2822)return void pb(b);b._a=[],n(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,j=0;for(e=T(b._f,b._locale).match(Od)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(V(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&n(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Rd[f]?(d?n(b).empty=!1:n(b).unusedTokens.push(f),$(f,d,b)):b._strict&&!d&&n(b).unusedTokens.push(f);n(b).charsLeftOver=i-j,h.length>0&&n(b).unusedInput.push(h),b._a[me]<=12&&n(b).bigHour===!0&&b._a[me]>0&&(n(b).bigHour=void 0),n(b).parsedDateParts=b._a.slice(0),n(b).meridiem=b._meridiem,b._a[me]=sb(b._locale,b._a[me],b._meridiem),hb(b),eb(b)}function sb(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&b<12&&(b+=12),d||12!==b||(b=0),b):b}function tb(a){var b,c,d,e,f;if(0===a._f.length)return n(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=q({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],rb(b),o(b)&&(f+=n(b).charsLeftOver,f+=10*n(b).unusedTokens.length,n(b).score=f,(null==d||f<d)&&(d=f,c=b));k(a,c||b)}function ub(a){if(!a._d){var b=L(a._i);a._a=i([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),hb(a)}}function vb(a){var b=new r(eb(wb(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function wb(a){var b=a._i,d=a._f;return a._locale=a._locale||cb(a._l),null===b||void 0===d&&""===b?p({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),s(b)?new r(eb(b)):(h(b)?a._d=b:c(d)?tb(a):d?rb(a):xb(a),o(a)||(a._d=null),a))}function xb(b){var e=b._i;f(e)?b._d=new Date(a.now()):h(e)?b._d=new Date(e.valueOf()):"string"==typeof e?qb(b):c(e)?(b._a=i(e.slice(0),function(a){return parseInt(a,10)}),hb(b)):d(e)?ub(b):g(e)?b._d=new Date(e):a.createFromInputFallback(b)}function yb(a,b,f,g,h){var i={};return f!==!0&&f!==!1||(g=f,f=void 0),(d(a)&&e(a)||c(a)&&0===a.length)&&(a=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=h,i._l=f,i._i=a,i._f=b,i._strict=g,vb(i)}function zb(a,b,c,d){return yb(a,b,c,d,!1)}function Ab(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return zb();for(d=b[0],e=1;e<b.length;++e)b[e].isValid()&&!b[e][a](d)||(d=b[e]);return d}function Bb(){var a=[].slice.call(arguments,0);return Ab("isBefore",a)}function Cb(){var a=[].slice.call(arguments,0);return Ab("isAfter",a)}function Db(a){for(var b in a)if(se.call(Xe,b)===-1||null!=a[b]&&isNaN(a[b]))return!1;for(var c=!1,d=0;d<Xe.length;++d)if(a[Xe[d]]){if(c)return!1;parseFloat(a[Xe[d]])!==u(a[Xe[d]])&&(c=!0)}return!0}function Eb(){return this._isValid}function Fb(){return Yb(NaN)}function Gb(a){var b=L(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._isValid=Db(b),this._milliseconds=+k+1e3*j+6e4*i+1e3*h*60*60,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=cb(),this._bubble()}function Hb(a){return a instanceof Gb}function Ib(a){return a<0?Math.round(-1*a)*-1:Math.round(a)}function Jb(a,b){P(a,0,0,function(){var a=this.utcOffset(),c="+";return a<0&&(a=-a,c="-"),c+O(~~(a/60),2)+b+O(~~a%60,2)})}function Kb(a,b){var c=(b||"").match(a);if(null===c)return null;var d=c[c.length-1]||[],e=(d+"").match(Ye)||["-",0,0],f=+(60*e[1])+u(e[2]);return 0===f?0:"+"===e[0]?f:-f}function Lb(b,c){var d,e;return c._isUTC?(d=c.clone(),e=(s(b)||h(b)?b.valueOf():zb(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),a.updateOffset(d,!1),d):zb(b).local()}function Mb(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Nb(b,c,d){var e,f=this._offset||0;if(!this.isValid())return null!=b?this:NaN;if(null!=b){if("string"==typeof b){if(b=Kb(ee,b),null===b)return this}else Math.abs(b)<16&&!d&&(b=60*b);return!this._isUTC&&c&&(e=Mb(this)),this._offset=b,this._isUTC=!0,null!=e&&this.add(e,"m"),f!==b&&(!c||this._changeInProgress?bc(this,Yb(b-f,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?f:Mb(this)}function Ob(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Pb(a){return this.utcOffset(0,a)}function Qb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Mb(this),"m")),this}function Rb(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var a=Kb(de,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this}function Sb(a){return!!this.isValid()&&(a=a?zb(a).utcOffset():0,(this.utcOffset()-a)%60===0)}function Tb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ub(){if(!f(this._isDSTShifted))return this._isDSTShifted;var a={};if(q(a,this),a=wb(a),a._a){var b=a._isUTC?l(a._a):zb(a._a);this._isDSTShifted=this.isValid()&&v(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Vb(){return!!this.isValid()&&!this._isUTC}function Wb(){return!!this.isValid()&&this._isUTC}function Xb(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Yb(a,b){var c,d,e,f=a,h=null;return Hb(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:g(a)?(f={},b?f[b]=a:f.milliseconds=a):(h=Ze.exec(a))?(c="-"===h[1]?-1:1,f={y:0,d:u(h[le])*c,h:u(h[me])*c,m:u(h[ne])*c,s:u(h[oe])*c,ms:u(Ib(1e3*h[pe]))*c}):(h=$e.exec(a))?(c="-"===h[1]?-1:("+"===h[1],1),f={y:Zb(h[2],c),M:Zb(h[3],c),w:Zb(h[4],c),d:Zb(h[5],c),h:Zb(h[6],c),m:Zb(h[7],c),s:Zb(h[8],c)}):null==f?f={}:"object"==typeof f&&("from"in f||"to"in f)&&(e=_b(zb(f.from),zb(f.to)),f={},f.ms=e.milliseconds,f.M=e.months),d=new Gb(f),Hb(a)&&j(a,"_locale")&&(d._locale=a._locale),d}function Zb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function $b(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function _b(a,b){var c;return a.isValid()&&b.isValid()?(b=Lb(b,a),a.isBefore(b)?c=$b(a,b):(c=$b(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function ac(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(y(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Yb(c,d),bc(this,e,a),this}}function bc(b,c,d,e){var f=c._milliseconds,g=Ib(c._days),h=Ib(c._months);b.isValid()&&(e=null==e||e,h&&na(b,da(b,"Month")+h*d),g&&ea(b,"Date",da(b,"Date")+g*d),f&&b._d.setTime(b._d.valueOf()+f*d),e&&a.updateOffset(b,g||h))}function cc(a,b){var c=a.diff(b,"days",!0);return c<-6?"sameElse":c<-1?"lastWeek":c<0?"lastDay":c<1?"sameDay":c<2?"nextDay":c<7?"nextWeek":"sameElse"}function dc(b,c){var d=b||zb(),e=Lb(d,this).startOf("day"),f=a.calendarFormat(this,e)||"sameElse",g=c&&(z(c[f])?c[f].call(this,d):c[f]);return this.format(g||this.localeData().calendar(f,this,zb(d)))}function ec(){return new r(this)}function fc(a,b){var c=s(a)?a:zb(a);return!(!this.isValid()||!c.isValid())&&(b=K(f(b)?"millisecond":b),"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf())}function gc(a,b){var c=s(a)?a:zb(a);return!(!this.isValid()||!c.isValid())&&(b=K(f(b)?"millisecond":b),"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf())}function hc(a,b,c,d){return d=d||"()",("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function ic(a,b){var c,d=s(a)?a:zb(a);return!(!this.isValid()||!d.isValid())&&(b=K(b||"millisecond"),"millisecond"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf()))}function jc(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function kc(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function lc(a,b,c){var d,e,f;if(!this.isValid())return NaN;if(d=Lb(a,this),!d.isValid())return NaN;switch(e=6e4*(d.utcOffset()-this.utcOffset()),b=K(b)){case"year":f=mc(this,d)/12;break;case"month":f=mc(this,d);break;case"quarter":f=mc(this,d)/3;break;case"second":f=(this-d)/1e3;break;case"minute":f=(this-d)/6e4;break;case"hour":f=(this-d)/36e5;break;case"day":f=(this-d-e)/864e5;break;case"week":f=(this-d-e)/6048e5;break;default:f=this-d}return c?f:t(f)}function mc(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return b-f<0?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)||0}function nc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function oc(a){if(!this.isValid())return null;var b=a!==!0,c=b?this.clone().utc():this;return c.year()<0||c.year()>9999?S(c,b?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):z(Date.prototype.toISOString)?b?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",S(c,"Z")):S(c,b?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function pc(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var c="["+a+'("]',d=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",e="-MM-DD[T]HH:mm:ss.SSS",f=b+'[")]';return this.format(c+d+e+f)}function qc(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var c=S(this,b);return this.localeData().postformat(c)}function rc(a,b){return this.isValid()&&(s(a)&&a.isValid()||zb(a).isValid())?Yb({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function sc(a){return this.from(zb(),a)}function tc(a,b){return this.isValid()&&(s(a)&&a.isValid()||zb(a).isValid())?Yb({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function uc(a){return this.to(zb(),a)}function vc(a){var b;return void 0===a?this._locale._abbr:(b=cb(a),null!=b&&(this._locale=b),this)}function wc(){return this._locale}function xc(a){switch(a=K(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function yc(a){return a=K(a),void 0===a||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))}function zc(){return this._d.valueOf()-6e4*(this._offset||0)}function Ac(){return Math.floor(this.valueOf()/1e3)}function Bc(){return new Date(this.valueOf())}function Cc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function Dc(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Ec(){return this.isValid()?this.toISOString():null}function Fc(){return o(this)}function Gc(){return k({},n(this))}function Hc(){return n(this).overflow}function Ic(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Jc(a,b){P(0,[a,a.length],0,b)}function Kc(a){return Oc.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Lc(a){return Oc.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Mc(){return ya(this.year(),1,4)}function Nc(){var a=this.localeData()._week;return ya(this.year(),a.dow,a.doy)}function Oc(a,b,c,d,e){var f;return null==a?xa(this,d,e).year:(f=ya(a,d,e),b>f&&(b=f),Pc.call(this,a,b,c,d,e))}function Pc(a,b,c,d,e){var f=wa(a,b,c,d,e),g=ua(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Qc(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Rc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function Sc(a,b){b[pe]=u(1e3*("0."+a))}function Tc(){return this._isUTC?"UTC":""}function Uc(){return this._isUTC?"Coordinated Universal Time":""}function Vc(a){return zb(1e3*a)}function Wc(){return zb.apply(null,arguments).parseZone()}function Xc(a){return a}function Yc(a,b,c,d){var e=cb(),f=l().set(d,b);return e[c](f,a)}function Zc(a,b,c){if(g(a)&&(b=a,a=void 0),a=a||"",null!=b)return Yc(a,b,c,"month");var d,e=[];for(d=0;d<12;d++)e[d]=Yc(a,d,c,"month");return e}function $c(a,b,c,d){"boolean"==typeof a?(g(b)&&(c=b,b=void 0),b=b||""):(b=a,c=b,a=!1,g(b)&&(c=b,b=void 0),b=b||"");var e=cb(),f=a?e._week.dow:0;if(null!=c)return Yc(b,(c+f)%7,d,"day");var h,i=[];for(h=0;h<7;h++)i[h]=Yc(b,(h+f)%7,d,"day");return i}function _c(a,b){return Zc(a,b,"months")}function ad(a,b){return Zc(a,b,"monthsShort")}function bd(a,b,c){return $c(a,b,c,"weekdays")}function cd(a,b,c){return $c(a,b,c,"weekdaysShort")}function dd(a,b,c){return $c(a,b,c,"weekdaysMin")}function ed(){var a=this._data;return this._milliseconds=kf(this._milliseconds),this._days=kf(this._days),this._months=kf(this._months),a.milliseconds=kf(a.milliseconds),a.seconds=kf(a.seconds),a.minutes=kf(a.minutes),a.hours=kf(a.hours),a.months=kf(a.months),a.years=kf(a.years),this}function fd(a,b,c,d){var e=Yb(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function gd(a,b){return fd(this,a,b,1)}function hd(a,b){return fd(this,a,b,-1)}function id(a){return a<0?Math.floor(a):Math.ceil(a)}function jd(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||f<=0&&g<=0&&h<=0||(f+=864e5*id(ld(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=t(f/1e3),i.seconds=a%60,b=t(a/60),i.minutes=b%60,c=t(b/60),i.hours=c%24,g+=t(c/24),e=t(kd(g)),h+=e,g-=id(ld(e)),d=t(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function kd(a){return 4800*a/146097}function ld(a){return 146097*a/4800}function md(a){if(!this.isValid())return NaN;var b,c,d=this._milliseconds;if(a=K(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+kd(b),"month"===a?c:c/12;switch(b=this._days+Math.round(ld(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function nd(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*u(this._months/12):NaN}function od(a){return function(){return this.as(a)}}function pd(){return Yb(this)}function qd(a){return a=K(a),this.isValid()?this[a+"s"]():NaN}function rd(a){return function(){return this.isValid()?this._data[a]:NaN}}function sd(){return t(this.days()/7)}function td(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function ud(a,b,c){var d=Yb(a).abs(),e=Af(d.as("s")),f=Af(d.as("m")),g=Af(d.as("h")),h=Af(d.as("d")),i=Af(d.as("M")),j=Af(d.as("y")),k=e<=Bf.ss&&["s",e]||e<Bf.s&&["ss",e]||f<=1&&["m"]||f<Bf.m&&["mm",f]||g<=1&&["h"]||g<Bf.h&&["hh",g]||h<=1&&["d"]||h<Bf.d&&["dd",h]||i<=1&&["M"]||i<Bf.M&&["MM",i]||j<=1&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,td.apply(null,k)}function vd(a){return void 0===a?Af:"function"==typeof a&&(Af=a,!0)}function wd(a,b){return void 0!==Bf[a]&&(void 0===b?Bf[a]:(Bf[a]=b,"s"===a&&(Bf.ss=b-1),!0))}function xd(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData(),c=ud(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function yd(a){return(a>0)-(a<0)||+a}function zd(){if(!this.isValid())return this.localeData().invalidDate();var a,b,c,d=Cf(this._milliseconds)/1e3,e=Cf(this._days),f=Cf(this._months);a=t(d/60),b=t(a/60),d%=60,a%=60,c=t(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d?d.toFixed(3).replace(/\.?0+$/,""):"",m=this.asSeconds();if(!m)return"P0D";var n=m<0?"-":"",o=yd(this._months)!==yd(m)?"-":"",p=yd(this._days)!==yd(m)?"-":"",q=yd(this._milliseconds)!==yd(m)?"-":"";return n+"P"+(g?o+g+"Y":"")+(h?o+h+"M":"")+(i?p+i+"D":"")+(j||k||l?"T":"")+(j?q+j+"H":"")+(k?q+k+"M":"")+(l?q+l+"S":"")}var Ad,Bd;Bd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var Cd=a.momentProperties=[],Dd=!1,Ed={};a.suppressDeprecationWarnings=!1,a.deprecationHandler=null;var Fd;Fd=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)j(a,b)&&c.push(b);return c};var Gd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Hd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Id="Invalid date",Jd="%d",Kd=/\d{1,2}/,Ld={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Md={},Nd={},Od=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Pd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Qd={},Rd={},Sd=/\d/,Td=/\d\d/,Ud=/\d{3}/,Vd=/\d{4}/,Wd=/[+-]?\d{6}/,Xd=/\d\d?/,Yd=/\d\d\d\d?/,Zd=/\d\d\d\d\d\d?/,$d=/\d{1,3}/,_d=/\d{1,4}/,ae=/[+-]?\d{1,6}/,be=/\d+/,ce=/[+-]?\d+/,de=/Z|[+-]\d\d:?\d\d/gi,ee=/Z|[+-]\d\d(?::?\d\d)?/gi,fe=/[+-]?\d+(\.\d{1,3})?/,ge=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,he={},ie={},je=0,ke=1,le=2,me=3,ne=4,oe=5,pe=6,qe=7,re=8;P("Y",0,0,function(){var a=this.year();return a<=9999?""+a:"+"+a}),P(0,["YY",2],0,function(){return this.year()%100}),P(0,["YYYY",4],0,"year"),P(0,["YYYYY",5],0,"year"),P(0,["YYYYYY",6,!0],0,"year"),J("year","y"),
M("year",1),U("Y",ce),U("YY",Xd,Td),U("YYYY",_d,Vd),U("YYYYY",ae,Wd),U("YYYYYY",ae,Wd),Y(["YYYYY","YYYYYY"],je),Y("YYYY",function(b,c){c[je]=2===b.length?a.parseTwoDigitYear(b):u(b)}),Y("YY",function(b,c){c[je]=a.parseTwoDigitYear(b)}),Y("Y",function(a,b){b[je]=parseInt(a,10)}),a.parseTwoDigitYear=function(a){return u(a)+(u(a)>68?1900:2e3)};var se,te=ca("FullYear",!0);se=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1},P("M",["MM",2],"Mo",function(){return this.month()+1}),P("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),P("MMMM",0,0,function(a){return this.localeData().months(this,a)}),J("month","M"),M("month",8),U("M",Xd),U("MM",Xd,Td),U("MMM",function(a,b){return b.monthsShortRegex(a)}),U("MMMM",function(a,b){return b.monthsRegex(a)}),Y(["M","MM"],function(a,b){b[ke]=u(a)-1}),Y(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[ke]=e:n(c).invalidMonth=a});var ue=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ve="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),we="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),xe=ge,ye=ge;P("w",["ww",2],"wo","week"),P("W",["WW",2],"Wo","isoWeek"),J("week","w"),J("isoWeek","W"),M("week",5),M("isoWeek",5),U("w",Xd),U("ww",Xd,Td),U("W",Xd),U("WW",Xd,Td),Z(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=u(a)});var ze={dow:0,doy:6};P("d",0,"do","day"),P("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),P("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),P("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),P("e",0,0,"weekday"),P("E",0,0,"isoWeekday"),J("day","d"),J("weekday","e"),J("isoWeekday","E"),M("day",11),M("weekday",11),M("isoWeekday",11),U("d",Xd),U("e",Xd),U("E",Xd),U("dd",function(a,b){return b.weekdaysMinRegex(a)}),U("ddd",function(a,b){return b.weekdaysShortRegex(a)}),U("dddd",function(a,b){return b.weekdaysRegex(a)}),Z(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:n(c).invalidWeekday=a}),Z(["d","e","E"],function(a,b,c,d){b[d]=u(a)});var Ae="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Be="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ce="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),De=ge,Ee=ge,Fe=ge;P("H",["HH",2],0,"hour"),P("h",["hh",2],0,Sa),P("k",["kk",2],0,Ta),P("hmm",0,0,function(){return""+Sa.apply(this)+O(this.minutes(),2)}),P("hmmss",0,0,function(){return""+Sa.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)}),P("Hmm",0,0,function(){return""+this.hours()+O(this.minutes(),2)}),P("Hmmss",0,0,function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)}),Ua("a",!0),Ua("A",!1),J("hour","h"),M("hour",13),U("a",Va),U("A",Va),U("H",Xd),U("h",Xd),U("k",Xd),U("HH",Xd,Td),U("hh",Xd,Td),U("kk",Xd,Td),U("hmm",Yd),U("hmmss",Zd),U("Hmm",Yd),U("Hmmss",Zd),Y(["H","HH"],me),Y(["k","kk"],function(a,b,c){var d=u(a);b[me]=24===d?0:d}),Y(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),Y(["h","hh"],function(a,b,c){b[me]=u(a),n(c).bigHour=!0}),Y("hmm",function(a,b,c){var d=a.length-2;b[me]=u(a.substr(0,d)),b[ne]=u(a.substr(d)),n(c).bigHour=!0}),Y("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[me]=u(a.substr(0,d)),b[ne]=u(a.substr(d,2)),b[oe]=u(a.substr(e)),n(c).bigHour=!0}),Y("Hmm",function(a,b,c){var d=a.length-2;b[me]=u(a.substr(0,d)),b[ne]=u(a.substr(d))}),Y("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[me]=u(a.substr(0,d)),b[ne]=u(a.substr(d,2)),b[oe]=u(a.substr(e))});var Ge,He=/[ap]\.?m?\.?/i,Ie=ca("Hours",!0),Je={calendar:Gd,longDateFormat:Hd,invalidDate:Id,ordinal:Jd,dayOfMonthOrdinalParse:Kd,relativeTime:Ld,months:ve,monthsShort:we,week:ze,weekdays:Ae,weekdaysMin:Ce,weekdaysShort:Be,meridiemParse:He},Ke={},Le={},Me=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ne=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Oe=/Z|[+-]\d\d(?::?\d\d)?/,Pe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Qe=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Re=/^\/?Date\((\-?\d+)/i,Se=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Te={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};a.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),a.ISO_8601=function(){},a.RFC_2822=function(){};var Ue=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=zb.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:p()}),Ve=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=zb.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:p()}),We=function(){return Date.now?Date.now():+new Date},Xe=["year","quarter","month","week","day","hour","minute","second","millisecond"];Jb("Z",":"),Jb("ZZ",""),U("Z",ee),U("ZZ",ee),Y(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Kb(ee,a)});var Ye=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Ze=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,$e=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Yb.fn=Gb.prototype,Yb.invalid=Fb;var _e=ac(1,"add"),af=ac(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var bf=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});P(0,["gg",2],0,function(){return this.weekYear()%100}),P(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Jc("gggg","weekYear"),Jc("ggggg","weekYear"),Jc("GGGG","isoWeekYear"),Jc("GGGGG","isoWeekYear"),J("weekYear","gg"),J("isoWeekYear","GG"),M("weekYear",1),M("isoWeekYear",1),U("G",ce),U("g",ce),U("GG",Xd,Td),U("gg",Xd,Td),U("GGGG",_d,Vd),U("gggg",_d,Vd),U("GGGGG",ae,Wd),U("ggggg",ae,Wd),Z(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=u(a)}),Z(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),P("Q",0,"Qo","quarter"),J("quarter","Q"),M("quarter",7),U("Q",Sd),Y("Q",function(a,b){b[ke]=3*(u(a)-1)}),P("D",["DD",2],"Do","date"),J("date","D"),M("date",9),U("D",Xd),U("DD",Xd,Td),U("Do",function(a,b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient}),Y(["D","DD"],le),Y("Do",function(a,b){b[le]=u(a.match(Xd)[0])});var cf=ca("Date",!0);P("DDD",["DDDD",3],"DDDo","dayOfYear"),J("dayOfYear","DDD"),M("dayOfYear",4),U("DDD",$d),U("DDDD",Ud),Y(["DDD","DDDD"],function(a,b,c){c._dayOfYear=u(a)}),P("m",["mm",2],0,"minute"),J("minute","m"),M("minute",14),U("m",Xd),U("mm",Xd,Td),Y(["m","mm"],ne);var df=ca("Minutes",!1);P("s",["ss",2],0,"second"),J("second","s"),M("second",15),U("s",Xd),U("ss",Xd,Td),Y(["s","ss"],oe);var ef=ca("Seconds",!1);P("S",0,0,function(){return~~(this.millisecond()/100)}),P(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),P(0,["SSS",3],0,"millisecond"),P(0,["SSSS",4],0,function(){return 10*this.millisecond()}),P(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),P(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),P(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),P(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),P(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),J("millisecond","ms"),M("millisecond",16),U("S",$d,Sd),U("SS",$d,Td),U("SSS",$d,Ud);var ff;for(ff="SSSS";ff.length<=9;ff+="S")U(ff,be);for(ff="S";ff.length<=9;ff+="S")Y(ff,Sc);var gf=ca("Milliseconds",!1);P("z",0,0,"zoneAbbr"),P("zz",0,0,"zoneName");var hf=r.prototype;hf.add=_e,hf.calendar=dc,hf.clone=ec,hf.diff=lc,hf.endOf=yc,hf.format=qc,hf.from=rc,hf.fromNow=sc,hf.to=tc,hf.toNow=uc,hf.get=fa,hf.invalidAt=Hc,hf.isAfter=fc,hf.isBefore=gc,hf.isBetween=hc,hf.isSame=ic,hf.isSameOrAfter=jc,hf.isSameOrBefore=kc,hf.isValid=Fc,hf.lang=bf,hf.locale=vc,hf.localeData=wc,hf.max=Ve,hf.min=Ue,hf.parsingFlags=Gc,hf.set=ga,hf.startOf=xc,hf.subtract=af,hf.toArray=Cc,hf.toObject=Dc,hf.toDate=Bc,hf.toISOString=oc,hf.inspect=pc,hf.toJSON=Ec,hf.toString=nc,hf.unix=Ac,hf.valueOf=zc,hf.creationData=Ic,hf.year=te,hf.isLeapYear=ba,hf.weekYear=Kc,hf.isoWeekYear=Lc,hf.quarter=hf.quarters=Qc,hf.month=oa,hf.daysInMonth=pa,hf.week=hf.weeks=Ca,hf.isoWeek=hf.isoWeeks=Da,hf.weeksInYear=Nc,hf.isoWeeksInYear=Mc,hf.date=cf,hf.day=hf.days=La,hf.weekday=Ma,hf.isoWeekday=Na,hf.dayOfYear=Rc,hf.hour=hf.hours=Ie,hf.minute=hf.minutes=df,hf.second=hf.seconds=ef,hf.millisecond=hf.milliseconds=gf,hf.utcOffset=Nb,hf.utc=Pb,hf.local=Qb,hf.parseZone=Rb,hf.hasAlignedHourOffset=Sb,hf.isDST=Tb,hf.isLocal=Vb,hf.isUtcOffset=Wb,hf.isUtc=Xb,hf.isUTC=Xb,hf.zoneAbbr=Tc,hf.zoneName=Uc,hf.dates=x("dates accessor is deprecated. Use date instead.",cf),hf.months=x("months accessor is deprecated. Use month instead",oa),hf.years=x("years accessor is deprecated. Use year instead",te),hf.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ob),hf.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ub);var jf=C.prototype;jf.calendar=D,jf.longDateFormat=E,jf.invalidDate=F,jf.ordinal=G,jf.preparse=Xc,jf.postformat=Xc,jf.relativeTime=H,jf.pastFuture=I,jf.set=A,jf.months=ja,jf.monthsShort=ka,jf.monthsParse=ma,jf.monthsRegex=ra,jf.monthsShortRegex=qa,jf.week=za,jf.firstDayOfYear=Ba,jf.firstDayOfWeek=Aa,jf.weekdays=Ga,jf.weekdaysMin=Ia,jf.weekdaysShort=Ha,jf.weekdaysParse=Ka,jf.weekdaysRegex=Oa,jf.weekdaysShortRegex=Pa,jf.weekdaysMinRegex=Qa,jf.isPM=Wa,jf.meridiem=Xa,_a("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===u(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=x("moment.lang is deprecated. Use moment.locale instead.",_a),a.langData=x("moment.langData is deprecated. Use moment.localeData instead.",cb);var kf=Math.abs,lf=od("ms"),mf=od("s"),nf=od("m"),of=od("h"),pf=od("d"),qf=od("w"),rf=od("M"),sf=od("y"),tf=rd("milliseconds"),uf=rd("seconds"),vf=rd("minutes"),wf=rd("hours"),xf=rd("days"),yf=rd("months"),zf=rd("years"),Af=Math.round,Bf={ss:44,s:45,m:45,h:22,d:26,M:11},Cf=Math.abs,Df=Gb.prototype;return Df.isValid=Eb,Df.abs=ed,Df.add=gd,Df.subtract=hd,Df.as=md,Df.asMilliseconds=lf,Df.asSeconds=mf,Df.asMinutes=nf,Df.asHours=of,Df.asDays=pf,Df.asWeeks=qf,Df.asMonths=rf,Df.asYears=sf,Df.valueOf=nd,Df._bubble=jd,Df.clone=pd,Df.get=qd,Df.milliseconds=tf,Df.seconds=uf,Df.minutes=vf,Df.hours=wf,Df.days=xf,Df.weeks=sd,Df.months=yf,Df.years=zf,Df.humanize=xd,Df.toISOString=zd,Df.toString=zd,Df.toJSON=zd,Df.locale=vc,Df.localeData=wc,Df.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",zd),Df.lang=bf,P("X",0,0,"unix"),P("x",0,0,"valueOf"),U("x",ce),U("X",fe),Y("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),Y("x",function(a,b,c){c._d=new Date(u(a))}),a.version="2.22.2",b(zb),a.fn=hf,a.min=Bb,a.max=Cb,a.now=We,a.utc=l,a.unix=Vc,a.months=_c,a.isDate=h,a.locale=_a,a.invalid=p,a.duration=Yb,a.isMoment=s,a.weekdays=bd,a.parseZone=Wc,a.localeData=cb,a.isDuration=Hb,a.monthsShort=ad,a.weekdaysMin=dd,a.defineLocale=ab,a.updateLocale=bb,a.locales=db,a.weekdaysShort=cd,a.normalizeUnits=K,a.relativeTimeRounding=vd,a.relativeTimeThreshold=wd,a.calendarFormat=cc,a.prototype=hf,a.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},a}),!function(a,b){"use strict";"object"==typeof module&&module.exports?module.exports=b(require("moment")):"function"==typeof define&&define.amd?define(["moment"],b):b(a.moment)}(this,function(a){"use strict";function b(a){return 96<a?a-87:64<a?a-29:a-48}function c(a){var c=0,d=a.split("."),e=d[0],f=d[1]||"",g=1,h=0,i=1;for(45===a.charCodeAt(0)&&(i=-(c=1));c<e.length;c++)h=60*h+b(e.charCodeAt(c));for(c=0;c<f.length;c++)g/=60,h+=b(f.charCodeAt(c))*g;return h*i}function d(a){for(var b=0;b<a.length;b++)a[b]=c(a[b])}function e(a,b){var c,d=[];for(c=0;c<b.length;c++)d[c]=a[b[c]];return d}function f(a){var b=a.split("|"),c=b[2].split(" "),f=b[3].split(""),g=b[4].split(" ");return d(c),d(f),d(g),function(a,b){for(var c=0;c<b;c++)a[c]=Math.round((a[c-1]||0)+6e4*a[c]);a[b-1]=1/0}(g,f.length),{name:b[0],abbrs:e(b[1].split(" "),f),offsets:e(c,f),untils:g,population:0|b[5]}}function g(a){a&&this._set(f(a))}function h(a){var b=a.toTimeString(),c=b.match(/\([a-z ]+\)/i);"GMT"===(c=c&&c[0]?(c=c[0].match(/[A-Z]/g))?c.join(""):void 0:(c=b.match(/[A-Z]{3,5}/g))?c[0]:void 0)&&(c=void 0),this.at=+a,this.abbr=c,this.offset=a.getTimezoneOffset()}function i(a){this.zone=a,this.offsetScore=0,this.abbrScore=0}function j(a,b){for(var c,d;d=6e4*((b.at-a.at)/12e4|0);)(c=new h(new Date(a.at+d))).offset===a.offset?a=c:b=c;return a}function k(a,b){return a.offsetScore!==b.offsetScore?a.offsetScore-b.offsetScore:a.abbrScore!==b.abbrScore?a.abbrScore-b.abbrScore:b.zone.population-a.zone.population}function l(a,b){var c,e;for(d(b),c=0;c<b.length;c++)e=b[c],A[e]=A[e]||{},A[e][a]=!0}function m(){try{var a=Intl.DateTimeFormat().resolvedOptions().timeZone;if(a&&3<a.length){var b=z[n(a)];if(b)return b;t("Moment Timezone found "+a+" from the Intl api, but did not have that data loaded.")}}catch(a){}var c,d,e,f=function(){var a,b,c,d=(new Date).getFullYear()-2,e=new h(new Date(d,0,1)),f=[e];for(c=1;c<48;c++)(b=new h(new Date(d,c,1))).offset!==e.offset&&(a=j(e,b),f.push(a),f.push(new h(new Date(a.at+6e4)))),e=b;for(c=0;c<4;c++)f.push(new h(new Date(d+c,0,1))),f.push(new h(new Date(d+c,6,1)));return f}(),g=f.length,l=function(a){var b,c,d,e=a.length,f={},g=[];for(b=0;b<e;b++)for(c in d=A[a[b].offset]||{})d.hasOwnProperty(c)&&(f[c]=!0);for(b in f)f.hasOwnProperty(b)&&g.push(z[b]);return g}(f),m=[];for(d=0;d<l.length;d++){for(c=new i(p(l[d]),g),e=0;e<g;e++)c.scoreOffsetAt(f[e]);m.push(c)}return m.sort(k),0<m.length?m[0].zone.name:void 0}function n(a){return(a||"").toLowerCase().replace(/\//g,"_")}function o(a){var b,c,d,e;for("string"==typeof a&&(a=[a]),b=0;b<a.length;b++)e=n(c=(d=a[b].split("|"))[0]),x[e]=a[b],z[e]=c,l(e,d[2].split(" "))}function p(a,b){a=n(a);var c,d=x[a];return d instanceof g?d:"string"==typeof d?(d=new g(d),x[a]=d):y[a]&&b!==p&&(c=p(y[a],p))?((d=x[a]=new g)._set(c),d.name=z[a],d):null}function q(a){var b,c,d,e;for("string"==typeof a&&(a=[a]),b=0;b<a.length;b++)d=n((c=a[b].split("|"))[0]),e=n(c[1]),y[d]=e,z[d]=c[0],y[e]=d,z[e]=c[1]}function r(a){o(a.zones),q(a.links),u.dataVersion=a.version}function s(a){var b="X"===a._f||"x"===a._f;return!(!a._a||void 0!==a._tzm||b)}function t(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a)}function u(b){var c=Array.prototype.slice.call(arguments,0,-1),d=arguments[arguments.length-1],e=p(d),f=a.utc.apply(null,c);return e&&!a.isMoment(b)&&s(f)&&f.add(e.parse(f),"minutes"),f.tz(d),f}function v(a){return function(){return this._z?this._z.abbr(this):a.call(this)}}var w,x={},y={},z={},A={};a&&"string"==typeof a.version||t("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var B=a.version.split("."),C=+B[0],D=+B[1];(C<2||2===C&&D<6)&&t("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+a.version+". See momentjs.com"),g.prototype={_set:function(a){this.name=a.name,this.abbrs=a.abbrs,this.untils=a.untils,this.offsets=a.offsets,this.population=a.population},_index:function(a){var b,c=+a,d=this.untils;for(b=0;b<d.length;b++)if(c<d[b])return b},parse:function(a){var b,c,d,e,f=+a,g=this.offsets,h=this.untils,i=h.length-1;for(e=0;e<i;e++)if(b=g[e],c=g[e+1],d=g[e?e-1:e],b<c&&u.moveAmbiguousForward?b=c:d<b&&u.moveInvalidForward&&(b=d),f<h[e]-6e4*b)return g[e];return g[i]},abbr:function(a){return this.abbrs[this._index(a)]},offset:function(a){return t("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(a)]},utcOffset:function(a){return this.offsets[this._index(a)]}},i.prototype.scoreOffsetAt=function(a){this.offsetScore+=Math.abs(this.zone.utcOffset(a.at)-a.offset),this.zone.abbr(a.at).replace(/[^A-Z]/g,"")!==a.abbr&&this.abbrScore++},u.version="0.5.23",u.dataVersion="",u._zones=x,u._links=y,u._names=z,u.add=o,u.link=q,u.load=r,u.zone=p,u.zoneExists=function a(b){return a.didShowError||(a.didShowError=!0,t("moment.tz.zoneExists('"+b+"') has been deprecated in favor of !moment.tz.zone('"+b+"')")),!!p(b)},u.guess=function(a){return w&&!a||(w=m()),w},u.names=function(){var a,b=[];for(a in z)z.hasOwnProperty(a)&&(x[a]||x[y[a]])&&z[a]&&b.push(z[a]);return b.sort()},u.Zone=g,u.unpack=f,u.unpackBase60=c,u.needsOffset=s,u.moveInvalidForward=!0,u.moveAmbiguousForward=!1;var E,F=a.fn;a.tz=u,a.defaultZone=null,a.updateOffset=function(b,c){var d,e=a.defaultZone;void 0===b._z&&(e&&s(b)&&!b._isUTC&&(b._d=a.utc(b._a)._d,b.utc().add(e.parse(b),"minutes")),b._z=e),b._z&&(d=b._z.utcOffset(b),Math.abs(d)<16&&(d/=60),void 0!==b.utcOffset?b.utcOffset(-d,c):b.zone(d,c))},F.tz=function(b,c){if(b){if("string"!=typeof b)throw new Error("Time zone name must be a string, got "+b+" ["+typeof b+"]");return this._z=p(b),this._z?a.updateOffset(this,c):t("Moment Timezone has no data for "+b+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},F.zoneName=v(F.zoneName),F.zoneAbbr=v(F.zoneAbbr),F.utc=(E=F.utc,function(){return this._z=null,E.apply(this,arguments)}),a.tz.setDefault=function(b){return(C<2||2===C&&D<9)&&t("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+a.version+"."),a.defaultZone=b?p(b):null,a};var G=a.momentProperties;return"[object Array]"===Object.prototype.toString.call(G)?(G.push("_z"),G.push("_a")):G&&(G._z=null),r({version:"2018g",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Nairobi|EAT|-30|0||47e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Maputo|CAT|-20|0||26e5","Africa/Cairo|EET EEST|-20 -30|01010|1M2m0 gL0 e10 mn0|15e6","Africa/Casablanca|+00 +01|0 -10|0101010101010101010101010101|1H3C0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Khartoum|EAT CAT|-30 -20|01|1Usl0|51e5","Africa/Sao_Tome|GMT WAT|0 -10|01|1UQN0","Africa/Tripoli|EET CET CEST|-20 -10 -20|0120|1IlA0 TA0 1o00|11e5","Africa/Windhoek|CAT WAT|-20 -10|0101010101010|1GQo0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|32e4","America/Adak|HST HDT|a0 90|01010101010101010101010|1GIc0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1GIb0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Araguaina|-03 -02|30 20|010|1IdD0 Lz0|14e4","America/Fortaleza|-03|30|0||34e5","America/Asuncion|-03 -04|30 40|01010101010101010101010|1GTf0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0|28e5","America/Panama|EST|50|0||15e5","America/Mexico_City|CST CDT|60 50|01010101010101010101010|1GQw0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|20e6","America/Bahia|-02 -03|20 30|01|1GCq0|27e5","America/Managua|CST|60|0||22e5","America/La_Paz|-04|40|0||19e5","America/Lima|-05|50|0||11e6","America/Denver|MST MDT|70 60|01010101010101010101010|1GI90 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|-03 -04|30 40|01010101010101010101010|1GCr0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0 1HB0 FX0 1HB0 IL0 1HB0 FX0 1HB0|77e4","America/Cancun|CST CDT EST|60 50 50|01010102|1GQw0 1nX0 14p0 1lb0 14p0 1lb0 Dd0|63e4","America/Caracas|-0430 -04|4u 40|01|1QMT0|29e5","America/Chicago|CST CDT|60 50|01010101010101010101010|1GI80 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1GQx0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|81e4","America/Phoenix|MST|70|0||42e5","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1GIa0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|15e6","America/New_York|EST EDT|50 40|01010101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|21e6","America/Rio_Branco|-04 -05|40 50|01|1KLE0|31e4","America/Fort_Nelson|PST PDT MST|80 70 70|01010102|1GIa0 1zb0 Op0 1zb0 Op0 1zb0 Op0|39e2","America/Halifax|AST ADT|40 30|01010101010101010101010|1GI60 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|39e4","America/Godthab|-03 -02|30 20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|17e3","America/Grand_Turk|EST EDT AST|50 40 40|0101010121010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 5Ip0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|37e2","America/Havana|CST CDT|50 40|01010101010101010101010|1GQt0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0|21e5","America/Metlakatla|PST AKST AKDT|80 90 80|0121212121212121|1PAa0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|14e2","America/Miquelon|-03 -02|30 20|01010101010101010101010|1GI50 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|61e2","America/Montevideo|-02 -03|20 30|01010101|1GI40 1o10 11z0 1o10 11z0 1o10 11z0|17e5","America/Noronha|-02|20|0||30e2","America/Port-au-Prince|EST EDT|50 40|010101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 3iN0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|23e5","Antarctica/Palmer|-03 -04|30 40|010101010|1H3D0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0|40","America/Santiago|-03 -04|30 40|010101010101010101010|1H3D0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|62e5","America/Sao_Paulo|-02 -03|20 30|01010101010101010101010|1GCq0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0 1HB0 FX0 1HB0 IL0 1HB0 FX0 1HB0|20e6","Atlantic/Azores|-01 +00|10 0|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|25e4","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1GI5u 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|+11 +08|-b0 -80|0101|1GAF0 blz0 3m10|10","Antarctica/Davis|+05 +07|-50 -70|01|1GAI0|70","Pacific/Port_Moresby|+10|-a0|0||25e4","Pacific/Guadalcanal|+11|-b0|0||11e4","Asia/Tashkent|+05|-50|0||23e5","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1GQe0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|14e5","Asia/Baghdad|+03|-30|0||66e5","Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|40","Asia/Dhaka|+06|-60|0||16e6","Asia/Amman|EET EEST|-20 -30|010101010101010101010|1GPy0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00|25e5","Asia/Kamchatka|+12|-c0|0||18e4","Asia/Baku|+04 +05|-40 -50|010101010|1GNA0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|27e5","Asia/Bangkok|+07|-70|0||15e6","Asia/Barnaul|+07 +06|-70 -60|010|1N7v0 3rd0","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1GNy0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0|22e5","Asia/Kuala_Lumpur|+08|-80|0||71e5","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+10 +08 +09|-a0 -80 -90|012|1N7s0 3re0|33e4","Asia/Ulaanbaatar|+08 +09|-80 -90|01010|1O8G0 1cJ0 1cP0 1cJ0|12e5","Asia/Shanghai|CST|-80|0||23e6","Asia/Colombo|+0530|-5u|0||22e5","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1GPy0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|26e5","Asia/Dili|+09|-90|0||19e4","Asia/Dubai|+04|-40|0||39e5","Asia/Famagusta|EET EEST +03|-20 -30 -30|0101010101201010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 15U0 2Ks0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1GPy0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1qL0 WN0 1qL0 WN0 1qL0|18e5","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Hovd|+07 +08|-70 -80|01010|1O8H0 1cJ0 1cP0 1cJ0|81e3","Asia/Irkutsk|+09 +08|-90 -80|01|1N7t0|60e4","Europe/Istanbul|EET EEST +03|-20 -30 -30|01010101012|1GNB0 1qM0 11A0 1o00 1200 1nA0 11A0 1tA0 U00 15w0|13e6","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1GPA0 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Karachi|PKT|-50|0||24e6","Asia/Kathmandu|+0545|-5J|0||12e5","Asia/Yakutsk|+10 +09|-a0 -90|01|1N7s0|28e4","Asia/Krasnoyarsk|+08 +07|-80 -70|01|1N7u0|10e5","Asia/Magadan|+12 +10 +11|-c0 -a0 -b0|012|1N7q0 3Cq0|95e3","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PST|-80|0||24e6","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|35e5","Asia/Novosibirsk|+07 +06|-70 -60|010|1N7v0 4eN0|15e5","Asia/Omsk|+07 +06|-70 -60|01|1N7v0|12e5","Asia/Pyongyang|KST KST|-90 -8u|010|1P4D0 6BA0|29e5","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Sakhalin|+11 +10|-b0 -a0|010|1N7r0 3rd0|58e4","Asia/Seoul|KST|-90|0||23e6","Asia/Srednekolymsk|+12 +11|-c0 -b0|01|1N7q0|35e2","Asia/Tehran|+0330 +0430|-3u -4u|01010101010101010101010|1GLUu 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0|14e6","Asia/Tokyo|JST|-90|0||38e6","Asia/Tomsk|+07 +06|-70 -60|010|1N7v0 3Qp0|10e5","Asia/Vladivostok|+11 +10|-b0 -a0|01|1N7r0|60e4","Asia/Yekaterinburg|+06 +05|-60 -50|01|1N7w0|14e5","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|27e5","Atlantic/Cape_Verde|-01|10|0||50e4","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1GQg0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|40e5","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1GQgu 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845|-8J|0||368","Australia/Lord_Howe|+11 +1030|-b0 -au|01010101010101010101010|1GQf0 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|-05 -06|50 60|010101010101010101010|1H3D0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|12e5","Etc/GMT-1|+01|-10|0|","Pacific/Fakaofo|+13|-d0|0||483","Pacific/Kiritimati|+14|-e0|0||51e2","Etc/GMT-2|+02|-20|0|","Pacific/Tahiti|-10|a0|0||18e4","Pacific/Niue|-11|b0|0||12e2","Etc/GMT+12|-12|c0|0|","Pacific/Galapagos|-06|60|0||25e3","Etc/GMT+7|-07|70|0|","Pacific/Pitcairn|-08|80|0||56","Pacific/Gambier|-09|90|0||125","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Ulyanovsk|+04 +03|-40 -30|010|1N7y0 3rd0|13e5","Europe/London|GMT BST|0 -10|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1GNA0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|67e4","Europe/Kaliningrad|+03 EET|-30 -20|01|1N7z0|44e4","Europe/Kirov|+04 +03|-40 -30|01|1N7y0|48e4","Europe/Moscow|MSK MSK|-40 -30|01|1N7y0|16e6","Europe/Saratov|+04 +03|-40 -30|010|1N7y0 5810","Europe/Simferopol|EET EEST MSK MSK|-20 -30 -40 -30|0101023|1GNB0 1qM0 11A0 1o00 11z0 1nW0|33e4","Europe/Volgograd|+04 +03|-40 -30|010|1N7y0 9Jd0|10e5","Pacific/Honolulu|HST|a0|0||37e4","MET|MET MEST|-10 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0","Pacific/Chatham|+1345 +1245|-dJ -cJ|01010101010101010101010|1GQe0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|600","Pacific/Apia|+14 +13|-e0 -d0|01010101010101010101010|1GQe0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|37e3","Pacific/Bougainville|+10 +11|-a0 -b0|01|1NwE0|18e4","Pacific/Fiji|+13 +12|-d0 -c0|01010101010101010101010|1Goe0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0 uM0 1SM0 uM0 1VA0 s00 1VA0|88e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Norfolk|+1130 +11|-bu -b0|01|1PoCu|25e4","Pacific/Tongatapu|+13 +14|-d0 -e0|010|1S4d0 s00|75e3"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Maputo|Africa/Blantyre","Africa/Maputo|Africa/Bujumbura","Africa/Maputo|Africa/Gaborone","Africa/Maputo|Africa/Harare","Africa/Maputo|Africa/Kigali","Africa/Maputo|Africa/Lubumbashi","Africa/Maputo|Africa/Lusaka","Africa/Nairobi|Africa/Addis_Ababa","Africa/Nairobi|Africa/Asmara","Africa/Nairobi|Africa/Asmera","Africa/Nairobi|Africa/Dar_es_Salaam","Africa/Nairobi|Africa/Djibouti","Africa/Nairobi|Africa/Juba","Africa/Nairobi|Africa/Kampala","Africa/Nairobi|Africa/Mogadishu","Africa/Nairobi|Indian/Antananarivo","Africa/Nairobi|Indian/Comoro","Africa/Nairobi|Indian/Mayotte","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Campo_Grande|America/Cuiaba","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Beulah","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Ojinaga","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Argentina/Buenos_Aires","America/Fortaleza|America/Argentina/Catamarca","America/Fortaleza|America/Argentina/ComodRivadavia","America/Fortaleza|America/Argentina/Cordoba","America/Fortaleza|America/Argentina/Jujuy","America/Fortaleza|America/Argentina/La_Rioja","America/Fortaleza|America/Argentina/Mendoza","America/Fortaleza|America/Argentina/Rio_Gallegos","America/Fortaleza|America/Argentina/Salta","America/Fortaleza|America/Argentina/San_Juan","America/Fortaleza|America/Argentina/San_Luis","America/Fortaleza|America/Argentina/Tucuman","America/Fortaleza|America/Argentina/Ushuaia","America/Fortaleza|America/Belem","America/Fortaleza|America/Buenos_Aires","America/Fortaleza|America/Catamarca","America/Fortaleza|America/Cayenne","America/Fortaleza|America/Cordoba","America/Fortaleza|America/Jujuy","America/Fortaleza|America/Maceio","America/Fortaleza|America/Mendoza","America/Fortaleza|America/Paramaribo","America/Fortaleza|America/Recife","America/Fortaleza|America/Rosario","America/Fortaleza|America/Santarem","America/Fortaleza|Antarctica/Rothera","America/Fortaleza|Atlantic/Stanley","America/Fortaleza|Etc/GMT+3","America/Halifax|America/Glace_Bay","America/Halifax|America/Goose_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/La_Paz|America/Boa_Vista","America/La_Paz|America/Guyana","America/La_Paz|America/Manaus","America/La_Paz|America/Porto_Velho","America/La_Paz|Brazil/West","America/La_Paz|Etc/GMT+4","America/Lima|America/Bogota","America/Lima|America/Guayaquil","America/Lima|Etc/GMT+5","America/Los_Angeles|America/Dawson","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|America/Whitehorse","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Canada/Yukon","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Los_Angeles|US/Pacific-New","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/Saskatchewan","America/Mexico_City|America/Bahia_Banderas","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Atlantic/South_Georgia","America/Noronha|Brazil/DeNoronha","America/Noronha|Etc/GMT+2","America/Panama|America/Atikokan","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Rio_Branco|America/Eirunepe","America/Rio_Branco|America/Porto_Acre","America/Rio_Branco|Brazil/Acre","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","Antarctica/Palmer|America/Punta_Arenas","Asia/Baghdad|Antarctica/Syowa","Asia/Baghdad|Asia/Aden","Asia/Baghdad|Asia/Bahrain","Asia/Baghdad|Asia/Kuwait","Asia/Baghdad|Asia/Qatar","Asia/Baghdad|Asia/Riyadh","Asia/Baghdad|Etc/GMT-3","Asia/Baghdad|Europe/Minsk","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Novokuznetsk","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Dhaka|Antarctica/Vostok","Asia/Dhaka|Asia/Almaty","Asia/Dhaka|Asia/Bishkek","Asia/Dhaka|Asia/Dacca","Asia/Dhaka|Asia/Kashgar","Asia/Dhaka|Asia/Qyzylorda","Asia/Dhaka|Asia/Thimbu","Asia/Dhaka|Asia/Thimphu","Asia/Dhaka|Asia/Urumqi","Asia/Dhaka|Etc/GMT-6","Asia/Dhaka|Indian/Chagos","Asia/Dili|Etc/GMT-9","Asia/Dili|Pacific/Palau","Asia/Dubai|Asia/Muscat","Asia/Dubai|Asia/Tbilisi","Asia/Dubai|Asia/Yerevan","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Europe/Samara","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Mauritius","Asia/Dubai|Indian/Reunion","Asia/Gaza|Asia/Hebron","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kamchatka|Asia/Anadyr","Asia/Kamchatka|Etc/GMT-12","Asia/Kamchatka|Kwajalein","Asia/Kamchatka|Pacific/Funafuti","Asia/Kamchatka|Pacific/Kwajalein","Asia/Kamchatka|Pacific/Majuro","Asia/Kamchatka|Pacific/Nauru","Asia/Kamchatka|Pacific/Tarawa","Asia/Kamchatka|Pacific/Wake","Asia/Kamchatka|Pacific/Wallis","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Brunei","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Kuala_Lumpur|Asia/Singapore","Asia/Kuala_Lumpur|Etc/GMT-8","Asia/Kuala_Lumpur|Singapore","Asia/Makassar|Asia/Ujung_Pandang","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Tashkent|Antarctica/Mawson","Asia/Tashkent|Asia/Aqtau","Asia/Tashkent|Asia/Aqtobe","Asia/Tashkent|Asia/Ashgabat","Asia/Tashkent|Asia/Ashkhabad","Asia/Tashkent|Asia/Atyrau","Asia/Tashkent|Asia/Dushanbe","Asia/Tashkent|Asia/Oral","Asia/Tashkent|Asia/Samarkand","Asia/Tashkent|Etc/GMT-5","Asia/Tashkent|Indian/Kerguelen","Asia/Tashkent|Indian/Maldives","Asia/Tehran|Iran","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Choibalsan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Asia/Vladivostok|Asia/Ust-Nera","Asia/Yakutsk|Asia/Khandyga","Atlantic/Azores|America/Scoresbysund","Atlantic/Cape_Verde|Etc/GMT+1","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Europe/Ulyanovsk|Europe/Astrakhan","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Fakaofo|Etc/GMT-13","Pacific/Fakaofo|Pacific/Enderbury","Pacific/Galapagos|Etc/GMT+6","Pacific/Gambier|Etc/GMT+9","Pacific/Guadalcanal|Antarctica/Macquarie","Pacific/Guadalcanal|Etc/GMT-11","Pacific/Guadalcanal|Pacific/Efate","Pacific/Guadalcanal|Pacific/Kosrae","Pacific/Guadalcanal|Pacific/Noumea","Pacific/Guadalcanal|Pacific/Pohnpei","Pacific/Guadalcanal|Pacific/Ponape","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kiritimati|Etc/GMT-14","Pacific/Niue|Etc/GMT+11","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pitcairn|Etc/GMT+8","Pacific/Port_Moresby|Antarctica/DumontDUrville","Pacific/Port_Moresby|Etc/GMT-10","Pacific/Port_Moresby|Pacific/Chuuk","Pacific/Port_Moresby|Pacific/Truk","Pacific/Port_Moresby|Pacific/Yap","Pacific/Tahiti|Etc/GMT+10","Pacific/Tahiti|Pacific/Rarotonga"]
}),a}),function(a){"function"==typeof define&&define.amd?define("picker",["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):this.Picker=a(jQuery)}(function(a){function b(f,g,i,m){function n(){return b._.node("div",b._.node("div",b._.node("div",b._.node("div",B.component.nodes(w.open),y.box),y.wrap),y.frame),y.holder,'tabindex="-1"')}function o(){z.data(g,B).addClass(y.input).val(z.data("value")?B.get("select",x.format):f.value),x.editable||z.on("focus."+w.id+" click."+w.id,function(a){a.preventDefault(),B.open()}).on("keydown."+w.id,u),e(f,{haspopup:!0,expanded:!1,readonly:!1,owns:f.id+"_root"})}function p(){e(B.$root[0],"hidden",!0)}function q(){B.$holder.on({keydown:u,"focus.toOpen":t,blur:function(){z.removeClass(y.target)},focusin:function(a){B.$root.removeClass(y.focused),a.stopPropagation()},"mousedown click":function(b){var c=b.target;c!=B.$holder[0]&&(b.stopPropagation(),"mousedown"!=b.type||a(c).is("input, select, textarea, button, option")||(b.preventDefault(),B.$holder[0].focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var b=a(this),c=b.data(),d=b.hasClass(y.navDisabled)||b.hasClass(y.disabled),e=h();e=e&&(e.type||e.href),(d||e&&!a.contains(B.$root[0],e))&&B.$holder[0].focus(),!d&&c.nav?B.set("highlight",B.component.item.highlight,{nav:c.nav}):!d&&"pick"in c?(B.set("select",c.pick),x.closeOnSelect&&B.close(!0)):c.clear?(B.clear(),x.closeOnClear&&B.close(!0)):c.close&&B.close(!0)})}function r(){var b;x.hiddenName===!0?(b=f.name,f.name=""):(b=["string"==typeof x.hiddenPrefix?x.hiddenPrefix:"","string"==typeof x.hiddenSuffix?x.hiddenSuffix:"_submit"],b=b[0]+f.name+b[1]),B._hidden=a('<input type=hidden name="'+b+'"'+(z.data("value")||f.value?' value="'+B.get("select",x.formatSubmit)+'"':"")+">")[0],z.on("change."+w.id,function(){B._hidden.value=f.value?B.get("select",x.formatSubmit):""})}function s(){v&&l?B.$holder.find("."+y.frame).one("transitionend",function(){B.$holder[0].focus()}):B.$holder[0].focus()}function t(a){a.stopPropagation(),z.addClass(y.target),B.$root.addClass(y.focused),B.open()}function u(a){var b=a.keyCode,c=/^(8|46)$/.test(b);return 27==b?(B.close(!0),!1):void((32==b||c||!w.open&&B.component.key[b])&&(a.preventDefault(),a.stopPropagation(),c?B.clear().close():B.open()))}if(!f)return b;var v=!1,w={id:f.id||"P"+Math.abs(~~(Math.random()*new Date))},x=i?a.extend(!0,{},i.defaults,m):m||{},y=a.extend({},b.klasses(),x.klass),z=a(f),A=function(){return this.start()},B=A.prototype={constructor:A,$node:z,start:function(){return w&&w.start?B:(w.methods={},w.start=!0,w.open=!1,w.type=f.type,f.autofocus=f==h(),f.readOnly=!x.editable,f.id=f.id||w.id,"text"!=f.type&&(f.type="text"),B.component=new i(B,x),B.$root=a('<div class="'+y.picker+'" id="'+f.id+'_root" />'),p(),B.$holder=a(n()).appendTo(B.$root),q(),x.formatSubmit&&r(),o(),x.containerHidden?a(x.containerHidden).append(B._hidden):z.after(B._hidden),x.container?a(x.container).append(B.$root):z.after(B.$root),B.on({start:B.component.onStart,render:B.component.onRender,stop:B.component.onStop,open:B.component.onOpen,close:B.component.onClose,set:B.component.onSet}).on({start:x.onStart,render:x.onRender,stop:x.onStop,open:x.onOpen,close:x.onClose,set:x.onSet}),v=c(B.$holder[0]),f.autofocus&&B.open(),B.trigger("start").trigger("render"))},render:function(b){return b?(B.$holder=a(n()),q(),B.$root.html(B.$holder)):B.$root.find("."+y.box).html(B.component.nodes(w.open)),B.trigger("render")},stop:function(){return w.start?(B.close(),B._hidden&&B._hidden.parentNode.removeChild(B._hidden),B.$root.remove(),z.removeClass(y.input).removeData(g),setTimeout(function(){z.off("."+w.id)},0),f.type=w.type,f.readOnly=!1,B.trigger("stop"),w.methods={},w.start=!1,B):B},open:function(c){return w.open?B:(z.addClass(y.active),e(f,"expanded",!0),setTimeout(function(){B.$root.addClass(y.opened),e(B.$root[0],"hidden",!1)},0),c!==!1&&(w.open=!0,v&&k.css("overflow","hidden").css("padding-right","+="+d()),s(),j.on("click."+w.id+" focusin."+w.id,function(a){var b=a.target;b!=f&&b!=document&&3!=a.which&&B.close(b===B.$holder[0])}).on("keydown."+w.id,function(c){var d=c.keyCode,e=B.component.key[d],f=c.target;27==d?B.close(!0):f!=B.$holder[0]||!e&&13!=d?a.contains(B.$root[0],f)&&13==d&&(c.preventDefault(),f.click()):(c.preventDefault(),e?b._.trigger(B.component.key.go,B,[b._.trigger(e)]):B.$root.find("."+y.highlighted).hasClass(y.disabled)||(B.set("select",B.component.item.highlight),x.closeOnSelect&&B.close(!0)))})),B.trigger("open"))},close:function(a){return a&&(x.editable?f.focus():(B.$holder.off("focus.toOpen").focus(),setTimeout(function(){B.$holder.on("focus.toOpen",t)},0))),z.removeClass(y.active),e(f,"expanded",!1),setTimeout(function(){B.$root.removeClass(y.opened+" "+y.focused),e(B.$root[0],"hidden",!0)},0),w.open?(w.open=!1,v&&k.css("overflow","").css("padding-right","-="+d()),j.off("."+w.id),B.trigger("close")):B},clear:function(a){return B.set("clear",null,a)},set:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(d=g&&a.isPlainObject(c)?c:d||{},b){g||(h[b]=c);for(e in h)f=h[e],e in B.component.item&&(void 0===f&&(f=null),B.component.set(e,f,d)),"select"!=e&&"clear"!=e||z.val("clear"==e?"":B.get(e,x.format)).trigger("change");B.render()}return d.muted?B:B.trigger("set",h)},get:function(a,c){if(a=a||"value",null!=w[a])return w[a];if("valueSubmit"==a){if(B._hidden)return B._hidden.value;a="value"}if("value"==a)return f.value;if(a in B.component.item){if("string"==typeof c){var d=B.component.get(a);return d?b._.trigger(B.component.formats.toString,B.component,[c,d]):""}return B.component.get(a)}},on:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(b){g||(h[b]=c);for(e in h)f=h[e],d&&(e="_"+e),w.methods[e]=w.methods[e]||[],w.methods[e].push(f)}return B},off:function(){var a,b,c=arguments;for(a=0,namesCount=c.length;a<namesCount;a+=1)b=c[a],b in w.methods&&delete w.methods[b];return B},trigger:function(a,c){var d=function(a){var d=w.methods[a];d&&d.map(function(a){b._.trigger(a,B,[c])})};return d("_"+a),d(a),B}};return new A}function c(a){var b,c="position";return a.currentStyle?b=a.currentStyle[c]:window.getComputedStyle&&(b=getComputedStyle(a)[c]),"fixed"==b}function d(){if(k.height()<=i.height())return 0;var b=a('<div style="visibility:hidden;width:100px" />').appendTo("body"),c=b[0].offsetWidth;b.css("overflow","scroll");var d=a('<div style="width:100%" />').appendTo(b),e=d[0].offsetWidth;return b.remove(),c-e}function e(b,c,d){if(a.isPlainObject(c))for(var e in c)f(b,e,c[e]);else f(b,c,d)}function f(a,b,c){a.setAttribute(("role"==b?"":"aria-")+b,c)}function g(b,c){a.isPlainObject(b)||(b={attribute:c}),c="";for(var d in b){var e=("role"==d?"":"aria-")+d,f=b[d];c+=null==f?"":e+'="'+b[d]+'"'}return c}function h(){try{return document.activeElement}catch(a){}}var i=a(window),j=a(document),k=a(document.documentElement),l=null!=document.documentElement.style.transition;return b.klasses=function(a){return a=a||"picker",{picker:a,opened:a+"--opened",focused:a+"--focused",input:a+"__input",active:a+"__input--active",target:a+"__input--target",holder:a+"__holder",frame:a+"__frame",wrap:a+"__wrap",box:a+"__box"}},b._={group:function(a){for(var c,d="",e=b._.trigger(a.min,a);e<=b._.trigger(a.max,a,[e]);e+=a.i)c=b._.trigger(a.item,a,[e]),d+=b._.node(a.node,c[0],c[1],c[2]);return d},node:function(b,c,d,e){return c?(c=a.isArray(c)?c.join(""):c,d=d?' class="'+d+'"':"",e=e?" "+e:"","<"+b+d+e+">"+c+"</"+b+">"):""},lead:function(a){return(a<10?"0":"")+a},trigger:function(a,b,c){return"function"==typeof a?a.apply(b,c||[]):a},digits:function(a){return/\d/.test(a[1])?2:1},isDate:function(a){return{}.toString.call(a).indexOf("Date")>-1&&this.isInteger(a.getDate())},isInteger:function(a){return{}.toString.call(a).indexOf("Number")>-1&&a%1===0},ariaAttr:g},b.extend=function(c,d){a.fn[c]=function(e,f){var g=this.data(c);return"picker"==e?g:g&&"string"==typeof e?b._.trigger(g[e],g,[f]):this.each(function(){var f=a(this);f.data(c)||new b(this,c,d,e)})},a.fn[c].defaults=d.defaults},b}),function(a){"function"==typeof define&&define.amd?define(["picker","jquery"],a):"object"==typeof exports?module.exports=a(require("./picker.js"),require("jquery")):a(Picker,jQuery)}(function(a,b){function c(a,b){var c=this,d=a.$node[0],e=d.value,f=a.$node.data("value"),g=f||e,h=f?b.formatSubmit:b.format,i=function(){return d.currentStyle?"rtl"==d.currentStyle.direction:"rtl"==getComputedStyle(a.$root[0]).direction};c.settings=b,c.$node=a.$node,c.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},c.item={},c.item.clear=null,c.item.disable=(b.disable||[]).slice(0),c.item.enable=-function(a){return a[0]===!0?a.shift():-1}(c.item.disable),c.set("min",b.min).set("max",b.max).set("now"),g?c.set("select",g,{format:h,defaultValue:!0}):c.set("select",null).set("highlight",c.item.now),c.key={40:7,38:-7,39:function(){return i()?-1:1},37:function(){return i()?1:-1},go:function(a){var b=c.item.highlight,d=new Date(b.year,b.month,b.date+a);c.set("highlight",d,{interval:a}),this.render()}},a.on("render",function(){a.$root.find("."+b.klass.selectMonth).on("change",function(){var c=this.value;c&&(a.set("highlight",[a.get("view").year,c,a.get("highlight").date]),a.$root.find("."+b.klass.selectMonth).trigger("focus"))}),a.$root.find("."+b.klass.selectYear).on("change",function(){var c=this.value;c&&(a.set("highlight",[c,a.get("view").month,a.get("highlight").date]),a.$root.find("."+b.klass.selectYear).trigger("focus"))})},1).on("open",function(){var d="";c.disabled(c.get("now"))&&(d=":not(."+b.klass.buttonToday+")"),a.$root.find("button"+d+", select").attr("disabled",!1)},1).on("close",function(){a.$root.find("button, select").attr("disabled",!0)},1)}var d=7,e=6,f=a._;c.prototype.set=function(a,b,c){var d=this,e=d.item;return null===b?("clear"==a&&(a="select"),e[a]=b,d):(e["enable"==a?"disable":"flip"==a?"enable":a]=d.queue[a].split(" ").map(function(e){return b=d[e](a,b,c)}).pop(),"select"==a?d.set("highlight",e.select,c):"highlight"==a?d.set("view",e.highlight,c):a.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&d.disabled(e.select)&&d.set("select",e.select,c),e.highlight&&d.disabled(e.highlight)&&d.set("highlight",e.highlight,c)),d)},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(a,c,d){var e,g=this;return c=void 0===c?a:c,c==-(1/0)||c==1/0?e=c:b.isPlainObject(c)&&f.isInteger(c.pick)?c=c.obj:b.isArray(c)?(c=new Date(c[0],c[1],c[2]),c=f.isDate(c)?c:g.create().obj):c=f.isInteger(c)||f.isDate(c)?g.normalize(new Date(c),d):g.now(a,c,d),{year:e||c.getFullYear(),month:e||c.getMonth(),date:e||c.getDate(),day:e||c.getDay(),obj:e||c,pick:e||c.getTime()}},c.prototype.createRange=function(a,c){var d=this,e=function(a){return a===!0||b.isArray(a)||f.isDate(a)?d.create(a):a};return f.isInteger(a)||(a=e(a)),f.isInteger(c)||(c=e(c)),f.isInteger(a)&&b.isPlainObject(c)?a=[c.year,c.month,c.date+a]:f.isInteger(c)&&b.isPlainObject(a)&&(c=[a.year,a.month,a.date+c]),{from:e(a),to:e(c)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(a,b,c){return b=new Date,c&&c.rel&&b.setDate(b.getDate()+c.rel),this.normalize(b,c)},c.prototype.navigate=function(a,c,d){var e,f,g,h,i=b.isArray(c),j=b.isPlainObject(c),k=this.item.view;if(i||j){for(j?(f=c.year,g=c.month,h=c.date):(f=+c[0],g=+c[1],h=+c[2]),d&&d.nav&&k&&k.month!==g&&(f=k.year,g=k.month),e=new Date(f,g+(d&&d.nav?d.nav:0),1),f=e.getFullYear(),g=e.getMonth();new Date(f,g,h).getMonth()!==g;)h-=1;c=[f,g,h]}return c},c.prototype.normalize=function(a){return a.setHours(0,0,0,0),a},c.prototype.measure=function(a,b){var c=this;return b?"string"==typeof b?b=c.parse(a,b):f.isInteger(b)&&(b=c.now(a,b,{rel:b})):b="min"==a?-(1/0):1/0,b},c.prototype.viewset=function(a,b){return this.create([b.year,b.month,1])},c.prototype.validate=function(a,c,d){var e,g,h,i,j=this,k=c,l=d&&d.interval?d.interval:1,m=j.item.enable===-1,n=j.item.min,o=j.item.max,p=m&&j.item.disable.filter(function(a){if(b.isArray(a)){var d=j.create(a).pick;d<c.pick?e=!0:d>c.pick&&(g=!0)}return f.isInteger(a)}).length;if((!d||!d.nav&&!d.defaultValue)&&(!m&&j.disabled(c)||m&&j.disabled(c)&&(p||e||g)||!m&&(c.pick<=n.pick||c.pick>=o.pick)))for(m&&!p&&(!g&&l>0||!e&&l<0)&&(l*=-1);j.disabled(c)&&(Math.abs(l)>1&&(c.month<k.month||c.month>k.month)&&(c=k,l=l>0?1:-1),c.pick<=n.pick?(h=!0,l=1,c=j.create([n.year,n.month,n.date+(c.pick===n.pick?0:-1)])):c.pick>=o.pick&&(i=!0,l=-1,c=j.create([o.year,o.month,o.date+(c.pick===o.pick?0:1)])),!h||!i);)c=j.create([c.year,c.month,c.date+l]);return c},c.prototype.disabled=function(a){var c=this,d=c.item.disable.filter(function(d){return f.isInteger(d)?a.day===(c.settings.firstDay?d:d-1)%7:b.isArray(d)||f.isDate(d)?a.pick===c.create(d).pick:b.isPlainObject(d)?c.withinRange(d,a):void 0});return d=d.length&&!d.filter(function(a){return b.isArray(a)&&"inverted"==a[3]||b.isPlainObject(a)&&a.inverted}).length,c.item.enable===-1?!d:d||a.pick<c.item.min.pick||a.pick>c.item.max.pick},c.prototype.parse=function(a,b,c){var d=this,e={};return b&&"string"==typeof b?(c&&c.format||(c=c||{},c.format=d.settings.format),d.formats.toArray(c.format).map(function(a){var c=d.formats[a],g=c?f.trigger(c,d,[b,e]):a.replace(/^!/,"").length;c&&(e[a]=b.substr(0,g)),b=b.substr(g)}),[e.yyyy||e.yy,+(e.mm||e.m)-1,e.dd||e.d]):b},c.prototype.formats=function(){function a(a,b,c){var d=a.match(/[^\x00-\x7F]+|\w+/)[0];return c.mm||c.m||(c.m=b.indexOf(d)+1),d.length}function b(a){return a.match(/\w+/)[0].length}return{d:function(a,b){return a?f.digits(a):b.date},dd:function(a,b){return a?2:f.lead(b.date)},ddd:function(a,c){return a?b(a):this.settings.weekdaysShort[c.day]},dddd:function(a,c){return a?b(a):this.settings.weekdaysFull[c.day]},m:function(a,b){return a?f.digits(a):b.month+1},mm:function(a,b){return a?2:f.lead(b.month+1)},mmm:function(b,c){var d=this.settings.monthsShort;return b?a(b,d,c):d[c.month]},mmmm:function(b,c){var d=this.settings.monthsFull;return b?a(b,d,c):d[c.month]},yy:function(a,b){return a?2:(""+b.year).slice(2)},yyyy:function(a,b){return a?4:b.year},toArray:function(a){return a.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(a,b){var c=this;return c.formats.toArray(a).map(function(a){return f.trigger(c.formats[a],c,[0,b])||a.replace(/^!/,"")}).join("")}}}(),c.prototype.isDateExact=function(a,c){var d=this;return f.isInteger(a)&&f.isInteger(c)||"boolean"==typeof a&&"boolean"==typeof c?a===c:(f.isDate(a)||b.isArray(a))&&(f.isDate(c)||b.isArray(c))?d.create(a).pick===d.create(c).pick:!(!b.isPlainObject(a)||!b.isPlainObject(c))&&(d.isDateExact(a.from,c.from)&&d.isDateExact(a.to,c.to))},c.prototype.isDateOverlap=function(a,c){var d=this,e=d.settings.firstDay?1:0;return f.isInteger(a)&&(f.isDate(c)||b.isArray(c))?(a=a%7+e,a===d.create(c).day+1):f.isInteger(c)&&(f.isDate(a)||b.isArray(a))?(c=c%7+e,c===d.create(a).day+1):!(!b.isPlainObject(a)||!b.isPlainObject(c))&&d.overlapRanges(a,c)},c.prototype.flipEnable=function(a){var b=this.item;b.enable=a||(b.enable==-1?1:-1)},c.prototype.deactivate=function(a,c){var d=this,e=d.item.disable.slice(0);return"flip"==c?d.flipEnable():c===!1?(d.flipEnable(1),e=[]):c===!0?(d.flipEnable(-1),e=[]):c.map(function(a){for(var c,g=0;g<e.length;g+=1)if(d.isDateExact(a,e[g])){c=!0;break}c||(f.isInteger(a)||f.isDate(a)||b.isArray(a)||b.isPlainObject(a)&&a.from&&a.to)&&e.push(a)}),e},c.prototype.activate=function(a,c){var d=this,e=d.item.disable,g=e.length;return"flip"==c?d.flipEnable():c===!0?(d.flipEnable(1),e=[]):c===!1?(d.flipEnable(-1),e=[]):c.map(function(a){var c,h,i,j;for(i=0;i<g;i+=1){if(h=e[i],d.isDateExact(h,a)){c=e[i]=null,j=!0;break}if(d.isDateOverlap(h,a)){b.isPlainObject(a)?(a.inverted=!0,c=a):b.isArray(a)?(c=a,c[3]||c.push("inverted")):f.isDate(a)&&(c=[a.getFullYear(),a.getMonth(),a.getDate(),"inverted"]);break}}if(c)for(i=0;i<g;i+=1)if(d.isDateExact(e[i],a)){e[i]=null;break}if(j)for(i=0;i<g;i+=1)if(d.isDateOverlap(e[i],a)){e[i]=null;break}c&&e.push(c)}),e.filter(function(a){return null!=a})},c.prototype.nodes=function(a){var b=this,c=b.settings,g=b.item,h=g.now,i=g.select,j=g.highlight,k=g.view,l=g.disable,m=g.min,n=g.max,o=function(a,b){return c.firstDay&&(a.push(a.shift()),b.push(b.shift())),f.node("thead",f.node("tr",f.group({min:0,max:d-1,i:1,node:"th",item:function(d){return[a[d],c.klass.weekdays,'scope=col title="'+b[d]+'"']}})))}((c.showWeekdaysFull?c.weekdaysFull:c.weekdaysShort).slice(0),c.weekdaysFull.slice(0)),p=function(a){return f.node("div"," ",c.klass["nav"+(a?"Next":"Prev")]+(a&&k.year>=n.year&&k.month>=n.month||!a&&k.year<=m.year&&k.month<=m.month?" "+c.klass.navDisabled:""),"data-nav="+(a||-1)+" "+f.ariaAttr({role:"button",controls:b.$node[0].id+"_table"})+' title="'+(a?c.labelMonthNext:c.labelMonthPrev)+'"')},q=function(){var d=c.showMonthsShort?c.monthsShort:c.monthsFull;return c.selectMonths?f.node("select",f.group({min:0,max:11,i:1,node:"option",item:function(a){return[d[a],0,"value="+a+(k.month==a?" selected":"")+(k.year==m.year&&a<m.month||k.year==n.year&&a>n.month?" disabled":"")]}}),c.klass.selectMonth,(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelMonthSelect+'"'):f.node("div",d[k.month],c.klass.month)},r=function(){var d=k.year,e=c.selectYears===!0?5:~~(c.selectYears/2);if(e){var g=m.year,h=n.year,i=d-e,j=d+e;if(g>i&&(j+=g-i,i=g),h<j){var l=i-g,o=j-h;i-=l>o?o:l,j=h}return f.node("select",f.group({min:i,max:j,i:1,node:"option",item:function(a){return[a,0,"value="+a+(d==a?" selected":"")]}}),c.klass.selectYear,(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelYearSelect+'"')}return f.node("div",d,c.klass.year)};return f.node("div",(c.selectYears?r()+q():q()+r())+p()+p(1),c.klass.header)+f.node("table",o+f.node("tbody",f.group({min:0,max:e-1,i:1,node:"tr",item:function(a){var e=c.firstDay&&0===b.create([k.year,k.month,1]).day?-7:0;return[f.group({min:d*a-k.day+e+1,max:function(){return this.min+d-1},i:1,node:"td",item:function(a){a=b.create([k.year,k.month,a+(c.firstDay?1:0)]);var d=i&&i.pick==a.pick,e=j&&j.pick==a.pick,g=l&&b.disabled(a)||a.pick<m.pick||a.pick>n.pick,o=f.trigger(b.formats.toString,b,[c.format,a]);return[f.node("div",a.date,function(b){return b.push(k.month==a.month?c.klass.infocus:c.klass.outfocus),h.pick==a.pick&&b.push(c.klass.now),d&&b.push(c.klass.selected),e&&b.push(c.klass.highlighted),g&&b.push(c.klass.disabled),b.join(" ")}([c.klass.day]),"data-pick="+a.pick+" "+f.ariaAttr({role:"gridcell",label:o,selected:!(!d||b.$node.val()!==o)||null,activedescendant:!!e||null,disabled:!!g||null})),"",f.ariaAttr({role:"presentation"})]}})]}})),c.klass.table,'id="'+b.$node[0].id+'_table" '+f.ariaAttr({role:"grid",controls:b.$node[0].id,readonly:!0}))+f.node("div",f.node("button",c.today,c.klass.buttonToday,"type=button data-pick="+h.pick+(a&&!b.disabled(h)?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.clear,c.klass.buttonClear,"type=button data-clear=1"+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.close,c.klass.buttonClose,"type=button data-close=true "+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id})),c.klass.footer)},c.defaults=function(a){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,format:"d mmmm, yyyy",klass:{table:a+"table",header:a+"header",navPrev:a+"nav--prev",navNext:a+"nav--next",navDisabled:a+"nav--disabled",month:a+"month",year:a+"year",selectMonth:a+"select--month",selectYear:a+"select--year",weekdays:a+"weekday",day:a+"day",disabled:a+"day--disabled",selected:a+"day--selected",highlighted:a+"day--highlighted",now:a+"day--today",infocus:a+"day--infocus",outfocus:a+"day--outfocus",footer:a+"footer",buttonClear:a+"button--clear",buttonToday:a+"button--today",buttonClose:a+"button--close"}}}(a.klasses().picker+"__"),a.extend("pickadate",c)}),function(a){"function"==typeof define&&define.amd?define(["picker","jquery"],a):"object"==typeof exports?module.exports=a(require("./picker.js"),require("jquery")):a(Picker,jQuery)}(function(a,b){function c(a,b){var c=this,d=a.$node[0].value,e=a.$node.data("value"),f=e||d,g=e?b.formatSubmit:b.format;c.settings=b,c.$node=a.$node,c.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},c.item={},c.item.clear=null,c.item.interval=b.interval||30,c.item.disable=(b.disable||[]).slice(0),c.item.enable=-function(a){return a[0]===!0?a.shift():-1}(c.item.disable),c.set("min",b.min).set("max",b.max).set("now"),f?c.set("select",f,{format:g}):c.set("select",null).set("highlight",c.item.now),c.key={40:1,38:-1,39:1,37:-1,go:function(a){c.set("highlight",c.item.highlight.pick+a*c.item.interval,{interval:a*c.item.interval}),this.render()}},a.on("render",function(){var c=a.$root.children(),d=c.find("."+b.klass.viewset),e=function(a){return["webkit","moz","ms","o",""].map(function(b){return(b?"-"+b+"-":"")+a})},f=function(a,b){e("transform").map(function(c){a.css(c,b)}),e("transition").map(function(c){a.css(c,b)})};d.length&&(f(c,"none"),c[0].scrollTop=~~d.position().top-2*d[0].clientHeight,f(c,""))},1).on("open",function(){a.$root.find("button").attr("disabled",!1)},1).on("close",function(){a.$root.find("button").attr("disabled",!0)},1)}var d=24,e=60,f=12,g=d*e,h=a._;c.prototype.set=function(a,b,c){var d=this,e=d.item;return null===b?("clear"==a&&(a="select"),e[a]=b,d):(e["enable"==a?"disable":"flip"==a?"enable":a]=d.queue[a].split(" ").map(function(e){return b=d[e](a,b,c)}).pop(),"select"==a?d.set("highlight",e.select,c):"highlight"==a?d.set("view",e.highlight,c):"interval"==a?d.set("min",e.min,c).set("max",e.max,c):a.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&d.disabled(e.select)&&d.set("select",b,c),e.highlight&&d.disabled(e.highlight)&&d.set("highlight",b,c),"min"==a&&d.set("max",e.max,c)),d)},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(a,c,f){var i=this;return c=void 0===c?a:c,h.isDate(c)&&(c=[c.getHours(),c.getMinutes()]),b.isPlainObject(c)&&h.isInteger(c.pick)?c=c.pick:b.isArray(c)?c=+c[0]*e+ +c[1]:h.isInteger(c)||(c=i.now(a,c,f)),"max"==a&&c<i.item.min.pick&&(c+=g),"min"!=a&&"max"!=a&&(c-i.item.min.pick)%i.item.interval!==0&&(c+=i.item.interval),c=i.normalize(a,c,f),{hour:~~(d+c/e)%d,mins:(e+c%e)%e,time:(g+c)%g,pick:c%g}},c.prototype.createRange=function(a,c){var d=this,e=function(a){return a===!0||b.isArray(a)||h.isDate(a)?d.create(a):a};return h.isInteger(a)||(a=e(a)),h.isInteger(c)||(c=e(c)),h.isInteger(a)&&b.isPlainObject(c)?a=[c.hour,c.mins+a*d.settings.interval]:h.isInteger(c)&&b.isPlainObject(a)&&(c=[a.hour,a.mins+c*d.settings.interval]),{from:e(a),to:e(c)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(a,b){var c,d=this.item.interval,f=new Date,g=f.getHours()*e+f.getMinutes(),i=h.isInteger(b);return g-=g%d,c=b<0&&d*b+g<=-d,g+="min"==a&&c?0:d,i&&(g+=d*(c&&"max"!=a?b+1:b)),g},c.prototype.normalize=function(a,b){var c=this.item.interval,d=this.item.min&&this.item.min.pick||0;return b-="min"==a?0:(b-d)%c},c.prototype.measure=function(a,c,f){var g=this;return c||(c="min"==a?[0,0]:[d-1,e-1]),"string"==typeof c?c=g.parse(a,c):c===!0||h.isInteger(c)?c=g.now(a,c,f):b.isPlainObject(c)&&h.isInteger(c.pick)&&(c=g.normalize(a,c.pick,f)),c},c.prototype.validate=function(a,b,c){var d=this,e=c&&c.interval?c.interval:d.item.interval;return d.disabled(b)&&(b=d.shift(b,e)),b=d.scope(b),d.disabled(b)&&(b=d.shift(b,e*-1)),b},c.prototype.disabled=function(a){var c=this,d=c.item.disable.filter(function(d){return h.isInteger(d)?a.hour==d:b.isArray(d)||h.isDate(d)?a.pick==c.create(d).pick:b.isPlainObject(d)?c.withinRange(d,a):void 0});return d=d.length&&!d.filter(function(a){return b.isArray(a)&&"inverted"==a[2]||b.isPlainObject(a)&&a.inverted}).length,c.item.enable===-1?!d:d||a.pick<c.item.min.pick||a.pick>c.item.max.pick},c.prototype.shift=function(a,b){var c=this,d=c.item.min.pick,e=c.item.max.pick;for(b=b||c.item.interval;c.disabled(a)&&(a=c.create(a.pick+=b),!(a.pick<=d||a.pick>=e)););return a},c.prototype.scope=function(a){var b=this.item.min.pick,c=this.item.max.pick;return this.create(a.pick>c?c:a.pick<b?b:a)},c.prototype.parse=function(a,b,c){var d,f,g,i,j,k=this,l={};if(!b||"string"!=typeof b)return b;c&&c.format||(c=c||{},c.format=k.settings.format),k.formats.toArray(c.format).map(function(a){var c,d=k.formats[a],e=d?h.trigger(d,k,[b,l]):a.replace(/^!/,"").length;d&&(c=b.substr(0,e),l[a]=c.match(/^\d+$/)?+c:c),b=b.substr(e)});for(i in l)j=l[i],h.isInteger(j)?i.match(/^(h|hh)$/i)?(d=j,"h"!=i&&"hh"!=i||(d%=12)):"i"==i&&(f=j):i.match(/^a$/i)&&j.match(/^p/i)&&("h"in l||"hh"in l)&&(g=!0);return(g?d+12:d)*e+f},c.prototype.formats={h:function(a,b){return a?h.digits(a):b.hour%f||f},hh:function(a,b){return a?2:h.lead(b.hour%f||f)},H:function(a,b){return a?h.digits(a):""+b.hour%24},HH:function(a,b){return a?h.digits(a):h.lead(b.hour%24)},i:function(a,b){return a?2:h.lead(b.mins)},a:function(a,b){return a?4:g/2>b.time%g?"a.m.":"p.m."},A:function(a,b){return a?2:g/2>b.time%g?"AM":"PM"},toArray:function(a){return a.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(a,b){var c=this;return c.formats.toArray(a).map(function(a){return h.trigger(c.formats[a],c,[0,b])||a.replace(/^!/,"")}).join("")}},c.prototype.isTimeExact=function(a,c){var d=this;return h.isInteger(a)&&h.isInteger(c)||"boolean"==typeof a&&"boolean"==typeof c?a===c:(h.isDate(a)||b.isArray(a))&&(h.isDate(c)||b.isArray(c))?d.create(a).pick===d.create(c).pick:!(!b.isPlainObject(a)||!b.isPlainObject(c))&&(d.isTimeExact(a.from,c.from)&&d.isTimeExact(a.to,c.to))},c.prototype.isTimeOverlap=function(a,c){var d=this;return h.isInteger(a)&&(h.isDate(c)||b.isArray(c))?a===d.create(c).hour:h.isInteger(c)&&(h.isDate(a)||b.isArray(a))?c===d.create(a).hour:!(!b.isPlainObject(a)||!b.isPlainObject(c))&&d.overlapRanges(a,c)},c.prototype.flipEnable=function(a){var b=this.item;b.enable=a||(b.enable==-1?1:-1)},c.prototype.deactivate=function(a,c){var d=this,e=d.item.disable.slice(0);return"flip"==c?d.flipEnable():c===!1?(d.flipEnable(1),e=[]):c===!0?(d.flipEnable(-1),e=[]):c.map(function(a){for(var c,f=0;f<e.length;f+=1)if(d.isTimeExact(a,e[f])){c=!0;break}c||(h.isInteger(a)||h.isDate(a)||b.isArray(a)||b.isPlainObject(a)&&a.from&&a.to)&&e.push(a)}),e},c.prototype.activate=function(a,c){var d=this,e=d.item.disable,f=e.length;return"flip"==c?d.flipEnable():c===!0?(d.flipEnable(1),e=[]):c===!1?(d.flipEnable(-1),e=[]):c.map(function(a){var c,g,i,j;for(i=0;i<f;i+=1){if(g=e[i],d.isTimeExact(g,a)){c=e[i]=null,j=!0;break}if(d.isTimeOverlap(g,a)){b.isPlainObject(a)?(a.inverted=!0,c=a):b.isArray(a)?(c=a,c[2]||c.push("inverted")):h.isDate(a)&&(c=[a.getFullYear(),a.getMonth(),a.getDate(),"inverted"]);break}}if(c)for(i=0;i<f;i+=1)if(d.isTimeExact(e[i],a)){e[i]=null;break}if(j)for(i=0;i<f;i+=1)if(d.isTimeOverlap(e[i],a)){e[i]=null;break}c&&e.push(c)}),e.filter(function(a){return null!=a})},c.prototype.i=function(a,b){return h.isInteger(b)&&b>0?b:this.item.interval},c.prototype.nodes=function(a){var b=this,c=b.settings,d=b.item.select,e=b.item.highlight,f=b.item.view,g=b.item.disable;return h.node("ul",h.group({min:b.item.min.pick,max:b.item.max.pick,i:b.item.interval,node:"li",item:function(a){a=b.create(a);var i=a.pick,j=d&&d.pick==i,k=e&&e.pick==i,l=g&&b.disabled(a),m=h.trigger(b.formats.toString,b,[c.format,a]);return[h.trigger(b.formats.toString,b,[h.trigger(c.formatLabel,b,[a])||c.format,a]),function(a){return j&&a.push(c.klass.selected),k&&a.push(c.klass.highlighted),f&&f.pick==i&&a.push(c.klass.viewset),l&&a.push(c.klass.disabled),a.join(" ")}([c.klass.listItem]),"data-pick="+a.pick+" "+h.ariaAttr({role:"option",label:m,selected:!(!j||b.$node.val()!==m)||null,activedescendant:!!k||null,disabled:!!l||null})]}})+h.node("li",h.node("button",c.clear,c.klass.buttonClear,"type=button data-clear=1"+(a?"":" disabled")+" "+h.ariaAttr({controls:b.$node[0].id})),"",h.ariaAttr({role:"presentation"})),c.klass.list,h.ariaAttr({role:"listbox",controls:b.$node[0].id}))},c.defaults=function(a){return{clear:"Clear",format:"h:i A",interval:30,closeOnSelect:!0,closeOnClear:!0,klass:{picker:a+" "+a+"--time",holder:a+"__holder",list:a+"__list",listItem:a+"__list-item",disabled:a+"__list-item--disabled",selected:a+"__list-item--selected",highlighted:a+"__list-item--highlighted",viewset:a+"__list-item--viewset",now:a+"__list-item--now",buttonClear:a+"__button--clear"}}}(a.klasses().picker),a.extend("pickatime",c)}),[].map||(Array.prototype.map=function(a,b){for(var c=this,d=c.length,e=new Array(d),f=0;f<d;f++)f in c&&(e[f]=a.call(b,c[f],f,c));return e}),[].filter||(Array.prototype.filter=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments[1],f=0;f<c;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),[].indexOf||(Array.prototype.indexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!==d&&d!=1/0&&d!=-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);e<c;e++)if(e in b&&b[e]===a)return e;return-1});var nativeSplit=String.prototype.split,compliantExecNpcg=void 0===/()??/.exec("")[1];String.prototype.split=function(a,b){var c=this;if("[object RegExp]"!==Object.prototype.toString.call(a))return nativeSplit.call(c,a,b);var d,e,f,g,h=[],i=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":""),j=0;for(a=new RegExp(a.source,i+"g"),c+="",compliantExecNpcg||(d=new RegExp("^"+a.source+"$(?!\\s)",i)),b=void 0===b?-1>>>0:b>>>0;(e=a.exec(c))&&(f=e.index+e[0].length,!(f>j&&(h.push(c.slice(j,e.index)),!compliantExecNpcg&&e.length>1&&e[0].replace(d,function(){for(var a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(e[a]=void 0)}),e.length>1&&e.index<c.length&&Array.prototype.push.apply(h,e.slice(1)),g=e[0].length,j=f,h.length>=b)));)a.lastIndex===e.index&&a.lastIndex++;return j===c.length?!g&&a.test("")||h.push(""):h.push(c.slice(j)),h.length>b?h.slice(0,b):h},function(){function a(a){var b=function(a,b){return e("",a,b)},f=c;a&&(c[a]||(c[a]={}),f=c[a]),f.define&&f.define.packaged||(d.original=f.define,f.define=d,f.define.packaged=!0),f.require&&f.require.packaged||(e.original=f.require,f.require=b,f.require.packaged=!0)}var b="ace",c=function(){return this}();if(b||"undefined"==typeof requirejs){var d=function(a,b,c){return"string"!=typeof a?void(d.original?d.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace())):(2==arguments.length&&(c=b),d.modules||(d.modules={},d.payloads={}),d.payloads[a]=c,void(d.modules[a]=null));
},e=function(a,b,c){if("[object Array]"===Object.prototype.toString.call(b)){for(var d=[],f=0,h=b.length;f<h;++f){var i=g(a,b[f]);if(!i&&e.original)return e.original.apply(window,arguments);d.push(i)}c&&c.apply(null,d)}else{if("string"==typeof b){var j=g(a,b);return!j&&e.original?e.original.apply(window,arguments):(c&&c(),j)}if(e.original)return e.original.apply(window,arguments)}},f=function(a,b){if(b.indexOf("!")!==-1){var c=b.split("!");return f(a,c[0])+"!"+f(a,c[1])}if("."==b.charAt(0)){var d=a.split("/").slice(0,-1).join("/");for(b=d+"/"+b;b.indexOf(".")!==-1&&e!=b;){var e=b;b=b.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return b},g=function(a,b){b=f(a,b);var c=d.modules[b];if(!c){if(c=d.payloads[b],"function"==typeof c){var g={},h={id:b,uri:"",exports:g,packaged:!0},i=function(a,c){return e(b,a,c)},j=c(i,g,h);g=j||h.exports,d.modules[b]=g,delete d.payloads[b]}c=d.modules[b]=g||c}return c};a(b)}}(),ace.define("ace/lib/regexp",["require","exports","module"],function(a,b,c){"use strict";function d(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")}function e(a,b,c){if(Array.prototype.indexOf)return a.indexOf(b,c);for(var d=c||0;d<a.length;d++)if(a[d]===b)return d;return-1}var f={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},g=void 0===f.exec.call(/()??/,"")[1],h=function(){var a=/^/g;return f.test.call(a,""),!a.lastIndex}();h&&g||(RegExp.prototype.exec=function(a){var b,c,i=f.exec.apply(this,arguments);if("string"==typeof a&&i){if(!g&&i.length>1&&e(i,"")>-1&&(c=RegExp(this.source,f.replace.call(d(this),"g","")),f.replace.call(a.slice(i.index),c,function(){for(var a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var j=1;j<i.length;j++)b=this._xregexp.captureNames[j-1],b&&(i[b]=i[j]);!h&&this.global&&!i[0].length&&this.lastIndex>i.index&&this.lastIndex--}return i},h||(RegExp.prototype.test=function(a){var b=f.exec.call(this,a);return b&&this.global&&!b[0].length&&this.lastIndex>b.index&&this.lastIndex--,!!b}))}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(a,b,c){function d(){}function e(a){try{return Object.defineProperty(a,"sentinel",{}),"sentinel"in a}catch(a){}}function f(a){var b,c,d=a.length;for(c=0;c<d;c++)if(b=a.charAt(c),I.indexOf(b)===-1)return c;return-1}function g(a){var b,c,d=a.length;for(c=d-1;c>=0;c--)if(b=a.charAt(c),I.indexOf(b)===-1)return c+1;return-1}function h(a){return a=+a,a!==a?a=0:0!==a&&a!==1/0&&a!==-(1/0)&&(a=(a>0||-1)*Math.floor(Math.abs(a))),a}Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError("Function.prototype.bind called on incompatible "+b);var c=q.call(arguments,1),e=function(){if(this instanceof e){var d=b.apply(this,c.concat(q.call(arguments)));return Object(d)===d?d:this}return b.apply(a,c.concat(q.call(arguments)))};return b.prototype&&(d.prototype=b.prototype,e.prototype=new d,d.prototype=null),e});var i,j,k,l,m,n=Function.prototype.call,o=Array.prototype,p=Object.prototype,q=o.slice,r=n.bind(p.toString),s=n.bind(p.hasOwnProperty);if((m=s(p,"__defineGetter__"))&&(i=n.bind(p.__defineGetter__),j=n.bind(p.__defineSetter__),k=n.bind(p.__lookupGetter__),l=n.bind(p.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function a(a){var b=new Array(a+2);return b[0]=b[1]=0,b}var b,c=[];if(c.splice.apply(c,a(20)),c.splice.apply(c,a(26)),b=c.length,c.splice(5,0,"XXX"),b+1==c.length,b+1==c.length)return!0}()){var t=Array.prototype.splice;Array.prototype.splice=function(a,b){return arguments.length?t.apply(this,[void 0===a?0:a,void 0===b?this.length-a:b].concat(q.call(arguments,2))):[]}}else Array.prototype.splice=function(a,b){var c=this.length;a>0?a>c&&(a=c):void 0==a?a=0:a<0&&(a=Math.max(c+a,0)),a+b<c||(b=c-a);var d=this.slice(a,a+b),e=q.call(arguments,2),f=e.length;if(a===c)f&&this.push.apply(this,e);else{var g=Math.min(b,c-a),h=a+g,i=h+f-g,j=c-h,k=c-g;if(i<h)for(var l=0;l<j;++l)this[i+l]=this[h+l];else if(i>h)for(l=j;l--;)this[i+l]=this[h+l];if(f&&a===k)this.length=k,this.push.apply(this,e);else for(this.length=k+f,l=0;l<f;++l)this[a+l]=e[l]}return d};Array.isArray||(Array.isArray=function(a){return"[object Array]"==r(a)});var u=Object("a"),v="a"!=u[0]||!(0 in u);if(Array.prototype.forEach||(Array.prototype.forEach=function(a){var b=J(this),c=v&&"[object String]"==r(this)?this.split(""):b,d=arguments[1],e=-1,f=c.length>>>0;if("[object Function]"!=r(a))throw new TypeError;for(;++e<f;)e in c&&a.call(d,c[e],e,b)}),Array.prototype.map||(Array.prototype.map=function(a){var b=J(this),c=v&&"[object String]"==r(this)?this.split(""):b,d=c.length>>>0,e=Array(d),f=arguments[1];if("[object Function]"!=r(a))throw new TypeError(a+" is not a function");for(var g=0;g<d;g++)g in c&&(e[g]=a.call(f,c[g],g,b));return e}),Array.prototype.filter||(Array.prototype.filter=function(a){var b,c=J(this),d=v&&"[object String]"==r(this)?this.split(""):c,e=d.length>>>0,f=[],g=arguments[1];if("[object Function]"!=r(a))throw new TypeError(a+" is not a function");for(var h=0;h<e;h++)h in d&&(b=d[h],a.call(g,b,h,c)&&f.push(b));return f}),Array.prototype.every||(Array.prototype.every=function(a){var b=J(this),c=v&&"[object String]"==r(this)?this.split(""):b,d=c.length>>>0,e=arguments[1];if("[object Function]"!=r(a))throw new TypeError(a+" is not a function");for(var f=0;f<d;f++)if(f in c&&!a.call(e,c[f],f,b))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(a){var b=J(this),c=v&&"[object String]"==r(this)?this.split(""):b,d=c.length>>>0,e=arguments[1];if("[object Function]"!=r(a))throw new TypeError(a+" is not a function");for(var f=0;f<d;f++)if(f in c&&a.call(e,c[f],f,b))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(a){var b=J(this),c=v&&"[object String]"==r(this)?this.split(""):b,d=c.length>>>0;if("[object Function]"!=r(a))throw new TypeError(a+" is not a function");if(!d&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var e,f=0;if(arguments.length>=2)e=arguments[1];else for(;;){if(f in c){e=c[f++];break}if(++f>=d)throw new TypeError("reduce of empty array with no initial value")}for(;f<d;f++)f in c&&(e=a.call(void 0,e,c[f],f,b));return e}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){var b=J(this),c=v&&"[object String]"==r(this)?this.split(""):b,d=c.length>>>0;if("[object Function]"!=r(a))throw new TypeError(a+" is not a function");if(!d&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var e,f=d-1;if(arguments.length>=2)e=arguments[1];else for(;;){if(f in c){e=c[f--];break}if(--f<0)throw new TypeError("reduceRight of empty array with no initial value")}do f in this&&(e=a.call(void 0,e,c[f],f,b));while(f--);return e}),Array.prototype.indexOf&&[0,1].indexOf(1,2)==-1||(Array.prototype.indexOf=function(a){var b=v&&"[object String]"==r(this)?this.split(""):J(this),c=b.length>>>0;if(!c)return-1;var d=0;for(arguments.length>1&&(d=h(arguments[1])),d=d>=0?d:Math.max(0,c+d);d<c;d++)if(d in b&&b[d]===a)return d;return-1}),Array.prototype.lastIndexOf&&[0,1].lastIndexOf(0,-3)==-1||(Array.prototype.lastIndexOf=function(a){var b=v&&"[object String]"==r(this)?this.split(""):J(this),c=b.length>>>0;if(!c)return-1;var d=c-1;for(arguments.length>1&&(d=Math.min(d,h(arguments[1]))),d=d>=0?d:c-Math.abs(d);d>=0;d--)if(d in b&&a===b[d])return d;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__||(a.constructor?a.constructor.prototype:p)}),!Object.getOwnPropertyDescriptor){var w="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(a,b){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(w+a);if(s(a,b)){var c,d,e;if(c={enumerable:!0,configurable:!0},m){var f=a.__proto__;a.__proto__=p;var d=k(a,b),e=l(a,b);if(a.__proto__=f,d||e)return d&&(c.get=d),e&&(c.set=e),c}return c.value=a[b],c}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(a){return Object.keys(a)}),!Object.create){var x;x=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var a={};for(var b in a)a[b]=null;return a.constructor=a.hasOwnProperty=a.propertyIsEnumerable=a.isPrototypeOf=a.toLocaleString=a.toString=a.valueOf=a.__proto__=null,a},Object.create=function(a,b){var c;if(null===a)c=x();else{if("object"!=typeof a)throw new TypeError("typeof prototype["+typeof a+"] != 'object'");var d=function(){};d.prototype=a,c=new d,c.__proto__=a}return void 0!==b&&Object.defineProperties(c,b),c}}if(Object.defineProperty){var y=e({}),z="undefined"==typeof document||e(document.createElement("div"));if(!y||!z)var A=Object.defineProperty}if(!Object.defineProperty||A){var B="Property description must be an object: ",C="Object.defineProperty called on non-object: ",D="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(a,b,c){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(C+a);if("object"!=typeof c&&"function"!=typeof c||null===c)throw new TypeError(B+c);if(A)try{return A.call(Object,a,b,c)}catch(a){}if(s(c,"value"))if(m&&(k(a,b)||l(a,b))){var d=a.__proto__;a.__proto__=p,delete a[b],a[b]=c.value,a.__proto__=d}else a[b]=c.value;else{if(!m)throw new TypeError(D);s(c,"get")&&i(a,b,c.get),s(c,"set")&&j(a,b,c.set)}return a}}Object.defineProperties||(Object.defineProperties=function(a,b){for(var c in b)s(b,c)&&Object.defineProperty(a,c,b[c]);return a}),Object.seal||(Object.seal=function(a){return a}),Object.freeze||(Object.freeze=function(a){return a});try{Object.freeze(function(){})}catch(a){Object.freeze=function(a){return function(b){return"function"==typeof b?b:a(b)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(a){return a}),Object.isSealed||(Object.isSealed=function(a){return!1}),Object.isFrozen||(Object.isFrozen=function(a){return!1}),Object.isExtensible||(Object.isExtensible=function(a){if(Object(a)===a)throw new TypeError;for(var b="";s(a,b);)b+="?";a[b]=!0;var c=s(a,b);return delete a[b],c}),!Object.keys){var E=!0,F=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],G=F.length;for(var H in{toString:null})E=!1;Object.keys=function a(b){if("object"!=typeof b&&"function"!=typeof b||null===b)throw new TypeError("Object.keys called on a non-object");var a=[];for(var c in b)s(b,c)&&a.push(c);if(E)for(var d=0,e=G;d<e;d++){var f=F[d];s(b,f)&&a.push(f)}return a}}Date.now||(Date.now=function(){return(new Date).getTime()});var I="\t\n\v\f\r ¬†·öÄ·†é‚ÄÄ‚ÄÅ‚ÄÇ‚ÄÉ‚ÄÑ‚ÄÖ‚ÄÜ‚Äá‚Äà‚Äâ‚Ää‚ÄØ‚Åü„ÄÄ\u2028\u2029\ufeff";String.prototype.trim&&!I.trim()||(String.prototype.trim=function(){if(this){var a=f(this);return a==-1?"":this.substring(a,g(this))}return this});var J=function(a){if(null==a)throw new TypeError("can't convert "+a+" to object");return Object(a)}}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(a,b,c){"use strict";a("./regexp"),a("./es5-shim")}),ace.define("ace/lib/dom",["require","exports","module"],function(a,b,c){"use strict";var d="http://www.w3.org/1999/xhtml";b.getDocumentHead=function(a){return a||(a=document),a.head||a.getElementsByTagName("head")[0]||a.documentElement},b.createElement=function(a,b){return document.createElementNS?document.createElementNS(b||d,a):document.createElement(a)},b.hasCssClass=function(a,b){var c=(a.className||"").split(/\s+/g);return c.indexOf(b)!==-1},b.addCssClass=function(a,c){b.hasCssClass(a,c)||(a.className+=" "+c)},b.removeCssClass=function(a,b){for(var c=a.className.split(/\s+/g);;){var d=c.indexOf(b);if(d==-1)break;c.splice(d,1)}a.className=c.join(" ")},b.toggleCssClass=function(a,b){for(var c=a.className.split(/\s+/g),d=!0;;){var e=c.indexOf(b);if(e==-1)break;d=!1,c.splice(e,1)}return d&&c.push(b),a.className=c.join(" "),d},b.setCssClass=function(a,c,d){d?b.addCssClass(a,c):b.removeCssClass(a,c)},b.hasCssString=function(a,b){var c,d=0;if(b=b||document,b.createStyleSheet&&(c=b.styleSheets)){for(;d<c.length;)if(c[d++].owningElement.id===a)return!0}else if(c=b.getElementsByTagName("style"))for(;d<c.length;)if(c[d++].id===a)return!0;return!1},b.importCssString=function(a,c,e){if(e=e||document,c&&b.hasCssString(c,e))return null;var f;e.createStyleSheet?(f=e.createStyleSheet(),f.cssText=a,c&&(f.owningElement.id=c)):(f=e.createElementNS?e.createElementNS(d,"style"):e.createElement("style"),f.appendChild(e.createTextNode(a)),c&&(f.id=c),b.getDocumentHead(e).appendChild(f))},b.importCssStylsheet=function(a,c){if(c.createStyleSheet)c.createStyleSheet(a);else{var d=b.createElement("link");d.rel="stylesheet",d.href=a,b.getDocumentHead(c).appendChild(d)}},b.getInnerWidth=function(a){return parseInt(b.computedStyle(a,"paddingLeft"),10)+parseInt(b.computedStyle(a,"paddingRight"),10)+a.clientWidth},b.getInnerHeight=function(a){return parseInt(b.computedStyle(a,"paddingTop"),10)+parseInt(b.computedStyle(a,"paddingBottom"),10)+a.clientHeight},"undefined"!=typeof document&&(void 0!==window.pageYOffset?(b.getPageScrollTop=function(){return window.pageYOffset},b.getPageScrollLeft=function(){return window.pageXOffset}):(b.getPageScrollTop=function(){return document.body.scrollTop},b.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?b.computedStyle=function(a,b){return b?(window.getComputedStyle(a,"")||{})[b]||"":window.getComputedStyle(a,"")||{}}:b.computedStyle=function(a,b){return b?a.currentStyle[b]:a.currentStyle},b.scrollbarWidth=function(a){var c=b.createElement("ace_inner");c.style.width="100%",c.style.minWidth="0px",c.style.height="200px",c.style.display="block";var d=b.createElement("ace_outer"),e=d.style;e.position="absolute",e.left="-10000px",e.overflow="hidden",e.width="200px",e.minWidth="0px",e.height="150px",e.display="block",d.appendChild(c);var f=a.documentElement;f.appendChild(d);var g=c.offsetWidth;e.overflow="scroll";var h=c.offsetWidth;return g==h&&(h=d.clientWidth),f.removeChild(d),g-h},b.setInnerHtml=function(a,b){var c=a.cloneNode(!1);return c.innerHTML=b,a.parentNode.replaceChild(c,a),c},"textContent"in document.documentElement?(b.setInnerText=function(a,b){a.textContent=b},b.getInnerText=function(a){return a.textContent}):(b.setInnerText=function(a,b){a.innerText=b},b.getInnerText=function(a){return a.innerText}),b.getParentWindow=function(a){return a.defaultView||a.parentWindow})}),ace.define("ace/lib/oop",["require","exports","module"],function(a,b,c){"use strict";b.inherits=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})},b.mixin=function(a,b){for(var c in b)a[c]=b[c];return a},b.implement=function(a,c){b.mixin(a,c)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],function(a,b,c){"use strict";a("./fixoldbrowsers");var d=a("./oop"),e=function(){var a,b,c={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}};for(b in c.FUNCTION_KEYS)a=c.FUNCTION_KEYS[b].toLowerCase(),c[a]=parseInt(b,10);for(b in c.PRINTABLE_KEYS)a=c.PRINTABLE_KEYS[b].toLowerCase(),c[a]=parseInt(b,10);return d.mixin(c,c.MODIFIER_KEYS),d.mixin(c,c.PRINTABLE_KEYS),d.mixin(c,c.FUNCTION_KEYS),c.enter=c.return,c.escape=c.esc,c.del=c.delete,c[173]="-",function(){for(var a=["cmd","ctrl","alt","shift"],b=Math.pow(2,a.length);b--;)c.KEY_MODS[b]=a.filter(function(a){return b&c.KEY_MODS[a]}).join("-")+"-"}(),c.KEY_MODS[0]="",c.KEY_MODS[-1]="input",c}();d.mixin(b,e),b.keyCodeToString=function(a){var b=e[a];return"string"!=typeof b&&(b=String.fromCharCode(a)),b.toLowerCase()}}),ace.define("ace/lib/useragent",["require","exports","module"],function(a,b,c){"use strict";if(b.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},b.getOS=function(){return b.isMac?b.OS.MAC:b.isLinux?b.OS.LINUX:b.OS.WINDOWS},"object"==typeof navigator){var d=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),e=navigator.userAgent;b.isWin="win"==d,b.isMac="mac"==d,b.isLinux="linux"==d,b.isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((e.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((e.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),b.isOldIE=b.isIE&&b.isIE<9,b.isGecko=b.isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product,b.isOldGecko=b.isGecko&&parseInt((e.match(/rv\:(\d+)/)||[])[1],10)<4,b.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),b.isWebKit=parseFloat(e.split("WebKit/")[1])||void 0,b.isChrome=parseFloat(e.split(" Chrome/")[1])||void 0,b.isAIR=e.indexOf("AdobeAIR")>=0,b.isIPad=e.indexOf("iPad")>=0,b.isTouchPad=e.indexOf("TouchPad")>=0,b.isChromeOS=e.indexOf(" CrOS ")>=0}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(a,b,c){"use strict";function d(a,b,c){var d=g(b);if(!f.isMac&&h){if((h[91]||h[92])&&(d|=8),h.altGr){if(3==(3&d))return;h.altGr=0}if(18===c||17===c){var j="location"in b?b.location:b.keyLocation;if(17===c&&1===j)i=b.timeStamp;else if(18===c&&3===d&&2===j){var k=-i;i=b.timeStamp,k+=i,k<3&&(h.altGr=!0)}}}if(c in e.MODIFIER_KEYS){switch(e.MODIFIER_KEYS[c]){case"Alt":d=2;break;case"Shift":d=4;break;case"Ctrl":d=1;break;default:d=8}c=-1}if(8&d&&(91===c||93===c)&&(c=-1),!d&&13===c){var j="location"in b?b.location:b.keyLocation;if(3===j&&(a(b,d,-c),b.defaultPrevented))return}if(f.isChromeOS&&8&d){if(a(b,d,c),b.defaultPrevented)return;d&=-9}return!!(d||c in e.FUNCTION_KEYS||c in e.PRINTABLE_KEYS)&&a(b,d,c)}var e=a("./keys"),f=a("./useragent");b.addListener=function(a,b,c){if(a.addEventListener)return a.addEventListener(b,c,!1);if(a.attachEvent){var d=function(){c.call(a,window.event)};c._wrapper=d,a.attachEvent("on"+b,d)}},b.removeListener=function(a,b,c){return a.removeEventListener?a.removeEventListener(b,c,!1):void(a.detachEvent&&a.detachEvent("on"+b,c._wrapper||c))},b.stopEvent=function(a){return b.stopPropagation(a),b.preventDefault(a),!1},b.stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},b.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},b.getButton=function(a){return"dblclick"==a.type?0:"contextmenu"==a.type||f.isMac&&a.ctrlKey&&!a.altKey&&!a.shiftKey?2:a.preventDefault?a.button:{1:0,2:2,4:1}[a.button]},b.capture=function(a,c,d){function e(a){c&&c(a),d&&d(a),b.removeListener(document,"mousemove",c,!0),b.removeListener(document,"mouseup",e,!0),b.removeListener(document,"dragstart",e,!0)}return b.addListener(document,"mousemove",c,!0),b.addListener(document,"mouseup",e,!0),b.addListener(document,"dragstart",e,!0),e},b.addMouseWheelListener=function(a,c){"onmousewheel"in a?b.addListener(a,"mousewheel",function(a){var b=8;void 0!==a.wheelDeltaX?(a.wheelX=-a.wheelDeltaX/b,a.wheelY=-a.wheelDeltaY/b):(a.wheelX=0,a.wheelY=-a.wheelDelta/b),c(a)}):"onwheel"in a?b.addListener(a,"wheel",function(a){var b=.35;switch(a.deltaMode){case a.DOM_DELTA_PIXEL:a.wheelX=a.deltaX*b||0,a.wheelY=a.deltaY*b||0;break;case a.DOM_DELTA_LINE:case a.DOM_DELTA_PAGE:a.wheelX=5*(a.deltaX||0),a.wheelY=5*(a.deltaY||0)}c(a)}):b.addListener(a,"DOMMouseScroll",function(a){a.axis&&a.axis==a.HORIZONTAL_AXIS?(a.wheelX=5*(a.detail||0),a.wheelY=0):(a.wheelX=0,a.wheelY=5*(a.detail||0)),c(a)})},b.addMultiMouseDownListener=function(a,c,d,e){var g,h,i,j=0,k={2:"dblclick",3:"tripleclick",4:"quadclick"};b.addListener(a,"mousedown",function(a){if(0!==b.getButton(a)?j=0:a.detail>1?(j++,j>4&&(j=1)):j=1,f.isIE){var l=Math.abs(a.clientX-g)>5||Math.abs(a.clientY-h)>5;i&&!l||(j=1),i&&clearTimeout(i),i=setTimeout(function(){i=null},c[j-1]||600),1==j&&(g=a.clientX,h=a.clientY)}if(a._clicks=j,d[e]("mousedown",a),j>4)j=0;else if(j>1)return d[e](k[j],a)}),f.isOldIE&&b.addListener(a,"dblclick",function(a){j=2,i&&clearTimeout(i),i=setTimeout(function(){i=null},c[j-1]||600),d[e]("mousedown",a),d[e](k[j],a)})};var g=!f.isMac||!f.isOpera||"KeyboardEvent"in window?function(a){return 0|(a.ctrlKey?1:0)|(a.altKey?2:0)|(a.shiftKey?4:0)|(a.metaKey?8:0)}:function(a){return 0|(a.metaKey?1:0)|(a.altKey?2:0)|(a.shiftKey?4:0)|(a.ctrlKey?8:0)};b.getModifierString=function(a){return e.KEY_MODS[g(a)]};var h=null,i=0;if(b.addCommandKeyListener=function(a,c){var e=b.addListener;if(f.isOldGecko||f.isOpera&&!("KeyboardEvent"in window)){var g=null;e(a,"keydown",function(a){g=a.keyCode}),e(a,"keypress",function(a){return d(c,a,g)})}else{var i=null;e(a,"keydown",function(a){h[a.keyCode]=!0;var b=d(c,a,a.keyCode);return i=a.defaultPrevented,b}),e(a,"keypress",function(a){i&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)&&(b.stopEvent(a),i=null)}),e(a,"keyup",function(a){h[a.keyCode]=null}),h||(h=Object.create(null),e(window,"focus",function(a){h=Object.create(null)}))}},window.postMessage&&!f.isOldIE){var j=1;b.nextTick=function(a,c){c=c||window;var d="zero-timeout-message-"+j;b.addListener(c,"message",function e(f){f.data==d&&(b.stopPropagation(f),b.removeListener(c,"message",e),a())}),c.postMessage(d,"*")}}b.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,b.nextFrame?b.nextFrame=b.nextFrame.bind(window):b.nextFrame=function(a){setTimeout(a,17)}}),ace.define("ace/lib/lang",["require","exports","module"],function(a,b,c){"use strict";b.last=function(a){return a[a.length-1]},b.stringReverse=function(a){return a.split("").reverse().join("")},b.stringRepeat=function(a,b){for(var c="";b>0;)1&b&&(c+=a),(b>>=1)&&(a+=a);return c};var d=/^\s\s*/,e=/\s\s*$/;b.stringTrimLeft=function(a){return a.replace(d,"")},b.stringTrimRight=function(a){return a.replace(e,"")},b.copyObject=function(a){var b={};for(var c in a)b[c]=a[c];return b},b.copyArray=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&"object"==typeof a[c]?b[c]=this.copyObject(a[c]):b[c]=a[c];return b},b.deepCopy=function(a){if("object"!=typeof a||!a)return a;var c=a.constructor;if(c===RegExp)return a;var d=c();for(var e in a)"object"==typeof a[e]?d[e]=b.deepCopy(a[e]):d[e]=a[e];return d},b.arrayToMap=function(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=1;return b},b.createMap=function(a){var b=Object.create(null);for(var c in a)b[c]=a[c];return b},b.arrayRemove=function(a,b){for(var c=0;c<=a.length;c++)b===a[c]&&a.splice(c,1)},b.escapeRegExp=function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},b.escapeHTML=function(a){return a.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},b.getMatchOffsets=function(a,b){var c=[];return a.replace(b,function(a){c.push({offset:arguments[arguments.length-2],length:a.length})}),c},b.deferredCall=function(a){var b=null,c=function(){b=null,a()},d=function(a){return d.cancel(),b=setTimeout(c,a||0),d};return d.schedule=d,d.call=function(){return this.cancel(),a(),d},d.cancel=function(){return clearTimeout(b),b=null,d},d.isPending=function(){return b},d},b.delayedCall=function(a,b){var c=null,d=function(){c=null,a()},e=function(a){null==c&&(c=setTimeout(d,a||b))};return e.delay=function(a){c&&clearTimeout(c),c=setTimeout(d,a||b)},e.schedule=e,e.call=function(){this.cancel(),a()},e.cancel=function(){c&&clearTimeout(c),c=null},e.isPending=function(){return c},e}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(a,b,c){"use strict";var d=a("../lib/event"),e=a("../lib/useragent"),f=a("../lib/dom"),g=a("../lib/lang"),h=e.isChrome<18,i=e.isIE,j=function(a,b){function c(a){if(!p){if(B)b=0,c=a?0:l.value.length-1;else var b=a?2:1,c=2;try{l.setSelectionRange(b,c)}catch(a){}}}function j(){p||(l.value=m,e.isWebKit&&u.schedule())}function k(){clearTimeout(O),O=setTimeout(function(){q&&(l.style.cssText=q,q=""),null==b.renderer.$keepTextAreaAtCursor&&(b.renderer.$keepTextAreaAtCursor=!0,b.renderer.$moveTextAreaToCursor())},e.isOldIE?200:0)}var l=f.createElement("textarea");l.className="ace_text-input",e.isTouchPad&&l.setAttribute("x-palm-disable-auto-cap",!0),l.setAttribute("wrap","off"),l.setAttribute("autocorrect","off"),l.setAttribute("autocapitalize","off"),l.setAttribute("spellcheck",!1),l.style.opacity="0",e.isOldIE&&(l.style.top="-100px"),a.insertBefore(l,a.firstChild);var m="",n=!1,o=!1,p=!1,q="",r=!0;try{var s=document.activeElement===l}catch(a){}d.addListener(l,"blur",function(a){b.onBlur(a),s=!1}),d.addListener(l,"focus",function(a){s=!0,b.onFocus(a),c()}),this.focus=function(){l.style.position="fixed",l.style.top="-10000000px",l.focus(),setTimeout(function(){l.style.position=""},0)},this.blur=function(){l.blur()},this.isFocused=function(){return s};var t=g.delayedCall(function(){s&&c(r)}),u=g.delayedCall(function(){p||(l.value=m,s&&c())});e.isWebKit||b.addEventListener("changeSelection",function(){b.selection.isEmpty()!=r&&(r=!r,t.schedule())}),j(),s&&b.onFocus();var v=function(a){return 0===a.selectionStart&&a.selectionEnd===a.value.length};if(!l.setSelectionRange&&l.createTextRange&&(l.setSelectionRange=function(a,b){var c=this.createTextRange();c.collapse(!0),c.moveStart("character",a),c.moveEnd("character",b),c.select()},v=function(a){try{var b=a.ownerDocument.selection.createRange()}catch(a){}return!(!b||b.parentElement()!=a)&&b.text==a.value}),e.isOldIE){var w=!1,x=function(a){if(!w){var b=l.value;if(!p&&b&&b!=m){if(a&&b==m[0])return y.schedule();D(b),w=!0,j(),w=!1}}},y=g.delayedCall(x);d.addListener(l,"propertychange",x);var z={13:1,27:1};d.addListener(l,"keyup",function(a){return!p||l.value&&!z[a.keyCode]||setTimeout(M,0),(l.value.charCodeAt(0)||0)<129?y.call():void(p?L():K())}),d.addListener(l,"keydown",function(a){y.schedule(50)})}var A=function(a){n?n=!1:v(l)?(b.selectAll(),c()):B&&c(b.selection.isEmpty())},B=null;this.setInputHandler=function(a){B=a},this.getInputHandler=function(){return B};var C=!1,D=function(a){B&&(a=B(a),B=null),o?(c(),a&&b.onPaste(a),o=!1):a==m.charAt(0)?C?b.execCommand("del",{source:"ace"}):b.execCommand("backspace",{source:"ace"}):(a.substring(0,2)==m?a=a.substr(2):a.charAt(0)==m.charAt(0)?a=a.substr(1):a.charAt(a.length-1)==m.charAt(0)&&(a=a.slice(0,-1)),a.charAt(a.length-1)==m.charAt(0)&&(a=a.slice(0,-1)),a&&b.onTextInput(a)),C&&(C=!1)},E=function(a){if(!p){var b=l.value;D(b),j()}},F=function(a,b){var c=a.clipboardData||window.clipboardData;if(c&&!h){var d=i?"Text":"text/plain";return b?c.setData(d,b)!==!1:c.getData(d)}},G=function(a,e){var f=b.getCopyText();return f?void(F(a,f)?(e?b.onCut():b.onCopy(),d.preventDefault(a)):(n=!0,l.value=f,l.select(),setTimeout(function(){n=!1,j(),c(),e?b.onCut():b.onCopy()}))):d.preventDefault(a)},H=function(a){G(a,!0)},I=function(a){G(a,!1)},J=function(a){var f=F(a);"string"==typeof f?(f&&b.onPaste(f),e.isIE&&setTimeout(c),d.preventDefault(a)):(l.value="",o=!0)};d.addCommandKeyListener(l,b.onCommandKey.bind(b)),d.addListener(l,"select",A),d.addListener(l,"input",E),d.addListener(l,"cut",H),d.addListener(l,"copy",I),d.addListener(l,"paste",J),"oncut"in l&&"oncopy"in l&&"onpaste"in l||d.addListener(a,"keydown",function(a){if((!e.isMac||a.metaKey)&&a.ctrlKey)switch(a.keyCode){case 67:I(a);break;case 86:J(a);break;case 88:H(a)}});var K=function(a){p||!b.onCompositionStart||b.$readOnly||(p={},b.onCompositionStart(),setTimeout(L,0),b.on("mousedown",M),b.selection.isEmpty()||(b.insert(""),b.session.markUndoGroup(),b.selection.clearSelection()),b.session.markUndoGroup())},L=function(){if(p&&b.onCompositionUpdate&&!b.$readOnly){var a=l.value.replace(/\x01/g,"");if(p.lastValue!==a&&(b.onCompositionUpdate(a),p.lastValue&&b.undo(),p.lastValue=a,p.lastValue)){var c=b.selection.getRange();b.insert(p.lastValue),b.session.markUndoGroup(),p.range=b.selection.getRange(),b.selection.setRange(c),b.selection.clearSelection()}}},M=function(a){if(b.onCompositionEnd&&!b.$readOnly){var c=p;p=!1;var d=setTimeout(function(){d=null;var a=l.value.replace(/\x01/g,"");p||(a==c.lastValue?j():!c.lastValue&&a&&(j(),D(a)))});B=function(a){return d&&clearTimeout(d),a=a.replace(/\x01/g,""),a==c.lastValue?"":(c.lastValue&&d&&b.undo(),a)},b.onCompositionEnd(),b.removeListener("mousedown",M),"compositionend"==a.type&&c.range&&b.selection.setRange(c.range)}},N=g.delayedCall(L,50);d.addListener(l,"compositionstart",K),e.isGecko?d.addListener(l,"text",function(){N.schedule()}):(d.addListener(l,"keyup",function(){N.schedule()}),d.addListener(l,"keydown",function(){N.schedule()})),d.addListener(l,"compositionend",M),this.getElement=function(){return l},this.setReadOnly=function(a){l.readOnly=a},this.onContextMenu=function(a){C=!0,c(b.selection.isEmpty()),b._emit("nativecontextmenu",{target:b,domEvent:a}),this.moveToMouse(a,!0)},this.moveToMouse=function(a,c){if(c||!e.isOldIE){q||(q=l.style.cssText),l.style.cssText=(c?"z-index:100000;":"")+"height:"+l.style.height+";"+(e.isIE?"opacity:0.1;":"");var g=b.container.getBoundingClientRect(),h=f.computedStyle(b.container),i=g.top+(parseInt(h.borderTopWidth)||0),j=g.left+(parseInt(g.borderLeftWidth)||0),m=g.bottom-i-l.clientHeight-2,n=function(a){l.style.left=a.clientX-j-2+"px",l.style.top=Math.min(a.clientY-i-2,m)+"px"};n(a),"mousedown"==a.type&&(b.renderer.$keepTextAreaAtCursor&&(b.renderer.$keepTextAreaAtCursor=null),e.isWin&&!e.isOldIE&&d.capture(b.container,n,k))}},this.onContextMenuClose=k;var O,P=function(a){b.textInput.onContextMenu(a),k()};d.addListener(b.renderer.scroller,"contextmenu",P),d.addListener(l,"contextmenu",P)};b.TextInput=j}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(a,b,c){"use strict";function d(a){a.$clickSelection=null;var b=a.editor;b.setDefaultHandler("mousedown",this.onMouseDown.bind(a)),b.setDefaultHandler("dblclick",this.onDoubleClick.bind(a)),b.setDefaultHandler("tripleclick",this.onTripleClick.bind(a)),b.setDefaultHandler("quadclick",this.onQuadClick.bind(a)),b.setDefaultHandler("mousewheel",this.onMouseWheel.bind(a));var c=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];c.forEach(function(b){a[b]=this[b]},this),a.selectByLines=this.extendSelectionBy.bind(a,"getLineRange"),a.selectByWords=this.extendSelectionBy.bind(a,"getWordRange")}function e(a,b,c,d){return Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))}function f(a,b){if(a.start.row==a.end.row)var c=2*b.column-a.start.column-a.end.column;else if(a.start.row!=a.end.row-1||a.start.column||a.end.column)var c=2*b.row-a.start.row-a.end.row;else var c=b.column-4;return c<0?{cursor:a.start,anchor:a.end}:{cursor:a.end,anchor:a.start}}var g=(a("../lib/dom"),a("../lib/event"),a("../lib/useragent"),0);(function(){this.onMouseDown=function(a){var b=a.inSelection(),c=a.getDocumentPosition();this.mousedownEvent=a;var d=this.editor,e=a.getButton();if(0!==e){
var f=d.getSelectionRange(),g=f.isEmpty();return d.$blockScrolling++,g&&d.selection.moveToPosition(c),d.$blockScrolling--,void d.textInput.onContextMenu(a.domEvent)}return this.mousedownEvent.time=Date.now(),!b||d.isFocused()||(d.focus(),!this.$focusTimout||this.$clickSelection||d.inMultiSelectMode)?(this.captureMouse(a),this.startSelect(c,a.domEvent._clicks>1),a.preventDefault()):(this.setState("focusWait"),void this.captureMouse(a))},this.startSelect=function(a,b){a=a||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var c=this.editor;c.$blockScrolling++,this.mousedownEvent.getShiftKey()?c.selection.selectToPosition(a):b||c.selection.moveToPosition(a),b||this.select(),c.renderer.scroller.setCapture&&c.renderer.scroller.setCapture(),c.setStyle("ace_selecting"),this.setState("select"),c.$blockScrolling--},this.select=function(){var a,b=this.editor,c=b.renderer.screenToTextCoordinates(this.x,this.y);if(b.$blockScrolling++,this.$clickSelection){var d=this.$clickSelection.comparePoint(c);if(d==-1)a=this.$clickSelection.end;else if(1==d)a=this.$clickSelection.start;else{var e=f(this.$clickSelection,c);c=e.cursor,a=e.anchor}b.selection.setSelectionAnchor(a.row,a.column)}b.selection.selectToPosition(c),b.$blockScrolling--,b.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(a){var b,c=this.editor,d=c.renderer.screenToTextCoordinates(this.x,this.y),e=c.selection[a](d.row,d.column);if(c.$blockScrolling++,this.$clickSelection){var g=this.$clickSelection.comparePoint(e.start),h=this.$clickSelection.comparePoint(e.end);if(g==-1&&h<=0)b=this.$clickSelection.end,e.end.row==d.row&&e.end.column==d.column||(d=e.start);else if(1==h&&g>=0)b=this.$clickSelection.start,e.start.row==d.row&&e.start.column==d.column||(d=e.end);else if(g==-1&&1==h)d=e.end,b=e.start;else{var i=f(this.$clickSelection,d);d=i.cursor,b=i.anchor}c.selection.setSelectionAnchor(b.row,b.column)}c.selection.selectToPosition(d),c.$blockScrolling--,c.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var a=e(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),b=Date.now();(a>g||b-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(a){var b=a.getDocumentPosition(),c=this.editor,d=c.session,e=d.getBracketRange(b);e?(e.isEmpty()&&(e.start.column--,e.end.column++),this.setState("select")):(e=c.selection.getWordRange(b.row,b.column),this.setState("selectByWords")),this.$clickSelection=e,this.select()},this.onTripleClick=function(a){var b=a.getDocumentPosition(),c=this.editor;this.setState("selectByLines");var d=c.getSelectionRange();d.isMultiLine()&&d.contains(b.row,b.column)?(this.$clickSelection=c.selection.getLineRange(d.start.row),this.$clickSelection.end=c.selection.getLineRange(d.end.row).end):this.$clickSelection=c.selection.getLineRange(b.row),this.select()},this.onQuadClick=function(a){var b=this.editor;b.selectAll(),this.$clickSelection=b.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(a){if(!a.getAccelKey()){a.getShiftKey()&&a.wheelY&&!a.wheelX&&(a.wheelX=a.wheelY,a.wheelY=0);var b=a.domEvent.timeStamp,c=b-(this.$lastScrollTime||0),d=this.editor,e=d.renderer.isScrollableBy(a.wheelX*a.speed,a.wheelY*a.speed);return e||c<200?(this.$lastScrollTime=b,d.renderer.scrollBy(a.wheelX*a.speed,a.wheelY*a.speed),a.stop()):void 0}}}).call(d.prototype),b.DefaultHandlers=d}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(a,b,c){"use strict";function d(a){this.isOpen=!1,this.$element=null,this.$parentNode=a}var e=(a("./lib/oop"),a("./lib/dom"));(function(){this.$init=function(){return this.$element=e.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(a){e.setInnerText(this.getElement(),a)},this.setHtml=function(a){this.getElement().innerHTML=a},this.setPosition=function(a,b){this.getElement().style.left=a+"px",this.getElement().style.top=b+"px"},this.setClassName=function(a){e.addCssClass(this.getElement(),a)},this.show=function(a,b,c){null!=a&&this.setText(a),null!=b&&null!=c&&this.setPosition(b,c),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth}}).call(d.prototype),b.Tooltip=d}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(a,b,c){"use strict";function d(a){function b(){var b=l.getDocumentPosition().row,e=i.$annotations[b];if(!e)return c();var f=g.session.getLength();if(b==f){var h=g.renderer.pixelToScreenCoordinates(0,l.y).row,k=l.$pos;if(h>g.session.documentToScreenRow(k.row,k.column))return c()}if(m!=e)if(m=e.text.join("<br/>"),j.setHtml(m),j.show(),g.on("mousewheel",c),a.$tooltipFollowsMouse)d(l);else{var n=i.$cells[g.session.documentToScreenRow(b,0)].element,o=n.getBoundingClientRect(),p=j.getElement().style;p.left=o.right+"px",p.top=o.bottom+"px"}}function c(){k&&(k=clearTimeout(k)),m&&(j.hide(),m=null,g.removeEventListener("mousewheel",c))}function d(a){j.setPosition(a.x,a.y)}var g=a.editor,i=g.renderer.$gutterLayer,j=new e(g.container);a.editor.setDefaultHandler("guttermousedown",function(b){if(g.isFocused()&&0==b.getButton()){var c=i.getRegion(b);if("foldWidgets"!=c){var d=b.getDocumentPosition().row,e=g.session.selection;if(b.getShiftKey())e.selectTo(d,0);else{if(2==b.domEvent.detail)return g.selectAll(),b.preventDefault();a.$clickSelection=g.selection.getLineRange(d)}return a.setState("selectByLines"),a.captureMouse(b),b.preventDefault()}}});var k,l,m;a.editor.setDefaultHandler("guttermousemove",function(e){var g=e.domEvent.target||e.domEvent.srcElement;return f.hasCssClass(g,"ace_fold-widget")?c():(m&&a.$tooltipFollowsMouse&&d(e),l=e,void(k||(k=setTimeout(function(){k=null,l&&!a.isMousePressed?b():c()},50))))}),h.addListener(g.renderer.$gutter,"mouseout",function(a){l=null,m&&!k&&(k=setTimeout(function(){k=null,c()},50))}),g.on("changeSession",c)}function e(a){i.call(this,a)}var f=a("../lib/dom"),g=a("../lib/oop"),h=a("../lib/event"),i=a("../tooltip").Tooltip;g.inherits(e,i),function(){this.setPosition=function(a,b){var c=window.innerWidth||document.documentElement.clientWidth,d=window.innerHeight||document.documentElement.clientHeight,e=this.getWidth(),f=this.getHeight();a+=15,b+=15,a+e>c&&(a-=a+e-c),b+f>d&&(b-=20+f),i.prototype.setPosition.call(this,a,b)}}.call(e.prototype),b.GutterHandler=d}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(a,b,c){"use strict";var d=a("../lib/event"),e=a("../lib/useragent"),f=b.MouseEvent=function(a,b){this.domEvent=a,this.editor=b,this.x=this.clientX=a.clientX,this.y=this.clientY=a.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){d.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){d.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var a=this.editor,b=a.getSelectionRange();if(b.isEmpty())this.$inSelection=!1;else{var c=this.getDocumentPosition();this.$inSelection=b.contains(c.row,c.column)}return this.$inSelection},this.getButton=function(){return d.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=e.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(f.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(a,b,c){"use strict";function d(a){function b(a,b){var c=Date.now(),d=!b||a.row!=b.row,f=!b||a.column!=b.column;if(!C||d||f)q.$blockScrolling+=1,q.moveCursorToPosition(a),q.$blockScrolling-=1,C=c,D={x:u,y:v};else{var g=e(D.x,D.y,u,v);g>k?C=null:c-C>=j&&(q.renderer.scrollCursorIntoView(),C=null)}}function c(a,b){var c=Date.now(),d=q.renderer.layerConfig.lineHeight,e=q.renderer.layerConfig.characterWidth,f=q.renderer.scroller.getBoundingClientRect(),g={x:{left:u-f.left,right:f.right-u},y:{top:v-f.top,bottom:f.bottom-v}},h=Math.min(g.x.left,g.x.right),j=Math.min(g.y.top,g.y.bottom),k={row:a.row,column:a.column};h/e<=2&&(k.column+=g.x.left<g.x.right?-3:2),j/d<=1&&(k.row+=g.y.top<g.y.bottom?-1:1);var l=a.row!=k.row,m=a.column!=k.column,n=!b||a.row!=b.row;l||m&&!n?B?c-B>=i&&q.renderer.scrollCursorIntoView(k):B=c:B=null}function d(){var a=y;y=q.renderer.screenToTextCoordinates(u,v),b(y,a),c(y,a)}function l(){x=q.selection.toOrientedRange(),t=q.session.addMarker(x,"ace_selection",q.getSelectionStyle()),q.clearSelection(),q.isFocused()&&q.renderer.$cursorLayer.setBlinking(!1),clearInterval(w),d(),w=setInterval(d,20),F=0,g.addListener(document,"mousemove",n)}function m(){clearInterval(w),q.session.removeMarker(t),t=null,q.$blockScrolling+=1,q.selection.fromOrientedRange(x),q.$blockScrolling-=1,q.isFocused()&&!A&&q.renderer.$cursorLayer.setBlinking(!q.getReadOnly()),x=null,y=null,F=0,B=null,C=null,g.removeListener(document,"mousemove",n)}function n(){null==G&&(G=setTimeout(function(){null!=G&&t&&m()},20))}function o(a){var b=a.types;return!b||Array.prototype.some.call(b,function(a){return"text/plain"==a||"Text"==a})}function p(a){var b=["copy","copymove","all","uninitialized"],c=["move","copymove","linkmove","all","uninitialized"],d=h.isMac?a.altKey:a.ctrlKey,e="uninitialized";try{e=a.dataTransfer.effectAllowed.toLowerCase()}catch(a){}var f="none";return d&&b.indexOf(e)>=0?f="copy":c.indexOf(e)>=0?f="move":b.indexOf(e)>=0&&(f="copy"),f}var q=a.editor,r=f.createElement("img");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h.isOpera&&(r.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var s=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];s.forEach(function(b){a[b]=this[b]},this),q.addEventListener("mousedown",this.onMouseDown.bind(a));var t,u,v,w,x,y,z,A,B,C,D,E=q.container,F=0;this.onDragStart=function(a){if(this.cancelDrag||!E.draggable){var b=this;return setTimeout(function(){b.startSelect(),b.captureMouse(a)},0),a.preventDefault()}x=q.getSelectionRange();var c=a.dataTransfer;c.effectAllowed=q.getReadOnly()?"copy":"copyMove",h.isOpera&&(q.container.appendChild(r),r.scrollTop=0),c.setDragImage&&c.setDragImage(r,0,0),h.isOpera&&q.container.removeChild(r),c.clearData(),c.setData("Text",q.session.getTextRange()),A=!0,this.setState("drag")},this.onDragEnd=function(a){if(E.draggable=!1,A=!1,this.setState(null),!q.getReadOnly()){var b=a.dataTransfer.dropEffect;z||"move"!=b||q.session.remove(q.getSelectionRange()),q.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(a){if(!q.getReadOnly()&&o(a.dataTransfer))return u=a.clientX,v=a.clientY,t||l(),F++,a.dataTransfer.dropEffect=z=p(a),g.preventDefault(a)},this.onDragOver=function(a){if(!q.getReadOnly()&&o(a.dataTransfer))return u=a.clientX,v=a.clientY,t||(l(),F++),null!==G&&(G=null),a.dataTransfer.dropEffect=z=p(a),g.preventDefault(a)},this.onDragLeave=function(a){if(F--,F<=0&&t)return m(),z=null,g.preventDefault(a)},this.onDrop=function(a){if(y){var b=a.dataTransfer;if(A)switch(z){case"move":x=x.contains(y.row,y.column)?{start:y,end:y}:q.moveText(x,y);break;case"copy":x=q.moveText(x,y,!0)}else{var c=b.getData("Text");x={start:y,end:q.session.insert(y,c)},q.focus(),z=null}return m(),g.preventDefault(a)}},g.addListener(E,"dragstart",this.onDragStart.bind(a)),g.addListener(E,"dragend",this.onDragEnd.bind(a)),g.addListener(E,"dragenter",this.onDragEnter.bind(a)),g.addListener(E,"dragover",this.onDragOver.bind(a)),g.addListener(E,"dragleave",this.onDragLeave.bind(a)),g.addListener(E,"drop",this.onDrop.bind(a));var G=null}function e(a,b,c,d){return Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))}var f=a("../lib/dom"),g=a("../lib/event"),h=a("../lib/useragent"),i=200,j=200,k=5;(function(){this.dragWait=function(){var a=Date.now()-this.mousedownEvent.time;a>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var a=this.editor.container;a.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(a){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var a=this.editor,b=a.container;b.draggable=!0,a.renderer.$cursorLayer.setBlinking(!1),a.setStyle("ace_dragging");var c=h.isWin?"default":"move";a.renderer.setCursorStyle(c),this.setState("dragReady")},this.onMouseDrag=function(a){var b=this.editor.container;if(h.isIE&&"dragReady"==this.state){var c=e(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>3&&b.dragDrop()}if("dragWait"===this.state){var c=e(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>0&&(b.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(a){if(this.$dragEnabled){this.mousedownEvent=a;var b=this.editor,c=a.inSelection(),d=a.getButton(),e=a.domEvent.detail||1;if(1===e&&0===d&&c){if(a.editor.inMultiSelectMode&&(a.getAccelKey()||a.getShiftKey()))return;this.mousedownEvent.time=Date.now();var f=a.domEvent.target||a.domEvent.srcElement;if("unselectable"in f&&(f.unselectable="on"),b.getDragDelay()){if(h.isWebKit){this.cancelDrag=!0;var g=b.container;g.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(a,this.onMouseDrag.bind(this)),a.defaultPrevented=!0}}}}).call(d.prototype),b.DragdropHandler=d}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(a,b,c){"use strict";var d=a("./dom");b.get=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onreadystatechange=function(){4===c.readyState&&b(c.responseText)},c.send(null)},b.loadScript=function(a,b){var c=d.getDocumentHead(),e=document.createElement("script");e.src=a,c.appendChild(e),e.onload=e.onreadystatechange=function(a,c){!c&&e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(e=e.onload=e.onreadystatechange=null,c||b())}},b.qualifyURL=function(a){var b=document.createElement("a");return b.href=a,b.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(a,b,c){"use strict";var d={},e=function(){this.propagationStopped=!0},f=function(){this.defaultPrevented=!0};d._emit=d._dispatchEvent=function(a,b){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var c=this._eventRegistry[a]||[],d=this._defaultHandlers[a];if(c.length||d){"object"==typeof b&&b||(b={}),b.type||(b.type=a),b.stopPropagation||(b.stopPropagation=e),b.preventDefault||(b.preventDefault=f),c=c.slice();for(var g=0;g<c.length&&(c[g](b,this),!b.propagationStopped);g++);return d&&!b.defaultPrevented?d(b,this):void 0}},d._signal=function(a,b){var c=(this._eventRegistry||{})[a];if(c){c=c.slice();for(var d=0;d<c.length;d++)c[d](b,this)}},d.once=function(a,b){var c=this;b&&this.addEventListener(a,function d(){c.removeEventListener(a,d),b.apply(null,arguments)})},d.setDefaultHandler=function(a,b){var c=this._defaultHandlers;if(c||(c=this._defaultHandlers={_disabled_:{}}),c[a]){var d=c[a],e=c._disabled_[a];e||(c._disabled_[a]=e=[]),e.push(d);var f=e.indexOf(b);f!=-1&&e.splice(f,1)}c[a]=b},d.removeDefaultHandler=function(a,b){var c=this._defaultHandlers;if(c){var d=c._disabled_[a];if(c[a]==b){c[a];d&&this.setDefaultHandler(a,d.pop())}else if(d){var e=d.indexOf(b);e!=-1&&d.splice(e,1)}}},d.on=d.addEventListener=function(a,b,c){this._eventRegistry=this._eventRegistry||{};var d=this._eventRegistry[a];return d||(d=this._eventRegistry[a]=[]),d.indexOf(b)==-1&&d[c?"unshift":"push"](b),b},d.off=d.removeListener=d.removeEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(c){var d=c.indexOf(b);d!==-1&&c.splice(d,1)}},d.removeAllListeners=function(a){this._eventRegistry&&(this._eventRegistry[a]=[])},b.EventEmitter=d}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,b,c){"no use strict";function d(a){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function e(a,b){var c=new Error(a);c.data=b,"object"==typeof console&&console.error&&console.error(c),setTimeout(function(){throw c})}var f=a("./oop"),g=a("./event_emitter").EventEmitter,h={setOptions:function(a){Object.keys(a).forEach(function(b){this.setOption(b,a[b])},this)},getOptions:function(a){var b={};return a?Array.isArray(a)||(b=a,a=Object.keys(b)):a=Object.keys(this.$options),a.forEach(function(a){b[a]=this.getOption(a)},this),b},setOption:function(a,b){if(this["$"+a]!==b){var c=this.$options[a];if(!c)return d('misspelled option "'+a+'"');if(c.forwardTo)return this[c.forwardTo]&&this[c.forwardTo].setOption(a,b);c.handlesSet||(this["$"+a]=b),c&&c.set&&c.set.call(this,b)}},getOption:function(a){var b=this.$options[a];return b?b.forwardTo?this[b.forwardTo]&&this[b.forwardTo].getOption(a):b&&b.get?b.get.call(this):this["$"+a]:d('misspelled option "'+a+'"')}},i=function(){this.$defaultOptions={}};(function(){f.implement(this,g),this.defineOptions=function(a,b,c){return a.$options||(this.$defaultOptions[b]=a.$options={}),Object.keys(c).forEach(function(b){var d=c[b];"string"==typeof d&&(d={forwardTo:d}),d.name||(d.name=b),a.$options[d.name]=d,"initialValue"in d&&(a["$"+d.name]=d.initialValue)}),f.implement(a,h),this},this.resetOptions=function(a){Object.keys(a.$options).forEach(function(b){var c=a.$options[b];"value"in c&&a.setOption(b,c.value)})},this.setDefaultValue=function(a,b,c){var d=this.$defaultOptions[a]||(this.$defaultOptions[a]={});d[b]&&(d.forwardTo?this.setDefaultValue(d.forwardTo,b,c):d[b].value=c)},this.setDefaultValues=function(a,b){Object.keys(b).forEach(function(c){this.setDefaultValue(a,c,b[c])},this)},this.warn=d,this.reportError=e}).call(i.prototype),b.AppConfig=i}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(a,b,c){"no use strict";function d(d){if(j.packaged=d||a.packaged||c.packaged||i.define&&define.packaged,!i.document)return"";for(var f={},g="",h=document.currentScript||document._currentScript,k=h&&h.ownerDocument||document,l=k.getElementsByTagName("script"),m=0;m<l.length;m++){var n=l[m],o=n.src||n.getAttribute("src");if(o){for(var p=n.attributes,q=0,r=p.length;q<r;q++){var s=p[q];0===s.name.indexOf("data-ace-")&&(f[e(s.name.replace(/^data-ace-/,""))]=s.value)}var t=o.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);t&&(g=t[1])}}g&&(f.base=f.base||g,f.packaged=!0),f.basePath=f.base,f.workerPath=f.workerPath||f.base,f.modePath=f.modePath||f.base,f.themePath=f.themePath||f.base,delete f.base;for(var u in f)"undefined"!=typeof f[u]&&b.set(u,f[u])}function e(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}var f=a("./lib/lang"),g=(a("./lib/oop"),a("./lib/net")),h=a("./lib/app_config").AppConfig;c.exports=b=new h;var i=function(){return this}(),j={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};b.get=function(a){if(!j.hasOwnProperty(a))throw new Error("Unknown config key: "+a);return j[a]},b.set=function(a,b){if(!j.hasOwnProperty(a))throw new Error("Unknown config key: "+a);j[a]=b},b.all=function(){return f.copyObject(j)},b.moduleUrl=function(a,b){if(j.$moduleUrls[a])return j.$moduleUrls[a];var c=a.split("/");b=b||c[c.length-2]||"";var d="snippets"==b?"/":"-",e=c[c.length-1];if("worker"==b&&"-"==d){var f=new RegExp("^"+b+"[\\-_]|[\\-_]"+b+"$","g");e=e.replace(f,"")}(!e||e==b)&&c.length>1&&(e=c[c.length-2]);var g=j[b+"Path"];return null==g?g=j.basePath:"/"==d&&(b=d=""),g&&"/"!=g.slice(-1)&&(g+="/"),g+b+d+e+this.get("suffix")},b.setModuleUrl=function(a,b){return j.$moduleUrls[a]=b},b.$loading={},b.loadModule=function(c,d){var e,f;Array.isArray(c)&&(f=c[0],c=c[1]);try{e=a(c)}catch(a){}if(e&&!b.$loading[c])return d&&d(e);if(b.$loading[c]||(b.$loading[c]=[]),b.$loading[c].push(d),!(b.$loading[c].length>1)){var h=function(){a([c],function(a){b._emit("load.module",{name:c,module:a});var d=b.$loading[c];b.$loading[c]=null,d.forEach(function(b){b&&b(a)})})};return b.get("packaged")?void g.loadScript(b.moduleUrl(c,f),h):h()}},d(!0),b.init=d}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(a,b,c){"use strict";var d=a("../lib/event"),e=a("../lib/useragent"),f=a("./default_handlers").DefaultHandlers,g=a("./default_gutter_handler").GutterHandler,h=a("./mouse_event").MouseEvent,i=a("./dragdrop_handler").DragdropHandler,j=a("../config"),k=function(a){var b=this;this.editor=a,new f(this),new g(this),new i(this);var c=function(b){document.hasFocus&&document.hasFocus()||window.focus(),a.focus()},h=a.renderer.getMouseEventTarget();d.addListener(h,"click",this.onMouseEvent.bind(this,"click")),d.addListener(h,"mousemove",this.onMouseMove.bind(this,"mousemove")),d.addMultiMouseDownListener(h,[400,300,250],this,"onMouseEvent"),a.renderer.scrollBarV&&(d.addMultiMouseDownListener(a.renderer.scrollBarV.inner,[400,300,250],this,"onMouseEvent"),d.addMultiMouseDownListener(a.renderer.scrollBarH.inner,[400,300,250],this,"onMouseEvent"),e.isIE&&(d.addListener(a.renderer.scrollBarV.element,"mousedown",c),d.addListener(a.renderer.scrollBarH.element,"mousedown",c))),d.addMouseWheelListener(a.container,this.onMouseWheel.bind(this,"mousewheel"));var j=a.renderer.$gutter;d.addListener(j,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),d.addListener(j,"click",this.onMouseEvent.bind(this,"gutterclick")),d.addListener(j,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),d.addListener(j,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),d.addListener(h,"mousedown",c),d.addListener(j,"mousedown",function(b){return a.focus(),d.preventDefault(b)}),a.on("mousemove",function(c){if(!b.state&&!b.$dragDelay&&b.$dragEnabled){var d=a.renderer.screenToTextCoordinates(c.x,c.y),e=a.session.selection.getRange(),f=a.renderer;!e.isEmpty()&&e.insideStart(d.row,d.column)?f.setCursorStyle("default"):f.setCursorStyle("")}})};(function(){this.onMouseEvent=function(a,b){this.editor._emit(a,new h(b,this.editor))},this.onMouseMove=function(a,b){var c=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;c&&c.length&&this.editor._emit(a,new h(b,this.editor))},this.onMouseWheel=function(a,b){var c=new h(b,this.editor);c.speed=2*this.$scrollSpeed,c.wheelX=b.wheelX,c.wheelY=b.wheelY,this.editor._emit(a,c)},this.setState=function(a){this.state=a},this.captureMouse=function(a,b){this.x=a.x,this.y=a.y,this.isMousePressed=!0;var c=this.editor.renderer;c.$keepTextAreaAtCursor&&(c.$keepTextAreaAtCursor=null);var f=this,g=function(a){if(a){if(e.isWebKit&&!a.which&&f.releaseMouse)return f.releaseMouse();f.x=a.clientX,f.y=a.clientY,b&&b(a),f.mouseEvent=new h(a,f.editor),f.$mouseMoved=!0}},i=function(a){clearInterval(k),j(),f[f.state+"End"]&&f[f.state+"End"](a),f.state="",null==c.$keepTextAreaAtCursor&&(c.$keepTextAreaAtCursor=!0,c.$moveTextAreaToCursor()),f.isMousePressed=!1,f.$onCaptureMouseMove=f.releaseMouse=null,a&&f.onMouseEvent("mouseup",a)},j=function(){f[f.state]&&f[f.state](),f.$mouseMoved=!1};if(e.isOldIE&&"dblclick"==a.domEvent.type)return setTimeout(function(){i(a)});f.$onCaptureMouseMove=g,f.releaseMouse=d.capture(this.editor.container,g,i);var k=setInterval(j,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var a=function(b){b&&b.domEvent&&"contextmenu"!=b.domEvent.type||(this.editor.off("nativecontextmenu",a),b&&b.domEvent&&d.stopEvent(b.domEvent))}.bind(this);setTimeout(a,10),this.editor.on("nativecontextmenu",a)}}).call(k.prototype),j.defineOptions(k.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:e.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),b.MouseHandler=k}),ace.define("ace/mouse/fold_handler",["require","exports","module"],function(a,b,c){"use strict";function d(a){a.on("click",function(b){var c=b.getDocumentPosition(),d=a.session,e=d.getFoldAt(c.row,c.column,1);e&&(b.getAccelKey()?d.removeFold(e):d.expandFold(e),b.stop())}),a.on("gutterclick",function(b){var c=a.renderer.$gutterLayer.getRegion(b);if("foldWidgets"==c){var d=b.getDocumentPosition().row,e=a.session;e.foldWidgets&&e.foldWidgets[d]&&a.session.onFoldWidgetClick(d,b),a.isFocused()||a.focus(),b.stop()}}),a.on("gutterdblclick",function(b){var c=a.renderer.$gutterLayer.getRegion(b);if("foldWidgets"==c){var d=b.getDocumentPosition().row,e=a.session,f=e.getParentFoldRangeData(d,!0),g=f.range||f.firstRange;if(g){d=g.start.row;var h=e.getFoldAt(d,e.getLine(d).length,1);h?e.removeFold(h):(e.addFold("...",g),a.renderer.scrollCursorIntoView({row:g.start.row,column:0}))}b.stop()}})}b.FoldHandler=d}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(a,b,c){"use strict";var d=a("../lib/keys"),e=a("../lib/event"),f=function(a){this.$editor=a,this.$data={editor:a},this.$handlers=[],this.setDefaultHandler(a.commands)};(function(){this.setDefaultHandler=function(a){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=a,this.addKeyboardHandler(a,0)},this.setKeyboardHandler=function(a){var b=this.$handlers;if(b[b.length-1]!=a){for(;b[b.length-1]&&b[b.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(b[b.length-1]);this.addKeyboardHandler(a,1)}},this.addKeyboardHandler=function(a,b){if(a){"function"!=typeof a||a.handleKeyboard||(a.handleKeyboard=a);var c=this.$handlers.indexOf(a);c!=-1&&this.$handlers.splice(c,1),void 0==b?this.$handlers.push(a):this.$handlers.splice(b,0,a),c==-1&&a.attach&&a.attach(this.$editor)}},this.removeKeyboardHandler=function(a){var b=this.$handlers.indexOf(a);return b!=-1&&(this.$handlers.splice(b,1),a.detach&&a.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var a=this.$data,b=a.editor;return this.$handlers.map(function(c){return c.getStatusText&&c.getStatusText(b,a)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(a,b,c,d){for(var f,g=!1,h=this.$editor.commands,i=this.$handlers.length;i--&&(f=this.$handlers[i].handleKeyboard(this.$data,a,b,c,d),!(f&&f.command&&(g="null"==f.command||h.exec(f.command,this.$editor,f.args,d),g&&d&&a!=-1&&1!=f.passEvent&&1!=f.command.passEvent&&e.stopEvent(d),g))););return g},this.onCommandKey=function(a,b,c){var e=d.keyCodeToString(c);this.$callKeyboardHandlers(b,e,c,a)},this.onTextInput=function(a){var b=this.$callKeyboardHandlers(-1,a);b||this.$editor.commands.exec("insertstring",this.$editor,a)}}).call(f.prototype),b.KeyBinding=f}),ace.define("ace/range",["require","exports","module"],function(a,b,c){"use strict";var d=function(a,b){return a.row-b.row||a.column-b.column},e=function(a,b,c,d){this.start={row:a,column:b},this.end={row:c,column:d}};(function(){this.isEqual=function(a){return this.start.row===a.start.row&&this.end.row===a.end.row&&this.start.column===a.start.column&&this.end.column===a.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(a,b){return 0==this.compare(a,b)},this.compareRange=function(a){var b,c=a.end,d=a.start;return b=this.compare(c.row,c.column),1==b?(b=this.compare(d.row,d.column),1==b?2:0==b?1:0):b==-1?-2:(b=this.compare(d.row,d.column),b==-1?-1:1==b?42:0)},this.comparePoint=function(a){return this.compare(a.row,a.column)},this.containsRange=function(a){return 0==this.comparePoint(a.start)&&0==this.comparePoint(a.end)},this.intersects=function(a){var b=this.compareRange(a);return b==-1||0==b||1==b},this.isEnd=function(a,b){return this.end.row==a&&this.end.column==b},this.isStart=function(a,b){return this.start.row==a&&this.start.column==b},this.setStart=function(a,b){"object"==typeof a?(this.start.column=a.column,this.start.row=a.row):(this.start.row=a,this.start.column=b)},this.setEnd=function(a,b){"object"==typeof a?(this.end.column=a.column,this.end.row=a.row):(this.end.row=a,this.end.column=b)},this.inside=function(a,b){return 0==this.compare(a,b)&&(!this.isEnd(a,b)&&!this.isStart(a,b))},this.insideStart=function(a,b){return 0==this.compare(a,b)&&!this.isEnd(a,b)},this.insideEnd=function(a,b){return 0==this.compare(a,b)&&!this.isStart(a,b)},this.compare=function(a,b){return this.isMultiLine()||a!==this.start.row?a<this.start.row?-1:a>this.end.row?1:this.start.row===a?b>=this.start.column?0:-1:this.end.row===a?b<=this.end.column?0:1:0:b<this.start.column?-1:b>this.end.column?1:0},this.compareStart=function(a,b){return this.start.row==a&&this.start.column==b?-1:this.compare(a,b)},this.compareEnd=function(a,b){return this.end.row==a&&this.end.column==b?1:this.compare(a,b)},this.compareInside=function(a,b){return this.end.row==a&&this.end.column==b?1:this.start.row==a&&this.start.column==b?-1:this.compare(a,b)},this.clipRows=function(a,b){if(this.end.row>b)var c={row:b+1,column:0};else if(this.end.row<a)var c={row:a,column:0};if(this.start.row>b)var d={row:b+1,column:0};else if(this.start.row<a)var d={row:a,column:0};return e.fromPoints(d||this.start,c||this.end)},this.extend=function(a,b){var c=this.compare(a,b);if(0==c)return this;if(c==-1)var d={row:a,column:b};else var f={row:a,column:b};return e.fromPoints(d||this.start,f||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return e.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new e(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new e(this.start.row,0,this.end.row,0)},this.toScreenRange=function(a){var b=a.documentToScreenPosition(this.start),c=a.documentToScreenPosition(this.end);return new e(b.row,b.column,c.row,c.column)},this.moveBy=function(a,b){this.start.row+=a,this.start.column+=b,this.end.row+=a,this.end.column+=b}}).call(e.prototype),e.fromPoints=function(a,b){return new e(a.row,a.column,b.row,b.column)},e.comparePoints=d,e.comparePoints=function(a,b){return a.row-b.row||a.column-b.column},b.Range=e}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/lang"),f=a("./lib/event_emitter").EventEmitter,g=a("./range").Range,h=function(a){this.session=a,this.doc=a.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var b=this;this.lead.on("change",function(a){b._emit("changeCursor"),b.$isEmpty||b._emit("changeSelection"),b.$keepDesiredColumnOnChange||a.old.column==a.value.column||(b.$desiredColumn=null);
}),this.selectionAnchor.on("change",function(){b.$isEmpty||b._emit("changeSelection")})};(function(){d.implement(this,f),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.isEmpty()&&this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(a,b){this.anchor.setPosition(a,b),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(a){if(this.$isEmpty)return void this.moveCursorTo(this.lead.row,this.lead.column+a);var b=this.getSelectionAnchor(),c=this.getSelectionLead(),d=this.isBackwards();d&&0===b.column||this.setSelectionAnchor(b.row,b.column+a),(d||0!==c.column)&&this.$moveSelection(function(){this.moveCursorTo(c.row,c.column+a)})},this.isBackwards=function(){var a=this.anchor,b=this.lead;return a.row>b.row||a.row==b.row&&a.column>b.column},this.getRange=function(){var a=this.anchor,b=this.lead;return this.isEmpty()?g.fromPoints(b,b):this.isBackwards()?g.fromPoints(b,a):g.fromPoints(a,b)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var a=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(a,this.doc.getLine(a).length)},this.setRange=this.setSelectionRange=function(a,b){b?(this.setSelectionAnchor(a.end.row,a.end.column),this.selectTo(a.start.row,a.start.column)):(this.setSelectionAnchor(a.start.row,a.start.column),this.selectTo(a.end.row,a.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(a){var b=this.lead;this.$isEmpty&&this.setSelectionAnchor(b.row,b.column),a.call(this)},this.selectTo=function(a,b){this.$moveSelection(function(){this.moveCursorTo(a,b)})},this.selectToPosition=function(a){this.$moveSelection(function(){this.moveCursorToPosition(a)})},this.moveTo=function(a,b){this.clearSelection(),this.moveCursorTo(a,b)},this.moveToPosition=function(a){this.clearSelection(),this.moveCursorToPosition(a)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(a,b){if("undefined"==typeof b){var c=a||this.lead;a=c.row,b=c.column}return this.session.getWordRange(a,b)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var a=this.getCursor(),b=this.session.getAWordRange(a.row,a.column);this.setSelectionRange(b)},this.getLineRange=function(a,b){var c,d="number"==typeof a?a:this.lead.row,e=this.session.getFoldLine(d);return e?(d=e.start.row,c=e.end.row):c=d,b===!0?new g(d,0,c,this.session.getLine(c).length):new g(d,0,c+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var a,b=this.lead.getPosition();if(a=this.session.getFoldAt(b.row,b.column,-1))this.moveCursorTo(a.start.row,a.start.column);else if(0===b.column)b.row>0&&this.moveCursorTo(b.row-1,this.doc.getLine(b.row-1).length);else{var c=this.session.getTabSize();this.session.isTabStop(b)&&this.doc.getLine(b.row).slice(b.column-c,b.column).split(" ").length-1==c?this.moveCursorBy(0,-c):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var a,b=this.lead.getPosition();if(a=this.session.getFoldAt(b.row,b.column,1))this.moveCursorTo(a.end.row,a.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var c=this.session.getTabSize(),b=this.lead;this.session.isTabStop(b)&&this.doc.getLine(b.row).slice(b.column,b.column+c).split(" ").length-1==c?this.moveCursorBy(0,c):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var a=this.lead.row,b=this.lead.column,c=this.session.documentToScreenRow(a,b),d=this.session.screenToDocumentPosition(c,0),e=this.session.getDisplayLine(a,null,d.row,d.column),f=e.match(/^\s*/);f[0].length==b||this.session.$useEmacsStyleLineStart||(d.column+=f[0].length),this.moveCursorToPosition(d)},this.moveCursorLineEnd=function(){var a=this.lead,b=this.session.getDocumentLastRowColumnPosition(a.row,a.column);if(this.lead.column==b.column){var c=this.session.getLine(b.row);if(b.column==c.length){var d=c.search(/\s+$/);d>0&&(b.column=d)}}this.moveCursorTo(b.row,b.column)},this.moveCursorFileEnd=function(){var a=this.doc.getLength()-1,b=this.doc.getLine(a).length;this.moveCursorTo(a,b)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var a,b=this.lead.row,c=this.lead.column,d=this.doc.getLine(b),e=d.substring(c);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var f=this.session.getFoldAt(b,c,1);return f?void this.moveCursorTo(f.end.row,f.end.column):((a=this.session.nonTokenRe.exec(e))&&(c+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,e=d.substring(c)),c>=d.length?(this.moveCursorTo(b,d.length),this.moveCursorRight(),void(b<this.doc.getLength()-1&&this.moveCursorWordRight())):((a=this.session.tokenRe.exec(e))&&(c+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(b,c)))},this.moveCursorLongWordLeft=function(){var a,b=this.lead.row,c=this.lead.column;if(a=this.session.getFoldAt(b,c,-1))return void this.moveCursorTo(a.start.row,a.start.column);var d=this.session.getFoldStringAt(b,c,-1);null==d&&(d=this.doc.getLine(b).substring(0,c));var f,g=e.stringReverse(d);return this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,(f=this.session.nonTokenRe.exec(g))&&(c-=this.session.nonTokenRe.lastIndex,g=g.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),c<=0?(this.moveCursorTo(b,0),this.moveCursorLeft(),void(b>0&&this.moveCursorWordLeft())):((f=this.session.tokenRe.exec(g))&&(c-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(b,c))},this.$shortWordEndIndex=function(a){var b,c,d=0,e=/\s/,f=this.session.tokenRe;if(f.lastIndex=0,b=this.session.tokenRe.exec(a))d=this.session.tokenRe.lastIndex;else{for(;(c=a[d])&&e.test(c);)d++;if(d<1)for(f.lastIndex=0;(c=a[d])&&!f.test(c);)if(f.lastIndex=0,d++,e.test(c)){if(d>2){d--;break}for(;(c=a[d])&&e.test(c);)d++;if(d>2)break}}return f.lastIndex=0,d},this.moveCursorShortWordRight=function(){var a=this.lead.row,b=this.lead.column,c=this.doc.getLine(a),d=c.substring(b),e=this.session.getFoldAt(a,b,1);if(e)return this.moveCursorTo(e.end.row,e.end.column);if(b==c.length){var f=this.doc.getLength();do a++,d=this.doc.getLine(a);while(a<f&&/^\s*$/.test(d));/^\s+/.test(d)||(d=""),b=0}var g=this.$shortWordEndIndex(d);this.moveCursorTo(a,b+g)},this.moveCursorShortWordLeft=function(){var a,b=this.lead.row,c=this.lead.column;if(a=this.session.getFoldAt(b,c,-1))return this.moveCursorTo(a.start.row,a.start.column);var d=this.session.getLine(b).substring(0,c);if(0===c){do b--,d=this.doc.getLine(b);while(b>0&&/^\s*$/.test(d));c=d.length,/\s+$/.test(d)||(d="")}var f=e.stringReverse(d),g=this.$shortWordEndIndex(f);return this.moveCursorTo(b,c-g)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(a,b){var c=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===b&&(this.$desiredColumn?c.column=this.$desiredColumn:this.$desiredColumn=c.column);var d=this.session.screenToDocumentPosition(c.row+a,c.column);0!==a&&0===b&&d.row===this.lead.row&&d.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[d.row]&&d.row++,this.moveCursorTo(d.row,d.column+b,0===b)},this.moveCursorToPosition=function(a){this.moveCursorTo(a.row,a.column)},this.moveCursorTo=function(a,b,c){var d=this.session.getFoldAt(a,b,1);d&&(a=d.start.row,b=d.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(a,b),this.$keepDesiredColumnOnChange=!1,c||(this.$desiredColumn=null)},this.moveCursorToScreen=function(a,b,c){var d=this.session.screenToDocumentPosition(a,b);this.moveCursorTo(d.row,d.column,c)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(a){this.setSelectionRange(a,a.cursor==a.start),this.$desiredColumn=a.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(a){var b=this.getRange();return a?(a.start.column=b.start.column,a.start.row=b.start.row,a.end.column=b.end.column,a.end.row=b.end.row):a=b,a.cursor=this.isBackwards()?a.start:a.end,a.desiredColumn=this.$desiredColumn,a},this.getRangeOfMovements=function(a){var b=this.getCursor();try{a.call(null,this);var c=this.getCursor();return g.fromPoints(b,c)}catch(a){return g.fromPoints(b,b)}finally{this.moveCursorToPosition(b)}},this.toJSON=function(){if(this.rangeCount)var a=this.ranges.map(function(a){var b=a.clone();return b.isBackwards=a.cursor==a.start,b});else{var a=this.getRange();a.isBackwards=this.isBackwards()}return a},this.fromJSON=function(a){if(void 0==a.start){if(this.rangeList){this.toSingleRange(a[0]);for(var b=a.length;b--;){var c=g.fromPoints(a[b].start,a[b].end);a.isBackwards&&(c.cursor=c.start),this.addRange(c,!0)}return}a=a[0]}this.rangeList&&this.toSingleRange(a),this.setSelectionRange(a,a.isBackwards)},this.isEqual=function(a){if((a.length||this.rangeCount)&&a.length!=this.rangeCount)return!1;if(!a.length||!this.ranges)return this.getRange().isEqual(a);for(var b=this.ranges.length;b--;)if(!this.ranges[b].isEqual(a[b]))return!1;return!0}}).call(h.prototype),b.Selection=h}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(a,b,c){"use strict";var d=a("./config"),e=2e3,f=function(a){this.states=a,this.regExps={},this.matchMappings={};for(var b in this.states){for(var c=this.states[b],d=[],e=0,f=this.matchMappings[b]={defaultToken:"text"},g="g",h=[],i=0;i<c.length;i++){var j=c[i];if(j.defaultToken&&(f.defaultToken=j.defaultToken),j.caseInsensitive&&(g="gi"),null!=j.regex){j.regex instanceof RegExp&&(j.regex=j.regex.toString().slice(1,-1));var k=j.regex,l=new RegExp("(?:("+k+")|(.))").exec("a").length-2;Array.isArray(j.token)?1==j.token.length||1==l?j.token=j.token[0]:l-1!=j.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:j,groupCount:l-1}),j.token=j.token[0]):(j.tokenArray=j.token,j.token=null,j.onMatch=this.$arrayTokens):"function"!=typeof j.token||j.onMatch||(l>1?j.onMatch=this.$applyToken:j.onMatch=j.token),l>1&&(/\\\d/.test(j.regex)?k=j.regex.replace(/\\([0-9]+)/g,function(a,b){return"\\"+(parseInt(b,10)+e+1)}):(l=1,k=this.removeCapturingGroups(j.regex)),j.splitRegex||"string"==typeof j.token||h.push(j)),f[e]=i,e+=l,d.push(k),j.onMatch||(j.onMatch=null)}}d.length||(f[0]=0,d.push("$")),h.forEach(function(a){a.splitRegex=this.createSplitterRegexp(a.regex,g)},this),this.regExps[b]=new RegExp("("+d.join(")|(")+")|($)",g)}};(function(){this.$setMaxTokenCount=function(a){e=0|a},this.$applyToken=function(a){var b=this.splitRegex.exec(a).slice(1),c=this.token.apply(this,b);if("string"==typeof c)return[{type:c,value:a}];for(var d=[],e=0,f=c.length;e<f;e++)b[e]&&(d[d.length]={type:c[e],value:b[e]});return d},this.$arrayTokens=function(a){if(!a)return[];var b=this.splitRegex.exec(a);if(!b)return"text";for(var c=[],d=this.tokenArray,e=0,f=d.length;e<f;e++)b[e+1]&&(c[c.length]={type:d[e],value:b[e+1]});return c},this.removeCapturingGroups=function(a){var b=a.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(a,b){return b?"(?:":a});return b},this.createSplitterRegexp=function(a,b){if(a.indexOf("(?=")!=-1){var c=0,d=!1,e={};a.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(a,b,f,g,h,i){return d?d="]"!=h:h?d=!0:g?(c==e.stack&&(e.end=i+1,e.stack=-1),c--):f&&(c++,1!=f.length&&(e.stack=c,e.start=i)),a}),null!=e.end&&/^\)*$/.test(a.substr(e.end))&&(a=a.substring(0,e.start)+a.substr(e.end))}return new RegExp(a,(b||"").replace("g",""))},this.getLineTokens=function(a,b){if(b&&"string"!=typeof b){var c=b.slice(0);b=c[0],"#tmp"===b&&(c.shift(),b=c.shift())}else var c=[];var d=b||"start",f=this.states[d];f||(d="start",f=this.states[d]);var g=this.matchMappings[d],h=this.regExps[d];h.lastIndex=0;for(var i,j=[],k=0,l=0,m={type:null,value:""};i=h.exec(a);){var n=g.defaultToken,o=null,p=i[0],q=h.lastIndex;if(q-p.length>k){var r=a.substring(k,q-p.length);m.type==n?m.value+=r:(m.type&&j.push(m),m={type:n,value:r})}for(var s=0;s<i.length-2;s++)if(void 0!==i[s+1]){o=f[g[s]],n=o.onMatch?o.onMatch(p,d,c):o.token,o.next&&(d="string"==typeof o.next?o.next:o.next(d,c),f=this.states[d],f||(this.reportError("state doesn't exist",d),d="start",f=this.states[d]),g=this.matchMappings[d],k=q,h=this.regExps[d],h.lastIndex=q);break}if(p)if("string"==typeof n)o&&o.merge===!1||m.type!==n?(m.type&&j.push(m),m={type:n,value:p}):m.value+=p;else if(n){m.type&&j.push(m),m={type:null,value:""};for(var s=0;s<n.length;s++)j.push(n[s])}if(k==a.length)break;if(k=q,l++>e){for(l>2*a.length&&this.reportError("infinite loop with in ace tokenizer",{startState:b,line:a});k<a.length;)m.type&&j.push(m),m={value:a.substring(k,k+=2e3),type:"overflow"};d="start",c=[];break}}return m.type&&j.push(m),c.length>1&&c[0]!==d&&c.unshift("#tmp",d),{tokens:j,state:c.length?c:d}},this.reportError=d.reportError}).call(f.prototype),b.Tokenizer=f}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(a,b,c){"use strict";var d=a("../lib/lang"),e=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(a,b){if(b)for(var c in a){for(var d=a[c],e=0;e<d.length;e++){var f=d[e];(f.next||f.onMatch)&&("string"!=typeof f.next?f.nextState&&0!==f.nextState.indexOf(b)&&(f.nextState=b+f.nextState):0!==f.next.indexOf(b)&&(f.next=b+f.next))}this.$rules[b+c]=d}else for(var c in a)this.$rules[c]=a[c]},this.getRules=function(){return this.$rules},this.embedRules=function(a,b,c,e,f){var g="function"==typeof a?(new a).getRules():a;if(e)for(var h=0;h<e.length;h++)e[h]=b+e[h];else{e=[];for(var i in g)e.push(b+i)}if(this.addRules(g,b),c)for(var j=Array.prototype[f?"push":"unshift"],h=0;h<e.length;h++)j.apply(this.$rules[e[h]],d.deepCopy(c));this.$embeds||(this.$embeds=[]),this.$embeds.push(b)},this.getEmbeds=function(){return this.$embeds};var a=function(a,b){return("start"!=a||b.length)&&b.unshift(this.nextState,a),this.nextState},b=function(a,b){return b.shift(),b.shift()||"start"};this.normalizeRules=function(){function c(f){var g=e[f];g.processed=!0;for(var h=0;h<g.length;h++){var i=g[h];!i.regex&&i.start&&(i.regex=i.start,i.next||(i.next=[]),i.next.push({defaultToken:i.token},{token:i.token+".end",regex:i.end||i.start,next:"pop"}),i.token=i.token+".start",i.push=!0);var j=i.next||i.push;if(j&&Array.isArray(j)){var k=i.stateName;k||(k=i.token,"string"!=typeof k&&(k=k[0]||""),e[k]&&(k+=d++)),e[k]=j,i.next=k,c(k)}else"pop"==j&&(i.next=b);if(i.push&&(i.nextState=i.next||i.push,i.next=a,delete i.push),i.rules)for(var l in i.rules)e[l]?e[l].push&&e[l].push.apply(e[l],i.rules[l]):e[l]=i.rules[l];if(i.include||"string"==typeof i)var m=i.include||i,n=e[m];else Array.isArray(i)&&(n=i);if(n){var o=[h,1].concat(n);i.noEscape&&(o=o.filter(function(a){return!a.next})),g.splice.apply(g,o),h--,n=null}i.keywordMap&&(i.token=this.createKeywordMapper(i.keywordMap,i.defaultToken||"text",i.caseInsensitive),delete i.defaultToken)}}var d=0,e=this.$rules;Object.keys(e).forEach(c,this)},this.createKeywordMapper=function(a,b,c,d){var e=Object.create(null);return Object.keys(a).forEach(function(b){var f=a[b];c&&(f=f.toLowerCase());for(var g=f.split(d||"|"),h=g.length;h--;)e[g[h]]=b}),Object.getPrototypeOf(e)&&(e.__proto__=null),this.$keywordList=Object.keys(e),a=null,c?function(a){return e[a.toLowerCase()]||b}:function(a){return e[a]||b}},this.getKeywords=function(){return this.$keywords}}).call(e.prototype),b.TextHighlightRules=e}),ace.define("ace/mode/behaviour",["require","exports","module"],function(a,b,c){"use strict";var d=function(){this.$behaviours={}};(function(){this.add=function(a,b,c){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[a]:this.$behaviours[a]={}}this.$behaviours[a][b]=c},this.addBehaviours=function(a){for(var b in a)for(var c in a[b])this.add(b,c,a[b][c])},this.remove=function(a){this.$behaviours&&this.$behaviours[a]&&delete this.$behaviours[a]},this.inherit=function(a,b){if("function"==typeof a)var c=(new a).getBehaviours(b);else var c=a.getBehaviours(b);this.addBehaviours(c)},this.getBehaviours=function(a){if(a){for(var b={},c=0;c<a.length;c++)this.$behaviours[a[c]]&&(b[a[c]]=this.$behaviours[a[c]]);return b}return this.$behaviours}}).call(d.prototype),b.Behaviour=d}),ace.define("ace/unicode",["require","exports","module"],function(a,b,c){"use strict";function d(a){var c=/\w{4}/g;for(var d in a)b.packages[d]=a[d].replace(c,"\\u$&")}b.packages={},d({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),ace.define("ace/token_iterator",["require","exports","module"],function(a,b,c){"use strict";var d=function(a,b,c){this.$session=a,this.$row=b,this.$rowTokens=a.getTokens(b);var d=a.getTokenAt(b,c);this.$tokenIndex=d?d.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var a;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,a||(a=this.$session.getLength()),this.$row>=a)return this.$row=a-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var a=this.$rowTokens,b=this.$tokenIndex,c=a[b].start;if(void 0!==c)return c;for(c=0;b>0;)b-=1,c+=a[b].value.length;return c}}).call(d.prototype),b.TokenIterator=d}),ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(a,b,c){"use strict";var d=a("../tokenizer").Tokenizer,e=a("./text_highlight_rules").TextHighlightRules,f=a("./behaviour").Behaviour,g=a("../unicode"),h=a("../lib/lang"),i=a("../token_iterator").TokenIterator,j=a("../range").Range,k=function(){this.HighlightRules=e,this.$behaviour=new f};(function(){this.tokenRe=new RegExp("^["+g.packages.L+g.packages.Mn+g.packages.Mc+g.packages.Nd+g.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+g.packages.L+g.packages.Mn+g.packages.Mc+g.packages.Nd+g.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules,this.$tokenizer=new d(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(a,b,c,d){function e(a){for(var b=c;b<=d;b++)a(f.getLine(b),b)}var f=b.doc,g=!0,i=!0,j=1/0,k=b.getTabSize(),l=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var m=this.lineCommentStart.map(h.escapeRegExp).join("|"),n=this.lineCommentStart[0];else var m=h.escapeRegExp(this.lineCommentStart),n=this.lineCommentStart;m=new RegExp("^(\\s*)(?:"+m+") ?"),l=b.getUseSoftTabs();var o=function(a,b){var c=a.match(m);if(c){var d=c[1].length,e=c[0].length;s(a,d,e)||" "!=c[0][e-1]||e--,f.removeInLine(b,d,e)}},p=n+" ",q=function(a,b){g&&!/\S/.test(a)||(s(a,j,j)?f.insertInLine({row:b,column:j},p):f.insertInLine({row:b,column:j},n))},r=function(a,b){return m.test(a)},s=function(a,b,c){for(var d=0;b--&&" "==a.charAt(b);)d++;if(d%k!=0)return!1;for(var d=0;" "==a.charAt(c++);)d++;return k>2?d%k!=k-1:d%k==0}}else{if(!this.blockComment)return!1;var n=this.blockComment.start,t=this.blockComment.end,m=new RegExp("^(\\s*)(?:"+h.escapeRegExp(n)+")"),u=new RegExp("(?:"+h.escapeRegExp(t)+")\\s*$"),q=function(a,b){r(a,b)||g&&!/\S/.test(a)||(f.insertInLine({row:b,column:a.length},t),f.insertInLine({row:b,column:j},n))},o=function(a,b){var c;(c=a.match(u))&&f.removeInLine(b,a.length-c[0].length,a.length),(c=a.match(m))&&f.removeInLine(b,c[1].length,c[0].length)},r=function(a,c){if(m.test(a))return!0;for(var d=b.getTokens(c),e=0;e<d.length;e++)if("comment"===d[e].type)return!0}}var v=1/0;e(function(a,b){var c=a.search(/\S/);c!==-1?(c<j&&(j=c),i&&!r(a,b)&&(i=!1)):v>a.length&&(v=a.length)}),j==1/0&&(j=v,g=!1,i=!1),l&&j%k!=0&&(j=Math.floor(j/k)*k),e(i?o:q)},this.toggleBlockComment=function(a,b,c,d){var e=this.blockComment;if(e){!e.start&&e[0]&&(e=e[0]);var f,g,h=new i(b,d.row,d.column),k=h.getCurrentToken(),l=(b.selection,b.selection.toOrientedRange());if(k&&/comment/.test(k.type)){for(var m,n;k&&/comment/.test(k.type);){var o=k.value.indexOf(e.start);if(o!=-1){var p=h.getCurrentTokenRow(),q=h.getCurrentTokenColumn()+o;m=new j(p,q,p,q+e.start.length);break}k=h.stepBackward()}for(var h=new i(b,d.row,d.column),k=h.getCurrentToken();k&&/comment/.test(k.type);){var o=k.value.indexOf(e.end);if(o!=-1){var p=h.getCurrentTokenRow(),q=h.getCurrentTokenColumn()+o;n=new j(p,q,p,q+e.end.length);break}k=h.stepForward()}n&&b.remove(n),m&&(b.remove(m),f=m.start.row,g=-e.start.length)}else g=e.start.length,f=c.start.row,b.insert(c.end,e.end),b.insert(c.start,e.start);l.start.row==f&&(l.start.column+=g),l.end.row==f&&(l.end.column+=g),b.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(a,b,c){return this.$getIndent(b)},this.checkOutdent=function(a,b,c){return!1},this.autoOutdent=function(a,b,c){},this.$getIndent=function(a){return a.match(/^\s*/)[0]},this.createWorker=function(a){return null},this.createModeDelegates=function(a){this.$embeds=[],this.$modes={};for(var b in a)a[b]&&(this.$embeds.push(b),this.$modes[b]=new a[b]);for(var c=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],b=0;b<c.length;b++)!function(a){var d=c[b],e=a[d];a[c[b]]=function(){return this.$delegator(d,arguments,e)}}(this)},this.$delegator=function(a,b,c){var d=b[0];"string"!=typeof d&&(d=d[0]);for(var e=0;e<this.$embeds.length;e++)if(this.$modes[this.$embeds[e]]){var f=d.split(this.$embeds[e]);if(!f[0]&&f[1]){b[0]=f[1];var g=this.$modes[this.$embeds[e]];return g[a].apply(g,b)}}var h=c.apply(this,b);return c?h:void 0},this.transformAction=function(a,b,c,d,e){if(this.$behaviour){var f=this.$behaviour.getBehaviours();for(var g in f)if(f[g][b]){var h=f[g][b].apply(this,arguments);if(h)return h}}},this.getKeywords=function(a){if(!this.completionKeywords){var b=this.$tokenizer.rules,c=[];for(var d in b)for(var e=b[d],f=0,g=e.length;f<g;f++)if("string"==typeof e[f].token)/keyword|support|storage/.test(e[f].token)&&c.push(e[f].regex);else if("object"==typeof e[f].token)for(var h=0,i=e[f].token.length;h<i;h++)if(/keyword|support|storage/.test(e[f].token[h])){var d=e[f].regex.match(/\(.+?\)/g)[h];c.push(d.substr(1,d.length-2))}this.completionKeywords=c}return a?c.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(a,b,c,d){var e=this.$keywordList||this.$createKeywordList();return e.map(function(a){return{name:a,value:a,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(k.prototype),b.Mode=k}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=b.Anchor=function(a,b,c){this.$onChange=this.onChange.bind(this),this.attach(a),"undefined"==typeof c?this.setPosition(b.row,b.column):this.setPosition(b,c)};(function(){d.implement(this,e),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(a){var b=a.data,c=b.range;if((c.start.row!=c.end.row||c.start.row==this.row)&&!(c.start.row>this.row||c.start.row==this.row&&c.start.column>this.column)){var d=this.row,e=this.column,f=c.start,g=c.end;"insertText"===b.action?f.row===d&&f.column<=e?f.column===e&&this.$insertRight||(f.row===g.row?e+=g.column-f.column:(e-=f.column,d+=g.row-f.row)):f.row!==g.row&&f.row<d&&(d+=g.row-f.row):"insertLines"===b.action?f.row===d&&0===e&&this.$insertRight||f.row<=d&&(d+=g.row-f.row):"removeText"===b.action?f.row===d&&f.column<e?e=g.column>=e?f.column:Math.max(0,e-(g.column-f.column)):f.row!==g.row&&f.row<d?(g.row===d&&(e=Math.max(0,e-g.column)+f.column),d-=g.row-f.row):g.row===d&&(d-=g.row-f.row,e=Math.max(0,e-g.column)+f.column):"removeLines"==b.action&&f.row<=d&&(g.row<=d?d-=g.row-f.row:(d=f.row,e=0)),this.setPosition(d,e,!0)}},this.setPosition=function(a,b,c){var d;if(d=c?{row:a,column:b}:this.$clipPositionToDocument(a,b),this.row!=d.row||this.column!=d.column){var e={row:this.row,column:this.column};this.row=d.row,this.column=d.column,this._signal("change",{old:e,value:d})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(a){this.document=a||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(a,b){var c={};return a>=this.document.getLength()?(c.row=Math.max(0,this.document.getLength()-1),c.column=this.document.getLine(c.row).length):a<0?(c.row=0,c.column=0):(c.row=a,c.column=Math.min(this.document.getLine(c.row).length,Math.max(0,b))),b<0&&(c.column=0),c}}).call(f.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=a("./range").Range,g=a("./anchor").Anchor,h=function(a){this.$lines=[],0===a.length?this.$lines=[""]:Array.isArray(a)?this._insertLines(0,a):this.insert({row:0,column:0},a)};(function(){d.implement(this,e),this.setValue=function(a){var b=this.getLength();this.remove(new f(0,0,b,this.getLine(b-1).length)),this.insert({row:0,column:0},a)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(a,b){return new g(this,a,b)},0==="aaa".split(/a/).length?this.$split=function(a){return a.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(a){return a.split(/\r\n|\r|\n/)},this.$detectNewLine=function(a){var b=a.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=b?b[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(a){this.$newLineMode!==a&&(this.$newLineMode=a,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(a){return"\r\n"==a||"\r"==a||"\n"==a},this.getLine=function(a){return this.$lines[a]||""},this.getLines=function(a,b){return this.$lines.slice(a,b+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(a){if(a.start.row==a.end.row)return this.getLine(a.start.row).substring(a.start.column,a.end.column);var b=this.getLines(a.start.row,a.end.row);b[0]=(b[0]||"").substring(a.start.column);var c=b.length-1;return a.end.row-a.start.row==c&&(b[c]=b[c].substring(0,a.end.column)),b.join(this.getNewLineCharacter())},this.$clipPosition=function(a){var b=this.getLength();return a.row>=b?(a.row=Math.max(0,b-1),a.column=this.getLine(b-1).length):a.row<0&&(a.row=0),a},this.insert=function(a,b){if(!b||0===b.length)return a;a=this.$clipPosition(a),this.getLength()<=1&&this.$detectNewLine(b);var c=this.$split(b),d=c.splice(0,1)[0],e=0==c.length?null:c.splice(c.length-1,1)[0];return a=this.insertInLine(a,d),null!==e&&(a=this.insertNewLine(a),a=this._insertLines(a.row,c),a=this.insertInLine(a,e||"")),a},this.insertLines=function(a,b){return a>=this.getLength()?this.insert({row:a,column:0},"\n"+b.join("\n")):this._insertLines(Math.max(a,0),b)},this._insertLines=function(a,b){if(0==b.length)return{row:a,column:0};for(;b.length>61440;){var c=this._insertLines(a,b.slice(0,61440));b=b.slice(61440),a=c.row}var d=[a,0];d.push.apply(d,b),this.$lines.splice.apply(this.$lines,d);var e=new f(a,0,a+b.length,0),g={action:"insertLines",range:e,lines:b};return this._signal("change",{data:g}),e.end},this.insertNewLine=function(a){a=this.$clipPosition(a);var b=this.$lines[a.row]||"";this.$lines[a.row]=b.substring(0,a.column),this.$lines.splice(a.row+1,0,b.substring(a.column,b.length));var c={row:a.row+1,column:0},d={action:"insertText",range:f.fromPoints(a,c),text:this.getNewLineCharacter()};return this._signal("change",{data:d}),c},this.insertInLine=function(a,b){if(0==b.length)return a;var c=this.$lines[a.row]||"";this.$lines[a.row]=c.substring(0,a.column)+b+c.substring(a.column);var d={row:a.row,column:a.column+b.length},e={action:"insertText",range:f.fromPoints(a,d),text:b};return this._signal("change",{data:e}),d},this.remove=function(a){if(a instanceof f||(a=f.fromPoints(a.start,a.end)),a.start=this.$clipPosition(a.start),a.end=this.$clipPosition(a.end),a.isEmpty())return a.start;var b=a.start.row,c=a.end.row;if(a.isMultiLine()){var d=0==a.start.column?b:b+1,e=c-1;a.end.column>0&&this.removeInLine(c,0,a.end.column),e>=d&&this._removeLines(d,e),d!=b&&(this.removeInLine(b,a.start.column,this.getLine(b).length),this.removeNewLine(a.start.row))}else this.removeInLine(b,a.start.column,a.end.column);return a.start},this.removeInLine=function(a,b,c){if(b!=c){var d=new f(a,b,a,c),e=this.getLine(a),g=e.substring(b,c),h=e.substring(0,b)+e.substring(c,e.length);this.$lines.splice(a,1,h);var i={action:"removeText",range:d,text:g};return this._signal("change",{data:i}),d.start}},this.removeLines=function(a,b){return a<0||b>=this.getLength()?this.remove(new f(a,0,b+1,0)):this._removeLines(a,b)},this._removeLines=function(a,b){var c=new f(a,0,b+1,0),d=this.$lines.splice(a,b-a+1),e={action:"removeLines",range:c,nl:this.getNewLineCharacter(),lines:d};return this._signal("change",{data:e}),d},this.removeNewLine=function(a){var b=this.getLine(a),c=this.getLine(a+1),d=new f(a,b.length,a+1,0),e=b+c;this.$lines.splice(a,2,e);var g={action:"removeText",range:d,text:this.getNewLineCharacter()};this._signal("change",{data:g})},this.replace=function(a,b){if(a instanceof f||(a=f.fromPoints(a.start,a.end)),0==b.length&&a.isEmpty())return a.start;if(b==this.getTextRange(a))return a.end;if(this.remove(a),b)var c=this.insert(a.start,b);else c=a.start;return c},this.applyDeltas=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=f.fromPoints(c.range.start,c.range.end);"insertLines"==c.action?this.insertLines(d.start.row,c.lines):"insertText"==c.action?this.insert(d.start,c.text):"removeLines"==c.action?this._removeLines(d.start.row,d.end.row-1):"removeText"==c.action&&this.remove(d)}},this.revertDeltas=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b],d=f.fromPoints(c.range.start,c.range.end);"insertLines"==c.action?this._removeLines(d.start.row,d.end.row-1):"insertText"==c.action?this.remove(d):"removeLines"==c.action?this._insertLines(d.start.row,c.lines):"removeText"==c.action&&this.insert(d.start,c.text)}},this.indexToPosition=function(a,b){for(var c=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,e=b||0,f=c.length;e<f;e++)if(a-=c[e].length+d,a<0)return{row:e,column:a+c[e].length+d};return{row:f-1,column:c[f-1].length}},this.positionToIndex=function(a,b){for(var c=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,e=0,f=Math.min(a.row,c.length),g=b||0;g<f;++g)e+=c[g].length+d;return e+a.column}}).call(h.prototype),b.Document=h}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=function(a,b){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=a;var c=this;this.$worker=function(){if(c.running){for(var a=new Date,b=c.currentLine,d=-1,e=c.doc;c.lines[b];)b++;var f=b,g=e.getLength(),h=0;for(c.running=!1;b<g;){c.$tokenizeRow(b),d=b;do b++;while(c.lines[b]);if(h++,h%5===0&&new Date-a>20){c.running=setTimeout(c.$worker,20);break}}c.currentLine=b,f<=d&&c.fireUpdateEvent(f,d)}}};(function(){d.implement(this,e),this.setTokenizer=function(a){this.tokenizer=a,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(a){this.doc=a,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(a,b){var c={first:a,last:b};this._signal("update",{data:c})},this.start=function(a){this.currentLine=Math.min(a||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(a){var b=a.range,c=b.start.row,d=b.end.row-c;if(0===d)this.lines[c]=null;else if("removeText"==a.action||"removeLines"==a.action)this.lines.splice(c,d+1,null),this.states.splice(c,d+1,null);else{var e=Array(d+1);e.unshift(c,1),this.lines.splice.apply(this.lines,e),this.states.splice.apply(this.states,e)}this.currentLine=Math.min(c,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(a){return this.lines[a]||this.$tokenizeRow(a)},this.getState=function(a){return this.currentLine==a&&this.$tokenizeRow(a),this.states[a]||"start"},this.$tokenizeRow=function(a){var b=this.doc.getLine(a),c=this.states[a-1],d=this.tokenizer.getLineTokens(b,c,a);return this.states[a]+""!=d.state+""?(this.states[a]=d.state,this.lines[a+1]=null,this.currentLine>a+1&&(this.currentLine=a+1)):this.currentLine==a&&(this.currentLine=a+1),this.lines[a]=d.tokens}}).call(f.prototype),b.BackgroundTokenizer=f}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(a,b,c){"use strict";var d=a("./lib/lang"),e=(a("./lib/oop"),a("./range").Range),f=function(a,b,c){this.setRegexp(a),this.clazz=b,this.type=c||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(a){this.regExp+""!=a+""&&(this.regExp=a,this.cache=[])},this.update=function(a,b,c,f){if(this.regExp)for(var g=f.firstRow,h=f.lastRow,i=g;i<=h;i++){var j=this.cache[i];null==j&&(j=d.getMatchOffsets(c.getLine(i),this.regExp),j.length>this.MAX_RANGES&&(j=j.slice(0,this.MAX_RANGES)),j=j.map(function(a){return new e(i,a.offset,i,a.offset+a.length)}),this.cache[i]=j.length?j:"");for(var k=j.length;k--;)b.drawSingleLineMarker(a,j[k].toScreenRange(c),this.clazz,f)}}}).call(f.prototype),b.SearchHighlight=f}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(a,b,c){"use strict";function d(a,b){this.foldData=a,Array.isArray(b)?this.folds=b:b=this.folds=[b];var c=b[b.length-1];this.range=new e(b[0].start.row,b[0].start.column,c.end.row,c.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(a){a.setFoldLine(this)},this)}var e=a("../range").Range;(function(){this.shiftRow=function(a){this.start.row+=a,this.end.row+=a,this.folds.forEach(function(b){b.start.row+=a,b.end.row+=a})},this.addFold=function(a){if(a.sameRow){if(a.start.row<this.startRow||a.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(a),this.folds.sort(function(a,b){return-a.range.compareEnd(b.start.row,b.start.column)}),this.range.compareEnd(a.start.row,a.start.column)>0?(this.end.row=a.end.row,this.end.column=a.end.column):this.range.compareStart(a.end.row,a.end.column)<0&&(this.start.row=a.start.row,this.start.column=a.start.column)}else if(a.start.row==this.end.row)this.folds.push(a),this.end.row=a.end.row,this.end.column=a.end.column;else{if(a.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(a),this.start.row=a.start.row,this.start.column=a.start.column}a.foldLine=this},this.containsRow=function(a){return a>=this.start.row&&a<=this.end.row},this.walk=function(a,b,c){var d,e,f,g=0,h=this.folds,i=!0;null==b&&(b=this.end.row,c=this.end.column);for(var j=0;j<h.length;j++){if(d=h[j],e=d.range.compareStart(b,c),e==-1)return void a(null,b,c,g,i);if(f=a(null,d.start.row,d.start.column,g,i),f=!f&&a(d.placeholder,d.start.row,d.start.column,g),f||0===e)return;i=!d.sameRow,g=d.end.column}a(null,b,c,g,i)},this.getNextFoldTo=function(a,b){for(var c,d,e=0;e<this.folds.length;e++){if(c=this.folds[e],d=c.range.compareEnd(a,b),d==-1)return{fold:c,kind:"after"};if(0===d)return{fold:c,kind:"inside"}}return null},this.addRemoveChars=function(a,b,c){var d,e,f=this.getNextFoldTo(a,b);if(f)if(d=f.fold,"inside"==f.kind&&d.start.column!=b&&d.start.row!=a)window.console&&window.console.log(a,b,d);else if(d.start.row==a){e=this.folds;var g=e.indexOf(d);for(0===g&&(this.start.column+=c),g;g<e.length;g++){if(d=e[g],d.start.column+=c,!d.sameRow)return;d.end.column+=c}this.end.column+=c}},this.split=function(a,b){var c=this.getNextFoldTo(a,b);if(!c||"inside"==c.kind)return null;var e=c.fold,f=this.folds,g=this.foldData,h=f.indexOf(e),i=f[h-1];this.end.row=i.end.row,this.end.column=i.end.column,f=f.splice(h,f.length-h);var j=new d(g,f);return g.splice(g.indexOf(this)+1,0,j),
j},this.merge=function(a){for(var b=a.folds,c=0;c<b.length;c++)this.addFold(b[c]);var d=this.foldData;d.splice(d.indexOf(a),1)},this.toString=function(){var a=[this.range.toString()+": ["];return this.folds.forEach(function(b){a.push("  "+b.toString())}),a.push("]"),a.join("\n")},this.idxToPosition=function(a){for(var b=0,c=0;c<this.folds.length;c++){var d=this.folds[c];if(a-=d.start.column-b,a<0)return{row:d.start.row,column:d.start.column+a};if(a-=d.placeholder.length,a<0)return d.start;b=d.end.column}return{row:this.end.row,column:this.end.column+a}}}).call(d.prototype),b.FoldLine=d}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(a,b,c){"use strict";var d=a("./range").Range,e=d.comparePoints,f=function(){this.ranges=[]};(function(){this.comparePoints=e,this.pointIndex=function(a,b,c){for(var d=this.ranges,f=c||0;f<d.length;f++){var g=d[f],h=e(a,g.end);if(!(h>0)){var i=e(a,g.start);return 0===h?b&&0!==i?-f-2:f:i>0||0===i&&!b?f:-f-1}}return-f-1},this.add=function(a){var b=!a.isEmpty(),c=this.pointIndex(a.start,b);c<0&&(c=-c-1);var d=this.pointIndex(a.end,b,c);return d<0?d=-d-1:d++,this.ranges.splice(c,d-c,a)},this.addList=function(a){for(var b=[],c=a.length;c--;)b.push.call(b,this.add(a[c]));return b},this.substractPoint=function(a){var b=this.pointIndex(a);if(b>=0)return this.ranges.splice(b,1)},this.merge=function(){var a=[],b=this.ranges;b=b.sort(function(a,b){return e(a.start,b.start)});for(var c,d=b[0],f=1;f<b.length;f++){c=d,d=b[f];var g=e(c.end,d.start);g<0||(0!=g||c.isEmpty()||d.isEmpty())&&(e(c.end,d.end)<0&&(c.end.row=d.end.row,c.end.column=d.end.column),b.splice(f,1),a.push(d),d=c,f--)}return this.ranges=b,a},this.contains=function(a,b){return this.pointIndex({row:a,column:b})>=0},this.containsPoint=function(a){return this.pointIndex(a)>=0},this.rangeAtPoint=function(a){var b=this.pointIndex(a);if(b>=0)return this.ranges[b]},this.clipRows=function(a,b){var c=this.ranges;if(c[0].start.row>b||c[c.length-1].start.row<a)return[];var d=this.pointIndex({row:a,column:0});d<0&&(d=-d-1);var e=this.pointIndex({row:b,column:0},d);e<0&&(e=-e-1);for(var f=[],g=d;g<e;g++)f.push(c[g]);return f},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(a){this.session&&this.detach(),this.session=a,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(a){var b=a.data.range;if("i"==a.data.action[0])var c=b.start,d=b.end;else var d=b.start,c=b.end;for(var e=c.row,f=d.row,g=f-e,h=-c.column+d.column,i=this.ranges,j=0,k=i.length;j<k;j++){var l=i[j];if(!(l.end.row<e)){if(l.start.row>e)break;if(l.start.row==e&&l.start.column>=c.column&&(l.start.column==c.column&&this.$insertRight||(l.start.column+=h,l.start.row+=g)),l.end.row==e&&l.end.column>=c.column){if(l.end.column==c.column&&this.$insertRight)continue;l.end.column==c.column&&h>0&&j<k-1&&l.end.column>l.start.column&&l.end.column==i[j+1].start.column&&(l.end.column-=h),l.end.column+=h,l.end.row+=g}}}if(0!=g&&j<k)for(;j<k;j++){var l=i[j];l.start.row+=g,l.end.row+=g}}}).call(f.prototype),b.RangeList=f}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(a,b,c){"use strict";function d(a,b){a.row-=b.row,0==a.row&&(a.column-=b.column)}function e(a,b){d(a.start,b),d(a.end,b)}function f(a,b){0==a.row&&(a.column+=b.column),a.row+=b.row}function g(a,b){f(a.start,b),f(a.end,b)}var h=(a("../range").Range,a("../range_list").RangeList),i=a("../lib/oop"),j=b.Fold=function(a,b){this.foldLine=null,this.placeholder=b,this.range=a,this.start=a.start,this.end=a.end,this.sameRow=a.start.row==a.end.row,this.subFolds=this.ranges=[]};i.inherits(j,h),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(a){this.foldLine=a,this.subFolds.forEach(function(b){b.setFoldLine(a)})},this.clone=function(){var a=this.range.clone(),b=new j(a,this.placeholder);return this.subFolds.forEach(function(a){b.subFolds.push(a.clone())}),b.collapseChildren=this.collapseChildren,b},this.addSubFold=function(a){if(!this.range.isEqual(a)){if(!this.range.containsRange(a))throw new Error("A fold can't intersect already existing fold"+a.range+this.range);e(a,this.start);for(var b=a.start.row,c=a.start.column,d=0,f=-1;d<this.subFolds.length&&(f=this.subFolds[d].range.compare(b,c),1==f);d++);var g=this.subFolds[d];if(0==f)return g.addSubFold(a);for(var b=a.range.end.row,c=a.range.end.column,h=d,f=-1;h<this.subFolds.length&&(f=this.subFolds[h].range.compare(b,c),1==f);h++);this.subFolds[h];if(0==f)throw new Error("A fold can't intersect already existing fold"+a.range+this.range);this.subFolds.splice(d,h-d,a);return a.setFoldLine(this.foldLine),a}},this.restoreRange=function(a){return g(a,this.start)}}.call(j.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(a,b,c){"use strict";function d(){this.getFoldAt=function(a,b,c){var d=this.getFoldLine(a);if(!d)return null;for(var e=d.folds,f=0;f<e.length;f++){var g=e[f];if(g.range.contains(a,b)){if(1==c&&g.range.isEnd(a,b))continue;if(c==-1&&g.range.isStart(a,b))continue;return g}}},this.getFoldsInRange=function(a){var b=a.start,c=a.end,d=this.$foldData,e=[];b.column+=1,c.column-=1;for(var f=0;f<d.length;f++){var g=d[f].range.compareRange(a);if(2!=g){if(g==-2)break;for(var h=d[f].folds,i=0;i<h.length;i++){var j=h[i];if(g=j.range.compareRange(a),g==-2)break;if(2!=g){if(42==g)break;e.push(j)}}}}return b.column-=1,c.column+=1,e},this.getFoldsInRangeList=function(a){if(Array.isArray(a)){var b=[];a.forEach(function(a){b=b.concat(this.getFoldsInRange(a))},this)}else var b=this.getFoldsInRange(a);return b},this.getAllFolds=function(){for(var a=[],b=this.$foldData,c=0;c<b.length;c++)for(var d=0;d<b[c].folds.length;d++)a.push(b[c].folds[d]);return a},this.getFoldStringAt=function(a,b,c,d){if(d=d||this.getFoldLine(a),!d)return null;for(var e,f,g={end:{column:0}},h=0;h<d.folds.length;h++){f=d.folds[h];var i=f.range.compareEnd(a,b);if(i==-1){e=this.getLine(f.start.row).substring(g.end.column,f.start.column);break}if(0===i)return null;g=f}return e||(e=this.getLine(f.start.row).substring(g.end.column)),c==-1?e.substring(0,b-g.end.column):1==c?e.substring(b-g.end.column):e},this.getFoldLine=function(a,b){var c=this.$foldData,d=0;for(b&&(d=c.indexOf(b)),d==-1&&(d=0),d;d<c.length;d++){var e=c[d];if(e.start.row<=a&&e.end.row>=a)return e;if(e.end.row>a)return null}return null},this.getNextFoldLine=function(a,b){var c=this.$foldData,d=0;for(b&&(d=c.indexOf(b)),d==-1&&(d=0),d;d<c.length;d++){var e=c[d];if(e.end.row>=a)return e}return null},this.getFoldedRowCount=function(a,b){for(var c=this.$foldData,d=b-a+1,e=0;e<c.length;e++){var f=c[e],g=f.end.row,h=f.start.row;if(g>=b){h<b&&(h>=a?d-=b-h:d=0);break}g>=a&&(d-=h>=a?g-h:g-a+1)}return d},this.$addFoldLine=function(a){return this.$foldData.push(a),this.$foldData.sort(function(a,b){return a.start.row-b.start.row}),a},this.addFold=function(a,b){var c,d=this.$foldData,e=!1;a instanceof g?c=a:(c=new g(b,a),c.collapseChildren=b.collapseChildren),this.$clipRangeToDocument(c.range);var h=c.start.row,i=c.start.column,j=c.end.row,k=c.end.column;if(!(h<j||h==j&&i<=k-2))throw new Error("The range has to be at least 2 characters width");var l=this.getFoldAt(h,i,1),m=this.getFoldAt(j,k,-1);if(l&&m==l)return l.addSubFold(c);l&&!l.range.isStart(h,i)&&this.removeFold(l),m&&!m.range.isEnd(j,k)&&this.removeFold(m);var n=this.getFoldsInRange(c.range);n.length>0&&(this.removeFolds(n),n.forEach(function(a){c.addSubFold(a)}));for(var o=0;o<d.length;o++){var p=d[o];if(j==p.start.row){p.addFold(c),e=!0;break}if(h==p.end.row){if(p.addFold(c),e=!0,!c.sameRow){var q=d[o+1];if(q&&q.start.row==j){p.merge(q);break}}break}if(j<=p.start.row)break}return e||(p=this.$addFoldLine(new f(this.$foldData,c))),this.$useWrapMode?this.$updateWrapData(p.start.row,p.start.row):this.$updateRowLengthCache(p.start.row,p.start.row),this.$modified=!0,this._emit("changeFold",{data:c,action:"add"}),c},this.addFolds=function(a){a.forEach(function(a){this.addFold(a)},this)},this.removeFold=function(a){var b=a.foldLine,c=b.start.row,d=b.end.row,e=this.$foldData,f=b.folds;if(1==f.length)e.splice(e.indexOf(b),1);else if(b.range.isEnd(a.end.row,a.end.column))f.pop(),b.end.row=f[f.length-1].end.row,b.end.column=f[f.length-1].end.column;else if(b.range.isStart(a.start.row,a.start.column))f.shift(),b.start.row=f[0].start.row,b.start.column=f[0].start.column;else if(a.sameRow)f.splice(f.indexOf(a),1);else{var g=b.split(a.start.row,a.start.column);f=g.folds,f.shift(),g.start.row=f[0].start.row,g.start.column=f[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(c,d):this.$updateRowLengthCache(c,d)),this.$modified=!0,this._emit("changeFold",{data:a,action:"remove"})},this.removeFolds=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);b.forEach(function(a){this.removeFold(a)},this),this.$modified=!0},this.expandFold=function(a){this.removeFold(a),a.subFolds.forEach(function(b){a.restoreRange(b),this.addFold(b)},this),a.collapseChildren>0&&this.foldAll(a.start.row+1,a.end.row,a.collapseChildren-1),a.subFolds=[]},this.expandFolds=function(a){a.forEach(function(a){this.expandFold(a)},this)},this.unfold=function(a,b){var c,d;if(null==a?(c=new e(0,0,this.getLength(),0),b=!0):c="number"==typeof a?new e(a,0,a,this.getLine(a).length):"row"in a?e.fromPoints(a,a):a,d=this.getFoldsInRangeList(c),b)this.removeFolds(d);else for(var f=d;f.length;)this.expandFolds(f),f=this.getFoldsInRangeList(c);if(d.length)return d},this.isRowFolded=function(a,b){return!!this.getFoldLine(a,b)},this.getRowFoldEnd=function(a,b){var c=this.getFoldLine(a,b);return c?c.end.row:a},this.getRowFoldStart=function(a,b){var c=this.getFoldLine(a,b);return c?c.start.row:a},this.getFoldDisplayLine=function(a,b,c,d,e){null==d&&(d=a.start.row),null==e&&(e=0),null==b&&(b=a.end.row),null==c&&(c=this.getLine(b).length);var f=this.doc,g="";return a.walk(function(a,b,c,h){if(!(b<d)){if(b==d){if(c<e)return;h=Math.max(e,h)}g+=null!=a?a:f.getLine(b).substring(h,c)}},b,c),g},this.getDisplayLine=function(a,b,c,d){var e=this.getFoldLine(a);if(e)return this.getFoldDisplayLine(e,a,b,c,d);var f;return f=this.doc.getLine(a),f.substring(d||0,b||f.length)},this.$cloneFoldData=function(){var a=[];return a=this.$foldData.map(function(b){var c=b.folds.map(function(a){return a.clone()});return new f(a,c)})},this.toggleFold=function(a){var b,c,d=this.selection,e=d.getRange();if(e.isEmpty()){var f=e.start;if(b=this.getFoldAt(f.row,f.column))return void this.expandFold(b);(c=this.findMatchingBracket(f))?1==e.comparePoint(c)?e.end=c:(e.start=c,e.start.column++,e.end.column--):(c=this.findMatchingBracket({row:f.row,column:f.column+1}))?(1==e.comparePoint(c)?e.end=c:e.start=c,e.start.column++):e=this.getCommentFoldRange(f.row,f.column)||e}else{var g=this.getFoldsInRange(e);if(a&&g.length)return void this.expandFolds(g);1==g.length&&(b=g[0])}if(b||(b=this.getFoldAt(e.start.row,e.start.column)),b&&b.range.toString()==e.toString())return void this.expandFold(b);var h="...";if(!e.isMultiLine()){if(h=this.getTextRange(e),h.length<4)return;h=h.trim().substring(0,2)+".."}this.addFold(h,e)},this.getCommentFoldRange=function(a,b,c){var d=new h(this,a,b),f=d.getCurrentToken();if(f&&/^comment|string/.test(f.type)){var g=new e,i=new RegExp(f.type.replace(/\..*/,"\\."));if(1!=c){do f=d.stepBackward();while(f&&i.test(f.type));d.stepForward()}if(g.start.row=d.getCurrentTokenRow(),g.start.column=d.getCurrentTokenColumn()+2,d=new h(this,a,b),c!=-1){do f=d.stepForward();while(f&&i.test(f.type));f=d.stepBackward()}else f=d.getCurrentToken();return g.end.row=d.getCurrentTokenRow(),g.end.column=d.getCurrentTokenColumn()+f.value.length-2,g}},this.foldAll=function(a,b,c){void 0==c&&(c=1e5);var d=this.foldWidgets;if(d){b=b||this.getLength(),a=a||0;for(var e=a;e<b;e++)if(null==d[e]&&(d[e]=this.getFoldWidget(e)),"start"==d[e]){var f=this.getFoldWidgetRange(e);if(f&&f.isMultiLine()&&f.end.row<=b&&f.start.row>=a){e=f.end.row;try{var g=this.addFold("...",f);g&&(g.collapseChildren=c)}catch(a){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(a){if(!this.$foldStyles[a])throw new Error("invalid fold style: "+a+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=a){this.$foldStyle=a,"manual"==a&&this.unfold();var b=this.$foldMode;this.$setFolding(null),this.$setFolding(b)}},this.$setFolding=function(a){if(this.$foldMode!=a){if(this.$foldMode=a,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._emit("changeAnnotation"),!a||"manual"==this.$foldStyle)return void(this.foldWidgets=null);this.foldWidgets=[],this.getFoldWidget=a.getFoldWidget.bind(a,this,this.$foldStyle),this.getFoldWidgetRange=a.getFoldWidgetRange.bind(a,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(a,b){var c=this.foldWidgets;if(!c||b&&c[a])return{};for(var d,e=a-1;e>=0;){var f=c[e];if(null==f&&(f=c[e]=this.getFoldWidget(e)),"start"==f){var g=this.getFoldWidgetRange(e);if(d||(d=g),g&&g.end.row>=a)break}e--}return{range:e!==-1&&g,firstRange:d}},this.onFoldWidgetClick=function(a,b){b=b.domEvent;var c={children:b.shiftKey,all:b.ctrlKey||b.metaKey,siblings:b.altKey},d=this.$toggleFoldWidget(a,c);if(!d){var e=b.target||b.srcElement;e&&/ace_fold-widget/.test(e.className)&&(e.className+=" ace_invalid")}},this.$toggleFoldWidget=function(a,b){if(this.getFoldWidget){var c=this.getFoldWidget(a),d=this.getLine(a),e="end"===c?-1:1,f=this.getFoldAt(a,e===-1?0:d.length,e);if(f)return void(b.children||b.all?this.removeFold(f):this.expandFold(f));var g=this.getFoldWidgetRange(a,!0);if(g&&!g.isMultiLine()&&(f=this.getFoldAt(g.start.row,g.start.column,1),f&&g.isEqual(f.range)))return void this.removeFold(f);if(b.siblings){var h=this.getParentFoldRangeData(a);if(h.range)var i=h.range.start.row+1,j=h.range.end.row;this.foldAll(i,j,b.all?1e4:0)}else b.children?(j=g?g.end.row:this.getLength(),this.foldAll(a+1,g.end.row,b.all?1e4:0)):g&&(b.all&&(g.collapseChildren=1e4),this.addFold("...",g));return g}},this.toggleFoldWidget=function(a){var b=this.selection.getCursor().row;b=this.getRowFoldStart(b);var c=this.$toggleFoldWidget(b,{});if(!c){var d=this.getParentFoldRangeData(b,!0);if(c=d.range||d.firstRange){b=c.start.row;var e=this.getFoldAt(b,this.getLine(b).length,1);e?this.removeFold(e):this.addFold("...",c)}}},this.updateFoldWidgets=function(a){var b=a.data,c=b.range,d=c.start.row,e=c.end.row-d;if(0===e)this.foldWidgets[d]=null;else if("removeText"==b.action||"removeLines"==b.action)this.foldWidgets.splice(d,e+1,null);else{var f=Array(e+1);f.unshift(d,1),this.foldWidgets.splice.apply(this.foldWidgets,f)}},this.tokenizerUpdateFoldWidgets=function(a){var b=a.data;b.first!=b.last&&this.foldWidgets.length>b.first&&this.foldWidgets.splice(b.first,this.foldWidgets.length)}}var e=a("../range").Range,f=a("./fold_line").FoldLine,g=a("./fold").Fold,h=a("../token_iterator").TokenIterator;b.Folding=d}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(a,b,c){"use strict";function d(){this.findMatchingBracket=function(a,b){if(0==a.column)return null;var c=b||this.getLine(a.row).charAt(a.column-1);if(""==c)return null;var d=c.match(/([\(\[\{])|([\)\]\}])/);return d?d[1]?this.$findClosingBracket(d[1],a):this.$findOpeningBracket(d[2],a):null},this.getBracketRange=function(a){var b,c=this.getLine(a.row),d=!0,e=c.charAt(a.column-1),g=e&&e.match(/([\(\[\{])|([\)\]\}])/);if(g||(e=c.charAt(a.column),a={row:a.row,column:a.column+1},g=e&&e.match(/([\(\[\{])|([\)\]\}])/),d=!1),!g)return null;if(g[1]){var h=this.$findClosingBracket(g[1],a);if(!h)return null;b=f.fromPoints(a,h),d||(b.end.column++,b.start.column--),b.cursor=b.end}else{var h=this.$findOpeningBracket(g[2],a);if(!h)return null;b=f.fromPoints(h,a),d||(b.start.column++,b.end.column--),b.cursor=b.start}return b},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(a,b,c){var d=this.$brackets[a],f=1,g=new e(this,b.row,b.column),h=g.getCurrentToken();if(h||(h=g.stepForward()),h){c||(c=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end|start|begin)\b/,"")+")+"));for(var i=b.column-g.getCurrentTokenColumn()-2,j=h.value;;){for(;i>=0;){var k=j.charAt(i);if(k==d){if(f-=1,0==f)return{row:g.getCurrentTokenRow(),column:i+g.getCurrentTokenColumn()}}else k==a&&(f+=1);i-=1}do h=g.stepBackward();while(h&&!c.test(h.type));if(null==h)break;j=h.value,i=j.length-1}return null}},this.$findClosingBracket=function(a,b,c){var d=this.$brackets[a],f=1,g=new e(this,b.row,b.column),h=g.getCurrentToken();if(h||(h=g.stepForward()),h){c||(c=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:end|start|begin)\b/,"")+")+"));for(var i=b.column-g.getCurrentTokenColumn();;){for(var j=h.value,k=j.length;i<k;){var l=j.charAt(i);if(l==d){if(f-=1,0==f)return{row:g.getCurrentTokenRow(),column:i+g.getCurrentTokenColumn()}}else l==a&&(f+=1);i+=1}do h=g.stepForward();while(h&&!c.test(h.type));if(null==h)break;i=0}return null}}}var e=a("../token_iterator").TokenIterator,f=a("../range").Range;b.BracketMatch=d}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/lang"),f=a("./config"),g=a("./lib/event_emitter").EventEmitter,h=a("./selection").Selection,i=a("./mode/text").Mode,j=a("./range").Range,k=a("./document").Document,l=a("./background_tokenizer").BackgroundTokenizer,m=a("./search_highlight").SearchHighlight,n=function(a,b){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof a&&a.getLine||(a=new k(a)),this.setDocument(a),this.selection=new h(this),f.resetOptions(this),this.setMode(b),f._signal("session",this)};(function(){function a(a){return!(a<4352)&&(a>=4352&&a<=4447||a>=4515&&a<=4519||a>=4602&&a<=4607||a>=9001&&a<=9002||a>=11904&&a<=11929||a>=11931&&a<=12019||a>=12032&&a<=12245||a>=12272&&a<=12283||a>=12288&&a<=12350||a>=12353&&a<=12438||a>=12441&&a<=12543||a>=12549&&a<=12589||a>=12593&&a<=12686||a>=12688&&a<=12730||a>=12736&&a<=12771||a>=12784&&a<=12830||a>=12832&&a<=12871||a>=12880&&a<=13054||a>=13056&&a<=19903||a>=19968&&a<=42124||a>=42128&&a<=42182||a>=43360&&a<=43388||a>=44032&&a<=55203||a>=55216&&a<=55238||a>=55243&&a<=55291||a>=63744&&a<=64255||a>=65040&&a<=65049||a>=65072&&a<=65106||a>=65108&&a<=65126||a>=65128&&a<=65131||a>=65281&&a<=65376||a>=65504&&a<=65510)}d.implement(this,g),this.setDocument=function(a){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=a,a.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(a){if(!a)return this.$docRowCache=[],void(this.$screenRowCache=[]);var b=this.$docRowCache.length,c=this.$getRowCacheIndex(this.$docRowCache,a)+1;b>c&&(this.$docRowCache.splice(c,b),this.$screenRowCache.splice(c,b))},this.$getRowCacheIndex=function(a,b){for(var c=0,d=a.length-1;c<=d;){var e=c+d>>1,f=a[e];if(b>f)c=e+1;else{if(!(b<f))return e;d=e-1}}return c-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(a){var b=a.data;this.$resetRowCache(b.start.row)},this.onChange=function(a){var b=a.data;this.$modified=!0,this.$resetRowCache(b.range.start.row);var c=this.$updateInternalDataOnChange(a);this.$fromUndo||!this.$undoManager||b.ignore||(this.$deltasDoc.push(b),c&&0!=c.length&&this.$deltasFold.push({action:"removeFolds",folds:c}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(b),this._signal("change",a)},this.setValue=function(a){this.doc.setValue(a),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(a){return this.bgTokenizer.getState(a)},this.getTokens=function(a){return this.bgTokenizer.getTokens(a)},this.getTokenAt=function(a,b){var c,d=this.bgTokenizer.getTokens(a),e=0;if(null==b)f=d.length-1,e=this.getLine(a).length;else for(var f=0;f<d.length&&(e+=d[f].value.length,!(e>=b));f++);return(c=d[f])?(c.index=f,c.start=e-c.value.length,c):null},this.setUndoManager=function(a){if(this.$undoManager=a,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),a){var b=this;this.$syncInformUndoManager=function(){b.$informUndoManager.cancel(),b.$deltasFold.length&&(b.$deltas.push({group:"fold",deltas:b.$deltasFold}),b.$deltasFold=[]),b.$deltasDoc.length&&(b.$deltas.push({group:"doc",deltas:b.$deltasDoc}),b.$deltasDoc=[]),b.$deltas.length>0&&a.execute({action:"aceupdate",args:[b.$deltas,b],merge:b.mergeUndoDeltas}),b.mergeUndoDeltas=!1,b.$deltas=[]},this.$informUndoManager=e.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?e.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(a){this.setOption("useSoftTabs",a)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(a){this.setOption("tabSize",a)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(a){return this.$useSoftTabs&&a.column%this.$tabSize===0},this.$overwrite=!1,this.setOverwrite=function(a){this.setOption("overwrite",a)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(a,b){this.$decorations[a]||(this.$decorations[a]=""),this.$decorations[a]+=" "+b,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(a,b){this.$decorations[a]=(this.$decorations[a]||"").replace(" "+b,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(a){this.$breakpoints=[];for(var b=0;b<a.length;b++)this.$breakpoints[a[b]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(a,b){void 0===b&&(b="ace_breakpoint"),b?this.$breakpoints[a]=b:delete this.$breakpoints[a],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(a){delete this.$breakpoints[a],this._signal("changeBreakpoint",{})},this.addMarker=function(a,b,c,d){var e=this.$markerId++,f={range:a,type:c||"line",renderer:"function"==typeof c?c:null,clazz:b,inFront:!!d,id:e};return d?(this.$frontMarkers[e]=f,this._signal("changeFrontMarker")):(this.$backMarkers[e]=f,this._signal("changeBackMarker")),e},this.addDynamicMarker=function(a,b){if(a.update){var c=this.$markerId++;return a.id=c,a.inFront=!!b,b?(this.$frontMarkers[c]=a,this._signal("changeFrontMarker")):(this.$backMarkers[c]=a,this._signal("changeBackMarker")),a}},this.removeMarker=function(a){var b=this.$frontMarkers[a]||this.$backMarkers[a];if(b){var c=b.inFront?this.$frontMarkers:this.$backMarkers;b&&(delete c[a],this._signal(b.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(a){return a?this.$frontMarkers:this.$backMarkers},this.highlight=function(a){if(!this.$searchHighlight){var b=new m(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(b)}this.$searchHighlight.setRegexp(a)},this.highlightLines=function(a,b,c,d){"number"!=typeof b&&(c=b,b=a),c||(c="ace_step");var e=new j(a,0,b,1/0);return e.id=this.addMarker(e,c,"fullLine",d),e},this.setAnnotations=function(a){this.$annotations=a,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(a){var b=a.match(/^.*?(\r?\n)/m);b?this.$autoNewLine=b[1]:this.$autoNewLine="\n"},this.getWordRange=function(a,b){var c=this.getLine(a),d=!1;if(b>0&&(d=!!c.charAt(b-1).match(this.tokenRe)),d||(d=!!c.charAt(b).match(this.tokenRe)),d)var e=this.tokenRe;else if(/^\s+$/.test(c.slice(b-1,b+1)))var e=/\s/;else var e=this.nonTokenRe;var f=b;if(f>0){do f--;while(f>=0&&c.charAt(f).match(e));f++}for(var g=b;g<c.length&&c.charAt(g).match(e);)g++;return new j(a,f,a,g)},this.getAWordRange=function(a,b){for(var c=this.getWordRange(a,b),d=this.getLine(c.end.row);d.charAt(c.end.column).match(/[ \t]/);)c.end.column+=1;return c},this.setNewLineMode=function(a){this.doc.setNewLineMode(a)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(a){this.setOption("useWorker",a)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(a){var b=a.data;this.bgTokenizer.start(b.first),this._signal("tokenizerUpdate",a)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(a,b){if(a&&"object"==typeof a){if(a.getTokenizer)return this.$onChangeMode(a);var c=a,d=c.path}else d=a||"ace/mode/text";return this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new i),this.$modes[d]&&!c?(this.$onChangeMode(this.$modes[d]),void(b&&b())):(this.$modeId=d,f.loadModule(["mode",d],function(a){return this.$modeId!==d?b&&b():this.$modes[d]&&!c?this.$onChangeMode(this.$modes[d]):void(a&&a.Mode&&(a=new a.Mode(c),c||(this.$modes[d]=a,a.$id=d),this.$onChangeMode(a),b&&b()))}.bind(this)),void(this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)))},this.$onChangeMode=function(a,b){if(b||(this.$modeId=a.$id),this.$mode!==a){this.$mode=a,this.$stopWorker(),this.$useWorker&&this.$startWorker();var c=a.getTokenizer();if(void 0!==c.addEventListener){var d=this.onReloadTokenizer.bind(this);c.addEventListener("update",d)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(c);else{this.bgTokenizer=new l(c);var e=this;this.bgTokenizer.addEventListener("update",function(a){e._signal("tokenizerUpdate",a)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=a.tokenRe,this.nonTokenRe=a.nonTokenRe,b||(a.attachToSession&&a.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(a.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(a){f.warn("Could not load worker",a),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(a){this.$scrollTop===a||isNaN(a)||(this.$scrollTop=a,this._signal("changeScrollTop",a))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(a){this.$scrollLeft===a||isNaN(a)||(this.$scrollLeft=a,this._signal("changeScrollLeft",a))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var a=0;return this.lineWidgets.forEach(function(b){b&&b.screenWidth>a&&(a=b.screenWidth)}),this.lineWidgetWidth=a},this.$computeWidth=function(a){if(this.$modified||a){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var b=this.doc.getAllLines(),c=this.$rowLengthCache,d=0,e=0,f=this.$foldData[e],g=f?f.start.row:1/0,h=b.length,i=0;i<h;i++){if(i>g){if(i=f.end.row+1,i>=h)break;f=this.$foldData[e++],g=f?f.start.row:1/0}null==c[i]&&(c[i]=this.$getStringScreenWidth(b[i])[0]),c[i]>d&&(d=c[i])}this.screenWidth=d}},this.getLine=function(a){return this.doc.getLine(a)},this.getLines=function(a,b){return this.doc.getLines(a,b)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(a){return this.doc.getTextRange(a||this.selection.getRange())},this.insert=function(a,b){return this.doc.insert(a,b)},this.remove=function(a){return this.doc.remove(a)},this.undoChanges=function(a,b){if(a.length){this.$fromUndo=!0;for(var c=null,d=a.length-1;d!=-1;d--){var e=a[d];"doc"==e.group?(this.doc.revertDeltas(e.deltas),c=this.$getUndoSelection(e.deltas,!0,c)):e.deltas.forEach(function(a){this.addFolds(a.folds)},this)}return this.$fromUndo=!1,c&&this.$undoSelect&&!b&&this.selection.setSelectionRange(c),c}},this.redoChanges=function(a,b){if(a.length){this.$fromUndo=!0;for(var c=null,d=0;d<a.length;d++){var e=a[d];"doc"==e.group&&(this.doc.applyDeltas(e.deltas),c=this.$getUndoSelection(e.deltas,!1,c))}return this.$fromUndo=!1,c&&this.$undoSelect&&!b&&this.selection.setSelectionRange(c),c}},this.setUndoSelect=function(a){this.$undoSelect=a},this.$getUndoSelection=function(a,b,c){function d(a){var c="insertText"===a.action||"insertLines"===a.action;return b?!c:c}var e,f,g=a[0],h=!1;d(g)?(e=j.fromPoints(g.range.start,g.range.end),h=!0):(e=j.fromPoints(g.range.start,g.range.start),h=!1);for(var i=1;i<a.length;i++)g=a[i],d(g)?(f=g.range.start,e.compare(f.row,f.column)==-1&&e.setStart(g.range.start),f=g.range.end,1==e.compare(f.row,f.column)&&e.setEnd(g.range.end),h=!0):(f=g.range.start,e.compare(f.row,f.column)==-1&&(e=j.fromPoints(g.range.start,g.range.start)),h=!1);if(null!=c){0===j.comparePoints(c.start,e.start)&&(c.start.column+=e.end.column-e.start.column,c.end.column+=e.end.column-e.start.column);var k=c.compareRange(e);1==k?e.setStart(c.start):k==-1&&e.setEnd(c.end)}return e},this.replace=function(a,b){return this.doc.replace(a,b)},this.moveText=function(a,b,c){var d=this.getTextRange(a),e=this.getFoldsInRange(a),f=j.fromPoints(b,b);if(!c){this.remove(a);var g=a.start.row-a.end.row,h=g?-a.end.column:a.start.column-a.end.column;h&&(f.start.row==a.end.row&&f.start.column>a.end.column&&(f.start.column+=h),f.end.row==a.end.row&&f.end.column>a.end.column&&(f.end.column+=h)),g&&f.start.row>=a.end.row&&(f.start.row+=g,f.end.row+=g)}if(f.end=this.insert(f.start,d),e.length){var i=a.start,k=f.start,g=k.row-i.row,h=k.column-i.column;this.addFolds(e.map(function(a){return a=a.clone(),a.start.row==i.row&&(a.start.column+=h),a.end.row==i.row&&(a.end.column+=h),a.start.row+=g,a.end.row+=g,a}))}return f},this.indentRows=function(a,b,c){c=c.replace(/\t/g,this.getTabString());for(var d=a;d<=b;d++)this.insert({row:d,column:0},c)},this.outdentRows=function(a){for(var b=a.collapseRows(),c=new j(0,0,0,0),d=this.getTabSize(),e=b.start.row;e<=b.end.row;++e){var f=this.getLine(e);c.start.row=e,c.end.row=e;for(var g=0;g<d&&" "==f.charAt(g);++g);g<d&&"\t"==f.charAt(g)?(c.start.column=g,c.end.column=g+1):(c.start.column=0,
c.end.column=g),this.remove(c)}},this.$moveLines=function(a,b,c){if(a=this.getRowFoldStart(a),b=this.getRowFoldEnd(b),c<0){var d=this.getRowFoldStart(a+c);if(d<0)return 0;var e=d-a}else if(c>0){var d=this.getRowFoldEnd(b+c);if(d>this.doc.getLength()-1)return 0;var e=d-b}else{a=this.$clipRowToDocument(a),b=this.$clipRowToDocument(b);var e=b-a+1}var f=new j(a,0,b,Number.MAX_VALUE),g=this.getFoldsInRange(f).map(function(a){return a=a.clone(),a.start.row+=e,a.end.row+=e,a}),h=0==c?this.doc.getLines(a,b):this.doc.removeLines(a,b);return this.doc.insertLines(a+e,h),g.length&&this.addFolds(g),e},this.moveLinesUp=function(a,b){return this.$moveLines(a,b,-1)},this.moveLinesDown=function(a,b){return this.$moveLines(a,b,1)},this.duplicateLines=function(a,b){return this.$moveLines(a,b,0)},this.$clipRowToDocument=function(a){return Math.max(0,Math.min(a,this.doc.getLength()-1))},this.$clipColumnToRow=function(a,b){return b<0?0:Math.min(this.doc.getLine(a).length,b)},this.$clipPositionToDocument=function(a,b){if(b=Math.max(0,b),a<0)a=0,b=0;else{var c=this.doc.getLength();a>=c?(a=c-1,b=this.doc.getLine(c-1).length):b=Math.min(this.doc.getLine(a).length,b)}return{row:a,column:b}},this.$clipRangeToDocument=function(a){a.start.row<0?(a.start.row=0,a.start.column=0):a.start.column=this.$clipColumnToRow(a.start.row,a.start.column);var b=this.doc.getLength()-1;return a.end.row>b?(a.end.row=b,a.end.column=this.doc.getLine(b).length):a.end.column=this.$clipColumnToRow(a.end.row,a.end.column),a},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(a){if(a!=this.$useWrapMode){if(this.$useWrapMode=a,this.$modified=!0,this.$resetRowCache(0),a){var b=this.getLength();this.$wrapData=Array(b),this.$updateWrapData(0,b-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(a,b){this.$wrapLimitRange.min===a&&this.$wrapLimitRange.max===b||(this.$wrapLimitRange={min:a,max:b},this.$modified=!0,this._signal("changeWrapMode"))},this.adjustWrapLimit=function(a,b){var c=this.$wrapLimitRange;c.max<0&&(c={min:b,max:b});var d=this.$constrainWrapLimit(a,c.min,c.max);return d!=this.$wrapLimit&&d>1&&(this.$wrapLimit=d,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(a,b,c){return b&&(a=Math.max(b,a)),c&&(a=Math.min(c,a)),a},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(a){this.setWrapLimitRange(a,a)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(a){var b,c=this.$useWrapMode,d=a.data.action,e=a.data.range.start.row,f=a.data.range.end.row,g=a.data.range.start,h=a.data.range.end,i=null;if(d.indexOf("Lines")!=-1?(f="insertLines"==d?e+a.data.lines.length:e,b=a.data.lines?a.data.lines.length:f-e):b=f-e,this.$updating=!0,0!=b)if(d.indexOf("remove")!=-1){this[c?"$wrapData":"$rowLengthCache"].splice(e,b);var j=this.$foldData;i=this.getFoldsInRange(a.data.range),this.removeFolds(i);var k=this.getFoldLine(h.row),l=0;if(k){k.addRemoveChars(h.row,h.column,g.column-h.column),k.shiftRow(-b);var m=this.getFoldLine(e);m&&m!==k&&(m.merge(k),k=m),l=j.indexOf(k)+1}for(l;l<j.length;l++){var k=j[l];k.start.row>=h.row&&k.shiftRow(-b)}f=e}else{var n=Array(b);n.unshift(e,0);var o=c?this.$wrapData:this.$rowLengthCache;o.splice.apply(o,n);var j=this.$foldData,k=this.getFoldLine(e),l=0;if(k){var p=k.range.compareInside(g.row,g.column);0==p?(k=k.split(g.row,g.column),k&&(k.shiftRow(b),k.addRemoveChars(f,0,h.column-g.column))):p==-1&&(k.addRemoveChars(e,0,h.column-g.column),k.shiftRow(b)),l=j.indexOf(k)+1}for(l;l<j.length;l++){var k=j[l];k.start.row>=e&&k.shiftRow(b)}}else{b=Math.abs(a.data.range.start.column-a.data.range.end.column),d.indexOf("remove")!=-1&&(i=this.getFoldsInRange(a.data.range),this.removeFolds(i),b=-b);var k=this.getFoldLine(e);k&&k.addRemoveChars(e,g.column,b)}return c&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,c?this.$updateWrapData(e,f):this.$updateRowLengthCache(e,f),i},this.$updateRowLengthCache=function(a,b,c){this.$rowLengthCache[a]=null,this.$rowLengthCache[b]=null},this.$updateWrapData=function(a,b){var c,d,e=this.doc.getAllLines(),f=this.getTabSize(),g=this.$wrapData,i=this.$wrapLimit,j=a;for(b=Math.min(b,e.length-1);j<=b;)d=this.getFoldLine(j,d),d?(c=[],d.walk(function(a,b,d,f){var g;if(null!=a){g=this.$getDisplayTokens(a,c.length),g[0]=h;for(var i=1;i<g.length;i++)g[i]=k}else g=this.$getDisplayTokens(e[b].substring(f,d),c.length);c=c.concat(g)}.bind(this),d.end.row,e[d.end.row].length+1),g[d.start.row]=this.$computeWrapSplits(c,i,f),j=d.end.row+1):(c=this.$getDisplayTokens(e[j]),g[j]=this.$computeWrapSplits(c,i,f),j++)};var b=1,c=2,h=3,k=4,n=9,o=10,p=11,q=12;this.$computeWrapSplits=function(a,b){function d(b){var c=a.slice(g,b),d=c.length;c.join("").replace(/12/g,function(){d-=1}).replace(/2/g,function(){d-=1}),i+=d,e.push(i),g=b}if(0==a.length)return[];for(var e=[],f=a.length,g=0,i=0,j=this.$wrapAsCode;f-g>b;){var l=g+b;if(a[l-1]>=o&&a[l]>=o)d(l);else if(a[l]!=h&&a[l]!=k){for(var m=Math.max(l-(j?10:b-(b>>2)),g-1);l>m&&a[l]<h;)l--;if(j){for(;l>m&&a[l]<h;)l--;for(;l>m&&a[l]==n;)l--}else for(;l>m&&a[l]<o;)l--;l>m?d(++l):(l=g+b,a[l]==c&&l--,d(l))}else{for(l;l!=g-1&&a[l]!=h;l--);if(l>g){d(l);continue}for(l=g+b;l<a.length&&a[l]==k;l++);if(l==a.length)break;d(l)}}return e},this.$getDisplayTokens=function(d,e){var f,g=[];e=e||0;for(var h=0;h<d.length;h++){var i=d.charCodeAt(h);if(9==i){f=this.getScreenTabSize(g.length+e),g.push(p);for(var j=1;j<f;j++)g.push(q)}else 32==i?g.push(o):i>39&&i<48||i>57&&i<64?g.push(n):i>=4352&&a(i)?g.push(b,c):g.push(b)}return g},this.$getStringScreenWidth=function(b,c,d){if(0==c)return[0,0];null==c&&(c=1/0),d=d||0;var e,f;for(f=0;f<b.length&&(e=b.charCodeAt(f),d+=9==e?this.getScreenTabSize(d):e>=4352&&a(e)?2:1,!(d>c));f++);return[d,f]},this.lineWidgets=null,this.getRowLength=function(a){if(this.lineWidgets)var b=this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0;else b=0;return this.$useWrapMode&&this.$wrapData[a]?this.$wrapData[a].length+1+b:1+b},this.getRowLineCount=function(a){return this.$useWrapMode&&this.$wrapData[a]?this.$wrapData[a].length+1:1},this.getScreenLastRowColumn=function(a){var b=this.screenToDocumentPosition(a,Number.MAX_VALUE);return this.documentToScreenColumn(b.row,b.column)},this.getDocumentLastRowColumn=function(a,b){var c=this.documentToScreenRow(a,b);return this.getScreenLastRowColumn(c)},this.getDocumentLastRowColumnPosition=function(a,b){var c=this.documentToScreenRow(a,b);return this.screenToDocumentPosition(c,Number.MAX_VALUE/10)},this.getRowSplitData=function(a){return this.$useWrapMode?this.$wrapData[a]:void 0},this.getScreenTabSize=function(a){return this.$tabSize-a%this.$tabSize},this.screenToDocumentRow=function(a,b){return this.screenToDocumentPosition(a,b).row},this.screenToDocumentColumn=function(a,b){return this.screenToDocumentPosition(a,b).column},this.screenToDocumentPosition=function(a,b){if(a<0)return{row:0,column:0};var c,d,e=0,f=0,g=0,h=0,i=this.$screenRowCache,j=this.$getRowCacheIndex(i,a),k=i.length;if(k&&j>=0)var g=i[j],e=this.$docRowCache[j],l=a>i[k-1];else var l=!k;for(var m=this.getLength()-1,n=this.getNextFoldLine(e),o=n?n.start.row:1/0;g<=a&&(h=this.getRowLength(e),!(g+h>a||e>=m));)g+=h,e++,e>o&&(e=n.end.row+1,n=this.getNextFoldLine(e,n),o=n?n.start.row:1/0),l&&(this.$docRowCache.push(e),this.$screenRowCache.push(g));if(n&&n.start.row<=e)c=this.getFoldDisplayLine(n),e=n.start.row;else{if(g+h<=a||e>m)return{row:m,column:this.getLine(m).length};c=this.getLine(e),n=null}if(this.$useWrapMode){var p=this.$wrapData[e];if(p){var q=Math.floor(a-g);d=p[q],q>0&&p.length&&(f=p[q-1]||p[p.length-1],c=c.substring(f))}}return f+=this.$getStringScreenWidth(c,b)[1],this.$useWrapMode&&f>=d&&(f=d-1),n?n.idxToPosition(f):{row:e,column:f}},this.documentToScreenPosition=function(a,b){if("undefined"==typeof b)var c=this.$clipPositionToDocument(a.row,a.column);else c=this.$clipPositionToDocument(a,b);a=c.row,b=c.column;var d=0,e=null,f=null;f=this.getFoldAt(a,b,1),f&&(a=f.start.row,b=f.start.column);var g,h=0,i=this.$docRowCache,j=this.$getRowCacheIndex(i,a),k=i.length;if(k&&j>=0)var h=i[j],d=this.$screenRowCache[j],l=a>i[k-1];else var l=!k;for(var m=this.getNextFoldLine(h),n=m?m.start.row:1/0;h<a;){if(h>=n){if(g=m.end.row+1,g>a)break;m=this.getNextFoldLine(g,m),n=m?m.start.row:1/0}else g=h+1;d+=this.getRowLength(h),h=g,l&&(this.$docRowCache.push(h),this.$screenRowCache.push(d))}var o="";if(m&&h>=n?(o=this.getFoldDisplayLine(m,a,b),e=m.start.row):(o=this.getLine(a).substring(0,b),e=a),this.$useWrapMode){var p=this.$wrapData[e];if(p){for(var q=0;o.length>=p[q];)d++,q++;o=o.substring(p[q-1]||0,o.length)}}return{row:d,column:this.$getStringScreenWidth(o)[0]}},this.documentToScreenColumn=function(a,b){return this.documentToScreenPosition(a,b).column},this.documentToScreenRow=function(a,b){return this.documentToScreenPosition(a,b).row},this.getScreenLength=function(){var a=0,b=null;if(this.$useWrapMode)for(var c=this.$wrapData.length,d=0,e=0,b=this.$foldData[e++],f=b?b.start.row:1/0;d<c;){var g=this.$wrapData[d];a+=g?g.length+1:1,d++,d>f&&(d=b.end.row+1,b=this.$foldData[e++],f=b?b.start.row:1/0)}else{a=this.getLength();for(var h=this.$foldData,e=0;e<h.length;e++)b=h[e],a-=b.end.row-b.start.row}return this.lineWidgets&&(a+=this.$getWidgetScreenLength()),a},this.$setFontMetrics=function(a){},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()}}).call(n.prototype),a("./edit_session/folding").Folding.call(n.prototype),a("./edit_session/bracket_match").BracketMatch.call(n.prototype),f.defineOptions(n.prototype,"session",{wrap:{set:function(a){if(a&&"off"!=a?"free"==a?a=!0:"printMargin"==a?a=-1:"string"==typeof a&&(a=parseInt(a,10)||!1):a=!1,this.$wrap!=a){if(a){var b="number"==typeof a?a:null;this.setWrapLimitRange(b,b),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1);this.$wrap=a}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(a){a="auto"==a?"text"!=this.$mode.type:"text"!=a,a!=this.$wrapAsCode&&(this.$wrapAsCode=a,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(a){this.$useWorker=a,this.$stopWorker(),a&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(a){isNaN(a)||this.$tabSize===a||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=a,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},overwrite:{set:function(a){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(a){this.doc.setNewLineMode(a)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(a){this.setMode(a)},get:function(){return this.$modeId}}}),b.EditSession=n}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(a,b,c){"use strict";var d=a("./lib/lang"),e=a("./lib/oop"),f=a("./range").Range,g=function(){this.$options={}};(function(){this.set=function(a){return e.mixin(this.$options,a),this},this.getOptions=function(){return d.copyObject(this.$options)},this.setOptions=function(a){this.$options=a},this.find=function(a){var b=this.$options,c=this.$matchIterator(a,b);if(!c)return!1;var d=null;return c.forEach(function(a,c,e){if(a.start)d=a;else{var g=a.offset+(e||0);if(d=new f(c,g,c,g+a.length),!a.length&&b.start&&b.start.start&&0!=b.skipCurrent&&d.isEqual(b.start))return d=null,!1}return!0}),d},this.findAll=function(a){var b=this.$options;if(!b.needle)return[];this.$assembleRegExp(b);var c=b.range,e=c?a.getLines(c.start.row,c.end.row):a.doc.getAllLines(),g=[],h=b.re;if(b.$isMultiLine){var i,j=h.length,k=e.length-j;a:for(var l=h.offset||0;l<=k;l++){for(var m=0;m<j;m++)if(e[l+m].search(h[m])==-1)continue a;var n=e[l],o=e[l+j-1],p=n.length-n.match(h[0])[0].length,q=o.match(h[j-1])[0].length;i&&i.end.row===l&&i.end.column>p||(g.push(i=new f(l,p,l+j-1,q)),j>2&&(l=l+j-2))}}else for(var r=0;r<e.length;r++)for(var s=d.getMatchOffsets(e[r],h),m=0;m<s.length;m++){var t=s[m];g.push(new f(r,t.offset,r,t.offset+t.length))}if(c){for(var u=c.start.column,v=c.start.column,r=0,m=g.length-1;r<m&&g[r].start.column<u&&g[r].start.row==c.start.row;)r++;for(;r<m&&g[m].end.column>v&&g[m].end.row==c.end.row;)m--;for(g=g.slice(r,m+1),r=0,m=g.length;r<m;r++)g[r].start.row+=c.start.row,g[r].end.row+=c.start.row}return g},this.replace=function(a,b){var c=this.$options,d=this.$assembleRegExp(c);if(c.$isMultiLine)return b;if(d){var e=d.exec(a);if(!e||e[0].length!=a.length)return null;if(b=a.replace(d,b),c.preserveCase){b=b.split("");for(var f=Math.min(a.length,a.length);f--;){var g=a[f];g&&g.toLowerCase()!=g?b[f]=b[f].toUpperCase():b[f]=b[f].toLowerCase()}b=b.join("")}return b}},this.$matchIterator=function(a,b){var c=this.$assembleRegExp(b);if(!c)return!1;var e;if(b.$isMultiLine)var g=c.length,h=function(b,d,h){var i=b.search(c[0]);if(i!=-1){for(var j=1;j<g;j++)if(b=a.getLine(d+j),b.search(c[j])==-1)return;var k=b.match(c[g-1])[0].length,l=new f(d,i,d+g-1,k);return 1==c.offset?(l.start.row--,l.start.column=Number.MAX_VALUE):h&&(l.start.column+=h),!!e(l)||void 0}};else if(b.backwards)var h=function(a,b,f){for(var g=d.getMatchOffsets(a,c),h=g.length-1;h>=0;h--)if(e(g[h],b,f))return!0};else var h=function(a,b,f){for(var g=d.getMatchOffsets(a,c),h=0;h<g.length;h++)if(e(g[h],b,f))return!0};var i=this.$lineIterator(a,b);return{forEach:function(a){e=a,i.forEach(h)}}},this.$assembleRegExp=function(a,b){if(a.needle instanceof RegExp)return a.re=a.needle;var c=a.needle;if(!a.needle)return a.re=!1;a.regExp||(c=d.escapeRegExp(c)),a.wholeWord&&(c="\\b"+c+"\\b");var e=a.caseSensitive?"gm":"gmi";if(a.$isMultiLine=!b&&/[\n\r]/.test(c),a.$isMultiLine)return a.re=this.$assembleMultilineRegExp(c,e);try{var f=new RegExp(c,e)}catch(a){f=!1}return a.re=f},this.$assembleMultilineRegExp=function(a,b){for(var c=a.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),d=[],e=0;e<c.length;e++)try{d.push(new RegExp(c[e],b))}catch(a){return!1}return""==c[0]?(d.shift(),d.offset=1):d.offset=0,d},this.$lineIterator=function(a,b){var c=1==b.backwards,d=0!=b.skipCurrent,e=b.range,f=b.start;f||(f=e?e[c?"end":"start"]:a.selection.getRange()),f.start&&(f=f[d!=c?"end":"start"]);var g=e?e.start.row:0,h=e?e.end.row:a.getLength()-1,i=c?function(c){var d=f.row,e=a.getLine(d).substring(0,f.column);if(!c(e,d)){for(d--;d>=g;d--)if(c(a.getLine(d),d))return;if(0!=b.wrap)for(d=h,g=f.row;d>=g;d--)if(c(a.getLine(d),d))return}}:function(c){var d=f.row,e=a.getLine(d).substr(f.column);if(!c(e,d,f.column)){for(d+=1;d<=h;d++)if(c(a.getLine(d),d))return;if(0!=b.wrap)for(d=g,h=f.row;d<=h;d++)if(c(a.getLine(d),d))return}};return{forEach:i}}}).call(g.prototype),b.Search=g}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(a,b,c){"use strict";function d(a,b){this.platform=b||(g.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(a),this.$singleCommand=!0}function e(a,b){d.call(this,a,b),this.$singleCommand=!1}var f=a("../lib/keys"),g=a("../lib/useragent"),h=f.KEY_MODS;e.prototype=d.prototype,function(){this.addCommand=function(a){this.commands[a.name]&&this.removeCommand(a),this.commands[a.name]=a,a.bindKey&&this._buildKeyHash(a)},this.removeCommand=function(a,b){var c=a&&("string"==typeof a?a:a.name);a=this.commands[c],b||delete this.commands[c];var d=this.commandKeyBinding;for(var e in d){var f=d[e];if(f==a)delete d[e];else if(Array.isArray(f)){var g=f.indexOf(a);g!=-1&&(f.splice(g,1),1==f.length&&(d[e]=f[0]))}}},this.bindKey=function(a,b,c){if("object"==typeof a&&(a=a[this.platform]),a)return"function"==typeof b?this.addCommand({exec:b,bindKey:a,name:b.name||a}):void a.split("|").forEach(function(a){var d="";if(a.indexOf(" ")!=-1){var e=a.split(/\s+/);a=e.pop(),e.forEach(function(a){var b=this.parseKeys(a),c=h[b.hashId]+b.key;d+=(d?" ":"")+c,this._addCommandToBinding(d,"chainKeys")},this),d+=" "}var f=this.parseKeys(a),g=h[f.hashId]+f.key;this._addCommandToBinding(d+g,b,c)},this)},this._addCommandToBinding=function(a,b,c){var d,e=this.commandKeyBinding;b?!e[a]||this.$singleCommand?e[a]=b:(Array.isArray(e[a])?(d=e[a].indexOf(b))!=-1&&e[a].splice(d,1):e[a]=[e[a]],c||b.isDefault?e[a].unshift(b):e[a].push(b)):delete e[a]},this.addCommands=function(a){a&&Object.keys(a).forEach(function(b){var c=a[b];if(c){if("string"==typeof c)return this.bindKey(c,b);"function"==typeof c&&(c={exec:c}),"object"==typeof c&&(c.name||(c.name=b),this.addCommand(c))}},this)},this.removeCommands=function(a){Object.keys(a).forEach(function(b){this.removeCommand(a[b])},this)},this.bindKeys=function(a){Object.keys(a).forEach(function(b){this.bindKey(b,a[b])},this)},this._buildKeyHash=function(a){this.bindKey(a.bindKey,a)},this.parseKeys=function(a){var b=a.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(a){return a}),c=b.pop(),d=f[c];if(f.FUNCTION_KEYS[d])c=f.FUNCTION_KEYS[d].toLowerCase();else{if(!b.length)return{key:c,hashId:-1};if(1==b.length&&"shift"==b[0])return{key:c.toUpperCase(),hashId:-1}}for(var e=0,g=b.length;g--;){var h=f.KEY_MODS[b[g]];if(null==h)return"undefined"!=typeof console&&console.error("invalid modifier "+b[g]+" in "+a),!1;e|=h}return{key:c,hashId:e}},this.findKeyCommand=function(a,b){var c=h[a]+b;return this.commandKeyBinding[c]},this.handleKeyboard=function(a,b,c,d){var e=h[b]+c,f=this.commandKeyBinding[e];return a.$keyChain&&(a.$keyChain+=" "+e,f=this.commandKeyBinding[a.$keyChain]||f),!f||"chainKeys"!=f&&"chainKeys"!=f[f.length-1]?(a.$keyChain&&d>0&&(a.$keyChain=""),{command:f}):(a.$keyChain=a.$keyChain||e,{command:"null"})}}.call(d.prototype),b.HashHandler=d,b.MultiHashHandler=e}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("../lib/oop"),e=a("../keyboard/hash_handler").MultiHashHandler,f=a("../lib/event_emitter").EventEmitter,g=function(a,b){e.call(this,b,a),this.byName=this.commands,this.setDefaultHandler("exec",function(a){return a.command.exec(a.editor,a.args||{})})};d.inherits(g,e),function(){d.implement(this,f),this.exec=function(a,b,c){if(Array.isArray(a)){for(var d=a.length;d--;)if(this.exec(a[d],b,c))return!0;return!1}if("string"==typeof a&&(a=this.commands[a]),!a)return!1;if(b&&b.$readOnly&&!a.readOnly)return!1;var e={editor:b,command:a,args:c};return e.returnValue=this._emit("exec",e),this._signal("afterExec",e),e.returnValue!==!1},this.toggleRecording=function(a){if(!this.$inReplay)return a&&a._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(a){this.macro.push([a.command,a.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(a){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(a);try{this.$inReplay=!0,this.macro.forEach(function(b){"string"==typeof b?this.exec(b,a):this.exec(b[0],a,b[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(a){return a.map(function(a){return"string"!=typeof a[0]&&(a[0]=a[0].name),a[1]||(a=a[0]),a})}}.call(g.prototype),b.CommandManager=g}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(a,b,c){"use strict";function d(a,b){return{win:a,mac:b}}var e=a("../lib/lang"),f=a("../config"),g=a("../range").Range;b.commands=[{name:"showSettingsMenu",bindKey:d("Ctrl-,","Command-,"),exec:function(a){f.loadModule("ace/ext/settings_menu",function(b){b.init(a),a.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:d("Alt-E","Ctrl-E"),exec:function(a){f.loadModule("ace/ext/error_marker",function(b){b.showErrorMarker(a,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:d("Alt-Shift-E","Ctrl-Shift-E"),exec:function(a){f.loadModule("ace/ext/error_marker",function(b){b.showErrorMarker(a,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:d("Ctrl-A","Command-A"),exec:function(a){a.selectAll()},readOnly:!0},{name:"centerselection",bindKey:d(null,"Ctrl-L"),exec:function(a){a.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:d("Ctrl-L","Command-L"),exec:function(a){var b=parseInt(prompt("Enter line number:"),10);isNaN(b)||a.gotoLine(b)},readOnly:!0},{name:"fold",bindKey:d("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(a){a.session.toggleFold(!1)},scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:d("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(a){a.session.toggleFold(!0)},scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:d("F2","F2"),exec:function(a){a.session.toggleFoldWidget()},scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:d("Alt-F2","Alt-F2"),exec:function(a){a.session.toggleFoldWidget(!0)},scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:d("Ctrl-Alt-0","Ctrl-Command-Option-0"),exec:function(a){a.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:d("Alt-0","Command-Option-0"),exec:function(a){a.session.foldAll(),a.session.unfold(a.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:d("Alt-Shift-0","Command-Option-Shift-0"),exec:function(a){a.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:d("Ctrl-K","Command-G"),exec:function(a){a.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:d("Ctrl-Shift-K","Command-Shift-G"),exec:function(a){a.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",bindKey:d("Alt-K","Ctrl-G"),exec:function(a){a.selection.isEmpty()?a.selection.selectWord():a.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:d("Alt-Shift-K","Ctrl-Shift-G"),exec:function(a){a.selection.isEmpty()?a.selection.selectWord():a.findPrevious()},readOnly:!0},{name:"find",bindKey:d("Ctrl-F","Command-F"),exec:function(a){f.loadModule("ace/ext/searchbox",function(b){b.Search(a)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(a){a.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:d("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(a){a.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:d("Ctrl-Home","Command-Home|Command-Up"),exec:function(a){a.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:d("Shift-Up","Shift-Up"),exec:function(a){a.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",bindKey:d("Up","Up|Ctrl-P"),exec:function(a,b){a.navigateUp(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",bindKey:d("Ctrl-Shift-End","Command-Shift-Down"),exec:function(a){a.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:d("Ctrl-End","Command-End|Command-Down"),exec:function(a){a.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:d("Shift-Down","Shift-Down"),exec:function(a){a.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:d("Down","Down|Ctrl-N"),exec:function(a,b){a.navigateDown(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:d("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(a){a.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:d("Ctrl-Left","Option-Left"),exec:function(a){a.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:d("Alt-Shift-Left","Command-Shift-Left"),exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:d("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(a){a.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:d("Shift-Left","Shift-Left"),exec:function(a){a.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:d("Left","Left|Ctrl-B"),exec:function(a,b){a.navigateLeft(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:d("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(a){a.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:d("Ctrl-Right","Option-Right"),exec:function(a){a.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:d("Alt-Shift-Right","Command-Shift-Right"),exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:d("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(a){a.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:d("Shift-Right","Shift-Right"),exec:function(a){a.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:d("Right","Right|Ctrl-F"),exec:function(a,b){a.navigateRight(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(a){a.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:d(null,"Option-PageDown"),exec:function(a){a.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:d("PageDown","PageDown|Ctrl-V"),exec:function(a){a.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(a){a.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:d(null,"Option-PageUp"),exec:function(a){a.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(a){a.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:d("Ctrl-Up",null),exec:function(a){a.renderer.scrollBy(0,-2*a.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:d("Ctrl-Down",null),exec:function(a){a.renderer.scrollBy(0,2*a.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:d("Ctrl-Alt-E","Command-Option-E"),exec:function(a){a.commands.toggleRecording(a)},readOnly:!0},{name:"replaymacro",bindKey:d("Ctrl-Shift-E","Command-Shift-E"),exec:function(a){a.commands.replay(a)},readOnly:!0},{name:"jumptomatching",bindKey:d("Ctrl-P","Ctrl-P"),exec:function(a){a.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",bindKey:d("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(a){a.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",bindKey:d("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(a){a.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",bindKey:d("null","null"),exec:function(){},passEvent:!0,readOnly:!0},{name:"cut",exec:function(a){var b=a.getSelectionRange();a._emit("cut",b),a.selection.isEmpty()||(a.session.remove(b),a.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"removeline",bindKey:d("Ctrl-D","Command-D"),exec:function(a){a.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:d("Ctrl-Shift-D","Command-Shift-D"),exec:function(a){a.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:d("Ctrl-Alt-S","Command-Alt-S"),exec:function(a){a.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:d("Ctrl-/","Command-/"),exec:function(a){a.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:d("Ctrl-Shift-/","Command-Shift-/"),exec:function(a){a.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:d("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(a){a.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:d("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(a){a.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",bindKey:d("Ctrl-H","Command-Option-F"),exec:function(a){f.loadModule("ace/ext/searchbox",function(b){b.Search(a,!0)})}},{name:"undo",bindKey:d("Ctrl-Z","Command-Z"),exec:function(a){a.undo()}},{name:"redo",bindKey:d("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(a){a.redo()}},{name:"copylinesup",bindKey:d("Alt-Shift-Up","Command-Option-Up"),exec:function(a){a.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:d("Alt-Up","Option-Up"),exec:function(a){a.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:d("Alt-Shift-Down","Command-Option-Down"),exec:function(a){a.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:d("Alt-Down","Option-Down"),exec:function(a){a.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:d("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(a){a.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:d("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(a){a.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:d("Shift-Delete",null),exec:function(a){return!!a.selection.isEmpty()&&void a.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:d("Alt-Backspace","Command-Backspace"),exec:function(a){a.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:d("Alt-Delete","Ctrl-K"),exec:function(a){a.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:d("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(a){a.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:d("Ctrl-Delete","Alt-Delete"),exec:function(a){a.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:d("Shift-Tab","Shift-Tab"),exec:function(a){a.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:d("Tab","Tab"),exec:function(a){a.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"
},{name:"blockoutdent",bindKey:d("Ctrl-[","Ctrl-["),exec:function(a){a.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:d("Ctrl-]","Ctrl-]"),exec:function(a){a.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(a,b){a.insert(b)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(a,b){a.insert(e.stringRepeat(b.text||"",b.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:d(null,"Ctrl-O"),exec:function(a){a.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:d("Ctrl-T","Ctrl-T"),exec:function(a){a.transposeLetters()},multiSelectAction:function(a){a.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:d("Ctrl-U","Ctrl-U"),exec:function(a){a.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:d("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(a){a.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:d("Ctrl-Shift-L","Command-Shift-L"),exec:function(a){var b=a.selection.getRange();b.start.column=b.end.column=0,b.end.row++,a.selection.setRange(b,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:d(null,null),exec:function(a){for(var b=a.selection.isBackwards(),c=b?a.selection.getSelectionLead():a.selection.getSelectionAnchor(),d=b?a.selection.getSelectionAnchor():a.selection.getSelectionLead(),f=a.session.doc.getLine(c.row).length,h=a.session.doc.getTextRange(a.selection.getRange()),i=h.replace(/\n\s*/," ").length,j=a.session.doc.getLine(c.row),k=c.row+1;k<=d.row+1;k++){var l=e.stringTrimLeft(e.stringTrimRight(a.session.doc.getLine(k)));0!==l.length&&(l=" "+l),j+=l}d.row+1<a.session.doc.getLength()-1&&(j+=a.session.doc.getNewLineCharacter()),a.clearSelection(),a.session.doc.replace(new g(c.row,0,d.row+2,0),j),i>0?(a.selection.moveCursorTo(c.row,c.column),a.selection.selectTo(c.row,c.column+i)):(f=a.session.doc.getLine(c.row).length>f?f+1:f,a.selection.moveCursorTo(c.row,f))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",bindKey:d(null,null),exec:function(a){var b=a.session.doc.getLength()-1,c=a.session.doc.getLine(b).length,d=a.selection.rangeList.ranges,e=[];d.length<1&&(d=[a.selection.getRange()]);for(var f=0;f<d.length;f++)f==d.length-1&&(d[f].end.row===b&&d[f].end.column===c||e.push(new g(d[f].end.row,d[f].end.column,b,c))),0===f?0===d[f].start.row&&0===d[f].start.column||e.push(new g(0,0,d[f].start.row,d[f].start.column)):e.push(new g(d[f-1].end.row,d[f-1].end.column,d[f].start.row,d[f].start.column));a.exitMultiSelectMode(),a.clearSelection();for(var f=0;f<e.length;f++)a.selection.addRange(e[f],!1)},readOnly:!0,scrollIntoView:"none"}]}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(a,b,c){"use strict";a("./lib/fixoldbrowsers");var d=a("./lib/oop"),e=a("./lib/dom"),f=a("./lib/lang"),g=a("./lib/useragent"),h=a("./keyboard/textinput").TextInput,i=a("./mouse/mouse_handler").MouseHandler,j=a("./mouse/fold_handler").FoldHandler,k=a("./keyboard/keybinding").KeyBinding,l=a("./edit_session").EditSession,m=a("./search").Search,n=a("./range").Range,o=a("./lib/event_emitter").EventEmitter,p=a("./commands/command_manager").CommandManager,q=a("./commands/default_commands").commands,r=a("./config"),s=a("./token_iterator").TokenIterator,t=function(a,b){var c=a.getContainerElement();this.container=c,this.renderer=a,this.commands=new p(g.isMac?"mac":"win",q),this.textInput=new h(a.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new k(this),this.$mouseHandler=new i(this),new j(this),this.$blockScrolling=0,this.$search=(new m).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=f.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(a,b){b._$emitInputEvent.schedule(31)}),this.setSession(b||new l("")),r.resetOptions(this),r._signal("editor",this)};(function(){d.implement(this,o),this.$initOperationListeners=function(){this.selections=[],this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=f.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(a){if(this.curOp){if(!a||this.curOp.command)return;this.prevOp=this.curOp}a||(this.previousCommand=null,a={}),this.$opResetTimer.schedule(),this.curOp={command:a.command||{},args:a.args,scrollTop:this.renderer.scrollTop},this.curOp.command.name&&this.$blockScrolling++},this.endOperation=function(a){if(this.curOp){if(a&&a.returnValue===!1)return this.curOp=null;this._signal("beforeEndOperation");var b=this.curOp.command;if(b.name&&this.$blockScrolling&&this.$blockScrolling--,b&&b.scrollIntoView){switch(b.scrollIntoView){case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var c=this.selection.getRange(),d=this.renderer.layerConfig;(c.start.row>=d.lastRow||c.end.row<=d.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==b.scrollIntoView&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(a){if(this.$mergeUndoDeltas){var b=this.prevOp,c=this.$mergeableCommands,d=b.command&&a.command.name==b.command.name;if("insertstring"==a.command.name){var e=a.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),d=d&&this.mergeNextCommand&&(!/\s/.test(e)||/\s/.test(b.args)),this.mergeNextCommand=!0}else d=d&&c.indexOf(a.command.name)!==-1;"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(d=!1),d?this.session.mergeUndoDeltas=!0:c.indexOf(a.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(a,b){if(a&&"string"==typeof a){this.$keybindingId=a;var c=this;r.loadModule(["keybinding",a],function(d){c.$keybindingId==a&&c.keyBinding.setKeyboardHandler(d&&d.handler),b&&b()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(a),b&&b()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(a){if(this.session!=a){var b=this.session;if(b){this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange);var c=this.session.getSelection();c.removeEventListener("changeCursor",this.$onCursorChange),c.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=a,a?(this.$onDocumentChange=this.onDocumentChange.bind(this),a.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(a),this.$onChangeMode=this.onChangeMode.bind(this),a.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),a.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),a.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),a.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),a.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),a.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=a.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(a)),this._signal("changeSession",{session:a,oldSession:b}),b&&b._signal("changeEditor",{oldEditor:this}),a&&a._signal("changeEditor",{editor:this})}},this.getSession=function(){return this.session},this.setValue=function(a,b){return this.session.doc.setValue(a),b?1==b?this.navigateFileEnd():b==-1&&this.navigateFileStart():this.selectAll(),a},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(a){this.renderer.onResize(a)},this.setTheme=function(a,b){this.renderer.setTheme(a,b)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(a){this.renderer.setStyle(a)},this.unsetStyle=function(a){this.renderer.unsetStyle(a)},this.getFontSize=function(){return this.getOption("fontSize")||e.computedStyle(this.container,"fontSize")},this.setFontSize=function(a){this.setOption("fontSize",a)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var a=this;this.$highlightPending=!0,setTimeout(function(){a.$highlightPending=!1;var b=a.session;if(b&&b.bgTokenizer){var c=b.findMatchingBracket(a.getCursorPosition());if(c)var d=new n(c.row,c.column,c.row,c.column+1);else if(b.$mode.getMatching)var d=b.$mode.getMatching(a.session);d&&(b.$bracketHighlight=b.addMarker(d,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var a=this;this.$highlightTagPending=!0,setTimeout(function(){a.$highlightTagPending=!1;var b=a.session;if(b&&b.bgTokenizer){var c=a.getCursorPosition(),d=new s(a.session,c.row,c.column),e=d.getCurrentToken();if(!e||!/\b(?:tag-open|tag-name)/.test(e.type))return b.removeMarker(b.$tagHighlight),void(b.$tagHighlight=null);e.type.indexOf("tag-open")!=-1&&(e=d.stepForward());var f=e.value,g=0,h=d.stepBackward();if("<"==h.value){do h=e,e=d.stepForward(),e&&e.value===f&&e.type.indexOf("tag-name")!==-1&&("<"===h.value?g++:"</"===h.value&&g--);while(e&&g>=0)}else{do e=h,h=d.stepBackward(),e&&e.value===f&&e.type.indexOf("tag-name")!==-1&&("<"===h.value?g++:"</"===h.value&&g--);while(h&&g<=0);d.stepForward()}if(!e)return b.removeMarker(b.$tagHighlight),void(b.$tagHighlight=null);var i=d.getCurrentTokenRow(),j=d.getCurrentTokenColumn(),k=new n(i,j,i,j+e.value.length);b.$tagHighlight&&0!==k.compareRange(b.$backMarkers[b.$tagHighlight].range)&&(b.removeMarker(b.$tagHighlight),b.$tagHighlight=null),k&&!b.$tagHighlight&&(b.$tagHighlight=b.addMarker(k,"ace_bracket","text"))}},50)}},this.focus=function(){var a=this;setTimeout(function(){a.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(a){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",a))},this.onBlur=function(a){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",a))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(a){var b,c=a.data,d=c.range;b=d.start.row==d.end.row&&"insertLines"!=c.action&&"removeLines"!=c.action?d.end.row:1/0,this.renderer.updateLines(d.start.row,b,this.session.$useWrapMode),this._signal("change",a),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(a){var b=a.data;this.renderer.updateLines(b.first,b.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||(r.warn("Automatically scrolling cursor into view after selection change","this will be disabled in the next version","set editor.$blockScrolling = Infinity to disable this message"),this.renderer.scrollCursorIntoView()),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var a,b=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(a=this.getCursorPosition()),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(a=!1)),b.$highlightLineMarker&&!a)b.removeMarker(b.$highlightLineMarker.id),b.$highlightLineMarker=null;else if(!b.$highlightLineMarker&&a){var c=new n(a.row,a.column,a.row,1/0);c.id=b.addMarker(c,"ace_active-line","screenLine"),b.$highlightLineMarker=c}else a&&(b.$highlightLineMarker.start.row=a.row,b.$highlightLineMarker.end.row=a.row,b.$highlightLineMarker.start.column=a.column,b._signal("changeBackMarker"))},this.onSelectionChange=function(a){var b=this.session;if(b.$selectionMarker&&b.removeMarker(b.$selectionMarker),b.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var c=this.selection.getRange(),d=this.getSelectionStyle();b.$selectionMarker=b.addMarker(c,"ace_selection",d)}var e=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(e),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var a=this.session,b=this.getSelectionRange();if(!b.isEmpty()&&!b.isMultiLine()){var c=b.start.column-1,d=b.end.column+1,e=a.getLine(b.start.row),f=e.length,g=e.substring(Math.max(c,0),Math.min(d,f));if(!(c>=0&&/^[\w\d]/.test(g)||d<=f&&/[\w\d]$/.test(g))&&(g=e.substring(b.start.column,b.end.column),/^[\w\d]+$/.test(g))){var h=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:g});return h}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(a){this.renderer.updateText(),this._emit("changeMode",a)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var a=this.getSelectedText();return this._signal("copy",a),a},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(a){if(!this.$readOnly){var b={text:a};if(this._signal("paste",b),a=b.text,!this.inMultiSelectMode||this.inVirtualSelectionMode)this.insert(a);else{var c=a.split(/\r\n|\r|\n/),d=this.selection.rangeList.ranges;if(c.length>d.length||c.length<2||!c[1])return this.commands.exec("insertstring",this,a);for(var e=d.length;e--;){var f=d[e];f.isEmpty()||this.session.remove(f),this.session.insert(f.start,c[e])}}this.renderer.scrollCursorIntoView()}},this.execCommand=function(a,b){return this.commands.exec(a,this,b)},this.insert=function(a,b){var c=this.session,d=c.getMode(),e=this.getCursorPosition();if(this.getBehavioursEnabled()&&!b){var f=d.transformAction(c.getState(e.row),"insertion",this,c,a);f&&(a!==f.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),a=f.text)}if("\t"==a&&(a=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()){var g=new n.fromPoints(e,e);g.end.column+=a.length,this.session.remove(g)}}else{var g=this.getSelectionRange();e=this.session.remove(g),this.clearSelection()}if("\n"==a||"\r\n"==a){var h=c.getLine(e.row);if(e.column>h.search(/\S|$/)){var i=h.substr(e.column).search(/\S|$/);c.doc.removeInLine(e.row,e.column,e.column+i)}}this.clearSelection();var j=e.column,k=c.getState(e.row),h=c.getLine(e.row),l=d.checkOutdent(k,h,a);c.insert(e,a);if(f&&f.selection&&(2==f.selection.length?this.selection.setSelectionRange(new n(e.row,j+f.selection[0],e.row,j+f.selection[1])):this.selection.setSelectionRange(new n(e.row+f.selection[0],f.selection[1],e.row+f.selection[2],f.selection[3]))),c.getDocument().isNewLine(a)){var m=d.getNextLineIndent(k,h.slice(0,e.column),c.getTabString());c.insert({row:e.row+1,column:0},m)}l&&d.autoOutdent(k,c,e.row)},this.onTextInput=function(a){this.keyBinding.onTextInput(a)},this.onCommandKey=function(a,b,c){this.keyBinding.onCommandKey(a,b,c)},this.setOverwrite=function(a){this.session.setOverwrite(a)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(a){this.setOption("scrollSpeed",a)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(a){this.setOption("dragDelay",a)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(a){this.setOption("selectionStyle",a)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(a){this.setOption("highlightActiveLine",a)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(a){this.setOption("highlightGutterLine",a)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(a){this.setOption("highlightSelectedWord",a)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(a){this.renderer.setAnimatedScroll(a)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(a){this.renderer.setShowInvisibles(a)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(a){this.renderer.setDisplayIndentGuides(a)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(a){this.renderer.setShowPrintMargin(a)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(a){this.renderer.setPrintMarginColumn(a)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(a){this.setOption("readOnly",a)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(a){this.setOption("behavioursEnabled",a)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(a){this.setOption("wrapBehavioursEnabled",a)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(a){this.setOption("showFoldWidgets",a)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(a){this.setOption("fadeFoldWidgets",a)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(a){this.selection.isEmpty()&&("left"==a?this.selection.selectLeft():this.selection.selectRight());var b=this.getSelectionRange();if(this.getBehavioursEnabled()){var c=this.session,d=c.getState(b.start.row),e=c.getMode().transformAction(d,"deletion",this,c,b);if(0===b.end.column){var f=c.getTextRange(b);if("\n"==f[f.length-1]){var g=c.getLine(b.end.row);/^\s+$/.test(g)&&(b.end.column=g.length)}}e&&(b=e)}this.session.remove(b),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var a=this.getSelectionRange();a.start.column==a.end.column&&a.start.row==a.end.row&&(a.end.column=0,a.end.row++),this.session.remove(a),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var a=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(a)},this.transposeLetters=function(){if(this.selection.isEmpty()){var a=this.getCursorPosition(),b=a.column;if(0!==b){var c,d,e=this.session.getLine(a.row);b<e.length?(c=e.charAt(b)+e.charAt(b-1),d=new n(a.row,b-1,a.row,b+1)):(c=e.charAt(b-1)+e.charAt(b-2),d=new n(a.row,b-2,a.row,b)),this.session.replace(d,c)}}},this.toLowerCase=function(){var a=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var b=this.getSelectionRange(),c=this.session.getTextRange(b);this.session.replace(b,c.toLowerCase()),this.selection.setSelectionRange(a)},this.toUpperCase=function(){var a=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var b=this.getSelectionRange(),c=this.session.getTextRange(b);this.session.replace(b,c.toUpperCase()),this.selection.setSelectionRange(a)},this.indent=function(){var a=this.session,b=this.getSelectionRange();if(b.start.row<b.end.row){var c=this.$getSelectedRows();return void a.indentRows(c.first,c.last,"\t")}if(b.start.column<b.end.column){var d=a.getTextRange(b);if(!/^\s+$/.test(d)){var c=this.$getSelectedRows();return void a.indentRows(c.first,c.last,"\t")}}var e=a.getLine(b.start.row),g=b.start,h=a.getTabSize(),i=a.documentToScreenColumn(g.row,g.column);if(this.session.getUseSoftTabs())var j=h-i%h,k=f.stringRepeat(" ",j);else{for(var j=i%h;" "==e[b.start.column]&&j;)b.start.column--,j--;this.selection.setSelectionRange(b),k="\t"}return this.insert(k)},this.blockIndent=function(){var a=this.$getSelectedRows();this.session.indentRows(a.first,a.last,"\t")},this.blockOutdent=function(){var a=this.session.getSelection();this.session.outdentRows(a.getRange())},this.sortLines=function(){var a=this.$getSelectedRows(),b=this.session,c=[];for(e=a.first;e<=a.last;e++)c.push(b.getLine(e));c.sort(function(a,b){return a.toLowerCase()<b.toLowerCase()?-1:a.toLowerCase()>b.toLowerCase()?1:0});for(var d=new n(0,0,0,0),e=a.first;e<=a.last;e++){var f=b.getLine(e);d.start.row=e,d.end.row=e,d.end.column=f.length,b.replace(d,c[e-a.first])}},this.toggleCommentLines=function(){var a=this.session.getState(this.getCursorPosition().row),b=this.$getSelectedRows();this.session.getMode().toggleCommentLines(a,this.session,b.first,b.last)},this.toggleBlockComment=function(){var a=this.getCursorPosition(),b=this.session.getState(a.row),c=this.getSelectionRange();this.session.getMode().toggleBlockComment(b,this.session,c,a)},this.getNumberAt=function(a,b){var c=/[\-]?[0-9]+(?:\.[0-9]+)?/g;c.lastIndex=0;for(var d=this.session.getLine(a);c.lastIndex<b;){var e=c.exec(d);if(e.index<=b&&e.index+e[0].length>=b){var f={value:e[0],start:e.index,end:e.index+e[0].length};return f}}return null},this.modifyNumber=function(a){var b=this.selection.getCursor().row,c=this.selection.getCursor().column,d=new n(b,c-1,b,c),e=this.session.getTextRange(d);if(!isNaN(parseFloat(e))&&isFinite(e)){var f=this.getNumberAt(b,c);if(f){var g=f.value.indexOf(".")>=0?f.start+f.value.indexOf(".")+1:f.end,h=f.start+f.value.length-g,i=parseFloat(f.value);i*=Math.pow(10,h),a*=g!==f.end&&c<g?Math.pow(10,f.end-c-1):Math.pow(10,f.end-c),i+=a,i/=Math.pow(10,h);var j=i.toFixed(h),k=new n(b,f.start,b,f.end);this.session.replace(k,j),this.moveCursorTo(b,Math.max(f.start+1,c+j.length-f.value.length))}}},this.removeLines=function(){var a,b=this.$getSelectedRows();a=0===b.first||b.last+1<this.session.getLength()?new n(b.first,0,b.last+1,0):new n(b.first-1,this.session.getLine(b.first-1).length,b.last,this.session.getLine(b.last).length),this.session.remove(a),this.clearSelection()},this.duplicateSelection=function(){var a=this.selection,b=this.session,c=a.getRange(),d=a.isBackwards();if(c.isEmpty()){var e=c.start.row;b.duplicateLines(e,e)}else{var f=d?c.start:c.end,g=b.insert(f,b.getTextRange(c),!1);c.start=f,c.end=g,a.setSelectionRange(c,d)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(a,b,c){return this.session.moveText(a,b,c)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(a,b){var c,d,e=this.selection;if(!e.inMultiSelectMode||this.inVirtualSelectionMode){var f=e.toOrientedRange();c=this.$getSelectedRows(f),d=this.session.$moveLines(c.first,c.last,b?0:a),b&&a==-1&&(d=0),f.moveBy(d,0),e.fromOrientedRange(f)}else{var g=e.rangeList.ranges;e.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var h=0,i=0,j=g.length,k=0;k<j;k++){var l=k;g[k].moveBy(h,0),c=this.$getSelectedRows(g[k]);for(var m=c.first,n=c.last;++k<j;){i&&g[k].moveBy(i,0);var o=this.$getSelectedRows(g[k]);if(b&&o.first!=n)break;if(!b&&o.first>n+1)break;n=o.last}for(k--,h=this.session.$moveLines(m,n,b?0:a),b&&a==-1&&(l=k+1);l<=k;)g[l].moveBy(h,0),l++;b||(h=0),i+=h}e.fromOrientedRange(e.ranges[0]),e.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(a){return a=(a||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(a.start.row),last:this.session.getRowFoldEnd(a.end.row)}},this.onCompositionStart=function(a){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(a){this.renderer.setCompositionText(a)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(a){return a>=this.getFirstVisibleRow()&&a<=this.getLastVisibleRow()},this.isRowFullyVisible=function(a){return a>=this.renderer.getFirstFullyVisibleRow()&&a<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(a,b){var c=this.renderer,d=this.renderer.layerConfig,e=a*Math.floor(d.height/d.lineHeight);this.$blockScrolling++,b===!0?this.selection.$moveSelection(function(){this.moveCursorBy(e,0)}):b===!1&&(this.selection.moveCursorBy(e,0),this.selection.clearSelection()),this.$blockScrolling--;var f=c.scrollTop;c.scrollBy(0,e*d.lineHeight),null!=b&&c.scrollCursorIntoView(null,.5),c.animateScrolling(f)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(a){this.renderer.scrollToRow(a)},this.scrollToLine=function(a,b,c,d){this.renderer.scrollToLine(a,b,c,d)},this.centerSelection=function(){var a=this.getSelectionRange(),b={row:Math.floor(a.start.row+(a.end.row-a.start.row)/2),column:Math.floor(a.start.column+(a.end.column-a.start.column)/2)};this.renderer.alignCursor(b,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(a,b){this.selection.moveCursorTo(a,b)},this.moveCursorToPosition=function(a){this.selection.moveCursorToPosition(a)},this.jumpToMatching=function(a,b){var c=this.getCursorPosition(),d=new s(this.session,c.row,c.column),e=d.getCurrentToken(),f=e||d.stepForward();if(f){var g,h,i=!1,j={},k=c.column-f.start,l={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(f.value.match(/[{}()\[\]]/g)){for(;k<f.value.length&&!i;k++)if(l[f.value[k]])switch(h=l[f.value[k]]+"."+f.type.replace("rparen","lparen"),isNaN(j[h])&&(j[h]=0),f.value[k]){case"(":case"[":case"{":j[h]++;break;case")":case"]":case"}":j[h]--,j[h]===-1&&(g="bracket",i=!0)}}else f&&f.type.indexOf("tag-name")!==-1&&(isNaN(j[f.value])&&(j[f.value]=0),"<"===e.value?j[f.value]++:"</"===e.value&&j[f.value]--,j[f.value]===-1&&(g="tag",i=!0));i||(e=f,f=d.stepForward(),k=0)}while(f&&!i);if(g){var m,o;if("bracket"===g)m=this.session.getBracketRange(c),m||(m=new n(d.getCurrentTokenRow(),d.getCurrentTokenColumn()+k-1,d.getCurrentTokenRow(),d.getCurrentTokenColumn()+k-1),o=m.start,(b||o.row===c.row&&Math.abs(o.column-c.column)<2)&&(m=this.session.getBracketRange(o)));else if("tag"===g){if(!f||f.type.indexOf("tag-name")===-1)return;var p=f.value;if(m=new n(d.getCurrentTokenRow(),d.getCurrentTokenColumn()-2,d.getCurrentTokenRow(),d.getCurrentTokenColumn()-2),
0===m.compare(c.row,c.column)){i=!1;do f=e,e=d.stepBackward(),e&&(e.type.indexOf("tag-close")!==-1&&m.setEnd(d.getCurrentTokenRow(),d.getCurrentTokenColumn()+1),f.value===p&&f.type.indexOf("tag-name")!==-1&&("<"===e.value?j[p]++:"</"===e.value&&j[p]--,0===j[p]&&(i=!0)));while(e&&!i)}f&&f.type.indexOf("tag-name")&&(o=m.start,o.row==c.row&&Math.abs(o.column-c.column)<2&&(o=m.end))}o=m&&m.cursor||o,o&&(a?m&&b?this.selection.setRange(m):m&&m.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(o.row,o.column):this.selection.moveTo(o.row,o.column))}}},this.gotoLine=function(a,b,c){this.selection.clearSelection(),this.session.unfold({row:a-1,column:b||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(a-1,b||0),this.$blockScrolling-=1,this.isRowFullyVisible(a-1)||this.scrollToLine(a-1,!0,c)},this.navigateTo=function(a,b){this.selection.moveTo(a,b)},this.navigateUp=function(a){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var b=this.selection.anchor.getPosition();return this.moveCursorToPosition(b)}this.selection.clearSelection(),this.selection.moveCursorBy(-a||-1,0)},this.navigateDown=function(a){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var b=this.selection.anchor.getPosition();return this.moveCursorToPosition(b)}this.selection.clearSelection(),this.selection.moveCursorBy(a||1,0)},this.navigateLeft=function(a){if(this.selection.isEmpty())for(a=a||1;a--;)this.selection.moveCursorLeft();else{var b=this.getSelectionRange().start;this.moveCursorToPosition(b)}this.clearSelection()},this.navigateRight=function(a){if(this.selection.isEmpty())for(a=a||1;a--;)this.selection.moveCursorRight();else{var b=this.getSelectionRange().end;this.moveCursorToPosition(b)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(a,b){b&&this.$search.set(b);var c=this.$search.find(this.session),d=0;return c?(this.$tryReplace(c,a)&&(d=1),null!==c&&(this.selection.setSelectionRange(c),this.renderer.scrollSelectionIntoView(c.start,c.end)),d):d},this.replaceAll=function(a,b){b&&this.$search.set(b);var c=this.$search.findAll(this.session),d=0;if(!c.length)return d;this.$blockScrolling+=1;var e=this.getSelectionRange();this.selection.moveTo(0,0);for(var f=c.length-1;f>=0;--f)this.$tryReplace(c[f],a)&&d++;return this.selection.setSelectionRange(e),this.$blockScrolling-=1,d},this.$tryReplace=function(a,b){var c=this.session.getTextRange(a);return b=this.$search.replace(c,b),null!==b?(a.end=this.session.replace(a,b),a):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(a,b,c){b||(b={}),"string"==typeof a||a instanceof RegExp?b.needle=a:"object"==typeof a&&d.mixin(b,a);var e=this.selection.getRange();null==b.needle&&(a=this.session.getTextRange(e)||this.$search.$options.needle,a||(e=this.session.getWordRange(e.start.row,e.start.column),a=this.session.getTextRange(e)),this.$search.set({needle:a})),this.$search.set(b),b.start||this.$search.set({start:e});var f=this.$search.find(this.session);return b.preventScroll?f:f?(this.revealRange(f,c),f):(b.backwards?e.start=e.end:e.end=e.start,void this.selection.setRange(e))},this.findNext=function(a,b){this.find({skipCurrent:!0,backwards:!1},a,b)},this.findPrevious=function(a,b){this.find(a,{skipCurrent:!0,backwards:!0},b)},this.revealRange=function(a,b){this.$blockScrolling+=1,this.session.unfold(a),this.selection.setSelectionRange(a),this.$blockScrolling-=1;var c=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(a.start,a.end,.5),b!==!1&&this.renderer.animateScrolling(c)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(a){if(a){var b,c=this,d=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var e=this.$scrollAnchor;e.style.cssText="position:absolute",this.container.insertBefore(e,this.container.firstChild);var f=this.on("changeSelection",function(){d=!0}),g=this.renderer.on("beforeRender",function(){d&&(b=c.renderer.container.getBoundingClientRect())}),h=this.renderer.on("afterRender",function(){if(d&&b&&(c.isFocused()||c.searchBox&&c.searchBox.isFocused())){var a=c.renderer,f=a.$cursorLayer.$pixelPos,g=a.layerConfig,h=f.top-g.offset;d=f.top>=0&&h+b.top<0||!(f.top<g.height&&f.top+b.top+g.lineHeight>window.innerHeight)&&null,null!=d&&(e.style.top=h+"px",e.style.left=f.left+"px",e.style.height=g.lineHeight+"px",e.scrollIntoView(d)),d=b=null}});this.setAutoScrollEditorIntoView=function(a){a||(delete this.setAutoScrollEditorIntoView,this.removeEventListener("changeSelection",f),this.renderer.removeEventListener("afterRender",h),this.renderer.removeEventListener("beforeRender",g))}}},this.$resetCursorStyle=function(){var a=this.$cursorStyle||"ace",b=this.renderer.$cursorLayer;b&&(b.setSmoothBlinking(/smooth/.test(a)),b.isBlinking=!this.$readOnly&&"wide"!=a,e.setCssClass(b.element,"ace_slim-cursors",/slim/.test(a)))}}).call(t.prototype),r.defineOptions(t.prototype,"editor",{selectionStyle:{set:function(a){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:a})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(a){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(a){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(a){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(a){this.setAutoScrollEditorIntoView(a)}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",foldStyle:"session",mode:"session"}),b.Editor=t}),ace.define("ace/undomanager",["require","exports","module"],function(a,b,c){"use strict";var d=function(){this.reset()};(function(){this.execute=function(a){var b=a.args[0];this.$doc=a.args[1],a.merge&&this.hasUndo()&&(this.dirtyCounter--,b=this.$undoStack.pop().concat(b)),this.$undoStack.push(b),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(a){var b=this.$undoStack.pop(),c=null;return b&&(c=this.$doc.undoChanges(b,a),this.$redoStack.push(b),this.dirtyCounter--),c},this.redo=function(a){var b=this.$redoStack.pop(),c=null;return b&&(c=this.$doc.redoChanges(b,a),this.$undoStack.push(b),this.dirtyCounter++),c},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter}}).call(d.prototype),b.UndoManager=d}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("../lib/dom"),e=a("../lib/oop"),f=a("../lib/lang"),g=a("../lib/event_emitter").EventEmitter,h=function(a){this.element=d.createElement("div"),this.element.className="ace_layer ace_gutter-layer",a.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){e.implement(this,g),this.setSession=function(a){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=a,a&&a.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(a,b){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(a,b)},this.removeGutterDecoration=function(a,b){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(a,b)},this.setAnnotations=function(a){this.$annotations=[];for(var b=0;b<a.length;b++){var c=a[b],d=c.row,e=this.$annotations[d];e||(e=this.$annotations[d]={text:[]});var g=c.text;g=g?f.escapeHTML(g):c.html||"",e.text.indexOf(g)===-1&&e.text.push(g);var h=c.type;"error"==h?e.className=" ace_error":"warning"==h&&" ace_error"!=e.className?e.className=" ace_warning":"info"!=h||e.className||(e.className=" ace_info")}},this.$updateAnnotations=function(a){if(this.$annotations.length){var b=a.data,c=b.range,d=c.start.row,e=c.end.row-d;if(0===e);else if("removeText"==b.action||"removeLines"==b.action)this.$annotations.splice(d,e+1,null);else{var f=new Array(e+1);f.unshift(d,1),this.$annotations.splice.apply(this.$annotations,f)}}},this.update=function(a){for(var b=this.session,c=a.firstRow,e=Math.min(a.lastRow+a.gutterOffset,b.getLength()-1),f=b.getNextFoldLine(c),g=f?f.start.row:1/0,h=this.$showFoldWidgets&&b.foldWidgets,i=b.$breakpoints,j=b.$decorations,k=b.$firstLineNumber,l=0,m=b.gutterRenderer||this.$renderer,n=null,o=-1,p=c;;){if(p>g&&(p=f.end.row+1,f=b.getNextFoldLine(p,f),g=f?f.start.row:1/0),p>e){for(;this.$cells.length>o+1;)n=this.$cells.pop(),this.element.removeChild(n.element);break}n=this.$cells[++o],n||(n={element:null,textNode:null,foldWidget:null},n.element=d.createElement("div"),n.textNode=document.createTextNode(""),n.element.appendChild(n.textNode),this.element.appendChild(n.element),this.$cells[o]=n);var q="ace_gutter-cell ";i[p]&&(q+=i[p]),j[p]&&(q+=j[p]),this.$annotations[p]&&(q+=this.$annotations[p].className),n.element.className!=q&&(n.element.className=q);var r=b.getRowLength(p)*a.lineHeight+"px";if(r!=n.element.style.height&&(n.element.style.height=r),h){var s=h[p];null==s&&(s=h[p]=b.getFoldWidget(p))}if(s){n.foldWidget||(n.foldWidget=d.createElement("span"),n.element.appendChild(n.foldWidget));var q="ace_fold-widget ace_"+s;q+="start"==s&&p==g&&p<f.end.row?" ace_closed":" ace_open",n.foldWidget.className!=q&&(n.foldWidget.className=q);var r=a.lineHeight+"px";n.foldWidget.style.height!=r&&(n.foldWidget.style.height=r)}else n.foldWidget&&(n.element.removeChild(n.foldWidget),n.foldWidget=null);var t=l=m?m.getText(b,p):p+k;t!=n.textNode.data&&(n.textNode.data=t),p++}this.element.style.height=a.minHeight+"px",(this.$fixedWidth||b.$useWrapMode)&&(l=b.getLength()+k);var u=m?m.getWidth(b,l,a):l.toString().length*a.characterWidth,v=this.$padding||this.$computePadding();u+=v.left+v.right,u===this.gutterWidth||isNaN(u)||(this.gutterWidth=u,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",u))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(a){this.$renderer=!a&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(a){a?d.addCssClass(this.element,"ace_folding-enabled"):d.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=a,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var a=d.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(a.paddingLeft)+1||0,this.$padding.right=parseInt(a.paddingRight)||0,this.$padding},this.getRegion=function(a){var b=this.$padding||this.$computePadding(),c=this.element.getBoundingClientRect();return a.x<b.left+c.left?"markers":this.$showFoldWidgets&&a.x>c.right-b.right?"foldWidgets":void 0}}).call(h.prototype),b.Gutter=h}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(a,b,c){"use strict";var d=a("../range").Range,e=a("../lib/dom"),f=function(a){this.element=e.createElement("div"),this.element.className="ace_layer ace_marker-layer",a.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(a){this.$padding=a},this.setSession=function(a){this.session=a},this.setMarkers=function(a){this.markers=a},this.update=function(a){var a=a||this.config;if(a){this.config=a;var b=[];for(var c in this.markers){var d=this.markers[c];if(d.range){var e=d.range.clipRows(a.firstRow,a.lastRow);if(!e.isEmpty())if(e=e.toScreenRange(this.session),d.renderer){var f=this.$getTop(e.start.row,a),g=this.$padding+e.start.column*a.characterWidth;d.renderer(b,e,g,f,a)}else"fullLine"==d.type?this.drawFullLineMarker(b,e,d.clazz,a):"screenLine"==d.type?this.drawScreenLineMarker(b,e,d.clazz,a):e.isMultiLine()?"text"==d.type?this.drawTextMarker(b,e,d.clazz,a):this.drawMultiLineMarker(b,e,d.clazz,a):this.drawSingleLineMarker(b,e,d.clazz+" ace_start",a)}else d.update(b,this,this.session,a)}this.element.innerHTML=b.join("")}},this.$getTop=function(a,b){return(a-b.firstRowScreen)*b.lineHeight},this.drawTextMarker=function(a,b,c,e,f){var g=b.start.row,h=new d(g,b.start.column,g,this.session.getScreenLastRowColumn(g));for(this.drawSingleLineMarker(a,h,c+" ace_start",e,1,f),g=b.end.row,h=new d(g,0,g,b.end.column),this.drawSingleLineMarker(a,h,c,e,0,f),g=b.start.row+1;g<b.end.row;g++)h.start.row=g,h.end.row=g,h.end.column=this.session.getScreenLastRowColumn(g),this.drawSingleLineMarker(a,h,c,e,1,f)},this.drawMultiLineMarker=function(a,b,c,d,e){var f=this.$padding,g=d.lineHeight,h=this.$getTop(b.start.row,d),i=f+b.start.column*d.characterWidth;e=e||"",a.push("<div class='",c," ace_start' style='","height:",g,"px;","right:0;","top:",h,"px;","left:",i,"px;",e,"'></div>"),h=this.$getTop(b.end.row,d);var j=b.end.column*d.characterWidth;a.push("<div class='",c,"' style='","height:",g,"px;","width:",j,"px;","top:",h,"px;","left:",f,"px;",e,"'></div>"),g=(b.end.row-b.start.row-1)*d.lineHeight,g<0||(h=this.$getTop(b.start.row+1,d),a.push("<div class='",c,"' style='","height:",g,"px;","right:0;","top:",h,"px;","left:",f,"px;",e,"'></div>"))},this.drawSingleLineMarker=function(a,b,c,d,e,f){var g=d.lineHeight,h=(b.end.column+(e||0)-b.start.column)*d.characterWidth,i=this.$getTop(b.start.row,d),j=this.$padding+b.start.column*d.characterWidth;a.push("<div class='",c,"' style='","height:",g,"px;","width:",h,"px;","top:",i,"px;","left:",j,"px;",f||"","'></div>")},this.drawFullLineMarker=function(a,b,c,d,e){var f=this.$getTop(b.start.row,d),g=d.lineHeight;b.start.row!=b.end.row&&(g+=this.$getTop(b.end.row,d)-f),a.push("<div class='",c,"' style='","height:",g,"px;","top:",f,"px;","left:0;right:0;",e||"","'></div>")},this.drawScreenLineMarker=function(a,b,c,d,e){var f=this.$getTop(b.start.row,d),g=d.lineHeight;a.push("<div class='",c,"' style='","height:",g,"px;","top:",f,"px;","left:0;right:0;",e||"","'></div>")}}).call(f.prototype),b.Marker=f}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("../lib/oop"),e=a("../lib/dom"),f=a("../lib/lang"),g=(a("../lib/useragent"),a("../lib/event_emitter").EventEmitter),h=function(a){this.element=e.createElement("div"),this.element.className="ace_layer ace_text-layer",a.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){d.implement(this,g),this.EOF_CHAR="¬∂",this.EOL_CHAR_LF="¬¨",this.EOL_CHAR_CRLF="¬§",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="‚Üí",this.SPACE_CHAR="¬∑",this.$padding=0,this.$updateEolChar=function(){var a="\n"==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=a)return this.EOL_CHAR=a,!0},this.setPadding=function(a){this.$padding=a,this.element.style.padding="0 "+a+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(a){this.$fontMetrics=a,this.$fontMetrics.on("changeCharacterSize",function(a){this._signal("changeCharacterSize",a)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(a){this.session=a,a&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(a){return this.showInvisibles!=a&&(this.showInvisibles=a,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(a){return this.displayIndentGuides!=a&&(this.displayIndentGuides=a,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var a=this.session.getTabSize();this.tabSize=a;for(var b=this.$tabStrings=[0],c=1;c<a+1;c++)this.showInvisibles?b.push("<span class='ace_invisible ace_invisible_tab'>"+this.TAB_CHAR+f.stringRepeat("¬†",c-1)+"</span>"):b.push(f.stringRepeat("¬†",c));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var d="ace_indent-guide",e="",g="";if(this.showInvisibles){d+=" ace_invisible",e=" ace_invisible_space",g=" ace_invisible_tab";var h=f.stringRepeat(this.SPACE_CHAR,this.tabSize),i=this.TAB_CHAR+f.stringRepeat("¬†",this.tabSize-1)}else var h=f.stringRepeat("¬†",this.tabSize),i=h;this.$tabStrings[" "]="<span class='"+d+e+"'>"+h+"</span>",this.$tabStrings["\t"]="<span class='"+d+g+"'>"+i+"</span>"}},this.updateLines=function(a,b,c){this.config.lastRow==a.lastRow&&this.config.firstRow==a.firstRow||this.scrollLines(a),this.config=a;for(var d=Math.max(b,a.firstRow),e=Math.min(c,a.lastRow),f=this.element.childNodes,g=0,h=a.firstRow;h<d;h++){var i=this.session.getFoldLine(h);if(i){if(i.containsRow(d)){d=i.start.row;break}h=i.end.row}g++}for(var h=d,i=this.session.getNextFoldLine(h),j=i?i.start.row:1/0;;){if(h>j&&(h=i.end.row+1,i=this.session.getNextFoldLine(h,i),j=i?i.start.row:1/0),h>e)break;var k=f[g++];if(k){var l=[];this.$renderLine(l,h,!this.$useLineGroups(),h==j&&i),k.style.height=a.lineHeight*this.session.getRowLength(h)+"px",k.innerHTML=l.join("")}h++}},this.scrollLines=function(a){var b=this.config;if(this.config=a,!b||b.lastRow<a.firstRow)return this.update(a);if(a.lastRow<b.firstRow)return this.update(a);var c=this.element;if(b.firstRow<a.firstRow)for(var d=this.session.getFoldedRowCount(b.firstRow,a.firstRow-1);d>0;d--)c.removeChild(c.firstChild);if(b.lastRow>a.lastRow)for(var d=this.session.getFoldedRowCount(a.lastRow+1,b.lastRow);d>0;d--)c.removeChild(c.lastChild);if(a.firstRow<b.firstRow){var e=this.$renderLinesFragment(a,a.firstRow,b.firstRow-1);c.firstChild?c.insertBefore(e,c.firstChild):c.appendChild(e)}if(a.lastRow>b.lastRow){var e=this.$renderLinesFragment(a,b.lastRow+1,a.lastRow);c.appendChild(e)}},this.$renderLinesFragment=function(a,b,c){for(var d=this.element.ownerDocument.createDocumentFragment(),f=b,g=this.session.getNextFoldLine(f),h=g?g.start.row:1/0;;){if(f>h&&(f=g.end.row+1,g=this.session.getNextFoldLine(f,g),h=g?g.start.row:1/0),f>c)break;var i=e.createElement("div"),j=[];if(this.$renderLine(j,f,!1,f==h&&g),i.innerHTML=j.join(""),this.$useLineGroups())i.className="ace_line_group",d.appendChild(i),i.style.height=a.lineHeight*this.session.getRowLength(f)+"px";else for(;i.firstChild;)d.appendChild(i.firstChild);f++}return d},this.update=function(a){this.config=a;for(var b=[],c=a.firstRow,d=a.lastRow,e=c,f=this.session.getNextFoldLine(e),g=f?f.start.row:1/0;;){if(e>g&&(e=f.end.row+1,f=this.session.getNextFoldLine(e,f),g=f?f.start.row:1/0),e>d)break;this.$useLineGroups()&&b.push("<div class='ace_line_group' style='height:",a.lineHeight*this.session.getRowLength(e),"px'>"),this.$renderLine(b,e,!1,e==g&&f),this.$useLineGroups()&&b.push("</div>"),e++}this.element.innerHTML=b.join("")},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(a,b,c,d){var e=this,g=/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,h=function(a,c,d,g,h){if(c)return e.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+f.stringRepeat(e.SPACE_CHAR,a.length)+"</span>":f.stringRepeat("¬†",a.length);if("&"==a)return"&#38;";if("<"==a)return"&#60;";if("\t"==a){var i=e.session.getScreenTabSize(b+g);return b+=i-1,e.$tabStrings[i]}if("„ÄÄ"==a){var j=e.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",k=e.showInvisibles?e.SPACE_CHAR:"";return b+=1,"<span class='"+j+"' style='width:"+2*e.config.characterWidth+"px'>"+k+"</span>"}return d?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+e.SPACE_CHAR+"</span>":(b+=1,"<span class='ace_cjk' style='width:"+2*e.config.characterWidth+"px'>"+a+"</span>")},i=d.replace(g,h);if(this.$textToken[c.type])a.push(i);else{var j="ace_"+c.type.replace(/\./g," ace_"),k="";"fold"==c.type&&(k=" style='width:"+c.value.length*this.config.characterWidth+"px;' "),a.push("<span class='",j,"'",k,">",i,"</span>")}return b+d.length},this.renderIndentGuide=function(a,b,c){var d=b.search(this.$indentGuideRe);return d<=0||d>=c?b:" "==b[0]?(d-=d%this.tabSize,a.push(f.stringRepeat(this.$tabStrings[" "],d/this.tabSize)),b.substr(d)):"\t"==b[0]?(a.push(f.stringRepeat(this.$tabStrings["\t"],d)),b.substr(d)):b},this.$renderWrappedLine=function(a,b,c,d){for(var e=0,f=0,g=c[0],h=0,i=0;i<b.length;i++){var j=b[i],k=j.value;if(0==i&&this.displayIndentGuides){if(e=k.length,k=this.renderIndentGuide(a,k,g),!k)continue;e-=k.length}if(e+k.length<g)h=this.$renderToken(a,h,j,k),e+=k.length;else{for(;e+k.length>=g;)h=this.$renderToken(a,h,j,k.substring(0,g-e)),k=k.substring(g-e),e=g,d||a.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),f++,h=0,g=c[f]||Number.MAX_VALUE;0!=k.length&&(e+=k.length,h=this.$renderToken(a,h,j,k))}}},this.$renderSimpleLine=function(a,b){var c=0,d=b[0],e=d.value;this.displayIndentGuides&&(e=this.renderIndentGuide(a,e)),e&&(c=this.$renderToken(a,c,d,e));for(var f=1;f<b.length;f++)d=b[f],e=d.value,c=this.$renderToken(a,c,d,e)},this.$renderLine=function(a,b,c,d){if(d||0==d||(d=this.session.getFoldLine(b)),d)var e=this.$getFoldLineTokens(b,d);else var e=this.session.getTokens(b);if(c||a.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(b)),"px'>"),e.length){var f=this.session.getRowSplitData(b);f&&f.length?this.$renderWrappedLine(a,e,f,c):this.$renderSimpleLine(a,e)}this.showInvisibles&&(d&&(b=d.end.row),a.push("<span class='ace_invisible ace_invisible_eol'>",b==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),c||a.push("</div>")},this.$getFoldLineTokens=function(a,b){function c(a,b,c){for(var d=0,f=0;f+a[d].value.length<b;)if(f+=a[d].value.length,d++,d==a.length)return;if(f!=b){var g=a[d].value.substring(b-f);g.length>c-b&&(g=g.substring(0,c-b)),e.push({type:a[d].type,value:g}),f=b+g.length,d+=1}for(;f<c&&d<a.length;){var g=a[d].value;g.length+f>c?e.push({type:a[d].type,value:g.substring(0,c-f)}):e.push(a[d]),f+=g.length,d+=1}}var d=this.session,e=[],f=d.getTokens(a);return b.walk(function(a,b,g,h,i){null!=a?e.push({type:"fold",value:a}):(i&&(f=d.getTokens(b)),f.length&&c(f,h,g))},b.end.row,this.session.getLine(b.end.row).length),e},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(h.prototype),b.Text=h}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(a,b,c){"use strict";var d,e=a("../lib/dom"),f=function(a){this.element=e.createElement("div"),this.element.className="ace_layer ace_cursor-layer",a.appendChild(this.element),void 0===d&&(d="opacity"in this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),e.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateVisibility.bind(this)};(function(){this.$updateVisibility=function(a){for(var b=this.cursors,c=b.length;c--;)b[c].style.visibility=a?"":"hidden"},this.$updateOpacity=function(a){for(var b=this.cursors,c=b.length;c--;)b[c].style.opacity=a?"":"0"},this.$padding=0,this.setPadding=function(a){this.$padding=a},this.setSession=function(a){this.session=a},this.setBlinking=function(a){a!=this.isBlinking&&(this.isBlinking=a,this.restartTimer())},this.setBlinkInterval=function(a){a!=this.blinkInterval&&(this.blinkInterval=a,this.restartTimer())},this.setSmoothBlinking=function(a){a==this.smoothBlinking||d||(this.smoothBlinking=a,e.setCssClass(this.element,"ace_smooth-blinking",a),this.$updateCursors(!0),this.$updateCursors=(a?this.$updateOpacity:this.$updateVisibility).bind(this),this.restartTimer())},this.addCursor=function(){var a=e.createElement("div");return a.className="ace_cursor",this.element.appendChild(a),this.cursors.push(a),a},this.removeCursor=function(){if(this.cursors.length>1){var a=this.cursors.pop();return a.parentNode.removeChild(a),a}},this.hideCursor=function(){this.isVisible=!1,e.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,e.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var a=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&e.removeCssClass(this.element,"ace_smooth-blinking"),a(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){e.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var b=function(){this.timeoutId=setTimeout(function(){a(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){a(!0),b()},this.blinkInterval),b()}},this.getPixelPosition=function(a,b){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var c=this.session.documentToScreenPosition(a),d=this.$padding+c.column*this.config.characterWidth,e=(c.row-(b?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:d,top:e}},this.update=function(a){this.config=a;var b=this.session.$selectionMarkers,c=0,d=0;void 0!==b&&0!==b.length||(b=[{cursor:null}]);for(var c=0,e=b.length;c<e;c++){var f=this.getPixelPosition(b[c].cursor,!0);if(!((f.top>a.height+a.offset||f.top<0)&&c>1)){var g=(this.cursors[d++]||this.addCursor()).style;this.drawCursor?this.drawCursor(g,f,a,b[c],this.session):(g.left=f.left+"px",g.top=f.top+"px",g.width=a.characterWidth+"px",g.height=a.lineHeight+"px")}}for(;this.cursors.length>d;)this.removeCursor();var h=this.session.getOverwrite();this.$setOverwrite(h),this.$pixelPos=f,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(a){a!=this.overwrite&&(this.overwrite=a,a?e.addCssClass(this.element,"ace_overwrite-cursors"):e.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(f.prototype),b.Cursor=f}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/dom"),f=a("./lib/event"),g=a("./lib/event_emitter").EventEmitter,h=function(a){this.element=e.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=e.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),a.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,f.addListener(this.element,"scroll",this.onScroll.bind(this)),f.addListener(this.element,"mousedown",f.preventDefault)};(function(){d.implement(this,g),this.setVisible=function(a){this.element.style.display=a?"":"none",this.isVisible=a}}).call(h.prototype);var i=function(a,b){h.call(this,a),this.scrollTop=0,b.$scrollbarWidth=this.width=e.scrollbarWidth(a.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};d.inherits(i,h),function(){this.classSuffix="-v",this.onScroll=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return this.isVisible?this.width:0},this.setHeight=function(a){this.element.style.height=a+"px"},this.setInnerHeight=function(a){this.inner.style.height=a+"px"},this.setScrollHeight=function(a){this.inner.style.height=a+"px"},this.setScrollTop=function(a){this.scrollTop!=a&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=a)}}.call(i.prototype);var j=function(a,b){h.call(this,a),this.scrollLeft=0,this.height=b.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};d.inherits(j,h),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(a){this.element.style.width=a+"px"},this.setInnerWidth=function(a){this.inner.style.width=a+"px"},this.setScrollWidth=function(a){this.inner.style.width=a+"px"},this.setScrollLeft=function(a){this.scrollLeft!=a&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=a)}}.call(j.prototype),b.ScrollBar=i,b.ScrollBarV=i,b.ScrollBarH=j,b.VScrollBar=i,b.HScrollBar=j}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(a,b,c){"use strict";var d=a("./lib/event"),e=function(a,b){this.onRender=a,this.pending=!1,this.changes=0,this.window=b||window};(function(){this.schedule=function(a){if(this.changes=this.changes|a,!this.pending&&this.changes){this.pending=!0;var b=this;d.nextFrame(function(){b.pending=!1;for(var a;a=b.changes;)b.changes=0,b.onRender(a)},this.window)}}}).call(e.prototype),b.RenderLoop=e}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(a,b,c){var d=a("../lib/oop"),e=a("../lib/dom"),f=a("../lib/lang"),g=a("../lib/useragent"),h=a("../lib/event_emitter").EventEmitter,i=0,j=b.FontMetrics=function(a,b){
this.el=e.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=e.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=e.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),a.appendChild(this.el),i||this.$testFractionalRect(),this.$measureNode.innerHTML=f.stringRepeat("X",i),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){d.implement(this,h),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var a=e.createElement("div");this.$setMeasureNodeStyles(a.style),a.style.width="0.2px",document.documentElement.appendChild(a);var b=a.getBoundingClientRect().width;i=b>0&&b<1?50:100,a.parentNode.removeChild(a)},this.$setMeasureNodeStyles=function(a,b){a.width=a.height="auto",a.left=a.top="0px",a.visibility="hidden",a.position="absolute",a.whiteSpace="pre",g.isIE<8?a["font-family"]="inherit":a.font="inherit",a.overflow=b?"hidden":"visible"},this.checkForSizeChanges=function(){var a=this.$measureSizes();if(a&&(this.$characterSize.width!==a.width||this.$characterSize.height!==a.height)){this.$measureNode.style.fontWeight="bold";var b=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=a,this.charSizes=Object.create(null),this.allowBoldFonts=b&&b.width===a.width&&b.height===a.height,this._emit("changeCharacterSize",{data:a})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var a=this;return this.$pollSizeChangesTimer=setInterval(function(){a.checkForSizeChanges()},500)},this.setPolling=function(a){a?this.$pollSizeChanges():this.$pollSizeChangesTimer&&this.$pollSizeChangesTimer},this.$measureSizes=function(){if(50===i){var a=null;try{a=this.$measureNode.getBoundingClientRect()}catch(b){a={width:0,height:0}}var b={height:a.height,width:a.width/i}}else var b={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/i};return 0===b.width||0===b.height?null:b},this.$measureCharWidth=function(a){this.$main.innerHTML=f.stringRepeat(a,i);var b=this.$main.getBoundingClientRect();return b.width/i},this.getCharacterWidth=function(a){var b=this.charSizes[a];return void 0===b&&(this.charSizes[a]=this.$measureCharWidth(a)/this.$characterSize.width),b},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(j.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/dom"),f=a("./config"),g=a("./lib/useragent"),h=a("./layer/gutter").Gutter,i=a("./layer/marker").Marker,j=a("./layer/text").Text,k=a("./layer/cursor").Cursor,l=a("./scrollbar").HScrollBar,m=a("./scrollbar").VScrollBar,n=a("./renderloop").RenderLoop,o=a("./layer/font_metrics").FontMetrics,p=a("./lib/event_emitter").EventEmitter,q='.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}';e.importCssString(q,"ace_editor");var r=function(a,b){var c=this;this.container=a||e.createElement("div"),this.$keepTextAreaAtCursor=!g.isOldIE,e.addCssClass(this.container,"ace_editor"),this.setTheme(b),this.$gutter=e.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=e.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=e.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new h(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new i(this.content);var d=this.$textLayer=new j(this.content);this.canvas=d.element,this.$markerFront=new i(this.content),this.$cursorLayer=new k(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new m(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.addEventListener("scroll",function(a){c.$scrollAnimation||c.session.setScrollTop(a.data-c.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(a){c.$scrollAnimation||c.session.setScrollLeft(a.data-c.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new o(this.container,500),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(a){c.updateCharacterSize(),c.onResize(!0,c.gutterWidth,c.$size.width,c.$size.height),c._signal("changeCharacterSize",a)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new n(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),f.resetOptions(this),f._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,d.implement(this,p),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(a){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=a,a&&this.scrollMargin.top&&a.getScrollTop()<=0&&a.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(a),this.$markerBack.setSession(a),this.$markerFront.setSession(a),this.$gutterLayer.setSession(a),this.$textLayer.setSession(a),a&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(a,b,c){if(void 0===b&&(b=1/0),this.$changedLines?(this.$changedLines.firstRow>a&&(this.$changedLines.firstRow=a),this.$changedLines.lastRow<b&&(this.$changedLines.lastRow=b)):this.$changedLines={firstRow:a,lastRow:b},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!c)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(a){a?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(a,b,c,d){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=a?1:0;var e=this.container;d||(d=e.clientHeight||e.scrollHeight),c||(c=e.clientWidth||e.scrollWidth);var f=this.$updateCachedSize(a,b,c,d);if(!this.$size.scrollerHeight||!c&&!d)return this.resizing=0;a&&(this.$gutterLayer.$padding=null),a?this.$renderChanges(f|this.$changes,!0):this.$loop.schedule(f|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(a,b,c,d){d-=this.$extraHeight||0;var e=0,f=this.$size,g={width:f.width,height:f.height,scrollerHeight:f.scrollerHeight,scrollerWidth:f.scrollerWidth};return d&&(a||f.height!=d)&&(f.height=d,e|=this.CHANGE_SIZE,f.scrollerHeight=f.height,this.$horizScroll&&(f.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",e|=this.CHANGE_SCROLL),c&&(a||f.width!=c)&&(e|=this.CHANGE_SIZE,f.width=c,null==b&&(b=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=b,this.scrollBarH.element.style.left=this.scroller.style.left=b+"px",f.scrollerWidth=Math.max(0,c-b-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||a)&&(e|=this.CHANGE_FULL)),f.$dirty=!c||!d,e&&this._signal("resize",g),e},this.onGutterResize=function(){var a=this.$showGutter?this.$gutter.offsetWidth:0;a!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,a,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var a=this.$size.scrollerWidth-2*this.$padding,b=Math.floor(a/this.characterWidth);return this.session.adjustWrapLimit(b,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(a){this.setOption("animatedScroll",a)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(a){this.setOption("showInvisibles",a)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(a){this.setOption("displayIndentGuides",a)},this.setShowPrintMargin=function(a){this.setOption("showPrintMargin",a)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(a){this.setOption("printMarginColumn",a)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(a){return this.setOption("showGutter",a)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(a){this.setOption("fadeFoldWidgets",a)},this.setHighlightGutterLine=function(a){this.setOption("highlightGutterLine",a)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var a=this.$cursorLayer.$pixelPos,b=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var c=this.session.selection.getCursor();c.column=0,a=this.$cursorLayer.getPixelPosition(c,!0),b*=this.session.getRowLength(c.row)}this.$gutterLineHighlight.style.top=a.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=b+"px"},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var a=e.createElement("div");a.className="ace_layer ace_print-margin-layer",this.$printMarginEl=e.createElement("div"),this.$printMarginEl.className="ace_print-margin",a.appendChild(this.$printMarginEl),this.content.insertBefore(a,this.content.firstChild)}var b=this.$printMarginEl.style;b.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",b.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.content},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var a=this.layerConfig,b=this.$cursorLayer.$pixelPos.top,c=this.$cursorLayer.$pixelPos.left;b-=a.offset;var d=this.textarea.style,e=this.lineHeight;if(b<0||b>a.height-e)return void(d.top=d.left="0");var f=this.characterWidth;if(this.$composition){var g=this.textarea.value.replace(/^\x01+/,"");f*=this.session.$getStringScreenWidth(g)[0]+2,e+=2}c-=this.scrollLeft,c>this.$size.scrollerWidth-f&&(c=this.$size.scrollerWidth-f),c+=this.gutterWidth,d.height=e+"px",d.width=f+"px",d.left=Math.min(c,this.$size.scrollerWidth-f)+"px",d.top=Math.min(b,this.$size.height-e)+"px"}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var a=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+a},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(a){this.$padding=a,this.$textLayer.setPadding(a),this.$cursorLayer.setPadding(a),this.$markerFront.setPadding(a),this.$markerBack.setPadding(a),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(a,b,c,d){var e=this.scrollMargin;e.top=0|a,e.bottom=0|b,e.right=0|d,e.left=0|c,e.v=e.top+e.bottom,e.h=e.left+e.right,e.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-e.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(a){this.setOption("hScrollBarAlwaysVisible",a)},this.getVScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(a){this.setOption("vScrollBarAlwaysVisible",a)},this.$updateScrollBarV=function(){var a=this.layerConfig.maxHeight,b=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(a-=(b-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>a-b&&(a=this.scrollTop+b,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(a+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(a,b){if(this.$changes&&(a|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!a&&!b)return void(this.$changes|=a);if(this.$size.$dirty)return this.$changes|=a,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender");var c=this.layerConfig;if(a&this.CHANGE_FULL||a&this.CHANGE_SIZE||a&this.CHANGE_TEXT||a&this.CHANGE_LINES||a&this.CHANGE_SCROLL||a&this.CHANGE_H_SCROLL){if(a|=this.$computeLayerConfig(),c.firstRow!=this.layerConfig.firstRow&&c.firstRowScreen==this.layerConfig.firstRowScreen){var d=this.scrollTop+(c.firstRow-this.layerConfig.firstRow)*this.lineHeight;d>0&&(this.scrollTop=d,a|=this.CHANGE_SCROLL,a|=this.$computeLayerConfig())}c=this.layerConfig,this.$updateScrollBarV(),a&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-c.offset+"px",this.content.style.marginTop=-c.offset+"px",this.content.style.width=c.width+2*this.$padding+"px",this.content.style.height=c.minHeight+"px"}return a&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),a&this.CHANGE_FULL?(this.$textLayer.update(c),this.$showGutter&&this.$gutterLayer.update(c),this.$markerBack.update(c),this.$markerFront.update(c),this.$cursorLayer.update(c),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),void this._signal("afterRender")):a&this.CHANGE_SCROLL?(a&this.CHANGE_TEXT||a&this.CHANGE_LINES?this.$textLayer.update(c):this.$textLayer.scrollLines(c),this.$showGutter&&this.$gutterLayer.update(c),this.$markerBack.update(c),this.$markerFront.update(c),this.$cursorLayer.update(c),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),void this._signal("afterRender")):(a&this.CHANGE_TEXT?(this.$textLayer.update(c),this.$showGutter&&this.$gutterLayer.update(c)):a&this.CHANGE_LINES?(this.$updateLines()||a&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(c):(a&this.CHANGE_TEXT||a&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(c),a&this.CHANGE_CURSOR&&(this.$cursorLayer.update(c),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),a&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(c),a&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(c),void this._signal("afterRender"))},this.$autosize=function(){var a=this.session.getScreenLength()*this.lineHeight,b=this.$maxLines*this.lineHeight,c=Math.max((this.$minLines||1)*this.lineHeight,Math.min(b,a))+this.scrollMargin.v+(this.$extraHeight||0),d=a>b;if(c!=this.desiredHeight||this.$size.height!=this.desiredHeight||d!=this.$vScroll){d!=this.$vScroll&&(this.$vScroll=d,this.scrollBarV.setVisible(d));var e=this.container.clientWidth;this.container.style.height=c+"px",this.$updateCachedSize(!0,this.$gutterWidth,e,c),this.desiredHeight=c,this._signal("autosize")}},this.$computeLayerConfig=function(){this.$maxLines&&this.lineHeight>1&&this.$autosize();var a=this.session,b=this.$size,c=b.height<=2*this.lineHeight,d=this.session.getScreenLength(),e=d*this.lineHeight,f=this.scrollTop%this.lineHeight,g=b.scrollerHeight+this.lineHeight,h=this.$getLongestLine(),i=!c&&(this.$hScrollBarAlwaysVisible||b.scrollerWidth-h-2*this.$padding<0),j=this.$horizScroll!==i;j&&(this.$horizScroll=i,this.scrollBarH.setVisible(i));var k=!this.$maxLines&&this.$scrollPastEnd?(b.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;e+=k,this.session.setScrollTop(Math.max(-this.scrollMargin.top,Math.min(this.scrollTop,e-b.scrollerHeight+this.scrollMargin.bottom))),this.session.setScrollLeft(Math.max(-this.scrollMargin.left,Math.min(this.scrollLeft,h+2*this.$padding-b.scrollerWidth+this.scrollMargin.right)));var l=!c&&(this.$vScrollBarAlwaysVisible||b.scrollerHeight-e+k<0||this.scrollTop),m=this.$vScroll!==l;m&&(this.$vScroll=l,this.scrollBarV.setVisible(l));var n,o,p=Math.ceil(g/this.lineHeight)-1,q=Math.max(0,Math.round((this.scrollTop-f)/this.lineHeight)),r=q+p,s=this.lineHeight;q=a.screenToDocumentRow(q,0);var t=a.getFoldLine(q);t&&(q=t.start.row),n=a.documentToScreenRow(q,0),o=a.getRowLength(q)*s,r=Math.min(a.screenToDocumentRow(r,0),a.getLength()-1),g=b.scrollerHeight+a.getRowLength(r)*s+o,f=this.scrollTop-n*s;var u=0;return this.layerConfig.width!=h&&(u=this.CHANGE_H_SCROLL),(j||m)&&(u=this.$updateCachedSize(!0,this.gutterWidth,b.width,b.height),this._signal("scrollbarVisibilityChanged"),m&&(h=this.$getLongestLine())),this.layerConfig={width:h,padding:this.$padding,firstRow:q,firstRowScreen:n,lastRow:r,lineHeight:s,characterWidth:this.characterWidth,minHeight:g,maxHeight:e,offset:f,gutterOffset:Math.max(0,Math.ceil((f+b.height-b.scrollerHeight)/s)),height:this.$size.scrollerHeight},u},this.$updateLines=function(){var a=this.$changedLines.firstRow,b=this.$changedLines.lastRow;this.$changedLines=null;var c=this.layerConfig;if(!(a>c.lastRow+1||b<c.firstRow))return b===1/0?(this.$showGutter&&this.$gutterLayer.update(c),void this.$textLayer.update(c)):(this.$textLayer.updateLines(c,a,b),!0)},this.$getLongestLine=function(){var a=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(a+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(a*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(a,b){this.$gutterLayer.addGutterDecoration(a,b)},this.removeGutterDecoration=function(a,b){this.$gutterLayer.removeGutterDecoration(a,b)},this.updateBreakpoints=function(a){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(a){this.$gutterLayer.setAnnotations(a),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(a,b,c){this.scrollCursorIntoView(a,c),this.scrollCursorIntoView(b,c)},this.scrollCursorIntoView=function(a,b,c){if(0!==this.$size.scrollerHeight){var d=this.$cursorLayer.getPixelPosition(a),e=d.left,f=d.top,g=c&&c.top||0,h=c&&c.bottom||0,i=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;i+g>f?(b&&(f-=b*this.$size.scrollerHeight),0===f&&(f=-this.scrollMargin.top),
this.session.setScrollTop(f)):i+this.$size.scrollerHeight-h<f+this.lineHeight&&(b&&(f+=b*this.$size.scrollerHeight),this.session.setScrollTop(f+this.lineHeight-this.$size.scrollerHeight));var j=this.scrollLeft;j>e?(e<this.$padding+2*this.layerConfig.characterWidth&&(e=-this.scrollMargin.left),this.session.setScrollLeft(e)):j+this.$size.scrollerWidth<e+this.characterWidth?this.session.setScrollLeft(Math.round(e+this.characterWidth-this.$size.scrollerWidth)):j<=this.$padding&&e-j<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(a){this.session.setScrollTop(a*this.lineHeight)},this.alignCursor=function(a,b){"number"==typeof a&&(a={row:a,column:0});var c=this.$cursorLayer.getPixelPosition(a),d=this.$size.scrollerHeight-this.lineHeight,e=c.top-d*(b||0);return this.session.setScrollTop(e),e},this.STEPS=8,this.$calcSteps=function(a,b){var c=0,d=this.STEPS,e=[],f=function(a,b,c){return c*(Math.pow(a-1,3)+1)+b};for(c=0;c<d;++c)e.push(f(c/this.STEPS,a,b-a));return e},this.scrollToLine=function(a,b,c,d){var e=this.$cursorLayer.getPixelPosition({row:a,column:0}),f=e.top;b&&(f-=this.$size.scrollerHeight/2);var g=this.scrollTop;this.session.setScrollTop(f),c!==!1&&this.animateScrolling(g,d)},this.animateScrolling=function(a,b){var c=this.scrollTop;if(this.$animatedScroll){var d=this;if(a!=c){if(this.$scrollAnimation){var e=this.$scrollAnimation.steps;if(e.length&&(a=e[0],a==c))return}var f=d.$calcSteps(a,c);this.$scrollAnimation={from:a,to:c,steps:f},clearInterval(this.$timer),d.session.setScrollTop(f.shift()),d.session.$scrollTop=c,this.$timer=setInterval(function(){f.length?(d.session.setScrollTop(f.shift()),d.session.$scrollTop=c):null!=c?(d.session.$scrollTop=-1,d.session.setScrollTop(c),c=null):(d.$timer=clearInterval(d.$timer),d.$scrollAnimation=null,b&&b())},10)}}},this.scrollToY=function(a){this.scrollTop!==a&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=a)},this.scrollToX=function(a){this.scrollLeft!==a&&(this.scrollLeft=a),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(a,b){this.session.setScrollTop(b),this.session.setScrollLeft(b)},this.scrollBy=function(a,b){b&&this.session.setScrollTop(this.session.getScrollTop()+b),a&&this.session.setScrollLeft(this.session.getScrollLeft()+a)},this.isScrollableBy=function(a,b){return b<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(b>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(a<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(a>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=(a+this.scrollLeft-c.left-this.$padding)/this.characterWidth,e=Math.floor((b+this.scrollTop-c.top)/this.lineHeight),f=Math.round(d);return{row:e,column:f,side:d-f>0?1:-1}},this.screenToTextCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=Math.round((a+this.scrollLeft-c.left-this.$padding)/this.characterWidth),e=(b+this.scrollTop-c.top)/this.lineHeight;return this.session.screenToDocumentPosition(e,Math.max(d,0))},this.textToScreenCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=this.session.documentToScreenPosition(a,b),e=this.$padding+Math.round(d.column*this.characterWidth),f=d.row*this.lineHeight;return{pageX:c.left+e-this.scrollLeft,pageY:c.top+f-this.scrollTop}},this.visualizeFocus=function(){e.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){e.removeCssClass(this.container,"ace_focus")},this.showComposition=function(a){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,e.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(a){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(e.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(a,b){function c(c){if(d.$themeId!=a)return b&&b();if(c.cssClass){e.importCssString(c.cssText,c.cssClass,d.container.ownerDocument),d.theme&&e.removeCssClass(d.container,d.theme.cssClass);var f="padding"in c?c.padding:"padding"in(d.theme||{})?4:d.$padding;d.$padding&&f!=d.$padding&&d.setPadding(f),d.$theme=c.cssClass,d.theme=c,e.addCssClass(d.container,c.cssClass),e.setCssClass(d.container,"ace_dark",c.isDark),d.$size&&(d.$size.width=0,d.$updateSizeAsync()),d._dispatchEvent("themeLoaded",{theme:c}),b&&b()}}var d=this;if(this.$themeId=a,d._dispatchEvent("themeChange",{theme:a}),a&&"string"!=typeof a)c(a);else{var g=a||this.$options.theme.initialValue;f.loadModule(["theme",g],c)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(a,b){e.setCssClass(this.container,a,b!==!1)},this.unsetStyle=function(a){e.removeCssClass(this.container,a)},this.setCursorStyle=function(a){this.scroller.style.cursor!=a&&(this.scroller.style.cursor=a)},this.setMouseCursor=function(a){this.scroller.style.cursor=a},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(r.prototype),f.defineOptions(r.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(a){this.$textLayer.setShowInvisibles(a)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(a){"number"==typeof a&&(this.$printMarginColumn=a),this.$showPrintMargin=!!a,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(a){this.$gutter.style.display=a?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(a){e.setCssClass(this.$gutter,"ace_fade-fold-widgets",a)},initialValue:!1},showFoldWidgets:{set:function(a){this.$gutterLayer.setShowFoldWidgets(a)},initialValue:!0},showLineNumbers:{set:function(a){this.$gutterLayer.setShowLineNumbers(a),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(a){this.$textLayer.setDisplayIndentGuides(a)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(a){return this.$gutterLineHighlight?(this.$gutterLineHighlight.style.display=a?"":"none",void(this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight())):(this.$gutterLineHighlight=e.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",void this.$gutter.appendChild(this.$gutterLineHighlight))},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(a){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(a){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(a){"number"==typeof a&&(a+="px"),this.container.style.fontSize=a,this.updateFontSize()},initialValue:12},fontFamily:{set:function(a){this.container.style.fontFamily=a,this.updateFontSize()}},maxLines:{set:function(a){this.updateFull()}},minLines:{set:function(a){this.updateFull()}},scrollPastEnd:{set:function(a){a=+a||0,this.$scrollPastEnd!=a&&(this.$scrollPastEnd=a,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(a){this.$gutterLayer.$fixedWidth=!!a,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(a){this.setTheme(a)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),b.VirtualRenderer=r}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(a,b,c){"use strict";var d=a("../lib/oop"),e=a("../lib/net"),f=a("../lib/event_emitter").EventEmitter,g=a("../config"),h=function(b,c,d,e){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),a.nameToUrl&&!a.toUrl&&(a.toUrl=a.nameToUrl),g.get("packaged")||!a.toUrl)e=e||g.moduleUrl(c,"worker");else{var f=this.$normalizePath;e=e||f(a.toUrl("ace/worker/worker.js",null,"_"));var h={};b.forEach(function(b){h[b]=f(a.toUrl(b,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{this.$worker=new Worker(e)}catch(a){if(!(a instanceof window.DOMException))throw a;var i=this.$workerBlob(e),j=window.URL||window.webkitURL,k=j.createObjectURL(i);this.$worker=new Worker(k),j.revokeObjectURL(k)}this.$worker.postMessage({init:!0,tlns:h,module:c,classname:d}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){d.implement(this,f),this.onMessage=function(a){var b=a.data;switch(b.type){case"event":this._signal(b.name,{data:b.data});break;case"call":var c=this.callbacks[b.id];c&&(c(b.data),delete this.callbacks[b.id]);break;case"error":this.reportError(b.data);break;case"log":window.console&&console.log&&console.log.apply(console,b.data)}},this.reportError=function(a){window.console&&console.error&&console.error(a)},this.$normalizePath=function(a){return e.qualifyURL(a)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(a,b){this.$worker.postMessage({command:a,args:b})},this.call=function(a,b,c){if(c){var d=this.callbackId++;this.callbacks[d]=c,b.push(d)}this.send(a,b)},this.emit=function(a,b){try{this.$worker.postMessage({event:a,data:{data:b.data}})}catch(a){console.error(a.stack)}},this.attachToDocument=function(a){this.$doc&&this.terminate(),this.$doc=a,this.call("setValue",[a.getValue()]),a.on("change",this.changeListener)},this.changeListener=function(a){this.deltaQueue?this.deltaQueue.push(a.data):(this.deltaQueue=[a.data],setTimeout(this.$sendDeltaQueue,0))},this.$sendDeltaQueue=function(){var a=this.deltaQueue;a&&(this.deltaQueue=null,a.length>20&&a.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:a}))},this.$workerBlob=function(a){var b="importScripts('"+e.qualifyURL(a)+"');";try{return new Blob([b],{type:"application/javascript"})}catch(a){var c=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,d=new c;return d.append(b),d.getBlob("application/javascript")}}}).call(h.prototype);var i=function(a,b,c){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var d=null,e=!1,h=Object.create(f),i=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(a){i.messageBuffer.push(a),d&&(e?setTimeout(j):j())},this.setEmitSync=function(a){e=a};var j=function(){var a=i.messageBuffer.shift();a.command?d[a.command].apply(d,a.args):a.event&&h._signal(a.event,a.data)};h.postMessage=function(a){i.onMessage({data:a})},h.callback=function(a,b){this.postMessage({type:"call",id:b,data:a})},h.emit=function(a,b){this.postMessage({type:"event",name:a,data:b})},g.loadModule(["worker",b],function(a){for(d=new a[c](h);i.messageBuffer.length;)j()})};i.prototype=h.prototype,b.UIWorkerClient=i,b.WorkerClient=h}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(a,b,c){"use strict";var d=a("./range").Range,e=a("./lib/event_emitter").EventEmitter,f=a("./lib/oop"),g=function(a,b,c,d,e,f){var g=this;this.length=b,this.session=a,this.doc=a.getDocument(),this.mainClass=e,this.othersClass=f,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=d,this.$onCursorChange=function(){setTimeout(function(){g.onCursorChange()})},this.$pos=c;var h=a.getUndoManager().$undoStack||a.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=h.length,this.setup(),a.selection.on("changeCursor",this.$onCursorChange)};(function(){f.implement(this,e),this.setup=function(){var a=this,b=this.doc,c=this.session,e=this.$pos;this.selectionBefore=c.selection.toJSON(),c.selection.inMultiSelectMode&&c.selection.toSingleRange(),this.pos=b.createAnchor(e.row,e.column),this.markerId=c.addMarker(new d(e.row,e.column,e.row,e.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(b){c.removeMarker(a.markerId),a.markerId=c.addMarker(new d(b.value.row,b.value.column,b.value.row,b.value.column+a.length),a.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(c){var d=b.createAnchor(c.row,c.column);a.others.push(d)}),c.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var a=this.session,b=this;this.othersActive=!0,this.others.forEach(function(c){c.markerId=a.addMarker(new d(c.row,c.column,c.row,c.column+b.length),b.othersClass,null,!1),c.on("change",function(e){a.removeMarker(c.markerId),c.markerId=a.addMarker(new d(e.value.row,e.value.column,e.value.row,e.value.column+b.length),b.othersClass,null,!1)})})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var a=0;a<this.others.length;a++)this.session.removeMarker(this.others[a].markerId)}},this.onUpdate=function(a){var b=a.data,c=b.range;if(c.start.row===c.end.row&&c.start.row===this.pos.row&&!this.$updating){this.$updating=!0;var e="insertText"===b.action?c.end.column-c.start.column:c.start.column-c.end.column;if(c.start.column>=this.pos.column&&c.start.column<=this.pos.column+this.length+1){var f=c.start.column-this.pos.column;if(this.length+=e,!this.session.$fromUndo){if("insertText"===b.action)for(var g=this.others.length-1;g>=0;g--){var h=this.others[g],i={row:h.row,column:h.column+f};h.row===c.start.row&&c.start.column<h.column&&(i.column+=e),this.doc.insert(i,b.text)}else if("removeText"===b.action)for(var g=this.others.length-1;g>=0;g--){var h=this.others[g],i={row:h.row,column:h.column+f};h.row===c.start.row&&c.start.column<h.column&&(i.column+=e),this.doc.remove(new d(i.row,i.column,i.row,i.column-e))}c.start.column===this.pos.column&&"insertText"===b.action?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-e);for(var a=0;a<this.others.length;a++){var b=this.others[a],d={row:b.row,column:b.column-e};b.row===c.start.row&&c.start.column<b.column&&(d.column+=e),b.setPosition(d.row,d.column)}}.bind(this),0):c.start.column===this.pos.column&&"removeText"===b.action&&setTimeout(function(){for(var a=0;a<this.others.length;a++){var b=this.others[a];b.row===c.start.row&&c.start.column<b.column&&b.setPosition(b.row,b.column-e)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(var g=0;g<this.others.length;g++)this.others[g]._emit("change",{value:this.others[g]})}this.$updating=!1}},this.onCursorChange=function(a){if(!this.$updating&&this.session){var b=this.session.selection.getCursor();b.row===this.pos.row&&b.column>=this.pos.column&&b.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",a)):(this.hideOtherMarkers(),this._emit("cursorLeave",a))}},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();for(var a=0;a<this.others.length;a++)this.others[a].detach();this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(this.$undoStackDepth===-1)throw Error("Canceling placeholders only supported with undo manager attached to session.");for(var a=this.session.getUndoManager(),b=(a.$undoStack||a.$undostack).length-this.$undoStackDepth,c=0;c<b;c++)a.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}).call(g.prototype),b.PlaceHolder=g}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(a,b,c){function d(a,b){return a.row==b.row&&a.column==b.column}function e(a){var b=a.domEvent,c=b.altKey,e=b.shiftKey,h=b.ctrlKey,i=a.getAccelKey(),j=a.getButton();if(h&&g.isMac&&(j=b.button),a.editor.inMultiSelectMode&&2==j)return void a.editor.textInput.onContextMenu(a.domEvent);if(!h&&!c&&!i)return void(0===j&&a.editor.inMultiSelectMode&&a.editor.exitMultiSelectMode());if(0===j){var k,l=a.editor,m=l.selection,n=l.inMultiSelectMode,o=a.getDocumentPosition(),p=m.getCursor(),q=a.inSelection()||m.isEmpty()&&d(o,p),r=a.x,s=a.y,t=function(a){r=a.clientX,s=a.clientY},u=l.session,v=l.renderer.pixelToScreenCoordinates(r,s),w=v;if(l.$mouseHandler.$enableJumpToDef)h&&c||i&&c?k="add":c&&(k="block");else if(i&&!c){if(k="add",!n&&e)return}else c&&(k="block");if(k&&g.isMac&&b.ctrlKey&&l.$mouseHandler.cancelContextMenu(),"add"==k){if(!n&&q)return;if(!n){var x=m.toOrientedRange();l.addSelectionMarker(x)}var y=m.rangeList.rangeAtPoint(o);l.$blockScrolling++,l.inVirtualSelectionMode=!0,e&&(y=null,x=m.ranges[0],l.removeSelectionMarker(x)),l.once("mouseup",function(){var a=m.toOrientedRange();y&&a.isEmpty()&&d(y.cursor,a.cursor)?m.substractPoint(a.cursor):(e?m.substractPoint(x.cursor):x&&(l.removeSelectionMarker(x),m.addRange(x)),m.addRange(a)),l.$blockScrolling--,l.inVirtualSelectionMode=!1})}else if("block"==k){a.stop(),l.inVirtualSelectionMode=!0;var z,A=[],B=function(){var a=l.renderer.pixelToScreenCoordinates(r,s),b=u.screenToDocumentPosition(a.row,a.column);d(w,a)&&d(b,m.lead)||(w=a,l.$blockScrolling++,l.selection.moveToPosition(b),l.renderer.scrollCursorIntoView(),l.removeSelectionMarkers(A),A=m.rectangularRangeBlock(w,v),l.$mouseHandler.$clickSelection&&1==A.length&&A[0].isEmpty()&&(A[0]=l.$mouseHandler.$clickSelection.clone()),A.forEach(l.addSelectionMarker,l),l.updateSelectionMarkers(),l.$blockScrolling--)};l.$blockScrolling++,n&&!i?m.toSingleRange():!n&&i&&(z=m.toOrientedRange(),l.addSelectionMarker(z)),e?v=u.documentToScreenPosition(m.lead):m.moveToPosition(o),l.$blockScrolling--,w={row:-1,column:-1};var C=function(a){clearInterval(E),l.removeSelectionMarkers(A),A.length||(A=[m.toOrientedRange()]),l.$blockScrolling++,z&&(l.removeSelectionMarker(z),m.toSingleRange(z));for(var b=0;b<A.length;b++)m.addRange(A[b]);l.inVirtualSelectionMode=!1,l.$mouseHandler.$clickSelection=null,l.$blockScrolling--},D=B;f.capture(l.container,t,C);var E=setInterval(function(){D()},20);return a.preventDefault()}}}var f=a("../lib/event"),g=a("../lib/useragent");b.onMouseDown=e}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(a,b,c){b.defaultCommands=[{name:"addCursorAbove",exec:function(a){a.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readonly:!0},{name:"addCursorBelow",exec:function(a){a.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readonly:!0},{name:"addCursorAboveSkipCurrent",exec:function(a){a.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readonly:!0},{name:"addCursorBelowSkipCurrent",exec:function(a){a.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readonly:!0},{name:"selectMoreBefore",exec:function(a){a.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readonly:!0},{name:"selectMoreAfter",exec:function(a){a.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readonly:!0},{name:"selectNextBefore",exec:function(a){a.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readonly:!0},{name:"selectNextAfter",exec:function(a){a.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readonly:!0},{name:"splitIntoLines",exec:function(a){a.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:!0},{name:"alignCursors",exec:function(a){a.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",exec:function(a){a.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readonly:!0}],b.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(a){a.exitMultiSelectMode()},scrollIntoView:"cursor",readonly:!0,isAvailable:function(a){return a&&a.inMultiSelectMode}}];var d=a("../keyboard/hash_handler").HashHandler;b.keyboardHandler=new d(b.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(a,b,c){function d(a,b,c){return p.$options.wrap=!0,p.$options.needle=b,p.$options.backwards=c==-1,p.find(a)}function e(a,b){return a.row==b.row&&a.column==b.column}function f(a){a.$multiselectOnSessionChange||(a.$onAddRange=a.$onAddRange.bind(a),a.$onRemoveRange=a.$onRemoveRange.bind(a),a.$onMultiSelect=a.$onMultiSelect.bind(a),a.$onSingleSelect=a.$onSingleSelect.bind(a),a.$multiselectOnSessionChange=b.onSessionChange.bind(a),a.$checkMultiselectChange=a.$checkMultiselectChange.bind(a),a.$multiselectOnSessionChange(a),a.on("changeSession",a.$multiselectOnSessionChange),a.on("mousedown",k),a.commands.addCommands(n.defaultCommands),g(a))}function g(a){function b(b){d&&(a.renderer.setMouseCursor(""),d=!1)}var c=a.textInput.getElement(),d=!1;l.addListener(c,"keydown",function(c){18!=c.keyCode||c.ctrlKey||c.shiftKey||c.metaKey?d&&b():d||(a.renderer.setMouseCursor("crosshair"),d=!0)}),l.addListener(c,"keyup",b),l.addListener(c,"blur",b)}var h=a("./range_list").RangeList,i=a("./range").Range,j=a("./selection").Selection,k=a("./mouse/multi_select_handler").onMouseDown,l=a("./lib/event"),m=a("./lib/lang"),n=a("./commands/multi_select_commands");b.commands=n.defaultCommands.concat(n.multiSelectCommands);var o=a("./search").Search,p=new o,q=a("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(q.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(a,b){if(a){if(!this.inMultiSelectMode&&0===this.rangeCount){var c=this.toOrientedRange();if(this.rangeList.add(c),this.rangeList.add(a),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),b||this.fromOrientedRange(a);this.rangeList.removeAll(),this.rangeList.add(c),this.$onAddRange(c)}a.cursor||(a.cursor=a.end);var d=this.rangeList.add(a);return this.$onAddRange(a),d.length&&this.$onRemoveRange(d),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),b||this.fromOrientedRange(a)}},this.toSingleRange=function(a){a=a||this.ranges[0];var b=this.rangeList.removeAll();b.length&&this.$onRemoveRange(b),a&&this.fromOrientedRange(a)},this.substractPoint=function(a){var b=this.rangeList.substractPoint(a);if(b)return this.$onRemoveRange(b),b[0]},this.mergeOverlappingRanges=function(){var a=this.rangeList.merge();a.length?this.$onRemoveRange(a):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(a){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(a),this._signal("addRange",{range:a})},this.$onRemoveRange=function(a){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var b=this.rangeList.ranges.pop();a.push(b),this.rangeCount=0}for(var c=a.length;c--;){var d=this.ranges.indexOf(a[c]);this.ranges.splice(d,1)}this._signal("removeRange",{ranges:a}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),b=b||this.ranges[0],b&&!b.isEqual(this.getRange())&&this.fromOrientedRange(b)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new h,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var a=this.rangeList.ranges,b=a[a.length-1],c=i.fromPoints(a[0].start,b.end);this.toSingleRange(),this.setSelectionRange(c,b.cursor==b.start)}else{var c=this.getRange(),d=this.isBackwards(),e=c.start.row,f=c.end.row;if(e==f){if(d)var g=c.end,h=c.start;else var g=c.start,h=c.end;return this.addRange(i.fromPoints(h,h)),void this.addRange(i.fromPoints(g,g))}var j=[],k=this.getLineRange(e,!0);k.start.column=c.start.column,j.push(k);for(var l=e+1;l<f;l++)j.push(this.getLineRange(l,!0));k=this.getLineRange(f,!0),k.end.column=c.end.column,j.push(k),j.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var a=this.rangeList.ranges,b=a[a.length-1],c=i.fromPoints(a[0].start,b.end);this.toSingleRange(),this.setSelectionRange(c,b.cursor==b.start)}else{var d=this.session.documentToScreenPosition(this.selectionLead),e=this.session.documentToScreenPosition(this.selectionAnchor),f=this.rectangularRangeBlock(d,e);f.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(a,b,c){var d=[],f=a.column<b.column;if(f)var g=a.column,h=b.column;else var g=b.column,h=a.column;var j=a.row<b.row;if(j)var k=a.row,l=b.row;else var k=b.row,l=a.row;g<0&&(g=0),k<0&&(k=0),k==l&&(c=!0);for(var m=k;m<=l;m++){var n=i.fromPoints(this.session.screenToDocumentPosition(m,g),this.session.screenToDocumentPosition(m,h));if(n.isEmpty()){if(o&&e(n.end,o))break;var o=n.end}n.cursor=f?n.start:n.end,d.push(n)}if(j&&d.reverse(),!c){for(var p=d.length-1;d[p].isEmpty()&&p>0;)p--;if(p>0)for(var q=0;d[q].isEmpty();)q++;for(var r=p;r>=q;r--)d[r].isEmpty()&&d.splice(r,1)}return d}}.call(j.prototype);var r=a("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(a){a.cursor||(a.cursor=a.end);var b=this.getSelectionStyle();return a.marker=this.session.addMarker(a,"ace_selection",b),this.session.$selectionMarkers.push(a),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,a},this.removeSelectionMarker=function(a){if(a.marker){this.session.removeMarker(a.marker);var b=this.session.$selectionMarkers.indexOf(a);b!=-1&&this.session.$selectionMarkers.splice(b,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(a){for(var b=this.session.$selectionMarkers,c=a.length;c--;){var d=a[c];if(d.marker){this.session.removeMarker(d.marker);var e=b.indexOf(d);e!=-1&&b.splice(e,1)}}this.session.selectionMarkerCount=b.length},this.$onAddRange=function(a){this.addSelectionMarker(a.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(a){this.removeSelectionMarkers(a.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(a){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(n.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(a){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(n.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(a){var b=a.command,c=a.editor;if(c.multiSelect){if(b.multiSelectAction)"forEach"==b.multiSelectAction?d=c.forEachSelection(b,a.args):"forEachLine"==b.multiSelectAction?d=c.forEachSelection(b,a.args,!0):"single"==b.multiSelectAction?(c.exitMultiSelectMode(),d=b.exec(c,a.args||{})):d=b.multiSelectAction(c,a.args||{});else{var d=b.exec(c,a.args||{});c.multiSelect.addRange(c.multiSelect.toOrientedRange()),c.multiSelect.mergeOverlappingRanges()}return d}},this.forEachSelection=function(a,b,c){if(!this.inVirtualSelectionMode){var d,e=c&&c.keepOrder,f=1==c||c&&c.$byLines,g=this.session,h=this.selection,i=h.rangeList,k=(e?h:i).ranges;if(!k.length)return a.exec?a.exec(this,b||{}):a(this,b||{});var l=h._eventRegistry;h._eventRegistry={};var m=new j(g);this.inVirtualSelectionMode=!0;for(var n=k.length;n--;){if(f)for(;n>0&&k[n].start.row==k[n-1].end.row;)n--;m.fromOrientedRange(k[n]),m.index=n,this.selection=g.selection=m;var o=a.exec?a.exec(this,b||{}):a(this,b||{});d||void 0===o||(d=o),m.toOrientedRange(k[n])}m.detach(),this.selection=g.selection=h,this.inVirtualSelectionMode=!1,h._eventRegistry=l,h.mergeOverlappingRanges();var p=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),p&&p.from==p.to&&this.renderer.animateScrolling(p.from),d}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var a="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var b=this.multiSelect.rangeList.ranges,c=[],d=0;d<b.length;d++)c.push(this.session.getTextRange(b[d]));var e=this.session.getDocument().getNewLineCharacter();a=c.join(e),a.length==(c.length-1)*e.length&&(a="")}else this.selection.isEmpty()||(a=this.session.getTextRange(this.getSelectionRange()));return a},this.$checkMultiselectChange=function(a,b){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var c=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&b==this.multiSelect.anchor)return;var d=b==this.multiSelect.anchor?c.cursor==c.start?c.end:c.start:c.cursor;d.row==b.row&&this.session.$clipPositionToDocument(d.row,d.column).column==b.column||this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}},this.findAll=function(a,b,c){if(b=b||{},b.needle=a||b.needle,void 0==b.needle){var d=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();b.needle=this.session.getTextRange(d)}this.$search.set(b);var e=this.$search.findAll(this.session);if(!e.length)return 0;this.$blockScrolling+=1;var f=this.multiSelect;c||f.toSingleRange(e[0]);for(var g=e.length;g--;)f.addRange(e[g],!0);return d&&f.rangeList.rangeAtPoint(d.start)&&f.addRange(d,!0),this.$blockScrolling-=1,e.length},this.selectMoreLines=function(a,b){var c=this.selection.toOrientedRange(),d=c.cursor==c.end,e=this.session.documentToScreenPosition(c.cursor);this.selection.$desiredColumn&&(e.column=this.selection.$desiredColumn);var f=this.session.screenToDocumentPosition(e.row+a,e.column);if(c.isEmpty())var g=f;else var h=this.session.documentToScreenPosition(d?c.end:c.start),g=this.session.screenToDocumentPosition(h.row+a,h.column);if(d){var j=i.fromPoints(f,g);j.cursor=j.start}else{var j=i.fromPoints(g,f);j.cursor=j.end}if(j.desiredColumn=e.column,this.selection.inMultiSelectMode){if(b)var k=c.cursor}else this.selection.addRange(c);this.selection.addRange(j),k&&this.selection.substractPoint(k)},this.transposeSelections=function(a){for(var b=this.session,c=b.multiSelect,d=c.ranges,e=d.length;e--;){var f=d[e];if(f.isEmpty()){var g=b.getWordRange(f.start.row,f.start.column);f.start.row=g.start.row,f.start.column=g.start.column,f.end.row=g.end.row,
f.end.column=g.end.column}}c.mergeOverlappingRanges();for(var h=[],e=d.length;e--;){var f=d[e];h.unshift(b.getTextRange(f))}a<0?h.unshift(h.pop()):h.push(h.shift());for(var e=d.length;e--;){var f=d[e],g=f.clone();b.replace(f,h[e]),f.start.row=g.start.row,f.start.column=g.start.column}},this.selectMore=function(a,b,c){var e=this.session,f=e.multiSelect,g=f.toOrientedRange();if(!g.isEmpty()||(g=e.getWordRange(g.start.row,g.start.column),g.cursor=a==-1?g.start:g.end,this.multiSelect.addRange(g),!c)){var h=e.getTextRange(g),i=d(e,h,a);i&&(i.cursor=a==-1?i.start:i.end,this.$blockScrolling+=1,this.session.unfold(i),this.multiSelect.addRange(i),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),b&&this.multiSelect.substractPoint(g.cursor)}},this.alignCursors=function(){var a=this.session,b=a.multiSelect,c=b.ranges,d=-1,e=c.filter(function(a){return a.cursor.row==d||void(d=a.cursor.row)});if(c.length&&e.length!=c.length-1){e.forEach(function(a){b.substractPoint(a.cursor)});var f=0,g=1/0,h=c.map(function(b){var c=b.cursor,d=a.getLine(c.row),e=d.substr(c.column).search(/\S/g);return e==-1&&(e=0),c.column>f&&(f=c.column),e<g&&(g=e),e});c.forEach(function(b,c){var d=b.cursor,e=f-d.column,j=h[c]-g;e>j?a.insert(d,m.stringRepeat(" ",e-j)):a.remove(new i(d.row,d.column,d.row,d.column-e+j)),b.start.column=b.end.column=f,b.start.row=b.end.row=d.row,b.cursor=b.end}),b.fromOrientedRange(c[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var j=this.selection.getRange(),k=j.start.row,l=j.end.row,n=k==l;if(n){var o,p=this.session.getLength();do o=this.session.getLine(l);while(/[=:]/.test(o)&&++l<p);do o=this.session.getLine(k);while(/[=:]/.test(o)&&--k>0);k<0&&(k=0),l>=p&&(l=p-1)}var q=this.session.doc.removeLines(k,l);q=this.$reAlignText(q,n),this.session.doc.insert({row:k,column:0},q.join("\n")+"\n"),n||(j.start.column=0,j.end.column=q[q.length-1].length),this.selection.setRange(j)}},this.$reAlignText=function(a,b){function c(a){return m.stringRepeat(" ",a)}function d(a){return a[2]?c(g)+a[2]+c(h-a[2].length+i)+a[4].replace(/^([=:])\s+/,"$1 "):a[0]}function e(a){return a[2]?c(g+h-a[2].length)+a[2]+c(i," ")+a[4].replace(/^([=:])\s+/,"$1 "):a[0]}function f(a){return a[2]?c(g)+a[2]+c(i)+a[4].replace(/^([=:])\s+/,"$1 "):a[0]}var g,h,i,j=!0,k=!0;return a.map(function(a){var b=a.match(/(\s*)(.*?)(\s*)([=:].*)/);return b?null==g?(g=b[1].length,h=b[2].length,i=b[3].length,b):(g+h+i!=b[1].length+b[2].length+b[3].length&&(k=!1),g!=b[1].length&&(j=!1),g>b[1].length&&(g=b[1].length),h<b[2].length&&(h=b[2].length),i>b[3].length&&(i=b[3].length),b):[a]}).map(b?d:j?k?e:d:f)}}).call(r.prototype),b.onSessionChange=function(a){var b=a.session;b&&!b.multiSelect&&(b.$selectionMarkers=[],b.selection.$initRangeList(),b.multiSelect=b.selection),this.multiSelect=b&&b.multiSelect;var c=a.oldSession;c&&(c.multiSelect.off("addRange",this.$onAddRange),c.multiSelect.off("removeRange",this.$onRemoveRange),c.multiSelect.off("multiSelect",this.$onMultiSelect),c.multiSelect.off("singleSelect",this.$onSingleSelect),c.multiSelect.lead.off("change",this.$checkMultiselectChange),c.multiSelect.anchor.off("change",this.$checkMultiselectChange)),b&&(b.multiSelect.on("addRange",this.$onAddRange),b.multiSelect.on("removeRange",this.$onRemoveRange),b.multiSelect.on("multiSelect",this.$onMultiSelect),b.multiSelect.on("singleSelect",this.$onSingleSelect),b.multiSelect.lead.on("change",this.$checkMultiselectChange),b.multiSelect.anchor.on("change",this.$checkMultiselectChange)),b&&this.inMultiSelectMode!=b.selection.inMultiSelectMode&&(b.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},b.MultiSelect=f,a("./config").defineOptions(r.prototype,"editor",{enableMultiselect:{set:function(a){f(this),a?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",k)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",k))},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(a,b,c){"use strict";var d=a("../../range").Range,e=b.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(a,b,c){var d=a.getLine(c);return this.foldingStartMarker.test(d)?"start":"markbeginend"==b&&this.foldingStopMarker&&this.foldingStopMarker.test(d)?"end":""},this.getFoldWidgetRange=function(a,b,c){return null},this.indentationBlock=function(a,b,c){var e=/\S/,f=a.getLine(b),g=f.search(e);if(g!=-1){for(var h=c||f.length,i=a.getLength(),j=b,k=b;++b<i;){var l=a.getLine(b).search(e);if(l!=-1){if(l<=g)break;k=b}}if(k>j){var m=a.getLine(k).length;return new d(j,h,k,m)}}},this.openingBracketBlock=function(a,b,c,e,f){var g={row:c,column:e+1},h=a.$findClosingBracket(b,g,f);if(h){var i=a.foldWidgets[h.row];return null==i&&(i=a.getFoldWidget(h.row)),"start"==i&&h.row>g.row&&(h.row--,h.column=a.getLine(h.row).length),d.fromPoints(g,h)}},this.closingBracketBlock=function(a,b,c,e,f){var g={row:c,column:e},h=a.$findOpeningBracket(b,g);if(h)return h.column++,g.column--,d.fromPoints(h,g)}}).call(e.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(a,b,c){"use strict";b.isDark=!1,b.cssClass="ace-tm",b.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var d=a("../lib/dom");d.importCssString(b.cssText,b.cssClass)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(a,b,c){"use strict";function d(a){this.session=a,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeEditor",this.$onChangeEditor)}var e=(a("./lib/oop"),a("./lib/dom"));a("./range").Range;(function(){this.getRowLength=function(a){var b;return b=this.lineWidgets?this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0:0,this.$useWrapMode&&this.$wrapData[a]?this.$wrapData[a].length+1+b:1+b},this.$getWidgetScreenLength=function(){var a=0;return this.lineWidgets.forEach(function(b){b&&b.rowCount&&(a+=b.rowCount)}),a},this.$onChangeEditor=function(a){this.attach(a.editor)},this.attach=function(a){a&&a.widgetManager&&a.widgetManager!=this&&a.widgetManager.detach(),this.editor!=a&&(this.detach(),this.editor=a,a&&(a.widgetManager=this,a.renderer.on("beforeRender",this.measureWidgets),a.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(a){var b=this.editor;if(b){this.editor=null,b.widgetManager=null,b.renderer.off("beforeRender",this.measureWidgets),b.renderer.off("afterRender",this.renderWidgets);var c=this.session.lineWidgets;c&&c.forEach(function(a){a&&a.el&&a.el.parentNode&&(a._inDocument=!1,a.el.parentNode.removeChild(a.el))})}},this.updateOnChange=function(a){var b=this.session.lineWidgets;if(b){var c=a.data,d=c.range,e=d.start.row,f=d.end.row-e;if(0===f);else if("removeText"==c.action||"removeLines"==c.action){var g=b.splice(e+1,f);g.forEach(function(a){a&&this.removeLineWidget(a)},this),this.$updateRows()}else{var h=new Array(f);h.unshift(e,0),b.splice.apply(b,h),this.$updateRows()}}},this.$updateRows=function(){var a=this.session.lineWidgets;if(a){var b=!0;a.forEach(function(a,c){a&&(b=!1,a.row=c)}),b&&(this.session.lineWidgets=null)}},this.addLineWidget=function(a){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength())),this.session.lineWidgets[a.row]=a;var b=this.editor.renderer;return a.html&&!a.el&&(a.el=e.createElement("div"),a.el.innerHTML=a.html),a.el&&(e.addCssClass(a.el,"ace_lineWidgetContainer"),a.el.style.position="absolute",a.el.style.zIndex=5,b.container.appendChild(a.el),a._inDocument=!0),a.coverGutter||(a.el.style.zIndex=3),a.pixelHeight||(a.pixelHeight=a.el.offsetHeight),null==a.rowCount&&(a.rowCount=a.pixelHeight/b.layerConfig.lineHeight),this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows(),this.renderWidgets(null,b),a},this.removeLineWidget=function(a){if(a._inDocument=!1,a.el&&a.el.parentNode&&a.el.parentNode.removeChild(a.el),a.editor&&a.editor.destroy)try{a.editor.destroy()}catch(a){}this.session.lineWidgets&&(this.session.lineWidgets[a.row]=void 0),this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows()},this.onWidgetChanged=function(a){this.session._changedWidgets.push(a),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(a,b){var c=this.session._changedWidgets,d=b.layerConfig;if(c&&c.length){for(var e=1/0,f=0;f<c.length;f++){var g=c[f];g._inDocument||(g._inDocument=!0,b.container.appendChild(g.el)),g.h=g.el.offsetHeight,g.fixedWidth||(g.w=g.el.offsetWidth,g.screenWidth=Math.ceil(g.w/d.characterWidth));var h=g.h/d.lineHeight;g.coverLine&&(h-=this.session.getRowLineCount(g.row),h<0&&(h=0)),g.rowCount!=h&&(g.rowCount=h,g.row<e&&(e=g.row))}e!=1/0&&(this.session._emit("changeFold",{data:{start:{row:e}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(a,b){var c=b.layerConfig,d=this.session.lineWidgets;if(d){for(var e=Math.min(this.firstRow,c.firstRow),f=Math.max(this.lastRow,c.lastRow,d.length);e>0&&!d[e];)e--;this.firstRow=c.firstRow,this.lastRow=c.lastRow,b.$cursorLayer.config=c;for(var g=e;g<=f;g++){var h=d[g];if(h&&h.el){h._inDocument||(h._inDocument=!0,b.container.appendChild(h.el));var i=b.$cursorLayer.getPixelPosition({row:g,column:0},!0).top;h.coverLine||(i+=c.lineHeight*this.session.getRowLineCount(h.row)),h.el.style.top=i-c.offset+"px";var j=h.coverGutter?0:b.gutterWidth;h.fixedWidth||(j-=b.scrollLeft),h.el.style.left=j+"px",h.fixedWidth?h.el.style.right=b.scrollBar.getWidth()+"px":h.el.style.right=""}}}}}).call(d.prototype),b.LineWidgets=d}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(a,b,c){"use strict";function d(a,b,c){for(var d=0,e=a.length-1;d<=e;){var f=d+e>>1,g=c(b,a[f]);if(g>0)d=f+1;else{if(!(g<0))return f;e=f-1}}return-(d+1)}function e(a,b,c){var e=a.getAnnotations().sort(h.comparePoints);if(e.length){var f=d(e,{row:b,column:-1},h.comparePoints);f<0&&(f=-f-1),f>=e.length-1?f=c>0?0:e.length-1:0===f&&c<0&&(f=e.length-1);var g=e[f];if(g&&c){if(g.row===b){do g=e[f+=c];while(g&&g.row===b);if(!g)return e.slice()}var i=[];b=g.row;do i[c<0?"unshift":"push"](g),g=e[f+=c];while(g&&g.row==b);return i.length&&i}}}var f=a("../line_widgets").LineWidgets,g=a("../lib/dom"),h=a("../range").Range;b.showErrorMarker=function(a,b){var c=a.session;c.widgetManager||(c.widgetManager=new f(c),c.widgetManager.attach(a));var d=a.getCursorPosition(),h=d.row,i=c.lineWidgets&&c.lineWidgets[h];i?i.destroy():h-=b;var j,k=e(c,h,b);if(k){var l=k[0];d.column=(l.pos&&"number"!=typeof l.column?l.pos.sc:l.column)||0,d.row=l.row,j=a.renderer.$gutterLayer.$annotations[d.row]}else{if(i)return;j={text:["Looks good!"],className:"ace_ok"}}a.session.unfold(d.row),a.selection.moveToPosition(d);var m={row:d.row,fixedWidth:!0,coverGutter:!0,el:g.createElement("div")},n=m.el.appendChild(g.createElement("div")),o=m.el.appendChild(g.createElement("div"));o.className="error_widget_arrow "+j.className;var p=a.renderer.$cursorLayer.getPixelPosition(d).left;o.style.left=p+a.renderer.gutterWidth-5+"px",m.el.className="error_widget_wrapper",n.className="error_widget "+j.className,n.innerHTML=j.text.join("<br>"),n.appendChild(g.createElement("div"));var q=function(a,b,c){if(0===b&&("esc"===c||"return"===c))return m.destroy(),{command:"null"}};m.destroy=function(){a.$mouseHandler.isMousePressed||(a.keyBinding.removeKeyboardHandler(q),c.widgetManager.removeLineWidget(m),a.off("changeSelection",m.destroy),a.off("changeSession",m.destroy),a.off("mouseup",m.destroy),a.off("change",m.destroy))},a.keyBinding.addKeyboardHandler(q),a.on("changeSelection",m.destroy),a.on("changeSession",m.destroy),a.on("mouseup",m.destroy),a.on("change",m.destroy),a.session.widgetManager.addLineWidget(m),m.el.onmousedown=a.focus.bind(a),a.renderer.scrollCursorIntoView(null,.5,{bottom:m.el.offsetHeight})},g.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(a,b,c){"use strict";a("./lib/fixoldbrowsers");var d=a("./lib/dom"),e=a("./lib/event"),f=a("./editor").Editor,g=a("./edit_session").EditSession,h=a("./undomanager").UndoManager,i=a("./virtual_renderer").VirtualRenderer;a("./worker/worker_client"),a("./keyboard/hash_handler"),a("./placeholder"),a("./multi_select"),a("./mode/folding/fold_mode"),a("./theme/textmate"),a("./ext/error_marker"),b.config=a("./config"),b.require=a,b.edit=function(a){if("string"==typeof a){var c=a;if(a=document.getElementById(c),!a)throw new Error("ace.edit can't find div #"+c)}if(a&&a.env&&a.env.editor instanceof f)return a.env.editor;var g="";if(a&&/input|textarea/i.test(a.tagName)){var h=a;g=h.value,a=d.createElement("pre"),h.parentNode.replaceChild(a,h)}else g=d.getInnerText(a),a.innerHTML="";var j=b.createEditSession(g),k=new f(new i(a));k.setSession(j);var l={document:j,editor:k,onResize:k.resize.bind(k,null)};return h&&(l.textarea=h),e.addListener(window,"resize",l.onResize),k.on("destroy",function(){e.removeListener(window,"resize",l.onResize),l.editor.container.env=null}),k.container.env=k.env=l,k},b.createEditSession=function(a,b){var c=new g(a,b);return c.setUndoManager(new h),c},b.EditSession=g,b.UndoManager=h}),function(){ace.require(["ace/ace"],function(a){a&&a.config.init(!0),window.ace||(window.ace=a);for(var b in a)a.hasOwnProperty(b)&&(window.ace[b]=a[b])})}(),ace.define("ace/snippets",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/anchor","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom","ace/editor"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=a("./lib/lang"),g=a("./range").Range,h=a("./anchor").Anchor,i=a("./keyboard/hash_handler").HashHandler,j=a("./tokenizer").Tokenizer,k=g.comparePoints,l=function(){this.snippetMap={},this.snippetNameMap={}};(function(){d.implement(this,e),this.getTokenizer=function(){function a(a,b,c){return a=a.substr(1),/^\d+$/.test(a)&&!c.inFormatString?[{tabstopId:parseInt(a,10)}]:[{text:a}]}function b(a){return"(?:[^\\\\"+a+"]|\\\\.)"}return l.$tokenizer=new j({start:[{regex:/:/,onMatch:function(a,b,c){return c.length&&c[0].expectIf?(c[0].expectIf=!1,c[0].elseBranch=c[0],[c[0]]):":"}},{regex:/\\./,onMatch:function(a,b,c){var d=a[1];return"}"==d&&c.length?a=d:"`$\\".indexOf(d)!=-1?a=d:c.inFormatString&&("n"==d?a="\n":"t"==d?a="\n":"ulULE".indexOf(d)!=-1&&(a={changeCase:d,local:d>"a"})),[a]}},{regex:/}/,onMatch:function(a,b,c){return[c.length?c.shift():a]}},{regex:/\$(?:\d+|\w+)/,onMatch:a},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(b,c,d){var e=a(b.substr(1),c,d);return d.unshift(e[0]),e},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+b("\\|")+"*\\|",onMatch:function(a,b,c){c[0].choices=a.slice(1,-1).split(",")},next:"start"},{regex:"/("+b("/")+"+)/(?:("+b("/")+"*)/)(\\w*):?",onMatch:function(a,b,c){var d=c[0];return d.fmtString=a,a=this.splitRegex.exec(a),d.guard=a[1],d.fmt=a[2],d.flag=a[3],""},next:"start"},{regex:"`"+b("`")+"*`",onMatch:function(a,b,c){return c[0].code=a.splice(1,-1),""},next:"start"},{regex:"\\?",onMatch:function(a,b,c){c[0]&&(c[0].expectIf=!0)},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+b("/")+"+)/",token:"regex"},{regex:"",onMatch:function(a,b,c){c.inFormatString=!0},next:"start"}]}),l.prototype.getTokenizer=function(){return l.$tokenizer},l.$tokenizer},this.tokenizeTmSnippet=function(a,b){return this.getTokenizer().getLineTokens(a,b).tokens.map(function(a){return a.value||a})},this.$getDefaultValue=function(a,b){if(/^[A-Z]\d+$/.test(b)){var c=b.substr(1);return(this.variables[b[0]+"__"]||{})[c]}if(/^\d+$/.test(b))return(this.variables.__||{})[b];if(b=b.replace(/^TM_/,""),a){var d=a.session;switch(b){case"CURRENT_WORD":var e=d.getWordRange();case"SELECTION":case"SELECTED_TEXT":return d.getTextRange(e);case"CURRENT_LINE":return d.getLine(a.getCursorPosition().row);case"PREV_LINE":return d.getLine(a.getCursorPosition().row-1);case"LINE_INDEX":return a.getCursorPosition().column;case"LINE_NUMBER":return a.getCursorPosition().row+1;case"SOFT_TABS":return d.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return d.getTabSize();case"FILENAME":case"FILEPATH":return"";case"FULLNAME":return"Ace"}}},this.variables={},this.getVariableValue=function(a,b){return this.variables.hasOwnProperty(b)?this.variables[b](a,b)||"":this.$getDefaultValue(a,b)||""},this.tmStrFormat=function(a,b,c){var d=b.flag||"",e=b.guard;e=new RegExp(e,d.replace(/[^gi]/,""));var f=this.tokenizeTmSnippet(b.fmt,"formatString"),g=this,h=a.replace(e,function(){g.variables.__=arguments;for(var a=g.resolveVariables(f,c),b="E",d=0;d<a.length;d++){var e=a[d];if("object"==typeof e)if(a[d]="",e.changeCase&&e.local){var h=a[d+1];h&&"string"==typeof h&&("u"==e.changeCase?a[d]=h[0].toUpperCase():a[d]=h[0].toLowerCase(),a[d+1]=h.substr(1))}else e.changeCase&&(b=e.changeCase);else"U"==b?a[d]=e.toUpperCase():"L"==b&&(a[d]=e.toLowerCase())}return a.join("")});return this.variables.__=null,h},this.resolveVariables=function(a,b){function c(b){var c=a.indexOf(b,e+1);c!=-1&&(e=c)}for(var d=[],e=0;e<a.length;e++){var f=a[e];if("string"==typeof f)d.push(f);else{if("object"!=typeof f)continue;if(f.skip)c(f);else{if(f.processed<e)continue;if(f.text){var g=this.getVariableValue(b,f.text);g&&f.fmtString&&(g=this.tmStrFormat(g,f)),f.processed=e,null==f.expectIf?g&&(d.push(g),c(f)):g?f.skip=f.elseBranch:c(f)}else null!=f.tabstopId?d.push(f):null!=f.changeCase&&d.push(f)}}}return d},this.insertSnippetForSelection=function(a,b){function c(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];if("object"==typeof d){if(j[d.tabstopId])continue;var e=a.lastIndexOf(d,c-1);d=b[e]||{tabstopId:d.tabstopId}}b[c]=d}return b}var d=a.getCursorPosition(),e=a.session.getLine(d.row),f=a.session.getTabString(),g=e.match(/^\s*/)[0];d.column<g.length&&(g=g.slice(0,d.column));var h=this.tokenizeTmSnippet(b);h=this.resolveVariables(h,a),h=h.map(function(a){return"\n"==a?a+g:"string"==typeof a?a.replace(/\t/g,f):a});var i=[];h.forEach(function(a,b){if("object"==typeof a){var c=a.tabstopId,d=i[c];if(d||(d=i[c]=[],d.index=c,d.value=""),d.indexOf(a)===-1){d.push(a);var e=h.indexOf(a,b+1);if(e!==-1){var f=h.slice(b+1,e),g=f.some(function(a){return"object"==typeof a});g&&!d.value?d.value=f:!f.length||d.value&&"string"==typeof d.value||(d.value=f.join(""))}}}}),i.forEach(function(a){a.length=0});for(var j={},k=0;k<h.length;k++){var l=h[k];if("object"==typeof l){var n=l.tabstopId,o=h.indexOf(l,k+1);if(j[n])j[n]===l&&(j[n]=null);else{var p=i[n],q="string"==typeof p.value?[p.value]:c(p.value);q.unshift(k+1,Math.max(0,o-k)),q.push(l),j[n]=l,h.splice.apply(h,q),p.indexOf(l)===-1&&p.push(l)}}}var r=0,s=0,t="";h.forEach(function(a){"string"==typeof a?("\n"===a[0]?(s=a.length-1,r++):s+=a.length,t+=a):a.start?a.end={row:r,column:s}:a.start={row:r,column:s}});var u=a.getSelectionRange(),v=a.session.replace(u,t),w=new m(a),x=a.inVirtualSelectionMode&&a.selection.index;w.addTabstops(i,u.start,v,x)},this.insertSnippet=function(a,b){var c=this;return a.inVirtualSelectionMode?c.insertSnippetForSelection(a,b):(a.forEachSelection(function(){c.insertSnippetForSelection(a,b)},null,{keepOrder:!0}),void(a.tabstopManager&&a.tabstopManager.tabNext()))},this.$getScope=function(a){var b=a.session.$mode.$id||"";if(b=b.split("/").pop(),"html"===b||"php"===b){"php"!==b||a.session.$mode.inlinePhp||(b="html");var c=a.getCursorPosition(),d=a.session.getState(c.row);"object"==typeof d&&(d=d[0]),d.substring&&("js-"==d.substring(0,3)?b="javascript":"css-"==d.substring(0,4)?b="css":"php-"==d.substring(0,4)&&(b="php"))}return b},this.getActiveScopes=function(a){var b=this.$getScope(a),c=[b],d=this.snippetMap;return d[b]&&d[b].includeScopes&&c.push.apply(c,d[b].includeScopes),c.push("_"),c},this.expandWithTab=function(a,b){var c=this,d=a.forEachSelection(function(){return c.expandSnippetForSelection(a,b)},null,{keepOrder:!0});return d&&a.tabstopManager&&a.tabstopManager.tabNext(),d},this.expandSnippetForSelection=function(a,b){var c,d=a.getCursorPosition(),e=a.session.getLine(d.row),f=e.substring(0,d.column),g=e.substr(d.column),h=this.snippetMap;return this.getActiveScopes(a).some(function(a){var b=h[a];return b&&(c=this.findMatchingSnippet(b,f,g)),!!c},this),!!c&&(!(!b||!b.dryRun)||(a.session.doc.removeInLine(d.row,d.column-c.replaceBefore.length,d.column+c.replaceAfter.length),this.variables.M__=c.matchBefore,this.variables.T__=c.matchAfter,this.insertSnippetForSelection(a,c.content),this.variables.M__=this.variables.T__=null,!0))},this.findMatchingSnippet=function(a,b,c){for(var d=a.length;d--;){var e=a[d];if((!e.startRe||e.startRe.test(b))&&(!e.endRe||e.endRe.test(c))&&(e.startRe||e.endRe))return e.matchBefore=e.startRe?e.startRe.exec(b):[""],e.matchAfter=e.endRe?e.endRe.exec(c):[""],e.replaceBefore=e.triggerRe?e.triggerRe.exec(b)[0]:"",e.replaceAfter=e.endTriggerRe?e.endTriggerRe.exec(c)[0]:"",e}},this.snippetMap={},this.snippetNameMap={},this.register=function(a,b){function c(a){return a&&!/^\^?\(.*\)\$?$|^\\b$/.test(a)&&(a="(?:"+a+")"),a||""}function d(a,b,d){return a=c(a),b=c(b),d?(a=b+a,a&&"$"!=a[a.length-1]&&(a+="$")):(a+=b,a&&"^"!=a[0]&&(a="^"+a)),new RegExp(a)}function e(a){a.scope||(a.scope=b||"_"),b=a.scope,g[b]||(g[b]=[],h[b]={});var c=h[b];if(a.name){var e=c[a.name];e&&i.unregister(e),c[a.name]=a}g[b].push(a),a.tabTrigger&&!a.trigger&&(!a.guard&&/^\w/.test(a.tabTrigger)&&(a.guard="\\b"),a.trigger=f.escapeRegExp(a.tabTrigger)),a.startRe=d(a.trigger,a.guard,!0),a.triggerRe=new RegExp(a.trigger,"",(!0)),a.endRe=d(a.endTrigger,a.endGuard,!0),a.endTriggerRe=new RegExp(a.endTrigger,"",(!0))}var g=this.snippetMap,h=this.snippetNameMap,i=this;a||(a=[]),a&&a.content?e(a):Array.isArray(a)&&a.forEach(e),this._signal("registerSnippets",{scope:b})},this.unregister=function(a,b){function c(a){var c=e[a.scope||b];if(c&&c[a.name]){delete c[a.name];var f=d[a.scope||b],g=f&&f.indexOf(a);g>=0&&f.splice(g,1)}}var d=this.snippetMap,e=this.snippetNameMap;a.content?c(a):Array.isArray(a)&&a.forEach(c)},this.parseSnippetFile=function(a){a=a.replace(/\r/g,"");for(var b,c=[],d={},e=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;b=e.exec(a);){if(b[1])try{d=JSON.parse(b[1]),c.push(d)}catch(a){}if(b[4])d.content=b[4].replace(/^\t/gm,""),c.push(d),d={};else{var f=b[2],g=b[3];if("regex"==f){var h=/\/((?:[^\/\\]|\\.)*)|$/g;d.guard=h.exec(g)[1],d.trigger=h.exec(g)[1],d.endTrigger=h.exec(g)[1],d.endGuard=h.exec(g)[1]}else"snippet"==f?(d.tabTrigger=g.match(/^\S*/)[0],d.name||(d.name=g)):d[f]=g}}return c},this.getSnippetByName=function(a,b){var c,d=this.snippetNameMap;return this.getActiveScopes(b).some(function(b){var e=d[b];return e&&(c=e[a]),!!c},this),c}}).call(l.prototype);var m=function(a){return a.tabstopManager?a.tabstopManager:(a.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=f.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),void this.attach(a))};(function(){this.attach=function(a){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=a,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(a){var b=a.data.range,c="r"==a.data.action[0],d=b.start,e=b.end,f=d.row,g=e.row,h=g-f,i=e.column-d.column;if(c&&(h=-h,i=-i),!this.$inChange&&c){var j=this.selectedTabstop,l=j&&!j.some(function(a){return k(a.start,d)<=0&&k(a.end,e)>=0});if(l)return this.detach()}for(var m=this.ranges,n=0;n<m.length;n++){var o=m[n];o.end.row<d.row||(c&&k(d,o.start)<0&&k(e,o.end)>0?(this.removeRange(o),n--):(o.start.row==f&&o.start.column>d.column&&(o.start.column+=i),o.end.row==f&&o.end.column>=d.column&&(o.end.column+=i),o.start.row>=f&&(o.start.row+=h),o.end.row>=f&&(o.end.row+=h),k(o.start,o.end)>0&&this.removeRange(o)))}m.length||this.detach()},this.updateLinkedFields=function(){var a=this.selectedTabstop;if(a&&a.hasLinkedRanges){this.$inChange=!0;for(var c=this.editor.session,d=c.getTextRange(a.firstNonLinked),e=a.length;e--;){var f=a[e];if(f.linked){var g=b.snippetManager.tmStrFormat(d,f.original);c.replace(f,g)}}this.$inChange=!1}},this.onAfterExec=function(a){a.command&&!a.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var a=this.editor.selection.lead,b=this.editor.selection.anchor,c=this.editor.selection.isEmpty(),d=this.ranges.length;d--;)if(!this.ranges[d].linked){var e=this.ranges[d].contains(a.row,a.column),f=c||this.ranges[d].contains(b.row,b.column);if(e&&f)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(a){var b=this.tabstops.length,c=this.index+(a||1);c=Math.min(Math.max(c,1),b),c==b&&(c=0),this.selectTabstop(c),0===c&&this.detach()},this.selectTabstop=function(a){this.$openTabstops=null;var b=this.tabstops[this.index];if(b&&this.addTabstopMarkers(b),this.index=a,b=this.tabstops[this.index],b&&b.length){if(this.selectedTabstop=b,this.editor.inVirtualSelectionMode)this.editor.selection.setRange(b.firstNonLinked);else{var c=this.editor.multiSelect;c.toSingleRange(b.firstNonLinked.clone());for(var d=b.length;d--;)b.hasLinkedRanges&&b[d].linked||c.addRange(b[d].clone(),!0);c.ranges[0]&&c.addRange(c.ranges[0].clone())}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)}},this.addTabstops=function(a,b,c){if(this.$openTabstops||(this.$openTabstops=[]),!a[0]){var d=g.fromPoints(c,c);p(d.start,b),p(d.end,b),a[0]=[d],a[0].index=0}var e=this.index,f=[e+1,0],h=this.ranges;a.forEach(function(a,c){for(var d=this.$openTabstops[c]||a,e=a.length;e--;){var i=a[e],j=g.fromPoints(i.start,i.end||i.start);o(j.start,b),o(j.end,b),j.original=i,j.tabstop=d,h.push(j),d!=a?d.unshift(j):d[e]=j,i.fmtString?(j.linked=!0,d.hasLinkedRanges=!0):d.firstNonLinked||(d.firstNonLinked=j)}d.firstNonLinked||(d.hasLinkedRanges=!1),d===a&&(f.push(d),this.$openTabstops[c]=d),this.addTabstopMarkers(d)},this),f.length>2&&(this.tabstops.length&&f.push(f.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,f))},this.addTabstopMarkers=function(a){var b=this.editor.session;a.forEach(function(a){a.markerId||(a.markerId=b.addMarker(a,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(a){var b=this.editor.session;a.forEach(function(a){b.removeMarker(a.markerId),a.markerId=null})},this.removeRange=function(a){var b=a.tabstop.indexOf(a);a.tabstop.splice(b,1),b=this.ranges.indexOf(a),this.ranges.splice(b,1),this.editor.session.removeMarker(a.markerId),a.tabstop.length||(b=this.tabstops.indexOf(a.tabstop),b!=-1&&this.tabstops.splice(b,1),this.tabstops.length||this.detach())},this.keyboardHandler=new i,this.keyboardHandler.bindKeys({Tab:function(a){b.snippetManager&&b.snippetManager.expandWithTab(a)||a.tabstopManager.tabNext(1)},"Shift-Tab":function(a){a.tabstopManager.tabNext(-1)},Esc:function(a){a.tabstopManager.detach()},Return:function(a){return!1}})}).call(m.prototype);var n={};n.onChange=h.prototype.onChange,n.setPosition=function(a,b){this.pos.row=a,this.pos.column=b},n.update=function(a,b,c){this.$insertRight=c,this.pos=a,this.onChange(b)};var o=function(a,b){0==a.row&&(a.column+=b.column),a.row+=b.row},p=function(a,b){a.row==b.row&&(a.column-=b.column),a.row-=b.row};a("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),
b.snippetManager=new l;var q=a("./editor").Editor;(function(){this.insertSnippet=function(a,c){return b.snippetManager.insertSnippet(this,a,c)},this.expandSnippet=function(a){return b.snippetManager.expandWithTab(this,a)}}).call(q.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/edit_session","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(a,b,c){"use strict";var d=(a("../edit_session").EditSession,a("../virtual_renderer").VirtualRenderer),e=a("../editor").Editor,f=a("../range").Range,g=a("../lib/event"),h=a("../lib/lang"),i=a("../lib/dom"),j=function(a){var b=new d(a);b.$maxLines=4;var c=new e(b);return c.setHighlightActiveLine(!1),c.setShowPrintMargin(!1),c.renderer.setShowGutter(!1),c.renderer.setHighlightGutterLine(!1),c.$mouseHandler.$focusWaitTimout=0,c.$highlightTagPending=!0,c},k=function(a){var b=i.createElement("div"),c=new j(b);a&&a.appendChild(b),b.style.display="none",c.renderer.content.style.cursor="default",c.renderer.setStyle("ace_autocomplete"),c.setOption("displayIndentGuides",!1),c.setOption("dragDelay",150);var d=function(){};c.focus=d,c.$isFocused=!0,c.renderer.$cursorLayer.restartTimer=d,c.renderer.$cursorLayer.element.style.opacity=0,c.renderer.$maxLines=8,c.renderer.$keepTextAreaAtCursor=!1,c.setHighlightActiveLine(!1),c.session.highlight(""),c.session.$searchHighlight.clazz="ace_highlight-marker",c.on("mousedown",function(a){var b=a.getDocumentPosition();c.selection.moveToPosition(b),l.start.row=l.end.row=b.row,a.stop()});var e,k=new f((-1),0,(-1),1/0),l=new f((-1),0,(-1),1/0);l.id=c.session.addMarker(l,"ace_active-line","fullLine"),c.setSelectOnHover=function(a){a?k.id&&(c.session.removeMarker(k.id),k.id=null):k.id=c.session.addMarker(k,"ace_line-hover","fullLine")},c.setSelectOnHover(!1),c.on("mousemove",function(a){if(!e)return void(e=a);if(e.x!=a.x||e.y!=a.y){e=a,e.scrollTop=c.renderer.scrollTop;var b=e.getDocumentPosition().row;k.start.row!=b&&(k.id||c.setRow(b),n(b))}}),c.renderer.on("beforeRender",function(){if(e&&k.start.row!=-1){e.$pos=null;var a=e.getDocumentPosition().row;k.id||c.setRow(a),n(a,!0)}}),c.renderer.on("afterRender",function(){var a=c.getRow(),b=c.renderer.$textLayer,d=b.element.childNodes[a-b.config.firstRow];d!=b.selectedNode&&(b.selectedNode&&i.removeCssClass(b.selectedNode,"ace_selected"),b.selectedNode=d,d&&i.addCssClass(d,"ace_selected"))});var m=function(){n(-1)},n=function(a,b){a!==k.start.row&&(k.start.row=k.end.row=a,b||c.session._emit("changeBackMarker"),c._emit("changeHoverMarker"))};c.getHoveredRow=function(){return k.start.row},g.addListener(c.container,"mouseout",m),c.on("hide",m),c.on("changeSelection",m),c.session.doc.getLength=function(){return c.data.length},c.session.doc.getLine=function(a){var b=c.data[a];return"string"==typeof b?b:b&&b.value||""};var o=c.session.bgTokenizer;return o.$tokenizeRow=function(a){var b=c.data[a],d=[];if(!b)return d;"string"==typeof b&&(b={value:b}),b.caption||(b.caption=b.value||b.name);for(var e,f,g=-1,h=0;h<b.caption.length;h++)f=b.caption[h],e=b.matchMask&1<<h?1:0,g!==e?(d.push({type:b.className||""+(e?"completion-highlight":""),value:f}),g=e):d[d.length-1].value+=f;if(b.meta){var i=c.renderer.$size.scrollerWidth/c.renderer.layerConfig.characterWidth;b.meta.length+b.caption.length<i-2&&d.push({type:"rightAlignedText",value:b.meta})}return d},o.$updateOnChange=d,o.start=d,c.session.$computeWidth=function(){return this.screenWidth=0},c.$blockScrolling=1/0,c.isOpen=!1,c.isTopdown=!1,c.data=[],c.setData=function(a){c.data=a||[],c.setValue(h.stringRepeat("\n",a.length),-1),c.setRow(0)},c.getData=function(a){return c.data[a]},c.getRow=function(){return l.start.row},c.setRow=function(a){a=Math.max(-1,Math.min(this.data.length,a)),l.start.row!=a&&(c.selection.clearSelection(),l.start.row=l.end.row=a||0,c.session._emit("changeBackMarker"),c.moveCursorTo(a||0,0),c.isOpen&&c._signal("select"))},c.on("changeSelection",function(){c.isOpen&&c.setRow(c.selection.lead.row),c.renderer.scrollCursorIntoView()}),c.hide=function(){this.container.style.display="none",this._signal("hide"),c.isOpen=!1},c.show=function(a,b,d){var f=this.container,g=window.innerHeight,h=window.innerWidth,i=this.renderer,j=i.$maxLines*b*1.4,k=a.top+this.$borderSize;k+j>g-b&&!d?(f.style.top="",f.style.bottom=g-k+"px",c.isTopdown=!1):(k+=b,f.style.top=k+"px",f.style.bottom="",c.isTopdown=!0),f.style.display="",this.renderer.$textLayer.checkForSizeChanges();var l=a.left;l+f.offsetWidth>h&&(l=h-f.offsetWidth),f.style.left=l+"px",this._signal("show"),e=null,c.isOpen=!0},c.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},c.$imageSize=0,c.$borderSize=1,c};i.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_editor.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_editor.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_editor.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}"),b.AcePopup=k}),ace.define("ace/autocomplete/util",["require","exports","module"],function(a,b,c){"use strict";b.parForEach=function(a,b,c){var d=0,e=a.length;0===e&&c();for(var f=0;f<e;f++)b(a[f],function(a,b){d++,d===e&&c(a,b)})};var d=/[a-zA-Z_0-9\$\-\u00A2-\uFFFF]/;b.retrievePrecedingIdentifier=function(a,b,c){c=c||d;for(var e=[],f=b-1;f>=0&&c.test(a[f]);f--)e.push(a[f]);return e.reverse().join("")},b.retrieveFollowingIdentifier=function(a,b,c){c=c||d;for(var e=[],f=b;f<a.length&&c.test(a[f]);f++)e.push(a[f]);return e}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/snippets"],function(a,b,c){"use strict";var d=a("./keyboard/hash_handler").HashHandler,e=a("./autocomplete/popup").AcePopup,f=a("./autocomplete/util"),g=(a("./lib/event"),a("./lib/lang")),h=a("./lib/dom"),i=a("./snippets").snippetManager,j=function(){this.autoInsert=!0,this.autoSelect=!0,this.exactMatch=!1,this.keyboardHandler=new d,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=g.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=g.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.gatherCompletionsId=0,this.$init=function(){return this.popup=new e(document.body||document.documentElement),this.popup.on("click",function(a){this.insertMatch(),a.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(a,b,c){this.popup||this.$init(),this.popup.setData(this.completions.filtered);var d=a.renderer;if(this.popup.setRow(this.autoSelect?0:-1),c)c&&!b&&this.detach();else{this.popup.setTheme(a.getTheme()),this.popup.setFontSize(a.getFontSize());var e=d.layerConfig.lineHeight,f=d.$cursorLayer.getPixelPosition(this.base,!0);f.left-=this.popup.getTextLeftOffset();var g=a.container.getBoundingClientRect();f.top+=g.top-d.layerConfig.offset,f.left+=g.left-a.renderer.scrollLeft,f.left+=d.$gutterLayer.gutterWidth,this.popup.show(f,e)}},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.popup&&this.popup.isOpen&&(this.gatherCompletionsId+=1,this.popup.hide()),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(a){var b=this.editor.selection.lead;(b.row!=this.base.row||b.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(a){var b=document.activeElement,c=this.editor.textInput.getElement();b!=c&&b.parentNode!=this.popup.container&&b!=this.tooltipNode&&a.relatedTarget!=this.tooltipNode&&a.relatedTarget!=c&&this.detach()},this.mousedownListener=function(a){this.detach()},this.mousewheelListener=function(a){this.detach()},this.goTo=function(a){var b=this.popup.getRow(),c=this.popup.session.getLength()-1;switch(a){case"up":b=b<=0?c:b-1;break;case"down":b=b>=c?-1:b+1;break;case"start":b=0;break;case"end":b=c}this.popup.setRow(b)},this.insertMatch=function(a){if(a||(a=this.popup.getData(this.popup.getRow())),!a)return!1;if(a.completer&&a.completer.insertMatch)a.completer.insertMatch(this.editor,a);else{if(this.completions.filterText)for(var b,c=this.editor.selection.getAllRanges(),d=0;b=c[d];d++)b.start.column-=this.completions.filterText.length,this.editor.session.remove(b);a.snippet?i.insertSnippet(this.editor,a.snippet):this.editor.execCommand("insertstring",a.value||a)}this.detach()},this.commands={Up:function(a){a.completer.goTo("up")},Down:function(a){a.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(a){a.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(a){a.completer.goTo("end")},Esc:function(a){a.completer.detach()},Space:function(a){a.completer.detach(),a.insert(" ")},Return:function(a){return a.completer.insertMatch()},"Shift-Return":function(a){a.completer.insertMatch(!0)},Tab:function(a){var b=a.completer.insertMatch();return b||a.tabstopManager?b:void a.completer.goTo("down")},PageUp:function(a){a.completer.popup.gotoPageUp()},PageDown:function(a){a.completer.popup.gotoPageDown()}},this.gatherCompletions=function(a,b){var c=a.getSession(),d=a.getCursorPosition(),e=c.getLine(d.row),g=f.retrievePrecedingIdentifier(e,d.column);this.base=c.doc.createAnchor(d.row,d.column-g.length),this.base.$insertRight=!0;var h=[],i=a.completers.length;return a.completers.forEach(function(e,j){e.getCompletions(a,c,d,g,function(d,e){d||(h=h.concat(e));var g=a.getCursorPosition(),j=c.getLine(g.row);b(null,{prefix:f.retrievePrecedingIdentifier(j,g.column,e[0]&&e[0].identifierRegex),matches:h,finished:0===--i})})}),!0},this.showPopup=function(a){this.editor&&this.detach(),this.activated=!0,this.editor=a,a.completer!=this&&(a.completer&&a.completer.detach(),a.completer=this),a.keyBinding.addKeyboardHandler(this.keyboardHandler),a.on("changeSelection",this.changeListener),a.on("blur",this.blurListener),a.on("mousedown",this.mousedownListener),a.on("mousewheel",this.mousewheelListener),this.updateCompletions()},this.updateCompletions=function(a){if(a&&this.base&&this.completions){var b=this.editor.getCursorPosition(),c=this.editor.session.getTextRange({start:this.base,end:b});if(c==this.completions.filterText)return;return this.completions.setFilter(c),this.completions.filtered.length&&(1!=this.completions.filtered.length||this.completions.filtered[0].value!=c||this.completions.filtered[0].snippet)?void this.openPopup(this.editor,c,a):this.detach()}var d=this.gatherCompletionsId;this.gatherCompletions(this.editor,function(b,c){var e=function(){if(c.finished)return this.detach()}.bind(this),f=c.prefix,g=c&&c.matches;if(!g||!g.length)return e();if(0===f.indexOf(c.prefix)&&d==this.gatherCompletionsId){this.completions=new k(g),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(f);var h=this.completions.filtered;return h.length&&(1!=h.length||h[0].value!=f||h[0].snippet)?this.autoInsert&&1==h.length&&c.finished?this.insertMatch(h[0]):void this.openPopup(this.editor,f,a):e()}}.bind(this))},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var a=this.popup,b=a.data,c=b&&(b[a.getHoveredRow()]||b[a.getRow()]),d=null;return c&&this.editor&&this.popup.isOpen?(this.editor.completers.some(function(a){return a.getDocTooltip&&(d=a.getDocTooltip(c)),d}),d||(d=c),"string"==typeof d&&(d={docText:d}),d&&(d.docHTML||d.docText)?void this.showDocTooltip(d):this.hideDocTooltip()):this.hideDocTooltip()},this.showDocTooltip=function(a){this.tooltipNode||(this.tooltipNode=h.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this));var b=this.tooltipNode;a.docHTML?b.innerHTML=a.docHTML:a.docText&&(b.textContent=a.docText),b.parentNode||document.body.appendChild(b);var c=this.popup,d=c.container.getBoundingClientRect();b.style.top=c.container.style.top,b.style.bottom=c.container.style.bottom,window.innerWidth-d.right<320?(b.style.right=window.innerWidth-d.left+"px",b.style.left=""):(b.style.left=d.right+1+"px",b.style.right=""),b.style.display="block"},this.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),this.tooltipNode){var a=this.tooltipNode;this.editor.isFocused()||document.activeElement!=a||this.editor.focus(),this.tooltipNode=null,a.parentNode&&a.parentNode.removeChild(a)}}}).call(j.prototype),j.startCommand={name:"startAutocomplete",exec:function(a){a.completer||(a.completer=new j),a.completer.autoInsert=a.completer.autoSelect=!0,a.completer.showPopup(a),a.completer.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var k=function(a,b,c){this.all=a,this.filtered=a,this.filterText=b||"",this.exactMatch=!1};(function(){this.setFilter=function(a){if(a.length>this.filterText&&0===a.lastIndexOf(this.filterText,0))var b=this.filtered;else var b=this.all;this.filterText=a,b=this.filterCompletions(b,this.filterText),b=b.sort(function(a,b){return b.exactMatch-a.exactMatch||b.score-a.score});var c=null;b=b.filter(function(a){var b=a.snippet||a.caption||a.value;return b!==c&&(c=b,!0)}),this.filtered=b},this.filterCompletions=function(a,b){var c=[],d=b.toUpperCase(),e=b.toLowerCase();a:for(var f,g=0;f=a[g];g++){var h=f.value||f.caption||f.snippet;if(h){var i,j,k=-1,l=0,m=0;if(this.exactMatch){if(b!==h.substr(0,b.length))continue a}else for(var n=0;n<b.length;n++){var o=h.indexOf(e[n],k+1),p=h.indexOf(d[n],k+1);if(i=o>=0&&(p<0||o<p)?o:p,i<0)continue a;j=i-k-1,j>0&&(k===-1&&(m+=10),m+=j),l|=1<<i,k=i}f.matchMask=l,f.exactMatch=m?0:1,f.score=(f.score||0)-m,c.push(f)}}return c}}).call(k.prototype),b.Autocomplete=j,b.FilteredList=k}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(a,b,c){function d(a,b){var c=a.getTextRange(f.fromPoints({row:0,column:0},b));return c.split(g).length-1}function e(a,b){var c=d(a,b),e=a.getValue().split(g),f=Object.create(null),h=e[c];return e.forEach(function(a,b){if(a&&a!==h){var d=Math.abs(c-b),g=e.length-d;f[a]?f[a]=Math.max(g,f[a]):f[a]=g}}),f}var f=a("../range").Range,g=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;b.getCompletions=function(a,b,c,d,f){var g=e(b,c,d),h=Object.keys(g);f(null,h.map(function(a){return{caption:a,value:a,score:g[a],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(a,b,c){"use strict";function d(a){var b=a.getCursorPosition(),c=a.session.getLine(b.row),d=i.retrievePrecedingIdentifier(c,b.column);return a.completers.forEach(function(a){a.identifierRegexps&&a.identifierRegexps.forEach(function(a){!d&&a&&(d=i.retrievePrecedingIdentifier(c,b.column,a))})}),d}var e=a("../snippets").snippetManager,f=a("../autocomplete").Autocomplete,g=a("../config"),h=a("../lib/lang"),i=a("../autocomplete/util"),j=a("../autocomplete/text_completer"),k={getCompletions:function(a,b,c,d,e){if(b.$mode.completer)return b.$mode.completer.getCompletions(a,b,c,d,e);var f=a.session.getState(c.row),g=b.$mode.getCompletions(f,b,c,d);e(null,g)}},l={getCompletions:function(a,b,c,d,f){var g=e.snippetMap,h=[];e.getActiveScopes(a).forEach(function(a){for(var b=g[a]||[],c=b.length;c--;){var d=b[c],e=d.name||d.tabTrigger;e&&h.push({caption:e,snippet:d.content,meta:d.tabTrigger&&!d.name?d.tabTrigger+"‚á• ":"snippet",type:"snippet"})}},this),f(null,h)},getDocTooltip:function(a){"snippet"!=a.type||a.docHTML||(a.docHTML=["<b>",h.escapeHTML(a.caption),"</b>","<hr></hr>",h.escapeHTML(a.snippet)].join(""))}},m=[l,j,k];b.setCompleters=function(a){m=a||[]},b.addCompleter=function(a){m.push(a)},b.textCompleter=j,b.keyWordCompleter=k,b.snippetCompleter=l;var n={name:"expandSnippet",exec:function(a){return e.expandWithTab(a)},bindKey:"Tab"},o=function(a,b){p(b.session.$mode)},p=function(a){var b=a.$id;e.files||(e.files={}),q(b),a.modes&&a.modes.forEach(p)},q=function(a){if(a&&!e.files[a]){var b=a.replace("mode","snippets");e.files[a]={},g.loadModule(b,function(b){b&&(e.files[a]=b,!b.snippets&&b.snippetText&&(b.snippets=e.parseSnippetFile(b.snippetText)),e.register(b.snippets||[],b.scope),b.includeScopes&&(e.snippetMap[b.scope].includeScopes=b.includeScopes,b.includeScopes.forEach(function(a){q("ace/mode/"+a)})))})}},r=function(a){var b=a.editor,c=(a.args||"",b.completer&&b.completer.activated);if("backspace"===a.command.name)c&&!d(b)&&b.completer.detach();else if("insertstring"===a.command.name){var e=d(b);e&&!c&&(b.completer||(b.completer=new f),b.completer.autoSelect=!1,b.completer.autoInsert=!1,b.completer.showPopup(b))}},s=a("../editor").Editor;a("../config").defineOptions(s.prototype,"editor",{enableBasicAutocompletion:{set:function(a){a?(this.completers||(this.completers=Array.isArray(a)?a:m),this.commands.addCommand(f.startCommand)):this.commands.removeCommand(f.startCommand)},value:!1},enableLiveAutocompletion:{set:function(a){a?(this.completers||(this.completers=Array.isArray(a)?a:m),this.commands.on("afterExec",r)):this.commands.removeListener("afterExec",r)},value:!1},enableSnippets:{set:function(a){a?(this.commands.addCommand(n),this.on("changeMode",o),o(null,this)):(this.commands.removeCommand(n),this.off("changeMode",o))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(){})}(),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(a){return"string"==typeof a?parseInt(a,10):~~a}var c={wheelSpeed:1,wheelPropagation:!1,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:!1},d=0,e=function(){var a=d++;return function(b){var c=".perfect-scrollbar-"+a;return"undefined"==typeof b?c:b+c}};a.fn.perfectScrollbar=function(d,f){return this.each(function(){function g(a,c){var d=a+c,e=A-H;I=d<0?0:d>e?e:d;var f=b(I*(C-A)/(A-H));x.scrollTop(f)}function h(a,c){var d=a+c,e=z-E;F=d<0?0:d>e?e:d;var f=b(F*(B-z)/(z-E));x.scrollLeft(f)}function i(a){return w.minScrollbarLength&&(a=Math.max(a,w.minScrollbarLength)),w.maxScrollbarLength&&(a=Math.min(a,w.maxScrollbarLength)),a}function j(){var a={width:z};J?a.left=x.scrollLeft()+z-B:a.left=x.scrollLeft(),P?a.bottom=O-x.scrollTop():a.top=Q+x.scrollTop(),M.css(a);var b={top:x.scrollTop(),height:A};V?J?b.right=B-x.scrollLeft()-U-T.outerWidth():b.right=U-x.scrollLeft():J?b.left=x.scrollLeft()+2*z-B-W-T.outerWidth():b.left=W+x.scrollLeft(),S.css(b),N.css({left:F,width:E-R}),T.css({top:I,height:H-X})}function k(){x.removeClass("ps-active-x"),x.removeClass("ps-active-y"),z=w.includePadding?x.innerWidth():x.width(),A=w.includePadding?x.innerHeight():x.height(),B=x.prop("scrollWidth"),C=x.prop("scrollHeight"),!w.suppressScrollX&&z+w.scrollXMarginOffset<B?(D=!0,E=i(b(z*z/B)),F=b(x.scrollLeft()*(z-E)/(B-z))):(D=!1,E=0,F=0,x.scrollLeft(0)),!w.suppressScrollY&&A+w.scrollYMarginOffset<C?(G=!0,H=i(b(A*A/C)),I=b(x.scrollTop()*(A-H)/(C-A))):(G=!1,H=0,I=0,x.scrollTop(0)),F>=z-E&&(F=z-E),I>=A-H&&(I=A-H),j(),D&&x.addClass("ps-active-x"),G&&x.addClass("ps-active-y")}function l(){var b,c,d=!1;N.bind(K("mousedown"),function(a){c=a.pageX,b=N.position().left,M.addClass("in-scrolling"),d=!0,a.stopPropagation(),a.preventDefault()}),a(L).bind(K("mousemove"),function(a){d&&(h(b,a.pageX-c),k(),a.stopPropagation(),a.preventDefault())}),a(L).bind(K("mouseup"),function(a){d&&(d=!1,M.removeClass("in-scrolling"))}),b=c=null}function m(){var b,c,d=!1;T.bind(K("mousedown"),function(a){c=a.pageY,b=T.position().top,d=!0,S.addClass("in-scrolling"),a.stopPropagation(),a.preventDefault()}),a(L).bind(K("mousemove"),function(a){d&&(g(b,a.pageY-c),k(),a.stopPropagation(),a.preventDefault())}),a(L).bind(K("mouseup"),function(a){d&&(d=!1,S.removeClass("in-scrolling"))}),b=c=null}function n(a,b){var c=x.scrollTop();if(0===a){if(!G)return!1;if(0===c&&b>0||c>=C-A&&b<0)return!w.wheelPropagation}var d=x.scrollLeft();if(0===b){if(!D)return!1;if(0===d&&a<0||d>=B-z&&a>0)return!w.wheelPropagation}return!0}function o(){function a(a){var b=a.originalEvent.deltaX,c=-1*a.originalEvent.deltaY;return"undefined"!=typeof b&&"undefined"!=typeof c||(b=-1*a.originalEvent.wheelDeltaX/6,c=a.originalEvent.wheelDeltaY/6),a.originalEvent.deltaMode&&1===a.originalEvent.deltaMode&&(b*=10,c*=10),b!==b&&c!==c&&(b=0,c=a.originalEvent.wheelDelta),[b,c]}function b(b){var d=a(b),e=d[0],f=d[1];c=!1,w.useBothWheelAxes?G&&!D?(f?x.scrollTop(x.scrollTop()-f*w.wheelSpeed):x.scrollTop(x.scrollTop()+e*w.wheelSpeed),c=!0):D&&!G&&(e?x.scrollLeft(x.scrollLeft()+e*w.wheelSpeed):x.scrollLeft(x.scrollLeft()-f*w.wheelSpeed),c=!0):(x.scrollTop(x.scrollTop()-f*w.wheelSpeed),x.scrollLeft(x.scrollLeft()+e*w.wheelSpeed)),k(),c=c||n(e,f),c&&(b.stopPropagation(),b.preventDefault())}var c=!1;"undefined"!=typeof window.onwheel?x.bind(K("wheel"),b):"undefined"!=typeof window.onmousewheel&&x.bind(K("mousewheel"),b)}function p(){var b=!1;x.bind(K("mouseenter"),function(a){b=!0}),x.bind(K("mouseleave"),function(a){b=!1});var c=!1;a(L).bind(K("keydown"),function(d){if((!d.isDefaultPrevented||!d.isDefaultPrevented())&&b){for(var e=document.activeElement?document.activeElement:L.activeElement;e.shadowRoot;)e=e.shadowRoot.activeElement;if(!a(e).is(":input,[contenteditable]")){var f=0,g=0;switch(d.which){case 37:f=-30;break;case 38:g=30;break;case 39:f=30;break;case 40:g=-30;break;case 33:g=90;break;case 32:case 34:g=-90;break;case 35:g=d.ctrlKey?-C:-A;break;case 36:g=d.ctrlKey?x.scrollTop():A;break;default:return}x.scrollTop(x.scrollTop()-g),x.scrollLeft(x.scrollLeft()+f),c=n(f,g),c&&d.preventDefault()}}})}function q(){function a(a){a.stopPropagation()}T.bind(K("click"),a),S.bind(K("click"),function(a){var c=b(H/2),d=a.pageY-S.offset().top-c,e=A-H,f=d/e;f<0?f=0:f>1&&(f=1),x.scrollTop((C-A)*f)}),N.bind(K("click"),a),M.bind(K("click"),function(a){var c=b(E/2),d=a.pageX-M.offset().left-c,e=z-E,f=d/e;f<0?f=0:f>1&&(f=1),x.scrollLeft((B-z)*f)})}function r(){function b(){var a=window.getSelection?window.getSelection():document.getSlection?document.getSlection():{rangeCount:0};return 0===a.rangeCount?null:a.getRangeAt(0).commonAncestorContainer}function c(){e||(e=setInterval(function(){return y()?(x.scrollTop(x.scrollTop()+f.top),x.scrollLeft(x.scrollLeft()+f.left),void k()):void clearInterval(e)},50))}function d(){e&&(clearInterval(e),e=null),M.removeClass("in-scrolling"),S.removeClass("in-scrolling")}var e=null,f={top:0,left:0},g=!1;a(L).bind(K("selectionchange"),function(c){a.contains(x[0],b())?g=!0:(g=!1,d())}),a(window).bind(K("mouseup"),function(a){g&&(g=!1,d())}),a(window).bind(K("mousemove"),function(a){if(g){var b={x:a.pageX,y:a.pageY},e=x.offset(),h={left:e.left,right:e.left+x.outerWidth(),top:e.top,bottom:e.top+x.outerHeight()};b.x<h.left+3?(f.left=-5,M.addClass("in-scrolling")):b.x>h.right-3?(f.left=5,M.addClass("in-scrolling")):f.left=0,b.y<h.top+3?(h.top+3-b.y<5?f.top=-5:f.top=-20,S.addClass("in-scrolling")):b.y>h.bottom-3?(b.y-h.bottom+3<5?f.top=5:f.top=20,S.addClass("in-scrolling")):f.top=0,0===f.top&&0===f.left?d():c()}})}function s(b,c){function d(a,b){x.scrollTop(x.scrollTop()-b),x.scrollLeft(x.scrollLeft()-a),k()}function e(a){q=!0}function f(a){q=!1}function g(a){return a.originalEvent.targetTouches?a.originalEvent.targetTouches[0]:a.originalEvent}function h(a){var b=a.originalEvent;return!(!b.targetTouches||1!==b.targetTouches.length)||!(!b.pointerType||"mouse"===b.pointerType||b.pointerType===b.MSPOINTER_TYPE_MOUSE)}function i(a){if(h(a)){r=!0;var b=g(a);m.pageX=b.pageX,m.pageY=b.pageY,n=(new Date).getTime(),null!==p&&clearInterval(p),a.stopPropagation()}}function j(a){if(!q&&r&&h(a)){var b=g(a),c={pageX:b.pageX,pageY:b.pageY},e=c.pageX-m.pageX,f=c.pageY-m.pageY;d(e,f),m=c;var i=(new Date).getTime(),j=i-n;j>0&&(o.x=e/j,o.y=f/j,n=i),a.stopPropagation(),a.preventDefault()}}function l(a){!q&&r&&(r=!1,clearInterval(p),p=setInterval(function(){return y()?Math.abs(o.x)<.01&&Math.abs(o.y)<.01?void clearInterval(p):(d(30*o.x,30*o.y),o.x*=.8,void(o.y*=.8)):void clearInterval(p)},10))}var m={},n=0,o={},p=null,q=!1,r=!1;b&&(a(window).bind(K("touchstart"),e),a(window).bind(K("touchend"),f),x.bind(K("touchstart"),i),x.bind(K("touchmove"),j),x.bind(K("touchend"),l)),c&&(window.PointerEvent?(a(window).bind(K("pointerdown"),e),a(window).bind(K("pointerup"),f),x.bind(K("pointerdown"),i),x.bind(K("pointermove"),j),x.bind(K("pointerup"),l)):window.MSPointerEvent&&(a(window).bind(K("MSPointerDown"),e),a(window).bind(K("MSPointerUp"),f),x.bind(K("MSPointerDown"),i),x.bind(K("MSPointerMove"),j),x.bind(K("MSPointerUp"),l)))}function t(){x.bind(K("scroll"),function(a){k()})}function u(){x.unbind(K()),a(window).unbind(K()),a(L).unbind(K()),x.data("perfect-scrollbar",null),x.data("perfect-scrollbar-update",null),x.data("perfect-scrollbar-destroy",null),N.remove(),T.remove(),M.remove(),S.remove(),x=M=S=N=T=D=G=z=A=B=C=E=F=O=P=Q=H=I=U=V=W=J=K=null}function v(){k(),t(),l(),m(),q(),r(),o(),(Y||Z)&&s(Y,Z),w.useKeyboard&&p(),x.data("perfect-scrollbar",x),x.data("perfect-scrollbar-update",k),x.data("perfect-scrollbar-destroy",u)}var w=a.extend(!0,{},c),x=a(this),y=function(){return!!x};if("object"==typeof d?a.extend(!0,w,d):f=d,"update"===f)return x.data("perfect-scrollbar-update")&&x.data("perfect-scrollbar-update")(),x;if("destroy"===f)return x.data("perfect-scrollbar-destroy")&&x.data("perfect-scrollbar-destroy")(),x;if(x.data("perfect-scrollbar"))return x.data("perfect-scrollbar");x.addClass("ps-container");var z,A,B,C,D,E,F,G,H,I,J="rtl"===x.css("direction"),K=e(),L=this.ownerDocument||document,M=a("<div class='ps-scrollbar-x-rail'>").appendTo(x),N=a("<div class='ps-scrollbar-x'>").appendTo(M),O=b(M.css("bottom")),P=O===O,Q=P?null:b(M.css("top")),R=b(M.css("borderLeftWidth"))+b(M.css("borderRightWidth")),S=a("<div class='ps-scrollbar-y-rail'>").appendTo(x),T=a("<div class='ps-scrollbar-y'>").appendTo(S),U=b(S.css("right")),V=U===U,W=V?null:b(S.css("left")),X=b(S.css("borderTopWidth"))+b(S.css("borderBottomWidth")),Y="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,Z=null!==window.navigator.msMaxTouchPoints;return v(),x})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,k=0,l=0,m=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(l=g.detail*-1),"wheelDelta"in g&&(l=g.wheelDelta),"wheelDeltaY"in g&&(l=g.wheelDeltaY),"wheelDeltaX"in g&&(k=g.wheelDeltaX*-1),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(k=l*-1,l=0),j=0===l?k:l,"deltaY"in g&&(l=g.deltaY*-1,j=l),"deltaX"in g&&(k=g.deltaX,0===l&&(j=k*-1)),0!==l||0!==k){if(1===g.deltaMode){var n=a.data(this,"mousewheel-line-height");j*=n,l*=n,k*=n}else if(2===g.deltaMode){var o=a.data(this,"mousewheel-page-height");j*=o,l*=o,k*=o}return m=Math.max(Math.abs(l),Math.abs(k)),(!f||m<f)&&(f=m,d(g,m)&&(f/=40)),d(g,m)&&(j/=40,k/=40,l/=40),j=Math[j>=1?"floor":"ceil"](j/f),k=Math[k>=1?"floor":"ceil"](k/f),l=Math[l>=1?"floor":"ceil"](l/f),b.deltaX=k,b.deltaY=l,b.deltaFactor=f,b.deltaMode=0,h.unshift(b,j,k,l),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var a=h.length;a;)this.removeEventListener(h[--a],b,!1);else this.onmousewheel=null},getLineHeight:function(b){return parseInt(a(b)["offsetParent"in a.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),jQuery.fn.doubleScroll=function(a){var b={contentElement:void 0,scrollCss:{"overflow-x":"auto","overflow-y":"hidden"},contentCss:{"overflow-x":"auto","overflow-y":"hidden"},onlyIfScroll:!0,resetOnWindowResize:!1,timeToWaitForResize:30};$.extend(!0,b,a),$.extend(b,{topScrollBarMarkup:'<div class="doubleScroll-scroll-wrapper" style="height: 20px;"><div class="doubleScroll-scroll" style="height: 20px;"></div></div>',topScrollBarWrapperSelector:".doubleScroll-scroll-wrapper",topScrollBarInnerSelector:".doubleScroll-scroll"});var c=function(a,b){if(b.onlyIfScroll&&a.get(0).scrollWidth<=a.width())return void a.prev(b.topScrollBarWrapperSelector).remove();var c=a.prev(b.topScrollBarWrapperSelector);if(0==c.length){c=$(b.topScrollBarMarkup),a.before(c),c.css(b.scrollCss),a.css(b.contentCss),c.bind("scroll.doubleScroll",function(){a.scrollLeft(c.scrollLeft())});var d=function(){c.scrollLeft(a.scrollLeft())};a.bind("scroll.doubleScroll",d)}var e;e=void 0!==b.contentElement&&0!==a.find(b.contentElement).length?a.find(b.contentElement):a.find(">:first-child"),$(b.topScrollBarInnerSelector,c).width(e.outerWidth()),c.width(a.width()),c.scrollLeft(a.scrollLeft())};return this.each(function(){var a=$(this);if(c(a,b),b.resetOnWindowResize){var d,e=function(d){c(a,b)};$(window).bind("resize.doubleScroll",function(){clearTimeout(d),d=setTimeout(e,b.timeToWaitForResize)})}})},function(){"use strict";function a(a,b,c){"addEventListener"in window?a.addEventListener(b,c,!1):"attachEvent"in window&&a.attachEvent("on"+b,c)}function b(){var a,b=["moz","webkit","o","ms"];for(a=0;a<b.length&&!w;a+=1)w=window[b[a]+"RequestAnimationFrame"];w||c(" RequestAnimationFrame not supported")}function c(a){y.log&&"object"==typeof console&&console.log(s+"[Host page"+u+"]"+a)}function d(a){function b(){function a(){h(B),f(),y.resizedCallback(B)}k("Height"),k("Width"),i(a,B,"resetPage")}function d(a){var b=a.id;c(" Removing iFrame: "+b),a.parentNode.removeChild(a),y.closedCallback(b),
c(" --")}function j(){var a=A.substr(t).split(":");return{iframe:document.getElementById(a[0]),id:a[0],height:a[1],width:a[2],type:a[3]}}function k(a){var b=Number(y["max"+a]),d=Number(y["min"+a]),e=a.toLowerCase(),f=Number(B[e]);if(d>b)throw new Error("Value for min"+a+" can not be greater than max"+a);c(" Checking "+e+" is in range "+d+"-"+b),f<d&&(f=d,c(" Set "+e+" to min value")),f>b&&(f=b,c(" Set "+e+" to max value")),B[e]=""+f}function l(){var b=a.origin,d=B.iframe.src.split("/").slice(0,3).join("/");if(y.checkOrigin&&(c(" Checking connection is from: "+d),""+b!="null"&&b!==d))throw new Error("Unexpected message received from: "+b+" for "+B.iframe.id+". Message was: "+a.data+". This error can be disabled by adding the checkOrigin: false option.");return!0}function m(){return s===(""+A).substr(0,t)}function n(){var a=B.type in{true:1,false:1};return a&&c(" Ignoring init message from meta parent page"),a}function o(){var a=A.substr(A.indexOf(":")+r+6);c(" MessageCallback passed: {iframe: "+B.iframe.id+", message: "+a+"}"),y.messageCallback({iframe:B.iframe,message:JSON.parse(a)}),c(" --")}function q(){if(null===B.iframe)throw new Error("iFrame ("+B.id+") does not exist on "+u);return!0}function w(){var a=B.iframe.getBoundingClientRect();return e(),{x:Number(a.left)+Number(v.x),y:Number(a.top)+Number(v.y)}}function x(a){var b=a?w():{x:0,y:0};c(" Reposition requested from iFrame (offset x:"+b.x+" y:"+b.y+")"),v={x:Number(B.width)+b.x,y:Number(B.height)+b.y},f()}function z(){switch(B.type){case"close":d(B.iframe),y.resizedCallback(B);break;case"message":o();break;case"scrollTo":x(!1);break;case"scrollToOffset":x(!0);break;case"reset":g(B);break;case"init":b(),y.initCallback(B.iframe);break;default:b()}}var A=a.data,B={};m()&&(c(" Received: "+A),B=j(),!n()&&q()&&l()&&(z(),p=!1))}function e(){null===v&&(v={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},c(" Get position: "+v.x+","+v.y))}function f(){null!==v&&(window.scrollTo(v.x,v.y),c(" Set position: "+v.x+","+v.y),v=null)}function g(a){function b(){h(a),j("reset","reset",a.iframe)}c(" Size reset requested by "+("init"===a.type?"host page":"iFrame")),e(),i(b,a,"init")}function h(a){function b(b){a.iframe.style[b]=a[b]+"px",c(" IFrame ("+a.iframe.id+") "+b+" set to "+a[b]+"px")}y.sizeHeight&&b("height"),y.sizeWidth&&b("width")}function i(a,b,d){d!==b.type&&w?(c(" Requesting animation frame"),w(a)):a()}function j(a,b,d){c("["+a+"] Sending msg to iframe ("+b+")"),d.contentWindow.postMessage(s+b,"*")}function k(){function b(){function a(a){1/0!==y[a]&&0!==y[a]&&(k.style[a]=y[a]+"px",c(" Set "+a+" = "+y[a]+"px"))}a("maxHeight"),a("minHeight"),a("maxWidth"),a("minWidth")}function d(a){return""===a&&(k.id=a="iFrameResizer"+o++,c(" Added missing iframe ID: "+a+" ("+k.src+")")),a}function e(){c(" IFrame scrolling "+(y.scrolling?"enabled":"disabled")+" for "+l),k.style.overflow=!1===y.scrolling?"hidden":"auto",k.scrolling=!1===y.scrolling?"no":"yes"}function f(){"number"!=typeof y.bodyMargin&&"0"!==y.bodyMargin||(y.bodyMarginV1=y.bodyMargin,y.bodyMargin=""+y.bodyMargin+"px")}function h(){return l+":"+y.bodyMarginV1+":"+y.sizeWidth+":"+y.log+":"+y.interval+":"+y.enablePublicMethods+":"+y.autoResize+":"+y.bodyMargin+":"+y.heightCalculationMethod+":"+y.bodyBackground+":"+y.bodyPadding+":"+y.tolerance}function i(b){a(k,"load",function(){var a=p;j("iFrame.onload",b,k),!a&&y.heightCalculationMethod in x&&g({iframe:k,height:0,width:0,type:"init"})}),j("init",b,k)}var k=this,l=d(k.id);e(),b(),f(),i(h())}function l(a){if("object"!=typeof a)throw new TypeError("Options is not an object.")}function m(){function a(a){if("IFRAME"!==a.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+a.tagName+">.");k.call(a)}function b(a){a=a||{},l(a);for(var b in z)z.hasOwnProperty(b)&&(y[b]=a.hasOwnProperty(b)?a[b]:z[b])}return function(c,d){b(c),Array.prototype.forEach.call(document.querySelectorAll(d||"iframe"),a)}}function n(a){a.fn.iFrameResize=function(b){return b=b||{},l(b),y=a.extend({},z,b),this.filter("iframe").each(k).end()}}var o=0,p=!0,q="message",r=q.length,s="[iFrameSizer]",t=s.length,u="",v=null,w=window.requestAnimationFrame,x={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},y={},z={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){}};b(),a(window,"message",d),window.jQuery&&n(jQuery),"function"==typeof define&&define.amd?define([],m):"object"==typeof exports?module.exports=m():window.iFrameResize=m()}(),!function(a){function b(a){var b=document.createElement("input"),c="on"+a,d=c in b;return d||(b.setAttribute(c,"return;"),d="function"==typeof b[c]),b=null,d}function c(a){var b="text"==a||"tel"==a;if(!b){var c=document.createElement("input");c.setAttribute("type",a),b="text"===c.type,c=null}return b}function d(b,c,e){var f=e.aliases[b];return!!f&&(f.alias&&d(f.alias,void 0,e),a.extend(!0,e,f),a.extend(!0,e,c),!0)}function e(b,c){function d(c){function d(a,b,c,d){this.matches=[],this.isGroup=a||!1,this.isOptional=b||!1,this.isQuantifier=c||!1,this.isAlternator=d||!1,this.quantifier={min:1,max:1}}function e(c,d,e){var f=b.definitions[d],g=0==c.matches.length;if(e=void 0!=e?e:c.matches.length,f&&!m){f.placeholder=a.isFunction(f.placeholder)?f.placeholder.call(this,b):f.placeholder;for(var h=f.prevalidator,i=h?h.length:0,j=1;j<f.cardinality;j++){var k=i>=j?h[j-1]:[],l=k.validator,n=k.cardinality;c.matches.splice(e++,0,{fn:l?"string"==typeof l?new RegExp(l):new function(){this.test=l}:new RegExp("."),cardinality:n?n:1,optionality:c.isOptional,newBlockMarker:g,casing:f.casing,def:f.definitionSymbol||d,placeholder:f.placeholder,mask:d})}c.matches.splice(e++,0,{fn:f.validator?"string"==typeof f.validator?new RegExp(f.validator):new function(){this.test=f.validator}:new RegExp("."),cardinality:f.cardinality,optionality:c.isOptional,newBlockMarker:g,casing:f.casing,def:f.definitionSymbol||d,placeholder:f.placeholder,mask:d})}else c.matches.splice(e++,0,{fn:null,cardinality:0,optionality:c.isOptional,newBlockMarker:g,casing:null,def:d,placeholder:void 0,mask:d}),m=!1}for(var f,g,h,i,j,k,l=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g,m=!1,n=new d,o=[],p=[];f=l.exec(c);)switch(g=f[0],g.charAt(0)){case b.optionalmarker.end:case b.groupmarker.end:if(h=o.pop(),o.length>0){if(i=o[o.length-1],i.matches.push(h),i.isAlternator){j=o.pop();for(var q=0;q<j.matches.length;q++)j.matches[q].isGroup=!1;o.length>0?(i=o[o.length-1],i.matches.push(j)):n.matches.push(j)}}else n.matches.push(h);break;case b.optionalmarker.start:o.push(new d((!1),(!0)));break;case b.groupmarker.start:o.push(new d((!0)));break;case b.quantifiermarker.start:var r=new d((!1),(!1),(!0));g=g.replace(/[{}]/g,"");var s=g.split(","),t=isNaN(s[0])?s[0]:parseInt(s[0]),u=1==s.length?t:isNaN(s[1])?s[1]:parseInt(s[1]);if(("*"==u||"+"==u)&&(t="*"==u?0:1),r.quantifier={min:t,max:u},o.length>0){var v=o[o.length-1].matches;if(f=v.pop(),!f.isGroup){var w=new d((!0));w.matches.push(f),f=w}v.push(f),v.push(r)}else{if(f=n.matches.pop(),!f.isGroup){var w=new d((!0));w.matches.push(f),f=w}n.matches.push(f),n.matches.push(r)}break;case b.escapeChar:m=!0;break;case b.alternatormarker:o.length>0?(i=o[o.length-1],k=i.matches.pop()):k=n.matches.pop(),k.isAlternator?o.push(k):(j=new d((!1),(!1),(!1),(!0)),j.matches.push(k),o.push(j));break;default:if(o.length>0){if(i=o[o.length-1],i.matches.length>0&&!i.isAlternator&&(k=i.matches[i.matches.length-1],k.isGroup&&(k.isGroup=!1,e(k,b.groupmarker.start,0),e(k,b.groupmarker.end))),e(i,g),i.isAlternator){j=o.pop();for(var q=0;q<j.matches.length;q++)j.matches[q].isGroup=!1;o.length>0?(i=o[o.length-1],i.matches.push(j)):n.matches.push(j)}}else n.matches.length>0&&(k=n.matches[n.matches.length-1],k.isGroup&&(k.isGroup=!1,e(k,b.groupmarker.start,0),e(k,b.groupmarker.end))),e(n,g)}return n.matches.length>0&&(k=n.matches[n.matches.length-1],k.isGroup&&(k.isGroup=!1,e(k,b.groupmarker.start,0),e(k,b.groupmarker.end)),p.push(n)),p}function e(e,f){if(void 0!=e&&""!=e){if(1==e.length&&0==b.greedy&&0!=b.repeat&&(b.placeholder=""),b.repeat>0||"*"==b.repeat||"+"==b.repeat){var g="*"==b.repeat?0:"+"==b.repeat?1:b.repeat;e=b.groupmarker.start+e+b.groupmarker.end+b.quantifiermarker.start+g+","+b.repeat+b.quantifiermarker.end}var h;return void 0==a.inputmask.masksCache[e]||c===!0?(h={mask:e,maskToken:d(e),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:f},c!==!0&&(a.inputmask.masksCache[e]=h)):h=a.extend(!0,{},a.inputmask.masksCache[e]),h}}function f(a){if(a=a.toString(),b.numericInput){a=a.split("").reverse();for(var c=0;c<a.length;c++)a[c]==b.optionalmarker.start?a[c]=b.optionalmarker.end:a[c]==b.optionalmarker.end?a[c]=b.optionalmarker.start:a[c]==b.groupmarker.start?a[c]=b.groupmarker.end:a[c]==b.groupmarker.end&&(a[c]=b.groupmarker.start);a=a.join("")}return a}var g=void 0;if(a.isFunction(b.mask)&&(b.mask=b.mask.call(this,b)),a.isArray(b.mask)){if(b.mask.length>1){b.keepStatic=void 0==b.keepStatic||b.keepStatic;var h="(";return a.each(b.mask,function(b,c){h.length>1&&(h+=")|("),h+=f(void 0==c.mask||a.isFunction(c.mask)?c:c.mask)}),h+=")",e(h,b.mask)}b.mask=b.mask.pop()}return b.mask&&(g=void 0==b.mask.mask||a.isFunction(b.mask.mask)?e(f(b.mask),b.mask):e(f(b.mask.mask),b.mask)),g}function f(d,e,f){function g(a,b,c){b=b||0;var d,e,f,g=[],h=0;do{if(a===!0&&l().validPositions[h]){var i=l().validPositions[h];e=i.match,d=i.locator.slice(),g.push(c===!0?i.input:G(h,e))}else f=q(h,d,h-1),e=f.match,d=f.locator.slice(),g.push(G(h,e));h++}while((void 0==da||da>h-1)&&null!=e.fn||null==e.fn&&""!=e.def||b>=h);return g.pop(),g}function l(){return e}function m(a){var b=l();b.buffer=void 0,b.tests={},a!==!0&&(b._buffer=void 0,b.validPositions={},b.p=0)}function n(a,b){var c=l(),d=-1,e=c.validPositions;void 0==a&&(a=-1);var f=d,g=d;for(var h in e){var i=parseInt(h);e[i]&&(b||null!=e[i].match.fn)&&(a>=i&&(f=i),i>=a&&(g=i))}return d=-1!=f&&a-f>1||a>g?f:g}function o(b,c,d){if(f.insertMode&&void 0!=l().validPositions[b]&&void 0==d){var e,g=a.extend(!0,{},l().validPositions),h=n();for(e=b;h>=e;e++)delete l().validPositions[e];l().validPositions[b]=c;var i,j=!0,k=l().validPositions;for(e=i=b;h>=e;e++){var m=g[e];if(void 0!=m)for(var o=i;o<B()&&(null==m.match.fn&&k[e]&&(k[e].match.optionalQuantifier===!0||k[e].match.optionality===!0)||null!=m.match.fn);){if(null==m.match.fn||!f.keepStatic&&k[e]&&(void 0!=k[e+1]&&t(e+1,k[e].locator.slice(),e).length>1||void 0!=k[e].alternation)?o++:o=C(i),s(o,m.match.def)){j=z(o,m.input,!0,!0)!==!1,i=o;break}j=null==m.match.fn}if(!j)break}if(!j)return l().validPositions=a.extend(!0,{},g),!1}else l().validPositions[b]=c;return!0}function p(a,b,c,d){var e,g=a;for(l().p=a,void 0!=l().validPositions[a]&&l().validPositions[a].input==f.radixPoint&&(b++,g++),e=g;b>e;e++)void 0!=l().validPositions[e]&&(c===!0||0!=f.canClearPosition(l(),e,n(),d,f))&&delete l().validPositions[e];for(m(!0),e=g+1;e<=n();){for(;void 0!=l().validPositions[g];)g++;var h=l().validPositions[g];g>e&&(e=g+1);var i=l().validPositions[e];void 0!=i&&void 0==h?(s(g,i.match.def)&&z(g,i.input,!0)!==!1&&(delete l().validPositions[e],e++),g++):e++}var j=n(),k=B();for(j>=a&&void 0!=l().validPositions[j]&&l().validPositions[j].input==f.radixPoint&&delete l().validPositions[j],e=j+1;k>=e;e++)l().validPositions[e]&&delete l().validPositions[e];m(!0)}function q(a,b,c){var d=l().validPositions[a];if(void 0==d)for(var e=t(a,b,c),g=n(),h=l().validPositions[g]||t(0,void 0,void 0)[0],i=void 0!=h.alternation?h.locator[h.alternation].toString().split(","):[],j=0;j<e.length&&(d=e[j],!(d.match&&(f.greedy&&d.match.optionalQuantifier!==!0||(d.match.optionality===!1||d.match.newBlockMarker===!1)&&d.match.optionalQuantifier!==!0)&&(void 0==h.alternation||void 0!=d.locator[h.alternation]&&y(d.locator[h.alternation].toString().split(","),i))));j++);return d}function r(a){return l().validPositions[a]?l().validPositions[a].match:t(a)[0].match}function s(a,b){for(var c=!1,d=t(a),e=0;e<d.length;e++)if(d[e].match&&d[e].match.def==b){c=!0;break}return c}function t(b,c,d,e){function f(c,d,e,g){function i(e,g,n){if(h>1e4)return alert("jquery.inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+l().mask),!0;if(h==b&&void 0==e.matches)return j.push({match:e,locator:g.reverse()}),!0;if(void 0!=e.matches){if(e.isGroup&&n!==!0){if(e=i(c.matches[m+1],g))return!0}else if(e.isOptional){var o=e;if(e=f(e,d,g,n)){var p=j[j.length-1].match,q=0==a.inArray(p,o.matches);if(!q)return!0;k=!0,h=b}}else if(e.isAlternator){var r,s=e,t=[],u=j.slice(),v=g.length,w=d.length>0?d.shift():-1;if(-1==w||"string"==typeof w){var x,y=h,z=d.slice();"string"==typeof w&&(x=w.split(","));for(var A=0;A<s.matches.length;A++){j=[],e=i(s.matches[A],[A].concat(g),n)||e,r=j.slice(),h=y,j=[];for(var B=0;B<z.length;B++)d[B]=z[B];for(var C=0;C<r.length;C++){var D=r[C];D.alternation=v;for(var E=0;E<t.length;E++){var F=t[E];if(D.match.mask==F.match.mask&&("string"!=typeof w||-1!=a.inArray(D.locator[v].toString(),x))){r.splice(C,1),F.locator[v]=F.locator[v]+","+D.locator[v],F.alternation=v;break}}}t=t.concat(r)}"string"==typeof w&&(t=a.map(t,function(b,c){if(isFinite(c)){var d,e=b.locator[v].toString().split(",");b.locator[v]=void 0,b.alternation=void 0;for(var f=0;f<e.length;f++)d=-1!=a.inArray(e[f],x),d&&(void 0!=b.locator[v]?(b.locator[v]+=",",b.locator[v]+=e[f]):b.locator[v]=parseInt(e[f]),b.alternation=v);if(void 0!=b.locator[v])return b}})),j=u.concat(t),h=b,k=!0}else e=i(s.matches[w],[w].concat(g),n);if(e)return!0}else if(e.isQuantifier&&n!==!0)for(var G=e,H=d.length>0&&n!==!0?d.shift():0;H<(isNaN(G.quantifier.max)?H+1:G.quantifier.max)&&b>=h;H++){var I=c.matches[a.inArray(G,c.matches)-1];if(e=i(I,[H].concat(g),!0)){var p=j[j.length-1].match;p.optionalQuantifier=H>G.quantifier.min-1;var q=0==a.inArray(p,I.matches);if(q){if(H>G.quantifier.min-1){k=!0,h=b;break}return!0}return!0}}else if(e=f(e,d,g,n))return!0}else h++}for(var m=d.length>0?d.shift():0;m<c.matches.length;m++)if(c.matches[m].isQuantifier!==!0){var n=i(c.matches[m],[m].concat(e),g);if(n&&h==b)return n;if(h>b)break}}var g=l().maskToken,h=c?d:0,i=c||[0],j=[],k=!1;if(void 0==c){for(var m,n=b-1;void 0==(m=l().validPositions[n])&&n>-1;)n--;if(void 0!=m&&n>-1)h=n,i=m.locator.slice();else{for(n=b-1;void 0==(m=l().tests[n])&&n>-1;)n--;void 0!=m&&n>-1&&(h=n,i=m[0].locator.slice())}}for(var o=i.shift();o<g.length;o++){var p=f(g[o],i,[o]);if(p&&h==b||h>b)break}return(0==j.length||k)&&j.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),l().tests[b]=a.extend(!0,[],j),l().tests[b]}function u(){return void 0==l()._buffer&&(l()._buffer=g(!1,1)),l()._buffer}function v(){return void 0==l().buffer&&(l().buffer=g(!0,n(),!0)),l().buffer}function w(a,b,c){if(c=c||v().slice(),a===!0)m(),a=0,b=c.length;else for(var d=a;b>d;d++)delete l().validPositions[d],delete l().tests[d];for(var d=a;b>d;d++)c[d]!=f.skipOptionalPartCharacter&&z(d,c[d],!0,!0)}function x(a,b){switch(b.casing){case"upper":a=a.toUpperCase();break;case"lower":a=a.toLowerCase()}return a}function y(b,c){for(var d=f.greedy?c:c.slice(0,1),e=!1,g=0;g<b.length;g++)if(-1!=a.inArray(b[g],d)){e=!0;break}return e}function z(b,c,d,e){function g(b,c,d,e){var g=!1;return a.each(t(b),function(h,i){for(var j=i.match,k=c?1:0,q="",r=(v(),j.cardinality);r>k;r--)q+=E(b-(r-1));if(c&&(q+=c),g=null!=j.fn?j.fn.test(q,l(),b,d,f):(c==j.def||c==f.skipOptionalPartCharacter)&&""!=j.def&&{c:j.def,pos:b},g!==!1){var s=void 0!=g.c?g.c:c;s=s==f.skipOptionalPartCharacter&&null===j.fn?j.def:s;var t=b,u=v();if(void 0!=g.remove&&(a.isArray(g.remove)||(g.remove=[g.remove]),a.each(g.remove.sort(function(a,b){return b-a}),function(a,b){p(b,b+1,!0)})),void 0!=g.insert&&(a.isArray(g.insert)||(g.insert=[g.insert]),a.each(g.insert.sort(function(a,b){return a-b}),function(a,b){z(b.pos,b.c,!0)})),g.refreshFromBuffer){var y=g.refreshFromBuffer;if(d=!0,w(y===!0?y:y.start,y.end,u),void 0==g.pos&&void 0==g.c)return g.pos=n(),!1;if(t=void 0!=g.pos?g.pos:b,t!=b)return g=a.extend(g,z(t,s,!0)),!1}else if(g!==!0&&void 0!=g.pos&&g.pos!=b&&(t=g.pos,w(b,t),t!=b))return g=a.extend(g,z(t,s,!0)),!1;return(1==g||void 0!=g.pos||void 0!=g.c)&&(h>0&&m(!0),o(t,a.extend({},i,{input:x(s,j)}),e)||(g=!1),!1)}}),g}function h(b,c,d,e){var g,h,i,j,k=a.extend(!0,{},l().validPositions);for(g=n();g>=0;g--)if(j=l().validPositions[g],j&&void 0!=j.alternation&&j.locator[j.alternation].length>1){h=l().validPositions[g].alternation;break}if(void 0!=h)for(var o in l().validPositions)if(j=l().validPositions[o],parseInt(o)>parseInt(g)&&j.alternation){for(var p=j.locator[h],q=l().validPositions[g].locator[h].toString().split(","),r=0;r<q.length;r++)if(p<q[r]){for(var s,t,u=o-1;u>=0;u--)if(s=l().validPositions[u],void 0!=s){t=s.locator[h],s.locator[h]=parseInt(q[r]);break}if(p!=s.locator[h]){for(var v=[],w=o;w<n()+1;w++){var x=l().validPositions[w];x&&null!=x.match.fn&&v.push(x.input),delete l().validPositions[w],delete l().tests[w]}for(m(!0),f.keepStatic=!f.keepStatic,i=!0;v.length>0;){var y=v.shift();if(y!=f.skipOptionalPartCharacter&&!(i=z(n()+1,y,!1,!0)))break}if(s.alternation=h,s.locator[h]=t,i&&(i=z(b,c,d,e)),f.keepStatic=!f.keepStatic,i)return i;m(),l().validPositions=a.extend(!0,{},k)}}break}return!1}function i(b,c){for(var d=l().validPositions[c],e=d.locator,f=e.length,g=b;c>g;g++)if(!A(g)){var h=t(g),i=h[0],j=-1;a.each(h,function(a,b){for(var c=0;f>c;c++)b.locator[c]&&y(b.locator[c].toString().split(","),e[c].toString().split(","))&&c>j&&(j=c,i=b)}),o(g,a.extend({},i,{input:i.match.def}),!0)}}d=d===!0;for(var j=v(),k=b-1;k>-1&&!l().validPositions[k];k--);for(k++;b>k;k++)void 0==l().validPositions[k]&&((!A(k)||j[k]!=G(k))&&t(k).length>1||j[k]==f.radixPoint||"0"==j[k]&&a.inArray(f.radixPoint,j)<k)&&g(k,j[k],!0);var q=b,r=!1,s=a.extend(!0,{},l().validPositions);if(q<B()&&(r=g(q,c,d,e),(!d||e)&&r===!1)){var u=l().validPositions[q];if(!u||null!=u.match.fn||u.match.def!=c&&c!=f.skipOptionalPartCharacter){if((f.insertMode||void 0==l().validPositions[C(q)])&&!A(q))for(var D=q+1,F=C(q);F>=D;D++)if(r=g(D,c,d,e),r!==!1){i(q,D),q=D;break}}else r={caret:C(q)}}if(r===!1&&f.keepStatic&&O(j)&&(r=h(b,c,d,e)),r===!0&&(r={pos:q}),a.isFunction(f.postValidation)&&0!=r&&!d){m(!0);var H=f.postValidation(v(),f);if(!H)return m(!0),l().validPositions=a.extend(!0,{},s),!1}return r}function A(a){var b=r(a);if(null!=b.fn)return b.fn;if(!f.keepStatic&&void 0==l().validPositions[a]){for(var c=t(a),d=!0,e=0;e<c.length;e++)if(""!=c[e].match.def&&(null!==c[e].match.fn||void 0==c[e].alternation||c[e].locator[c[e].alternation].length>1)){d=!1;break}return d}return!1}function B(){var a;da=ca.prop("maxLength"),-1==da&&(da=void 0);var b,c=n(),d=l().validPositions[c],e=void 0!=d?d.locator.slice():void 0;for(b=c+1;void 0==d||null!=d.match.fn||null==d.match.fn&&""!=d.match.def;b++)d=q(b,e,b-1),e=d.locator.slice();var f=r(b-1);return a=""!=f.def?b:b-1,void 0==da||da>a?a:da}function C(a){var b=B();if(a>=b)return b;for(var c=a;++c<b&&!A(c)&&(f.nojumps!==!0||f.nojumpsThreshold>c););return c}function D(a){var b=a;if(0>=b)return 0;for(;--b>0&&!A(b););return b}function E(a){return void 0==l().validPositions[a]?G(a):l().validPositions[a].input}function F(b,c,d,e,g){if(e&&a.isFunction(f.onBeforeWrite)){var h=f.onBeforeWrite.call(b,e,c,d,f);if(h){if(h.refreshFromBuffer){var i=h.refreshFromBuffer;w(i===!0?i:i.start,i.end,h.buffer),m(!0),c=v()}d=h.caret||d}}b._valueSet(c.join("")),void 0!=d&&L(b,d),g===!0&&(ga=!0,a(b).trigger("input"))}function G(a,b){if(b=b||r(a),void 0!=b.placeholder)return b.placeholder;if(null==b.fn){if(!f.keepStatic&&void 0==l().validPositions[a]){for(var c=t(a),d=!0,e=0;e<c.length;e++)if(""!=c[e].match.def&&(null!==c[e].match.fn||void 0==c[e].alternation||c[e].locator[c[e].alternation].length>1)){d=!1;break}if(d)return f.placeholder.charAt(a%f.placeholder.length)}return b.def}return f.placeholder.charAt(a%f.placeholder.length)}function H(b,c,d,e){function f(){var a=!1,b=u().slice(i,C(i)).join("").indexOf(h);if(-1!=b&&!A(i)){a=!0;for(var c=u().slice(i,i+b),d=0;d<c.length;d++)if(" "!=c[d]){a=!1;break}}return a}var g=void 0!=e?e.slice():b._valueGet().split(""),h="",i=0;if(m(),l().p=C(-1),c&&b._valueSet(""),!d){var j=u().slice(0,C(-1)).join(""),k=g.join("").match(new RegExp(I(j),"g"));k&&k.length>0&&(g.splice(0,k.length*j.length),i=C(i))}a.each(g,function(c,e){var g=a.Event("keypress");g.which=e.charCodeAt(0),h+=e;var j=n(void 0,!0),k=l().validPositions[j],m=q(j+1,k?k.locator.slice():void 0,j);if(!f()||d){var o=d?c:null==m.match.fn&&m.match.optionality&&j+1<l().p?j+1:l().p;U.call(b,g,!0,!1,d,o),i=o+1,h=""}else U.call(b,g,!0,!1,!0,j+1)}),c&&F(b,v(),a(b).is(":focus")?C(n(0)):void 0,a.Event("checkval"))}function I(b){return a.inputmask.escapeRegex(b)}function J(b){if(b.data("_inputmask")&&!b.hasClass("hasDatepicker")){var c=[],d=l().validPositions;for(var e in d)d[e].match&&null!=d[e].match.fn&&c.push(d[e].input);var g=(ea?c.reverse():c).join(""),h=(ea?v().slice().reverse():v()).join("");return a.isFunction(f.onUnMask)&&(g=f.onUnMask.call(b,h,g,f)||g),g}return b[0]._valueGet()}function K(a){if(ea&&"number"==typeof a&&(!f.greedy||""!=f.placeholder)){var b=v().length;a=b-a}return a}function L(b,c,d){var e,g=b.jquery&&b.length>0?b[0]:b;if("number"!=typeof c)return g.setSelectionRange?(c=g.selectionStart,d=g.selectionEnd):window.getSelection?(e=window.getSelection().getRangeAt(0),e.commonAncestorContainer.parentNode==g&&(c=e.startOffset,d=e.endOffset)):document.selection&&document.selection.createRange&&(e=document.selection.createRange(),c=0-e.duplicate().moveStart("character",-1e5),d=c+e.text.length),{begin:K(c),end:K(d)};if(c=K(c),d=K(d),d="number"==typeof d?d:c,a(g).is(":visible")){var h=a(g).css("font-size").replace("px","")*d;if(g.scrollLeft=h>g.scrollWidth?h:0,i||0!=f.insertMode||c!=d||d++,g.setSelectionRange)g.selectionStart=c,g.selectionEnd=d;else if(window.getSelection){e=document.createRange(),e.setStart(g.firstChild,c<g._valueGet().length?c:g._valueGet().length),e.setEnd(g.firstChild,d<g._valueGet().length?d:g._valueGet().length),e.collapse(!0);var j=window.getSelection();j.removeAllRanges(),j.addRange(e)}else g.createTextRange&&(e=g.createTextRange(),e.collapse(!0),e.moveEnd("character",d),e.moveStart("character",c),e.select())}}function M(b){var c,d,e=v(),f=e.length,g=n(),h={},i=l().validPositions[g],j=void 0!=i?i.locator.slice():void 0;for(c=g+1;c<e.length;c++)d=q(c,j,c-1),j=d.locator.slice(),h[c]=a.extend(!0,{},d);var k=i&&void 0!=i.alternation?i.locator[i.alternation]:void 0;for(c=f-1;c>g&&(d=h[c].match,(d.optionality||d.optionalQuantifier||k&&k!=h[c].locator[i.alternation])&&e[c]==G(c,d));c--)f--;return b?{l:f,def:h[f]?h[f].match:void 0}:f}function N(a){for(var b=M(),c=a.length-1;c>b&&!A(c);c--);return a.splice(b,c+1-b),a}function O(b){if(a.isFunction(f.isComplete))return f.isComplete.call(ca,b,f);if("*"!=f.repeat){var c=!1,d=M(!0),e=D(d.l);if(n(),void 0==d.def||d.def.newBlockMarker||d.def.optionality||d.def.optionalQuantifier){c=!0;for(var g=0;e>=g;g++){var h=A(g),i=r(g);if(h&&void 0==l().validPositions[g]&&i.optionality!==!0&&i.optionalQuantifier!==!0||!h&&b[g]!=G(g)){c=!1;break}}}return c}}function P(a,b){return ea?a-b>1||a-b==1&&f.insertMode:b-a>1||b-a==1&&f.insertMode}function Q(b){var c=a._data(b).events,d=!1;a.each(c,function(b,c){a.each(c,function(a,b){if("inputmask"==b.namespace&&"setvalue"!=b.type){var c=b.handler;b.handler=function(a){if(!this.disabled&&(!this.readOnly||"keydown"==a.type&&a.ctrlKey&&67==a.keyCode)){switch(a.type){case"input":if(ga===!0||d===!0)return ga=!1,a.preventDefault();break;case"keydown":fa=!1,d=!1;break;case"keypress":if(fa===!0)return a.preventDefault();fa=!0;break;case"compositionstart":d=!0;break;case"compositionupdate":ga=!0;break;case"compositionend":d=!1}return c.apply(this,arguments)}a.preventDefault()}}})})}function R(b){function c(b){if(void 0==a.valHooks[b]||1!=a.valHooks[b].inputmaskpatch){var c=a.valHooks[b]&&a.valHooks[b].get?a.valHooks[b].get:function(a){return a.value},d=a.valHooks[b]&&a.valHooks[b].set?a.valHooks[b].set:function(a,b){return a.value=b,a};a.valHooks[b]={get:function(b){var d=a(b);if(d.data("_inputmask")){if(d.data("_inputmask").opts.autoUnmask)return d.inputmask("unmaskedvalue");var e=c(b),f=d.data("_inputmask"),g=f.maskset,h=g._buffer;return h=h?h.join(""):"",e!=h?e:""}return c(b)},set:function(b,c){var e,f=a(b),g=f.data("_inputmask");return e=d(b,c),g&&f.triggerHandler("setvalue.inputmask"),e},inputmaskpatch:!0}}}function d(){var b=a(this),c=a(this).data("_inputmask");return c?c.opts.autoUnmask?b.inputmask("unmaskedvalue"):g.call(this)!=u().join("")?g.call(this):"":g.call(this)}function e(b){var c=a(this).data("_inputmask");h.call(this,b),c&&a(this).triggerHandler("setvalue.inputmask")}function f(b){a(b).bind("mouseenter.inputmask",function(){var b=a(this),c=this,d=c._valueGet();""!=d&&d!=v().join("")&&b.triggerHandler("setvalue.inputmask")});var c=a._data(b).events,d=c.mouseover;if(d){for(var e=d[d.length-1],f=d.length-1;f>0;f--)d[f]=d[f-1];d[0]=e}}var g,h;if(!b._valueGet){var i;Object.getOwnPropertyDescriptor&&void 0==b.value?(g=function(){return this.textContent},h=function(a){this.textContent=a},Object.defineProperty(b,"value",{get:d,set:e})):((i=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(b,"value"))&&i.configurable,document.__lookupGetter__&&b.__lookupGetter__("value")?(g=b.__lookupGetter__("value"),h=b.__lookupSetter__("value"),b.__defineGetter__("value",d),b.__defineSetter__("value",e)):(g=function(){return b.value},h=function(a){b.value=a},c(b.type),f(b))),b._valueGet=function(a){return ea&&a!==!0?g.call(this).split("").reverse().join(""):g.call(this)},b._valueSet=function(a){h.call(this,ea?a.split("").reverse().join(""):a)}}}function S(b,c,d,e){function g(){if(f.keepStatic){m(!0);var c,d=[],e=a.extend(!0,{},l().validPositions);for(c=n();c>=0;c--){var g=l().validPositions[c];if(g){if(void 0!=g.alternation&&g.locator[g.alternation]==q(c).locator[g.alternation])break;null!=g.match.fn&&d.push(g.input),delete l().validPositions[c]}}if(c>0)for(;d.length>0;){l().p=C(n());var h=a.Event("keypress");h.which=d.pop().charCodeAt(0),U.call(b,h,!0,!1,!1,l().p)}else l().validPositions=a.extend(!0,{},e)}}if((f.numericInput||ea)&&(c==a.inputmask.keyCode.BACKSPACE?c=a.inputmask.keyCode.DELETE:c==a.inputmask.keyCode.DELETE&&(c=a.inputmask.keyCode.BACKSPACE),ea)){var h=d.end;d.end=d.begin,d.begin=h}if(c==a.inputmask.keyCode.BACKSPACE&&(d.end-d.begin<1||0==f.insertMode)?d.begin=D(d.begin):c==a.inputmask.keyCode.DELETE&&d.begin==d.end&&(d.end=A(d.end)?d.end+1:C(d.end)+1),p(d.begin,d.end,!1,e),e!==!0){g();var i=n(d.begin);i<d.begin?(-1==i&&m(),l().p=C(i)):l().p=d.begin}}function T(c){var d=this,e=a(d),g=c.keyCode,i=L(d);g==a.inputmask.keyCode.BACKSPACE||g==a.inputmask.keyCode.DELETE||h&&127==g||c.ctrlKey&&88==g&&!b("cut")?(c.preventDefault(),88==g&&(_=v().join("")),S(d,g,i),F(d,v(),l().p,c,_!=v().join("")),d._valueGet()==u().join("")?e.trigger("cleared"):O(v())===!0&&e.trigger("complete"),f.showTooltip&&e.prop("title",l().mask)):g==a.inputmask.keyCode.END||g==a.inputmask.keyCode.PAGE_DOWN?setTimeout(function(){var a=C(n());f.insertMode||a!=B()||c.shiftKey||a--,L(d,c.shiftKey?i.begin:a,a)},0):g==a.inputmask.keyCode.HOME&&!c.shiftKey||g==a.inputmask.keyCode.PAGE_UP?L(d,0,c.shiftKey?i.begin:0):(f.undoOnEscape&&g==a.inputmask.keyCode.ESCAPE||90==g&&c.ctrlKey)&&c.altKey!==!0?(H(d,!0,!1,_.split("")),e.click()):g!=a.inputmask.keyCode.INSERT||c.shiftKey||c.ctrlKey?0!=f.insertMode||c.shiftKey||(g==a.inputmask.keyCode.RIGHT?setTimeout(function(){var a=L(d);L(d,a.begin)},0):g==a.inputmask.keyCode.LEFT&&setTimeout(function(){var a=L(d);L(d,ea?a.begin+1:a.begin-1)},0)):(f.insertMode=!f.insertMode,L(d,f.insertMode||i.begin!=B()?i.begin:i.begin-1)),f.onKeyDown.call(this,c,v(),L(d).begin,f),ha=-1!=a.inArray(g,f.ignorables)}function U(b,c,d,e,g){var h=this,i=a(h),j=b.which||b.charCode||b.keyCode;if(!(c===!0||b.ctrlKey&&b.altKey)&&(b.ctrlKey||b.metaKey||ha))return!0;if(j){46==j&&0==b.shiftKey&&","==f.radixPoint&&(j=44);var k,n=c?{begin:g,end:g}:L(h),p=String.fromCharCode(j),q=P(n.begin,n.end);q&&(l().undoPositions=a.extend(!0,{},l().validPositions),S(h,a.inputmask.keyCode.DELETE,n,!0),n.begin=l().p,f.insertMode||(f.insertMode=!f.insertMode,o(n.begin,e),f.insertMode=!f.insertMode),q=!f.multi),l().writeOutBuffer=!0;var r=ea&&!q?n.end:n.begin,s=z(r,p,e);if(s!==!1){if(s!==!0&&(r=void 0!=s.pos?s.pos:r,p=void 0!=s.c?s.c:p),m(!0),void 0!=s.caret)k=s.caret;else{var u=l().validPositions;k=!f.keepStatic&&(void 0!=u[r+1]&&t(r+1,u[r].locator.slice(),r).length>1||void 0!=u[r].alternation)?r+1:C(r)}l().p=k}if(d!==!1){var x=this;if(setTimeout(function(){f.onKeyValidation.call(x,s,f)},0),l().writeOutBuffer&&s!==!1){var y=v();F(h,y,c?void 0:f.numericInput?D(k):k,b,c!==!0),c!==!0&&setTimeout(function(){O(y)===!0&&i.trigger("complete")},0)}else q&&(l().buffer=void 0,l().validPositions=l().undoPositions)}else q&&(l().buffer=void 0,l().validPositions=l().undoPositions);if(f.showTooltip&&i.prop("title",l().mask),c&&a.isFunction(f.onBeforeWrite)){var A=f.onBeforeWrite.call(this,b,v(),k,f);if(A&&A.refreshFromBuffer){var B=A.refreshFromBuffer;w(B===!0?B:B.start,B.end,A.buffer),m(!0),A.caret&&(l().p=A.caret)}}b.preventDefault()}}function V(b){var c=this,d=a(c),e=c._valueGet(!0),g=L(c);if("propertychange"==b.type&&c._valueGet().length<=B())return!0;if("paste"==b.type){var h=e.substr(0,g.begin),i=e.substr(g.end,e.length);h==u().slice(0,g.begin).join("")&&(h=""),i==u().slice(g.end).join("")&&(i=""),window.clipboardData&&window.clipboardData.getData?e=h+window.clipboardData.getData("Text")+i:b.originalEvent&&b.originalEvent.clipboardData&&b.originalEvent.clipboardData.getData&&(e=h+b.originalEvent.clipboardData.getData("text/plain")+i)}var j=e;if(a.isFunction(f.onBeforePaste)){if(j=f.onBeforePaste.call(c,e,f),j===!1)return b.preventDefault(),!1;j||(j=e)}return H(c,!0,!1,ea?j.split("").reverse():j.split("")),d.click(),O(v())===!0&&d.trigger("complete"),!1}function W(b){var c=this;H(c,!0,!1),O(v())===!0&&a(c).trigger("complete"),b.preventDefault()}function X(a){var b=this;_=v().join(""),(""==ba||0!=a.originalEvent.data.indexOf(ba))&&(aa=L(b))}function Y(b){var c=this,d=aa||L(c);0==b.originalEvent.data.indexOf(ba)&&(m(),d={begin:0,end:0});var e=b.originalEvent.data;L(c,d.begin,d.end);for(var g=0;g<e.length;g++){var h=a.Event("keypress");h.which=e.charCodeAt(g),fa=!1,ha=!1,U.call(c,h)}setTimeout(function(){var a=l().p;F(c,v(),f.numericInput?D(a):a)},0),ba=b.originalEvent.data}function Z(){}function $(b){if(ca=a(b),ca.is(":input")&&c(ca.attr("type"))||b.isContentEditable||ca.is("div")){if(ca.data("_inputmask",{maskset:e,opts:f,isRTL:!1}),f.showTooltip&&ca.prop("title",l().mask),("rtl"==b.dir||f.rightAlign)&&ca.css("text-align","right"),"rtl"==b.dir||f.numericInput){b.dir="ltr",ca.removeAttr("dir");var d=ca.data("_inputmask");d.isRTL=!0,ca.data("_inputmask",d),ea=!0}ca.unbind(".inputmask"),(ca.is(":input")||b.isContentEditable)&&(ca.closest("form").bind("submit",function(){_!=v().join("")&&ca.change(),ca[0]._valueGet&&ca[0]._valueGet()==u().join("")&&ca[0]._valueSet(""),f.removeMaskOnSubmit&&ca.inputmask("remove")}).bind("reset",function(){setTimeout(function(){ca.triggerHandler("setvalue.inputmask")},0)}),ca.bind("mouseenter.inputmask",function(){var b=a(this),c=this;!b.is(":focus")&&f.showMaskOnHover&&c._valueGet()!=v().join("")&&F(c,v())}).bind("blur.inputmask",function(b){var c=a(this),d=this;if(c.data("_inputmask")){var e=d._valueGet(),g=v().slice();ia=!0,_!=g.join("")&&setTimeout(function(){c.change(),_=g.join("")},0),""!=e&&(f.clearMaskOnLostFocus&&(e==u().join("")?g=[]:N(g)),
O(g)===!1&&(c.trigger("incomplete"),f.clearIncomplete&&(m(),g=f.clearMaskOnLostFocus?[]:u().slice())),F(d,g,void 0,b))}}).bind("focus.inputmask",function(){var b=(a(this),this),c=b._valueGet();f.showMaskOnFocus&&(!f.showMaskOnHover||f.showMaskOnHover&&""==c)&&b._valueGet()!=v().join("")&&F(b,v(),C(n())),_=v().join("")}).bind("mouseleave.inputmask",function(){var b=a(this),c=this;if(f.clearMaskOnLostFocus){var d=v().slice(),e=c._valueGet();b.is(":focus")||e==b.attr("placeholder")||""==e||(e==u().join("")?d=[]:N(d),F(c,d))}}).bind("click.inputmask",function(){var b=a(this),c=this;if(b.is(":focus")){var d=L(c);if(d.begin==d.end)if(f.radixFocus&&""!=f.radixPoint&&-1!=a.inArray(f.radixPoint,v())&&(ia||v().join("")==u().join("")))L(c,a.inArray(f.radixPoint,v())),ia=!1;else{var e=ea?K(d.begin):d.begin,g=C(n(e));g>e?L(c,A(e)?e:C(e)):L(c,g)}}}).bind("dblclick.inputmask",function(){var a=this;setTimeout(function(){L(a,0,C(n()))},0)}).bind(k+".inputmask dragdrop.inputmask drop.inputmask",V).bind("cut.inputmask",function(b){ga=!0;var c=this,d=a(c),e=L(c);S(c,a.inputmask.keyCode.DELETE,e),F(c,v(),l().p,b,_!=v().join("")),c._valueGet()==u().join("")&&d.trigger("cleared"),f.showTooltip&&d.prop("title",l().mask)}).bind("complete.inputmask",f.oncomplete).bind("incomplete.inputmask",f.onincomplete).bind("cleared.inputmask",f.oncleared),ca.bind("keydown.inputmask",T).bind("keypress.inputmask",U),j||ca.bind("compositionstart.inputmask",X).bind("compositionupdate.inputmask",Y).bind("compositionend.inputmask",Z),"paste"===k&&ca.bind("input.inputmask",W)),ca.bind("setvalue.inputmask",function(){var b=this,c=b._valueGet();b._valueSet(a.isFunction(f.onBeforeMask)?f.onBeforeMask.call(b,c,f)||c:c),H(b,!0,!1),_=v().join(""),(f.clearMaskOnLostFocus||f.clearIncomplete)&&b._valueGet()==u().join("")&&b._valueSet("")}),R(b);var g=a.isFunction(f.onBeforeMask)?f.onBeforeMask.call(b,b._valueGet(),f)||b._valueGet():b._valueGet();H(b,!0,!1,g.split(""));var h=v().slice();_=h.join("");var i;try{i=document.activeElement}catch(a){}O(h)===!1&&f.clearIncomplete&&m(),f.clearMaskOnLostFocus&&(h.join("")==u().join("")?h=[]:N(h)),F(b,h),i===b&&L(b,C(n())),Q(b)}}var _,aa,ba,ca,da,ea=!1,fa=!1,ga=!1,ha=!1,ia=!0;if(void 0!=d)switch(d.action){case"isComplete":return ca=a(d.el),e=ca.data("_inputmask").maskset,f=ca.data("_inputmask").opts,O(d.buffer);case"unmaskedvalue":return ca=d.$input,e=ca.data("_inputmask").maskset,f=ca.data("_inputmask").opts,ea=d.$input.data("_inputmask").isRTL,J(d.$input);case"mask":_=v().join(""),$(d.el);break;case"format":ca=a({}),ca.data("_inputmask",{maskset:e,opts:f,isRTL:f.numericInput}),f.numericInput&&(ea=!0);var ja=(a.isFunction(f.onBeforeMask)?f.onBeforeMask.call(ca,d.value,f)||d.value:d.value).split("");return H(ca,!1,!1,ea?ja.reverse():ja),a.isFunction(f.onBeforeWrite)&&f.onBeforeWrite.call(this,void 0,v(),0,f),d.metadata?{value:ea?v().slice().reverse().join(""):v().join(""),metadata:ca.inputmask("getmetadata")}:ea?v().slice().reverse().join(""):v().join("");case"isValid":ca=a({}),ca.data("_inputmask",{maskset:e,opts:f,isRTL:f.numericInput}),f.numericInput&&(ea=!0);var ja=d.value.split("");H(ca,!1,!0,ea?ja.reverse():ja);for(var ka=v(),la=M(),ma=ka.length-1;ma>la&&!A(ma);ma--);return ka.splice(la,ma+1-la),O(ka)&&d.value==ka.join("");case"getemptymask":return ca=a(d.el),e=ca.data("_inputmask").maskset,f=ca.data("_inputmask").opts,u();case"remove":var na=d.el;ca=a(na),e=ca.data("_inputmask").maskset,f=ca.data("_inputmask").opts,na._valueSet(J(ca)),ca.unbind(".inputmask"),ca.removeData("_inputmask");var oa;Object.getOwnPropertyDescriptor&&(oa=Object.getOwnPropertyDescriptor(na,"value")),oa&&oa.get?na._valueGet&&Object.defineProperty(na,"value",{get:na._valueGet,set:na._valueSet}):document.__lookupGetter__&&na.__lookupGetter__("value")&&na._valueGet&&(na.__defineGetter__("value",na._valueGet),na.__defineSetter__("value",na._valueSet));try{delete na._valueGet,delete na._valueSet}catch(a){na._valueGet=void 0,na._valueSet=void 0}break;case"getmetadata":if(ca=a(d.el),e=ca.data("_inputmask").maskset,f=ca.data("_inputmask").opts,a.isArray(e.metadata)){for(var pa,qa=n(),ra=qa;ra>=0;ra--)if(l().validPositions[ra]&&void 0!=l().validPositions[ra].alternation){pa=l().validPositions[ra].alternation;break}return void 0!=pa?e.metadata[l().validPositions[qa].locator[pa]]:e.metadata[0]}return e.metadata}}if(void 0===a.fn.inputmask){var g=navigator.userAgent,h=null!==g.match(new RegExp("iphone","i")),i=(null!==g.match(new RegExp("android.*safari.*","i")),null!==g.match(new RegExp("android.*chrome.*","i"))),j=null!==g.match(new RegExp("android.*firefox.*","i")),k=(/Kindle/i.test(g)||/Silk/i.test(g)||/KFTT/i.test(g)||/KFOT/i.test(g)||/KFJWA/i.test(g)||/KFJWI/i.test(g)||/KFSOWI/i.test(g)||/KFTHWA/i.test(g)||/KFTHWI/i.test(g)||/KFAPWA/i.test(g)||/KFAPWI/i.test(g),b("paste")?"paste":b("input")?"input":"propertychange");a.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:a.noop,onincomplete:a.noop,oncleared:a.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyDown:a.noop,onBeforeMask:void 0,onBeforePaste:void 0,onBeforeWrite:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:a.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:void 0,definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-z–ê-—è–Å—ë√Ä-√ø¬µ]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-z–ê-—è–Å—ë√Ä-√ø¬µ]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0,canClearPosition:a.noop,postValidation:void 0},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},masksCache:{},escapeRegex:function(a){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return a.replace(new RegExp("(\\"+b.join("|\\")+")","gim"),"\\$1")},format:function(b,c,g){var h=a.extend(!0,{},a.inputmask.defaults,c);return d(h.alias,c,h),f({action:"format",value:b,metadata:g},e(h,c&&void 0!==c.definitions),h)},isValid:function(b,c){var g=a.extend(!0,{},a.inputmask.defaults,c);return d(g.alias,c,g),f({action:"isValid",value:b},e(g,c&&void 0!==c.definitions),g)}},a.fn.inputmask=function(b,c){function g(b,c,e){var f=a(b);f.data("inputmask-alias")&&d(f.data("inputmask-alias"),a.extend(!0,{},c),c);for(var g in c){var h=f.data("inputmask-"+g.toLowerCase());void 0!=h&&("mask"==g&&0==h.indexOf("[")?(c[g]=h.replace(/[\s[\]]/g,"").split("','"),c[g][0]=c[g][0].replace("'",""),c[g][c[g].length-1]=c[g][c[g].length-1].replace("'","")):c[g]="boolean"==typeof h?h:h.toString(),e&&(e[g]=c[g]))}return c}var h,i=a.extend(!0,{},a.inputmask.defaults,c);if("string"==typeof b)switch(b){case"mask":return d(i.alias,c,i),this.each(function(){return g(this,i),h=e(i,c&&void 0!==c.definitions),void 0==h?this:void f({action:"mask",el:this},h,i)});case"unmaskedvalue":var j=a(this);return j.data("_inputmask")?f({action:"unmaskedvalue",$input:j}):j.val();case"remove":return this.each(function(){var b=a(this);b.data("_inputmask")&&f({action:"remove",el:this})});case"getemptymask":return this.data("_inputmask")?f({action:"getemptymask",el:this}):"";case"hasMaskedValue":return!!this.data("_inputmask")&&!this.data("_inputmask").opts.autoUnmask;case"isComplete":return!this.data("_inputmask")||f({action:"isComplete",buffer:this[0]._valueGet().split(""),el:this});case"getmetadata":return this.data("_inputmask")?f({action:"getmetadata",el:this}):void 0;default:return d(i.alias,c,i),d(b,c,i)||(i.mask=b),this.each(function(){return g(this,i),h=e(i,c&&void 0!==c.definitions),void 0==h?this:void f({action:"mask",el:this},h,i)})}else{if("object"==typeof b)return i=a.extend(!0,{},a.inputmask.defaults,b),d(i.alias,b,i),this.each(function(){return g(this,i),h=e(i,b&&void 0!==b.definitions),void 0==h?this:void f({action:"mask",el:this},h,i)});if(void 0==b)return this.each(function(){var b=a(this).attr("data-inputmask");if(b&&""!=b)try{b=b.replace(new RegExp("'","g"),'"');var e=a.parseJSON("{"+b+"}");a.extend(!0,e,c),i=a.extend(!0,{},a.inputmask.defaults,e),i=g(this,i),d(i.alias,e,i),i.alias=void 0,a(this).inputmask("mask",i)}catch(a){}if(a(this).attr("data-inputmask-mask")||a(this).attr("data-inputmask-alias")){i=a.extend(!0,{},a.inputmask.defaults,{});var f={};i=g(this,i,f),d(i.alias,f,i),i.alias=void 0,a(this).inputmask("mask",i)}})}}}return a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),a.extend(a.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(b){var c=a.inputmask.escapeRegex.call(this,b);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+c+"[01])")},val2:function(b){var c=a.inputmask.escapeRegex.call(this,b);return new RegExp("((0[1-9]|[12][0-9])"+c+"(0[1-9]|1[012]))|(30"+c+"(0[13-9]|1[012]))|(31"+c+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(a,b,c){if(isNaN(a))return!1;var d=parseInt(a.concat(b.toString().slice(a.length))),e=parseInt(a.concat(c.toString().slice(a.length)));return!isNaN(d)&&(d>=b&&c>=d)||!isNaN(e)&&(e>=b&&c>=e)},determinebaseyear:function(a,b,c){var d=(new Date).getFullYear();if(a>d)return a;if(d>b){for(var e=b.toString().slice(0,2),f=b.toString().slice(2,4);e+c>b;)e--;var g=e+f;return a>g?a:g}return d},onKeyDown:function(b){var c=a(this);if(b.ctrlKey&&b.keyCode==a.inputmask.keyCode.RIGHT){var d=new Date;c.val(d.getDate().toString()+(d.getMonth()+1).toString()+d.getFullYear().toString()),c.triggerHandler("setvalue.inputmask")}},getFrontValue:function(a,b,c){for(var d=0,e=0,f=0;f<a.length&&"2"!=a.charAt(f);f++){var g=c.definitions[a.charAt(f)];g?(d+=e,e=g.cardinality):e++}return b.join("").substr(d,e)},definitions:{1:{validator:function(a,b,c,d,e){var f=e.regex.val1.test(a);return d||f||a.charAt(1)!=e.separator&&-1=="-./".indexOf(a.charAt(1))||!(f=e.regex.val1.test("0"+a.charAt(0)))?f:(b.buffer[c-1]="0",{refreshFromBuffer:{start:c-1,end:c},pos:c,c:a.charAt(0)})},cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){var f=a;isNaN(b.buffer[c+1])||(f+=b.buffer[c+1]);var g=1==f.length?e.regex.val1pre.test(f):e.regex.val1.test(f);if(!d&&!g){if(g=e.regex.val1.test(a+"0"))return b.buffer[c]=a,b.buffer[++c]="0",{pos:c,c:"0"};if(g=e.regex.val1.test("0"+a))return b.buffer[c]="0",c++,{pos:c}}return g},cardinality:1}]},2:{validator:function(a,b,c,d,e){var f=e.getFrontValue(b.mask,b.buffer,e);-1!=f.indexOf(e.placeholder[0])&&(f="01"+e.separator);var g=e.regex.val2(e.separator).test(f+a);if(!d&&!g&&(a.charAt(1)==e.separator||-1!="-./".indexOf(a.charAt(1)))&&(g=e.regex.val2(e.separator).test(f+"0"+a.charAt(0))))return b.buffer[c-1]="0",{refreshFromBuffer:{start:c-1,end:c},pos:c,c:a.charAt(0)};if(e.mask.indexOf("2")==e.mask.length-1&&g){var h=b.buffer.join("").substr(4,4)+a;if(h!=e.leapday)return!0;var i=parseInt(b.buffer.join("").substr(0,4),10);return i%4===0&&(i%100!==0||i%400===0)}return g},cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){isNaN(b.buffer[c+1])||(a+=b.buffer[c+1]);var f=e.getFrontValue(b.mask,b.buffer,e);-1!=f.indexOf(e.placeholder[0])&&(f="01"+e.separator);var g=1==a.length?e.regex.val2pre(e.separator).test(f+a):e.regex.val2(e.separator).test(f+a);return d||g||!(g=e.regex.val2(e.separator).test(f+"0"+a))?g:(b.buffer[c]="0",c++,{pos:c})},cardinality:1}]},y:{validator:function(a,b,c,d,e){if(e.isInYearRange(a,e.yearrange.minyear,e.yearrange.maxyear)){var f=b.buffer.join("").substr(0,6);if(f!=e.leapday)return!0;var g=parseInt(a,10);return g%4===0&&(g%100!==0||g%400===0)}return!1},cardinality:4,prevalidator:[{validator:function(a,b,c,d,e){var f=e.isInYearRange(a,e.yearrange.minyear,e.yearrange.maxyear);if(!d&&!f){var g=e.determinebaseyear(e.yearrange.minyear,e.yearrange.maxyear,a+"0").toString().slice(0,1);if(f=e.isInYearRange(g+a,e.yearrange.minyear,e.yearrange.maxyear))return b.buffer[c++]=g.charAt(0),{pos:c};if(g=e.determinebaseyear(e.yearrange.minyear,e.yearrange.maxyear,a+"0").toString().slice(0,2),f=e.isInYearRange(g+a,e.yearrange.minyear,e.yearrange.maxyear))return b.buffer[c++]=g.charAt(0),b.buffer[c++]=g.charAt(1),{pos:c}}return f},cardinality:1},{validator:function(a,b,c,d,e){var f=e.isInYearRange(a,e.yearrange.minyear,e.yearrange.maxyear);if(!d&&!f){var g=e.determinebaseyear(e.yearrange.minyear,e.yearrange.maxyear,a).toString().slice(0,2);if(f=e.isInYearRange(a[0]+g[1]+a[1],e.yearrange.minyear,e.yearrange.maxyear))return b.buffer[c++]=g.charAt(1),{pos:c};if(g=e.determinebaseyear(e.yearrange.minyear,e.yearrange.maxyear,a).toString().slice(0,2),e.isInYearRange(g+a,e.yearrange.minyear,e.yearrange.maxyear)){var h=b.buffer.join("").substr(0,6);if(h!=e.leapday)f=!0;else{var i=parseInt(a,10);f=i%4===0&&(i%100!==0||i%400===0)}}else f=!1;if(f)return b.buffer[c-1]=g.charAt(0),b.buffer[c++]=g.charAt(1),b.buffer[c++]=a.charAt(0),{refreshFromBuffer:{start:c-3,end:c},pos:c}}return f},cardinality:2},{validator:function(a,b,c,d,e){return e.isInYearRange(a,e.yearrange.minyear,e.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(b){var c=a.inputmask.escapeRegex.call(this,b);return new RegExp("((0[13-9]|1[012])"+c+"[0-3])|(02"+c+"[0-2])")},val2:function(b){var c=a.inputmask.escapeRegex.call(this,b);return new RegExp("((0[1-9]|1[012])"+c+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+c+"30)|((0[13578]|1[02])"+c+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(b){var c=a(this);if(b.ctrlKey&&b.keyCode==a.inputmask.keyCode.RIGHT){var d=new Date;c.val((d.getMonth()+1).toString()+d.getDate().toString()+d.getFullYear().toString()),c.triggerHandler("setvalue.inputmask")}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyDown:function(b){var c=a(this);if(b.ctrlKey&&b.keyCode==a.inputmask.keyCode.RIGHT){var d=new Date;c.val(d.getFullYear().toString()+(d.getMonth()+1).toString()+d.getDate().toString()),c.triggerHandler("setvalue.inputmask")}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(a,b,c,d,e){if("24"==e.hourFormat&&24==parseInt(a,10))return b.buffer[c-1]="0",b.buffer[c]="0",{refreshFromBuffer:{start:c-1,end:c},c:"0"};var f=e.regex.hrs.test(a);if(!d&&!f&&(a.charAt(1)==e.timeseparator||-1!="-.:".indexOf(a.charAt(1)))&&(f=e.regex.hrs.test("0"+a.charAt(0))))return b.buffer[c-1]="0",b.buffer[c]=a.charAt(0),c++,{refreshFromBuffer:{start:c-2,end:c},pos:c,c:e.timeseparator};if(f&&"24"!==e.hourFormat&&e.regex.hrs24.test(a)){var g=parseInt(a,10);return 24==g?(b.buffer[c+5]="a",b.buffer[c+6]="m"):(b.buffer[c+5]="p",b.buffer[c+6]="m"),g-=12,10>g?(b.buffer[c]=g.toString(),b.buffer[c-1]="0"):(b.buffer[c]=g.toString().charAt(1),b.buffer[c-1]=g.toString().charAt(0)),{refreshFromBuffer:{start:c-1,end:c+6},c:b.buffer[c]}}return f},cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){var f=e.regex.hrspre.test(a);return d||f||!(f=e.regex.hrs.test("0"+a))?f:(b.buffer[c]="0",c++,{pos:c})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){var f=e.regex.mspre.test(a);return d||f||!(f=e.regex.ms.test("0"+a))?f:(b.buffer[c]="0",c++,{pos:c})},cardinality:1}]},t:{validator:function(a,b,c,d,e){return e.regex.ampm.test(a+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}}),a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.definitions,{A:{validator:"[A-Za-z–ê-—è–Å—ë√Ä-√ø¬µ]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Za-z–ê-—è–Å—ë√Ä-√ø¬µ]",cardinality:1,casing:"upper"}}),a.extend(a.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(){return!0},cardinality:8,prevalidator:function(){for(var a=[],b=8,c=0;b>c;c++)a[c]=function(){var a=c;return{validator:function(b,c,d,e,f){if(f.regex["urlpre"+(a+1)]){var g,h=b;a+1-b.length>0&&(h=c.buffer.join("").substring(0,a+1-b.length)+""+h);var i=f.regex["urlpre"+(a+1)].test(h);if(!e&&!i){for(d-=a,g=0;g<f.defaultPrefix.length;g++)c.buffer[d]=f.defaultPrefix[g],d++;for(g=0;g<h.length-1;g++)c.buffer[d]=h[g],d++;return{pos:d}}return i}return!1},cardinality:a}}();return a}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(a,b,c){return c-1>-1&&"."!=b.buffer[c-1]?(a=b.buffer[c-1]+a,a=c-2>-1&&"."!=b.buffer[c-2]?b.buffer[c-2]+a:"0"+a):a="00"+a,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(a)},cardinality:1}}},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(a){return a=a.toLowerCase(),a.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}}),a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.aliases,{numeric:{mask:function(a){function b(b){for(var c="",d=0;d<b.length;d++)c+=a.definitions[b[d]]?"\\"+b[d]:b[d];return c}if(0!==a.repeat&&isNaN(a.integerDigits)&&(a.integerDigits=a.repeat),a.repeat=0,a.groupSeparator==a.radixPoint&&(a.groupSeparator="."==a.radixPoint?",":","==a.radixPoint?".":"")," "===a.groupSeparator&&(a.skipOptionalPartCharacter=void 0),a.autoGroup=a.autoGroup&&""!=a.groupSeparator,a.autoGroup&&("string"==typeof a.groupSize&&isFinite(a.groupSize)&&(a.groupSize=parseInt(a.groupSize)),isFinite(a.integerDigits))){var c=Math.floor(a.integerDigits/a.groupSize),d=a.integerDigits%a.groupSize;a.integerDigits=parseInt(a.integerDigits)+(0==d?c-1:c)}a.placeholder.length>1&&(a.placeholder=a.placeholder.charAt(0)),a.radixFocus=a.radixFocus&&"0"==a.placeholder,a.definitions[";"]=a.definitions["~"];var e=b(a.prefix);return e+="[+]",e+="~{1,"+a.integerDigits+"}",void 0!=a.digits&&(isNaN(a.digits)||parseInt(a.digits)>0)&&(e+=a.digitsOptional?"["+(a.decimalProtect?":":a.radixPoint)+";{"+a.digits+"}]":(a.decimalProtect?":":a.radixPoint)+";{"+a.digits+"}"),""!=a.negationSymbol.back&&(e+="[-]"),e+=b(a.suffix),a.greedy=!1,e},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,groupSeparator:"",radixPoint:".",radixFocus:!0,groupSize:3,autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:void 0,max:void 0,postFormat:function(b,c,d,e){var f=!1;b.length>=e.suffix.length&&b.join("").indexOf(e.suffix)==b.length-e.suffix.length&&(b.length=b.length-e.suffix.length,f=!0),c=c>=b.length?b.length-1:c<e.prefix.length?e.prefix.length:c;var g=!1,h=b[c];if(""==e.groupSeparator||-1!=a.inArray(e.radixPoint,b)&&c>=a.inArray(e.radixPoint,b)||new RegExp("["+a.inputmask.escapeRegex(e.negationSymbol.front)+"+]").test(h)){if(f)for(var i=0,j=e.suffix.length;j>i;i++)b.push(e.suffix.charAt(i));return{pos:c}}var k=b.slice();h==e.groupSeparator&&(k.splice(c--,1),h=k[c]),d?k[c]="?":k.splice(c,0,"?");var l=k.join(""),m=l;if(l.length>0&&e.autoGroup||d&&-1!=l.indexOf(e.groupSeparator)){var n=a.inputmask.escapeRegex(e.groupSeparator);g=0==l.indexOf(e.groupSeparator),l=l.replace(new RegExp(n,"g"),"");var o=l.split(e.radixPoint);if(l=""==e.radixPoint?l:o[0],l!=e.prefix+"?0"&&l.length>=e.groupSize+e.prefix.length)for(var p=new RegExp("([-+]?[\\d?]+)([\\d?]{"+e.groupSize+"})");p.test(l);)l=l.replace(p,"$1"+e.groupSeparator+"$2"),l=l.replace(e.groupSeparator+e.groupSeparator,e.groupSeparator);""!=e.radixPoint&&o.length>1&&(l+=e.radixPoint+o[1])}g=m!=l,b.length=l.length;for(var i=0,j=l.length;j>i;i++)b[i]=l.charAt(i);var q=a.inArray("?",b);if(d?b[q]=h:b.splice(q,1),!g&&f)for(var i=0,j=e.suffix.length;j>i;i++)b.push(e.suffix.charAt(i));return{pos:q,refreshFromBuffer:g,buffer:b}},onBeforeWrite:function(b,c,d,e){if(b&&"blur"==b.type){var f=c.join(""),g=f.replace(e.prefix,"");if(g=g.replace(e.suffix,""),g=g.replace(new RegExp(a.inputmask.escapeRegex(e.groupSeparator),"g"),""),","===e.radixPoint&&(g=g.replace(a.inputmask.escapeRegex(e.radixPoint),".")),isFinite(g)&&isFinite(e.min)&&parseFloat(g)<parseFloat(e.min))return a.extend(!0,{refreshFromBuffer:!0,buffer:(e.prefix+e.min).split("")},e.postFormat((e.prefix+e.min).split(""),0,!0,e));var h=""!=e.radixPoint?c.join("").split(e.radixPoint):[c.join("")],i=h[0].match(e.regex.integerPart(e)),j=2==h.length?h[1].match(e.regex.integerNPart(e)):void 0;!i||i[0]!=e.negationSymbol.front+"0"&&i[0]!=e.negationSymbol.front&&"+"!=i[0]||void 0!=j&&!j[0].match(/^0+$/)||c.splice(i.index,1);var k=a.inArray(e.radixPoint,c);if(-1!=k&&isFinite(e.digits)&&!e.digitsOptional){for(var l=1;l<=e.digits;l++)(void 0==c[k+l]||c[k+l]==e.placeholder.charAt(0))&&(c[k+l]="0");return{refreshFromBuffer:!0,buffer:c}}}if(e.autoGroup){var m=e.postFormat(c,d-1,!0,e);return m.caret=d<=e.prefix.length?m.pos:m.pos+1,m}},regex:{integerPart:function(b){return new RegExp("["+a.inputmask.escapeRegex(b.negationSymbol.front)+"+]?\\d+")},integerNPart:function(b){return new RegExp("[\\d"+a.inputmask.escapeRegex(b.groupSeparator)+"]+")}},signHandler:function(a,b,c,d,e){if(!d&&e.allowMinus&&"-"===a||e.allowPlus&&"+"===a){var f=b.buffer.join("").match(e.regex.integerPart(e));if(f&&f[0].length>0)return b.buffer[f.index]==("-"===a?"+":e.negationSymbol.front)?"-"==a?""!=e.negationSymbol.back?{pos:f.index,c:e.negationSymbol.front,remove:f.index,caret:c,insert:{pos:b.buffer.length-e.suffix.length-1,c:e.negationSymbol.back}}:{pos:f.index,c:e.negationSymbol.front,remove:f.index,caret:c}:""!=e.negationSymbol.back?{pos:f.index,c:"+",remove:[f.index,b.buffer.length-e.suffix.length-1],caret:c}:{pos:f.index,c:"+",remove:f.index,caret:c}:b.buffer[f.index]==("-"===a?e.negationSymbol.front:"+")?"-"==a&&""!=e.negationSymbol.back?{remove:[f.index,b.buffer.length-e.suffix.length-1],caret:c-1}:{remove:f.index,caret:c-1}:"-"==a?""!=e.negationSymbol.back?{pos:f.index,c:e.negationSymbol.front,caret:c+1,insert:{pos:b.buffer.length-e.suffix.length,c:e.negationSymbol.back}}:{pos:f.index,c:e.negationSymbol.front,caret:c+1}:{pos:f.index,c:a,caret:c+1}}return!1},radixHandler:function(b,c,d,e,f){if(!e&&b===f.radixPoint&&f.digits>0){var g=a.inArray(f.radixPoint,c.buffer),h=c.buffer.join("").match(f.regex.integerPart(f));if(-1!=g&&c.validPositions[g])return c.validPositions[g-1]?{caret:g+1}:{pos:h.index,c:h[0],caret:g+1};if(!h||"0"==h[0]&&h.index+1!=d)return c.buffer[h?h.index:d]="0",{pos:(h?h.index:d)+1}}return!1},leadingZeroHandler:function(b,c,d,e,f){var g=c.buffer.join("").match(f.regex.integerNPart(f)),h=a.inArray(f.radixPoint,c.buffer);if(g&&!e&&(-1==h||h>=d))if(0==g[0].indexOf("0")){d<f.prefix.length&&(d=g.index);var i=a.inArray(f.radixPoint,c._buffer),j=c._buffer&&c.buffer.slice(h).join("")==c._buffer.slice(i).join("")||0==parseInt(c.buffer.slice(h+1).join("")),k=c._buffer&&c.buffer.slice(g.index,h).join("")==c._buffer.slice(f.prefix.length,i).join("")||"0"==c.buffer.slice(g.index,h).join("");if(-1==h||j&&k)return c.buffer.splice(g.index,1),d=d>g.index?d-1:g.index,{pos:d,remove:g.index};if(g.index+1==d||"0"==b)return c.buffer.splice(g.index,1),d=g.index,{pos:d,remove:g.index}}else if("0"===b&&d<=g.index&&g[0]!=f.groupSeparator)return!1;return!0},postValidation:function(b,c){var d=!0,e=b.join(""),f=e.replace(c.prefix,"");return f=f.replace(c.suffix,""),f=f.replace(new RegExp(a.inputmask.escapeRegex(c.groupSeparator),"g"),""),","===c.radixPoint&&(f=f.replace(a.inputmask.escapeRegex(c.radixPoint),".")),f=f.replace(new RegExp("^"+a.inputmask.escapeRegex(c.negationSymbol.front)),"-"),f=f.replace(new RegExp(a.inputmask.escapeRegex(c.negationSymbol.back)+"$"),""),isFinite(f)&&isFinite(c.max)&&(d=parseFloat(f)<=parseFloat(c.max)),d},definitions:{"~":{validator:function(b,c,d,e,f){var g=f.signHandler(b,c,d,e,f);if(!g&&(g=f.radixHandler(b,c,d,e,f),!g&&(g=e?new RegExp("[0-9"+a.inputmask.escapeRegex(f.groupSeparator)+"]").test(b):new RegExp("[0-9]").test(b),g===!0&&(g=f.leadingZeroHandler(b,c,d,e,f),g===!0)))){var h=a.inArray(f.radixPoint,c.buffer);g=f.digitsOptional===!1&&d>h&&!e?{pos:d,remove:d}:{pos:d}}return g},cardinality:1,prevalidator:null},"+":{validator:function(a,b,c,d,e){var f=e.signHandler(a,b,c,d,e);return!f&&(d&&e.allowMinus&&a===e.negationSymbol.front||e.allowMinus&&"-"==a||e.allowPlus&&"+"==a)&&(f="-"!=a||(""!=e.negationSymbol.back?{pos:c,c:"-"===a?e.negationSymbol.front:"+",caret:c+1,insert:{pos:b.buffer.length,c:e.negationSymbol.back}}:{pos:c,c:"-"===a?e.negationSymbol.front:"+",caret:c+1})),f},cardinality:1,prevalidator:null,placeholder:""},"-":{validator:function(a,b,c,d,e){var f=e.signHandler(a,b,c,d,e);return!f&&d&&e.allowMinus&&a===e.negationSymbol.back&&(f=!0),f},cardinality:1,prevalidator:null,placeholder:""},":":{validator:function(b,c,d,e,f){var g=f.signHandler(b,c,d,e,f);if(!g){var h="["+a.inputmask.escapeRegex(f.radixPoint)+"]";g=new RegExp(h).test(b),g&&c.validPositions[d]&&c.validPositions[d].match.placeholder==f.radixPoint&&(g={caret:d+1})}return g},cardinality:1,prevalidator:null,placeholder:function(a){return a.radixPoint}}},insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,onUnMask:function(b,c,d){var e=b.replace(d.prefix,"");return e=e.replace(d.suffix,""),e=e.replace(new RegExp(a.inputmask.escapeRegex(d.groupSeparator),"g"),""),d.unmaskAsNumber?(e=e.replace(a.inputmask.escapeRegex.call(this,d.radixPoint),"."),Number(e)):e},isComplete:function(b,c){var d=b.join(""),e=b.slice();if(c.postFormat(e,0,!0,c),e.join("")!=d)return!1;var f=d.replace(c.prefix,"");return f=f.replace(c.suffix,""),f=f.replace(new RegExp(a.inputmask.escapeRegex(c.groupSeparator),"g"),""),","===c.radixPoint&&(f=f.replace(a.inputmask.escapeRegex(c.radixPoint),".")),isFinite(f)},onBeforeMask:function(b,c){if(""!=c.radixPoint&&isFinite(b))b=b.toString().replace(".",c.radixPoint);else{var d=b.match(/,/g),e=b.match(/\./g);e&&d?e.length>d.length?(b=b.replace(/\./g,""),b=b.replace(",",c.radixPoint)):d.length>e.length?(b=b.replace(/,/g,""),b=b.replace(".",c.radixPoint)):b=b.indexOf(".")<b.indexOf(",")?b.replace(/\./g,""):b=b.replace(/,/g,""):b=b.replace(new RegExp(a.inputmask.escapeRegex(c.groupSeparator),"g"),"")}return 0==c.digits&&(-1!=b.indexOf(".")?b=b.substring(0,b.indexOf(".")):-1!=b.indexOf(",")&&(b=b.substring(0,b.indexOf(",")))),b},canClearPosition:function(b,c,d,e,f){var g=b.validPositions[c].input,h=g!=f.radixPoint&&isFinite(g)||c==d||g==f.groupSeparator||g==f.negationSymbol.front||g==f.negationSymbol.back;if(h&&isFinite(g)){var i;if(!e&&b.buffer){i=b.buffer.join("").substr(0,c).match(f.regex.integerNPart(f));var j=c+1,k=null==i||0==parseInt(i[0].replace(new RegExp(a.inputmask.escapeRegex(f.groupSeparator),"g"),""));if(k)for(;b.validPositions[j]&&(b.validPositions[j].input==f.groupSeparator||"0"==b.validPositions[j].input);)delete b.validPositions[j],j++}var l=[];for(var m in b.validPositions)l.push(b.validPositions[m].input);i=l.join("").match(f.regex.integerNPart(f));var n=a.inArray(f.radixPoint,b.buffer);if(i&&(-1==n||n>=c))if(0==i[0].indexOf("0"))h=i.index!=c||-1==n;else{var o=parseInt(i[0].replace(new RegExp(a.inputmask.escapeRegex(f.groupSeparator),"g"),""));-1!=n&&10>o&&"0"==f.placeholder.charAt(0)&&(b.validPositions[c].input="0",b.p=f.prefix.length+1,h=!1)}}return h}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:"0",radixPoint:""}}),a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.aliases,{phone:{url:"phone-codes/phone-codes.js",maskInit:"+pp(pp)pppppppp",countrycode:"",mask:function(b){b.definitions={p:{validator:function(){return!1},cardinality:1},"#":{validator:"[0-9]",cardinality:1}};var c=[];return a.ajax({url:b.url,async:!1,dataType:"json",success:function(a){c=a},error:function(a,c,d){alert(d+" - "+b.url)}}),c=c.sort(function(a,b){return(a.mask||a)<(b.mask||b)?-1:1}),""!=b.countrycode&&(b.maskInit="+"+b.countrycode+b.maskInit.substring(3)),c.splice(0,0,b.maskInit),c},nojumps:!0,nojumpsThreshold:1,onBeforeMask:function(a,b){var c=a.replace(/^0/g,"");return(c.indexOf(b.countrycode)>1||-1==c.indexOf(b.countrycode))&&(c="+"+b.countrycode+c),c}},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",countrycode:"32",nojumpsThreshold:4}}),a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.aliases,{Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(a,b){return new RegExp(b.regex).test(a.join(""))},definitions:{r:{validator:function(b,c,d,e,f){function g(a,b){this.matches=[],this.isGroup=a||!1,this.isQuantifier=b||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function h(){var a,b,c=new g,d=[];for(f.regexTokens=[];a=f.tokenizer.exec(f.regex);)switch(b=a[0],b.charAt(0)){case"(":d.push(new g((!0)));break;case")":var e=d.pop();d.length>0?d[d.length-1].matches.push(e):c.matches.push(e);
break;case"{":case"+":case"*":var h=new g((!1),(!0));b=b.replace(/[{}]/g,"");var i=b.split(","),j=isNaN(i[0])?i[0]:parseInt(i[0]),k=1==i.length?j:isNaN(i[1])?i[1]:parseInt(i[1]);if(h.quantifier={min:j,max:k},d.length>0){var l=d[d.length-1].matches;if(a=l.pop(),!a.isGroup){var e=new g((!0));e.matches.push(a),a=e}l.push(a),l.push(h)}else{if(a=c.matches.pop(),!a.isGroup){var e=new g((!0));e.matches.push(a),a=e}c.matches.push(a),c.matches.push(h)}break;default:d.length>0?d[d.length-1].matches.push(b):c.matches.push(b)}c.matches.length>0&&f.regexTokens.push(c)}function i(b,c){var d=!1;c&&(k+="(",m++);for(var e=0;e<b.matches.length;e++){var f=b.matches[e];if(1==f.isGroup)d=i(f,!0);else if(1==f.isQuantifier){var g=a.inArray(f,b.matches),h=b.matches[g-1],j=k;if(isNaN(f.quantifier.max)){for(;f.repeaterPart&&f.repeaterPart!=k&&f.repeaterPart.length>k.length&&!(d=i(h,!0)););d=d||i(h,!0),d&&(f.repeaterPart=k),k=j+f.quantifier.max}else{for(var l=0,o=f.quantifier.max-1;o>l&&!(d=i(h,!0));l++);k=j+"{"+f.quantifier.min+","+f.quantifier.max+"}"}}else if(void 0!=f.matches)for(var p=0;p<f.length&&!(d=i(f[p],c));p++);else{var q;if("["==f.charAt(0)){q=k,q+=f;for(var r=0;m>r;r++)q+=")";var s=new RegExp("^("+q+")$");d=s.test(n)}else for(var t=0,u=f.length;u>t;t++)if("\\"!=f.charAt(t)){q=k,q+=f.substr(0,t+1),q=q.replace(/\|$/,"");for(var r=0;m>r;r++)q+=")";var s=new RegExp("^("+q+")$");if(d=s.test(n))break}k+=f}if(d)break}return c&&(k+=")",m--),d}null==f.regexTokens&&h();var j=c.buffer.slice(),k="",l=!1,m=0;j.splice(d,0,b);for(var n=j.join(""),o=0;o<f.regexTokens.length;o++){var g=f.regexTokens[o];if(l=i(g,g.isGroup))break}return l},cardinality:1}}}}),a.fn.inputmask}(jQuery),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):window.jQuery)}(function(a){"use strict";var b=0;a.ajaxTransport("iframe",function(c){if(c.async){var d,e,f,g=c.initialIframeSrc||"javascript:false;";return{send:function(h,i){d=a('<form style="display:none;"></form>'),d.attr("accept-charset",c.formAcceptCharset),f=/\?/.test(c.url)?"&":"?","DELETE"===c.type?(c.url=c.url+f+"_method=DELETE",c.type="POST"):"PUT"===c.type?(c.url=c.url+f+"_method=PUT",c.type="POST"):"PATCH"===c.type&&(c.url=c.url+f+"_method=PATCH",c.type="POST"),b+=1,e=a('<iframe src="'+g+'" name="iframe-transport-'+b+'"></iframe>').bind("load",function(){var b,f=a.isArray(c.paramName)?c.paramName:[c.paramName];e.unbind("load").bind("load",function(){var b;try{if(b=e.contents(),!b.length||!b[0].firstChild)throw new Error}catch(a){b=void 0}i(200,"success",{iframe:b}),a('<iframe src="'+g+'"></iframe>').appendTo(d),window.setTimeout(function(){d.remove()},0)}),d.prop("target",e.prop("name")).prop("action",c.url).prop("method",c.type),c.formData&&a.each(c.formData,function(b,c){a('<input type="hidden"/>').prop("name",c.name).val(c.value).appendTo(d)}),c.fileInput&&c.fileInput.length&&"POST"===c.type&&(b=c.fileInput.clone(),c.fileInput.after(function(a){return b[a]}),c.paramName&&c.fileInput.each(function(b){a(this).prop("name",f[b]||c.paramName)}),d.append(c.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),c.fileInput.removeAttr("form")),d.submit(),b&&b.length&&c.fileInput.each(function(c,d){var e=a(b[c]);a(d).prop("name",e.prop("name")).attr("form",e.attr("form")),e.replaceWith(d)})}),d.append(e).appendTo(document.body)},abort:function(){e&&e.unbind("load").prop("src",g),d&&d.remove()}}}}),a.ajaxSetup({converters:{"iframe text":function(b){return b&&a(b[0].body).text()},"iframe json":function(b){return b&&a.parseJSON(a(b[0].body).text())},"iframe html":function(b){return b&&a(b[0].body).html()},"iframe xml":function(b){var c=b&&b[0];return c&&a.isXMLDoc(c)?c:a.parseXML(c.XMLDocument&&c.XMLDocument.xml||a(c.body).html())},"iframe script":function(b){return b&&a.globalEval(a(b[0].body).text())}}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],a):"object"==typeof exports?a(require("jquery"),require("./vendor/jquery.ui.widget")):a(window.jQuery)}(function(a){"use strict";function b(b){var c="dragover"===b;return function(d){d.dataTransfer=d.originalEvent&&d.originalEvent.dataTransfer;var e=d.dataTransfer;e&&a.inArray("Files",e.types)!==-1&&this._trigger(b,a.Event(b,{delegatedEvent:d}))!==!1&&(d.preventDefault(),c&&(e.dropEffect="copy"))}}a.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||a('<input type="file">').prop("disabled")),a.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),a.support.xhrFormDataFileUpload=!!window.FormData,a.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),a.widget("blueimp.fileupload",{options:{dropZone:a(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(b,c){return b=this.messages[b]||b.toString(),c&&a.each(c,function(a,c){b=b.replace("{"+a+"}",c)}),b},formData:function(a){return a.serializeArray()},add:function(b,c){return!b.isDefaultPrevented()&&void((c.autoUpload||c.autoUpload!==!1&&a(this).fileupload("option","autoUpload"))&&c.process().done(function(){c.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:a.support.blobSlice&&function(){var a=this.slice||this.webkitSlice||this.mozSlice;return a.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(a,b,c){var d=a-this.timestamp;return(!this.bitrate||!c||d>c)&&(this.bitrate=(b-this.loaded)*(1e3/d)*8,this.loaded=b,this.timestamp=a),this.bitrate}},_isXHRUpload:function(b){return!b.forceIframeTransport&&(!b.multipart&&a.support.xhrFileUpload||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;return"function"===a.type(b.formData)?b.formData(b.form):a.isArray(b.formData)?b.formData:"object"===a.type(b.formData)?(c=[],a.each(b.formData,function(a,b){c.push({name:a,value:b})}),c):[]},_getTotal:function(b){var c=0;return a.each(b,function(a,b){c+=b.size||1}),c},_initProgressObject:function(b){var c={loaded:0,total:0,bitrate:0};b._progress?a.extend(b._progress,c):b._progress=c},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&delete a._response[b];else a._response={}},_onProgress:function(b,c){if(b.lengthComputable){var d,e=Date.now?Date.now():(new Date).getTime();if(c._time&&c.progressInterval&&e-c._time<c.progressInterval&&b.loaded!==b.total)return;c._time=e,d=Math.floor(b.loaded/b.total*(c.chunkSize||c._progress.total))+(c.uploadedBytes||0),this._progress.loaded+=d-c._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(e,this._progress.loaded,c.bitrateInterval),c._progress.loaded=c.loaded=d,c._progress.bitrate=c.bitrate=c._bitrateTimer.getBitrate(e,d,c.bitrateInterval),this._trigger("progress",a.Event("progress",{delegatedEvent:b}),c),this._trigger("progressall",a.Event("progressall",{delegatedEvent:b}),this._progress)}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();d.upload&&(a(d.upload).bind("progress",function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable,a.loaded=d.loaded,a.total=d.total,c._onProgress(a,b)}),b.xhr=function(){return d})},_isInstanceOf:function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(b){var c,d=this,e=b.files[0],f=b.multipart||!a.support.xhrFileUpload,g="array"===a.type(b.paramName)?b.paramName[0]:b.paramName;b.headers=a.extend({},b.headers),b.contentRange&&(b.headers["Content-Range"]=b.contentRange),f&&!b.blob&&this._isInstanceOf("File",e)||(b.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"'),f?a.support.xhrFormDataFileUpload&&(b.postMessage?(c=this._getFormData(b),b.blob?c.push({name:g,value:b.blob}):a.each(b.files,function(d,e){c.push({name:"array"===a.type(b.paramName)&&b.paramName[d]||g,value:e})})):(d._isInstanceOf("FormData",b.formData)?c=b.formData:(c=new FormData,a.each(this._getFormData(b),function(a,b){c.append(b.name,b.value)})),b.blob?c.append(g,b.blob,e.name):a.each(b.files,function(e,f){(d._isInstanceOf("File",f)||d._isInstanceOf("Blob",f))&&c.append("array"===a.type(b.paramName)&&b.paramName[e]||g,f,f.uploadName||f.name)})),b.data=c):(b.contentType=e.type||"application/octet-stream",b.data=b.blob||e),b.blob=null},_initIframeSettings:function(b){var c=a("<a></a>").prop("href",b.url).prop("host");b.dataType="iframe "+(b.dataType||""),b.formData=this._getFormData(b),b.redirect&&c&&c!==location.host&&b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;return d?a.isArray(d)||(d=[d]):(d=[],c.each(function(){for(var b=a(this),c=b.prop("name")||"files[]",e=(b.prop("files")||[1]).length;e;)d.push(c),e-=1}),d.length||(d=[c.prop("name")||"files[]"])),d},_initFormSettings:function(b){b.form&&b.form.length||(b.form=a(b.fileInput.prop("form")),b.form.length||(b.form=a(this.options.fileInput.prop("form")))),b.paramName=this._getParamName(b),b.url||(b.url=b.form.prop("action")||location.href),b.type=(b.type||"string"===a.type(b.form.prop("method"))&&b.form.prop("method")||"").toUpperCase(),"POST"!==b.type&&"PUT"!==b.type&&"PATCH"!==b.type&&(b.type="POST"),b.formAcceptCharset||(b.formAcceptCharset=b.form.attr("accept-charset"))},_getAJAXSettings:function(b){var c=a.extend({},this.options,b);return this._initFormSettings(c),this._initDataSettings(c),c},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?"rejected":"pending"},_enhancePromise:function(a){return a.success=a.done,a.error=a.fail,a.complete=a.always,a},_getXHRPromise:function(b,c,d){var e=a.Deferred(),f=e.promise();return c=c||this.options.context||f,b===!0?e.resolveWith(c,d):b===!1&&e.rejectWith(c,d),f.abort=e.promise,this._enhancePromise(f)},_addConvenienceMethods:function(b,c){var d=this,e=function(b){return a.Deferred().resolveWith(d,b).promise()};c.process=function(b,f){return(b||f)&&(c._processQueue=this._processQueue=(this._processQueue||e([this])).pipe(function(){return c.errorThrown?a.Deferred().rejectWith(d,[c]).promise():e(arguments)}).pipe(b,f)),this._processQueue||e([this])},c.submit=function(){return"pending"!==this.state()&&(c.jqXHR=this.jqXHR=d._trigger("submit",a.Event("submit",{delegatedEvent:b}),this)!==!1&&d._onSend(b,this)),this.jqXHR||d._getXHRPromise()},c.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",d._trigger("fail",null,this),d._getXHRPromise(!1))},c.state=function(){return this.jqXHR?d._getDeferredState(this.jqXHR):this._processQueue?d._getDeferredState(this._processQueue):void 0},c.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===d._getDeferredState(this._processQueue)},c.progress=function(){return this._progress},c.response=function(){return this._response}},_getUploadedBytes:function(a){var b=a.getResponseHeader("Range"),c=b&&b.split("-"),d=c&&c.length>1&&parseInt(c[1],10);return d&&d+1},_chunkedUpload:function(b,c){b.uploadedBytes=b.uploadedBytes||0;var d,e,f=this,g=b.files[0],h=g.size,i=b.uploadedBytes,j=b.maxChunkSize||h,k=this._blobSlice,l=a.Deferred(),m=l.promise();return!(!(this._isXHRUpload(b)&&k&&(i||j<h))||b.data)&&(!!c||(i>=h?(g.error=b.i18n("uploadedBytes"),this._getXHRPromise(!1,b.context,[null,"error",g.error])):(e=function(){var c=a.extend({},b),m=c._progress.loaded;c.blob=k.call(g,i,i+j,g.type),c.chunkSize=c.blob.size,c.contentRange="bytes "+i+"-"+(i+c.chunkSize-1)+"/"+h,f._initXHRData(c),f._initProgressListener(c),d=(f._trigger("chunksend",null,c)!==!1&&a.ajax(c)||f._getXHRPromise(!1,c.context)).done(function(d,g,j){i=f._getUploadedBytes(j)||i+c.chunkSize,m+c.chunkSize-c._progress.loaded&&f._onProgress(a.Event("progress",{lengthComputable:!0,loaded:i-c.uploadedBytes,total:i-c.uploadedBytes}),c),b.uploadedBytes=c.uploadedBytes=i,c.result=d,c.textStatus=g,c.jqXHR=j,f._trigger("chunkdone",null,c),f._trigger("chunkalways",null,c),i<h?e():l.resolveWith(c.context,[d,g,j])}).fail(function(a,b,d){c.jqXHR=a,c.textStatus=b,c.errorThrown=d,f._trigger("chunkfail",null,c),f._trigger("chunkalways",null,c),l.rejectWith(c.context,[a,b,d])})},this._enhancePromise(m),m.abort=function(){return d.abort()},e(),m)))},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(b),this._initProgressObject(b),b._progress.loaded=b.loaded=b.uploadedBytes||0,b._progress.total=b.total=this._getTotal(b.files)||1,b._progress.bitrate=b.bitrate=0,this._active+=1,this._progress.loaded+=b.loaded,this._progress.total+=b.total},_onDone:function(b,c,d,e){var f=e._progress.total,g=e._response;e._progress.loaded<f&&this._onProgress(a.Event("progress",{lengthComputable:!0,loaded:f,total:f}),e),g.result=e.result=b,g.textStatus=e.textStatus=c,g.jqXHR=e.jqXHR=d,this._trigger("done",null,e)},_onFail:function(a,b,c,d){var e=d._response;d.recalculateProgress&&(this._progress.loaded-=d._progress.loaded,this._progress.total-=d._progress.total),e.jqXHR=d.jqXHR=a,e.textStatus=d.textStatus=b,e.errorThrown=d.errorThrown=c,this._trigger("fail",null,d)},_onAlways:function(a,b,c,d){this._trigger("always",null,d)},_onSend:function(b,c){c.submit||this._addConvenienceMethods(b,c);var d,e,f,g,h=this,i=h._getAJAXSettings(c),j=function(){return h._sending+=1,i._bitrateTimer=new h._BitrateTimer,d=d||((e||h._trigger("send",a.Event("send",{delegatedEvent:b}),i)===!1)&&h._getXHRPromise(!1,i.context,e)||h._chunkedUpload(i)||a.ajax(i)).done(function(a,b,c){h._onDone(a,b,c,i)}).fail(function(a,b,c){h._onFail(a,b,c,i)}).always(function(a,b,c){if(h._onAlways(a,b,c,i),h._sending-=1,h._active-=1,i.limitConcurrentUploads&&i.limitConcurrentUploads>h._sending)for(var d=h._slots.shift();d;){if("pending"===h._getDeferredState(d)){d.resolve();break}d=h._slots.shift()}0===h._active&&h._trigger("stop")})};return this._beforeSend(b,i),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(f=a.Deferred(),this._slots.push(f),g=f.pipe(j)):(this._sequence=this._sequence.pipe(j,j),g=this._sequence),g.abort=function(){return e=[void 0,"abort","abort"],d?d.abort():(f&&f.rejectWith(i.context,e),j())},this._enhancePromise(g)):j()},_onAdd:function(b,c){var d,e,f,g,h=this,i=!0,j=a.extend({},this.options,c),k=c.files,l=k.length,m=j.limitMultiFileUploads,n=j.limitMultiFileUploadSize,o=j.limitMultiFileUploadSizeOverhead,p=0,q=this._getParamName(j),r=0;if(!l)return!1;if(n&&void 0===k[0].size&&(n=void 0),(j.singleFileUploads||m||n)&&this._isXHRUpload(j))if(j.singleFileUploads||n||!m)if(!j.singleFileUploads&&n)for(f=[],d=[],g=0;g<l;g+=1)p+=k[g].size+o,(g+1===l||p+k[g+1].size+o>n||m&&g+1-r>=m)&&(f.push(k.slice(r,g+1)),e=q.slice(r,g+1),e.length||(e=q),d.push(e),r=g+1,p=0);else d=q;else for(f=[],d=[],g=0;g<l;g+=m)f.push(k.slice(g,g+m)),e=q.slice(g,g+m),e.length||(e=q),d.push(e);else f=[k],d=[q];return c.originalFiles=k,a.each(f||k,function(e,g){var j=a.extend({},c);return j.files=f?g:[g],j.paramName=d[e],h._initResponseObject(j),h._initProgressObject(j),h._addConvenienceMethods(b,j),i=h._trigger("add",a.Event("add",{delegatedEvent:b}),j)}),i},_replaceFileInput:function(b){var c=b.fileInput,d=c.clone(!0),e=c.is(document.activeElement);b.fileInputClone=d,a("<form></form>").append(d)[0].reset(),c.after(d).detach(),e&&d.focus(),a.cleanData(c.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(a,b){return b===c[0]?d[0]:b}),c[0]===this.element[0]&&(this.element=d)},_handleFileTreeEntry:function(b,c){var d,e=this,f=a.Deferred(),g=function(a){a&&!a.entry&&(a.entry=b),f.resolve([a])},h=function(a){e._handleFileTreeEntries(a,c+b.name+"/").done(function(a){f.resolve(a)}).fail(g)},i=function(){d.readEntries(function(a){a.length?(j=j.concat(a),i()):h(j)},g)},j=[];return c=c||"",b.isFile?b._file?(b._file.relativePath=c,f.resolve(b._file)):b.file(function(a){a.relativePath=c,f.resolve(a)},g):b.isDirectory?(d=b.createReader(),i()):f.resolve([]),f.promise()},_handleFileTreeEntries:function(b,c){var d=this;return a.when.apply(a,a.map(b,function(a){return d._handleFileTreeEntry(a,c)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(b){b=b||{};var c=b.items;return c&&c.length&&(c[0].webkitGetAsEntry||c[0].getAsEntry)?this._handleFileTreeEntries(a.map(c,function(a){var b;return a.webkitGetAsEntry?(b=a.webkitGetAsEntry(),b&&(b._file=a.getAsFile()),b):a.getAsEntry()})):a.Deferred().resolve(a.makeArray(b.files)).promise()},_getSingleFileInputFiles:function(b){b=a(b);var c,d,e=b.prop("webkitEntries")||b.prop("entries");if(e&&e.length)return this._handleFileTreeEntries(e);if(c=a.makeArray(b.prop("files")),c.length)void 0===c[0].name&&c[0].fileName&&a.each(c,function(a,b){b.name=b.fileName,b.size=b.fileSize});else{if(d=b.prop("value"),!d)return a.Deferred().resolve([]).promise();c=[{name:d.replace(/^.*\\/,"")}]}return a.Deferred().resolve(c).promise()},_getFileInputFiles:function(b){return b instanceof a&&1!==b.length?a.when.apply(a,a.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(b)},_onChange:function(b){var c=this,d={fileInput:a(b.target),form:a(b.target.form)};this._getFileInputFiles(d.fileInput).always(function(e){d.files=e,c.options.replaceFileInput&&c._replaceFileInput(d),c._trigger("change",a.Event("change",{delegatedEvent:b}),d)!==!1&&c._onAdd(b,d)})},_onPaste:function(b){var c=b.originalEvent&&b.originalEvent.clipboardData&&b.originalEvent.clipboardData.items,d={files:[]};c&&c.length&&(a.each(c,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&d.files.push(c)}),this._trigger("paste",a.Event("paste",{delegatedEvent:b}),d)!==!1&&this._onAdd(b,d))},_onDrop:function(b){b.dataTransfer=b.originalEvent&&b.originalEvent.dataTransfer;var c=this,d=b.dataTransfer,e={};d&&d.files&&d.files.length&&(b.preventDefault(),this._getDroppedFiles(d).always(function(d){e.files=d,c._trigger("drop",a.Event("drop",{delegatedEvent:b}),e)!==!1&&c._onAdd(b,e)}))},_onDragOver:b("dragover"),_onDragEnter:b("dragenter"),_onDragLeave:b("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),a.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(b,c){var d=a.inArray(b,this._specialOptions)!==-1;d&&this._destroyEventHandlers(),this._super(b,c),d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var b=this.options;void 0===b.fileInput?b.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):b.fileInput instanceof a||(b.fileInput=a(b.fileInput)),b.dropZone instanceof a||(b.dropZone=a(b.dropZone)),b.pasteZone instanceof a||(b.pasteZone=a(b.pasteZone))},_getRegExp:function(a){var b=a.split("/"),c=b.pop();return b.shift(),new RegExp(b.join("/"),c)},_isRegExpOption:function(b,c){return"url"!==b&&"string"===a.type(c)&&/^\/.*\/[igm]{0,3}$/.test(c)},_initDataAttributes:function(){var b=this,c=this.options,d=this.element.data();a.each(this.element[0].attributes,function(a,e){var f,g=e.name.toLowerCase();/^data-/.test(g)&&(g=g.slice(5).replace(/-[a-z]/g,function(a){return a.charAt(1).toUpperCase()}),f=d[g],b._isRegExpOption(g,f)&&(f=b._getRegExp(f)),c[g]=f)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(b){var c=this;b&&!this.options.disabled&&(b.fileInput&&!b.files?this._getFileInputFiles(b.fileInput).always(function(a){b.files=a,c._onAdd(null,b)}):(b.files=a.makeArray(b.files),this._onAdd(null,b)))},send:function(b){if(b&&!this.options.disabled){if(b.fileInput&&!b.files){var c,d,e=this,f=a.Deferred(),g=f.promise();return g.abort=function(){return d=!0,c?c.abort():(f.reject(null,"abort","abort"),g)},this._getFileInputFiles(b.fileInput).always(function(a){if(!d){if(!a.length)return void f.reject();b.files=a,c=e._onSend(null,b),c.then(function(a,b,c){f.resolve(a,b,c)},function(a,b,c){f.reject(a,b,c)})}}),this._enhancePromise(g)}if(b.files=a.makeArray(b.files),b.files.length)return this._onSend(null,b)}return this._getXHRPromise(!1,b&&b.context)}})}),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(a){this.el=a,this.dragleave=b(this.dragleave,this),this.dragenter=b(this.dragenter,this),this.supportsEventConstructors()&&(this.first=!1,this.second=!1,this.el.addEventListener("dragenter",this.dragenter,!1),this.el.addEventListener("dragleave",this.dragleave,!1))}return a.prototype.dragenter=function(a){return this.first?this.second=!0:(this.first=!0,this.el.dispatchEvent(new CustomEvent("dragster:enter",{bubbles:!0,cancelable:!0,detail:{dataTransfer:a.dataTransfer}})))},a.prototype.dragleave=function(a){if(this.second?this.second=!1:this.first&&(this.first=!1),!this.first&&!this.second)return this.el.dispatchEvent(new CustomEvent("dragster:leave",{bubbles:!0,cancelable:!0,detail:{dataTransfer:a.dataTransfer}}))},a.prototype.removeListeners=function(){return this.el.removeEventListener("dragenter",this.dragenter,!1),this.el.removeEventListener("dragleave",this.dragleave,!1)},a.prototype.supportsEventConstructors=function(){try{new CustomEvent("z")}catch(a){return!1}return!0},a.prototype.reset=function(){return this.first=!1,this.second=!1},a}(),"undefined"==typeof module?window.Dragster=a:module.exports=a}.call(this),window="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},document=window.document||{},function(a,b){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],a):a(b.jQuery)}(function(a){"use strict";function b(a){G?a():H.push(a)}function c(b,c,d){var e=!0,f=1;if(c){c=c.toLowerCase();do{var g=1==f?"@"+c:c;E[b.id][g]&&E[b.id][g].length&&a.each(E[b.id][g],function(a,c){return e=c.apply(b,d||[])!==!1})}while(e&&f--)}return e}function d(b,c,d,e){e=e||function(b,c){return a(c.currentTarget)},a.each(d,function(f,g){f=a.isArray(d)?g:f,(F[b.id][g]||(F[b.id][g]=[])).push([c,f,e])})}function e(a,b,c){var d,e=G.imageType;d="svg"==e?G.imagePathSVG:G.imagePathPNG;var f="";c&&(f=c.substr(1,c.length-2).replace(/_/g," ").replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}));var g="";return b.uc_base&&L>4?(g=b.uc_base,b=b.uc_output.toUpperCase()):g=b,a=a.replace("{name}",c||"").replace("{friendlyName}",f).replace("{img}",d+(L<2?g.toUpperCase():g)+"."+e).replace("{uni}",b),a=c?a.replace("{alt}",G.shortnameToUnicode(c)):a.replace("{alt}",G.convert(b))}function f(a,b,c){return a.replace(/:?\+?[\w_\-]+:?/g,function(a){a=":"+a.replace(/:$/,"").replace(/^:/,"")+":";var d=G.emojioneList[a];return d?L>4?e(b,d,a):(L>3&&(d=d.unicode),e(b,d[d.length-1],a)):c?"":a})}function g(a){var b,c;if(window.getSelection){if(b=window.getSelection(),b.getRangeAt&&b.rangeCount){c=b.getRangeAt(0),c.deleteContents();var d=document.createElement("div");d.innerHTML=a;for(var e,f,g=document.createDocumentFragment();e=d.firstChild;)f=g.appendChild(e);c.insertNode(g),f&&(c=c.cloneRange(),c.setStartAfter(f),c.collapse(!0),b.removeAllRanges(),b.addRange(c))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(a)}function h(){return window.emojioneVersion||"3.1.2"}function i(a){return"object"==typeof a}function j(a){var b;return a.cacheBustParam?(b=a.cacheBustParam,i(a.jsEscapeMap)?"?v=1.2.4"===b?"2.0.0":"?v=2.0.1"===b?"2.1.0":"?v=2.1.1"===b?"2.1.1":"?v=2.1.2"===b?"2.1.2":"?v=2.1.3"===b?"2.1.3":"?v=2.1.4"===b?"2.1.4":"2.2.7":"1.5.2"):a.emojiVersion}function k(a){switch(a){case"1.5.2":return 0;case"2.0.0":return 1;case"2.1.0":case"2.1.1":return 2;case"2.1.2":return 3;case"2.1.3":case"2.1.4":case"2.2.7":return 4;case"3.0.1":case"3.0.2":case"3.0.3":case"3.0":return 5;case"3.1.0":case"3.1.1":case"3.1.2":case"3.1":default:return 6}}function l(){if(a.fn.emojioneArea&&a.fn.emojioneArea.defaults)return a.fn.emojioneArea.defaults;var b={attributes:{dir:"ltr",spellcheck:!1,autocomplete:"off",autocorrect:"off",autocapitalize:"off"},search:!0,placeholder:null,emojiPlaceholder:":smiley:",searchPlaceholder:"SEARCH",container:null,hideSource:!0,shortnames:!0,sprite:!0,pickerPosition:"top",filtersPosition:"top",searchPosition:"top",hidePickerOnBlur:!0,buttonTitle:"Use the TAB key to insert emoji faster",tones:!0,tonesStyle:"bullet",inline:null,saveEmojisAs:"unicode",shortcuts:!0,autocomplete:!0,autocompleteTones:!1,standalone:!1,useInternalCDN:!0,imageType:"png",recentEmojis:!0,textcomplete:{maxCount:15,placement:null}},c=k(G?j(G):h());return c>4?b.filters={tones:{title:"Diversity",emoji:"open_hands raised_hands palms_up_together clap pray thumbsup thumbsdown punch fist left_facing_fist right_facing_fist fingers_crossed v metal love_you_gesture ok_hand point_left point_right point_up_2 point_down point_up raised_hand raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie nail_care ear nose baby boy girl man woman blond-haired_woman blond-haired_man older_man older_woman man_with_chinese_cap woman_wearing_turban man_wearing_turban woman_police_officer man_police_officer woman_construction_worker man_construction_worker woman_guard man_guard woman_detective man_detective woman_health_worker man_health_worker woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer woman_teacher man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist woman_office_worker man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist man_artist woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman breast_feeding woman_bowing man_bowing man_tipping_hand woman_tipping_hand man_gesturing_no woman_gesturing_no man_gesturing_ok woman_gesturing_ok man_raising_hand woman_raising_hand woman_facepalming man_facepalming woman_shrugging man_shrugging man_pouting woman_pouting man_frowning woman_frowning man_getting_haircut woman_getting_haircut man_getting_face_massage woman_getting_face_massage man_in_business_suit_levitating dancer man_dancing woman_walking man_walking woman_running man_running adult child older_adult bearded_person woman_with_headscarf woman_mage man_mage woman_fairy man_fairy woman_vampire man_vampire mermaid merman woman_elf man_elf snowboarder woman_lifting_weights man_lifting_weights woman_cartwheeling man_cartwheeling woman_bouncing_ball man_bouncing_ball woman_playing_handball man_playing_handball woman_golfing man_golfing woman_surfing man_surfing woman_swimming man_swimming woman_playing_water_polo man_playing_water_polo woman_rowing_boat man_rowing_boat horse_racing woman_biking man_biking woman_mountain_biking man_mountain_biking woman_juggling man_juggling woman_in_steamy_room man_in_steamy_room woman_climbing man_climbing woman_in_lotus_position man_in_lotus_position bath person_in_bed"},recent:{icon:"clock3",title:"Recent",emoji:""},smileys_people:{icon:"yum",title:"Smileys & People",emoji:"grinning smiley smile grin laughing sweat_smile joy rofl relaxed blush innocent slight_smile upside_down wink relieved crazy_face star_struck heart_eyes kissing_heart kissing kissing_smiling_eyes kissing_closed_eyes yum stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue money_mouth hugging nerd sunglasses cowboy smirk unamused disappointed pensive worried face_with_raised_eyebrow face_with_monocle confused slight_frown frowning2 persevere confounded tired_face weary triumph angry rage face_with_symbols_over_mouth no_mouth neutral_face expressionless hushed frowning anguished open_mouth astonished dizzy_face exploding_head flushed scream fearful cold_sweat cry disappointed_relieved drooling_face sob sweat sleepy sleeping rolling_eyes thinking shushing_face face_with_hand_over_mouth lying_face grimacing zipper_mouth face_vomiting nauseated_face sneezing_face mask thermometer_face head_bandage smiling_imp imp japanese_ogre japanese_goblin poop ghost skull skull_crossbones alien space_invader robot jack_o_lantern clown smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face pouting_cat open_hands raised_hands palms_up_together clap pray handshake thumbsup thumbsdown punch fist left_facing_fist right_facing_fist fingers_crossed v metal love_you_gesture ok_hand point_left point_right point_up_2 point_down point_up raised_hand raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie nail_care ring lipstick kiss lips tongue ear nose footprints eye eyes speaking_head bust_in_silhouette busts_in_silhouette baby boy girl man woman blond-haired_woman blond_haired_man older_man older_woman man_with_chinese_cap woman_wearing_turban man_wearing_turban woman_police_officer police_officer woman_construction_worker construction_worker woman_guard guard woman_detective detective woman_health_worker man_health_worker woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer woman_teacher man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist woman_office_worker man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist man_artist woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman breast_feeding woman_bowing man_bowing woman_tipping_hand man_tipping_hand woman_gesturing_no man_gesturing_no woman_gesturing_ok man_gesturing_ok woman_raising_hand man_raising_hand woman_facepalming man_facepalming woman_shrugging man_shrugging woman_pouting man_pouting woman_frowning man_frowning woman_getting_haircut man_getting_haircut woman_getting_face_massage man_getting_face_massage man_in_business_suit_levitating dancer man_dancing women_with_bunny_ears_partying men_with_bunny_ears_partying woman_walking man_walking woman_running man_running couple two_women_holding_hands two_men_holding_hands couple_with_heart couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb family_mwbb family_mwgg family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb family_mmbb family_mmgg family_woman_boy family_woman_girl family_woman_girl_boy family_woman_boy_boy family_woman_girl_girl family_man_boy family_man_girl family_man_girl_boy family_man_boy_boy family_man_girl_girl bearded_person woman_with_headscarf woman_mage man_mage woman_fairy man_fairy woman_vampire man_vampire mermaid merman woman_elf man_elf woman_genie man_genie woman_zombie man_zombie womans_clothes shirt jeans necktie dress bikini kimono high_heel sandal boot mans_shoe athletic_shoe womans_hat tophat mortar_board crown helmet_with_cross school_satchel pouch purse handbag briefcase eyeglasses dark_sunglasses closed_umbrella umbrella2 brain billed_cap scarf gloves coat socks "
},animals_nature:{icon:"hamster",title:"Animals & Nature",emoji:"dog cat mouse hamster rabbit fox bear panda_face koala tiger lion_face cow pig pig_nose frog monkey_face see_no_evil hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick hatching_chick hatched_chick duck eagle owl bat wolf boar horse unicorn bee bug butterfly snail shell beetle ant spider spider_web turtle snake lizard scorpion crab squid octopus shrimp tropical_fish fish blowfish dolphin shark whale whale2 crocodile leopard tiger2 water_buffalo ox cow2 deer dromedary_camel camel elephant rhino gorilla racehorse pig2 goat ram sheep dog2 poodle cat2 rooster turkey dove rabbit2 mouse2 rat chipmunk dragon giraffe zebra hedgehog sauropod t_rex cricket dragon_face feet cactus christmas_tree evergreen_tree deciduous_tree palm_tree seedling herb shamrock four_leaf_clover bamboo tanabata_tree leaves fallen_leaf maple_leaf mushroom ear_of_rice bouquet tulip rose wilted_rose sunflower blossom cherry_blossom hibiscus earth_americas earth_africa earth_asia full_moon waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face sun_with_face first_quarter_moon_with_face last_quarter_moon_with_face crescent_moon dizzy star star2 sparkles zap fire boom comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud rainbow cloud cloud_rain thunder_cloud_rain cloud_lightning cloud_snow snowman2 snowman snowflake wind_blowing_face dash cloud_tornado fog ocean droplet sweat_drops umbrella "},food_drink:{icon:"pizza",title:"Food & Drink",emoji:"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach pineapple kiwi avocado tomato eggplant cucumber carrot corn hot_pepper potato sweet_potato chestnut peanuts honey_pot croissant bread french_bread cheese egg cooking bacon pancakes fried_shrimp poultry_leg meat_on_bone pizza hotdog hamburger fries stuffed_flatbread taco burrito salad shallow_pan_of_food spaghetti ramen stew fish_cake sushi bento curry rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard lollipop candy chocolate_bar popcorn doughnut cookie milk baby_bottle coffee tea sake beer beers champagne_glass wine_glass tumbler_glass cocktail tropical_drink champagne spoon fork_and_knife fork_knife_plate dumpling fortune_cookie takeout_box chopsticks bowl_with_spoon cup_with_straw coconut broccoli pie pretzel cut_of_meat sandwich canned_food"},activity:{icon:"basketball",title:"Activity",emoji:"soccer basketball football baseball tennis volleyball rugby_football 8ball ping_pong badminton goal hockey field_hockey cricket_game golf bow_and_arrow fishing_pole_and_fish boxing_glove martial_arts_uniform ice_skate ski skier snowboarder woman_lifting_weights man_lifting_weights person_fencing women_wrestling men_wrestling woman_cartwheeling man_cartwheeling woman_bouncing_ball man_bouncing_ball woman_playing_handball man_playing_handball woman_golfing man_golfing woman_surfing man_surfing woman_swimming man_swimming woman_playing_water_polo man_playing_water_polo woman_rowing_boat man_rowing_boat horse_racing woman_biking man_biking woman_mountain_biking man_mountain_biking woman_in_steamy_room man_in_steamy_room woman_climbing man_climbing woman_in_lotus_position man_in_lotus_position running_shirt_with_sash medal military_medal first_place second_place third_place trophy rosette reminder_ribbon ticket tickets circus_tent woman_juggling man_juggling performing_arts art clapper microphone headphones musical_score musical_keyboard drum saxophone trumpet guitar violin game_die dart bowling video_game slot_machine sled curling_stone "},travel_places:{icon:"rocket",title:"Travel & Places",emoji:"red_car taxi blue_car bus trolleybus race_car police_car ambulance fire_engine minibus truck articulated_lorry tractor scooter bike motor_scooter motorcycle rotating_light oncoming_police_car oncoming_bus oncoming_automobile oncoming_taxi aerial_tramway mountain_cableway suspension_railway railway_car train mountain_railway monorail bullettrain_side bullettrain_front light_rail steam_locomotive train2 metro tram station helicopter airplane_small airplane airplane_departure airplane_arriving rocket satellite_orbital seat canoe sailboat motorboat speedboat cruise_ship ferry ship anchor construction fuelpump busstop vertical_traffic_light traffic_light map moyai statue_of_liberty fountain tokyo_tower european_castle japanese_castle stadium ferris_wheel roller_coaster carousel_horse beach_umbrella beach island mountain mountain_snow mount_fuji volcano desert camping tent railway_track motorway construction_site factory house house_with_garden homes house_abandoned office department_store post_office european_post_office hospital bank hotel convenience_store school love_hotel wedding classical_building church mosque synagogue kaaba shinto_shrine japan rice_scene park sunrise sunrise_over_mountains stars sparkler fireworks city_sunset city_dusk cityscape night_with_stars milky_way bridge_at_night foggy flying_saucer"},objects:{icon:"bulb",title:"Objects",emoji:"watch iphone calling computer keyboard desktop printer mouse_three_button trackball joystick compression minidisc floppy_disk cd dvd vhs camera camera_with_flash video_camera movie_camera projector film_frames telephone_receiver telephone pager fax tv radio microphone2 level_slider control_knobs stopwatch timer alarm_clock clock hourglass hourglass_flowing_sand satellite battery electric_plug bulb flashlight candle wastebasket oil money_with_wings dollar yen euro pound moneybag credit_card gem scales wrench hammer hammer_pick tools pick nut_and_bolt gear chains gun bomb knife dagger crossed_swords shield smoking coffin urn amphora crystal_ball prayer_beads barber alembic telescope microscope hole pill syringe thermometer toilet potable_water shower bathtub bath bellhop key key2 door couch bed sleeping_accommodation frame_photo shopping_bags shopping_cart gift balloon flags ribbon confetti_ball tada dolls izakaya_lantern wind_chime envelope envelope_with_arrow incoming_envelope e-mail love_letter inbox_tray outbox_tray package label mailbox_closed mailbox mailbox_with_mail mailbox_with_no_mail postbox postal_horn scroll page_with_curl page_facing_up bookmark_tabs bar_chart chart_with_upwards_trend chart_with_downwards_trend notepad_spiral calendar_spiral calendar date card_index card_box ballot_box file_cabinet clipboard file_folder open_file_folder dividers newspaper2 newspaper notebook notebook_with_decorative_cover ledger closed_book green_book blue_book orange_book books book bookmark link paperclip paperclips triangular_ruler straight_ruler pushpin round_pushpin scissors pen_ballpoint pen_fountain black_nib paintbrush crayon pencil pencil2 mag mag_right lock_with_ink_pen closed_lock_with_key lock unlock"},symbols:{icon:"heartpulse",title:"Symbols",emoji:"heart orange_heart yellow_heart green_heart blue_heart purple_heart black_heart broken_heart heart_exclamation two_hearts revolving_hearts heartbeat heartpulse sparkling_heart cupid gift_heart heart_decoration peace cross star_and_crescent om_symbol wheel_of_dharma star_of_david six_pointed_star menorah yin_yang orthodox_cross place_of_worship ophiuchus aries taurus gemini cancer leo virgo libra scorpius sagittarius capricorn aquarius pisces id atom accept radioactive biohazard mobile_phone_off vibration_mode u6709 u7121 u7533 u55b6 u6708 eight_pointed_black_star vs white_flower ideograph_advantage secret congratulations u5408 u6e80 u5272 u7981 a b ab cl o2 sos x o octagonal_sign no_entry name_badge no_entry_sign 100 anger hotsprings no_pedestrians do_not_litter no_bicycles non-potable_water underage no_mobile_phones no_smoking exclamation grey_exclamation question grey_question bangbang interrobang low_brightness high_brightness part_alternation_mark warning children_crossing trident fleur-de-lis beginner recycle white_check_mark u6307 chart sparkle eight_spoked_asterisk negative_squared_cross_mark globe_with_meridians diamond_shape_with_a_dot_inside m cyclone zzz atm wc wheelchair parking u7a7a sa passport_control customs baggage_claim left_luggage mens womens baby_symbol restroom put_litter_in_its_place cinema signal_strength koko symbols information_source abc abcd capital_abcd ng ok up cool new free zero one two three four five six seven eight nine keycap_ten 1234 hash asterisk arrow_forward pause_button play_pause stop_button record_button eject track_next track_previous fast_forward rewind arrow_double_up arrow_double_down arrow_backward arrow_up_small arrow_down_small arrow_right arrow_left arrow_up arrow_down arrow_upper_right arrow_lower_right arrow_lower_left arrow_upper_left arrow_up_down left_right_arrow arrow_right_hook leftwards_arrow_with_hook arrow_heading_up arrow_heading_down twisted_rightwards_arrows repeat repeat_one arrows_counterclockwise arrows_clockwise musical_note notes heavy_plus_sign heavy_minus_sign heavy_division_sign heavy_multiplication_x heavy_dollar_sign currency_exchange tm copyright registered wavy_dash curly_loop loop end back on top soon heavy_check_mark ballot_box_with_check radio_button white_circle black_circle red_circle blue_circle small_red_triangle small_red_triangle_down small_orange_diamond small_blue_diamond large_orange_diamond large_blue_diamond white_square_button black_square_button black_small_square white_small_square black_medium_small_square white_medium_small_square black_medium_square white_medium_square black_large_square white_large_square speaker mute sound loud_sound bell no_bell mega loudspeaker speech_left eye_in_speech_bubble speech_balloon thought_balloon anger_right spades clubs hearts diamonds black_joker flower_playing_cards mahjong clock1 clock2 clock3 clock4 clock5 clock6 clock7 clock8 clock9 clock10 clock11 clock12 clock130 clock230 clock330 clock430 clock530 clock630 clock730 clock830 clock930 clock1030 clock1130 clock1230"},flags:{icon:"flag_gb",title:"Flags",emoji:"flag_white flag_black checkered_flag triangular_flag_on_post rainbow_flag flag_af flag_ax flag_al flag_dz flag_as flag_ad flag_ao flag_ai flag_aq flag_ag flag_ar flag_am flag_aw flag_au flag_at flag_az flag_bs flag_bh flag_bd flag_bb flag_by flag_be flag_bz flag_bj flag_bm flag_bt flag_bo flag_ba flag_bw flag_br flag_io flag_vg flag_bn flag_bg flag_bf flag_bi flag_kh flag_cm flag_ca flag_ic flag_cv flag_bq flag_ky flag_cf flag_td flag_cl flag_cn flag_cx flag_cc flag_co flag_km flag_cg flag_cd flag_ck flag_cr flag_ci flag_hr flag_cu flag_cw flag_cy flag_cz flag_dk flag_dj flag_dm flag_do flag_ec flag_eg flag_sv flag_gq flag_er flag_ee flag_et flag_eu flag_fk flag_fo flag_fj flag_fi flag_fr flag_gf flag_pf flag_tf flag_ga flag_gm flag_ge flag_de flag_gh flag_gi flag_gr flag_gl flag_gd flag_gp flag_gu flag_gt flag_gg flag_gn flag_gw flag_gy flag_ht flag_hn flag_hk flag_hu flag_is flag_in flag_id flag_ir flag_iq flag_ie flag_im flag_il flag_it flag_jm flag_jp crossed_flags flag_je flag_jo flag_kz flag_ke flag_ki flag_xk flag_kw flag_kg flag_la flag_lv flag_lb flag_ls flag_lr flag_ly flag_li flag_lt flag_lu flag_mo flag_mk flag_mg flag_mw flag_my flag_mv flag_ml flag_mt flag_mh flag_mq flag_mr flag_mu flag_yt flag_mx flag_fm flag_md flag_mc flag_mn flag_me flag_ms flag_ma flag_mz flag_mm flag_na flag_nr flag_np flag_nl flag_nc flag_nz flag_ni flag_ne flag_ng flag_nu flag_nf flag_kp flag_mp flag_no flag_om flag_pk flag_pw flag_ps flag_pa flag_pg flag_py flag_pe flag_ph flag_pn flag_pl flag_pt flag_pr flag_qa flag_re flag_ro flag_ru flag_rw flag_ws flag_sm flag_st flag_sa flag_sn flag_rs flag_sc flag_sl flag_sg flag_sx flag_sk flag_si flag_gs flag_sb flag_so flag_za flag_kr flag_ss flag_es flag_lk flag_bl flag_sh flag_kn flag_lc flag_pm flag_vc flag_sd flag_sr flag_sz flag_se flag_ch flag_sy flag_tw flag_tj flag_tz flag_th flag_tl flag_tg flag_tk flag_to flag_tt flag_tn flag_tr flag_tm flag_tc flag_tv flag_vi flag_ug flag_ua flag_ae flag_gb flag_us flag_uy flag_uz flag_vu flag_va flag_ve flag_vn flag_wf flag_eh flag_ye flag_zm flag_zw flag_ac flag_ta flag_bv flag_hm flag_sj flag_um flag_ea flag_cp flag_dg flag_mf united_nations england scotland wales"}}:b.filters={tones:{title:"Diversity",emoji:"santa runner surfer swimmer lifter ear nose point_up_2 point_down point_left point_right punch wave ok_hand thumbsup thumbsdown clap open_hands boy girl man woman cop bride_with_veil person_with_blond_hair man_with_gua_pi_mao man_with_turban older_man grandma baby construction_worker princess angel information_desk_person guardsman dancer nail_care massage haircut muscle spy hand_splayed middle_finger vulcan no_good ok_woman bow raising_hand raised_hands person_frowning person_with_pouting_face pray rowboat bicyclist mountain_bicyclist walking bath metal point_up basketball_player fist raised_hand v writing_hand"},recent:{icon:"clock3",title:"Recent",emoji:""},smileys_people:{icon:"yum",title:"Smileys & People",emoji:"grinning grimacing grin joy smiley smile sweat_smile laughing innocent wink blush slight_smile upside_down relaxed yum relieved heart_eyes kissing_heart kissing kissing_smiling_eyes kissing_closed_eyes stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue money_mouth nerd sunglasses hugging smirk no_mouth neutral_face expressionless unamused rolling_eyes thinking flushed disappointed worried angry rage pensive confused slight_frown frowning2 persevere confounded tired_face weary triumph open_mouth scream fearful cold_sweat hushed frowning anguished cry disappointed_relieved sleepy sweat sob dizzy_face astonished zipper_mouth mask thermometer_face head_bandage sleeping zzz poop smiling_imp imp japanese_ogre japanese_goblin skull ghost alien robot smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face pouting_cat raised_hands clap wave thumbsup thumbsdown punch fist v ok_hand raised_hand open_hands muscle pray point_up point_up_2 point_down point_left point_right middle_finger hand_splayed metal vulcan writing_hand nail_care lips tongue ear nose eye eyes bust_in_silhouette busts_in_silhouette speaking_head baby boy girl man woman person_with_blond_hair older_man older_woman man_with_gua_pi_mao man_with_turban cop construction_worker guardsman spy santa angel princess bride_with_veil walking runner dancer dancers couple two_men_holding_hands two_women_holding_hands bow information_desk_person no_good ok_woman raising_hand person_with_pouting_face person_frowning haircut massage couple_with_heart couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb family_mwbb family_mwgg family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb family_mmbb family_mmgg womans_clothes shirt jeans necktie dress bikini kimono lipstick kiss footprints high_heel sandal boot mans_shoe athletic_shoe womans_hat tophat helmet_with_cross mortar_board crown school_satchel pouch purse handbag briefcase eyeglasses dark_sunglasses ring closed_umbrella"},animals_nature:{icon:"hamster",title:"Animals & Nature",emoji:"dog cat mouse hamster rabbit bear panda_face koala tiger lion_face cow pig pig_nose frog octopus monkey_face see_no_evil hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick hatching_chick hatched_chick wolf boar horse unicorn bee bug snail beetle ant spider scorpion crab snake turtle tropical_fish fish blowfish dolphin whale whale2 crocodile leopard tiger2 water_buffalo ox cow2 dromedary_camel camel elephant goat ram sheep racehorse pig2 rat mouse2 rooster turkey dove dog2 poodle cat2 rabbit2 chipmunk feet dragon dragon_face cactus christmas_tree evergreen_tree deciduous_tree palm_tree seedling herb shamrock four_leaf_clover bamboo tanabata_tree leaves fallen_leaf maple_leaf ear_of_rice hibiscus sunflower rose tulip blossom cherry_blossom bouquet mushroom chestnut jack_o_lantern shell spider_web earth_americas earth_africa earth_asia full_moon waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face first_quarter_moon_with_face last_quarter_moon_with_face sun_with_face crescent_moon star star2 dizzy sparkles comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud cloud cloud_rain thunder_cloud_rain cloud_lightning zap fire boom snowflake cloud_snow snowman2 snowman wind_blowing_face dash cloud_tornado fog umbrella2 umbrella droplet sweat_drops ocean"},food_drink:{icon:"pizza",title:"Food & Drink",emoji:"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach pineapple tomato eggplant hot_pepper corn sweet_potato honey_pot bread cheese poultry_leg meat_on_bone fried_shrimp egg hamburger fries hotdog pizza spaghetti taco burrito ramen stew fish_cake sushi bento curry rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard candy lollipop chocolate_bar popcorn doughnut cookie beer beers wine_glass cocktail tropical_drink champagne sake tea coffee baby_bottle fork_and_knife fork_knife_plate"},activity:{icon:"basketball",title:"Activity",emoji:"soccer basketball football baseball tennis volleyball rugby_football 8ball golf golfer ping_pong badminton hockey field_hockey cricket ski skier snowboarder ice_skate bow_and_arrow fishing_pole_and_fish rowboat swimmer surfer bath basketball_player lifter bicyclist mountain_bicyclist horse_racing levitate trophy running_shirt_with_sash medal military_medal reminder_ribbon rosette ticket tickets performing_arts art circus_tent microphone headphones musical_score musical_keyboard saxophone trumpet guitar violin clapper video_game space_invader dart game_die slot_machine bowling"},travel_places:{icon:"rocket",title:"Travel & Places",emoji:"red_car taxi blue_car bus trolleybus race_car police_car ambulance fire_engine minibus truck articulated_lorry tractor motorcycle bike rotating_light oncoming_police_car oncoming_bus oncoming_automobile oncoming_taxi aerial_tramway mountain_cableway suspension_railway railway_car train monorail bullettrain_side bullettrain_front light_rail mountain_railway steam_locomotive train2 metro tram station helicopter airplane_small airplane airplane_departure airplane_arriving sailboat motorboat speedboat ferry cruise_ship rocket satellite_orbital seat anchor construction fuelpump busstop vertical_traffic_light traffic_light checkered_flag ship ferris_wheel roller_coaster carousel_horse construction_site foggy tokyo_tower factory fountain rice_scene mountain mountain_snow mount_fuji volcano japan camping tent park motorway railway_track sunrise sunrise_over_mountains desert beach island city_sunset city_dusk cityscape night_with_stars bridge_at_night milky_way stars sparkler fireworks rainbow homes european_castle japanese_castle stadium statue_of_liberty house house_with_garden house_abandoned office department_store post_office european_post_office hospital bank hotel convenience_store school love_hotel wedding classical_building church mosque synagogue kaaba shinto_shrine"},objects:{icon:"bulb",title:"Objects",emoji:"watch iphone calling computer keyboard desktop printer mouse_three_button trackball joystick compression minidisc floppy_disk cd dvd vhs camera camera_with_flash video_camera movie_camera projector film_frames telephone_receiver telephone pager fax tv radio microphone2 level_slider control_knobs stopwatch timer alarm_clock clock hourglass_flowing_sand hourglass satellite battery electric_plug bulb flashlight candle wastebasket oil money_with_wings dollar yen euro pound moneybag credit_card gem scales wrench hammer hammer_pick tools pick nut_and_bolt gear chains gun bomb knife dagger crossed_swords shield smoking skull_crossbones coffin urn amphora crystal_ball prayer_beads barber alembic telescope microscope hole pill syringe thermometer label bookmark toilet shower bathtub key key2 couch sleeping_accommodation bed door bellhop frame_photo map beach_umbrella moyai shopping_bags balloon flags ribbon gift confetti_ball tada dolls wind_chime crossed_flags izakaya_lantern envelope envelope_with_arrow incoming_envelope e-mail love_letter postbox mailbox_closed mailbox mailbox_with_mail mailbox_with_no_mail package postal_horn inbox_tray outbox_tray scroll page_with_curl bookmark_tabs bar_chart chart_with_upwards_trend chart_with_downwards_trend page_facing_up date calendar calendar_spiral card_index card_box ballot_box file_cabinet clipboard notepad_spiral file_folder open_file_folder dividers newspaper2 newspaper notebook closed_book green_book blue_book orange_book notebook_with_decorative_cover ledger books book link paperclip paperclips scissors triangular_ruler straight_ruler pushpin round_pushpin triangular_flag_on_post flag_white flag_black closed_lock_with_key lock unlock lock_with_ink_pen pen_ballpoint pen_fountain black_nib pencil pencil2 crayon paintbrush mag mag_right"},symbols:{icon:"heartpulse",title:"Symbols",emoji:"heart yellow_heart green_heart blue_heart purple_heart broken_heart heart_exclamation two_hearts revolving_hearts heartbeat heartpulse sparkling_heart cupid gift_heart heart_decoration peace cross star_and_crescent om_symbol wheel_of_dharma star_of_david six_pointed_star menorah yin_yang orthodox_cross place_of_worship ophiuchus aries taurus gemini cancer leo virgo libra scorpius sagittarius capricorn aquarius pisces id atom u7a7a u5272 radioactive biohazard mobile_phone_off vibration_mode u6709 u7121 u7533 u55b6 u6708 eight_pointed_black_star vs accept white_flower ideograph_advantage secret congratulations u5408 u6e80 u7981 a b ab cl o2 sos no_entry name_badge no_entry_sign x o anger hotsprings no_pedestrians do_not_litter no_bicycles non-potable_water underage no_mobile_phones exclamation grey_exclamation question grey_question bangbang interrobang 100 low_brightness high_brightness trident fleur-de-lis part_alternation_mark warning children_crossing beginner recycle u6307 chart sparkle eight_spoked_asterisk negative_squared_cross_mark white_check_mark diamond_shape_with_a_dot_inside cyclone loop globe_with_meridians m atm sa passport_control customs baggage_claim left_luggage wheelchair no_smoking wc parking potable_water mens womens baby_symbol restroom put_litter_in_its_place cinema signal_strength koko ng ok up cool new free zero one two three four five six seven eight nine ten 1234 arrow_forward pause_button play_pause stop_button record_button track_next track_previous fast_forward rewind twisted_rightwards_arrows repeat repeat_one arrow_backward arrow_up_small arrow_down_small arrow_double_up arrow_double_down arrow_right arrow_left arrow_up arrow_down arrow_upper_right arrow_lower_right arrow_lower_left arrow_upper_left arrow_up_down left_right_arrow arrows_counterclockwise arrow_right_hook leftwards_arrow_with_hook arrow_heading_up arrow_heading_down hash asterisk information_source abc abcd capital_abcd symbols musical_note notes wavy_dash curly_loop heavy_check_mark arrows_clockwise heavy_plus_sign heavy_minus_sign heavy_division_sign heavy_multiplication_x heavy_dollar_sign currency_exchange copyright registered tm end back on top soon ballot_box_with_check radio_button white_circle black_circle red_circle large_blue_circle small_orange_diamond small_blue_diamond large_orange_diamond large_blue_diamond small_red_triangle black_small_square white_small_square black_large_square white_large_square small_red_triangle_down black_medium_square white_medium_square black_medium_small_square white_medium_small_square black_square_button white_square_button speaker sound loud_sound mute mega loudspeaker bell no_bell black_joker mahjong spades clubs hearts diamonds flower_playing_cards thought_balloon anger_right speech_balloon clock1 clock2 clock3 clock4 clock5 clock6 clock7 clock8 clock9 clock10 clock11 clock12 clock130 clock230 clock330 clock430 clock530 clock630 clock730 clock830 clock930 clock1030 clock1130 clock1230 eye_in_speech_bubble"},flags:{icon:"flag_gb",title:"Flags",emoji:"ac af al dz ad ao ai ag ar am aw au at az bs bh bd bb by be bz bj bm bt bo ba bw br bn bg bf bi cv kh cm ca ky cf td flag_cl cn co km cg flag_cd cr hr cu cy cz dk dj dm do ec eg sv gq er ee et fk fo fj fi fr pf ga gm ge de gh gi gr gl gd gu gt gn gw gy ht hn hk hu is in flag_id ir iq ie il it ci jm jp je jo kz ke ki xk kw kg la lv lb ls lr ly li lt lu mo mk mg mw my mv ml mt mh mr mu mx fm md mc mn me ms ma mz mm na nr np nl nc nz ni ne flag_ng nu kp no om pk pw ps pa pg py pe ph pl pt pr qa ro ru rw sh kn lc vc ws sm st flag_sa sn rs sc sl sg sk si sb so za kr es lk sd sr sz se ch sy tw tj tz th tl tg to tt tn tr flag_tm flag_tm ug ua ae gb us vi uy uz vu va ve vn wf eh ye zm zw re ax ta io bq cx cc gg im yt nf pn bl pm gs tk bv hm sj um ic ea cp dg as aq vg ck cw eu gf tf gp mq mp sx ss tc "}},b}function m(b){var c=l();if(b&&b.filters){var d=c.filters;a.each(b.filters,function(b,c){return!i(c)||a.isEmptyObject(c)?void delete d[b]:void a.each(c,function(a,c){d[b][a]=c})}),b.filters=d}return a.extend({},c,b)}function n(a,b){return a.replace(N,function(a){var c=G[0===L?"jsecapeMap":"jsEscapeMap"];return"undefined"!=typeof a&&a in c?e(b,c[a],G.toShort(a)):a})}function o(a,b){return a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;").replace(/(?:\r\n|\r|\n)/g,"\n").replace(/(\n+)/g,"<div>$1</div>").replace(/\n/g,"<br/>").replace(/<br\/><\/div>/g,"</div>"),b.shortnames&&(a=G.shortnameToUnicode(a)),n(a,b.emojiTemplate).replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")}function p(a,b){switch(a=a.replace(/&#10;/g,"\n").replace(/&#09;/g,"\t").replace(/<img[^>]*alt="([^"]+)"[^>]*>/gi,"$1").replace(/\n|\r/g,"").replace(/<br[^>]*>/gi,"\n").replace(/(?:<(?:div|p|ol|ul|li|pre|code|object)[^>]*>)+/gi,"<div>").replace(/(?:<\/(?:div|p|ol|ul|li|pre|code|object)>)+/gi,"</div>").replace(/\n<div><\/div>/gi,"\n").replace(/<div><\/div>\n/gi,"\n").replace(/(?:<div>)+<\/div>/gi,"\n").replace(/([^\n])<\/div><div>/gi,"$1\n").replace(/(?:<\/div>)+/gi,"</div>").replace(/([^\n])<\/div>([^\n])/gi,"$1\n$2").replace(/<\/div>/gi,"").replace(/([^\n])<div>/gi,"$1\n").replace(/\n<div>/gi,"\n").replace(/<div>\n/gi,"\n\n").replace(/<(?:[^>]+)?>/g,"").replace(new RegExp(M,"g"),"").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x60;/g,"`").replace(/&#60;/g,"<").replace(/&#62;/g,">").replace(/&amp;/g,"&"),b.saveEmojisAs){case"image":a=n(a,b.emojiTemplate);break;case"shortname":a=G.toShort(a)}return a}function q(){var a=this,b=a.editor[0].offsetWidth-a.editor[0].clientWidth,c=parseInt(a.button.css("marginRight"));c!==b&&(a.button.css({marginRight:b}),a.floatingPicker&&a.picker.css({right:parseInt(a.picker.css("right"))-c+b}))}function r(){var b=this;if(!b.sprite&&b.lasyEmoji[0]&&b.lasyEmoji.eq(0).is(".lazy-emoji")){var c=b.picker.offset().top,d=c+b.picker.height()+20;b.lasyEmoji.each(function(){var b=a(this),e=b.offset().top;if(e>c&&e<d&&b.attr("src",b.data("src")).removeClass("lazy-emoji"),e>d)return!1}),b.lasyEmoji=b.lasyEmoji.filter(".lazy-emoji")}}function s(a,b){return(b?"":".")+K+(a?"-"+a:"")}function t(b){var c=a("<div/>",i(b)?b:{class:s(b,!0)});return a.each(J.call(arguments).slice(1),function(b,d){a.isFunction(d)&&(d=d.call(c)),d&&a(d).appendTo(c)}),c}function u(){return localStorage.getItem("recent_emojis")||""}function v(b,c){var d=u();if(!b.recent||b.recent!==d||c){if(d.length){var e,g,h=b.scrollArea.is(".skinnable");h||(e=b.scrollArea.scrollTop(),c&&b.recentCategory.show(),g=b.recentCategory.is(":visible")?b.recentCategory.height():0);var i=f(d,b.emojiBtnTemplate,!0).split("|").join("");if(b.recentCategory.children(".emojibtn").remove(),a(i).insertAfter(b.recentCategory.children(".emojionearea-category-title")),b.recentCategory.children(".emojibtn").on("click",function(){b.trigger("emojibtn.click",a(this))}),b.recentFilter.show(),!h){b.recentCategory.show();var j=b.recentCategory.height();g!==j&&b.scrollArea.scrollTop(e+j-g)}}else b.recentFilter.hasClass("active")&&b.recentFilter.removeClass("active").next().addClass("active"),b.recentCategory.hide(),b.recentFilter.hide();b.recent=d}}function w(a,b){var c=u(),d=c.split("|"),e=d.indexOf(b);e!==-1&&d.splice(e,1),d.unshift(b),d.length>9&&d.pop(),localStorage.setItem("recent_emojis",d.join("|")),v(a)}function x(){var a="test";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(a){return!1}}function y(b,e,h){b.options=h=m(h),b.sprite=h.sprite&&L<3,b.inline=null===h.inline?e.is("INPUT"):h.inline,b.shortnames=h.shortnames,b.saveEmojisAs=h.saveEmojisAs,b.standalone=h.standalone,b.emojiTemplate='<img alt="{alt}" class="emojione'+(b.sprite?'-{uni}" src="'+I+'"/>':'emoji" src="{img}"/>'),b.emojiTemplateAlt=b.sprite?'<i class="emojione-{uni}"/>':'<img class="emojioneemoji" src="{img}"/>',b.emojiBtnTemplate='<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}">'+b.emojiTemplateAlt+"</i>",b.recentEmojis=h.recentEmojis&&x();var j=h.pickerPosition;b.floatingPicker="top"===j||"bottom"===j,b.source=e,(e.is(":disabled")||e.is(".disabled"))&&b.disable();var k,l,n,y,z,A,D,E,F,H,J=e.is("TEXTAREA")||e.is("INPUT")?"val":"text",N=t("tones",h.tones?function(){this.addClass(s("tones-"+h.tonesStyle,!0));for(var b=0;b<=5;b++)this.append(a("<i/>",{class:"btn-tone btn-tone-"+b+(b?"":" active"),"data-skin":b,role:"button"}))}:null),O=t({class:K+(b.standalone?" "+K+"-standalone ":" ")+(e.attr("class")||""),role:"application"},k=b.editor=t("editor").attr({contenteditable:!b.standalone,placeholder:h.placeholder||e.data("placeholder")||e.attr("placeholder")||"",tabindex:0}),l=b.button=t("button",t("button-open"),t("button-close")).attr("title",h.buttonTitle),n=b.picker=t("picker",t("wrapper",y=t("filters"),h.search?A=t("search-panel",t("search",h.search?function(){b.search=a("<input/>",{placeholder:h.searchPlaceholder||"",type:"text",class:"search"}),this.append(b.search)}:null),N):null,H=t("scroll-area",h.tones&&!h.search?t("tones-panel",N):null,D=t("emojis-list")))).addClass(s("picker-position-"+h.pickerPosition,!0)).addClass(s("filters-position-"+h.filtersPosition,!0)).addClass(s("search-position-"+h.searchPosition,!0)).addClass("hidden"));h.search&&A.addClass(s("with-search",!0)),b.searchSel=null,k.data(e.data()),a.each(h.attributes,function(a,b){k.attr(a,b)});var P=t("category-block").attr({"data-tone":0}).prependTo(D);if(a.each(h.filters,function(c,d){var e=0;if("recent"!==c||b.recentEmojis){if("tones"!==c)a("<i/>",{class:s("filter",!0)+" "+s("filter-"+c,!0),"data-filter":c,title:d.title}).wrapInner(f(d.icon,b.emojiTemplateAlt)).appendTo(y);else{if(!h.tones)return;e=5}do{var g,i=d.emoji.replace(/[\s,;]+/g,"|");g=0===e?t("category").attr({name:c,"data-tone":e}).appendTo(P):t("category-block").attr({name:c,"data-tone":e}).appendTo(D),e>0&&(g.hide(),i=i.split("|").join("_tone"+e+"|")+"_tone"+e),"recent"===c&&(i=u()),i=f(i,b.sprite?'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><i class="emojione-{uni}"></i></i>':'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><img class="emojioneemoji lazy-emoji" data-src="{img}"/></i>',!0).split("|").join(""),g.html(i),a('<div class="emojionearea-category-title"/>').text(d.title).prependTo(g)}while(--e>0)}}),h.filters=null,b.sprite||(b.lasyEmoji=D.find(".lazy-emoji")),z=y.find(s("filter")),z.eq(0).addClass("active"),F=D.find(s("category-block")),E=D.find(s("category")),b.recentFilter=z.filter('[data-filter="recent"]'),b.recentCategory=E.filter("[name=recent]"),b.scrollArea=H,h.container?a(h.container).wrapInner(O):O.insertAfter(e),h.hideSource&&e.hide(),b.setText(e[J]()),e[J](b.getText()),q.apply(b),b.standalone&&!b.getText().length){var Q=a(e).data("emoji-placeholder")||h.emojiPlaceholder;b.setText(Q),
k.addClass("has-placeholder")}d(b,D.find(".emojibtn"),{click:"emojibtn.click"}),d(b,window,{resize:"!resize"}),d(b,N.children(),{click:"tone.click"}),d(b,[n,l],{mousedown:"!mousedown"},k),d(b,l,{click:"button.click"}),d(b,k,{paste:"!paste"},k),d(b,k,["focus","blur"],function(){return!b.stayFocused&&k}),d(b,n,{mousedown:"picker.mousedown",mouseup:"picker.mouseup",click:"picker.click",keyup:"picker.keyup",keydown:"picker.keydown",keypress:"picker.keypress"}),d(b,k,["mousedown","mouseup","click","keyup","keydown","keypress"]),d(b,n.find(".emojionearea-filter"),{click:"filter.click"}),d(b,e,{change:"source.change"}),h.search&&d(b,b.search,{keyup:"search.keypress",focus:"search.focus",blur:"search.blur"});var R=!1;if(H.on("scroll",function(){if(!R&&(r.call(b),H.is(":not(.skinnable)"))){var c=E.eq(0),d=H.offset().top;E.each(function(b,e){return!(a(e).offset().top-d>=10)&&void(c=a(e))});var e=z.filter('[data-filter="'+c.attr("name")+'"]');e[0]&&!e.is(".active")&&(z.removeClass("active"),e.addClass("active"))}}),b.on("@filter.click",function(a){var c=a.is(".active");if(H.is(".skinnable")){if(c)return;N.children().eq(0).click()}R=!0,c||(z.filter(".active").removeClass("active"),a.addClass("active"));var d=E.filter('[name="'+a.data("filter")+'"]').offset().top,e=H.scrollTop(),f=H.offset().top;H.stop().animate({scrollTop:d+e-f-2},200,"swing",function(){r.call(b),R=!1})}).on("@picker.show",function(){b.recentEmojis&&v(b),r.call(b)}).on("@tone.click",function(a){N.children().removeClass("active");var c=a.addClass("active").data("skin");c?(H.addClass("skinnable"),F.hide().filter("[data-tone="+c+"]").show(),z.removeClass("active")):(H.removeClass("skinnable"),F.hide().filter("[data-tone=0]").show(),z.eq(0).click()),r.call(b),h.search&&b.trigger("search.keypress")}).on("@button.click",function(a){a.is(".active")?b.hidePicker():(b.showPicker(),b.searchSel=null)}).on("@!paste",function(d,e){var f=function(e){var f="caret-"+(new Date).getTime(),h=o(e,b);g(h),g('<i id="'+f+'"></i>'),d.scrollTop(j);var i=a("#"+f),k=i.offset().top-d.offset().top,l=d.height();(j+k>=l||j>k)&&d.scrollTop(j+k-2*l/3),i.remove(),b.stayFocused=!1,q.apply(b),c(b,"paste",[d,e,h])};if(e.originalEvent.clipboardData){var h=e.originalEvent.clipboardData.getData("text/plain");return f(h),e.preventDefault?e.preventDefault():e.stop(),e.returnValue=!1,e.stopPropagation(),!1}b.stayFocused=!0,g("<span>"+M+"</span>");var i=B(d[0]),j=d.scrollTop(),k=a("<div/>",{contenteditable:!0}).css({position:"fixed",left:"-999px",width:"1px",height:"1px",top:"20px",overflow:"hidden"}).appendTo(a("BODY")).focus();window.setTimeout(function(){d.focus(),C(d[0],i);var a=p(k.html().replace(/\r\n|\n|\r/g,"<br>"),b);k.remove(),f(a)},200)}).on("@emojibtn.click",function(a){k.removeClass("has-placeholder"),null!==b.searchSel&&(k.focus(),C(k[0],b.searchSel),b.searchSel=null),b.standalone?(k.html(f(a.data("name"),b.emojiTemplate)),b.trigger("blur")):(B(k[0]),g(f(a.data("name"),b.emojiTemplate))),b.recentEmojis&&w(b,a.data("name")),b.trigger("search.keypress")}).on("@!resize @keyup @emojibtn.click",q).on("@!mousedown",function(c,d){return a(d.target).hasClass("search")?(b.stayFocused=!0,null===b.searchSel&&(b.searchSel=B(c[0]))):(O.is(".focused")||c.trigger("focus"),d.preventDefault()),!1}).on("@change",function(){var a=b.editor.html().replace(/<\/?(?:div|span|p)[^>]*>/gi,"");a.length&&!/^<br[^>]*>$/i.test(a)||b.editor.html(b.content=""),e[J](b.getText())}).on("@source.change",function(){b.setText(e[J]()),c("change")}).on("@focus",function(){O.addClass("focused")}).on("@blur",function(){O.removeClass("focused"),h.hidePickerOnBlur&&b.hidePicker();var a=b.editor.html();b.content!==a?(b.content=a,c(b,"change",[b.editor]),e.trigger("blur").trigger("change")):e.trigger("blur"),h.search&&(b.search.val(""),b.trigger("search.keypress",!0))}),h.search&&b.on("@search.focus",function(){b.stayFocused=!0,b.search.addClass("focused")}).on("@search.keypress",function(c){var d=n.find(".emojionearea-filter"),e=h.tones?N.find("i.active").data("skin"):0,f=b.search.val().replace(/ /g,"_").replace(/"/g,'\\"');f&&f.length?(b.recentFilter.hasClass("active")&&b.recentFilter.removeClass("active").next().addClass("active"),b.recentCategory.hide(),b.recentFilter.hide(),F.each(function(){var b=function(a,b){var c=a.find('.emojibtn[data-name*="'+f+'"]');if(0===c.length)a.data("tone")===b&&a.hide(),d.filter('[data-filter="'+a.attr("name")+'"]').hide();else{var e=a.find('.emojibtn:not([data-name*="'+f+'"])');e.hide(),c.show(),a.data("tone")===b&&a.show(),d.filter('[data-filter="'+a.attr("name")+'"]').show()}},c=a(this);0===c.data("tone")?E.filter(':not([name="recent"])').each(function(){b(a(this),0)}):b(c,e)}),R?r.call(b):H.trigger("scroll")):(v(b,!0),F.filter('[data-tone="'+N.find("i.active").data("skin")+'"]:not([name="recent"])').show(),a(".emojibtn",F).show(),d.show(),r.call(b))}).on("@search.blur",function(){b.stayFocused=!1,b.search.removeClass("focused"),b.trigger("blur")}),h.shortcuts&&b.on("@keydown",function(a,c){c.ctrlKey||(9==c.which?(c.preventDefault(),l.click()):27==c.which&&(c.preventDefault(),l.is(".active")&&b.hidePicker()))}),i(h.events)&&!a.isEmptyObject(h.events)&&a.each(h.events,function(a,c){b.on(a.replace(/_/g,"."),c)}),h.autocomplete){var S=function(){var c={maxCount:h.textcomplete.maxCount,placement:h.textcomplete.placement};h.shortcuts&&(c.onKeydown=function(a,b){if(!a.ctrlKey&&13==a.which)return b.KEY_ENTER});var d=a.map(G.emojioneList,function(a,b){return h.autocompleteTones?b:/_tone[12345]/.test(b)?null:b});d.sort(),k.textcomplete([{id:K,match:/\B(:[\-+\w]*)$/,search:function(b,c){c(a.map(d,function(a){return 0===a.indexOf(b)?a:null}))},template:function(a){return f(a,b.emojiTemplate)+" "+a.replace(/:/g,"")},replace:function(a){return f(a,b.emojiTemplate)},cache:!0,index:1}],c),h.textcomplete.placement&&"static"==a(k.data("textComplete").option.appendTo).css("position")&&a(k.data("textComplete").option.appendTo).css("position","relative")},T=function(){if(b.disabled){var a=function(){b.off("enabled",a),S()};b.on("enabled",a)}else S()};a.fn.textcomplete?T():a.ajax({url:"https://cdn.rawgit.com/yuku-t/jquery-textcomplete/v1.3.4/dist/jquery.textcomplete.js",dataType:"script",cache:!0,success:T})}b.inline&&(O.addClass(s("inline",!0)),b.on("@keydown",function(a,b){13==b.which&&b.preventDefault()})),/firefox/i.test(navigator.userAgent)&&document.execCommand("enableObjectResizing",!1,!1),b.isReady=!0,b.trigger("onLoad",k),b.trigger("ready",k)}function z(c){var d=h();if(c=m(c),!O.isLoading)if(!G||k(j(G))<2){O.isLoading=!0;var e;e=k(d)>5?O.defaultBase3+"npm/emojione@"+d:k(d)>4?O.defaultBase3+"emojione/"+d:O.defaultBase+"/"+d,a.ajax({url:e+"/lib/js/emojione.min.js",dataType:"script",cache:!0,success:function(){G=window.emojione,d=j(G),L=k(d);var b;for(L>4?(O.base=O.defaultBase3+"emojione/assets/"+d,b=O.base+"/sprites/emojione-sprite-"+G.emojiSize+".css"):(O.base=O.defaultBase+d+"/assets",b=O.base+"/sprites/emojione.sprites.css"),c.sprite&&(document.createStyleSheet?document.createStyleSheet(b):a("<link/>",{rel:"stylesheet",href:b}).appendTo("head"));H.length;)H.shift().call();O.isLoading=!1}})}else d=j(G),L=k(d),L>4?O.base=O.defaultBase3+"emojione/assets/"+d:O.base=O.defaultBase+d+"/assets";b(function(){var a="";c.useInternalCDN&&(L>4&&(a=G.emojiSize+"/"),G.imagePathPNG=O.base+"/png/"+a,G.imagePathSVG=O.base+"/svg/"+a,G.imagePathSVGSprites=O.base+"/sprites/emojione.sprites.svg",G.imageType=c.imageType),k(d)>4?(N=G.regUnicode,G.imageType=c.imageType||"png"):N=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+G.unicodeRegexp+")","gi")})}function A(b,d){d=d.replace(/^@/,"");var e=b.id;F[e][d]&&(a.each(F[e][d],function(e,f){a.each(a.isArray(f[0])?f[0]:[f[0]],function(e,g){a(g).on(f[1],function(){var e=J.call(arguments),g=a.isFunction(f[2])?f[2].apply(b,[d].concat(e)):f[2];g&&c(b,d,[g].concat(e))})})}),F[e][d]=null)}var B,C,D=0,E={},F={},G=window.emojione,H=[],I="data:image/gif;base64,R0lGODlhAQABAJH/AP///wAAAMDAwAAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==",J=[].slice,K="emojionearea",L=0,M="&#8203;";window.getSelection&&document.createRange?(B=function(a){var b=window.getSelection&&window.getSelection();if(b&&b.rangeCount>0)return b.getRangeAt(0)},C=function(a,b){var c=document.createRange();c.setStart(b.startContainer,b.startOffset),c.setEnd(b.endContainer,b.endOffset),b=window.getSelection(),b.removeAllRanges(),b.addRange(c)}):document.selection&&document.body.createTextRange&&(B=function(a){return document.selection.createRange()},C=function(a,b){var c=document.body.createTextRange();c.moveToElementText(a),c.setStart(b.startContanier,b.startOffset),c.setEnd(b.endContainer,b.endOffset),c.select()});var N,O={defaultBase:"https://cdnjs.cloudflare.com/ajax/libs/emojione/",defaultBase3:"https://cdn.jsdelivr.net/",base:null,isLoading:!1},P=function(a,c){var d=this;z(c),E[d.id=++D]={},F[d.id]={},b(function(){y(d,a,c)})};P.prototype.on=function(b,c){if(b&&a.isFunction(c)){var d=this;a.each(b.toLowerCase().split(" "),function(a,b){A(d,b),(E[d.id][b]||(E[d.id][b]=[])).push(c)})}return this},P.prototype.off=function(b,c){if(b){var d=this.id;a.each(b.toLowerCase().replace(/_/g,".").split(" "),function(b,e){E[d][e]&&!/^@/.test(e)&&(c?a.each(E[d][e],function(a,b){b===c&&E[d][e].splice(a,1)}):E[d][e]=[])})}return this},P.prototype.trigger=function(){var a=J.call(arguments),b=[this].concat(a.slice(0,1));return b.push(a.slice(1)),c.apply(this,b)},P.prototype.setFocus=function(){var a=this;return b(function(){a.editor.focus()}),a},P.prototype.setText=function(a){var d=this;return b(function(){d.editor.html(o(a,d)),d.content=d.editor.html(),c(d,"change",[d.editor]),q.apply(d)}),d},P.prototype.getText=function(){return p(this.editor.html(),this)},P.prototype.showPicker=function(){var a=this;return a._sh_timer&&window.clearTimeout(a._sh_timer),a.picker.removeClass("hidden"),a._sh_timer=window.setTimeout(function(){a.button.addClass("active")},50),c(a,"picker.show",[a.picker]),a},P.prototype.hidePicker=function(){var a=this;return a._sh_timer&&window.clearTimeout(a._sh_timer),a.button.removeClass("active"),a._sh_timer=window.setTimeout(function(){a.picker.addClass("hidden")},500),c(a,"picker.hide",[a.picker]),a},P.prototype.enable=function(){var a=this,b=function(){a.disabled=!1,a.editor.prop("contenteditable",!0),a.button.show();var b=a[a.standalone?"button":"editor"];b.parent().removeClass("emojionearea-disable"),c(a,"enabled",[b])};return a.isReady?b():a.on("ready",b),a},P.prototype.disable=function(){var a=this;a.disabled=!0;var b=function(){a.editor.prop("contenteditable",!1),a.hidePicker(),a.button.hide();var b=a[a.standalone?"button":"editor"];b.parent().addClass("emojionearea-disable"),c(a,"disabled",[b])};return a.isReady?b():a.on("ready",b),a},a.fn.emojioneArea=function(b){return this.each(function(){return this.emojioneArea?this.emojioneArea:(a.data(this,"emojioneArea",this.emojioneArea=new P(a(this),b)),this.emojioneArea)})},a.fn.emojioneArea.defaults=l(),a.fn.emojioneAreaText=function(c){c=m(c);var d=this,e={shortnames:!c||"undefined"==typeof c.shortnames||c.shortnames,emojiTemplate:'<img alt="{alt}" class="emojione'+(c&&c.sprite&&L<3?'-{uni}" src="'+I:'emoji" src="{img}')+'"/>'};return z(c),b(function(){d.each(function(){var b=a(this);return b.hasClass("emojionearea-text")||b.addClass("emojionearea-text").html(o(b.is("TEXTAREA")||b.is("INPUT")?b.val():b.text(),e)),b})}),this}},window),function(a,b){function c(a,b,c){var d=l[b.type]||{},e=b.empty||c;return e&&null==a?null:b.def&&null==a?b.def:(a=d.floor?~~a:parseFloat(a),null==a||isNaN(a)?b.def:d.mod?(a%=d.mod,a<0?d.mod+a:a):d.min>a?d.min:d.max<a?d.max:a)}function d(b){var c=j(),d=c._rgba=[];return b=b.toLowerCase(),o(i,function(a,e){var f,g=e.re.exec(b),h=g&&e.parse(g),i=e.space||"rgba",j=k[i].cache;if(h)return f=c[i](h),c[j]=f[j],d=c._rgba=f._rgba,!1}),0!==d.length?(0===Math.max.apply(Math,d)&&a.extend(d,f.transparent),c):(b=f[b])?b:void 0}function e(a,b,c){return c=(c+1)%1,6*c<1?a+6*(b-a)*c:2*c<1?b:3*c<2?a+(b-a)*(2/3-c)*6:a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{cache:"_rgba",props:{red:{idx:0,type:"byte",empty:!0},green:{idx:1,type:"byte",empty:!0},blue:{idx:2,type:"byte",empty:!0},alpha:{idx:3,type:"percent",def:1}}},hsla:{cache:"_hsla",props:{hue:{idx:0,type:"degrees",empty:!0},saturation:{idx:1,type:"percent",empty:!0},lightness:{idx:2,type:"percent",empty:!0}}}},l={byte:{floor:!0,min:0,max:255},percent:{min:0,max:1},degrees:{mod:360,floor:!0}},m=k.rgba.props,n=j.support={},o=a.each;k.hsla.props.alpha=m.alpha,j.fn=j.prototype={constructor:j,parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e instanceof a||e.nodeType)&&(e=e instanceof a?e.css(g):a(e).css(g),g=b);var l=this,n=a.type(e),p=this._rgba=[];return g!==b&&(e=[e,g,h,i],n="array"),"string"===n?this.parse(d(e)||f._default):"array"===n?(o(m,function(a,b){p[b.idx]=c(e[b.idx],b)}),this):"object"===n?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(a,b){o(b.props,function(a,d){var f=b.cache;if(!l[f]&&b.to){if(null==e[a]||"alpha"===a)return;l[f]=b.to(l._rgba)}l[f][d.idx]=c(e[a],d,!0)})}),this):void 0},is:function(a){var b=j(a),c=!0,d=this;return o(k,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],o(e.props,function(a,b){if(null!=g[b.idx])return c=g[b.idx]===f[b.idx]})),c}),c},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=this[f.cache]||f.to(this._rgba),h=g.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,i=g[f],j=d[f],k=l[e.type]||{};null!==j&&(null===i?h[f]=j:(k.mod&&(j-i>k.mod/2?i+=k.mod:i-j>k.mod/2&&(i-=k.mod)),h[e.idx]=c((j-i)*b+i,e)))}),this[e](h)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join(",")+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&b<3&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join(",")+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a,b){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}},j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===l||1===l?l:l<=.5?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=d<=.5?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),o(g,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h;if("string"!==a.type(e)||(f=d(e))){if(e=j(f||e),!n.rgba&&1!==e._rgba[3]){h="backgroundColor"===c?b.parentNode:b;do g=a.curCSS(h,"backgroundColor");while((""===g||"transparent"===g)&&(h=h.parentNode)&&h.style);e=e.blend(g&&"transparent"!==g?g:"_default")}e=e.toRgbaString()}b.style[c]=e}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}}),a(function(){var a=document.createElement("div"),b=a.style;b.cssText="background-color:rgba(1,1,1,.5)",n.rgba=b.backgroundColor.indexOf("rgba")>-1}),f=a.Color.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(a){a.Jcrop=function(b,c){function d(a){return Math.round(a)+"px"}function e(a){return J.baseClass+"-"+a}function f(){return a.fx.step.hasOwnProperty("backgroundColor")}function g(b){var c=a(b).offset();return[c.left,c.top]}function h(a){return[a.pageX-I[0],a.pageY-I[1]]}function i(b){"object"!=typeof b&&(b={}),J=a.extend(J,b),a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){"function"!=typeof J[b]&&(J[b]=function(){})})}function j(a,b,c){if(I=g(R),oa.setCursor("move"===a?a:a+"-resize"),"move"===a)return oa.activateHandlers(l(b),q,c);var d=la.getFixed(),e=m(a),f=la.getCorner(m(e));la.setPressed(la.getCorner(e)),la.setCurrent(f),oa.activateHandlers(k(a,d),q,c)}function k(a,b){return function(c){if(J.aspectRatio)switch(a){case"e":c[1]=b.y+1;break;case"w":c[1]=b.y+1;break;case"n":c[0]=b.x+1;break;case"s":c[0]=b.x+1}else switch(a){case"e":c[1]=b.y2;break;case"w":c[1]=b.y2;break;case"n":c[0]=b.x2;break;case"s":c[0]=b.x2}la.setCurrent(c),na.update()}}function l(a){var b=a;return pa.watchKeys(),function(a){la.moveOffset([a[0]-b[0],a[1]-b[1]]),b=a,na.update()}}function m(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function n(a){return function(b){return!J.disabled&&(!("move"===a&&!J.allowMove)&&(I=g(R),da=!0,j(a,h(b)),b.stopPropagation(),b.preventDefault(),!1))}}function o(a,b,c){var d=a.width(),e=a.height();d>b&&b>0&&(d=b,e=b/a.width()*a.height()),e>c&&c>0&&(e=c,d=c/a.height()*a.width()),ba=a.width()/d,ca=a.height()/e,a.width(d).height(e)}function p(a){return{x:a.x*ba,y:a.y*ca,x2:a.x2*ba,y2:a.y2*ca,w:a.w*ba,h:a.h*ca}}function q(a){var b=la.getFixed();b.w>J.minSelect[0]&&b.h>J.minSelect[1]?(na.enableHandles(),na.done()):na.release(),oa.setCursor(J.allowSelect?"crosshair":"default")}function r(a){if(J.disabled)return!1;if(!J.allowSelect)return!1;da=!0,I=g(R),na.disableHandles(),oa.setCursor("crosshair");var b=h(a);return la.setPressed(b),na.update(),oa.activateHandlers(s,q,"touch"===a.type.substring(0,5)),pa.watchKeys(),a.stopPropagation(),a.preventDefault(),!1}function s(a){la.setCurrent(a),na.update()}function t(){var b=a("<div></div>").addClass(e("tracker"));return L&&b.css({opacity:0,backgroundColor:"white"}),b}function u(a){U.removeClass().addClass(e("holder")).addClass(a)}function v(a,b){function c(){window.setTimeout(s,l)}var d=a[0]/ba,e=a[1]/ca,f=a[2]/ba,g=a[3]/ca;if(!ea){var h=la.flipCoords(d,e,f,g),i=la.getFixed(),j=[i.x,i.y,i.x2,i.y2],k=j,l=J.animationDelay,m=h[0]-j[0],n=h[1]-j[1],o=h[2]-j[2],p=h[3]-j[3],q=0,r=J.swingSpeed;d=k[0],e=k[1],f=k[2],g=k[3],na.animMode(!0);var s=function(){return function(){q+=(100-q)/r,k[0]=Math.round(d+q/100*m),k[1]=Math.round(e+q/100*n),k[2]=Math.round(f+q/100*o),k[3]=Math.round(g+q/100*p),q>=99.8&&(q=100),q<100?(x(k),c()):(na.done(),na.animMode(!1),"function"==typeof b&&b.call(qa))}}();c()}}function w(a){x([a[0]/ba,a[1]/ca,a[2]/ba,a[3]/ca]),J.onSelect.call(qa,p(la.getFixed())),na.enableHandles()}function x(a){la.setPressed([a[0],a[1]]),la.setCurrent([a[2],a[3]]),na.update()}function y(){return p(la.getFixed())}function z(){return la.getFixed()}function A(a){i(a),H()}function B(){J.disabled=!0,na.disableHandles(),na.setCursor("default"),oa.setCursor("default")}function C(){J.disabled=!1,H()}function D(){na.done(),oa.activateHandlers(null,null)}function E(){U.remove(),O.show(),O.css("visibility","visible"),a(b).removeData("Jcrop")}function F(a,b){na.release(),B();var c=new Image;c.onload=function(){var d=c.width,e=c.height,f=J.boxWidth,g=J.boxHeight;R.width(d).height(e),R.attr("src",a),V.attr("src",a),o(R,f,g),S=R.width(),T=R.height(),V.width(S).height(T),ha.width(S+2*ga).height(T+2*ga),U.width(S).height(T),ma.resize(S,T),C(),"function"==typeof b&&b.call(qa)},c.src=a}function G(a,b,c){var d=b||J.bgColor;J.bgFade&&f()&&J.fadeTime&&!c?a.animate({backgroundColor:d},{queue:!1,duration:J.fadeTime}):a.css("backgroundColor",d)}function H(a){J.allowResize?a?na.enableOnly():na.enableHandles():na.disableHandles(),oa.setCursor(J.allowSelect?"crosshair":"default"),na.setCursor(J.allowMove?"move":"default"),J.hasOwnProperty("trueSize")&&(ba=J.trueSize[0]/S,ca=J.trueSize[1]/T),J.hasOwnProperty("setSelect")&&(w(J.setSelect),na.done(),delete J.setSelect),ma.refresh(),J.bgColor!=ia&&(G(J.shade?ma.getShades():U,J.shade?J.shadeColor||J.bgColor:J.bgColor),ia=J.bgColor),ja!=J.bgOpacity&&(ja=J.bgOpacity,J.shade?ma.refresh():na.setBgOpacity(ja)),Z=J.maxSize[0]||0,$=J.maxSize[1]||0,_=J.minSize[0]||0,aa=J.minSize[1]||0,J.hasOwnProperty("outerImage")&&(R.attr("src",J.outerImage),delete J.outerImage),na.refresh()}var I,J=a.extend({},a.Jcrop.defaults),K=navigator.userAgent.toLowerCase(),L=/msie/.test(K),M=/msie [1-6]\./.test(K);"object"!=typeof b&&(b=a(b)[0]),"object"!=typeof c&&(c={}),i(c);var N={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},O=a(b),P=!0;if("IMG"==b.tagName){if(0!=O[0].width&&0!=O[0].height)O.width(O[0].width),O.height(O[0].height);else{var Q=new Image;Q.src=O[0].src,O.width(Q.width),O.height(Q.height)}var R=O.clone().removeAttr("id").css(N).show();R.width(O.width()),R.height(O.height()),O.after(R).hide()}else R=O.css(N).show(),P=!1,null===J.shade&&(J.shade=!0);o(R,J.boxWidth,J.boxHeight);var S=R.width(),T=R.height(),U=a("<div />").width(S).height(T).addClass(e("holder")).css({position:"relative",backgroundColor:J.bgColor}).insertAfter(O).append(R);J.addClass&&U.addClass(J.addClass);var V=a("<div />"),W=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),X=a("<div />").width("100%").height("100%").css("zIndex",320),Y=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=la.getFixed();J.onDblClick.call(qa,a)}).insertBefore(R).append(W,X);P&&(V=a("<img />").attr("src",R.attr("src")).css(N).width(S).height(T),W.append(V)),M&&Y.css({overflowY:"hidden"});var Z,$,_,aa,ba,ca,da,ea,fa,ga=J.boundary,ha=t().width(S+2*ga).height(T+2*ga).css({position:"absolute",top:d(-ga),left:d(-ga),zIndex:290}).mousedown(r),ia=J.bgColor,ja=J.bgOpacity;I=g(R);var ka=function(){function a(){var a,b={},c=["touchstart","touchmove","touchend"],d=document.createElement("div");try{for(a=0;a<c.length;a++){var e=c[a];e="on"+e;var f=e in d;f||(d.setAttribute(e,"return;"),f="function"==typeof d[e]),b[c[a]]=f}return b.touchstart&&b.touchend&&b.touchmove}catch(a){return!1}}function b(){return J.touchSupport===!0||J.touchSupport===!1?J.touchSupport:a()}return{createDragger:function(a){return function(b){return!J.disabled&&(!("move"===a&&!J.allowMove)&&(I=g(R),da=!0,j(a,h(ka.cfilter(b)),!0),b.stopPropagation(),b.preventDefault(),!1))}},newSelection:function(a){return r(ka.cfilter(a))},cfilter:function(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,a},isSupported:a,support:b()}}(),la=function(){function a(a){a=g(a),o=m=a[0],p=n=a[1]}function b(a){a=g(a),k=a[0]-o,l=a[1]-p,o=a[0],p=a[1]}function c(){return[k,l]}function d(a){var b=a[0],c=a[1];0>m+b&&(b-=b+m),0>n+c&&(c-=c+n),T<p+c&&(c+=T-(p+c)),S<o+b&&(b+=S-(o+b)),m+=b,o+=b,n+=c,p+=c}function e(a){var b=f();switch(a){case"ne":return[b.x2,b.y];case"nw":return[b.x,b.y];case"se":return[b.x2,b.y2];case"sw":return[b.x,b.y2]}}function f(){if(!J.aspectRatio)return i();var a,b,c,d,e=J.aspectRatio,f=J.minSize[0]/ba,g=J.maxSize[0]/ba,k=J.maxSize[1]/ca,l=o-m,q=p-n,r=Math.abs(l),s=Math.abs(q),t=r/s;return 0===g&&(g=10*S),0===k&&(k=10*T),t<e?(b=p,c=s*e,a=l<0?m-c:c+m,a<0?(a=0,d=Math.abs((a-m)/e),b=q<0?n-d:d+n):a>S&&(a=S,d=Math.abs((a-m)/e),b=q<0?n-d:d+n)):(a=o,d=r/e,b=q<0?n-d:n+d,b<0?(b=0,c=Math.abs((b-n)*e),a=l<0?m-c:c+m):b>T&&(b=T,c=Math.abs(b-n)*e,a=l<0?m-c:c+m)),a>m?(a-m<f?a=m+f:a-m>g&&(a=m+g),b=b>n?n+(a-m)/e:n-(a-m)/e):a<m&&(m-a<f?a=m-f:m-a>g&&(a=m-g),b=b>n?n+(m-a)/e:n-(m-a)/e),a<0?(m-=a,a=0):a>S&&(m-=a-S,a=S),b<0?(n-=b,b=0):b>T&&(n-=b-T,b=T),j(h(m,n,a,b))}function g(a){return a[0]<0&&(a[0]=0),a[1]<0&&(a[1]=0),a[0]>S&&(a[0]=S),a[1]>T&&(a[1]=T),[Math.round(a[0]),Math.round(a[1])]}function h(a,b,c,d){var e=a,f=c,g=b,h=d;return c<a&&(e=c,f=a),d<b&&(g=d,h=b),[e,g,f,h]}function i(){var a,b=o-m,c=p-n;return Z&&Math.abs(b)>Z&&(o=b>0?m+Z:m-Z),$&&Math.abs(c)>$&&(p=c>0?n+$:n-$),aa/ca&&Math.abs(c)<aa/ca&&(p=c>0?n+aa/ca:n-aa/ca),_/ba&&Math.abs(b)<_/ba&&(o=b>0?m+_/ba:m-_/ba),m<0&&(o-=m,m-=m),n<0&&(p-=n,n-=n),o<0&&(m-=o,o-=o),p<0&&(n-=p,p-=p),o>S&&(a=o-S,m-=a,o-=a),p>T&&(a=p-T,n-=a,p-=a),m>S&&(a=m-T,p-=a,n-=a),n>T&&(a=n-T,p-=a,n-=a),j(h(m,n,o,p))}function j(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var k,l,m=0,n=0,o=0,p=0;return{flipCoords:h,setPressed:a,setCurrent:b,getOffset:c,moveOffset:d,getCorner:e,getFixed:f}}(),ma=function(){function b(a,b){o.left.css({height:d(b)}),o.right.css({height:d(b)})}function c(){return e(la.getFixed())}function e(a){o.top.css({left:d(a.x),width:d(a.w),height:d(a.y)}),o.bottom.css({top:d(a.y2),left:d(a.x),width:d(a.w),height:d(T-a.y2)}),o.right.css({left:d(a.x2),width:d(S-a.x2)}),o.left.css({width:d(a.x)})}function f(){return a("<div />").css({position:"absolute",backgroundColor:J.shadeColor||J.bgColor}).appendTo(n)}function g(){m||(m=!0,n.insertBefore(R),c(),na.setBgOpacity(1,0,1),V.hide(),h(J.shadeColor||J.bgColor,1),na.isAwake()?j(J.bgOpacity,1):j(1,1))}function h(a,b){G(l(),a,b)}function i(){m&&(n.remove(),V.show(),m=!1,na.isAwake()?na.setBgOpacity(J.bgOpacity,1,1):(na.setBgOpacity(1,1,1),na.disableHandles()),G(U,0,1))}function j(a,b){m&&(J.bgFade&&!b?n.animate({opacity:1-a},{queue:!1,duration:J.fadeTime}):n.css({opacity:1-a}))}function k(){J.shade?g():i(),na.isAwake()&&j(J.bgOpacity)}function l(){return n.children()}var m=!1,n=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),o={top:f(),left:f().height(T),right:f().height(T),bottom:f()};return{update:c,updateRaw:e,getShades:l,setBgColor:h,enable:g,disable:i,resize:b,refresh:k,opacity:j}}(),na=function(){function b(b){var c=a("<div />").css({position:"absolute",opacity:J.borderOpacity}).addClass(e(b));return W.append(c),c}function c(b,c){var d=a("<div />").mousedown(n(b)).css({cursor:b+"-resize",position:"absolute",zIndex:c}).addClass("ord-"+b);return ka.support&&d.bind("touchstart.jcrop",ka.createDragger(b)),X.append(d),d}function f(a){var b=J.handleSize,d=c(a,B++).css({opacity:J.handleOpacity}).addClass(e("handle"));return b&&d.width(b).height(b),d}function g(a){return c(a,B++).addClass("jcrop-dragbar")}function h(a){var b;for(b=0;b<a.length;b++)E[a[b]]=g(a[b])}function i(a){var c,d;for(d=0;d<a.length;d++){switch(a[d]){case"n":c="hline";break;case"s":c="hline bottom";break;case"e":c="vline right";break;case"w":c="vline"}C[a[d]]=b(c)}}function j(a){var b;for(b=0;b<a.length;b++)D[a[b]]=f(a[b])}function k(a,b){J.shade||V.css({top:d(-b),left:d(-a)}),Y.css({top:d(b),left:d(a)})}function l(a,b){Y.width(Math.round(a)).height(Math.round(b))}function m(){var a=la.getFixed();la.setPressed([a.x,a.y]),la.setCurrent([a.x2,a.y2]),o()}function o(a){if(A)return q(a)}function q(a){var b=la.getFixed();l(b.w,b.h),k(b.x,b.y),J.shade&&ma.updateRaw(b),A||s(),a?J.onSelect.call(qa,p(b)):J.onChange.call(qa,p(b))}function r(a,b,c){(A||b)&&(J.bgFade&&!c?R.animate({opacity:a},{queue:!1,duration:J.fadeTime}):R.css("opacity",a))}function s(){Y.show(),J.shade?ma.opacity(ja):r(ja,!0),A=!0}function u(){x(),Y.hide(),J.shade?ma.opacity(1):r(1),A=!1,J.onRelease.call(qa)}function v(){F&&X.show()}function w(){if(F=!0,J.allowResize)return X.show(),!0}function x(){F=!1,X.hide()}function y(a){a?(ea=!0,x()):(ea=!1,w())}function z(){y(!1),m()}var A,B=370,C={},D={},E={},F=!1;J.dragEdges&&a.isArray(J.createDragbars)&&h(J.createDragbars),a.isArray(J.createHandles)&&j(J.createHandles),J.drawBorders&&a.isArray(J.createBorders)&&i(J.createBorders),a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var G=t().mousedown(n("move")).css({cursor:"move",position:"absolute",zIndex:360});return ka.support&&G.bind("touchstart.jcrop",ka.createDragger("move")),W.append(G),x(),{updateVisible:o,update:q,release:u,refresh:m,isAwake:function(){return A},setCursor:function(a){G.css("cursor",a)},enableHandles:w,enableOnly:function(){F=!0},showHandles:v,disableHandles:x,animMode:y,setBgOpacity:r,done:z}}(),oa=function(){function b(b){ha.css({zIndex:450}),b?a(document).bind("touchmove.jcrop",g).bind("touchend.jcrop",i):m&&a(document).bind("mousemove.jcrop",d).bind("mouseup.jcrop",e)}function c(){ha.css({zIndex:290}),a(document).unbind(".jcrop")}function d(a){return k(h(a)),!1}function e(a){return a.preventDefault(),a.stopPropagation(),da&&(da=!1,l(h(a)),na.isAwake()&&J.onSelect.call(qa,p(la.getFixed())),c(),k=function(){},l=function(){}),!1}function f(a,c,d){return da=!0,k=a,l=c,b(d),!1}function g(a){return k(h(ka.cfilter(a))),!1}function i(a){return e(ka.cfilter(a))}function j(a){ha.css("cursor",a)}var k=function(){},l=function(){},m=J.trackDocument;return m||ha.mousemove(d).mouseup(e).mouseout(e),R.before(ha),{activateHandlers:f,setCursor:j}}(),pa=function(){function b(){J.keySupport}function c(a){f.hide()}function d(a,b,c){J.allowMove&&(la.moveOffset([b,c]),na.updateVisible(!0)),a.preventDefault(),a.stopPropagation()}function e(a){if(a.ctrlKey||a.metaKey)return!0;fa=!!a.shiftKey;var b=fa?10:1;switch(a.keyCode){case 37:d(a,-b,0);break;case 39:d(a,b,0);break;case 38:d(a,0,-b);break;case 40:d(a,0,b);break;case 27:J.allowSelect&&na.release();break;case 9:return!0}return!1}var f=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),g=a("<div />").css({position:"absolute",overflow:"hidden"}).append(f);return J.keySupport&&(f.keydown(e).blur(c),
M||!J.fixedSupport?(f.css({position:"absolute",left:"-20px"}),g.append(f).insertBefore(R)):f.insertBefore(R),f.hide()),{watchKeys:b}}();ka.support&&ha.bind("touchstart.jcrop",ka.newSelection),X.hide(),H(!0);var qa={setImage:F,animateTo:v,setSelect:w,setOptions:A,tellSelect:y,tellScaled:z,setClass:u,disable:B,enable:C,cancel:D,release:na.release,destroy:E,focus:pa.watchKeys,getBounds:function(){return[S*ba,T*ca]},getWidgetSize:function(){return[S,T]},getScaleFactor:function(){return[ba,ca]},getOptions:function(){return J},ui:{holder:U,selection:Y}};return L&&U.bind("selectstart",function(){return!1}),O.data("Jcrop",qa),qa},a.fn.Jcrop=function(b,c){var d;return this.each(function(){if(a(this).data("Jcrop")){if("api"===b)return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(b)}else"IMG"==this.tagName?a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d)}):(a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d))}),this},a.Jcrop.Loader=function(b,c,d){function e(){g.complete?(f.unbind(".jcloader"),a.isFunction(c)&&c.call(g)):window.setTimeout(e,50)}var f=a(b),g=f[0];f.bind("load.jcloader",e).bind("error.jcloader",function(b){f.unbind(".jcloader"),a.isFunction(d)&&d.call(g)}),g.complete&&a.isFunction(c)&&(f.unbind(".jcloader"),c.call(g))},a.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b(a.jQuery)}(this,function(a){"use strict";a.extendext=function(){var b,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1,l="default";for("boolean"==typeof h&&(k=h,h=arguments[i++]||{}),"string"==typeof h&&(l=a([h.toLowerCase(),"default"]).filter(["default","concat","replace","extend"])[0],h=arguments[i++]||{}),"object"==typeof h||a.isFunction(h)||(h={}),i===j&&(h=this,i--);i<j;i++)if(null!==(b=arguments[i]))if(a.isArray(b)&&"default"!==l)switch(g=h&&a.isArray(h)?h:[],l){case"concat":h=g.concat(a.extend(k,[],b));break;case"replace":h=a.extend(k,[],b);break;case"extend":b.forEach(function(b,c){if("object"==typeof b){var d=a.isArray(b)?[]:{};g[c]=a.extendext(k,l,g[c]||d,b)}else g.indexOf(b)===-1&&g.push(b)}),h=g}else for(c in b)d=h[c],e=b[c],h!==e&&(k&&e&&(a.isPlainObject(e)||(f=a.isArray(e)))?(f?(f=!1,g=d&&a.isArray(d)?d:[]):g=d&&a.isPlainObject(d)?d:{},h[c]=a.extendext(k,l,g,e)):void 0!==e&&(h[c]=e));return h}}),function(){"use strict";function a(b,c,d){return("string"==typeof c?c:c.toString()).replace(b.define||f,function(a,c,e,f){return 0===c.indexOf("def.")&&(c=c.substring(4)),c in d||(":"===e?(b.defineParams&&f.replace(b.defineParams,function(a,b,e){d[c]={arg:b,text:e}}),c in d||(d[c]=f)):new Function("def","def['"+c+"']="+f)(d)),""}).replace(b.use||f,function(c,e){b.useParams&&(e=e.replace(b.useParams,function(a,b,c,e){if(d[c]&&d[c].arg&&e){var f=(c+":"+e).replace(/'|\\/g,"_");return d.__exp=d.__exp||{},d.__exp[f]=d[c].text.replace(new RegExp("(^|[^\\w$])"+d[c].arg+"([^\\w$])","g"),"$1"+e+"$2"),b+"def.__exp['"+f+"']"}}));var f=new Function("def","return "+e)(d);return f?a(b,f,d):f})}function b(a){return a.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var c,d={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0};d.encodeHTMLSource=function(a){var b={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},c=a?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(a){return a?a.toString().replace(c,function(a){return b[a]||a}):""}},c=function(){return this||(0,eval)("this")}(),"undefined"!=typeof module&&module.exports?module.exports=d:"function"==typeof define&&define.amd?define(function(){return d}):c.doT=d;var e={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},f=/$^/;d.template=function(g,h,i){h=h||d.templateSettings;var j,k,l=h.append?e.append:e.split,m=0,n=h.use||h.define?a(h,g,i||{}):g;n=("var out='"+(h.strip?n.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):n).replace(/'|\\/g,"\\$&").replace(h.interpolate||f,function(a,c){return l.start+b(c)+l.end}).replace(h.encode||f,function(a,c){return j=!0,l.startencode+b(c)+l.end}).replace(h.conditional||f,function(a,c,d){return c?d?"';}else if("+b(d)+"){out+='":"';}else{out+='":d?"';if("+b(d)+"){out+='":"';}out+='"}).replace(h.iterate||f,function(a,c,d,e){return c?(m+=1,k=e||"i"+m,c=b(c),"';var arr"+m+"="+c+";if(arr"+m+"){var "+d+","+k+"=-1,l"+m+"=arr"+m+".length-1;while("+k+"<l"+m+"){"+d+"=arr"+m+"["+k+"+=1];out+='"):"';} } out+='"}).replace(h.evaluate||f,function(a,c){return"';"+b(c)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),j&&(h.selfcontained||!c||c._encodeHTML||(c._encodeHTML=d.encodeHTMLSource(h.doNotSkipEncoded)),n="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+d.encodeHTMLSource.toString()+"("+(h.doNotSkipEncoded||"")+"));"+n);try{return new Function(h.varname,n)}catch(a){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+n),a}},d.compile=function(a,b){return d.template(a,null,b)}}(),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.agGrid=b():a.agGrid=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=119)}([function(a,b,c){"use strict";function d(a,b){var c=[null].concat(b),d=a.bind.apply(a,c);return new d}function e(a,b,c){var d=m(a.constructor);d.postConstructMethods||(d.preConstructMethods=[]),d.preConstructMethods.push(b)}function f(a,b,c){var d=m(a.constructor);d.postConstructMethods||(d.postConstructMethods=[]),d.postConstructMethods.push(b)}function g(a,b,c){var d=m(a.constructor);d.preDestroyMethods||(d.preDestroyMethods=[]),d.preDestroyMethods.push(b)}function h(a){return function(b){var c=m(b);c.beanName=a}}function i(a){return function(b,c,d){k(b,a,!1,b,c,null)}}function j(a){return function(b,c,d){k(b,a,!0,b,c,null)}}function k(a,b,c,d,e,f){if(null===b)return void console.error("ag-Grid: Autowired name should not be null");if("number"==typeof f)return void console.error("ag-Grid: Autowired should be on an attribute");var g=m(a.constructor);g.agClassAttributes||(g.agClassAttributes=[]),g.agClassAttributes.push({attributeName:e,beanName:b,optional:c})}function l(a){return function(b,c,d){var e,f="function"==typeof b?b:b.constructor;if("number"==typeof d){var g=void 0;c?(e=m(f),g=c):(e=m(f),g="agConstructor"),e.autowireMethods||(e.autowireMethods={}),e.autowireMethods[g]||(e.autowireMethods[g]={}),e.autowireMethods[g][d]=a}}}function m(a){return a.hasOwnProperty("__agBeanMetaData")||(a.__agBeanMetaData={}),a.__agBeanMetaData}Object.defineProperty(b,"__esModule",{value:!0});var n=c(1),o=function(){function a(a,b){if(this.beans={},this.componentsMappedByName={},this.destroyed=!1,a&&a.beans){this.contextParams=a,this.logger=b,this.logger.log(">> creating ag-Application Context"),this.setupComponents(),this.createBeans();var c=n.Utils.mapObject(this.beans,function(a){return a.beanInstance});this.wireBeans(c),this.logger.log(">> ag-Application Context ready - component is alive")}}return a.prototype.setupComponents=function(){var a=this;this.contextParams.components&&this.contextParams.components.forEach(function(b){return a.addComponent(b)})},a.prototype.addComponent=function(a){var b=a.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c=b.toUpperCase();this.componentsMappedByName[c]=a.theClass},a.prototype.createComponent=function(a,b){var c=a.nodeName;if(this.componentsMappedByName&&this.componentsMappedByName[c]){var d=new this.componentsMappedByName[c];return this.wireBean(d,b),d}return null},a.prototype.wireBean=function(a,b){if(!a)throw Error("Can't wire to bean since it is null");this.wireBeans([a],b)},a.prototype.wireBeans=function(a,b){this.autoWireBeans(a),this.methodWireBeans(a),this.preConstruct(a),n.Utils.exists(b)&&a.forEach(b),this.postConstruct(a)},a.prototype.createBeans=function(){var a=this;this.contextParams.beans.forEach(this.createBeanEntry.bind(this)),this.contextParams.overrideBeans&&this.contextParams.overrideBeans.forEach(this.createBeanEntry.bind(this)),n.Utils.iterateObject(this.beans,function(b,c){var e;c.bean.__agBeanMetaData&&c.bean.__agBeanMetaData.autowireMethods&&c.bean.__agBeanMetaData.autowireMethods.agConstructor&&(e=c.bean.__agBeanMetaData.autowireMethods.agConstructor);var f=a.getBeansForParameters(e,c.bean.name),g=d(c.bean,f);c.beanInstance=g,a.logger.log("bean "+a.getBeanName(g)+" created")})},a.prototype.createBeanEntry=function(a){var b=a.__agBeanMetaData;if(!b){var c=void 0;return c=a.prototype.constructor?a.prototype.constructor.name:""+a,void console.error("context item "+c+" is not a bean")}var d={bean:a,beanInstance:null,beanName:b.beanName};this.beans[b.beanName]=d},a.prototype.autoWireBeans=function(a){var b=this;a.forEach(function(a){return b.autoWireBean(a)})},a.prototype.methodWireBeans=function(a){var b=this;a.forEach(function(a){if(!a)throw Error("Can't wire to bean since it is null");return b.methodWireBean(a)})},a.prototype.autoWireBean=function(a){for(var b=this,c=a,d=function(){var d=c.constructor;if(d.__agBeanMetaData&&d.__agBeanMetaData.agClassAttributes){var f=d.__agBeanMetaData.agClassAttributes;if(!f)return{value:void 0};var g=e.getBeanName(d);f.forEach(function(c){var d=b.lookupBeanInstance(g,c.beanName,c.optional);a[c.attributeName]=d})}c=Object.getPrototypeOf(c)?Object.getPrototypeOf(c):null},e=this;null!=c;){var f=d();if("object"==typeof f)return f.value}},a.prototype.getBeanName=function(a){if(a.__agBeanMetaData&&a.__agBeanMetaData.beanName)return a.__agBeanMetaData.beanName;var b=a.toString(),c=b.substring(9,b.indexOf("("));return c},a.prototype.methodWireBean=function(a){var b,c=this;a.constructor.__agBeanMetaData&&a.constructor.__agBeanMetaData.autowireMethods&&(b=a.constructor.__agBeanMetaData.autowireMethods),n.Utils.iterateObject(b,function(b,d){if("agConstructor"!==b){var e=c.getBeanName(a.constructor),f=c.getBeansForParameters(d,e);a[b].apply(a,f)}})},a.prototype.getBeansForParameters=function(a,b){var c=this,d=[];return a&&n.Utils.iterateObject(a,function(a,e){var f=c.lookupBeanInstance(b,e);d[Number(a)]=f}),d},a.prototype.lookupBeanInstance=function(a,b,c){if(void 0===c&&(c=!1),"context"===b)return this;if(this.contextParams.seed&&this.contextParams.seed.hasOwnProperty(b))return this.contextParams.seed[b];var d=this.beans[b];return d?d.beanInstance:(c||console.error("ag-Grid: unable to find bean reference "+b+" while initialising "+a),null)},a.prototype.postConstruct=function(a){a.forEach(function(a){a.constructor.__agBeanMetaData&&a.constructor.__agBeanMetaData.postConstructMethods&&a.constructor.__agBeanMetaData&&a.constructor.__agBeanMetaData.postConstructMethods.forEach(function(b){return a[b]()})})},a.prototype.preConstruct=function(a){a.forEach(function(a){a.constructor.__agBeanMetaData&&a.constructor.__agBeanMetaData.preConstructMethods&&a.constructor.__agBeanMetaData.preConstructMethods.forEach(function(b){return a[b]()})})},a.prototype.getBean=function(a){return this.lookupBeanInstance("getBean",a,!0)},a.prototype.destroy=function(){this.destroyed||(this.logger.log(">> Shutting down ag-Application Context"),n.Utils.iterateObject(this.beans,function(a,b){var c=b.beanInstance;c.constructor.__agBeanMetaData&&c.constructor.__agBeanMetaData.preDestroyMethods&&c.constructor.__agBeanMetaData.preDestroyMethods.forEach(function(a){return c[a]()})}),this.destroyed=!0,this.logger.log(">> ag-Application Context shut down - component is dead"))},a}();b.Context=o,b.PreConstruct=e,b.PostConstruct=f,b.PreDestroy=g,b.Bean=h,b.Autowired=i,b.Optional=j,b.Qualifier=l},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(9),e=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,f=/([^\s,]+)/g,g="__ag_Grid_Stop_Propagation",h=function(){function a(){this.timestamp=(new Date).getTime()}return a.prototype.print=function(a){var b=(new Date).getTime()-this.timestamp;console.log(a+" = "+b),this.timestamp=(new Date).getTime()},a}();b.Timer=h;var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},j=/[&<>"']/g,k=function(){function a(){}return a.doOnce=function(a,b){this.doOnceFlags[b]||(a(),this.doOnceFlags[b]=!0)},a.areEventsNear=function(a,b,c){if(0===c)return!1;var d=Math.abs(a.clientX-b.clientX),e=Math.abs(a.clientY-b.clientY);return Math.max(d,e)<=c},a.shallowCompare=function(a,b){if(this.missing(a)&&this.missing(b))return!0;if(this.missing(a)||this.missing(b))return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},a.getNameOfClass=function(a){var b=/function (.{1,})\(/,c=a.toString(),d=b.exec(c);return d&&d.length>1?d[1]:""},a.values=function(a){var b=[];return this.iterateObject(a,function(a,c){b.push(c)}),b},a.getValueUsingField=function(a,b,c){if(b&&a){if(c){for(var d=b.split("."),e=a,f=0;f<d.length;f++)if(e=e[d[f]],this.missing(e))return null;return e}return a[b]}},a.getScrollLeft=function(a,b){var c=a.scrollLeft;return b&&(c=Math.abs(c),(this.isBrowserSafari()||this.isBrowserChrome())&&(c=a.scrollWidth-a.clientWidth-c)),c},a.cleanNumber=function(a){return"string"==typeof a&&(a=parseInt(a)),a="number"==typeof a?Math.floor(a):null},a.setScrollLeft=function(a,b,c){c&&((this.isBrowserSafari()||this.isBrowserChrome())&&(b=a.scrollWidth-a.clientWidth-b),this.isBrowserFirefox()&&(b*=-1)),a.scrollLeft=b},a.iterateNamedNodeMap=function(a,b){if(a)for(var c=0;c<a.length;c++){var d=a[c];b(d.name,d.value)}},a.iterateObject=function(a,b){if(!this.missing(a))if(Array.isArray(a))a.forEach(function(a,c){b(c+"",a)});else for(var c=Object.keys(a),d=0;d<c.length;d++){var e=c[d],f=a[e];b(e,f)}},a.cloneObject=function(a){for(var b={},c=Object.keys(a),d=0;d<c.length;d++){var e=c[d],f=a[e];b[e]=f}return b},a.map=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=b(e);c.push(f)}return c},a.mapObject=function(b,c){var d=[];return a.iterateObject(b,function(a,b){d.push(c(b))}),d},a.forEach=function(a,b){if(a)for(var c=0;c<a.length;c++){var d=a[c];b(d,c)}},a.filter=function(a,b){var c=[];return a.forEach(function(a){b(a)&&c.push(a)}),c},a.getAllKeysInObjects=function(a){var b={};return a.forEach(function(a){a&&Object.keys(a).forEach(function(a){return b[a]=null})}),Object.keys(b)},a.mergeDeep=function(b,c){this.exists(c)&&this.iterateObject(c,function(c,d){var e=b[c];e!==d&&("object"==typeof e&&"object"==typeof d?a.mergeDeep(e,d):b[c]=d)})},a.assign=function(a){for(var b=this,c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];return c.forEach(function(c){b.exists(c)&&b.iterateObject(c,function(b,c){a[b]=c})}),a},a.parseYyyyMmDdToDate=function(a,b){try{if(!a)return null;if(a.indexOf(b)===-1)return null;var c=a.split(b);return 3!=c.length?null:new Date(Number(c[0]),Number(c[1])-1,Number(c[2]))}catch(a){return null}},a.serializeDateToYyyyMmDd=function(b,c){return b?b.getFullYear()+c+a.pad(b.getMonth()+1,2)+c+a.pad(b.getDate(),2):null},a.pad=function(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c},a.pushAll=function(a,b){this.missing(b)||this.missing(a)||b.forEach(function(b){return a.push(b)})},a.createArrayOfNumbers=function(a,b){for(var c=[],d=a;d<=b;d++)c.push(d);return c},a.getFunctionParameters=function(a){var b=a.toString().replace(e,""),c=b.slice(b.indexOf("(")+1,b.indexOf(")")).match(f);return null===c?[]:c},a.find=function(a,b,c){if(null===a||void 0===a)return null;if(!Array.isArray(a)){var d=this.values(a);return this.find(d,b,c)}for(var e,f=a,g=0;g<f.length;g++){var h=f[g];if("string"==typeof b){if(h[b]===c){e=h;break}}else{var i=b;if(i(h)){e=h;break}}}return e},a.toStrings=function(a){return this.map(a,function(a){return void 0!==a&&null!==a&&a.toString?a.toString():null})},a.iterateArray=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];b(d,c)}},a.isNode=function(a){return"function"==typeof Node?a instanceof Node:a&&"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName},a.isElement=function(a){return"function"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName},a.isNodeOrElement=function(a){return this.isNode(a)||this.isElement(a)},a.copyNodeList=function(a){for(var b=a?a.length:0,c=[],d=0;d<b;d++)c.push(a[d]);return c},a.isEventFromPrintableCharacter=function(c){var e=String.fromCharCode(c.charCode);if(this.isKeyPressed(c,d.Constants.KEY_NEW_LINE))return!1;if(b._.exists(c.key)){var f=1===c.key.length,g=a.isNumpadDelWithNumlockOnForEdgeOrIe(c);return f||g}return a.PRINTABLE_CHARACTERS.indexOf(e)>=0},a.addChangeListener=function(a,b){a.addEventListener("changed",b),a.addEventListener("paste",b),a.addEventListener("input",b),a.addEventListener("keydown",b),a.addEventListener("keyup",b)},a.makeNull=function(a){var b=a;return null===a||void 0===a||""===b?null:a},a.missing=function(a){return!this.exists(a)},a.missingOrEmpty=function(a){return this.missing(a)||0===a.length},a.missingOrEmptyObject=function(a){return this.missing(a)||0===Object.keys(a).length},a.exists=function(a){return null!==a&&void 0!==a&&""!==a},a.firstExistingValue=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];for(var d=0;d<a.length;d++){var e=a[d];if(b._.exists(e))return e}return null},a.anyExists=function(a){if(a)for(var b=0;b<a.length;b++)if(this.exists(a[b]))return!0;return!1},a.existsAndNotEmpty=function(a){return this.exists(a)&&a.length>0},a.removeAllChildren=function(a){if(a)for(;a.hasChildNodes();)a.removeChild(a.lastChild)},a.removeElement=function(a,b){this.removeFromParent(a.querySelector(b))},a.removeFromParent=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},a.isVisible=function(a){return null!==a.offsetParent},a.loadTemplate=function(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild},a.appendHtml=function(a,b){a.lastChild?a.insertAdjacentHTML("afterbegin",b):a.innerHTML=b},a.addOrRemoveCssClass=function(a,b,c){c?this.addCssClass(a,b):this.removeCssClass(a,b)},a.callIfPresent=function(a){a&&a()},a.addCssClass=function(a,b){var c=this;if(b&&0!==b.length){if(b.indexOf(" ")>=0)return void b.split(" ").forEach(function(b){return c.addCssClass(a,b)});if(a.classList)a.classList.contains(b)||a.classList.add(b);else if(a.className&&a.className.length>0){var d=a.className.split(" ");d.indexOf(b)<0&&(d.push(b),a.className=d.join(" "))}else a.className=b}},a.containsClass=function(a,b){if(a.classList)return a.classList.contains(b);if(a.className){var c=a.className===b,d=a.className.indexOf(" "+b+" ")>=0,e=0===a.className.indexOf(b+" "),f=a.className.lastIndexOf(" "+b)===a.className.length-b.length-1;return c||d||e||f}return!1},a.getElementAttribute=function(a,b){if(a.attributes){if(a.attributes[b]){var c=a.attributes[b];return c.value}return null}return null},a.offsetHeight=function(a){return a&&a.clientHeight?a.clientHeight:0},a.offsetWidth=function(a){return a&&a.clientWidth?a.clientWidth:0},a.sortNumberArray=function(a){a.sort(function(a,b){return a-b})},a.removeCssClass=function(a,b){if(a.classList)a.classList.contains(b)&&a.classList.remove(b);else if(a.className&&a.className.length>0){var c=a.className.split(" ");if(c.indexOf(b)>=0){for(;c.indexOf(b)>=0;)c.splice(c.indexOf(b),1);a.className=c.join(" ")}}},a.removeRepeatsFromArray=function(a,b){if(a)for(var c=a.length-2;c>=0;c--){var d=a[c]===b,e=a[c+1]===b;d&&e&&a.splice(c+1,1)}},a.removeFromArray=function(a,b){a.indexOf(b)>=0&&a.splice(a.indexOf(b),1)},a.removeAllFromArray=function(a,b){b.forEach(function(b){a.indexOf(b)>=0&&a.splice(a.indexOf(b),1)})},a.insertIntoArray=function(a,b,c){a.splice(c,0,b)},a.insertArrayIntoArray=function(a,b,c){if(!this.missing(a)&&!this.missing(b))for(var d=b.length-1;d>=0;d--){var e=b[d];this.insertIntoArray(a,e,c)}},a.moveInArray=function(a,b,c){var d=this;b.forEach(function(b){d.removeFromArray(a,b)}),b.slice().reverse().forEach(function(b){d.insertIntoArray(a,b,c)})},a.defaultComparator=function(a,b,c){function d(a,b){return a>b?1:a<b?-1:0}void 0===c&&(c=!1);var e=null===a||void 0===a,f=null===b||void 0===b;if(a&&a.toNumber&&(a=a.toNumber()),b&&b.toNumber&&(b=b.toNumber()),e&&f)return 0;if(e)return-1;if(f)return 1;if("string"==typeof a){if(!c)return d(a,b);try{return a.localeCompare(b)}catch(c){return d(a,b)}}return a<b?-1:a>b?1:0},a.compareArrays=function(a,b){if(this.missing(a)&&this.missing(b))return!0;if(this.missing(a)||this.missing(b))return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},a.ensureDomOrder=function(a,b,c){c&&c.nextSibling===b||(c?c.nextSibling?a.insertBefore(b,c.nextSibling):a.appendChild(b):a.firstChild&&a.insertBefore(b,a.firstChild))},a.insertWithDomOrder=function(a,b,c){c?c.nextSibling?a.insertBefore(b,c.nextSibling):a.appendChild(b):a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)},a.insertTemplateWithDomOrder=function(a,b,c){var d;return c?(c.insertAdjacentHTML("afterend",b),d=c.nextSibling):(a.firstChild?a.insertAdjacentHTML("afterbegin",b):a.innerHTML=b,d=a.firstChild),d},a.every=function(a,b){if(!a||0===a.length)return!0;for(var c=0;c<a.length;c++)if(!b(a[c]))return!1;return!0},a.toStringOrNull=function(a){return this.exists(a)&&a.toString?a.toString():null},a.formatWidth=function(a){return"number"==typeof a?a+"px":a},a.formatNumberTwoDecimalPlacesAndCommas=function(a){return"number"!=typeof a?"":(Math.round(100*a)/100).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},a.formatNumberCommas=function(a){return"number"!=typeof a?"":a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},a.prependDC=function(a,b){this.exists(a.firstChild)?a.insertBefore(b,a.firstChild):a.appendChild(b)},a.createIcon=function(a,b,c){var d=this.createIconNoSpan(a,b,c);if(d.className.indexOf("ag-icon")>-1)return d;var e=document.createElement("span");return e.appendChild(d),e},a.createIconNoSpan=function(a,b,c){var d;if(c&&c.getColDef().icons&&(d=c.getColDef().icons[a]),!d&&b.getIcons()&&(d=b.getIcons()[a]),d){var e=void 0;if("function"==typeof d)e=d();else{if("string"!=typeof d)throw"icon from grid options needs to be a string or a function";e=d}if("string"==typeof e)return this.loadTemplate(e);if(this.isNodeOrElement(e))return e;throw"iconRenderer should return back a string or a dom object"}var f=document.createElement("span"),g=this.iconNameClassMap[a];if(!g)throw new Error(a+" did not find class");return f.setAttribute("class","ag-icon ag-icon-"+g),f},a.addStylesToElement=function(a,b){var c=this;b&&Object.keys(b).forEach(function(d){var e=c.hyphenToCamelCase(d);a.style[e]=b[d]})},a.isHorizontalScrollShowing=function(a){return a.clientWidth<a.scrollWidth},a.isVerticalScrollShowing=function(a){return a.clientHeight<a.scrollHeight},a.getMaxDivHeight=function(){if(!document.body)return-1;var a=1e6,b=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,c=this.loadTemplate("<div/>");for(document.body.appendChild(c);;){var d=2*a;if(c.style.height=d+"px",d>b||c.clientHeight!==d)break;a=d}return document.body.removeChild(c),a},a.getScrollbarWidth=function(){var a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%",a.appendChild(c);var d=c.offsetWidth;return a.parentNode.removeChild(a),b-d},a.isKeyPressed=function(a,b){var c=a.which||a.keyCode;return c===b},a.setVisible=function(a,b){this.addOrRemoveCssClass(a,"ag-hidden",!b)},a.setHidden=function(a,b){this.addOrRemoveCssClass(a,"ag-visibility-hidden",b)},a.isBrowserIE=function(){return void 0===this.isIE&&(this.isIE=!!document.documentMode),this.isIE},a.isBrowserEdge=function(){return void 0===this.isEdge&&(this.isEdge=!this.isBrowserIE()&&!!window.StyleMedia),this.isEdge},a.isBrowserSafari=function(){if(void 0===this.isSafari){var a=window;this.isSafari=Object.prototype.toString.call(a.HTMLElement).indexOf("Constructor")>0||function(a){return"[object SafariRemoteNotification]"===a.toString()}(!a.safari||a.safari.pushNotification)}return this.isSafari},a.isBrowserChrome=function(){if(void 0===this.isChrome){var a=window;this.isChrome=!!a.chrome&&!!a.chrome.webstore}return this.isChrome},a.isBrowserFirefox=function(){if(void 0===this.isFirefox){var a=window;this.isFirefox="undefined"!=typeof a.InstallTrigger}return this.isFirefox},a.isUserAgentIPad=function(){return void 0===this.isIPad&&(this.isIPad=null!=navigator.userAgent.match(/iPad|iPhone/i)),this.isIPad},a.getTarget=function(a){var b=a;return b.target||b.srcElement},a.isElementInEventPath=function(a,c){if(!c||!a)return!1;var d=b._.getEventPath(c);return d.indexOf(a)>=0},a.createEventPath=function(a){for(var c=[],d=b._.getTarget(a);d;)c.push(d),d=d.parentElement;return c},a.addAgGridEventPath=function(a){a.__agGridEventPath=this.getEventPath(a)},a.getEventPath=function(a){var b=a;return a.deepPath?a.deepPath():b.path?b.path:b.composedPath?b.composedPath():b.__agGridEventPath?b.__agGridEventPath:this.createEventPath(a)},a.forEachSnapshotFirst=function(a,b){if(a){var c=a.slice(0);c.forEach(b)}},a.getBodyWidth=function(){return document.body?document.body.clientWidth:window.innerHeight?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:-1},a.getBodyHeight=function(){return document.body?document.body.clientHeight:window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:-1},a.setCheckboxState=function(a,b){"boolean"==typeof b?(a.checked=b,a.indeterminate=!1):a.indeterminate=!0},a.traverseNodesWithKey=function(a,b){function c(a){a.forEach(function(a){if(a.group||a.hasChildren()){d.push(a.key);var e=d.join("|");b(a,e),c(a.childrenAfterGroup),d.pop()}})}var d=[];c(a)},a.camelCaseToHyphen=function(a){return null===a||void 0===a?null:a.replace(/([A-Z])/g,function(a){return"-"+a[0].toLowerCase()})},a.hyphenToCamelCase=function(a){return null===a||void 0===a?null:a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})},a.cssStyleObjectToMarkup=function(a){var b=this;if(!a)return"";var c=[];return this.iterateObject(a,function(a,d){var e=b.camelCaseToHyphen(a);c.push(e+": "+d+";")}),c.join(" ")},a.isNumeric=function(a){return""!==a&&(!isNaN(parseFloat(a))&&isFinite(a))},a.escape=function(a){return null!==a&&void 0!==a&&a.replace?a.replace(j,function(a){return i[a]}):a},a.normalizeWheel=function(a){var b=10,c=40,d=800,e=0,f=0,g=0,h=0;return"detail"in a&&(f=a.detail),"wheelDelta"in a&&(f=-a.wheelDelta/120),"wheelDeltaY"in a&&(f=-a.wheelDeltaY/120),"wheelDeltaX"in a&&(e=-a.wheelDeltaX/120),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(e=f,f=0),g=e*b,h=f*b,"deltaY"in a&&(h=a.deltaY),"deltaX"in a&&(g=a.deltaX),(g||h)&&a.deltaMode&&(1==a.deltaMode?(g*=c,h*=c):(g*=d,h*=d)),g&&!e&&(e=g<1?-1:1),h&&!f&&(f=h<1?-1:1),{spinX:e,spinY:f,pixelX:g,pixelY:h}},a.debounce=function(a,b,c){void 0===c&&(c=!1);var d;return function(){var e=this,f=arguments,g=c&&!d;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),g&&a.apply(e,f)}},a.stopPropagationForAgGrid=function(a){a[g]=!0},a.isStopPropagationForAgGrid=function(a){return a[g]===!0},a.executeInAWhile=function(a){this.executeAfter(a,400)},a.executeNextVMTurn=function(a){this.executeAfter(a,0)},a.executeAfter=function(a,b){a.length>0&&setTimeout(function(){a.forEach(function(a){return a()})},b)},a.referenceCompare=function(a,b){return null==a&&null==b||(null!=a||!b)&&((!a||null!=b)&&a===b)},a.get=function(b,c,d){if(null==b)return d;if(c.indexOf(".")>-1){var e=c.split("."),f=e[0],g=b[f];return null!=g?a.get(g,e.slice(1,e.length).join("."),d):d}var g=b[c];return null!=g?g:d},a.addSafePassiveEventListener=function(b,c,d){b.addEventListener(c,d,a.passiveEvents.indexOf(c)>-1?{passive:!0}:void 0)},a.camelCaseToHumanText=function(a){if(null==a)return null;var b=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g,c=a.replace(b,"$1$4 $2$3$5").replace("."," ").split(" ");return c.map(function(a){return a.substring(0,1).toUpperCase()+(a.length>1?a.substring(1,a.length):"")}).join(" ")},a.message=function(a){var b=document.createElement("div");b.innerHTML=a;var c=document.querySelector("#__ag__message");if(!c){var d='<div id="__ag__message" style="display: inline-block; position: absolute; top: 0px; left: 0px; color: white; background-color: black; z-index: 20; padding: 2px; border: 1px solid darkred; height: 200px; overflow-y: auto;"></div>';c=this.loadTemplate(d),document.body&&document.body.appendChild(c)}c.appendChild(b)},a.sortRowNodesByOrder=function(a,b){a&&a.sort(function(a,c){var d=b[a.id],e=b[c.id],f=void 0!==d,g=void 0!==e,h=f&&g,i=!f&&!g;return h?d-e:i?a.id>c.id?1:-1:f?1:-1})},a.fuzzyCheckStrings=function(a,b,c){var d=this,e={},f=a.filter(function(a){return!b.some(function(b){return b===a})});return f.length>0&&f.forEach(function(a){return e[a]=d.fuzzySuggestions(a,b,c)}),e},a.fuzzySuggestions=function(a,c,d){var e=d.slice(0);return e.sort(function(c,d){var e=b._.string_similarity(c.toLowerCase(),a.toLowerCase()),f=b._.string_similarity(d.toLowerCase(),a.toLowerCase());return e>f?-1:e===f?0:1}),e},a.get_bigrams=function(a){var b,c,d,e,f;for(e=a.toLowerCase(),f=new Array(e.length-1),b=c=0,d=f.length;c<=d;b=c+=1)f[b]=e.slice(b,b+2);return f},a.isNumpadDelWithNumlockOnForEdgeOrIe=function(b){return!(!a.isBrowserEdge()&&!a.isBrowserIE())&&(b.key===a.NUMPAD_DEL_NUMLOCK_ON_KEY&&b.charCode===a.NUMPAD_DEL_NUMLOCK_ON_CHARCODE)},a.PRINTABLE_CHARACTERS="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890!\"¬£$%^&*()_+-=[];'#,./\\|<>?:@~{}",a.NUMPAD_DEL_NUMLOCK_ON_KEY="Del",a.NUMPAD_DEL_NUMLOCK_ON_CHARCODE=46,a.doOnceFlags={},a.iconNameClassMap={columnMovePin:"pin",columnMoveAdd:"plus",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"expanded",groupExpanded:"contracted",checkboxChecked:"checkbox-checked",checkboxUnchecked:"checkbox-unchecked",checkboxIndeterminate:"checkbox-indeterminate",checkboxCheckedReadOnly:"checkbox-checked-readonly",checkboxUncheckedReadOnly:"checkbox-unchecked-readonly",checkboxIndeterminateReadOnly:"checkbox-indeterminate-readonly",
groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"},a.passiveEvents=["touchstart","touchend","touchmove","touchcancel"],a.string_similarity=function(b,c){var d,e,f,g,h,i,j,k,l,m;if(b.length>0&&c.length>0){for(i=a.get_bigrams(b),j=a.get_bigrams(c),k=i.length+j.length,d=0,e=0,g=i.length;e<g;e++)for(l=i[e],f=0,h=j.length;f<h;f++)m=j[f],l===m&&d++;if(d>0)return 2*d/k}return 0},a}();b.Utils=k;var l=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=1),this.nextValue=a,this.step=b}return a.prototype.next=function(){var a=this.nextValue;return this.nextValue+=this.step,a},a.prototype.peek=function(){return this.nextValue},a.prototype.skip=function(a){this.nextValue+=a},a}();b.NumberSequence=l,b._=k;var m;!function(a){a[a.IN_PROGRESS=0]="IN_PROGRESS",a[a.RESOLVED=1]="RESOLVED"}(m=b.PromiseStatus||(b.PromiseStatus={}));var n=function(){function a(a){this.status=m.IN_PROGRESS,this.resolution=null,this.listOfWaiters=[],a(this.onDone.bind(this),this.onReject.bind(this))}return a.all=function(b){return new a(function(a){var c=[],d=b.length;b.forEach(function(b,e){b.then(function(b){d--,c[e]=b,0==d&&a(c)}),c.push(null)})})},a.resolve=function(b){return new a(function(a){return a(b)})},a.external=function(){var b,c=new a(function(a){b=a});return{promise:c,resolve:function(a){b(a)}}},a.prototype.then=function(a){this.status===m.IN_PROGRESS?this.listOfWaiters.push(a):a(this.resolution)},a.prototype.firstOneOnly=function(a){this.status===m.IN_PROGRESS?0===this.listOfWaiters.length&&this.listOfWaiters.push(a):a(this.resolution)},a.prototype.map=function(b){var c=this;return new a(function(a){c.then(function(c){a(b(c))})})},a.prototype.resolveNow=function(a,b){return this.status==m.IN_PROGRESS?a:b(this.resolution)},a.prototype.onDone=function(a){this.status=m.RESOLVED,this.resolution=a,this.listOfWaiters.forEach(function(b){return b(a)})},a.prototype.onReject=function(a){console.warn("TBI")},a}();b.Promise=n},function(a,b,c){"use strict";function d(a){return a===!0||"true"===a}function e(a,b){return a>=0?a:b}function f(a,b){return a>0?a:b}var g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},i=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var j=c(3),k=c(9),l=c(62),m=c(6),n=c(0),o=c(7),p=c(4),q=c(1),r=c(41),s=c(90),t=c(106),u=c(25),v=c(79),w=25,x=300,y=5,z=5,A=function(){function a(){this.propertyEventService=new j.EventService,this.domDataKey="__AG_"+Math.random().toString()}return b=a,a.prototype.agWire=function(a,b){this.gridOptions.api=a,this.gridOptions.columnApi=b,this.checkForDeprecated()},a.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null},a.prototype.init=function(){this.gridOptions.suppressPropertyNamesCheck!==!0&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties());var a=this.useAsyncEvents();this.eventService.addGlobalListener(this.globalEventHandler.bind(this),a),this.isGroupSelectsChildren()&&this.isSuppressParentsInRowNodes()&&console.warn("ag-Grid: groupSelectsChildren does not work wth suppressParentsInRowNodes, this selection method needs the part in rowNode to work"),this.isGroupSelectsChildren()&&(this.isRowSelectionMulti()||console.warn("ag-Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.isRowModelServerSide()&&console.warn("ag-Grid: group selects children is NOT support for Server Side Row Model. This is because the rows are lazy loaded, so selecting a group is not possible asthe grid has no way of knowing what the children are.")),this.isGroupRemoveSingleChildren()&&this.isGroupHideOpenParents()&&console.warn("ag-Grid: groupRemoveSingleChildren and groupHideOpenParents do not work with each other, you need to pick one. And don't ask us how to us these together on our support forum either you will get the same answer!")},a.prototype.checkColumnDefProperties=function(){var a=this;null!=this.gridOptions.columnDefs&&this.gridOptions.columnDefs.forEach(function(b){var c=Object.getOwnPropertyNames(b),d=t.ColDefUtil.ALL_PROPERTIES;a.checkProperties(c,d,d,"colDef","https://www.ag-grid.com/javascript-grid-column-properties/")})},a.prototype.checkGridOptionsProperties=function(){var a=Object.getOwnPropertyNames(this.gridOptions),b=s.PropertyKeys.ALL_PROPERTIES;Object.keys(u.Events).forEach(function(a){return b.push(l.ComponentUtil.getCallbackForEvent(u.Events[a]))});var c=b.concat("api","columnApi");this.checkProperties(a,c,b,"gridOptions","https://www.ag-grid.com/javascript-grid-properties/")},a.prototype.checkProperties=function(a,b,c,d,e){var f=q.Utils.fuzzyCheckStrings(a,b,c),g=Object.keys(f);g.forEach(function(a){var b=f[a];console.warn("ag-grid: invalid "+d+" property '"+a+"' did you mean any of these: "+b.slice(0,8).join(","))}),g.length>0&&console.warn("ag-grid: to see all the valid "+d+" properties please check: "+e)},a.prototype.getDomData=function(a,b){var c=a[this.domDataKey];return c?c[b]:void 0},a.prototype.setDomData=function(a,b,c){var d=a[this.domDataKey];q.Utils.missing(d)&&(d={},a[this.domDataKey]=d),d[b]=c},a.prototype.isEnterprise=function(){return this.enterprise},a.prototype.isRowSelection=function(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection},a.prototype.isRowDeselection=function(){return d(this.gridOptions.rowDeselection)},a.prototype.isRowSelectionMulti=function(){return"multiple"===this.gridOptions.rowSelection},a.prototype.isRowMultiSelectWithClick=function(){return d(this.gridOptions.rowMultiSelectWithClick)},a.prototype.getContext=function(){return this.gridOptions.context},a.prototype.isPivotMode=function(){return d(this.gridOptions.pivotMode)},a.prototype.isPivotTotals=function(){return d(this.gridOptions.pivotTotals)},a.prototype.getPivotColumnGroupTotals=function(){return this.gridOptions.pivotColumnGroupTotals},a.prototype.getPivotRowTotals=function(){return this.gridOptions.pivotRowTotals},a.prototype.isRowModelInfinite=function(){return this.gridOptions.rowModelType===k.Constants.ROW_MODEL_TYPE_INFINITE},a.prototype.isRowModelViewport=function(){return this.gridOptions.rowModelType===k.Constants.ROW_MODEL_TYPE_VIEWPORT},a.prototype.isRowModelServerSide=function(){return this.gridOptions.rowModelType===k.Constants.ROW_MODEL_TYPE_SERVER_SIDE},a.prototype.isRowModelDefault=function(){return q.Utils.missing(this.gridOptions.rowModelType)||this.gridOptions.rowModelType===k.Constants.ROW_MODEL_TYPE_CLIENT_SIDE||this.gridOptions.rowModelType===k.Constants.DEPRECATED_ROW_MODEL_TYPE_NORMAL},a.prototype.isFullRowEdit=function(){return"fullRow"===this.gridOptions.editType},a.prototype.isSuppressFocusAfterRefresh=function(){return d(this.gridOptions.suppressFocusAfterRefresh)},a.prototype.isShowToolPanel=function(){return d(this.gridOptions.showToolPanel)},a.prototype.isToolPanelSuppressValues=function(){return d(this.gridOptions.toolPanelSuppressValues)},a.prototype.isToolPanelSuppressPivots=function(){return d(this.gridOptions.toolPanelSuppressPivots)||this.isTreeData()},a.prototype.isToolPanelSuppressRowGroups=function(){return d(this.gridOptions.toolPanelSuppressRowGroups)||this.isTreeData()},a.prototype.isToolPanelSuppressSideButtons=function(){return d(this.gridOptions.toolPanelSuppressSideButtons)},a.prototype.isToolPanelSuppressPivotMode=function(){return d(this.gridOptions.toolPanelSuppressPivotMode)||this.isTreeData()},a.prototype.isContractColumnSelection=function(){return d(this.gridOptions.contractColumnSelection)},a.prototype.isToolPanelSuppressColumnFilter=function(){return d(this.gridOptions.toolPanelSuppressColumnFilter)},a.prototype.isToolPanelSuppressColumnSelectAll=function(){return d(this.gridOptions.toolPanelSuppressColumnSelectAll)},a.prototype.isToolPanelSuppressColumnExpandAll=function(){return d(this.gridOptions.toolPanelSuppressColumnExpandAll)},a.prototype.isSuppressTouch=function(){return d(this.gridOptions.suppressTouch)},a.prototype.isSuppressRowTransform=function(){return d(this.gridOptions.suppressRowTransform)},a.prototype.useAsyncEvents=function(){return!d(this.gridOptions.suppressAsyncEvents)},a.prototype.isEnableCellChangeFlash=function(){return d(this.gridOptions.enableCellChangeFlash)},a.prototype.isGroupSelectsChildren=function(){var a=d(this.gridOptions.groupSelectsChildren);return a&&this.isTreeData()?(console.warn("ag-Grid: groupSelectsChildren does not work with tree data"),!1):a},a.prototype.isSuppressRowHoverHighlight=function(){return d(this.gridOptions.suppressRowHoverHighlight)},a.prototype.isGroupSelectsFiltered=function(){return d(this.gridOptions.groupSelectsFiltered)},a.prototype.isGroupHideOpenParents=function(){return d(this.gridOptions.groupHideOpenParents)},a.prototype.isGroupMultiAutoColumn=function(){return d(this.gridOptions.groupMultiAutoColumn)||d(this.gridOptions.groupHideOpenParents)},a.prototype.isGroupRemoveSingleChildren=function(){return d(this.gridOptions.groupRemoveSingleChildren)},a.prototype.isGroupRemoveLowestSingleChildren=function(){return d(this.gridOptions.groupRemoveLowestSingleChildren)},a.prototype.isGroupIncludeFooter=function(){return d(this.gridOptions.groupIncludeFooter)},a.prototype.isGroupIncludeTotalFooter=function(){return d(this.gridOptions.groupIncludeTotalFooter)},a.prototype.isGroupSuppressBlankHeader=function(){return d(this.gridOptions.groupSuppressBlankHeader)},a.prototype.isSuppressRowClickSelection=function(){return d(this.gridOptions.suppressRowClickSelection)},a.prototype.isSuppressCellSelection=function(){return d(this.gridOptions.suppressCellSelection)},a.prototype.isSuppressMultiSort=function(){return d(this.gridOptions.suppressMultiSort)},a.prototype.isMultiSortKeyCtrl=function(){return"ctrl"===this.gridOptions.multiSortKey},a.prototype.isGroupSuppressAutoColumn=function(){return d(this.gridOptions.groupSuppressAutoColumn)},a.prototype.isSuppressDragLeaveHidesColumns=function(){return d(this.gridOptions.suppressDragLeaveHidesColumns)},a.prototype.isSuppressScrollOnNewData=function(){return d(this.gridOptions.suppressScrollOnNewData)},a.prototype.isRowDragManaged=function(){return d(this.gridOptions.rowDragManaged)},a.prototype.isSuppressRowDrag=function(){return d(this.gridOptions.suppressRowDrag)},a.prototype.isGridAutoHeight=function(){return d(this.gridOptions.gridAutoHeight)},a.prototype.isSuppressHorizontalScroll=function(){return d(this.gridOptions.suppressHorizontalScroll)},a.prototype.isSuppressLoadingOverlay=function(){return d(this.gridOptions.suppressLoadingOverlay)},a.prototype.isSuppressNoRowsOverlay=function(){return d(this.gridOptions.suppressNoRowsOverlay)},a.prototype.isSuppressFieldDotNotation=function(){return d(this.gridOptions.suppressFieldDotNotation)},a.prototype.getPinnedTopRowData=function(){return this.gridOptions.pinnedTopRowData},a.prototype.getPinnedBottomRowData=function(){return this.gridOptions.pinnedBottomRowData},a.prototype.isFunctionsPassive=function(){return d(this.gridOptions.functionsPassive)},a.prototype.isSuppressTabbing=function(){return d(this.gridOptions.suppressTabbing)},a.prototype.isSuppressChangeDetection=function(){return d(this.gridOptions.suppressChangeDetection)},a.prototype.isSuppressAnimationFrame=function(){return d(this.gridOptions.suppressAnimationFrame)},a.prototype.getQuickFilterText=function(){return this.gridOptions.quickFilterText},a.prototype.isCacheQuickFilter=function(){return d(this.gridOptions.cacheQuickFilter)},a.prototype.isUnSortIcon=function(){return d(this.gridOptions.unSortIcon)},a.prototype.isSuppressMenuHide=function(){return d(this.gridOptions.suppressMenuHide)},a.prototype.isEnterMovesDownAfterEdit=function(){return d(this.gridOptions.enterMovesDownAfterEdit)},a.prototype.isEnterMovesDown=function(){return d(this.gridOptions.enterMovesDown)},a.prototype.getRowStyle=function(){return this.gridOptions.rowStyle},a.prototype.getRowClass=function(){return this.gridOptions.rowClass},a.prototype.getRowStyleFunc=function(){return this.gridOptions.getRowStyle},a.prototype.getRowClassFunc=function(){return this.gridOptions.getRowClass},a.prototype.rowClassRules=function(){return this.gridOptions.rowClassRules},a.prototype.getPopupParent=function(){return this.gridOptions.popupParent},a.prototype.getPostProcessPopupFunc=function(){return this.gridOptions.postProcessPopup},a.prototype.getDoesDataFlowerFunc=function(){return this.gridOptions.doesDataFlower},a.prototype.getPaginationNumberFormatterFunc=function(){return this.gridOptions.paginationNumberFormatter},a.prototype.getChildCountFunc=function(){return this.gridOptions.getChildCount},a.prototype.getDefaultGroupSortComparator=function(){return this.gridOptions.defaultGroupSortComparator},a.prototype.getIsFullWidthCellFunc=function(){return this.gridOptions.isFullWidthCell},a.prototype.getFullWidthCellRendererParams=function(){return this.gridOptions.fullWidthCellRendererParams},a.prototype.isEmbedFullWidthRows=function(){return d(this.gridOptions.embedFullWidthRows)},a.prototype.getBusinessKeyForNodeFunc=function(){return this.gridOptions.getBusinessKeyForNode},a.prototype.getApi=function(){return this.gridOptions.api},a.prototype.getColumnApi=function(){return this.gridOptions.columnApi},a.prototype.isDeltaRowDataMode=function(){return d(this.gridOptions.deltaRowDataMode)},a.prototype.isEnsureDomOrder=function(){return d(this.gridOptions.ensureDomOrder)},a.prototype.isEnableColResize=function(){return d(this.gridOptions.enableColResize)},a.prototype.isSingleClickEdit=function(){return d(this.gridOptions.singleClickEdit)},a.prototype.isSuppressClickEdit=function(){return d(this.gridOptions.suppressClickEdit)},a.prototype.isStopEditingWhenGridLosesFocus=function(){return d(this.gridOptions.stopEditingWhenGridLosesFocus)},a.prototype.getGroupDefaultExpanded=function(){return this.gridOptions.groupDefaultExpanded},a.prototype.getMaxConcurrentDatasourceRequests=function(){return this.gridOptions.maxConcurrentDatasourceRequests},a.prototype.getMaxBlocksInCache=function(){return this.gridOptions.maxBlocksInCache},a.prototype.getCacheOverflowSize=function(){return this.gridOptions.cacheOverflowSize},a.prototype.getPaginationPageSize=function(){return this.gridOptions.paginationPageSize},a.prototype.getCacheBlockSize=function(){return this.gridOptions.cacheBlockSize},a.prototype.getInfiniteInitialRowCount=function(){return this.gridOptions.infiniteInitialRowCount},a.prototype.isPurgeClosedRowNodes=function(){return d(this.gridOptions.purgeClosedRowNodes)},a.prototype.isSuppressPaginationPanel=function(){return d(this.gridOptions.suppressPaginationPanel)},a.prototype.getRowData=function(){return this.gridOptions.rowData},a.prototype.isGroupUseEntireRow=function(){return d(this.gridOptions.groupUseEntireRow)},a.prototype.isEnableRtl=function(){return d(this.gridOptions.enableRtl)},a.prototype.getAutoGroupColumnDef=function(){return this.gridOptions.autoGroupColumnDef},a.prototype.isGroupSuppressRow=function(){return d(this.gridOptions.groupSuppressRow)},a.prototype.getRowGroupPanelShow=function(){return this.gridOptions.rowGroupPanelShow},a.prototype.getPivotPanelShow=function(){return this.gridOptions.pivotPanelShow},a.prototype.isAngularCompileRows=function(){return d(this.gridOptions.angularCompileRows)},a.prototype.isAngularCompileFilters=function(){return d(this.gridOptions.angularCompileFilters)},a.prototype.isAngularCompileHeaders=function(){return d(this.gridOptions.angularCompileHeaders)},a.prototype.isDebug=function(){return d(this.gridOptions.debug)},a.prototype.getColumnDefs=function(){return this.gridOptions.columnDefs},a.prototype.getColumnTypes=function(){return this.gridOptions.columnTypes},a.prototype.getDatasource=function(){return this.gridOptions.datasource},a.prototype.getViewportDatasource=function(){return this.gridOptions.viewportDatasource},a.prototype.getServerSideDatasource=function(){return this.gridOptions.serverSideDatasource},a.prototype.isEnableSorting=function(){return d(this.gridOptions.enableSorting)||d(this.gridOptions.enableServerSideSorting)},a.prototype.isAccentedSort=function(){return d(this.gridOptions.accentedSort)},a.prototype.isEnableCellExpressions=function(){return d(this.gridOptions.enableCellExpressions)},a.prototype.isEnableGroupEdit=function(){return d(this.gridOptions.enableGroupEdit)},a.prototype.isSuppressMiddleClickScrolls=function(){return d(this.gridOptions.suppressMiddleClickScrolls)},a.prototype.isSuppressPreventDefaultOnMouseWheel=function(){return d(this.gridOptions.suppressPreventDefaultOnMouseWheel)},a.prototype.isSuppressColumnVirtualisation=function(){return d(this.gridOptions.suppressColumnVirtualisation)},a.prototype.isSuppressContextMenu=function(){return d(this.gridOptions.suppressContextMenu)},a.prototype.isAllowContextMenuWithControlKey=function(){return d(this.gridOptions.allowContextMenuWithControlKey)},a.prototype.isSuppressCopyRowsToClipboard=function(){return d(this.gridOptions.suppressCopyRowsToClipboard)},a.prototype.isSuppressClipboardPaste=function(){return d(this.gridOptions.suppressClipboardPaste)},a.prototype.isEnableFilter=function(){return d(this.gridOptions.enableFilter)||d(this.gridOptions.enableServerSideFilter)},a.prototype.isPagination=function(){return d(this.gridOptions.pagination)},a.prototype.isSuppressEnterpriseResetOnNewColumns=function(){return d(this.gridOptions.suppressEnterpriseResetOnNewColumns)},a.prototype.getProcessDataFromClipboardFunc=function(){return this.gridOptions.processDataFromClipboard},a.prototype.getBatchUpdateWaitMillis=function(){return q.Utils.exists(this.gridOptions.batchUpdateWaitMillis)?this.gridOptions.batchUpdateWaitMillis:k.Constants.BATCH_WAIT_MILLIS},a.prototype.isEnableServerSideFilter=function(){return this.gridOptions.enableServerSideFilter},a.prototype.isEnableServerSideSorting=function(){return d(this.gridOptions.enableServerSideSorting)},a.prototype.isSuppressMovableColumns=function(){return d(this.gridOptions.suppressMovableColumns)},a.prototype.isAnimateRows=function(){return!this.isEnsureDomOrder()&&d(this.gridOptions.animateRows)},a.prototype.isSuppressColumnMoveAnimation=function(){return d(this.gridOptions.suppressColumnMoveAnimation)},a.prototype.isSuppressAggFuncInHeader=function(){return d(this.gridOptions.suppressAggFuncInHeader)},a.prototype.isSuppressAggAtRootLevel=function(){return d(this.gridOptions.suppressAggAtRootLevel)},a.prototype.isEnableRangeSelection=function(){return d(this.gridOptions.enableRangeSelection)},a.prototype.isSuppressMultiRangeSelection=function(){return d(this.gridOptions.suppressMultiRangeSelection)},a.prototype.isPaginationAutoPageSize=function(){return d(this.gridOptions.paginationAutoPageSize)},a.prototype.isRememberGroupStateWhenNewData=function(){return d(this.gridOptions.rememberGroupStateWhenNewData)},a.prototype.getIcons=function(){return this.gridOptions.icons},a.prototype.getAggFuncs=function(){return this.gridOptions.aggFuncs},a.prototype.getSortingOrder=function(){return this.gridOptions.sortingOrder},a.prototype.getAlignedGrids=function(){return this.gridOptions.alignedGrids},a.prototype.isMasterDetail=function(){var a=this,b=d(this.gridOptions.masterDetail);return q.Utils.doOnce(function(){b&&!a.enterprise&&console.warn("ag-grid: Master Detail is an Enterprise feature of ag-Grid.")},"MasterDetailEnterpriseCheck"),b&&this.enterprise},a.prototype.getIsRowMasterFunc=function(){return this.gridOptions.isRowMaster},a.prototype.getIsRowSelectableFunc=function(){return this.gridOptions.isRowSelectable},a.prototype.getGroupRowRendererParams=function(){return this.gridOptions.groupRowRendererParams},a.prototype.getOverlayLoadingTemplate=function(){return this.gridOptions.overlayLoadingTemplate},a.prototype.getOverlayNoRowsTemplate=function(){return this.gridOptions.overlayNoRowsTemplate},a.prototype.isSuppressAutoSize=function(){return d(this.gridOptions.suppressAutoSize)},a.prototype.isSuppressParentsInRowNodes=function(){return d(this.gridOptions.suppressParentsInRowNodes)},a.prototype.isEnableStatusBar=function(){return d(this.gridOptions.enableStatusBar)},a.prototype.isAlwaysShowStatusBar=function(){return d(this.gridOptions.alwaysShowStatusBar)},a.prototype.isFunctionsReadOnly=function(){return d(this.gridOptions.functionsReadOnly)},a.prototype.isFloatingFilter=function(){return this.gridOptions.floatingFilter},a.prototype.isEnableOldSetFilterModel=function(){return d(this.gridOptions.enableOldSetFilterModel)},a.prototype.getDefaultColDef=function(){return this.gridOptions.defaultColDef},a.prototype.getDefaultColGroupDef=function(){return this.gridOptions.defaultColGroupDef},a.prototype.getDefaultExportParams=function(){return this.gridOptions.defaultExportParams},a.prototype.isSuppressCsvExport=function(){return d(this.gridOptions.suppressCsvExport)},a.prototype.isSuppressExcelExport=function(){return d(this.gridOptions.suppressExcelExport)},a.prototype.isSuppressMakeColumnVisibleAfterUnGroup=function(){return d(this.gridOptions.suppressMakeColumnVisibleAfterUnGroup)},a.prototype.getNodeChildDetailsFunc=function(){return this.gridOptions.getNodeChildDetails},a.prototype.getDataPathFunc=function(){return this.gridOptions.getDataPath},a.prototype.getGroupRowAggNodesFunc=function(){return this.gridOptions.groupRowAggNodes},a.prototype.getContextMenuItemsFunc=function(){return this.gridOptions.getContextMenuItems},a.prototype.getMainMenuItemsFunc=function(){return this.gridOptions.getMainMenuItems},a.prototype.getRowNodeIdFunc=function(){return this.gridOptions.getRowNodeId},a.prototype.getNavigateToNextCellFunc=function(){return this.gridOptions.navigateToNextCell},a.prototype.getTabToNextCellFunc=function(){return this.gridOptions.tabToNextCell},a.prototype.isTreeData=function(){return d(this.gridOptions.treeData)},a.prototype.isValueCache=function(){return d(this.gridOptions.valueCache)},a.prototype.isValueCacheNeverExpires=function(){return d(this.gridOptions.valueCacheNeverExpires)},a.prototype.isAggregateOnlyChangedColumns=function(){return d(this.gridOptions.aggregateOnlyChangedColumns)},a.prototype.getProcessSecondaryColDefFunc=function(){return this.gridOptions.processSecondaryColDef},a.prototype.getProcessSecondaryColGroupDefFunc=function(){return this.gridOptions.processSecondaryColGroupDef},a.prototype.getSendToClipboardFunc=function(){return this.gridOptions.sendToClipboard},a.prototype.getProcessRowPostCreateFunc=function(){return this.gridOptions.processRowPostCreate},a.prototype.getProcessCellForClipboardFunc=function(){return this.gridOptions.processCellForClipboard},a.prototype.getProcessHeaderForClipboardFunc=function(){return this.gridOptions.processHeaderForClipboard},a.prototype.getProcessCellFromClipboardFunc=function(){return this.gridOptions.processCellFromClipboard},a.prototype.getViewportRowModelPageSize=function(){return f(this.gridOptions.viewportRowModelPageSize,y)},a.prototype.getViewportRowModelBufferSize=function(){return e(this.gridOptions.viewportRowModelBufferSize,z)},a.prototype.getPostSortFunc=function(){return this.gridOptions.postSort},a.prototype.getClipboardDeliminator=function(){return q.Utils.exists(this.gridOptions.clipboardDeliminator)?this.gridOptions.clipboardDeliminator:"\t"},a.prototype.setProperty=function(a,b){var c=this.gridOptions,d=c[a];if(d!==b){c[a]=b;var e={type:a,currentValue:b,previousValue:d};this.propertyEventService.dispatchEvent(e)}},a.prototype.addEventListener=function(a,c){b.checkEventDeprecation(a),this.propertyEventService.addEventListener(a,c)},a.checkEventDeprecation=function(a){a===u.Events.DEPRECATED_EVENT_GRID_SIZE_CHANGED&&console.warn("ag-Grid: Since ag-Grid v18 event "+u.Events.DEPRECATED_EVENT_GRID_SIZE_CHANGED+" no longer exists."),"floatingRowDataChanged"===a&&console.warn("ag-Grid: floatingRowDataChanged is now called pinnedRowDataChanged")},a.prototype.removeEventListener=function(a,b){this.propertyEventService.removeEventListener(a,b)},a.prototype.getAutoSizePadding=function(){return this.gridOptions.autoSizePadding>0?this.gridOptions.autoSizePadding:20},a.prototype.getHeaderHeight=function(){return"number"==typeof this.gridOptions.headerHeight?this.gridOptions.headerHeight:this.specialForNewMaterial(25,"headerHeight")},a.prototype.getFloatingFiltersHeight=function(){return"number"==typeof this.gridOptions.floatingFiltersHeight?this.gridOptions.floatingFiltersHeight:this.specialForNewMaterial(25,"headerHeight")},a.prototype.getGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.groupHeaderHeight?this.gridOptions.groupHeaderHeight:this.getHeaderHeight()},a.prototype.getPivotHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotHeaderHeight?this.gridOptions.pivotHeaderHeight:this.getHeaderHeight()},a.prototype.getPivotGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotGroupHeaderHeight?this.gridOptions.pivotGroupHeaderHeight:this.getGroupHeaderHeight()},a.prototype.isExternalFilterPresent=function(){return"function"==typeof this.gridOptions.isExternalFilterPresent&&this.gridOptions.isExternalFilterPresent()},a.prototype.doesExternalFilterPass=function(a){return"function"==typeof this.gridOptions.doesExternalFilterPass&&this.gridOptions.doesExternalFilterPass(a)},a.prototype.getDocument=function(){var a;return q.Utils.exists(this.gridOptions.getDocument)&&(a=this.gridOptions.getDocument()),q.Utils.exists(a)?a:document},a.prototype.getLayoutInterval=function(){return"number"==typeof this.gridOptions.layoutInterval?this.gridOptions.layoutInterval:k.Constants.LAYOUT_INTERVAL},a.prototype.getMinColWidth=function(){return this.gridOptions.minColWidth>b.MIN_COL_WIDTH?this.gridOptions.minColWidth:b.MIN_COL_WIDTH},a.prototype.getMaxColWidth=function(){return this.gridOptions.maxColWidth>b.MIN_COL_WIDTH?this.gridOptions.maxColWidth:null},a.prototype.getColWidth=function(){return"number"!=typeof this.gridOptions.colWidth||this.gridOptions.colWidth<b.MIN_COL_WIDTH?200:this.gridOptions.colWidth},a.prototype.getRowBuffer=function(){return"number"==typeof this.gridOptions.rowBuffer?(this.gridOptions.rowBuffer<0&&console.warn("ag-Grid: rowBuffer should not be negative"),this.gridOptions.rowBuffer):k.Constants.ROW_BUFFER_SIZE},a.prototype.getScrollbarWidth=function(){var a=this.gridOptions.scrollbarWidth;return("number"!=typeof a||a<0)&&(a=q.Utils.getScrollbarWidth()),a},a.prototype.checkForDeprecated=function(){var a=this.gridOptions;a.suppressUnSort&&console.warn("ag-grid: as of v1.12.4 suppressUnSort is not used. Please use sortingOrder instead."),a.suppressDescSort&&console.warn("ag-grid: as of v1.12.4 suppressDescSort is not used. Please use sortingOrder instead."),a.groupAggFields&&console.warn("ag-grid: as of v3 groupAggFields is not used. Please add appropriate agg fields to your columns."),a.groupHidePivotColumns&&console.warn("ag-grid: as of v3 groupHidePivotColumns is not used as pivot columns are now called rowGroup columns. Please refer to the documentation"),a.groupKeys&&console.warn("ag-grid: as of v3 groupKeys is not used. You need to set rowGroupIndex on the columns to group. Please refer to the documentation"),"boolean"==typeof a.groupDefaultExpanded&&console.warn("ag-grid: groupDefaultExpanded can no longer be boolean. for groupDefaultExpanded=true, use groupDefaultExpanded=9999 instead, to expand all the groups"),(a.onRowDeselected||a.rowDeselected)&&console.warn("ag-grid: since version 3.4 event rowDeselected no longer exists, please check the docs"),a.rowsAlreadyGrouped&&console.warn("ag-grid: since version 3.4 rowsAlreadyGrouped no longer exists, please use getNodeChildDetails() instead"),a.groupAggFunction&&console.warn("ag-grid: since version 4.3.x groupAggFunction is now called groupRowAggNodes"),a.checkboxSelection&&console.warn("ag-grid: since version 8.0.x checkboxSelection is not supported as a grid option. If you want this on all columns, use defaultColDef instead and set it there"),a.paginationInitialRowCount&&console.warn("ag-grid: since version 9.0.x paginationInitialRowCount is now called infiniteInitialRowCount"),a.infinitePageSize&&console.warn("ag-grid: since version 9.0.x infinitePageSize is now called cacheBlockSize"),a.infiniteBlockSize&&console.warn("ag-grid: since version 10.0.x infiniteBlockSize is now called cacheBlockSize"),a.maxPagesInCache&&console.warn("ag-grid: since version 10.0.x maxPagesInCache is now called maxBlocksInCache"),a.paginationOverflowSize&&console.warn("ag-grid: since version 10.0.x paginationOverflowSize is now called cacheOverflowSize"),a.forPrint&&console.warn('ag-grid: since version 10.1.x, use property domLayout="forPrint" instead of forPrint=true'),a.suppressMenuFilterPanel&&console.warn("ag-grid: since version 11.0.x, use property colDef.menuTabs=['generalMenuTab','columnsMenuTab'] instead of suppressMenuFilterPanel=true"),a.suppressMenuMainPanel&&console.warn("ag-grid: since version 11.0.x, use property colDef.menuTabs=['filterMenuTab','columnsMenuTab'] instead of suppressMenuMainPanel=true"),a.suppressMenuColumnPanel&&console.warn("ag-grid: since version 11.0.x, use property colDef.menuTabs=['generalMenuTab','filterMenuTab'] instead of suppressMenuColumnPanel=true"),a.suppressUseColIdForGroups&&console.warn("ag-grid: since version 11.0.x, this is not in use anymore. You should be able to remove it from your definition"),a.groupColumnDef&&console.warn("ag-grid: since version 11.0.x, groupColumnDef has been renamed, this property is now called autoGroupColumnDef. Please change your configuration accordingly"),a.slaveGrids&&console.warn("ag-grid: since version 12.x, slaveGrids has been renamed, this property is now called alignedGrids. Please change your configuration accordingly"),a.floatingTopRowData&&console.warn("ag-grid: since version 12.x, floatingTopRowData is now called pinnedTopRowData"),a.floatingBottomRowData&&console.warn("ag-grid: since version 12.x, floatingBottomRowData is now called pinnedBottomRowData"),a.paginationStartPage&&console.warn("ag-grid: since version 12.x, paginationStartPage is gone, please call api.paginationGoToPage("+a.paginationStartPage+") instead."),a.getHeaderCellTemplate&&console.warn("ag-grid: since version 15.x, getHeaderCellTemplate is gone, please check the header documentation on how to set header templates."),a.headerCellTemplate&&console.warn("ag-grid: since version 15.x, headerCellTemplate is gone, please check the header documentation on how to set header templates."),a.headerCellRenderer&&console.warn("ag-grid: since version 15.x, headerCellRenderer is gone, please check the header documentation on how to set header templates."),a.angularCompileHeaders&&console.warn("ag-grid: since version 15.x, angularCompileHeaders is gone, please see the getting started for Angular 1 docs to see how to do headers in Angular 1.x."),"forPrint"===a.domLayout&&console.warn("ag-grid: since version 18.x, forPrint is no longer supported, as same can be achieved using autoHeight (and set the grid width accordingly). please use autoHeight instead."),"autoHeight"===a.domLayout&&(console.warn("ag-grid: since version 18.x, domLayout is gone, instead if doing auto-height, set gridAutoHeight=true."),a.gridAutoHeight=!0),a.pivotTotals&&(console.warn("ag-grid: since version 18.x, pivotTotals has been removed, instead if using pivotTotals, set pivotColumnGroupTotals='before'|'after'."),
a.pivotColumnGroupTotals="before"),"inMemory"===a.rowModelType&&(console.warn("ag-grid: since version 18.x, The In Memory Row Model has been renamed to the Client Side Row Model, set rowModelType='clientSide' instead."),a.rowModelType="clientSide"),"enterprise"===a.rowModelType&&(console.warn("ag-grid: since version 18.x, The Enterprise Row Model has been renamed to the Server Side Row Model, set rowModelType='serverSide' instead."),a.rowModelType="serverSide")},a.prototype.getLocaleTextFunc=function(){if(this.gridOptions.localeTextFunc)return this.gridOptions.localeTextFunc;var a=this;return function(b,c){var d=a.gridOptions.localeText;return d&&d[b]?d[b]:c}},a.prototype.globalEventHandler=function(a,b){var c=l.ComponentUtil.getCallbackForEvent(a);"function"==typeof this.gridOptions[c]&&this.gridOptions[c](b)},a.prototype.getRowHeightAsNumber=function(){var a=this.gridOptions.rowHeight;return q.Utils.missing(a)?this.getDefaultRowHeight():this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:(console.warn("ag-Grid row height must be a number if not using standard row model"),this.getDefaultRowHeight())},a.prototype.getRowHeightForNode=function(a){if("function"==typeof this.gridOptions.getRowHeight){var b={node:a,data:a.data,api:this.gridOptions.api,context:this.gridOptions.context};return this.gridOptions.getRowHeight(b)}if(a.detail&&this.isMasterDetail())return this.isNumeric(this.gridOptions.detailRowHeight)?this.gridOptions.detailRowHeight:x;var c=this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:this.getDefaultRowHeight();if(this.columnController.isAutoRowHeightActive()){var d=this.autoHeightCalculator.getPreferredHeightForRow(a);return d>c?d:c}return c},a.prototype.isDynamicRowHeight=function(){return"function"==typeof this.gridOptions.getRowHeight},a.prototype.getVirtualItemHeight=function(){return this.specialForNewMaterial(20,"virtualItemHeight")},a.prototype.isNumeric=function(a){return!isNaN(a)&&"number"==typeof a},a.prototype.specialForNewMaterial=function(a,b){var c=this.environment.getTheme();return 0===c.indexOf("ag-theme")?this.environment.getSassVariable(c,b):a},a.prototype.getDefaultRowHeight=function(){return this.specialForNewMaterial(w,"rowHeight")},a.MIN_COL_WIDTH=10,a.PROP_HEADER_HEIGHT="headerHeight",a.PROP_GROUP_REMOVE_SINGLE_CHILDREN="groupRemoveSingleChildren",a.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN="groupRemoveLowestSingleChildren",a.PROP_PIVOT_HEADER_HEIGHT="pivotHeaderHeight",a.PROP_SUPPRESS_CLIPBOARD_PASTE="suppressClipboardPaste",a.PROP_GROUP_HEADER_HEIGHT="groupHeaderHeight",a.PROP_PIVOT_GROUP_HEADER_HEIGHT="pivotGroupHeaderHeight",a.PROP_FLOATING_FILTERS_HEIGHT="floatingFiltersHeight",a.PROP_SUPPRESS_ROW_DRAG="suppressRowDrag",a.PROP_POPUP_PARENT="popupParent",a.PROP_GRID_AUTO_HEIGHT="gridAutoHeight",g([n.Autowired("gridOptions"),h("design:type",Object)],a.prototype,"gridOptions",void 0),g([n.Autowired("columnController"),h("design:type",p.ColumnController)],a.prototype,"columnController",void 0),g([n.Autowired("eventService"),h("design:type",j.EventService)],a.prototype,"eventService",void 0),g([n.Autowired("enterprise"),h("design:type",Boolean)],a.prototype,"enterprise",void 0),g([n.Autowired("frameworkFactory"),h("design:type",Object)],a.prototype,"frameworkFactory",void 0),g([n.Autowired("gridApi"),h("design:type",m.GridApi)],a.prototype,"gridApi",void 0),g([n.Autowired("columnApi"),h("design:type",o.ColumnApi)],a.prototype,"columnApi",void 0),g([n.Autowired("environment"),h("design:type",r.Environment)],a.prototype,"environment",void 0),g([n.Autowired("autoHeightCalculator"),h("design:type",v.AutoHeightCalculator)],a.prototype,"autoHeightCalculator",void 0),g([i(0,n.Qualifier("gridApi")),i(1,n.Qualifier("columnApi")),h("design:type",Function),h("design:paramtypes",[m.GridApi,o.ColumnApi]),h("design:returntype",void 0)],a.prototype,"agWire",null),g([n.PreDestroy,h("design:type",Function),h("design:paramtypes",[]),h("design:returntype",void 0)],a.prototype,"destroy",null),g([n.PostConstruct,h("design:type",Function),h("design:paramtypes",[]),h("design:returntype",void 0)],a.prototype,"init",null),a=b=g([n.Bean("gridOptionsWrapper")],a);var b}();b.GridOptionsWrapper=A},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(12),h=c(1),i=c(0),j=c(0),k=c(2),l=function(){function a(){this.allSyncListeners={},this.allAsyncListeners={},this.globalSyncListeners=[],this.globalAsyncListeners=[],this.asyncFunctionsQueue=[],this.scheduled=!1}return b=a,a.prototype.setBeans=function(a,b,c){if(void 0===c&&(c=null),this.logger=a.create("EventService"),c){var d=b.useAsyncEvents();this.addGlobalListener(c,d)}},a.prototype.getListenerList=function(a,b){var c=b?this.allAsyncListeners:this.allSyncListeners,d=c[a];return d||(d=[],c[a]=d),d},a.prototype.addEventListener=function(a,b,c){void 0===c&&(c=!1);var d=this.getListenerList(a,c);d.indexOf(b)<0&&d.push(b)},a.prototype.addModalPriorityEventListener=function(a,c,d){void 0===d&&(d=!1),this.addEventListener(a+b.PRIORITY,c,d)},a.prototype.addGlobalListener=function(a,b){void 0===b&&(b=!1),b?this.globalAsyncListeners.push(a):this.globalSyncListeners.push(a)},a.prototype.removeEventListener=function(a,b,c){void 0===c&&(c=!1);var d=this.getListenerList(a,c);h.Utils.removeFromArray(d,b)},a.prototype.removeGlobalListener=function(a,b){void 0===b&&(b=!1),b?h.Utils.removeFromArray(this.globalAsyncListeners,a):h.Utils.removeFromArray(this.globalSyncListeners,a)},a.prototype.dispatchEvent=function(a){this.dispatchToListeners(a,!0),this.dispatchToListeners(a,!1)},a.prototype.dispatchToListeners=function(a,c){var d=this,e=c?this.globalAsyncListeners:this.globalSyncListeners,f=a.type,g=this.getListenerList(f+b.PRIORITY,c);h.Utils.forEachSnapshotFirst(g,function(b){c?d.dispatchAsync(function(){return b(a)}):b(a)});var i=this.getListenerList(f,c);h.Utils.forEachSnapshotFirst(i,function(b){c?d.dispatchAsync(function(){return b(a)}):b(a)}),h.Utils.forEachSnapshotFirst(e,function(b){c?d.dispatchAsync(function(){return b(f,a)}):b(f,a)})},a.prototype.dispatchAsync=function(a){this.asyncFunctionsQueue.push(a),this.scheduled||(setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},a.prototype.flushAsyncQueue=function(){this.scheduled=!1;var a=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],a.forEach(function(a){return a()})},a.PRIORITY="-P1",d([f(0,j.Qualifier("loggerFactory")),f(1,j.Qualifier("gridOptionsWrapper")),f(2,j.Qualifier("globalEventListener")),e("design:type",Function),e("design:paramtypes",[g.LoggerFactory,k.GridOptionsWrapper,Function]),e("design:returntype",void 0)],a.prototype,"setBeans",null),a=b=d([i.Bean("eventService")],a);var b}();b.EventService=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(1),h=c(26),i=c(10),j=c(2),k=c(19),l=c(38),m=c(48),n=c(39),o=c(3),p=c(31),q=c(12),r=c(5),s=c(32),t=c(83),u=c(0),v=c(53),w=c(104),x=c(33),y=c(6),z=c(7),A=function(){function a(){this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.secondaryColumnsPresent=!1,this.gridHeaderRowCount=0,this.displayedLeftColumns=[],this.displayedRightColumns=[],this.displayedCenterColumns=[],this.allDisplayedColumns=[],this.allDisplayedVirtualColumns=[],this.allDisplayedCenterVirtualColumns=[],this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.autoGroupsNeedBuilding=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}return a.prototype.init=function(){var a=this.gridOptionsWrapper.isPivotMode();this.suppressColumnVirtualisation=this.gridOptionsWrapper.isSuppressColumnVirtualisation(),this.isPivotSettingAllowed(a)&&(this.pivotMode=a),this.usingTreeData=this.gridOptionsWrapper.isTreeData()},a.prototype.isAutoRowHeightActive=function(){return this.autoRowHeightColumns&&this.autoRowHeightColumns.length>0},a.prototype.getAllAutoRowHeightCols=function(){return this.autoRowHeightColumns},a.prototype.setVirtualViewportLeftAndRight=function(){this.gridOptionsWrapper.isEnableRtl()?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},a.prototype.getDisplayedColumnsStartingAt=function(a){for(var b=a,c=[];g.Utils.exists(b);)c.push(b),b=this.getDisplayedColAfter(b);return c},a.prototype.checkDisplayedVirtualColumns=function(){if(g.Utils.exists(this.displayedCenterColumns)){var a=this.allDisplayedVirtualColumns.map(function(a){return a.getId()}).join("#");this.updateVirtualSets();var b=this.allDisplayedVirtualColumns.map(function(a){return a.getId()}).join("#");if(a!==b){var c={type:r.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(c)}}},a.prototype.setVirtualViewportPosition=function(a,b){(a!==this.scrollWidth||b!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=a,this.scrollPosition=b,this.bodyWidthDirty=!0,this.setVirtualViewportLeftAndRight(),this.ready&&this.checkDisplayedVirtualColumns())},a.prototype.isPivotMode=function(){return this.pivotMode},a.prototype.isPivotSettingAllowed=function(a){return!a||(!this.gridOptionsWrapper.isTreeData()||(console.warn("ag-Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1))},a.prototype.setPivotMode=function(a,b){if(void 0===b&&(b="api"),a!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)){this.pivotMode=a,this.updateDisplayedColumns(b);var c={type:r.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(c)}},a.prototype.getSecondaryPivotColumn=function(a,b){if(!this.secondaryColumnsPresent)return null;var c=this.getPrimaryColumn(b),d=null;return this.secondaryColumns.forEach(function(b){var e=b.getColDef().pivotKeys,f=b.getColDef().pivotValueColumn,h=g.Utils.compareArrays(e,a),i=f===c;h&&i&&(d=b)}),d},a.prototype.setBeans=function(a){this.logger=a.create("ColumnController")},a.prototype.setFirstRightAndLastLeftPinned=function(a){var b,c;this.gridOptionsWrapper.isEnableRtl()?(b=this.displayedLeftColumns?this.displayedLeftColumns[0]:null,c=this.displayedRightColumns?this.displayedRightColumns[this.displayedRightColumns.length-1]:null):(b=this.displayedLeftColumns?this.displayedLeftColumns[this.displayedLeftColumns.length-1]:null,c=this.displayedRightColumns?this.displayedRightColumns[0]:null),this.gridColumns.forEach(function(d){d.setLastLeftPinned(d===b,a),d.setFirstRightPinned(d===c,a)})},a.prototype.autoSizeColumns=function(a,b){var c=this;void 0===b&&(b="api");for(var d=[],e=-1;0!==e;)e=0,this.actionOnGridColumns(a,function(a){if(!(d.indexOf(a)>=0)){var f=c.autoWidthCalculator.getPreferredWidthForColumn(a);if(f>0){var g=c.normaliseColumnWidth(a,f);a.setActualWidth(g,b),d.push(a),e++}return!0}},b);if(d.length>0){var f={type:r.Events.EVENT_COLUMN_RESIZED,columns:d,column:1===d.length?d[0]:null,finished:!0,api:this.gridApi,columnApi:this.columnApi,source:"autosizeColumns"};this.eventService.dispatchEvent(f)}},a.prototype.autoSizeColumn=function(a,b){void 0===b&&(b="api"),this.autoSizeColumns([a],b)},a.prototype.autoSizeAllColumns=function(a){void 0===a&&(a="api");var b=this.getAllDisplayedColumns();this.autoSizeColumns(b,a)},a.prototype.getColumnsFromTree=function(a){function b(a){for(var d=0;d<a.length;d++){var e=a[d];e instanceof i.Column?c.push(e):e instanceof s.OriginalColumnGroup&&b(e.getChildren())}}var c=[];return b(a),c},a.prototype.getAllDisplayedColumnGroups=function(){return this.displayedLeftColumnTree&&this.displayedRightColumnTree&&this.displayedCentreColumnTree?this.displayedLeftColumnTree.concat(this.displayedCentreColumnTree).concat(this.displayedRightColumnTree):null},a.prototype.getPrimaryColumnTree=function(){return this.primaryBalancedTree},a.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},a.prototype.getLeftDisplayedColumnGroups=function(){return this.displayedLeftColumnTree},a.prototype.getRightDisplayedColumnGroups=function(){return this.displayedRightColumnTree},a.prototype.getCenterDisplayedColumnGroups=function(){return this.displayedCentreColumnTree},a.prototype.getDisplayedColumnGroups=function(a){switch(a){case i.Column.PINNED_LEFT:return this.getLeftDisplayedColumnGroups();case i.Column.PINNED_RIGHT:return this.getRightDisplayedColumnGroups();default:return this.getCenterDisplayedColumnGroups()}},a.prototype.isColumnDisplayed=function(a){return this.getAllDisplayedColumns().indexOf(a)>=0},a.prototype.getAllDisplayedColumns=function(){return this.allDisplayedColumns},a.prototype.getAllDisplayedVirtualColumns=function(){return this.allDisplayedVirtualColumns},a.prototype.getDisplayedLeftColumnsForRow=function(a){return this.colSpanActive?this.getDisplayedColumnsForRow(a,this.displayedLeftColumns):this.displayedLeftColumns},a.prototype.getDisplayedRightColumnsForRow=function(a){return this.colSpanActive?this.getDisplayedColumnsForRow(a,this.displayedRightColumns):this.displayedRightColumns},a.prototype.getDisplayedColumnsForRow=function(a,b,c,d){for(var e,f=[],g=null,h=function(h){var i=b[h],j=i.getColSpan(a),k=[i];if(j>1){for(var l=j-1,m=1;m<=l;m++)k.push(b[h+m]);h+=l}var n;if(c?(n=!1,k.forEach(function(a){c(a)&&(n=!0)})):n=!0,n){if(0===f.length&&g){var o=!!d&&d(i);o&&f.push(g)}f.push(i)}g=i,e=h},i=0;i<b.length;i++)h(i),i=e;return f},a.prototype.getAllDisplayedCenterVirtualColumnsForRow=function(a){var b=this;if(!this.colSpanActive)return this.allDisplayedCenterVirtualColumns;var c=function(a){return a.getLeft()>b.viewportLeft},d=this.suppressColumnVirtualisation?null:this.isColumnInViewport.bind(this);return this.getDisplayedColumnsForRow(a,this.displayedCenterColumns,d,c)},a.prototype.isColumnInViewport=function(a){var b=a.getLeft(),c=a.getLeft()+a.getActualWidth(),d=b<this.viewportLeft&&c<this.viewportLeft,e=b>this.viewportRight&&c>this.viewportRight;return!d&&!e},a.prototype.getPinnedLeftContainerWidth=function(){return this.getWidthOfColsInList(this.displayedLeftColumns)},a.prototype.getPinnedRightContainerWidth=function(){return this.getWidthOfColsInList(this.displayedRightColumns)},a.prototype.updatePrimaryColumnList=function(a,b,c,d,e,f){var h=this;if(void 0===f&&(f="api"),!g.Utils.missingOrEmpty(a)){var i=!1;if(a.forEach(function(a){var e=h.getPrimaryColumn(a);if(e){if(c){if(b.indexOf(e)>=0)return;b.push(e)}else{if(b.indexOf(e)<0)return;g.Utils.removeFromArray(b,e)}d(e),i=!0}}),i){this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(f);var j={type:e,columns:b,column:1===b.length?b[0]:null,api:this.gridApi,columnApi:this.columnApi,source:f};this.eventService.dispatchEvent(j)}}},a.prototype.setRowGroupColumns=function(a,b){void 0===b&&(b="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(a,this.rowGroupColumns,r.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.setRowGroupActive.bind(this),b)},a.prototype.setRowGroupActive=function(a,b,c){a!==b.isRowGroupActive()&&(b.setRowGroupActive(a,c),a||this.gridOptionsWrapper.isSuppressMakeColumnVisibleAfterUnGroup()||b.setVisible(!0,c))},a.prototype.addRowGroupColumn=function(a,b){void 0===b&&(b="api"),this.addRowGroupColumns([a],b)},a.prototype.addRowGroupColumns=function(a,b){void 0===b&&(b="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(a,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),r.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,b)},a.prototype.removeRowGroupColumns=function(a,b){void 0===b&&(b="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(a,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),r.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,b)},a.prototype.removeRowGroupColumn=function(a,b){void 0===b&&(b="api"),this.removeRowGroupColumns([a],b)},a.prototype.addPivotColumns=function(a,b){void 0===b&&(b="api"),this.updatePrimaryColumnList(a,this.pivotColumns,!0,function(a){return a.setPivotActive(!0,b)},r.Events.EVENT_COLUMN_PIVOT_CHANGED,b)},a.prototype.setPivotColumns=function(a,b){void 0===b&&(b="api"),this.setPrimaryColumnList(a,this.pivotColumns,r.Events.EVENT_COLUMN_PIVOT_CHANGED,function(a,c){c.setPivotActive(a,b)},b)},a.prototype.addPivotColumn=function(a,b){void 0===b&&(b="api"),this.addPivotColumns([a],b)},a.prototype.removePivotColumns=function(a,b){void 0===b&&(b="api"),this.updatePrimaryColumnList(a,this.pivotColumns,!1,function(a){return a.setPivotActive(!1,b)},r.Events.EVENT_COLUMN_PIVOT_CHANGED,b)},a.prototype.removePivotColumn=function(a,b){void 0===b&&(b="api"),this.removePivotColumns([a],b)},a.prototype.setPrimaryColumnList=function(a,b,c,d,e){var f=this;b.length=0,g.Utils.exists(a)&&a.forEach(function(a){var c=f.getPrimaryColumn(a);b.push(c)}),this.primaryColumns.forEach(function(a){var c=b.indexOf(a)>=0;d(c,a)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(e);var h={type:c,columns:b,column:1===b.length?b[0]:null,api:this.gridApi,columnApi:this.columnApi,source:e};this.eventService.dispatchEvent(h)},a.prototype.setValueColumns=function(a,b){void 0===b&&(b="api"),this.setPrimaryColumnList(a,this.valueColumns,r.Events.EVENT_COLUMN_VALUE_CHANGED,this.setValueActive.bind(this),b)},a.prototype.setValueActive=function(a,b,c){if(a!==b.isValueActive()&&(b.setValueActive(a,c),a&&!b.getAggFunc())){var d=this.aggFuncService.getDefaultAggFunc(b);b.setAggFunc(d)}},a.prototype.addValueColumns=function(a,b){void 0===b&&(b="api"),this.updatePrimaryColumnList(a,this.valueColumns,!0,this.setValueActive.bind(this,!0),r.Events.EVENT_COLUMN_VALUE_CHANGED,b)},a.prototype.addValueColumn=function(a,b){void 0===b&&(b="api"),this.addValueColumns([a],b)},a.prototype.removeValueColumn=function(a,b){void 0===b&&(b="api"),this.removeValueColumns([a],b)},a.prototype.removeValueColumns=function(a,b){void 0===b&&(b="api"),this.updatePrimaryColumnList(a,this.valueColumns,!1,this.setValueActive.bind(this,!1),r.Events.EVENT_COLUMN_VALUE_CHANGED,b)},a.prototype.normaliseColumnWidth=function(a,b){return b<a.getMinWidth()&&(b=a.getMinWidth()),a.isGreaterThanMax(b)&&(b=a.getMaxWidth()),b},a.prototype.getPrimaryOrGridColumn=function(a){var b=this.getPrimaryColumn(a);return b?b:this.getGridColumn(a)},a.prototype.setColumnWidth=function(a,b,c,d,e){void 0===e&&(e="api");var f=this.getPrimaryOrGridColumn(a);if(f){var g=[];if(g.push({width:b,ratios:[1],columns:[f]}),c){var h=this.getDisplayedColAfter(f);if(!h)return;var i=f.getActualWidth()-b,j=h.getActualWidth()+i;g.push({width:j,ratios:[1],columns:[h]})}this.resizeColumnSets(g,d,e)}},a.prototype.checkMinAndMaxWidthsForSet=function(a){var b=a.columns,c=a.width,d=0,e=0,f=!0;b.forEach(function(a){d+=a.getMinWidth(),a.getMaxWidth()>0?e+=a.getMaxWidth():f=!1});var g=c>=d,h=!f||c<=e;return g&&h},a.prototype.resizeColumnSets=function(a,b,c){var d=g.Utils.every(a,this.checkMinAndMaxWidthsForSet.bind(this));if(d){var e=[],f=[];a.forEach(function(a){var b=a.width,c=a.columns,d=a.ratios,g={},h={};c.forEach(function(a){return f.push(a)});for(var i=!0,j=0,k=function(){if(j++,j>1e3)return console.error("ag-Grid: infinite loop in resizeColumnSets"),"break";i=!1;var a=[],e=[],f=0,k=b;c.forEach(function(b,c){var i=h[b.getId()];if(i)k-=g[b.getId()];else{a.push(b);var j=d[c];f+=j,e.push(j)}});var l=1/f;a.forEach(function(c,e){var f,j=e===a.length-1;j?f=k:(f=Math.round(d[e]*b*l),k-=f),f<c.getMinWidth()?(f=c.getMinWidth(),h[c.getId()]=!0,i=!0):c.getMaxWidth()>0&&f>c.getMaxWidth()&&(f=c.getMaxWidth(),h[c.getId()]=!0,i=!0),g[c.getId()]=f})};i;){var l=k();if("break"===l)break}c.forEach(function(a){var b=g[a.getId()];a.getActualWidth()!==b&&(a.setActualWidth(b),e.push(a))})});var h=e.length>0;if(h&&(this.setLeftValues(c),this.updateBodyWidths(),this.checkDisplayedVirtualColumns()),h||b){var i={type:r.Events.EVENT_COLUMN_RESIZED,columns:f,column:1===f.length?f[0]:null,finished:b,api:this.gridApi,columnApi:this.columnApi,source:c};this.eventService.dispatchEvent(i)}}},a.prototype.setColumnAggFunc=function(a,b,c){void 0===c&&(c="api"),a.setAggFunc(b);var d={type:r.Events.EVENT_COLUMN_VALUE_CHANGED,columns:[a],column:a,api:this.gridApi,columnApi:this.columnApi,source:c};this.eventService.dispatchEvent(d)},a.prototype.moveRowGroupColumn=function(a,b,c){void 0===c&&(c="api");var d=this.rowGroupColumns[a];this.rowGroupColumns.splice(a,1),this.rowGroupColumns.splice(b,0,d);var e={type:r.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:this.rowGroupColumns,column:1===this.rowGroupColumns.length?this.rowGroupColumns[0]:null,api:this.gridApi,columnApi:this.columnApi,source:c};this.eventService.dispatchEvent(e)},a.prototype.moveColumns=function(a,b,c){if(void 0===c&&(c="api"),this.columnAnimationService.start(),b>this.gridColumns.length-a.length)return console.warn("ag-Grid: tried to insert columns in invalid location, toIndex = "+b),void console.warn("ag-Grid: remember that you should not count the moving columns when calculating the new index");var d=this.getGridColumns(a),e=!this.doesMovePassRules(d,b);if(!e){g.Utils.moveInArray(this.gridColumns,d,b),this.updateDisplayedColumns(c);var f={type:r.Events.EVENT_COLUMN_MOVED,columns:d,column:1===d.length?d[0]:null,toIndex:b,api:this.gridApi,columnApi:this.columnApi,source:c};this.eventService.dispatchEvent(f),this.columnAnimationService.finish()}},a.prototype.doesMovePassRules=function(a,b){var c=this.gridColumns.slice();return g.Utils.moveInArray(c,a,b),!!this.doesMovePassMarryChildren(c)&&!!this.doesMovePassLockedPositions(c)},a.prototype.doesMovePassLockedPositions=function(a){var b=!1,c=!0;return a.forEach(function(a){a.isLockPosition()?b&&(c=!1):b=!0}),c},a.prototype.doesMovePassMarryChildren=function(a){var b=!0;return this.columnUtils.depthFirstOriginalTreeSearch(this.gridBalancedTree,function(c){if(c instanceof s.OriginalColumnGroup){var d=c,e=d.getColGroupDef()&&d.getColGroupDef().marryChildren;if(e){var f=[];d.getLeafColumns().forEach(function(b){var c=a.indexOf(b);f.push(c)});var g=Math.max.apply(Math,f),h=Math.min.apply(Math,f),i=g-h,j=d.getLeafColumns().length-1;i>j&&(b=!1)}}}),b},a.prototype.moveColumn=function(a,b,c){void 0===c&&(c="api"),this.moveColumns([a],b,c)},a.prototype.moveColumnByIndex=function(a,b,c){void 0===c&&(c="api");var d=this.gridColumns[a];this.moveColumn(d,b,c)},a.prototype.getBodyContainerWidth=function(){return this.bodyWidth},a.prototype.getContainerWidth=function(a){switch(a){case i.Column.PINNED_LEFT:return this.leftWidth;case i.Column.PINNED_RIGHT:return this.rightWidth;default:return this.bodyWidth}},a.prototype.updateBodyWidths=function(){var a=this.getWidthOfColsInList(this.displayedCenterColumns),b=this.getWidthOfColsInList(this.displayedLeftColumns),c=this.getWidthOfColsInList(this.displayedRightColumns);this.bodyWidthDirty=this.bodyWidth!==a;var d=this.bodyWidth!==a||this.leftWidth!==b||this.rightWidth!==c;if(d){this.bodyWidth=a,this.leftWidth=b,this.rightWidth=c;var e={type:r.Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)}},a.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},a.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},a.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},a.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},a.prototype.getDisplayedCenterColumns=function(){return this.displayedCenterColumns},a.prototype.getDisplayedLeftColumns=function(){return this.displayedLeftColumns},a.prototype.getDisplayedRightColumns=function(){return this.displayedRightColumns},a.prototype.getDisplayedColumns=function(a){switch(a){case i.Column.PINNED_LEFT:return this.getDisplayedLeftColumns();case i.Column.PINNED_RIGHT:return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},a.prototype.getAllPrimaryColumns=function(){return this.primaryColumns},a.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},a.prototype.getAllGridColumns=function(){return this.gridColumns},a.prototype.isEmpty=function(){return g.Utils.missingOrEmpty(this.gridColumns)},a.prototype.isRowGroupEmpty=function(){return g.Utils.missingOrEmpty(this.rowGroupColumns)},a.prototype.setColumnVisible=function(a,b,c){void 0===c&&(c="api"),this.setColumnsVisible([a],b,c)},a.prototype.setColumnsVisible=function(a,b,c){var d=this;void 0===c&&(c="api"),this.columnAnimationService.start(),this.actionOnGridColumns(a,function(a){return a.isVisible()!==b&&(a.setVisible(b,c),!0)},c,function(){var a={type:r.Events.EVENT_COLUMN_VISIBLE,visible:b,column:null,columns:null,api:d.gridApi,columnApi:d.columnApi,source:c};return a}),this.columnAnimationService.finish()},a.prototype.setColumnPinned=function(a,b,c){void 0===c&&(c="api"),this.setColumnsPinned([a],b,c)},a.prototype.setColumnsPinned=function(a,b,c){var d=this;void 0===c&&(c="api"),this.columnAnimationService.start();var e;e=b===!0||b===i.Column.PINNED_LEFT?i.Column.PINNED_LEFT:b===i.Column.PINNED_RIGHT?i.Column.PINNED_RIGHT:null,this.actionOnGridColumns(a,function(a){return a.getPinned()!==e&&(a.setPinned(e),!0)},c,function(){var a={type:r.Events.EVENT_COLUMN_PINNED,pinned:e,column:null,columns:null,api:d.gridApi,columnApi:d.columnApi,source:c};return a}),this.columnAnimationService.finish()},a.prototype.actionOnGridColumns=function(a,b,c,d){var e=this;if(!g.Utils.missingOrEmpty(a)){var f=[];if(a.forEach(function(a){var c=e.getGridColumn(a);if(c){var d=b(c);d!==!1&&f.push(c)}}),0!==f.length&&(this.updateDisplayedColumns(c),g.Utils.exists(d))){var h=d();h.columns=f,h.column=1===f.length?f[0]:null,this.eventService.dispatchEvent(h)}}},a.prototype.getDisplayedColBefore=function(a){var b=this.getAllDisplayedColumns(),c=b.indexOf(a);return c>0?b[c-1]:null},a.prototype.getDisplayedColAfter=function(a){var b=this.getAllDisplayedColumns(),c=b.indexOf(a);return c<b.length-1?b[c+1]:null},a.prototype.getDisplayedGroupAfter=function(a){for(var b=a.getDisplayedLeafColumns()[0],c=a.getOriginalColumnGroup().getLevel();;){if(b=this.getDisplayedColAfter(b),!b)return null;for(var d=b.getParent();d.getOriginalColumnGroup().getLevel()!==c;)d=d.getParent();if(d!==a)return d}},a.prototype.isPinningLeft=function(){return this.displayedLeftColumns.length>0},a.prototype.isPinningRight=function(){return this.displayedRightColumns.length>0},a.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var a=this.primaryColumns?this.primaryColumns.slice(0):[];return g.Utils.exists(this.groupAutoColumns)&&this.groupAutoColumns.forEach(function(b){return a.push(b)}),this.secondaryColumnsPresent&&this.secondaryColumns.forEach(function(b){return a.push(b)}),a},a.prototype.createStateItemFromColumn=function(a){var b=a.isRowGroupActive()?this.rowGroupColumns.indexOf(a):null,c=a.isPivotActive()?this.pivotColumns.indexOf(a):null,d=a.isValueActive()?a.getAggFunc():null;return{colId:a.getColId(),hide:!a.isVisible(),aggFunc:d,width:a.getActualWidth(),pivotIndex:c,pinned:a.getPinned(),rowGroupIndex:b}},a.prototype.getColumnState=function(){if(g.Utils.missing(this.primaryColumns))return[];var a=this.primaryColumns.map(this.createStateItemFromColumn.bind(this));return this.pivotMode||this.orderColumnStateList(a),a},a.prototype.orderColumnStateList=function(a){var b=this.gridColumns.map(function(a){return a.getColId()});a.sort(function(a,c){var d=b.indexOf(a.colId),e=b.indexOf(c.colId);return d-e})},a.prototype.resetColumnState=function(a){void 0===a&&(a="api");var b=this.getColumnsFromTree(this.primaryBalancedTree),c=[];b&&b.forEach(function(a){c.push({colId:a.getColId(),aggFunc:a.getColDef().aggFunc,hide:a.getColDef().hide,pinned:a.getColDef().pinned,rowGroupIndex:a.getColDef().rowGroupIndex,pivotIndex:a.getColDef().pivotIndex,width:a.getColDef().width})}),this.setColumnState(c,a)},a.prototype.setColumnState=function(a,b){var c=this;if(void 0===b&&(b="api"),g.Utils.missingOrEmpty(this.primaryColumns))return!1;this.autoGroupsNeedBuilding=!0;var d=this.primaryColumns.slice();this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[];var e=!0,f={},h={};if(a&&a.forEach(function(a){var i=c.getPrimaryColumn(a.colId);i?(c.syncColumnWithStateItem(i,a,f,h,b),g.Utils.removeFromArray(d,i)):(console.warn("ag-grid: column "+a.colId+" not found"),e=!1)}),d.forEach(this.syncColumnWithNoState.bind(this)),this.rowGroupColumns.sort(this.sortColumnListUsingIndexes.bind(this,f)),this.pivotColumns.sort(this.sortColumnListUsingIndexes.bind(this,h)),this.updateGridColumns(),a){var i=a.map(function(a){return a.colId});this.gridColumns.sort(function(a,b){var c=i.indexOf(a.getId()),d=i.indexOf(b.getId());return c-d})}this.updateDisplayedColumns(b);var j={type:r.Events.EVENT_COLUMN_EVERYTHING_CHANGED,api:this.gridApi,columnApi:this.columnApi,source:b};return this.eventService.dispatchEvent(j),e},a.prototype.sortColumnListUsingIndexes=function(a,b,c){var d=a[b.getId()],e=a[c.getId()];return d-e},a.prototype.syncColumnWithNoState=function(a,b){a.setVisible(!1,b),a.setAggFunc(null),a.setPinned(null),a.setRowGroupActive(!1,b),a.setPivotActive(!1,b),a.setValueActive(!1,b)},a.prototype.syncColumnWithStateItem=function(a,b,c,d,e){a.setVisible(!b.hide,e),a.setPinned(b.pinned),b.width>=this.gridOptionsWrapper.getMinColWidth()&&a.setActualWidth(b.width,e),"string"==typeof b.aggFunc?(a.setAggFunc(b.aggFunc),a.setValueActive(!0,e),this.valueColumns.push(a)):(g.Utils.exists(b.aggFunc)&&console.warn("ag-Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it isintended for the column state to be stored and retrieved as simple JSON."),a.setAggFunc(null),a.setValueActive(!1,e)),"number"==typeof b.rowGroupIndex?(this.rowGroupColumns.push(a),a.setRowGroupActive(!0,e),c[a.getId()]=b.rowGroupIndex):a.setRowGroupActive(!1,e),"number"==typeof b.pivotIndex?(this.pivotColumns.push(a),a.setPivotActive(!0,e),d[a.getId()]=b.pivotIndex):a.setPivotActive(!1,e)},a.prototype.getGridColumns=function(a){return this.getColumns(a,this.getGridColumn.bind(this))},a.prototype.getColumns=function(a,b){var c=[];return a&&a.forEach(function(a){var d=b(a);d&&c.push(d)}),c},a.prototype.getColumnWithValidation=function(a){var b=this.getPrimaryColumn(a);return b||console.warn("ag-Grid: could not find column "+b),b},a.prototype.getPrimaryColumn=function(a){return this.getColumn(a,this.primaryColumns)},a.prototype.getGridColumn=function(a){return this.getColumn(a,this.gridColumns)},a.prototype.getColumn=function(a,b){if(!a)return null;for(var c=0;c<b.length;c++)if(this.columnsMatch(b[c],a))return b[c];return this.getAutoColumn(a)},a.prototype.getAutoColumn=function(a){var b=this;return!g.Utils.exists(this.groupAutoColumns)||g.Utils.missing(this.groupAutoColumns)?null:g.Utils.find(this.groupAutoColumns,function(c){
return b.columnsMatch(c,a)})},a.prototype.columnsMatch=function(a,b){var c=a===b,d=a.getColDef()===b,e=a.getColId()==b;return c||d||e},a.prototype.getDisplayNameForColumn=function(a,b,c){void 0===c&&(c=!1);var d=this.getHeaderName(a.getColDef(),a,null,null,b);return c?this.wrapHeaderNameWithAggFunc(a,d):d},a.prototype.getDisplayNameForOriginalColumnGroup=function(a,b,c){var d=b.getColGroupDef();return d?this.getHeaderName(d,null,a,b,c):null},a.prototype.getDisplayNameForColumnGroup=function(a,b){return this.getDisplayNameForOriginalColumnGroup(a,a.getOriginalColumnGroup(),b)},a.prototype.getHeaderName=function(a,b,c,d,e){var f=a.headerValueGetter;if(f){var h={colDef:a,column:b,columnGroup:c,originalColumnGroup:d,location:e,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()};return"function"==typeof f?f(h):"string"==typeof f?this.expressionService.evaluate(f,h):(console.warn("ag-grid: headerValueGetter must be a function or a string"),"")}return null!=a.headerName?a.headerName:a.field?g.Utils.camelCaseToHumanText(a.field):""},a.prototype.wrapHeaderNameWithAggFunc=function(a,b){if(this.gridOptionsWrapper.isSuppressAggFuncInHeader())return b;var c,d=a.getColDef().pivotValueColumn,e=g.Utils.exists(d),f=null;if(e)f=d.getAggFunc(),c=!0;else{var h=a.isValueActive(),i=this.pivotMode||!this.isRowGroupEmpty();h&&i?(f=a.getAggFunc(),c=!0):c=!1}if(c){var j="string"==typeof f?f:"func",k=this.gridOptionsWrapper.getLocaleTextFunc(),l=k(j,j);return l+"("+b+")"}return b},a.prototype.getColumnGroup=function(a,b){if(!a)return null;if(a instanceof h.ColumnGroup)return a;var c=this.getAllDisplayedColumnGroups(),d="number"==typeof b,e=null;return this.columnUtils.depthFirstAllColumnTreeSearch(c,function(c){if(c instanceof h.ColumnGroup){var f=c,g=void 0;g=d?a===f.getGroupId()&&b===f.getInstanceId():a===f.getGroupId(),g&&(e=f)}}),e},a.prototype.setColumnDefs=function(a,b){void 0===b&&(b="api"),this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var c=this.balancedColumnTreeBuilder.createBalancedColumnGroups(a,!0);this.primaryBalancedTree=c.balancedTree,this.primaryHeaderRowCount=c.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryBalancedTree),this.autoRowHeightColumns=this.primaryColumns.filter(function(a){return a.getColDef().autoHeight}),this.extractRowGroupColumns(b),this.extractPivotColumns(b),this.createValueColumns(b),this.updateGridColumns(),this.updateDisplayedColumns(b),this.checkDisplayedVirtualColumns(),this.ready=!0;var d={type:r.Events.EVENT_COLUMN_EVERYTHING_CHANGED,api:this.gridApi,columnApi:this.columnApi,source:b};this.eventService.dispatchEvent(d);var e={type:r.Events.EVENT_NEW_COLUMNS_LOADED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},a.prototype.isReady=function(){return this.ready},a.prototype.extractRowGroupColumns=function(a){var b=this;this.rowGroupColumns.forEach(function(b){return b.setRowGroupActive(!1,a)}),this.rowGroupColumns=[],this.primaryColumns.forEach(function(c){"number"==typeof c.getColDef().rowGroupIndex&&(b.rowGroupColumns.push(c),c.setRowGroupActive(!0,a))}),this.rowGroupColumns.sort(function(a,b){return a.getColDef().rowGroupIndex-b.getColDef().rowGroupIndex}),this.primaryColumns.forEach(function(c){if(c.getColDef().rowGroup){if(b.rowGroupColumns.indexOf(c)>=0)return;b.rowGroupColumns.push(c),c.setRowGroupActive(!0,a)}})},a.prototype.extractPivotColumns=function(a){var b=this;this.pivotColumns.forEach(function(b){return b.setPivotActive(!1,a)}),this.pivotColumns=[],this.primaryColumns.forEach(function(c){"number"==typeof c.getColDef().pivotIndex&&(b.pivotColumns.push(c),c.setPivotActive(!0,a))}),this.pivotColumns.sort(function(a,b){return a.getColDef().pivotIndex-b.getColDef().pivotIndex}),this.primaryColumns.forEach(function(c){if(c.getColDef().pivot){if(b.pivotColumns.indexOf(c)>=0)return;b.pivotColumns.push(c),c.setPivotActive(!0,a)}})},a.prototype.resetColumnGroupState=function(a){void 0===a&&(a="api");var b=[];this.columnUtils.depthFirstOriginalTreeSearch(this.primaryBalancedTree,function(a){if(a instanceof s.OriginalColumnGroup){var c={groupId:a.getGroupId(),open:a.getColGroupDef().openByDefault};b.push(c)}}),this.setColumnGroupState(b,a)},a.prototype.getColumnGroupState=function(){var a=[];return this.columnUtils.depthFirstOriginalTreeSearch(this.gridBalancedTree,function(b){if(b instanceof s.OriginalColumnGroup){var c=b;a.push({groupId:c.getGroupId(),open:c.isExpanded()})}}),a},a.prototype.setColumnGroupState=function(a,b){var c=this;void 0===b&&(b="api"),this.columnAnimationService.start();var d=[];a.forEach(function(a){var b=a.groupId,e=a.open,f=c.getOriginalColumnGroup(b);f&&f.isExpanded()!==e&&(c.logger.log("columnGroupOpened("+f.getGroupId()+","+e+")"),f.setExpanded(e),d.push(f))}),this.updateGroupsAndDisplayedColumns(b),d.forEach(function(a){var b={type:r.Events.EVENT_COLUMN_GROUP_OPENED,columnGroup:a,api:c.gridApi,columnApi:c.columnApi};c.eventService.dispatchEvent(b)}),this.columnAnimationService.finish()},a.prototype.setColumnGroupOpened=function(a,b,c){void 0===c&&(c="api");var d;d=a instanceof s.OriginalColumnGroup?a.getId():a,this.setColumnGroupState([{groupId:d,open:b}],c)},a.prototype.getOriginalColumnGroup=function(a){if(a instanceof s.OriginalColumnGroup)return a;"string"!=typeof a&&console.error("ag-Grid: group key must be a string");var b=null;return this.columnUtils.depthFirstOriginalTreeSearch(this.gridBalancedTree,function(c){if(c instanceof s.OriginalColumnGroup){var d=c;d.getId()===a&&(b=d)}}),b},a.prototype.calculateColumnsForDisplay=function(){var a,b=this;return a=this.pivotMode&&!this.secondaryColumnsPresent?g.Utils.filter(this.gridColumns,function(a){var c=b.groupAutoColumns&&b.groupAutoColumns.indexOf(a)>=0,d=b.valueColumns&&b.valueColumns.indexOf(a)>=0;return c||d}):g.Utils.filter(this.gridColumns,function(a){var c=b.groupAutoColumns&&b.groupAutoColumns.indexOf(a)>=0;return c||a.isVisible()})},a.prototype.checkColSpanActiveInCols=function(a){var b=!1;return a.forEach(function(a){g.Utils.exists(a.getColDef().colSpan)&&(b=!0)}),b},a.prototype.calculateColumnsForGroupDisplay=function(){var a=this;this.groupDisplayColumns=[];var b=function(b){var c=b.getColDef();c&&g.Utils.exists(c.showRowGroup)&&a.groupDisplayColumns.push(b)};this.gridColumns.forEach(b),this.groupAutoColumns&&this.groupAutoColumns.forEach(b)},a.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},a.prototype.updateDisplayedColumns=function(a){var b=this.calculateColumnsForDisplay();this.buildDisplayedTrees(b),this.calculateColumnsForGroupDisplay(),this.updateGroupsAndDisplayedColumns(a),this.setFirstRightAndLastLeftPinned(a)},a.prototype.isSecondaryColumnsPresent=function(){return this.secondaryColumnsPresent},a.prototype.setSecondaryColumns=function(a,b){void 0===b&&(b="api");var c=a&&a.length>0;if(c||this.secondaryColumnsPresent){if(c){this.processSecondaryColumnDefinitions(a);var d=this.balancedColumnTreeBuilder.createBalancedColumnGroups(a,!1);this.secondaryBalancedTree=d.balancedTree,this.secondaryHeaderRowCount=d.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsPresent=!0}else this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsPresent=!1;this.updateGridColumns(),this.updateDisplayedColumns(b)}},a.prototype.processSecondaryColumnDefinitions=function(a){function b(a){a.forEach(function(a){var e=g.Utils.exists(a.children);if(e){var f=a;d&&d(f),b(f.children)}else{var h=a;c&&c(h)}})}var c=this.gridOptionsWrapper.getProcessSecondaryColDefFunc(),d=this.gridOptionsWrapper.getProcessSecondaryColGroupDefFunc();(c||d)&&b(a)},a.prototype.updateGridColumns=function(){this.gridColsArePrimary&&(this.lastPrimaryOrder=this.gridColumns),this.secondaryColumns?(this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1):(this.gridBalancedTree=this.primaryBalancedTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,this.orderGridColsLikeLastPrimary()),this.putFixedColumnsFirst(),this.addAutoGroupToGridColumns(),this.setupQuickFilterColumns(),this.clearDisplayedColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns);var a={type:r.Events.EVENT_GRID_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(a)},a.prototype.orderGridColsLikeLastPrimary=function(){var a=this;if(!g.Utils.missing(this.lastPrimaryOrder)){var b=!1;this.gridColumns.forEach(function(c){a.lastPrimaryOrder.indexOf(c)<0&&(b=!0)}),b||this.gridColumns.sort(function(b,c){var d=a.lastPrimaryOrder.indexOf(b),e=a.lastPrimaryOrder.indexOf(c);return d-e})}},a.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},a.prototype.setupQuickFilterColumns=function(){this.groupAutoColumns?this.columnsForQuickFilter=this.primaryColumns.concat(this.groupAutoColumns):this.columnsForQuickFilter=this.primaryColumns},a.prototype.putFixedColumnsFirst=function(){var a=this.gridColumns.filter(function(a){return a.isLockPosition()}),b=this.gridColumns.filter(function(a){return!a.isLockPosition()});this.gridColumns=a.concat(b)},a.prototype.addAutoGroupToGridColumns=function(){if(this.createGroupAutoColumnsIfNeeded(),!g.Utils.missing(this.groupAutoColumns)){this.gridColumns=this.groupAutoColumns.concat(this.gridColumns);var a=this.balancedColumnTreeBuilder.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.gridBalancedTree=a.concat(this.gridBalancedTree)}},a.prototype.clearDisplayedColumns=function(){this.displayedLeftColumnTree=[],this.displayedRightColumnTree=[],this.displayedCentreColumnTree=[],this.displayedLeftHeaderRows={},this.displayedRightHeaderRows={},this.displayedCentreHeaderRows={},this.displayedLeftColumns=[],this.displayedRightColumns=[],this.displayedCenterColumns=[],this.allDisplayedColumns=[],this.allDisplayedVirtualColumns=[]},a.prototype.updateGroupsAndDisplayedColumns=function(a){this.updateOpenClosedVisibilityInColumnGroups(),this.updateDisplayedColumnsFromTrees(a),this.updateVirtualSets(),this.updateBodyWidths();var b={type:r.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(b)},a.prototype.updateDisplayedColumnsFromTrees=function(a){this.addToDisplayedColumns(this.displayedLeftColumnTree,this.displayedLeftColumns),this.addToDisplayedColumns(this.displayedCentreColumnTree,this.displayedCenterColumns),this.addToDisplayedColumns(this.displayedRightColumnTree,this.displayedRightColumns),this.setupAllDisplayedColumns(),this.setLeftValues(a)},a.prototype.setupAllDisplayedColumns=function(){this.gridOptionsWrapper.isEnableRtl()?this.allDisplayedColumns=this.displayedRightColumns.concat(this.displayedCenterColumns).concat(this.displayedLeftColumns):this.allDisplayedColumns=this.displayedLeftColumns.concat(this.displayedCenterColumns).concat(this.displayedRightColumns)},a.prototype.setLeftValues=function(a){this.setLeftValuesOfColumns(a),this.setLeftValuesOfGroups()},a.prototype.setLeftValuesOfColumns=function(a){var b=this,c=this.primaryColumns.slice(0),d=this.gridOptionsWrapper.isEnableRtl();[this.displayedLeftColumns,this.displayedRightColumns,this.displayedCenterColumns].forEach(function(e){if(d){var f=b.getWidthOfColsInList(e);e.forEach(function(b){f-=b.getActualWidth(),b.setLeft(f,a)})}else{var h=0;e.forEach(function(b){b.setLeft(h,a),h+=b.getActualWidth()})}g.Utils.removeAllFromArray(c,e)}),c.forEach(function(b){b.setLeft(null,a)})},a.prototype.setLeftValuesOfGroups=function(){[this.displayedLeftColumnTree,this.displayedRightColumnTree,this.displayedCentreColumnTree].forEach(function(a){a.forEach(function(a){if(a instanceof h.ColumnGroup){var b=a;b.checkLeft()}})})},a.prototype.addToDisplayedColumns=function(a,b){b.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(a,function(a){a instanceof i.Column&&b.push(a)})},a.prototype.updateDisplayedCenterVirtualColumns=function(){this.suppressColumnVirtualisation?this.allDisplayedCenterVirtualColumns=this.displayedCenterColumns:this.allDisplayedCenterVirtualColumns=this.filterOutColumnsWithinViewport(),this.allDisplayedVirtualColumns=this.allDisplayedCenterVirtualColumns.concat(this.displayedLeftColumns).concat(this.displayedRightColumns);var a={};return this.allDisplayedVirtualColumns.forEach(function(b){a[b.getId()]=!0}),a},a.prototype.getVirtualHeaderGroupRow=function(a,b){var c;switch(a){case i.Column.PINNED_LEFT:c=this.displayedLeftHeaderRows[b];break;case i.Column.PINNED_RIGHT:c=this.displayedRightHeaderRows[b];break;default:c=this.displayedCentreHeaderRows[b]}return g.Utils.missing(c)&&(c=[]),c},a.prototype.updateDisplayedVirtualGroups=function(a){function b(c,d,e){for(var f=!1,g=0;g<c.length;g++){var h=c[g],j=void 0;if(h instanceof i.Column)j=a[h.getId()]===!0;else{var k=h;j=b(k.getDisplayedChildren(),d,e+1)}j&&(f=!0,d[e]||(d[e]=[]),d[e].push(h))}return f}this.displayedLeftHeaderRows={},this.displayedRightHeaderRows={},this.displayedCentreHeaderRows={},b(this.displayedLeftColumnTree,this.displayedLeftHeaderRows,0),b(this.displayedRightColumnTree,this.displayedRightHeaderRows,0),b(this.displayedCentreColumnTree,this.displayedCentreHeaderRows,0)},a.prototype.updateVirtualSets=function(){var a=this.updateDisplayedCenterVirtualColumns();this.updateDisplayedVirtualGroups(a)},a.prototype.filterOutColumnsWithinViewport=function(){return g.Utils.filter(this.displayedCenterColumns,this.isColumnInViewport.bind(this))},a.prototype.sizeColumnsToFit=function(a,b){function c(a){g.Utils.removeFromArray(h,a),f.push(a)}var d=this;void 0===b&&(b="api");var e=this.getAllDisplayedColumns();if(!(a<=0||0===e.length)){for(var f=g.Utils.filter(e,function(a){return a.getColDef().suppressSizeToFit===!0}),h=g.Utils.filter(e,function(a){return a.getColDef().suppressSizeToFit!==!0}),i=h.slice(0),j=!1;!j;){j=!0;var k=a-this.getWidthOfColsInList(f);if(k<=0)h.forEach(function(a){a.setMinimum(b)});else for(var l=k/this.getWidthOfColsInList(h),m=k,n=h.length-1;n>=0;n--){var o=h[n],p=Math.round(o.getActualWidth()*l);if(p<o.getMinWidth())o.setMinimum(b),c(o),j=!1;else if(o.isGreaterThanMax(p))o.setActualWidth(o.getMaxWidth(),b),c(o),j=!1;else{var q=0===n;q?o.setActualWidth(m,b):o.setActualWidth(p,b)}m-=p}}this.setLeftValues(b),this.updateBodyWidths(),i.forEach(function(a){var b={type:r.Events.EVENT_COLUMN_RESIZED,column:a,columns:[a],finished:!0,api:d.gridApi,columnApi:d.columnApi,source:"sizeColumnsToFit"};d.eventService.dispatchEvent(b)})}},a.prototype.buildDisplayedTrees=function(a){var b=g.Utils.filter(a,function(a){return"left"===a.getPinned()}),c=g.Utils.filter(a,function(a){return"right"===a.getPinned()}),d=g.Utils.filter(a,function(a){return"left"!==a.getPinned()&&"right"!==a.getPinned()}),e=new t.GroupInstanceIdCreator;this.displayedLeftColumnTree=this.displayedGroupCreator.createDisplayedGroups(b,this.gridBalancedTree,e,this.displayedLeftColumnTree),this.displayedRightColumnTree=this.displayedGroupCreator.createDisplayedGroups(c,this.gridBalancedTree,e,this.displayedRightColumnTree),this.displayedCentreColumnTree=this.displayedGroupCreator.createDisplayedGroups(d,this.gridBalancedTree,e,this.displayedCentreColumnTree)},a.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var a=this.getAllDisplayedColumnGroups();this.columnUtils.depthFirstAllColumnTreeSearch(a,function(a){if(a instanceof h.ColumnGroup){var b=a;b.calculateDisplayedColumns()}})},a.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},a.prototype.createGroupAutoColumnsIfNeeded=function(){if(this.autoGroupsNeedBuilding){this.autoGroupsNeedBuilding=!1;var a=(this.rowGroupColumns.length>0||this.usingTreeData)&&!this.gridOptionsWrapper.isGroupSuppressAutoColumn()&&!this.gridOptionsWrapper.isGroupUseEntireRow()&&!this.gridOptionsWrapper.isGroupSuppressRow();a?this.groupAutoColumns=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns):this.groupAutoColumns=null}},a.prototype.createValueColumns=function(a){this.valueColumns.forEach(function(b){return b.setValueActive(!1,a)}),this.valueColumns=[];for(var b=0;b<this.primaryColumns.length;b++){var c=this.primaryColumns[b];c.getColDef().aggFunc&&(c.setAggFunc(c.getColDef().aggFunc),this.valueColumns.push(c),c.setValueActive(!0,a))}},a.prototype.getWidthOfColsInList=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].getActualWidth();return b},a.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},d([u.Autowired("gridOptionsWrapper"),e("design:type",j.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([u.Autowired("expressionService"),e("design:type",k.ExpressionService)],a.prototype,"expressionService",void 0),d([u.Autowired("balancedColumnTreeBuilder"),e("design:type",l.BalancedColumnTreeBuilder)],a.prototype,"balancedColumnTreeBuilder",void 0),d([u.Autowired("displayedGroupCreator"),e("design:type",m.DisplayedGroupCreator)],a.prototype,"displayedGroupCreator",void 0),d([u.Autowired("autoWidthCalculator"),e("design:type",n.AutoWidthCalculator)],a.prototype,"autoWidthCalculator",void 0),d([u.Autowired("eventService"),e("design:type",o.EventService)],a.prototype,"eventService",void 0),d([u.Autowired("columnUtils"),e("design:type",p.ColumnUtils)],a.prototype,"columnUtils",void 0),d([u.Autowired("context"),e("design:type",u.Context)],a.prototype,"context",void 0),d([u.Autowired("columnAnimationService"),e("design:type",v.ColumnAnimationService)],a.prototype,"columnAnimationService",void 0),d([u.Autowired("autoGroupColService"),e("design:type",w.AutoGroupColService)],a.prototype,"autoGroupColService",void 0),d([u.Optional("aggFuncService"),e("design:type",Object)],a.prototype,"aggFuncService",void 0),d([u.Optional("valueCache"),e("design:type",x.ValueCache)],a.prototype,"valueCache",void 0),d([u.Autowired("columnApi"),e("design:type",z.ColumnApi)],a.prototype,"columnApi",void 0),d([u.Autowired("gridApi"),e("design:type",y.GridApi)],a.prototype,"gridApi",void 0),d([u.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),d([f(0,u.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[q.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),a=d([u.Bean("columnController")],a)}();b.ColumnController=A},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(25);b.Events=d.Events},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(47),g=c(20),h=c(18),i=c(4),j=c(17),k=c(2),l=c(16),m=c(3),n=c(9),o=c(0),p=c(42),q=c(24),r=c(22),s=c(23),t=c(1),u=c(55),v=c(54),w=c(29),x=c(105),y=c(33),z=c(58),A=c(30),B=c(37),C=function(){function a(){this.detailGridInfoMap={}}return a.prototype.registerGridComp=function(a){this.gridPanel=a},a.prototype.registerHeaderRootComp=function(a){this.headerRootComp=a},a.prototype.init=function(){switch(this.rowModel.getType()){case n.Constants.ROW_MODEL_TYPE_CLIENT_SIDE:this.clientSideRowModel=this.rowModel;break;case n.Constants.ROW_MODEL_TYPE_INFINITE:this.infinitePageRowModel=this.rowModel;break;case n.Constants.ROW_MODEL_TYPE_SERVER_SIDE:this.serverSideRowModel=this.rowModel}},a.prototype.__getAlignedGridService=function(){return this.alignedGridsService},a.prototype.addDetailGridInfo=function(a,b){this.detailGridInfoMap[a]=b},a.prototype.removeDetailGridInfo=function(a){this.detailGridInfoMap[a]=void 0},a.prototype.getDetailGridInfo=function(a){return this.detailGridInfoMap[a]},a.prototype.forEachDetailGridInfo=function(a){var b=0;t.Utils.iterateObject(this.detailGridInfoMap,function(c,d){t.Utils.exists(d)&&(a(d,b),b++)})},a.prototype.getDataAsCsv=function(a){return this.csvCreator.getDataAsCsv(a)},a.prototype.exportDataAsCsv=function(a){this.csvCreator.exportDataAsCsv(a)},a.prototype.getDataAsExcel=function(a){return this.excelCreator||console.warn("ag-Grid: Excel export is only available in ag-Grid Enterprise"),this.excelCreator.getDataAsExcelXml(a)},a.prototype.exportDataAsExcel=function(a){this.excelCreator||console.warn("ag-Grid: Excel export is only available in ag-Grid Enterprise"),this.excelCreator.exportDataAsExcel(a)},a.prototype.setEnterpriseDatasource=function(a){console.warn("ag-grid: since version 18.x, api.setEnterpriseDatasource() should be replaced with api.setServerSideDatasource()"),this.setServerSideDatasource(a)},a.prototype.setServerSideDatasource=function(a){this.gridOptionsWrapper.isRowModelServerSide()?this.rowModel.setDatasource(a):console.warn("ag-Grid: you can only use an enterprise datasource when gridOptions.rowModelType is '"+n.Constants.ROW_MODEL_TYPE_SERVER_SIDE+"'")},a.prototype.setDatasource=function(a){this.gridOptionsWrapper.isRowModelInfinite()?this.rowModel.setDatasource(a):console.warn("ag-Grid: you can only use a datasource when gridOptions.rowModelType is '"+n.Constants.ROW_MODEL_TYPE_INFINITE+"'")},a.prototype.setViewportDatasource=function(a){this.gridOptionsWrapper.isRowModelViewport()?this.rowModel.setViewportDatasource(a):console.warn("ag-Grid: you can only use a viewport datasource when gridOptions.rowModelType is '"+n.Constants.ROW_MODEL_TYPE_VIEWPORT+"'")},a.prototype.setRowData=function(a){if(this.gridOptionsWrapper.isRowModelDefault())if(this.gridOptionsWrapper.isDeltaRowDataMode()){var b=this.immutableService.createTransactionForRowData(a),c=b[0],d=b[1];this.clientSideRowModel.updateRowData(c,d)}else this.selectionController.reset(),this.clientSideRowModel.setRowData(a);else console.log("cannot call setRowData unless using normal row model")},a.prototype.setFloatingTopRowData=function(a){console.warn("ag-Grid: since v12, api.setFloatingTopRowData() is now api.setPinnedTopRowData()"),this.setPinnedTopRowData(a)},a.prototype.setFloatingBottomRowData=function(a){console.warn("ag-Grid: since v12, api.setFloatingBottomRowData() is now api.setPinnedBottomRowData()"),this.setPinnedBottomRowData(a)},a.prototype.getFloatingTopRowCount=function(){return console.warn("ag-Grid: since v12, api.getFloatingTopRowCount() is now api.getPinnedTopRowCount()"),this.getPinnedTopRowCount()},a.prototype.getFloatingBottomRowCount=function(){return console.warn("ag-Grid: since v12, api.getFloatingBottomRowCount() is now api.getPinnedBottomRowCount()"),this.getPinnedBottomRowCount()},a.prototype.getFloatingTopRow=function(a){return console.warn("ag-Grid: since v12, api.getFloatingTopRow() is now api.getPinnedTopRow()"),this.getPinnedTopRow(a)},a.prototype.getFloatingBottomRow=function(a){return console.warn("ag-Grid: since v12, api.getFloatingBottomRow() is now api.getPinnedBottomRow()"),this.getPinnedBottomRow(a)},a.prototype.setPinnedTopRowData=function(a){this.pinnedRowModel.setPinnedTopRowData(a)},a.prototype.setPinnedBottomRowData=function(a){this.pinnedRowModel.setPinnedBottomRowData(a)},a.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},a.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},a.prototype.getPinnedTopRow=function(a){return this.pinnedRowModel.getPinnedTopRow(a)},a.prototype.getPinnedBottomRow=function(a){return this.pinnedRowModel.getPinnedBottomRow(a)},a.prototype.setColumnDefs=function(a,b){void 0===b&&(b="api"),this.columnController.setColumnDefs(a,b)},a.prototype.expireValueCache=function(){this.valueCache.expire()},a.prototype.getVerticalPixelRange=function(){return this.gridPanel.getVScrollPosition()},a.prototype.refreshToolPanel=function(){this.toolPanelComp&&this.toolPanelComp.refresh()},a.prototype.refreshCells=function(a){return void 0===a&&(a={}),Array.isArray(a)?void console.warn("since ag-Grid v11.1, refreshCells() now takes parameters, please see the documentation."):void this.rowRenderer.refreshCells(a)},a.prototype.flashCells=function(a){void 0===a&&(a={}),this.rowRenderer.flashCells(a)},a.prototype.redrawRows=function(a){void 0===a&&(a={}),a&&a.rowNodes?this.rowRenderer.redrawRows(a.rowNodes):this.rowRenderer.redrawAfterModelUpdate()},a.prototype.timeFullRedraw=function(a){function b(){var h=(new Date).getTime();g.rowRenderer.redrawAfterModelUpdate();var i=(new Date).getTime();setTimeout(function(){var g=(new Date).getTime(),j=i-h,k=g-i;console.log("duration:  processing = "+j+"ms, reflow = "+k+"ms"),d++,e+=j,f+=k,d<a?setTimeout(b,1e3):c()},0)}function c(){console.log("tests complete. iteration count = "+d),console.log("average processing = "+e/d+"ms"),console.log("average reflow = "+f/d+"ms")}void 0===a&&(a=1);var d=0,e=0,f=0,g=this;b()},a.prototype.refreshView=function(){console.warn("ag-Grid: since v11.1, refreshView() is deprecated, please call refreshCells() or redrawRows() instead"),this.redrawRows()},a.prototype.refreshRows=function(a){console.warn("since ag-Grid v11.1, refreshRows() is deprecated, please use refreshCells({rowNodes: rows}) or redrawRows({rowNodes: rows}) instead"),this.refreshCells({rowNodes:a})},a.prototype.rowDataChanged=function(a){console.log("ag-Grid: rowDataChanged is deprecated, either call refreshView() to refresh everything, or call rowNode.setRowData(newData) to set value on a particular node"),this.redrawRows()},a.prototype.softRefreshView=function(){console.error("ag-Grid: since v16, softRefreshView() is no longer supported. Please check the documentation on how to refresh.")},a.prototype.refreshGroupRows=function(){console.warn("ag-Grid: since v11.1, refreshGroupRows() is no longer supported, call refreshCells() instead. Because refreshCells() now does dirty checking, it will only refresh cells that have changed, so it should not be necessary to only refresh the group rows."),this.refreshCells()},a.prototype.setFunctionsReadOnly=function(a){this.gridOptionsWrapper.setProperty("functionsReadOnly",a)},a.prototype.refreshHeader=function(){this.headerRootComp.refreshHeader(),this.gridPanel.setBodyAndHeaderHeights()},a.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},a.prototype.isAdvancedFilterPresent=function(){return this.filterManager.isAdvancedFilterPresent()},a.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},a.prototype.getModel=function(){return this.rowModel},a.prototype.onGroupExpandedOrCollapsed=function(a){t.Utils.missing(this.clientSideRowModel)&&console.log("ag-Grid: cannot call onGroupExpandedOrCollapsed unless using normal row model"),t.Utils.exists(a)&&console.log("ag-Grid: api.onGroupExpandedOrCollapsed - refreshFromIndex parameter is no longer used, the grid will refresh all rows"),this.clientSideRowModel.refreshModel({step:n.Constants.STEP_MAP})},a.prototype.refreshInMemoryRowModel=function(a){console.warn("ag-grid: since version 18.x, api.refreshInMemoryRowModel() should be replaced with api.refreshClientSideRowModel()"),this.refreshClientSideRowModel(a)},a.prototype.refreshClientSideRowModel=function(a){t.Utils.missing(this.clientSideRowModel)&&console.log("cannot call refreshClientSideRowModel unless using normal row model");var b=n.Constants.STEP_EVERYTHING,c={group:n.Constants.STEP_EVERYTHING,filter:n.Constants.STEP_FILTER,map:n.Constants.STEP_MAP,aggregate:n.Constants.STEP_AGGREGATE,sort:n.Constants.STEP_SORT,pivot:n.Constants.STEP_PIVOT};if(t.Utils.exists(a)&&(b=c[a]),t.Utils.missing(b))return void console.error("ag-Grid: invalid step "+a+", available steps are "+Object.keys(c).join(", "));var d={step:b,keepRenderedRows:!0,animate:!0,keepEditingRows:!0};this.clientSideRowModel.refreshModel(d)},a.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},a.prototype.getRowNode=function(a){return this.rowModel.getRowNode(a)},a.prototype.expandAll=function(){return t.Utils.missing(this.clientSideRowModel)?void console.warn("ag-Grid: cannot call expandAll unless using normal row model"):void this.clientSideRowModel.expandOrCollapseAll(!0)},a.prototype.collapseAll=function(){return t.Utils.missing(this.clientSideRowModel)?void console.warn("ag-Grid: cannot call collapseAll unless using normal row model"):void this.clientSideRowModel.expandOrCollapseAll(!1)},a.prototype.addVirtualRowListener=function(a,b,c){"string"!=typeof a&&console.log("ag-Grid: addVirtualRowListener is deprecated, please use addRenderedRowListener."),this.addRenderedRowListener(a,b,c)},a.prototype.addRenderedRowListener=function(a,b,c){"virtualRowSelected"===a&&console.log("ag-Grid: event virtualRowSelected is deprecated, to register for individual row selection events, add a listener directly to the row node."),this.rowRenderer.addRenderedRowListener(a,b,c)},a.prototype.setQuickFilter=function(a){this.filterManager.setQuickFilter(a)},a.prototype.selectIndex=function(a,b,c){console.log("ag-Grid: do not use api for selection, call node.setSelected(value) instead"),c&&console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionController.selectIndex(a,b)},a.prototype.deselectIndex=function(a,b){void 0===b&&(b=!1),console.log("ag-Grid: do not use api for selection, call node.setSelected(value) instead"),b&&console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionController.deselectIndex(a)},a.prototype.selectNode=function(a,b,c){void 0===b&&(b=!1),void 0===c&&(c=!1),console.log("ag-Grid: API for selection is deprecated, call node.setSelected(value) instead"),c&&console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),a.setSelectedParams({newValue:!0,clearSelection:!b})},a.prototype.deselectNode=function(a,b){void 0===b&&(b=!1),console.log("ag-Grid: API for selection is deprecated, call node.setSelected(value) instead"),b&&console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),a.setSelectedParams({newValue:!1})},a.prototype.selectAll=function(){this.selectionController.selectAllRowNodes()},a.prototype.deselectAll=function(){this.selectionController.deselectAllRowNodes()},a.prototype.selectAllFiltered=function(){this.selectionController.selectAllRowNodes(!0)},a.prototype.deselectAllFiltered=function(){this.selectionController.deselectAllRowNodes(!0)},a.prototype.recomputeAggregates=function(){t.Utils.missing(this.clientSideRowModel)&&console.warn("cannot call recomputeAggregates unless using normal row model"),console.warn("recomputeAggregates is deprecated, please call api.refreshClientSideRowModel('aggregate') instead"),this.clientSideRowModel.refreshModel({step:n.Constants.STEP_AGGREGATE})},a.prototype.sizeColumnsToFit=function(){this.gridPanel.sizeColumnsToFit()},a.prototype.showLoadingOverlay=function(){this.gridPanel.showLoadingOverlay()},a.prototype.showNoRowsOverlay=function(){this.gridPanel.showNoRowsOverlay()},a.prototype.hideOverlay=function(){this.gridPanel.hideOverlay()},a.prototype.isNodeSelected=function(a){return console.log("ag-Grid: no need to call api.isNodeSelected(), just call node.isSelected() instead"),a.isSelected()},a.prototype.getSelectedNodesById=function(){return console.error("ag-Grid: since version 3.4, getSelectedNodesById no longer exists, use getSelectedNodes() instead"),null},a.prototype.getSelectedNodes=function(){return this.selectionController.getSelectedNodes();
},a.prototype.getSelectedRows=function(){return this.selectionController.getSelectedRows()},a.prototype.getBestCostNodeSelection=function(){return this.selectionController.getBestCostNodeSelection()},a.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},a.prototype.ensureColIndexVisible=function(a){console.warn("ag-Grid: ensureColIndexVisible(index) no longer supported, use ensureColumnVisible(colKey) instead.")},a.prototype.ensureColumnVisible=function(a){this.gridPanel.ensureColumnVisible(a)},a.prototype.ensureIndexVisible=function(a,b){this.gridPanel.ensureIndexVisible(a,b)},a.prototype.ensureNodeVisible=function(a,b){this.gridCore.ensureNodeVisible(a,b)},a.prototype.forEachLeafNode=function(a){t.Utils.missing(this.clientSideRowModel)&&console.log("cannot call forEachNode unless using normal row model"),this.clientSideRowModel.forEachLeafNode(a)},a.prototype.forEachNode=function(a){this.rowModel.forEachNode(a)},a.prototype.forEachNodeAfterFilter=function(a){t.Utils.missing(this.clientSideRowModel)&&console.log("cannot call forEachNodeAfterFilter unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilter(a)},a.prototype.forEachNodeAfterFilterAndSort=function(a){t.Utils.missing(this.clientSideRowModel)&&console.log("cannot call forEachNodeAfterFilterAndSort unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilterAndSort(a)},a.prototype.getFilterApiForColDef=function(a){return console.warn("ag-grid API method getFilterApiForColDef deprecated, use getFilterApi instead"),this.getFilterInstance(a)},a.prototype.getFilterInstance=function(a){var b=this.columnController.getPrimaryColumn(a);if(b)return this.filterManager.getFilterComponent(b).resolveNow(null,function(a){return a})},a.prototype.getFilterApi=function(a){return console.warn("ag-Grid: getFilterApi is deprecated, use getFilterInstance instead"),this.getFilterInstance(a)},a.prototype.destroyFilter=function(a){var b=this.columnController.getPrimaryColumn(a);if(b)return this.filterManager.destroyFilter(b,"filterDestroyed")},a.prototype.getColumnDef=function(a){var b=this.columnController.getPrimaryColumn(a);return b?b.getColDef():null},a.prototype.onFilterChanged=function(){this.filterManager.onFilterChanged()},a.prototype.onSortChanged=function(){this.sortController.onSortChanged()},a.prototype.setSortModel=function(a,b){void 0===b&&(b="api"),this.sortController.setSortModel(a,b)},a.prototype.getSortModel=function(){return this.sortController.getSortModel()},a.prototype.setFilterModel=function(a){this.filterManager.setFilterModel(a)},a.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},a.prototype.getFocusedCell=function(){return this.focusedCellController.getFocusedCell()},a.prototype.clearFocusedCell=function(){return this.focusedCellController.clearFocusedCell()},a.prototype.setFocusedCell=function(a,b,c){this.focusedCellController.setFocusedCell(a,b,c,!0)},a.prototype.setSuppressRowDrag=function(a){this.gridOptionsWrapper.setProperty(k.GridOptionsWrapper.PROP_SUPPRESS_ROW_DRAG,a)},a.prototype.setHeaderHeight=function(a){this.gridOptionsWrapper.setProperty(k.GridOptionsWrapper.PROP_HEADER_HEIGHT,a),this.doLayout()},a.prototype.setGridAutoHeight=function(a){this.gridOptionsWrapper.setProperty(k.GridOptionsWrapper.PROP_GRID_AUTO_HEIGHT,a)},a.prototype.getPreferredWidth=function(){return this.gridCore.getPreferredWidth()},a.prototype.setGroupHeaderHeight=function(a){this.gridOptionsWrapper.setProperty(k.GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,a),this.doLayout()},a.prototype.setFloatingFiltersHeight=function(a){this.gridOptionsWrapper.setProperty(k.GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,a),this.doLayout()},a.prototype.setPivotGroupHeaderHeight=function(a){this.gridOptionsWrapper.setProperty(k.GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,a),this.doLayout()},a.prototype.setPivotHeaderHeight=function(a){this.gridOptionsWrapper.setProperty(k.GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,a),this.doLayout()},a.prototype.showToolPanel=function(a){this.gridCore.showToolPanel(a)},a.prototype.setSuppressClipboardPaste=function(a){this.gridOptionsWrapper.setProperty(k.GridOptionsWrapper.PROP_SUPPRESS_CLIPBOARD_PASTE,a)},a.prototype.isToolPanelShowing=function(){return this.gridCore.isToolPanelShowing()},a.prototype.doLayout=function(){this.gridPanel.checkViewportAndScrolls()},a.prototype.resetRowHeights=function(){t.Utils.exists(this.clientSideRowModel)&&this.clientSideRowModel.resetRowHeights()},a.prototype.setGroupRemoveSingleChildren=function(a){this.gridOptionsWrapper.setProperty(k.GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN,a)},a.prototype.setGroupRemoveLowestSingleChildren=function(a){this.gridOptionsWrapper.setProperty(k.GridOptionsWrapper.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,a)},a.prototype.onRowHeightChanged=function(){t.Utils.exists(this.clientSideRowModel)&&this.clientSideRowModel.onRowHeightChanged()},a.prototype.getValue=function(a,b){var c=this.columnController.getPrimaryColumn(a);return t.Utils.missing(c)&&(c=this.columnController.getGridColumn(a)),t.Utils.missing(c)?null:this.valueService.getValue(c,b)},a.prototype.addEventListener=function(a,b){var c=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addEventListener(a,b,c)},a.prototype.addGlobalListener=function(a){var b=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addGlobalListener(a,b)},a.prototype.removeEventListener=function(a,b){var c=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeEventListener(a,b,c)},a.prototype.removeGlobalListener=function(a){var b=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeGlobalListener(a,b)},a.prototype.dispatchEvent=function(a){this.eventService.dispatchEvent(a)},a.prototype.destroy=function(){this.context.destroy()},a.prototype.resetQuickFilter=function(){this.rowModel.forEachNode(function(a){return a.quickFilterAggregateText=null})},a.prototype.getRangeSelections=function(){return this.rangeController?this.rangeController.getCellRanges():(console.warn("ag-Grid: cell range selection is only available in ag-Grid Enterprise"),null)},a.prototype.camelCaseToHumanReadable=function(a){return t.Utils.camelCaseToHumanText(a)},a.prototype.addRangeSelection=function(a){this.rangeController||console.warn("ag-Grid: cell range selection is only available in ag-Grid Enterprise"),this.rangeController.addRange(a)},a.prototype.clearRangeSelection=function(){this.rangeController||console.warn("ag-Grid: cell range selection is only available in ag-Grid Enterprise"),this.rangeController.clearSelection()},a.prototype.copySelectedRowsToClipboard=function(a,b){this.clipboardService||console.warn("ag-Grid: clipboard is only available in ag-Grid Enterprise"),this.clipboardService.copySelectedRowsToClipboard(a,b)},a.prototype.copySelectedRangeToClipboard=function(a){this.clipboardService||console.warn("ag-Grid: clipboard is only available in ag-Grid Enterprise"),this.clipboardService.copySelectedRangeToClipboard(a)},a.prototype.copySelectedRangeDown=function(){this.clipboardService||console.warn("ag-Grid: clipboard is only available in ag-Grid Enterprise"),this.clipboardService.copyRangeDown()},a.prototype.showColumnMenuAfterButtonClick=function(a,b){var c=this.columnController.getPrimaryColumn(a);this.menuFactory.showMenuAfterButtonClick(c,b)},a.prototype.showColumnMenuAfterMouseClick=function(a,b){var c=this.columnController.getPrimaryColumn(a);this.menuFactory.showMenuAfterMouseEvent(c,b)},a.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},a.prototype.setPopupParent=function(a){this.gridOptionsWrapper.setProperty(k.GridOptionsWrapper.PROP_POPUP_PARENT,a)},a.prototype.tabToNextCell=function(){return this.rowRenderer.tabToNextCell(!1)},a.prototype.tabToPreviousCell=function(){return this.rowRenderer.tabToNextCell(!0)},a.prototype.getCellRendererInstances=function(a){return void 0===a&&(a={}),this.rowRenderer.getCellRendererInstances(a)},a.prototype.getCellEditorInstances=function(a){return void 0===a&&(a={}),this.rowRenderer.getCellEditorInstances(a)},a.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},a.prototype.stopEditing=function(a){void 0===a&&(a=!1),this.rowRenderer.stopEditing(a)},a.prototype.startEditingCell=function(a){var b=this.columnController.getGridColumn(a.colKey);if(!b)return void console.warn("ag-Grid: no column found for "+a.colKey);var c={rowIndex:a.rowIndex,floating:a.rowPinned,column:b},d=new s.GridCell(c),e=t.Utils.missing(a.rowPinned);e&&this.gridPanel.ensureIndexVisible(a.rowIndex),this.rowRenderer.startEditingCell(d,a.keyPress,a.charPress)},a.prototype.addAggFunc=function(a,b){this.aggFuncService&&this.aggFuncService.addAggFunc(a,b)},a.prototype.addAggFuncs=function(a){this.aggFuncService&&this.aggFuncService.addAggFuncs(a)},a.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},a.prototype.updateRowData=function(a){var b=null;return this.clientSideRowModel?b=this.clientSideRowModel.updateRowData(a):this.infinitePageRowModel?this.infinitePageRowModel.updateRowData(a):console.error("ag-Grid: updateRowData() only works with ClientSideRowModel and InfiniteRowModel."),this.gridOptionsWrapper.isSuppressChangeDetection()||this.rowRenderer.refreshCells(),b},a.prototype.batchUpdateRowData=function(a,b){return this.clientSideRowModel?void this.clientSideRowModel.batchUpdateRowData(a,b):void console.error("ag-Grid: api.batchUpdateRowData() only works with ClientSideRowModel.")},a.prototype.insertItemsAtIndex=function(a,b,c){void 0===c&&(c=!1),console.warn("ag-Grid: insertItemsAtIndex() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:b,addIndex:a,update:null,remove:null})},a.prototype.removeItems=function(a,b){void 0===b&&(b=!1),console.warn("ag-Grid: removeItems() is deprecated, use updateRowData(transaction) instead.");var c=a.map(function(a){return a.data});this.updateRowData({add:null,addIndex:null,update:null,remove:c})},a.prototype.addItems=function(a,b){void 0===b&&(b=!1),console.warn("ag-Grid: addItems() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:a,addIndex:null,update:null,remove:null})},a.prototype.refreshVirtualPageCache=function(){console.warn("ag-Grid: refreshVirtualPageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},a.prototype.refreshInfinitePageCache=function(){console.warn("ag-Grid: refreshInfinitePageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},a.prototype.refreshInfiniteCache=function(){this.infinitePageRowModel?this.infinitePageRowModel.refreshCache():console.warn("ag-Grid: api.refreshInfiniteCache is only available when rowModelType='infinite'.")},a.prototype.purgeVirtualPageCache=function(){console.warn("ag-Grid: purgeVirtualPageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfinitePageCache()},a.prototype.purgeInfinitePageCache=function(){console.warn("ag-Grid: purgeInfinitePageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfiniteCache()},a.prototype.purgeInfiniteCache=function(){this.infinitePageRowModel?this.infinitePageRowModel.purgeCache():console.warn("ag-Grid: api.purgeInfiniteCache is only available when rowModelType='infinite'.")},a.prototype.purgeEnterpriseCache=function(a){console.warn("ag-grid: since version 18.x, api.purgeEnterpriseCache() should be replaced with api.purgeServerSideCache()"),this.purgeServerSideCache(a)},a.prototype.purgeServerSideCache=function(a){this.serverSideRowModel?this.serverSideRowModel.purgeCache(a):console.warn("ag-Grid: api.purgeServerSideCache is only available when rowModelType='enterprise'.")},a.prototype.getVirtualRowCount=function(){return console.warn("ag-Grid: getVirtualRowCount() is now called getInfiniteRowCount(), please call getInfiniteRowCount() instead"),this.getInfiniteRowCount()},a.prototype.getInfiniteRowCount=function(){return this.infinitePageRowModel?this.infinitePageRowModel.getVirtualRowCount():void console.warn("ag-Grid: api.getVirtualRowCount is only available when rowModelType='virtual'.")},a.prototype.isMaxRowFound=function(){return this.infinitePageRowModel?this.infinitePageRowModel.isMaxRowFound():void console.warn("ag-Grid: api.isMaxRowFound is only available when rowModelType='virtual'.")},a.prototype.setVirtualRowCount=function(a,b){console.warn("ag-Grid: setVirtualRowCount() is now called setInfiniteRowCount(), please call setInfiniteRowCount() instead"),this.setInfiniteRowCount(a,b)},a.prototype.setInfiniteRowCount=function(a,b){this.infinitePageRowModel?this.infinitePageRowModel.setVirtualRowCount(a,b):console.warn("ag-Grid: api.setVirtualRowCount is only available when rowModelType='virtual'.")},a.prototype.getVirtualPageState=function(){return console.warn("ag-Grid: getVirtualPageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},a.prototype.getInfinitePageState=function(){return console.warn("ag-Grid: getInfinitePageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},a.prototype.getCacheBlockState=function(){return this.infinitePageRowModel?this.infinitePageRowModel.getBlockState():this.serverSideRowModel?this.serverSideRowModel.getBlockState():void console.warn("ag-Grid: api.getCacheBlockState() is only available when rowModelType='infinite' or rowModelType='serverSide'.")},a.prototype.checkGridSize=function(){this.gridPanel.setBodyAndHeaderHeights()},a.prototype.getFirstRenderedRow=function(){return console.log("in ag-Grid v12, getFirstRenderedRow() was renamed to getFirstDisplayedRow()"),this.getFirstDisplayedRow()},a.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},a.prototype.getLastRenderedRow=function(){return console.log("in ag-Grid v12, getLastRenderedRow() was renamed to getLastDisplayedRow()"),this.getLastDisplayedRow()},a.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},a.prototype.getDisplayedRowAtIndex=function(a){return this.rowModel.getRow(a)},a.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},a.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},a.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},a.prototype.paginationSetPageSize=function(a){this.gridOptionsWrapper.setProperty("paginationPageSize",a)},a.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},a.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},a.prototype.paginationGetRowCount=function(){return this.paginationProxy.getTotalRowCount()},a.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},a.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},a.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},a.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},a.prototype.paginationGoToPage=function(a){this.paginationProxy.goToPage(a)},d([o.Autowired("immutableService"),e("design:type",x.ImmutableService)],a.prototype,"immutableService",void 0),d([o.Autowired("csvCreator"),e("design:type",f.CsvCreator)],a.prototype,"csvCreator",void 0),d([o.Optional("excelCreator"),e("design:type",Object)],a.prototype,"excelCreator",void 0),d([o.Autowired("gridCore"),e("design:type",p.GridCore)],a.prototype,"gridCore",void 0),d([o.Autowired("rowRenderer"),e("design:type",g.RowRenderer)],a.prototype,"rowRenderer",void 0),d([o.Autowired("filterManager"),e("design:type",h.FilterManager)],a.prototype,"filterManager",void 0),d([o.Autowired("columnController"),e("design:type",i.ColumnController)],a.prototype,"columnController",void 0),d([o.Autowired("selectionController"),e("design:type",j.SelectionController)],a.prototype,"selectionController",void 0),d([o.Autowired("gridOptionsWrapper"),e("design:type",k.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([o.Autowired("valueService"),e("design:type",l.ValueService)],a.prototype,"valueService",void 0),d([o.Autowired("alignedGridsService"),e("design:type",z.AlignedGridsService)],a.prototype,"alignedGridsService",void 0),d([o.Autowired("eventService"),e("design:type",m.EventService)],a.prototype,"eventService",void 0),d([o.Autowired("pinnedRowModel"),e("design:type",A.PinnedRowModel)],a.prototype,"pinnedRowModel",void 0),d([o.Autowired("context"),e("design:type",o.Context)],a.prototype,"context",void 0),d([o.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([o.Autowired("sortController"),e("design:type",q.SortController)],a.prototype,"sortController",void 0),d([o.Autowired("paginationProxy"),e("design:type",w.PaginationProxy)],a.prototype,"paginationProxy",void 0),d([o.Autowired("focusedCellController"),e("design:type",r.FocusedCellController)],a.prototype,"focusedCellController",void 0),d([o.Optional("rangeController"),e("design:type",Object)],a.prototype,"rangeController",void 0),d([o.Optional("clipboardService"),e("design:type",Object)],a.prototype,"clipboardService",void 0),d([o.Optional("aggFuncService"),e("design:type",Object)],a.prototype,"aggFuncService",void 0),d([o.Autowired("menuFactory"),e("design:type",Object)],a.prototype,"menuFactory",void 0),d([o.Optional("contextMenuFactory"),e("design:type",Object)],a.prototype,"contextMenuFactory",void 0),d([o.Autowired("cellRendererFactory"),e("design:type",u.CellRendererFactory)],a.prototype,"cellRendererFactory",void 0),d([o.Autowired("cellEditorFactory"),e("design:type",v.CellEditorFactory)],a.prototype,"cellEditorFactory",void 0),d([o.Autowired("valueCache"),e("design:type",y.ValueCache)],a.prototype,"valueCache",void 0),d([o.Optional("toolPanelComp"),e("design:type",Object)],a.prototype,"toolPanelComp",void 0),d([o.Autowired("animationFrameService"),e("design:type",B.AnimationFrameService)],a.prototype,"animationFrameService",void 0),d([o.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([o.Bean("gridApi")],a)}();b.GridApi=C},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(4),g=c(0),h=function(){function a(){}return a.prototype.sizeColumnsToFit=function(a){this.columnController.sizeColumnsToFit(a,"api")},a.prototype.setColumnGroupOpened=function(a,b){this.columnController.setColumnGroupOpened(a,b,"api")},a.prototype.getColumnGroup=function(a,b){return this.columnController.getColumnGroup(a,b)},a.prototype.getOriginalColumnGroup=function(a){return this.columnController.getOriginalColumnGroup(a)},a.prototype.getDisplayNameForColumn=function(a,b){return this.columnController.getDisplayNameForColumn(a,b)},a.prototype.getDisplayNameForColumnGroup=function(a,b){return this.columnController.getDisplayNameForColumnGroup(a,b)},a.prototype.getColumn=function(a){return this.columnController.getPrimaryColumn(a)},a.prototype.setColumnState=function(a){return this.columnController.setColumnState(a,"api")},a.prototype.getColumnState=function(){return this.columnController.getColumnState()},a.prototype.resetColumnState=function(){this.columnController.resetColumnState("api")},a.prototype.getColumnGroupState=function(){return this.columnController.getColumnGroupState()},a.prototype.setColumnGroupState=function(a){this.columnController.setColumnGroupState(a,"api")},a.prototype.resetColumnGroupState=function(){this.columnController.resetColumnGroupState("api")},a.prototype.isPinning=function(){return this.columnController.isPinningLeft()||this.columnController.isPinningRight()},a.prototype.isPinningLeft=function(){return this.columnController.isPinningLeft()},a.prototype.isPinningRight=function(){return this.columnController.isPinningRight()},a.prototype.getDisplayedColAfter=function(a){return this.columnController.getDisplayedColAfter(a)},a.prototype.getDisplayedColBefore=function(a){return this.columnController.getDisplayedColBefore(a)},a.prototype.setColumnVisible=function(a,b){this.columnController.setColumnVisible(a,b,"api")},a.prototype.setColumnsVisible=function(a,b){this.columnController.setColumnsVisible(a,b,"api")},a.prototype.setColumnPinned=function(a,b){this.columnController.setColumnPinned(a,b,"api")},a.prototype.setColumnsPinned=function(a,b){this.columnController.setColumnsPinned(a,b,"api")},a.prototype.getAllColumns=function(){return this.columnController.getAllPrimaryColumns()},a.prototype.getAllGridColumns=function(){return this.columnController.getAllGridColumns()},a.prototype.getDisplayedLeftColumns=function(){return this.columnController.getDisplayedLeftColumns()},a.prototype.getDisplayedCenterColumns=function(){return this.columnController.getDisplayedCenterColumns()},a.prototype.getDisplayedRightColumns=function(){return this.columnController.getDisplayedRightColumns()},a.prototype.getAllDisplayedColumns=function(){return this.columnController.getAllDisplayedColumns()},a.prototype.getAllDisplayedVirtualColumns=function(){return this.columnController.getAllDisplayedVirtualColumns()},a.prototype.moveColumn=function(a,b){"number"==typeof a?(console.log("ag-Grid: you are using moveColumn(fromIndex, toIndex) - moveColumn takes a column key and a destination index, not two indexes, to move with indexes use moveColumnByIndex(from,to) instead"),this.columnController.moveColumnByIndex(a,b,"api")):this.columnController.moveColumn(a,b,"api")},a.prototype.moveColumnByIndex=function(a,b){this.columnController.moveColumnByIndex(a,b,"api")},a.prototype.moveColumns=function(a,b){this.columnController.moveColumns(a,b,"api")},a.prototype.moveRowGroupColumn=function(a,b){this.columnController.moveRowGroupColumn(a,b)},a.prototype.setColumnAggFunc=function(a,b){this.columnController.setColumnAggFunc(a,b)},a.prototype.setColumnWidth=function(a,b,c){void 0===c&&(c=!0),this.columnController.setColumnWidth(a,b,!1,c)},a.prototype.setPivotMode=function(a){this.columnController.setPivotMode(a)},a.prototype.isPivotMode=function(){return this.columnController.isPivotMode()},a.prototype.getSecondaryPivotColumn=function(a,b){return this.columnController.getSecondaryPivotColumn(a,b)},a.prototype.setValueColumns=function(a){this.columnController.setValueColumns(a,"api")},a.prototype.getValueColumns=function(){return this.columnController.getValueColumns()},a.prototype.removeValueColumn=function(a){this.columnController.removeValueColumn(a,"api")},a.prototype.removeValueColumns=function(a){this.columnController.removeValueColumns(a,"api")},a.prototype.addValueColumn=function(a){this.columnController.addValueColumn(a,"api")},a.prototype.addValueColumns=function(a){this.columnController.addValueColumns(a,"api")},a.prototype.setRowGroupColumns=function(a){this.columnController.setRowGroupColumns(a,"api")},a.prototype.removeRowGroupColumn=function(a){this.columnController.removeRowGroupColumn(a,"api")},a.prototype.removeRowGroupColumns=function(a){this.columnController.removeRowGroupColumns(a,"api")},a.prototype.addRowGroupColumn=function(a){this.columnController.addRowGroupColumn(a,"api")},a.prototype.addRowGroupColumns=function(a){this.columnController.addRowGroupColumns(a,"api")},a.prototype.getRowGroupColumns=function(){return this.columnController.getRowGroupColumns()},a.prototype.setPivotColumns=function(a){this.columnController.setPivotColumns(a,"api")},a.prototype.removePivotColumn=function(a){this.columnController.removePivotColumn(a,"api")},a.prototype.removePivotColumns=function(a){this.columnController.removePivotColumns(a,"api")},a.prototype.addPivotColumn=function(a){this.columnController.addPivotColumn(a,"api")},a.prototype.addPivotColumns=function(a){this.columnController.addPivotColumns(a,"api")},a.prototype.getPivotColumns=function(){return this.columnController.getPivotColumns()},a.prototype.getLeftDisplayedColumnGroups=function(){return this.columnController.getLeftDisplayedColumnGroups()},a.prototype.getCenterDisplayedColumnGroups=function(){return this.columnController.getCenterDisplayedColumnGroups()},a.prototype.getRightDisplayedColumnGroups=function(){return this.columnController.getRightDisplayedColumnGroups()},a.prototype.getAllDisplayedColumnGroups=function(){return this.columnController.getAllDisplayedColumnGroups()},a.prototype.autoSizeColumn=function(a){return this.columnController.autoSizeColumn(a,"api")},a.prototype.autoSizeColumns=function(a){return this.columnController.autoSizeColumns(a,"api")},a.prototype.autoSizeAllColumns=function(){this.columnController.autoSizeAllColumns("api")},a.prototype.setSecondaryColumns=function(a){this.columnController.setSecondaryColumns(a,"api")},a.prototype.columnGroupOpened=function(a,b){console.error("ag-Grid: columnGroupOpened no longer exists, use setColumnGroupOpened"),this.setColumnGroupOpened(a,b)},a.prototype.hideColumns=function(a,b){console.error("ag-Grid: hideColumns is deprecated, use setColumnsVisible"),this.columnController.setColumnsVisible(a,!b,"api")},a.prototype.hideColumn=function(a,b){console.error("ag-Grid: hideColumn is deprecated, use setColumnVisible"),this.columnController.setColumnVisible(a,!b,"api")},a.prototype.setState=function(a){return console.error("ag-Grid: setState is deprecated, use setColumnState"),this.setColumnState(a)},a.prototype.getState=function(){return console.error("ag-Grid: getState is deprecated, use getColumnState"),this.getColumnState()},a.prototype.resetState=function(){console.error("ag-Grid: resetState is deprecated, use resetColumnState"),this.resetColumnState()},a.prototype.getAggregationColumns=function(){return console.error("ag-Grid: getAggregationColumns is deprecated, use getValueColumns"),this.columnController.getValueColumns()},a.prototype.removeAggregationColumn=function(a){console.error("ag-Grid: removeAggregationColumn is deprecated, use removeValueColumn"),this.columnController.removeValueColumn(a,"api")},a.prototype.removeAggregationColumns=function(a){console.error("ag-Grid: removeAggregationColumns is deprecated, use removeValueColumns"),this.columnController.removeValueColumns(a,"api")},a.prototype.addAggregationColumn=function(a){console.error("ag-Grid: addAggregationColumn is deprecated, use addValueColumn"),this.columnController.addValueColumn(a,"api")},a.prototype.addAggregationColumns=function(a){console.error("ag-Grid: addAggregationColumns is deprecated, use addValueColumns"),this.columnController.addValueColumns(a,"api")},a.prototype.setColumnAggFunction=function(a,b){console.error("ag-Grid: setColumnAggFunction is deprecated, use setColumnAggFunc"),this.columnController.setColumnAggFunc(a,b,"api")},a.prototype.getDisplayNameForCol=function(a){return console.error("ag-Grid: getDisplayNameForCol is deprecated, use getDisplayNameForColumn"),this.getDisplayNameForColumn(a,null)},d([g.Autowired("columnController"),e("design:type",f.ColumnController)],a.prototype,"columnController",void 0),a=d([g.Bean("columnApi")],a)}();b.ColumnApi=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(1),f=c(13),g=new e.NumberSequence,h=function(a){function b(b){var c=a.call(this)||this;return c.childComponents=[],c.annotatedEventListeners=[],c.visible=!0,c.compId=g.next(),b&&c.setTemplate(b),c}return d(b,a),b.prototype.getCompId=function(){return this.compId},b.prototype.instantiate=function(a){this.instantiateRecurse(this.getGui(),a)},b.prototype.instantiateRecurse=function(a,b){var c=this,d=e.Utils.copyNodeList(a.childNodes);d.forEach(function(d){var e=b.createComponent(d,function(a){var b=c.getAttrLists(d);c.copyAttributesFromNode(b,a.getGui()),c.createChildAttributes(b,a),c.addEventListenersToComponent(b,a)});if(e)c.swapComponentForNode(e,a,d);else if(d.childNodes&&c.instantiateRecurse(d,b),d instanceof HTMLElement){var f=c.getAttrLists(d);c.addEventListenersToElement(f,d)}})},b.prototype.getAttrLists=function(a){var b={bindings:[],events:[],normal:[]};return e.Utils.iterateNamedNodeMap(a.attributes,function(a,c){var d=a.substr(0,1);if("("===d){var e=a.replace("(","").replace(")","");b.events.push({name:e,value:c})}else if("["===d){var f=a.replace("[","").replace("]","");b.bindings.push({name:f,value:c})}else b.normal.push({name:a,value:c})}),b},b.prototype.addEventListenersToElement=function(a,b){var c=this;this.addEventListenerCommon(a,function(a,d){c.addDestroyableEventListener(b,a,d)})},b.prototype.addEventListenersToComponent=function(a,b){var c=this;this.addEventListenerCommon(a,function(a,d){c.addDestroyableEventListener(b,a,d)})},b.prototype.addEventListenerCommon=function(a,b){var c=this,d=this.getAgComponentMetaData("methods");a.events.forEach(function(a){var f=a.value,g=e.Utils.find(d,"alias",f),h=e.Utils.exists(g)?g.methodName:f,i=c[h];if("function"!=typeof i)return void console.warn("ag-Grid: count not find callback "+f);var j=e.Utils.hyphenToCamelCase(a.name);b(j,i.bind(c))})},b.prototype.createChildAttributes=function(a,b){var c=this,d={};a.normal.forEach(function(a){var b=e.Utils.hyphenToCamelCase(a.name);d[b]=a.value}),a.bindings.forEach(function(a){var b=e.Utils.hyphenToCamelCase(a.name);d[b]=c[a.value]}),b.props=d},b.prototype.copyAttributesFromNode=function(a,b){a.normal.forEach(function(a){b.setAttribute(a.name,a.value)})},b.prototype.swapComponentForNode=function(a,b,c){var d=a.getGui();b.replaceChild(d,c),b.insertBefore(document.createComment(c.nodeName),d),this.childComponents.push(a),this.swapInComponentForQuerySelectors(a,c)},b.prototype.swapInComponentForQuerySelectors=function(a,b){for(var c=Object.getPrototypeOf(this),d=this;null!=c;){var e=c.__agComponentMetaData,f=c.constructor.name;e&&e[f]&&e[f].querySelectors&&e[f].querySelectors.forEach(function(c){d[c.attributeName]===b&&(d[c.attributeName]=a)}),c=Object.getPrototypeOf(c)}},b.prototype.setTemplate=function(a){var b=e.Utils.loadTemplate(a);this.setTemplateFromElement(b)},b.prototype.setTemplateFromElement=function(a){this.eGui=a,this.eGui.__agComponent=this,this.addAnnotatedEventListeners(),this.wireQuerySelectors()},b.prototype.wireQuerySelectors=function(){var a=this;if(this.eGui)for(var b=Object.getPrototypeOf(this),c=function(){var c=b.__agComponentMetaData,e=b.constructor.name;if(c&&c[e]&&c[e].querySelectors){var f=d;c[e].querySelectors.forEach(function(b){var c=a.eGui.querySelector(b.querySelector);if(c){var d=c.__agComponent;d?f[b.attributeName]=d:f[b.attributeName]=c}})}b=Object.getPrototypeOf(b)},d=this;null!=b;)c()},b.prototype.addAnnotatedEventListeners=function(){var a=this;if(this.removeAnnotatedEventListeners(),this.eGui){var b=this.getAgComponentMetaData("listenerMethods");e.Utils.missingOrEmpty(b)||(this.annotatedEventListeners||(this.annotatedEventListeners=[]),b.forEach(function(b){var c=a[b.methodName].bind(a);a.eGui.addEventListener(b.eventName,c),a.annotatedEventListeners.push({
eventName:b.eventName,listener:c})}))}},b.prototype.getAgComponentMetaData=function(a){for(var b=[],c=Object.getPrototypeOf(this);null!=c;){var d=c.__agComponentMetaData,e=c.constructor.name;d&&d[e]&&d[e][a]&&(b=b.concat(d[e][a])),c=Object.getPrototypeOf(c)}return b},b.prototype.removeAnnotatedEventListeners=function(){var a=this;this.annotatedEventListeners&&this.eGui&&(this.annotatedEventListeners.forEach(function(b){a.eGui.removeEventListener(b.eventName,b.listener)}),this.annotatedEventListeners=null)},b.prototype.getGui=function(){return this.eGui},b.prototype.setGui=function(a){this.eGui=a},b.prototype.queryForHtmlElement=function(a){return this.eGui.querySelector(a)},b.prototype.queryForHtmlInputElement=function(a){return this.eGui.querySelector(a)},b.prototype.appendChild=function(a){if(e.Utils.isNodeOrElement(a))this.eGui.appendChild(a);else{var b=a;this.eGui.appendChild(b.getGui()),this.childComponents.push(b)}},b.prototype.addFeature=function(a,b){a.wireBean(b),b.destroy&&this.addDestroyFunc(b.destroy.bind(b))},b.prototype.isVisible=function(){return this.visible},b.prototype.setVisible=function(a){if(a!==this.visible){this.visible=a,e.Utils.addOrRemoveCssClass(this.eGui,"ag-hidden",!a);var c={type:b.EVENT_VISIBLE_CHANGED,visible:this.visible};this.dispatchEvent(c)}},b.prototype.addOrRemoveCssClass=function(a,b){e.Utils.addOrRemoveCssClass(this.eGui,a,b)},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.childComponents.forEach(function(a){return a.destroy()}),this.childComponents.length=0,this.removeAnnotatedEventListeners()},b.prototype.addGuiEventListener=function(a,b){var c=this;this.getGui().addEventListener(a,b),this.addDestroyFunc(function(){return c.getGui().removeEventListener(a,b)})},b.prototype.addCssClass=function(a){e.Utils.addCssClass(this.getGui(),a)},b.prototype.removeCssClass=function(a){e.Utils.removeCssClass(this.getGui(),a)},b.prototype.getAttribute=function(a){var b=this.getGui();return b?b.getAttribute(a):null},b.prototype.getRefElement=function(a){return this.queryForHtmlElement('[ref="'+a+'"]')},b.EVENT_VISIBLE_CHANGED="visibleChanged",b}(f.BeanStub);b.Component=h},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(){}return a.STEP_EVERYTHING=0,a.STEP_FILTER=1,a.STEP_SORT=2,a.STEP_MAP=3,a.STEP_AGGREGATE=4,a.STEP_PIVOT=5,a.ROW_BUFFER_SIZE=10,a.LAYOUT_INTERVAL=500,a.BATCH_WAIT_MILLIS=50,a.EXPORT_TYPE_DRAG_COPY="dragCopy",a.EXPORT_TYPE_CLIPBOARD="clipboard",a.EXPORT_TYPE_EXCEL="excel",a.EXPORT_TYPE_CSV="csv",a.KEY_BACKSPACE=8,a.KEY_TAB=9,a.KEY_NEW_LINE=10,a.KEY_ENTER=13,a.KEY_SHIFT=16,a.KEY_ESCAPE=27,a.KEY_SPACE=32,a.KEY_LEFT=37,a.KEY_UP=38,a.KEY_RIGHT=39,a.KEY_DOWN=40,a.KEY_DELETE=46,a.KEY_A=65,a.KEY_C=67,a.KEY_V=86,a.KEY_D=68,a.KEY_F2=113,a.KEY_PAGE_UP=33,a.KEY_PAGE_DOWN=34,a.KEY_PAGE_HOME=36,a.KEY_PAGE_END=35,a.ROW_MODEL_TYPE_INFINITE="infinite",a.ROW_MODEL_TYPE_VIEWPORT="viewport",a.ROW_MODEL_TYPE_CLIENT_SIDE="clientSide",a.ROW_MODEL_TYPE_SERVER_SIDE="serverSide",a.DEPRECATED_ROW_MODEL_TYPE_NORMAL="normal",a.ALWAYS="always",a.ONLY_WHEN_GROUPING="onlyWhenGrouping",a.PINNED_TOP="top",a.PINNED_BOTTOM="bottom",a}();b.Constants=d},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(3),g=c(1),h=c(0),i=c(2),j=c(31),k=c(7),l=c(6),m=function(){function a(a,b,c){this.moving=!1,this.menuVisible=!1,this.filterActive=!1,this.eventService=new f.EventService,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=a,this.visible=!a.hide,this.sort=a.sort,this.sortedAt=a.sortedAt,this.colId=b,this.primary=c,this.lockPosition=a.lockPosition===!0,this.lockPinned=a.lockPinned===!0,this.lockVisible=a.lockVisible===!0}return a.prototype.isLockPosition=function(){return this.lockPosition},a.prototype.isLockVisible=function(){return this.lockVisible},a.prototype.isLockPinned=function(){return this.lockPinned},a.prototype.setParent=function(a){this.parent=a},a.prototype.getParent=function(){return this.parent},a.prototype.initialise=function(){this.setPinned(this.colDef.pinned);var a=this.gridOptionsWrapper.getMinColWidth(),b=this.gridOptionsWrapper.getMaxColWidth();this.colDef.minWidth?this.minWidth=this.colDef.minWidth:this.minWidth=a,this.colDef.maxWidth?this.maxWidth=this.colDef.maxWidth:this.maxWidth=b,this.actualWidth=this.columnUtils.calculateColInitialWidth(this.colDef);var c=this.gridOptionsWrapper.isSuppressFieldDotNotation();this.fieldContainsDots=g.Utils.exists(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!c,this.tooltipFieldContainsDots=g.Utils.exists(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!c,this.validate()},a.prototype.isEmptyGroup=function(){return!1},a.prototype.isRowGroupDisplayed=function(a){if(g.Utils.missing(this.colDef)||g.Utils.missing(this.colDef.showRowGroup))return!1;var b=this.colDef.showRowGroup===!0,c=this.colDef.showRowGroup===a;return b||c},a.prototype.getUniqueId=function(){return this.getId()},a.prototype.isPrimary=function(){return this.primary},a.prototype.isFilterAllowed=function(){return this.primary&&!this.colDef.suppressFilter},a.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},a.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},a.prototype.validate=function(){var a=this.colDef;if(!this.gridOptionsWrapper.isEnterprise()){var b=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","pivot","pivotIndex","aggFunc"];b.forEach(function(b){g.Utils.exists(a[b])&&console.warn("ag-Grid: "+b+" is only valid in ag-Grid-Enterprise, your column definition should not have "+b)})}if(this.gridOptionsWrapper.isTreeData()){var c=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","pivot","pivotIndex"];c.forEach(function(b){g.Utils.exists(a[b])&&console.warn("ag-Grid: "+b+" is not possible when doing tree data, your column definition should not have "+b)})}g.Utils.exists(this.colDef.width)&&"number"!=typeof this.colDef.width&&console.warn("ag-Grid: colDef.width should be a number, not "+typeof this.colDef.width),g.Utils.get(this,"colDef.cellRendererParams.restrictToOneGroup",null)&&console.warn("ag-Grid: Since ag-grid 11.0.0 cellRendererParams.restrictToOneGroup is deprecated. You should use showRowGroup"),g.Utils.get(this,"colDef.cellRendererParams.keyMap",null)&&console.warn("ag-Grid: Since ag-grid 11.0.0 cellRendererParams.keyMap is deprecated. You should use colDef.keyCreator"),g.Utils.get(this,"colDef.cellRendererParams.keyMap",null)&&console.warn("ag-Grid: Since ag-grid 11.0.0 cellRendererParams.keyMap is deprecated. You should use colDef.keyCreator"),a.floatingCellRenderer&&(console.warn("ag-Grid: since v11, floatingCellRenderer is now pinnedRowCellRenderer"),this.colDef.pinnedRowCellRenderer=a.floatingCellRenderer),a.floatingRendererFramework&&(console.warn("ag-Grid: since v11, floatingRendererFramework is now pinnedRowCellRendererFramework"),this.colDef.pinnedRowCellRendererFramework=a.floatingRendererFramework),a.floatingRendererParams&&(console.warn("ag-Grid: since v11, floatingRendererParams is now pinnedRowCellRendererParams"),this.colDef.pinnedRowCellRendererParams=a.floatingRendererParams),a.floatingValueFormatter&&(console.warn("ag-Grid: since v11, floatingValueFormatter is now pinnedRowValueFormatter"),this.colDef.pinnedRowValueFormatter=a.floatingValueFormatter),a.cellFormatter&&(console.warn("ag-Grid: since v12, cellFormatter is now valueFormatter"),g.Utils.missing(this.colDef.valueFormatter)&&(this.colDef.valueFormatter=a.cellFormatter)),a.headerCellTemplate&&console.warn("ag-Grid: since v15, headerCellTemplate is gone, use header component instead."),a.headerCellRenderer&&console.warn("ag-Grid: since v15, headerCellRenderer is gone, use header component instead."),a.volatile&&console.warn("ag-Grid: since v16, colDef.volatile is gone, please check refresh docs on how to refresh specific cells.")},a.prototype.addEventListener=function(a,b){this.eventService.addEventListener(a,b)},a.prototype.removeEventListener=function(a,b){this.eventService.removeEventListener(a,b)},a.prototype.createIsColumnFuncParams=function(a){return{node:a,data:a.data,column:this,colDef:this.colDef,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()}},a.prototype.isSuppressNavigable=function(a){if("boolean"==typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"==typeof this.colDef.suppressNavigable){var b=this.createIsColumnFuncParams(a),c=this.colDef.suppressNavigable;return c(b)}return!1},a.prototype.isCellEditable=function(a){return!(a.group&&!this.gridOptionsWrapper.isEnableGroupEdit())&&this.isColumnFunc(a,this.colDef.editable)},a.prototype.isRowDrag=function(a){return this.isColumnFunc(a,this.colDef.rowDrag)},a.prototype.isCellCheckboxSelection=function(a){return this.isColumnFunc(a,this.colDef.checkboxSelection)},a.prototype.isSuppressPaste=function(a){return this.isColumnFunc(a,this.colDef?this.colDef.suppressPaste:null)},a.prototype.isResizable=function(){var a=this.gridOptionsWrapper.isEnableColResize(),b=this.colDef&&this.colDef.suppressResize;return a&&!b},a.prototype.isColumnFunc=function(a,b){if("boolean"==typeof b)return b;if("function"==typeof b){var c=this.createIsColumnFuncParams(a),d=b;return d(c)}return!1},a.prototype.setMoving=function(b,c){void 0===c&&(c="api"),this.moving=b,this.eventService.dispatchEvent(this.createColumnEvent(a.EVENT_MOVING_CHANGED,c))},a.prototype.createColumnEvent=function(a,b){return{api:this.gridApi,columnApi:this.columnApi,type:a,column:this,columns:[this],source:b}},a.prototype.isMoving=function(){return this.moving},a.prototype.getSort=function(){return this.sort},a.prototype.setSort=function(b,c){void 0===c&&(c="api"),this.sort!==b&&(this.sort=b,this.eventService.dispatchEvent(this.createColumnEvent(a.EVENT_SORT_CHANGED,c)))},a.prototype.setMenuVisible=function(b,c){void 0===c&&(c="api"),this.menuVisible!==b&&(this.menuVisible=b,this.eventService.dispatchEvent(this.createColumnEvent(a.EVENT_MENU_VISIBLE_CHANGED,c)))},a.prototype.isMenuVisible=function(){return this.menuVisible},a.prototype.isSortAscending=function(){return this.sort===a.SORT_ASC},a.prototype.isSortDescending=function(){return this.sort===a.SORT_DESC},a.prototype.isSortNone=function(){return g.Utils.missing(this.sort)},a.prototype.isSorting=function(){return g.Utils.exists(this.sort)},a.prototype.getSortedAt=function(){return this.sortedAt},a.prototype.setSortedAt=function(a){this.sortedAt=a},a.prototype.setAggFunc=function(a){this.aggFunc=a},a.prototype.getAggFunc=function(){return this.aggFunc},a.prototype.getLeft=function(){return this.left},a.prototype.getOldLeft=function(){return this.oldLeft},a.prototype.getRight=function(){return this.left+this.actualWidth},a.prototype.setLeft=function(b,c){void 0===c&&(c="api"),this.oldLeft=this.left,this.left!==b&&(this.left=b,this.eventService.dispatchEvent(this.createColumnEvent(a.EVENT_LEFT_CHANGED,c)))},a.prototype.isFilterActive=function(){return this.filterActive},a.prototype.setFilterActive=function(b,c){void 0===c&&(c="api"),this.filterActive!==b&&(this.filterActive=b,this.eventService.dispatchEvent(this.createColumnEvent(a.EVENT_FILTER_ACTIVE_CHANGED,c))),this.eventService.dispatchEvent(this.createColumnEvent(a.EVENT_FILTER_CHANGED,c))},a.prototype.setPinned=function(b){b===!0||b===a.PINNED_LEFT?this.pinned=a.PINNED_LEFT:b===a.PINNED_RIGHT?this.pinned=a.PINNED_RIGHT:this.pinned=null},a.prototype.setFirstRightPinned=function(b,c){void 0===c&&(c="api"),this.firstRightPinned!==b&&(this.firstRightPinned=b,this.eventService.dispatchEvent(this.createColumnEvent(a.EVENT_FIRST_RIGHT_PINNED_CHANGED,c)))},a.prototype.setLastLeftPinned=function(b,c){void 0===c&&(c="api"),this.lastLeftPinned!==b&&(this.lastLeftPinned=b,this.eventService.dispatchEvent(this.createColumnEvent(a.EVENT_LAST_LEFT_PINNED_CHANGED,c)))},a.prototype.isFirstRightPinned=function(){return this.firstRightPinned},a.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},a.prototype.isPinned=function(){return this.pinned===a.PINNED_LEFT||this.pinned===a.PINNED_RIGHT},a.prototype.isPinnedLeft=function(){return this.pinned===a.PINNED_LEFT},a.prototype.isPinnedRight=function(){return this.pinned===a.PINNED_RIGHT},a.prototype.getPinned=function(){return this.pinned},a.prototype.setVisible=function(b,c){void 0===c&&(c="api");var d=b===!0;this.visible!==d&&(this.visible=d,this.eventService.dispatchEvent(this.createColumnEvent(a.EVENT_VISIBLE_CHANGED,c)))},a.prototype.isVisible=function(){return this.visible},a.prototype.getColDef=function(){return this.colDef},a.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},a.prototype.getColId=function(){return this.colId},a.prototype.getId=function(){return this.getColId()},a.prototype.getDefinition=function(){return this.colDef},a.prototype.getActualWidth=function(){return this.actualWidth},a.prototype.createBaseColDefParams=function(a){var b={node:a,data:a.data,colDef:this.colDef,column:this,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};return b},a.prototype.getColSpan=function(a){if(g.Utils.missing(this.colDef.colSpan))return 1;var b=this.createBaseColDefParams(a),c=this.colDef.colSpan(b);return c>1?c:1},a.prototype.getRowSpan=function(a){if(g.Utils.missing(this.colDef.rowSpan))return 1;var b=this.createBaseColDefParams(a),c=this.colDef.rowSpan(b);return c>1?c:1},a.prototype.setActualWidth=function(b,c){void 0===c&&(c="api"),this.actualWidth!==b&&(this.actualWidth=b,this.eventService.dispatchEvent(this.createColumnEvent(a.EVENT_WIDTH_CHANGED,c)))},a.prototype.isGreaterThanMax=function(a){return!!this.maxWidth&&a>this.maxWidth},a.prototype.getMinWidth=function(){return this.minWidth},a.prototype.getMaxWidth=function(){return this.maxWidth},a.prototype.setMinimum=function(a){void 0===a&&(a="api"),this.setActualWidth(this.minWidth,a)},a.prototype.setRowGroupActive=function(b,c){void 0===c&&(c="api"),this.rowGroupActive!==b&&(this.rowGroupActive=b,this.eventService.dispatchEvent(this.createColumnEvent(a.EVENT_ROW_GROUP_CHANGED,c)))},a.prototype.isRowGroupActive=function(){return this.rowGroupActive},a.prototype.setPivotActive=function(b,c){void 0===c&&(c="api"),this.pivotActive!==b&&(this.pivotActive=b,this.eventService.dispatchEvent(this.createColumnEvent(a.EVENT_PIVOT_CHANGED,c)))},a.prototype.isPivotActive=function(){return this.pivotActive},a.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},a.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},a.prototype.setValueActive=function(b,c){void 0===c&&(c="api"),this.aggregationActive!==b&&(this.aggregationActive=b,this.eventService.dispatchEvent(this.createColumnEvent(a.EVENT_VALUE_CHANGED,c)))},a.prototype.isValueActive=function(){return this.aggregationActive},a.prototype.isAllowPivot=function(){return this.colDef.enablePivot===!0},a.prototype.isAllowValue=function(){return this.colDef.enableValue===!0},a.prototype.isAllowRowGroup=function(){return this.colDef.enableRowGroup===!0},a.prototype.getMenuTabs=function(a){var b=this.getColDef().menuTabs;return null==b&&(b=a),b},a.EVENT_MOVING_CHANGED="movingChanged",a.EVENT_LEFT_CHANGED="leftChanged",a.EVENT_WIDTH_CHANGED="widthChanged",a.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",a.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",a.EVENT_VISIBLE_CHANGED="visibleChanged",a.EVENT_FILTER_CHANGED="filterChanged",a.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",a.EVENT_SORT_CHANGED="sortChanged",a.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",a.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",a.EVENT_PIVOT_CHANGED="columnPivotChanged",a.EVENT_VALUE_CHANGED="columnValueChanged",a.PINNED_RIGHT="right",a.PINNED_LEFT="left",a.SORT_ASC="asc",a.SORT_DESC="desc",d([h.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([h.Autowired("columnUtils"),e("design:type",j.ColumnUtils)],a.prototype,"columnUtils",void 0),d([h.Autowired("frameworkFactory"),e("design:type",Object)],a.prototype,"frameworkFactory",void 0),d([h.Autowired("columnApi"),e("design:type",k.ColumnApi)],a.prototype,"columnApi",void 0),d([h.Autowired("gridApi"),e("design:type",l.GridApi)],a.prototype,"gridApi",void 0),d([h.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"initialise",null),a}();b.Column=m},function(a,b,c){"use strict";function d(a){return f.bind(this,a)}function e(a){return f.bind(this,"[ref="+a+"]")}function f(a,b,c,d){return null===a?void console.error("ag-Grid: QuerySelector selector should not be null"):"number"==typeof d?void console.error("ag-Grid: QuerySelector should be on an attribute"):void k(b,"querySelectors",{attributeName:c,querySelector:a})}function g(a){return h.bind(this,a)}function h(a,b,c){return null===a?void console.error("ag-Grid: EventListener eventName should not be null"):void k(b,"listenerMethods",{methodName:c,eventName:a})}function i(a){return j.bind(this,a)}function j(a,b,c){return null===a?void console.error("ag-Grid: EventListener eventName should not be null"):void k(b,"methods",{methodName:c,alias:a})}function k(a,b,c){var d=l(a,a.constructor.name);d[b]||(d[b]=[]),d[b].push(c)}function l(a,b){return a.__agComponentMetaData||(a.__agComponentMetaData={}),a.__agComponentMetaData[b]||(a.__agComponentMetaData[b]={}),a.__agComponentMetaData[b]}Object.defineProperty(b,"__esModule",{value:!0}),b.QuerySelector=d,b.RefSelector=e,b.Listener=g,b.Method=i},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(2),h=c(0),i=c(0),j=function(){function a(){}return a.prototype.setBeans=function(a){this.logging=a.isDebug()},a.prototype.create=function(a){return new k(a,this.isLogging.bind(this))},a.prototype.isLogging=function(){return this.logging},d([f(0,i.Qualifier("gridOptionsWrapper")),e("design:type",Function),e("design:paramtypes",[g.GridOptionsWrapper]),e("design:returntype",void 0)],a.prototype,"setBeans",null),a=d([h.Bean("loggerFactory")],a)}();b.LoggerFactory=j;var k=function(){function a(a,b){this.name=a,this.isLoggingFunc=b}return a.prototype.isLogging=function(){return this.isLoggingFunc()},a.prototype.log=function(a){this.isLoggingFunc()&&console.log("ag-Grid."+this.name+": "+a)},a}();b.Logger=k},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(3),e=c(2),f=c(1),g=function(){function a(){this.destroyFunctions=[],this.destroyed=!1}return a.prototype.destroy=function(){this.destroyFunctions.forEach(function(a){return a()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:a.EVENT_DESTROYED})},a.prototype.addEventListener=function(a,b){this.localEventService||(this.localEventService=new d.EventService),this.localEventService.addEventListener(a,b)},a.prototype.removeEventListener=function(a,b){this.localEventService&&this.localEventService.removeEventListener(a,b)},a.prototype.dispatchEventAsync=function(a){var b=this;setTimeout(function(){return b.dispatchEvent(a)},0)},a.prototype.dispatchEvent=function(a){this.localEventService&&this.localEventService.dispatchEvent(a)},a.prototype.addDestroyableEventListener=function(a,b,c){this.destroyed||(a instanceof HTMLElement?f._.addSafePassiveEventListener(a,b,c):a instanceof Window?a.addEventListener(b,c):a instanceof e.GridOptionsWrapper?a.addEventListener(b,c):a.addEventListener(b,c),this.destroyFunctions.push(function(){a instanceof HTMLElement?a.removeEventListener(b,c):a instanceof Window?a.removeEventListener(b,c):a instanceof e.GridOptionsWrapper?a.removeEventListener(b,c):a.removeEventListener(b,c)}))},a.prototype.isAlive=function(){return!this.destroyed},a.prototype.addDestroyFunc=function(a){this.isAlive()?this.destroyFunctions.push(a):a()},a.EVENT_DESTROYED="destroyed",a}();b.BeanStub=g},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(3),g=c(5),h=c(2),i=c(17),j=c(16),k=c(4),l=c(7),m=c(0),n=c(9),o=c(1),p=c(33),q=c(6),r=function(){function a(){this.childrenMapped={},this.selectable=!0,this.selected=!1}return a.prototype.setData=function(a){var b=this.data;this.data=a,this.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable();var c=this.createDataChangedEvent(a,b,!1);this.dispatchLocalEvent(c)},a.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},a.prototype.createDataChangedEvent=function(b,c,d){return{type:a.EVENT_DATA_CHANGED,node:this,oldData:c,newData:b,update:d}},a.prototype.createLocalRowEvent=function(a){return{type:a,node:this}},a.prototype.updateData=function(a){var b=this.data;this.data=a,this.updateDataOnDetailNode(),this.checkRowSelectable(),this.updateDataOnDetailNode();var c=this.createDataChangedEvent(a,b,!0);this.dispatchLocalEvent(c)},a.prototype.getRowIndexString=function(){return this.rowPinned===n.Constants.PINNED_TOP?"t-"+this.rowIndex:this.rowPinned===n.Constants.PINNED_BOTTOM?"b-"+this.rowIndex:this.rowIndex.toString()},a.prototype.createDaemonNode=function(){var b=new a;return this.context.wireBean(b),b.id=this.id,b.data=this.data,b.daemon=!0,b.selected=this.selected,b.level=this.level,b},a.prototype.setDataAndId=function(a,b){var c=o.Utils.exists(this.id)?this.createDaemonNode():null,d=this.data;this.data=a,this.updateDataOnDetailNode(),this.setId(b),this.selectionController.syncInRowNode(this,c),this.checkRowSelectable();var e=this.createDataChangedEvent(a,d,!1);this.dispatchLocalEvent(e)},a.prototype.checkRowSelectable=function(){var a=this.gridOptionsWrapper.getIsRowSelectableFunc(),b=a&&o.Utils.exists(this);this.setRowSelectable(!b||a(this))},a.prototype.setRowSelectable=function(b){this.selectable!==b&&(this.selectable=b,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(a.EVENT_SELECTABLE_CHANGED)))},a.prototype.setId=function(a){var b=this.gridOptionsWrapper.getRowNodeIdFunc();b?this.data?this.id=b(this.data):this.id=void 0:this.id=a},a.prototype.isPixelInRange=function(a){return a>=this.rowTop&&a<this.rowTop+this.rowHeight},a.prototype.clearRowTop=function(){this.oldRowTop=this.rowTop,this.setRowTop(null)},a.prototype.setFirstChild=function(b){this.firstChild!==b&&(this.firstChild=b,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(a.EVENT_FIRST_CHILD_CHANGED)))},a.prototype.setLastChild=function(b){this.lastChild!==b&&(this.lastChild=b,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(a.EVENT_LAST_CHILD_CHANGED)))},a.prototype.setChildIndex=function(b){this.childIndex!==b&&(this.childIndex=b,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(a.EVENT_CHILD_INDEX_CHANGED)))},a.prototype.setRowTop=function(b){this.rowTop!==b&&(this.rowTop=b,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(a.EVENT_TOP_CHANGED)))},a.prototype.setDragging=function(b){this.dragging!==b&&(this.dragging=b,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(a.EVENT_DRAGGING_CHANGED)))},a.prototype.setAllChildrenCount=function(b){this.allChildrenCount!==b&&(this.allChildrenCount=b,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(a.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},a.prototype.setRowHeight=function(b){this.rowHeight=b,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(a.EVENT_HEIGHT_CHANGED))},a.prototype.setRowIndex=function(b){this.rowIndex=b,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(a.EVENT_ROW_INDEX_CHANGED))},a.prototype.setUiLevel=function(b){this.uiLevel!==b&&(this.uiLevel=b,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(a.EVENT_UI_LEVEL_CHANGED)))},a.prototype.setExpanded=function(b){if(this.expanded!==b){this.expanded=b,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(a.EVENT_EXPANDED_CHANGED));var c=this.createGlobalRowEvent(g.Events.EVENT_ROW_GROUP_OPENED);this.mainEventService.dispatchEvent(c)}},a.prototype.createGlobalRowEvent=function(a){var b={type:a,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};return b},a.prototype.dispatchLocalEvent=function(a){this.eventService&&this.eventService.dispatchEvent(a)},a.prototype.setDataValue=function(a,b){var c=this.columnController.getPrimaryColumn(a);this.valueService.setValue(this,c,b),this.dispatchCellChangedEvent(c,b)},a.prototype.setGroupValue=function(a,b){var c=this.columnController.getGridColumn(a);o.Utils.missing(this.groupData)&&(this.groupData={}),this.groupData[c.getColId()]=b,this.dispatchCellChangedEvent(c,b)},a.prototype.setAggData=function(a){var b=this,c=o.Utils.getAllKeysInObjects([this.aggData,a]);this.aggData=a,this.eventService&&c.forEach(function(a){var c=b.columnController.getGridColumn(a),d=b.aggData?b.aggData[a]:void 0;b.dispatchCellChangedEvent(c,d)})},a.prototype.hasChildren=function(){return this.group||this.childrenAfterGroup&&this.childrenAfterGroup.length>0},a.prototype.isEmptyFillerNode=function(){return this.group&&o.Utils.missingOrEmpty(this.childrenAfterGroup)},a.prototype.dispatchCellChangedEvent=function(b,c){var d={type:a.EVENT_CELL_CHANGED,node:this,column:b,newValue:c};this.dispatchLocalEvent(d)},a.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},a.prototype.isExpandable=function(){return this.hasChildren()||this.master},a.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},a.prototype.depthFirstSearch=function(a){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(b){return b.depthFirstSearch(a)}),a(this)},a.prototype.calculateSelectedFromChildren=function(){var a,b=!1,c=!1,d=!1;if(this.childrenAfterGroup)for(var e=0;e<this.childrenAfterGroup.length;e++){var f=this.childrenAfterGroup[e];if(f.selectable){var g=f.isSelected();switch(g){case!0:b=!0;break;case!1:c=!0;break;default:d=!0}}}a=d?void 0:!(!b||c)||!(!b&&c)&&void 0,this.selectThisNode(a)},a.prototype.calculateSelectedFromChildrenBubbleUp=function(){this.calculateSelectedFromChildren(),this.parent&&this.parent.calculateSelectedFromChildrenBubbleUp()},a.prototype.setSelectedInitialValue=function(a){this.selected=a},a.prototype.setSelected=function(a,b,c){void 0===b&&(b=!1),void 0===c&&(c=!1),this.setSelectedParams({newValue:a,clearSelection:b,tailingNodeInSequence:c,rangeSelect:!1})},a.prototype.isRowPinned=function(){return this.rowPinned===n.Constants.PINNED_TOP||this.rowPinned===n.Constants.PINNED_BOTTOM},a.prototype.setSelectedParams=function(a){var b=this.gridOptionsWrapper.isGroupSelectsChildren(),c=a.newValue===!0,d=a.clearSelection===!0,e=a.tailingNodeInSequence===!0,f=a.rangeSelect===!0,h=b&&a.groupSelectsFiltered===!0;if(void 0===this.id)return console.warn("ag-Grid: cannot select node until id for node is known"),0;if(this.rowPinned)return console.log("ag-Grid: cannot select pinned rows"),0;if(this.footer){var i=this.sibling.setSelectedParams(a);return i}if(f){var j=this.selectionController.getLastSelectedNode()!==this,k=this.gridOptionsWrapper.isRowSelectionMulti();if(j&&k)return this.doRowRangeSelection()}var l=0,m=h&&this.group;if(!m){var n=this.selectThisNode(c);n&&l++}b&&this.group&&(l+=this.selectChildNodes(c,h));var o=!e;if(o){if(!c||!d&&this.gridOptionsWrapper.isRowSelectionMulti()||(l+=this.selectionController.clearOtherNodes(this)),l>0){h?this.calculatedSelectedForAllGroupNodes():b&&this.parent&&this.parent.calculateSelectedFromChildrenBubbleUp();var p={type:g.Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.mainEventService.dispatchEvent(p)}c&&this.selectionController.setLastSelectedNode(this)}return l},a.prototype.doRowRangeSelection=function(){var a=0,b=this.gridOptionsWrapper.isGroupSelectsChildren(),c=this.selectionController.getLastSelectedNode(),d=this.rowModel.getNodesInRangeForSelection(c,this);d.forEach(function(c){if(!c.group||!b){var d=c.selectThisNode(!0);d&&a++}}),b&&this.calculatedSelectedForAllGroupNodes();var e={type:g.Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi};return this.mainEventService.dispatchEvent(e),a},a.prototype.isParentOfNode=function(a){for(var b=this.parent;b;){if(b===a)return!0;b=b.parent}return!1},a.prototype.calculatedSelectedForAllGroupNodes=function(){var a=this.rowModel;a.getTopLevelNodes().forEach(function(a){a.group&&(a.depthFirstSearch(function(a){a.group&&a.calculateSelectedFromChildren()}),a.calculateSelectedFromChildren())})},a.prototype.selectThisNode=function(b){if(!this.selectable||this.selected===b)return!1;this.selected=b,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(a.EVENT_ROW_SELECTED));var c=this.createGlobalRowEvent(g.Events.EVENT_ROW_SELECTED);return this.mainEventService.dispatchEvent(c),!0},a.prototype.selectChildNodes=function(a,b){var c=b?this.childrenAfterFilter:this.childrenAfterGroup,d=0;if(!o.Utils.missing(c)){for(var e=0;e<c.length;e++)d+=c[e].setSelectedParams({newValue:a,clearSelection:!1,tailingNodeInSequence:!0,groupSelectsFiltered:b});return d}},a.prototype.addEventListener=function(a,b){this.eventService||(this.eventService=new f.EventService),this.eventService.addEventListener(a,b)},a.prototype.removeEventListener=function(a,b){this.eventService.removeEventListener(a,b)},a.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(a.EVENT_MOUSE_ENTER))},a.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(a.EVENT_MOUSE_LEAVE))},a.prototype.getFirstChildOfFirstChild=function(a){for(var b,c=this,d=!0,e=!1;d&&!e;){var f=c.parent,g=o.Utils.exists(f)&&c.firstChild;g?f.rowGroupColumn===a&&(e=!0,b=f):d=!1,c=f}return e?b:null},a.EVENT_ROW_SELECTED="rowSelected",a.EVENT_DATA_CHANGED="dataChanged",a.EVENT_CELL_CHANGED="cellChanged",a.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",a.EVENT_MOUSE_ENTER="mouseEnter",a.EVENT_MOUSE_LEAVE="mouseLeave",a.EVENT_HEIGHT_CHANGED="heightChanged",a.EVENT_TOP_CHANGED="topChanged",
a.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",a.EVENT_LAST_CHILD_CHANGED="lastChildChanged",a.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",a.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",a.EVENT_EXPANDED_CHANGED="expandedChanged",a.EVENT_SELECTABLE_CHANGED="selectableChanged",a.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",a.EVENT_DRAGGING_CHANGED="draggingChanged",d([m.Autowired("eventService"),e("design:type",f.EventService)],a.prototype,"mainEventService",void 0),d([m.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([m.Autowired("selectionController"),e("design:type",i.SelectionController)],a.prototype,"selectionController",void 0),d([m.Autowired("columnController"),e("design:type",k.ColumnController)],a.prototype,"columnController",void 0),d([m.Autowired("valueService"),e("design:type",j.ValueService)],a.prototype,"valueService",void 0),d([m.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([m.Autowired("context"),e("design:type",m.Context)],a.prototype,"context",void 0),d([m.Autowired("valueCache"),e("design:type",p.ValueCache)],a.prototype,"valueCache",void 0),d([m.Autowired("columnApi"),e("design:type",l.ColumnApi)],a.prototype,"columnApi",void 0),d([m.Autowired("gridApi"),e("design:type",q.GridApi)],a.prototype,"gridApi",void 0),a}();b.RowNode=r},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g,h=c(12),i=c(0),j=c(1),k=c(2),l=c(40),m=c(4),n=c(41);!function(a){a[a.ToolPanel=0]="ToolPanel",a[a.HeaderCell=1]="HeaderCell",a[a.RowDrag=2]="RowDrag"}(g=b.DragSourceType||(b.DragSourceType={}));var o;!function(a){a[a.Up=0]="Up",a[a.Down=1]="Down"}(o=b.VDirection||(b.VDirection={}));var p;!function(a){a[a.Left=0]="Left",a[a.Right=1]="Right"}(p=b.HDirection||(b.HDirection={}));var q=function(){function a(){this.dragSourceAndParamsList=[],this.dropTargets=[]}return b=a,a.prototype.init=function(){this.ePinnedIcon=j.Utils.createIcon("columnMovePin",this.gridOptionsWrapper,null),this.ePlusIcon=j.Utils.createIcon("columnMoveAdd",this.gridOptionsWrapper,null),this.eHiddenIcon=j.Utils.createIcon("columnMoveHide",this.gridOptionsWrapper,null),this.eMoveIcon=j.Utils.createIcon("columnMoveMove",this.gridOptionsWrapper,null),this.eLeftIcon=j.Utils.createIcon("columnMoveLeft",this.gridOptionsWrapper,null),this.eRightIcon=j.Utils.createIcon("columnMoveRight",this.gridOptionsWrapper,null),this.eGroupIcon=j.Utils.createIcon("columnMoveGroup",this.gridOptionsWrapper,null),this.eAggregateIcon=j.Utils.createIcon("columnMoveValue",this.gridOptionsWrapper,null),this.ePivotIcon=j.Utils.createIcon("columnMovePivot",this.gridOptionsWrapper,null),this.eDropNotAllowedIcon=j.Utils.createIcon("dropNotAllowed",this.gridOptionsWrapper,null)},a.prototype.setBeans=function(a){this.logger=a.create("OldToolPanelDragAndDropService")},a.prototype.getStringType=function(a){switch(a){case g.RowDrag:return"row";case g.HeaderCell:return"headerCell";case g.ToolPanel:return"toolPanel";default:return console.warn("ag-Grid: bug - unknown drag type "+a),null}},a.prototype.addDragSource=function(a,b){void 0===b&&(b=!1);var c={eElement:a.eElement,dragStartPixels:a.dragStartPixels,onDragStart:this.onDragStart.bind(this,a),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this)};this.dragSourceAndParamsList.push({params:c,dragSource:a}),this.dragService.addDragSource(c,b)},a.prototype.removeDragSource=function(a){var b=j.Utils.find(this.dragSourceAndParamsList,function(b){return b.dragSource===a});b&&(this.dragService.removeDragSource(b.params),j.Utils.removeFromArray(this.dragSourceAndParamsList,b))},a.prototype.destroy=function(){var a=this;this.dragSourceAndParamsList.forEach(function(b){a.dragService.removeDragSource(b.params)}),this.dragSourceAndParamsList.length=0},a.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},a.prototype.onDragStart=function(a,b){this.dragging=!0,this.dragSource=a,this.eventLastTime=b,this.dragItem=this.dragSource.dragItemCallback(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.dragStarted&&this.dragSource.dragStarted(),this.createGhost()},a.prototype.onDragStop=function(a){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.dragStopped&&this.dragSource.dragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var b=this.createDropTargetEvent(this.lastDropTarget,a,null,null,!1);this.lastDropTarget.onDragStop(b)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},a.prototype.onDragging=function(a,b){var c=this.workOutHDirection(a),d=this.workOutVDirection(a);this.eventLastTime=a,this.positionGhost(a);var e=j.Utils.find(this.dropTargets,this.isMouseOnDropTarget.bind(this,a));if(e!==this.lastDropTarget)this.leaveLastTargetIfExists(a,c,d,b),this.enterDragTargetIfExists(e,a,c,d,b),this.lastDropTarget=e;else if(e){var f=this.createDropTargetEvent(e,a,c,d,b);e.onDragging(f)}},a.prototype.enterDragTargetIfExists=function(a,b,c,d,e){if(a){var f=this.createDropTargetEvent(a,b,c,d,e);a.onDragEnter(f),this.setGhostIcon(a.getIconName?a.getIconName():null)}},a.prototype.leaveLastTargetIfExists=function(a,b,c,d){if(this.lastDropTarget){var e=this.createDropTargetEvent(this.lastDropTarget,a,b,c,d);this.lastDropTarget.onDragLeave(e),this.setGhostIcon(null)}},a.prototype.getAllContainersFromDropTarget=function(a){var b=[a.getContainer()],c=a.getSecondaryContainers?a.getSecondaryContainers():null;return c&&(b=b.concat(c)),b},a.prototype.isMouseOnDropTarget=function(a,b){var c=this.getAllContainersFromDropTarget(b),d=!1;if(c.forEach(function(b){if(b){var c=b.getBoundingClientRect();if(0!==c.width&&0!==c.height){var e=a.clientX>=c.left&&a.clientX<=c.right,f=a.clientY>=c.top&&a.clientY<=c.bottom;e&&f&&(d=!0)}}}),d){var e=b.isInterestedIn(this.dragSource.type);return e}return!1},a.prototype.addDropTarget=function(a){this.dropTargets.push(a)},a.prototype.workOutHDirection=function(a){return this.eventLastTime.clientX>a.clientX?p.Left:this.eventLastTime.clientX<a.clientX?p.Right:null},a.prototype.workOutVDirection=function(a){return this.eventLastTime.clientY>a.clientY?o.Up:this.eventLastTime.clientY<a.clientY?o.Down:null},a.prototype.createDropTargetEvent=function(a,b,c,d,e){var f=a.getContainer().getBoundingClientRect(),g=b.clientX-f.left,h=b.clientY-f.top,i={event:b,x:g,y:h,vDirection:d,hDirection:c,dragSource:this.dragSource,fromNudge:e,dragItem:this.dragItem};return i},a.prototype.positionGhost=function(a){var b=this.eGhost.getBoundingClientRect(),c=b.height,d=j.Utils.getBodyWidth()-2,e=j.Utils.getBodyHeight()-2,f=a.pageY-c/2,g=a.pageX-30,h=this.gridOptionsWrapper.getDocument(),i=window.pageYOffset||h.documentElement.scrollTop,k=window.pageXOffset||h.documentElement.scrollLeft;d>0&&g+this.eGhost.clientWidth>d+k&&(g=d+k-this.eGhost.clientWidth),g<0&&(g=0),e>0&&f+this.eGhost.clientHeight>e+i&&(f=e+i-this.eGhost.clientHeight),f<0&&(f=0),this.eGhost.style.left=g+"px",this.eGhost.style.top=f+"px"},a.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},a.prototype.createGhost=function(){this.eGhost=j.Utils.loadTemplate(b.GHOST_TEMPLATE),j.Utils.addCssClass(this.eGhost,this.environment.getTheme()),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var a=this.eGhost.querySelector(".ag-dnd-ghost-label");a.innerHTML=this.dragSource.dragItemName,this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var c=this.gridOptionsWrapper.getDocument();this.eGhostParent=c.querySelector("body"),this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("ag-Grid: could not find document body, it is needed for dragging columns")},a.prototype.setGhostIcon=function(a,c){void 0===c&&(c=!1),j.Utils.removeAllChildren(this.eGhostIcon);var d;switch(a){case b.ICON_ADD:d=this.ePlusIcon;break;case b.ICON_PINNED:d=this.ePinnedIcon;break;case b.ICON_MOVE:d=this.eMoveIcon;break;case b.ICON_LEFT:d=this.eLeftIcon;break;case b.ICON_RIGHT:d=this.eRightIcon;break;case b.ICON_GROUP:d=this.eGroupIcon;break;case b.ICON_AGGREGATE:d=this.eAggregateIcon;break;case b.ICON_PIVOT:d=this.ePivotIcon;break;case b.ICON_NOT_ALLOWED:d=this.eDropNotAllowedIcon;break;default:d=this.eHiddenIcon}this.eGhostIcon.appendChild(d),j.Utils.addOrRemoveCssClass(this.eGhostIcon,"ag-shake-left-to-right",c)},a.ICON_PINNED="pinned",a.ICON_ADD="add",a.ICON_MOVE="move",a.ICON_LEFT="left",a.ICON_RIGHT="right",a.ICON_GROUP="group",a.ICON_AGGREGATE="aggregate",a.ICON_PIVOT="pivot",a.ICON_NOT_ALLOWED="notAllowed",a.GHOST_TEMPLATE='<div class="ag-dnd-ghost">  <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>  <div class="ag-dnd-ghost-label">  </div></div>',d([i.Autowired("gridOptionsWrapper"),e("design:type",k.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([i.Autowired("dragService"),e("design:type",l.DragService)],a.prototype,"dragService",void 0),d([i.Autowired("environment"),e("design:type",n.Environment)],a.prototype,"environment",void 0),d([i.Autowired("columnController"),e("design:type",m.ColumnController)],a.prototype,"columnController",void 0),d([i.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),d([f(0,i.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[h.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),d([i.PreDestroy,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"destroy",null),a=b=d([i.Bean("dragAndDropService")],a);var b}();b.DragAndDropService=q},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(2),g=c(19),h=c(4),i=c(0),j=c(1),k=c(5),l=c(3),m=c(33),n=function(){function a(){this.initialised=!1}return a.prototype.init=function(){this.cellExpressions=this.gridOptionsWrapper.isEnableCellExpressions(),this.initialised=!0},a.prototype.getValue=function(a,b,c,d){void 0===c&&(c=!1),void 0===d&&(d=!1),this.initialised||this.init();var e,f=a.getColDef(),g=f.field,h=a.getId(),i=b.data,k=b.groupData&&void 0!==b.groupData[h],l=!d&&b.aggData&&void 0!==b.aggData[h];if(e=c&&f.filterValueGetter?this.executeValueGetter(f.filterValueGetter,i,a,b):k?b.groupData[h]:l?b.aggData[h]:f.valueGetter?this.executeValueGetter(f.valueGetter,i,a,b):g&&i?j._.getValueUsingField(i,g,a.isFieldContainsDots()):void 0,this.cellExpressions&&"string"==typeof e&&0===e.indexOf("=")){var m=e.substring(1);e=this.executeValueGetter(m,i,a,b)}return e},a.prototype.setValue=function(a,b,c){var d=this.columnController.getPrimaryColumn(b);if(a&&d){var e=a.data;j._.missing(e)&&(a.data={});var f=d.getColDef(),g=f.field,h=f.newValueHandler,i=f.valueSetter;if(j._.missing(g)&&j._.missing(h)&&j._.missing(i))return void console.warn("ag-Grid: you need either field or valueSetter set on colDef for editing to work");var l={node:a,data:a.data,oldValue:this.getValue(d,a),newValue:c,colDef:d.getColDef(),column:d,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};l.newValue=c;var m;if(m=j._.exists(h)?h(l):j._.exists(i)?this.expressionService.evaluate(i,l):this.setValueUsingField(e,g,c,d.isFieldContainsDots()),void 0===m&&(m=!0),m){a.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),l.newValue=this.getValue(d,a),"function"==typeof d.getColDef().onCellValueChanged&&setTimeout(function(){return d.getColDef().onCellValueChanged(l)},0);var n={type:k.Events.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:a.rowIndex,rowPinned:a.rowPinned,column:l.column,api:l.api,colDef:l.colDef,columnApi:l.columnApi,context:l.context,data:a.data,node:a,oldValue:l.oldValue,newValue:l.newValue,value:l.newValue};this.eventService.dispatchEvent(n)}}},a.prototype.setValueUsingField=function(a,b,c,d){var e;if(d)for(var f=b.split("."),g=a;f.length>0&&g;){var h=f.shift();0===f.length?g[h]=c:g=g[h]}else a[b]=c;return!e},a.prototype.executeValueGetter=function(a,b,c,d){var e=c.getId(),f=this.valueCache.getValue(d,e);if(void 0!==f)return f;var g={data:b,node:d,column:c,colDef:c.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,d)},h=this.expressionService.evaluate(a,g);return this.valueCache.setValue(d,e,h),h},a.prototype.getValueCallback=function(a,b){var c=this.columnController.getPrimaryColumn(b);return c?this.getValue(c,a):null},a.prototype.getKeyForNode=function(a,b){var c,d=this.getValue(a,b),e=a.getColDef().keyCreator;return c=e?e({value:d}):d,"string"==typeof c||null===c||void 0===c?c:(c=String(c),"[object Object]"===c&&j._.doOnce(function(){console.warn("ag-Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se ag-Grid docs) or b) to toString() on the object to return a key")},"getKeyForNode - warn about [object,object]"),c)},d([i.Autowired("gridOptionsWrapper"),e("design:type",f.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([i.Autowired("expressionService"),e("design:type",g.ExpressionService)],a.prototype,"expressionService",void 0),d([i.Autowired("columnController"),e("design:type",h.ColumnController)],a.prototype,"columnController",void 0),d([i.Autowired("eventService"),e("design:type",l.EventService)],a.prototype,"eventService",void 0),d([i.Autowired("valueCache"),e("design:type",m.ValueCache)],a.prototype,"valueCache",void 0),d([i.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([i.Bean("valueService")],a)}();b.ValueService=n},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(1),h=c(0),i=c(0),j=c(12),k=c(3),l=c(5),m=c(0),n=c(2),o=c(0),p=c(9),q=c(7),r=c(6),s=function(){function a(){}return a.prototype.setBeans=function(a){this.logger=a.create("SelectionController"),this.reset(),this.gridOptionsWrapper.isRowModelDefault()?this.eventService.addEventListener(l.Events.EVENT_ROW_DATA_CHANGED,this.reset.bind(this)):this.logger.log("dont know what to do here")},a.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.eventService.addEventListener(l.Events.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},a.prototype.setLastSelectedNode=function(a){this.lastSelectedNode=a},a.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},a.prototype.getSelectedNodes=function(){var a=[];return g.Utils.iterateObject(this.selectedNodes,function(b,c){c&&a.push(c)}),a},a.prototype.getSelectedRows=function(){var a=[];return g.Utils.iterateObject(this.selectedNodes,function(b,c){c&&c.data&&a.push(c.data)}),a},a.prototype.removeGroupsFromSelection=function(){var a=this;g.Utils.iterateObject(this.selectedNodes,function(b,c){c&&c.group&&(a.selectedNodes[c.id]=void 0)})},a.prototype.updateGroupsFromChildrenSelections=function(){this.rowModel.getType()!==p.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&console.warn("updateGroupsFromChildrenSelections not available when rowModel is not normal");var a=this.rowModel;a.getTopLevelNodes().forEach(function(a){a.depthFirstSearch(function(a){a.group&&a.calculateSelectedFromChildren()})})},a.prototype.getNodeForIdIfSelected=function(a){return this.selectedNodes[a]},a.prototype.clearOtherNodes=function(a){var b=this,c={},d=0;return g.Utils.iterateObject(this.selectedNodes,function(e,f){if(f&&f.id!==a.id){var g=b.selectedNodes[f.id];d+=g.setSelectedParams({newValue:!1,clearSelection:!1,tailingNodeInSequence:!0}),b.groupSelectsChildren&&f.parent&&(c[f.parent.id]=f.parent)}}),g.Utils.iterateObject(c,function(a,b){b.calculateSelectedFromChildren()}),d},a.prototype.onRowSelected=function(a){var b=a.node;this.groupSelectsChildren&&b.group||(b.isSelected()?this.selectedNodes[b.id]=b:this.selectedNodes[b.id]=void 0)},a.prototype.syncInRowNode=function(a,b){this.syncInOldRowNode(a,b),this.syncInNewRowNode(a)},a.prototype.syncInOldRowNode=function(a,b){var c=g.Utils.exists(b)&&a.id!==b.id;if(c){var d=g.Utils.exists(this.selectedNodes[b.id]);d&&(this.selectedNodes[b.id]=b)}},a.prototype.syncInNewRowNode=function(a){g.Utils.exists(this.selectedNodes[a.id])?(a.setSelectedInitialValue(!0),this.selectedNodes[a.id]=a):a.setSelectedInitialValue(!1)},a.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},a.prototype.getBestCostNodeSelection=function(){function a(b){for(var c=0,e=b.length;c<e;c++){var f=b[c];f.isSelected()?d.push(f):f.group&&f.children&&a(f.children)}}this.rowModel.getType()!==p.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&console.warn("getBestCostNodeSelection is only avilable when using normal row model");var b=this.rowModel,c=b.getTopLevelNodes();if(null===c)return void console.warn("selectAll not available doing rowModel=virtual");var d=[];return a(c),d},a.prototype.setRowModel=function(a){this.rowModel=a},a.prototype.isEmpty=function(){var a=0;return g.Utils.iterateObject(this.selectedNodes,function(b,c){c&&a++}),0===a},a.prototype.deselectAllRowNodes=function(a){void 0===a&&(a=!1);var b=function(a){return a.selectThisNode(!1)},c=this.rowModel.getType()===p.Constants.ROW_MODEL_TYPE_CLIENT_SIDE;if(a){if(!c)return void console.error("ag-Grid: selecting just filtered only works with In Memory Row Model");var d=this.rowModel;d.forEachNodeAfterFilter(b)}else g.Utils.iterateObject(this.selectedNodes,function(a,c){c&&b(c)}),this.reset();c&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections();var e={type:l.Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},a.prototype.selectAllRowNodes=function(a){if(void 0===a&&(a=!1),this.rowModel.getType()!==p.Constants.ROW_MODEL_TYPE_CLIENT_SIDE)throw"selectAll only available with normal row model, ie not "+this.rowModel.getType();var b=this.rowModel,c=function(a){return a.selectThisNode(!0)};a?b.forEachNodeAfterFilter(c):b.forEachNode(c),this.rowModel.getType()===p.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections();var d={type:l.Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(d)},a.prototype.selectNode=function(a,b){a.setSelectedParams({newValue:!0,clearSelection:!b})},a.prototype.deselectIndex=function(a){var b=this.rowModel.getRow(a);this.deselectNode(b)},a.prototype.deselectNode=function(a){a.setSelectedParams({newValue:!1,clearSelection:!1})},a.prototype.selectIndex=function(a,b){var c=this.rowModel.getRow(a);this.selectNode(c,b)},d([m.Autowired("eventService"),e("design:type",k.EventService)],a.prototype,"eventService",void 0),d([m.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([m.Autowired("gridOptionsWrapper"),e("design:type",n.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([m.Autowired("columnApi"),e("design:type",q.ColumnApi)],a.prototype,"columnApi",void 0),d([m.Autowired("gridApi"),e("design:type",r.GridApi)],a.prototype,"gridApi",void 0),d([f(0,i.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[j.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),d([o.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([h.Bean("selectionController")],a)}();b.SelectionController=s},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(1),g=c(2),h=c(35),i=c(16),j=c(4),k=c(7),l=c(0),m=c(3),n=c(5),o=c(6),p=c(27),q=function(){function a(){this.allFilters={},this.quickFilter=null,this.quickFilterParts=null}return b=a,a.prototype.init=function(){this.eventService.addEventListener(n.Events.EVENT_ROW_DATA_CHANGED,this.onNewRowsLoaded.bind(this)),this.eventService.addEventListener(n.Events.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.quickFilter=this.parseQuickFilter(this.gridOptionsWrapper.getQuickFilterText()),this.setQuickFilterParts(),this.checkExternalFilter()},a.prototype.setQuickFilterParts=function(){this.quickFilter?this.quickFilterParts=this.quickFilter.split(" "):this.quickFilterParts=null},a.prototype.setFilterModel=function(a){var b=this,c=[];if(a){var d=Object.keys(a);f.Utils.iterateObject(this.allFilters,function(e,g){f.Utils.removeFromArray(d,e);var h=a[e];b.setModelOnFilterWrapper(g.filterPromise,h),c.push(g.filterPromise)}),f.Utils.iterateArray(d,function(d){var e=b.columnController.getPrimaryColumn(d);if(!e)return void console.warn("Warning ag-grid setFilterModel - no column found for colId "+d);var f=b.getOrCreateFilterWrapper(e);b.setModelOnFilterWrapper(f.filterPromise,a[d]),c.push(f.filterPromise)})}else f.Utils.iterateObject(this.allFilters,function(a,d){b.setModelOnFilterWrapper(d.filterPromise,null),c.push(d.filterPromise)});f.Promise.all(c).then(function(a){b.onFilterChanged()})},a.prototype.setModelOnFilterWrapper=function(a,b){a.then(function(a){return"function"!=typeof a.setModel?void console.warn("Warning ag-grid - filter missing setModel method, which is needed for setFilterModel"):void a.setModel(b)})},a.prototype.getFilterModel=function(){var a={};return f.Utils.iterateObject(this.allFilters,function(b,c){var d=c.filterPromise,e=d.resolveNow(null,function(a){return a});if(null==e)return null;if("function"!=typeof e.getModel)return void console.warn("Warning ag-grid - filter API missing getModel method, which is needed for getFilterModel");var g=e.getModel();f.Utils.exists(g)&&(a[b]=g)}),a},a.prototype.isAdvancedFilterPresent=function(){return this.advancedFilterPresent},a.prototype.setAdvancedFilterPresent=function(){var a=!1;f.Utils.iterateObject(this.allFilters,function(b,c){c.filterPromise.resolveNow(!1,function(a){return a.isFilterActive()})&&(a=!0)}),this.advancedFilterPresent=a},a.prototype.updateFilterFlagInColumns=function(a){f.Utils.iterateObject(this.allFilters,function(b,c){var d=c.filterPromise.resolveNow(!1,function(a){return a.isFilterActive()});c.column.setFilterActive(d,a)})},a.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.advancedFilterPresent||this.externalFilterPresent},a.prototype.doesFilterPass=function(a,b){for(var c=a.data,d=Object.keys(this.allFilters),e=0,f=d.length;e<f;e++){var g=d[e],h=this.allFilters[g];if(void 0!==h){var i=h.filterPromise.resolveNow(void 0,function(a){return a});if(void 0!==i&&i!==b&&i.isFilterActive()){i.doesFilterPass||console.error("Filter is missing method doesFilterPass");var j={node:a,data:c};if(!i.doesFilterPass(j))return!1}}}return!0},a.prototype.parseQuickFilter=function(a){return f.Utils.missing(a)||""===a?null:this.gridOptionsWrapper.isRowModelInfinite()?(console.warn("ag-grid: cannot do quick filtering when doing virtual paging"),null):a.toUpperCase()},a.prototype.setQuickFilter=function(a){var b=this.parseQuickFilter(a);this.quickFilter!==b&&(this.quickFilter=b,this.setQuickFilterParts(),this.onFilterChanged())},a.prototype.checkExternalFilter=function(){this.externalFilterPresent=this.gridOptionsWrapper.isExternalFilterPresent()},a.prototype.onFilterChanged=function(){this.setAdvancedFilterPresent(),this.updateFilterFlagInColumns("filterChanged"),this.checkExternalFilter(),f.Utils.iterateObject(this.allFilters,function(a,b){b.filterPromise.then(function(a){a.onAnyFilterChanged&&a.onAnyFilterChanged()})});var a={type:n.Events.EVENT_FILTER_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(a)},a.prototype.isQuickFilterPresent=function(){return null!==this.quickFilter},a.prototype.doesRowPassOtherFilters=function(a,b){return this.doesRowPassFilter(b,a)},a.prototype.doesRowPassQuickFilterNoCache=function(a,b){var c=this,d=this.columnController.getAllColumnsForQuickFilter(),e=!1;return d.forEach(function(d){if(!e){var g=c.getQuickFilterTextForColumn(d,a);f.Utils.exists(g)&&g.indexOf(b)>=0&&(e=!0)}}),e},a.prototype.doesRowPassQuickFilterCache=function(a,b){a.quickFilterAggregateText||this.aggregateRowForQuickFilter(a);var c=a.quickFilterAggregateText.indexOf(b)>=0;return c},a.prototype.doesRowPassQuickFilter=function(a){var b=this,c=!0,d=this.gridOptionsWrapper.isCacheQuickFilter();return this.quickFilterParts.forEach(function(e){var f=d?b.doesRowPassQuickFilterCache(a,e):b.doesRowPassQuickFilterNoCache(a,e);f||(c=!1)}),c},a.prototype.doesRowPassFilter=function(a,b){return!(this.isQuickFilterPresent()&&!this.doesRowPassQuickFilter(a))&&(!(this.externalFilterPresent&&!this.gridOptionsWrapper.doesExternalFilterPass(a))&&!(this.advancedFilterPresent&&!this.doesFilterPass(a,b)))},a.prototype.getQuickFilterTextForColumn=function(a,b){var c,d=this.valueService.getValue(a,b,!0),e=a.getColDef();if(a.getColDef().getQuickFilterText){var f={value:d,node:b,data:b.data,column:a,colDef:e};c=a.getColDef().getQuickFilterText(f)}else c=d;return c&&""!==c?c.toString().toUpperCase():null},a.prototype.aggregateRowForQuickFilter=function(a){var c=this,d=[],e=this.columnController.getAllColumnsForQuickFilter();e.forEach(function(b){var e=c.getQuickFilterTextForColumn(b,a);f.Utils.exists(e)&&d.push(e)}),a.quickFilterAggregateText=d.join(b.QUICK_FILTER_SEPARATOR)},a.prototype.onNewRowsLoaded=function(a){f.Utils.iterateObject(this.allFilters,function(a,b){b.filterPromise.then(function(a){a.onNewRowsLoaded&&a.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(a),this.setAdvancedFilterPresent()},a.prototype.createValueGetter=function(a){var b=this;return function(c){return b.valueService.getValue(a,c,!0)}},a.prototype.getFilterComponent=function(a){var b=this.getOrCreateFilterWrapper(a);return b.filterPromise},a.prototype.getOrCreateFilterWrapper=function(a){var b=this.cachedFilter(a);return b||(b=this.createFilterWrapper(a),this.allFilters[a.getColId()]=b),b},a.prototype.cachedFilter=function(a){return this.allFilters[a.getColId()]},a.prototype.createFilterInstance=function(a,b){var c=this,d="agTextColumnFilter";this.gridOptionsWrapper.isEnterprise()&&(d="agSetColumnFilter");var e=f.Utils.cloneObject(a.getColDef()),g={type:n.Events.EVENT_FILTER_MODIFIED,api:this.gridApi,columnApi:this.columnApi},h=this.onFilterChanged.bind(this),i=function(){return c.eventService.dispatchEvent(g)},j={column:a,colDef:e,rowModel:this.rowModel,filterChangedCallback:h,filterModifiedCallback:i,valueGetter:this.createValueGetter(a),context:this.gridOptionsWrapper.getContext(),doesRowPassOtherFilter:null,$scope:b};return this.componentResolver.createAgGridComponent(e,j,"filter",{api:this.gridApi,columnApi:this.columnApi,column:a,colDef:e},d,!0,function(a,b){return f.Utils.assign(a,{doesRowPassOtherFilter:c.doesRowPassOtherFilters.bind(c,b)})})},a.prototype.createFilterWrapper=function(a){var b={column:a,filterPromise:null,scope:null,compiledElement:null,guiPromise:f.Promise.external()};return b.scope=this.gridOptionsWrapper.isAngularCompileFilters()?this.$scope.$new():null,b.filterPromise=this.createFilterInstance(a,b.scope),this.putIntoGui(b),b},a.prototype.putIntoGui=function(a){var b=this,c=document.createElement("div");c.className="ag-filter",a.filterPromise.then(function(d){var e=d.getGui();if(f.Utils.missing(e)&&console.warn("getGui method from filter returned "+e+", it should be a DOM element or an HTML template string."),"string"==typeof e&&(e=f.Utils.loadTemplate(e)),c.appendChild(e),a.scope){var g=b.$compile(c)(a.scope);a.compiledElement=g,setTimeout(function(){return a.scope.$apply()},0)}a.guiPromise.resolve(c)})},a.prototype.onNewColumnsLoaded=function(){this.destroy()},a.prototype.destroyFilter=function(a,b){void 0===b&&(b="api");var c=this.allFilters[a.getColId()];c&&(this.disposeFilterWrapper(c,b),this.onFilterChanged())},a.prototype.disposeFilterWrapper=function(a,b){var c=this;a.filterPromise.then(function(d){d.setModel(null),d.destroy&&d.destroy(),a.column.setFilterActive(!1,b),a.scope&&(a.compiledElement&&a.compiledElement.remove(),a.scope.$destroy()),delete c.allFilters[a.column.getColId()]})},a.prototype.destroy=function(){var a=this;f.Utils.iterateObject(this.allFilters,function(b,c){a.disposeFilterWrapper(c,"filterDestroyed")})},a.QUICK_FILTER_SEPARATOR="\n",d([l.Autowired("$compile"),e("design:type",Object)],a.prototype,"$compile",void 0),d([l.Autowired("$scope"),e("design:type",Object)],a.prototype,"$scope",void 0),d([l.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([l.Autowired("gridCore"),e("design:type",Object)],a.prototype,"gridCore",void 0),d([l.Autowired("popupService"),e("design:type",h.PopupService)],a.prototype,"popupService",void 0),d([l.Autowired("valueService"),e("design:type",i.ValueService)],a.prototype,"valueService",void 0),d([l.Autowired("columnController"),e("design:type",j.ColumnController)],a.prototype,"columnController",void 0),d([l.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([l.Autowired("eventService"),e("design:type",m.EventService)],a.prototype,"eventService",void 0),d([l.Autowired("enterprise"),e("design:type",Boolean)],a.prototype,"enterprise",void 0),d([l.Autowired("context"),e("design:type",l.Context)],a.prototype,"context",void 0),d([l.Autowired("columnApi"),e("design:type",k.ColumnApi)],a.prototype,"columnApi",void 0),d([l.Autowired("gridApi"),e("design:type",o.GridApi)],a.prototype,"gridApi",void 0),d([l.Autowired("componentResolver"),e("design:type",p.ComponentResolver)],a.prototype,"componentResolver",void 0),d([l.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),d([l.PreDestroy,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"destroy",null),
a=b=d([l.Bean("filterManager")],a);var b}();b.FilterManager=q},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(12),h=c(0),i=c(0),j=function(){function a(){this.expressionToFunctionCache={}}return a.prototype.setBeans=function(a){this.logger=a.create("ExpressionService")},a.prototype.evaluate=function(a,b){if("function"==typeof a){var c=a;return c(b)}if("string"==typeof a){var d=a;return this.evaluateExpression(d,b)}console.error("ag-Grid: value should be either a string or a function",a)},a.prototype.evaluateExpression=function(a,b){try{var c=this.createExpressionFunction(a),d=c(b.value,b.context,b.oldValue,b.newValue,b.value,b.node,b.data,b.colDef,b.rowIndex,b.api,b.columnApi,b.getValue,b.column,b.columnGroup);return d}catch(b){return console.log("Processing of the expression failed"),console.log("Expression = "+a),console.log("Exception = "+b),null}},a.prototype.createExpressionFunction=function(a){if(this.expressionToFunctionCache[a])return this.expressionToFunctionCache[a];var b=this.createFunctionBody(a),c=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",b);return this.expressionToFunctionCache[a]=c,c},a.prototype.createFunctionBody=function(a){return a.indexOf("return")>=0?a:"return "+a+";"},d([f(0,i.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[g.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),a=d([h.Bean("expressionService")],a)}();b.ExpressionService=j},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},g=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var h=c(1),i=c(2),j=c(19),k=c(49),l=c(16),m=c(3),n=c(50),o=c(5),p=c(9),q=c(34),r=c(0),s=c(42),t=c(7),u=c(4),v=c(12),w=c(22),x=c(82),y=c(23),z=c(13),A=c(29),B=c(6),C=c(30),D=c(28),E=c(37),F=c(57),G=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.rowCompsByIndex={},b.floatingTopRowComps=[],b.floatingBottomRowComps=[],b.refreshInProgress=!1,b}return d(b,a),b.prototype.agWire=function(a){this.logger=a.create("RowRenderer")},b.prototype.registerGridComp=function(a){this.gridPanel=a,this.rowContainers=this.gridPanel.getRowContainers(),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_BODY_SCROLL,this.redrawAfterScroll.bind(this)),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_BODY_HEIGHT_CHANGED,this.redrawAfterScroll.bind(this)),this.redrawAfterModelUpdate()},b.prototype.onPageLoaded=function(a){h.Utils.missing(a)&&(a={type:o.Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1}),this.onModelUpdated(a)},b.prototype.getAllCellsForColumn=function(a){function b(b,d){var e=d.getCellForCol(a);e&&c.push(e)}var c=[];return h.Utils.iterateObject(this.rowCompsByIndex,b),h.Utils.iterateObject(this.floatingBottomRowComps,b),h.Utils.iterateObject(this.floatingTopRowComps,b),c},b.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.floatingTopRowComps,this.pinnedRowModel.getPinnedTopRowData(),this.rowContainers.floatingTopPinnedLeft,this.rowContainers.floatingTopPinnedRight,this.rowContainers.floatingTop,this.rowContainers.floatingTopFullWidth),this.refreshFloatingRows(this.floatingBottomRowComps,this.pinnedRowModel.getPinnedBottomRowData(),this.rowContainers.floatingBottomPinnedLeft,this.rowContainers.floatingBottomPinnedRight,this.rowContainers.floatingBottom,this.rowContainers.floatingBottomFullWith)},b.prototype.refreshFloatingRows=function(a,b,c,d,e,f){var g=this;a.forEach(function(a){a.destroy()}),a.length=0,b&&b.forEach(function(b){var h=new n.RowComp(g.$scope,e,c,d,f,b,g.beans,(!1),(!1));h.init(),a.push(h)}),this.flushContainers(a)},b.prototype.onPinnedRowDataChanged=function(){this.redrawAfterModelUpdate()},b.prototype.onModelUpdated=function(a){var b={recycleRows:a.keepRenderedRows,animate:a.animate,newData:a.newData,newPage:a.newPage,onlyBody:!0};this.redrawAfterModelUpdate(b)},b.prototype.getRenderedIndexesForRowNodes=function(a){var b=[];return h.Utils.missing(a)?b:(h.Utils.iterateObject(this.rowCompsByIndex,function(c,d){var e=d.getRowNode();a.indexOf(e)>=0&&b.push(c)}),b)},b.prototype.redrawRows=function(a){if(a&&0!=a.length){var b=this.getRenderedIndexesForRowNodes(a);this.removeRowComps(b),this.redrawAfterModelUpdate({recycleRows:!0})}},b.prototype.getCellToRestoreFocusToAfterRefresh=function(a){var b=a.suppressKeepFocus?null:this.focusedCellController.getFocusCellToUseAfterRefresh();if(h.Utils.missing(b))return null;var c=document.activeElement,d=this.gridOptionsWrapper.getDomData(c,q.CellComp.DOM_DATA_KEY_CELL_COMP),e=h.Utils.missing(d);return e?null:b},b.prototype.redrawAfterModelUpdate=function(a){void 0===a&&(a={}),this.getLockOnRefresh();var b=this.getCellToRestoreFocusToAfterRefresh(a);this.sizeContainerToPageHeight(),this.scrollToTopIfNewData(a);var c=a.recycleRows,d=a.animate&&this.gridOptionsWrapper.isAnimateRows(),e=this.binRowComps(c);this.redraw(e,d),a.onlyBody||this.refreshFloatingRowComps(),this.restoreFocusedCell(b),this.releaseLockOnRefresh()},b.prototype.scrollToTopIfNewData=function(a){var b=a.newData||a.newPage,c=this.gridOptionsWrapper.isSuppressScrollOnNewData();b&&!c&&this.gridPanel.scrollToTop()},b.prototype.sizeContainerToPageHeight=function(){var a=this.paginationProxy.getCurrentPageHeight();0===a&&(a=1),this.heightScaler.setModelHeight(a);var b=this.heightScaler.getUiContainerHeight();this.rowContainers.body.setHeight(b),this.rowContainers.fullWidth.setHeight(b),this.rowContainers.pinnedLeft.setHeight(b),this.rowContainers.pinnedRight.setHeight(b)},b.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("ag-Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, eg instead of api.refreshView(), call setTimeout(function(){api.refreshView(),0}). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},b.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},b.prototype.restoreFocusedCell=function(a){a&&this.focusedCellController.setFocusedCell(a.rowIndex,a.column,a.floating,!0)},b.prototype.stopEditing=function(a){void 0===a&&(a=!1),this.forEachRowComp(function(b,c){c.stopEditing(a)})},b.prototype.forEachCellComp=function(a){this.forEachRowComp(function(b,c){return c.forEachCellComp(a)})},b.prototype.forEachRowComp=function(a){h.Utils.iterateObject(this.rowCompsByIndex,a),h.Utils.iterateObject(this.floatingTopRowComps,a),h.Utils.iterateObject(this.floatingBottomRowComps,a)},b.prototype.addRenderedRowListener=function(a,b,c){var d=this.rowCompsByIndex[b];d&&d.addEventListener(a,c)},b.prototype.flashCells=function(a){void 0===a&&(a={}),this.forEachCellCompFiltered(a.rowNodes,a.columns,function(a){return a.flashCell()})},b.prototype.refreshCells=function(a){void 0===a&&(a={});var b={forceRefresh:a.force,newData:!1};this.forEachCellCompFiltered(a.rowNodes,a.columns,function(a){return a.refreshCell(b)})},b.prototype.getCellRendererInstances=function(a){var b=[];return this.forEachCellCompFiltered(a.rowNodes,a.columns,function(a){var c=a.getCellRenderer();c&&b.push(c)}),b},b.prototype.getCellEditorInstances=function(a){var b=[];return this.forEachCellCompFiltered(a.rowNodes,a.columns,function(a){var c=a.getCellEditor();c&&b.push(c)}),b},b.prototype.getEditingCells=function(){var a=[];return this.forEachCellComp(function(b){if(b.isEditing()){var c=b.getGridCell().getGridCellDef();a.push(c)}}),a},b.prototype.forEachCellCompFiltered=function(a,b,c){var d,e=this;h.Utils.exists(a)&&(d={top:{},bottom:{},normal:{}},a.forEach(function(a){a.rowPinned===p.Constants.PINNED_TOP?d.top[a.id]=!0:a.rowPinned===p.Constants.PINNED_BOTTOM?d.bottom[a.id]=!0:d.normal[a.id]=!0}));var f;h.Utils.exists(b)&&(f={},b.forEach(function(a){var b=e.columnController.getGridColumn(a);h.Utils.exists(b)&&(f[b.getId()]=!0)}));var g=function(a){var b=a.getRowNode(),e=b.id,g=b.rowPinned;if(h.Utils.exists(d))if(g===p.Constants.PINNED_BOTTOM){if(!d.bottom[e])return}else if(g===p.Constants.PINNED_TOP){if(!d.top[e])return}else if(!d.normal[e])return;a.forEachCellComp(function(a){var b=a.getColumn().getId(),d=f&&!f[b];d||c(a)})};h.Utils.iterateObject(this.rowCompsByIndex,function(a,b){g(b)}),this.floatingTopRowComps&&this.floatingTopRowComps.forEach(g),this.floatingBottomRowComps&&this.floatingBottomRowComps.forEach(g)},b.prototype.destroy=function(){a.prototype.destroy.call(this);var b=Object.keys(this.rowCompsByIndex);this.removeRowComps(b)},b.prototype.binRowComps=function(a){var b,c=this,d={};return a?(b=[],h.Utils.iterateObject(this.rowCompsByIndex,function(a,e){var f=e.getRowNode();h.Utils.exists(f.id)?(d[f.id]=e,delete c.rowCompsByIndex[a]):b.push(a)})):b=Object.keys(this.rowCompsByIndex),this.removeRowComps(b),d},b.prototype.removeRowComps=function(a){var b=this;a.forEach(function(a){var c=b.rowCompsByIndex[a];c.destroy(),delete b.rowCompsByIndex[a]})},b.prototype.redrawAfterScroll=function(){this.getLockOnRefresh(),this.redraw(null,!1,!0),this.releaseLockOnRefresh()},b.prototype.removeRowCompsNotToDraw=function(a){var b={};a.forEach(function(a){return b[a]=!0});var c=Object.keys(this.rowCompsByIndex),d=h.Utils.filter(c,function(a){return!b[a]});this.removeRowComps(d)},b.prototype.calculateIndexesToDraw=function(){var a=this,b=h.Utils.createArrayOfNumbers(this.firstRenderedRow,this.lastRenderedRow);return h.Utils.iterateObject(this.rowCompsByIndex,function(c,d){var e=Number(c);(e<a.firstRenderedRow||e>a.lastRenderedRow)&&a.keepRowBecauseEditing(d)&&b.push(e)}),b.sort(function(a,b){return a-b}),b},b.prototype.redraw=function(a,b,c){var d=this;void 0===b&&(b=!1),void 0===c&&(c=!1),this.heightScaler.update(),this.workOutFirstAndLastRowsToRender();var e=this.calculateIndexesToDraw();this.removeRowCompsNotToDraw(e);var f=[],g=[];e.forEach(function(e){var i=d.createOrUpdateRowComp(e,a,b,c);h.Utils.exists(i)&&(g.push(i),h.Utils.pushAll(f,i.getAndClearNextVMTurnFunctions()))}),this.flushContainers(g),h.Utils.executeNextVMTurn(f),c&&!this.gridOptionsWrapper.isSuppressAnimationFrame()?this.beans.taskQueue.addP2Task(this.destroyRowComps.bind(this,a,b)):this.destroyRowComps(a,b),this.checkAngularCompile()},b.prototype.flushContainers=function(a){h.Utils.iterateObject(this.rowContainers,function(a,b){b&&b.flushRowTemplates()}),a.forEach(function(a){return a.afterFlush()})},b.prototype.onDisplayedColumnsChanged=function(){var a=this.columnController.isPinningLeft(),b=this.columnController.isPinningRight(),c=this.pinningLeft!==a||b!==this.pinningRight;c&&(this.pinningLeft=a,this.pinningRight=b,this.gridOptionsWrapper.isEmbedFullWidthRows()&&this.redrawFullWidthEmbeddedRows())},b.prototype.redrawFullWidthEmbeddedRows=function(){var a=[];h.Utils.iterateObject(this.rowCompsByIndex,function(b,c){if(c.isFullWidth()){var d=c.getRowNode().rowIndex;a.push(d.toString())}}),this.refreshFloatingRowComps(),this.removeRowComps(a),this.redrawAfterScroll()},b.prototype.createOrUpdateRowComp=function(a,b,c,d){var e,f=this.rowCompsByIndex[a];f||(e=this.paginationProxy.getRow(a),h.Utils.exists(e)&&h.Utils.exists(b)&&b[e.id]&&(f=b[e.id],b[e.id]=null));var g=!f;if(g){if(e||(e=this.paginationProxy.getRow(a)),!h.Utils.exists(e))return;f=this.createRowComp(e,c,d)}else f.ensureDomOrder();return this.rowCompsByIndex[a]=f,f},b.prototype.destroyRowComps=function(a,b){var c=[];h.Utils.iterateObject(a,function(a,d){d&&(d.destroy(b),h.Utils.pushAll(c,d.getAndClearDelayedDestroyFunctions()))}),h.Utils.executeInAWhile(c)},b.prototype.checkAngularCompile=function(){var a=this;this.gridOptionsWrapper.isAngularCompileRows()&&setTimeout(function(){a.$scope.$apply()},0)},b.prototype.workOutFirstAndLastRowsToRender=function(){var a,b;if(this.paginationProxy.isRowsToRender()){var c=this.paginationProxy.getPageFirstRow(),d=this.paginationProxy.getPageLastRow(),e=this.paginationProxy?this.paginationProxy.getPixelOffset():0,f=this.heightScaler.getOffset(),g=this.gridPanel.getVScrollPosition(),h=g.top,i=g.bottom,j=h+e+f,k=i+e+f,l=this.paginationProxy.getRowIndexAtPixel(j),m=this.paginationProxy.getRowIndexAtPixel(k),n=this.gridOptionsWrapper.getRowBuffer();l-=n,m+=n,l<c&&(l=c),m>d&&(m=d),a=l,b=m}else a=0,b=-1;var p=a!==this.firstRenderedRow,q=b!==this.lastRenderedRow;if(p||q){this.firstRenderedRow=a,this.lastRenderedRow=b;var r={type:o.Events.EVENT_VIEWPORT_CHANGED,firstRow:a,lastRow:b,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(r)}},b.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},b.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},b.prototype.keepRowBecauseEditing=function(a){var b=!1,c=!0,d=a.getRowNode(),e=this.focusedCellController.isRowNodeFocused(d),f=a.isEditing(),g=e||f;if(!g)return b;var h=this.paginationProxy.isRowPresent(d);return h?c:b},b.prototype.createRowComp=function(a,b,c){var d=c&&!this.gridOptionsWrapper.isSuppressAnimationFrame(),e=new n.RowComp(this.$scope,this.rowContainers.body,this.rowContainers.pinnedLeft,this.rowContainers.pinnedRight,this.rowContainers.fullWidth,a,this.beans,b,d);return e.init(),e},b.prototype.getRenderedNodes=function(){var a=this.rowCompsByIndex;return Object.keys(a).map(function(b){return a[b].getRowNode()})},b.prototype.navigateToNextCell=function(a,b,c,d){for(var e=c;;){if(e=this.cellNavigationService.getNextCellToFocus(b,e),h.Utils.missing(e))break;var f=this.gridOptionsWrapper.isGroupUseEntireRow();if(!f)break;var g=this.paginationProxy.getRow(e.rowIndex);if(!g.group)break}if(d){var i=this.gridOptionsWrapper.getNavigateToNextCellFunc();if(h.Utils.exists(i)){var j={key:b,previousCellDef:c,nextCellDef:e?e.getGridCellDef():null,event:a},k=i(j);e=h.Utils.exists(k)?new y.GridCell(k):null}}if(e&&(this.ensureCellVisible(e),this.focusedCellController.setFocusedCell(e.rowIndex,e.column,e.floating,!0),this.rangeController)){var l=new y.GridCell({rowIndex:e.rowIndex,floating:e.floating,column:e.column});this.rangeController.setRangeToCell(l)}},b.prototype.ensureCellVisible=function(a){h.Utils.missing(a.floating)&&this.gridPanel.ensureIndexVisible(a.rowIndex),a.column.isPinned()||this.gridPanel.ensureColumnVisible(a.column),this.gridPanel.horizontallyScrollHeaderCenterAndFloatingCenter(),this.animationFrameService.flushAllFrames()},b.prototype.startEditingCell=function(a,b,c){var d=this.getComponentForCell(a);d&&d.startRowOrCellEdit(b,c)},b.prototype.getComponentForCell=function(a){var b;switch(a.floating){case p.Constants.PINNED_TOP:b=this.floatingTopRowComps[a.rowIndex];break;case p.Constants.PINNED_BOTTOM:b=this.floatingBottomRowComps[a.rowIndex];break;default:b=this.rowCompsByIndex[a.rowIndex]}if(!b)return null;var c=b.getRenderedCellForColumn(a.column);return c},b.prototype.onTabKeyDown=function(a,b){var c=b.shiftKey,d=this.moveToCellAfter(a,c);d&&b.preventDefault()},b.prototype.tabToNextCell=function(a){var b=this.focusedCellController.getFocusedCell();if(h.Utils.missing(b))return!1;var c=this.getComponentForCell(b);if(h.Utils.missing(c))return!1;var d=this.moveToCellAfter(c,a);return d},b.prototype.moveToCellAfter=function(a,b){var c,d=a.isEditing();return c=d?this.gridOptionsWrapper.isFullRowEdit()?this.moveToNextEditingRow(a,b):this.moveToNextEditingCell(a,b):this.moveToNextCellNotEditing(a,b)},b.prototype.moveToNextEditingCell=function(a,b){var c=a.getGridCell();a.stopEditing();var d=this.findNextCellToFocusOn(c,b,!0),e=h.Utils.exists(d);return e&&(d.startEditingIfEnabled(null,null,!0),d.focusCell(!1)),e},b.prototype.moveToNextEditingRow=function(a,b){var c=a.getGridCell(),d=this.findNextCellToFocusOn(c,b,!0),e=h.Utils.exists(d);return e&&this.moveEditToNextCellOrRow(a,d),e},b.prototype.moveToNextCellNotEditing=function(a,b){var c=a.getGridCell(),d=this.findNextCellToFocusOn(c,b,!1),e=h.Utils.exists(d);return e&&d.focusCell(!0),e},b.prototype.moveEditToNextCellOrRow=function(a,b){var c=a.getGridCell(),d=b.getGridCell(),e=c.rowIndex===d.rowIndex&&c.floating===d.floating;if(e)a.setFocusOutOnEditor(),b.setFocusInOnEditor();else{var f=a.getRenderedRow(),g=b.getRenderedRow();a.setFocusOutOnEditor(),f.stopEditing(),g.startRowEditing(),b.setFocusInOnEditor()}b.focusCell()},b.prototype.findNextCellToFocusOn=function(a,b,c){for(var d=a;;){d=this.cellNavigationService.getNextTabbedCell(d,b);var e=this.gridOptionsWrapper.getTabToNextCellFunc();if(h.Utils.exists(e)){var f={backwards:b,editing:c,previousCellDef:a.getGridCellDef(),nextCellDef:d?d.getGridCellDef():null},g=e(f);d=h.Utils.exists(g)?new y.GridCell(g):null}if(!d)return null;if(c){var i=this.paginationProxy.getRow(d.rowIndex),j=d.column.isCellEditable(i);if(!j)continue}var k=h.Utils.missing(d.floating);k&&this.gridPanel.ensureIndexVisible(d.rowIndex),d.column.isPinned()||this.gridPanel.ensureColumnVisible(d.column),this.gridPanel.horizontallyScrollHeaderCenterAndFloatingCenter(),this.animationFrameService.flushAllFrames();var l=this.getComponentForCell(d);if(!h.Utils.missing(l)&&!l.isSuppressNavigable()){if(this.rangeController){var m=new y.GridCell({rowIndex:d.rowIndex,floating:d.floating,column:d.column});this.rangeController.setRangeToCell(m)}return l}}},e([r.Autowired("paginationProxy"),f("design:type",A.PaginationProxy)],b.prototype,"paginationProxy",void 0),e([r.Autowired("columnController"),f("design:type",u.ColumnController)],b.prototype,"columnController",void 0),e([r.Autowired("gridOptionsWrapper"),f("design:type",i.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([r.Autowired("gridCore"),f("design:type",s.GridCore)],b.prototype,"gridCore",void 0),e([r.Autowired("$scope"),f("design:type",Object)],b.prototype,"$scope",void 0),e([r.Autowired("expressionService"),f("design:type",j.ExpressionService)],b.prototype,"expressionService",void 0),e([r.Autowired("templateService"),f("design:type",k.TemplateService)],b.prototype,"templateService",void 0),e([r.Autowired("valueService"),f("design:type",l.ValueService)],b.prototype,"valueService",void 0),e([r.Autowired("eventService"),f("design:type",m.EventService)],b.prototype,"eventService",void 0),e([r.Autowired("pinnedRowModel"),f("design:type",C.PinnedRowModel)],b.prototype,"pinnedRowModel",void 0),e([r.Autowired("context"),f("design:type",r.Context)],b.prototype,"context",void 0),e([r.Autowired("loggerFactory"),f("design:type",v.LoggerFactory)],b.prototype,"loggerFactory",void 0),e([r.Autowired("focusedCellController"),f("design:type",w.FocusedCellController)],b.prototype,"focusedCellController",void 0),e([r.Autowired("cellNavigationService"),f("design:type",x.CellNavigationService)],b.prototype,"cellNavigationService",void 0),e([r.Autowired("columnApi"),f("design:type",t.ColumnApi)],b.prototype,"columnApi",void 0),e([r.Autowired("gridApi"),f("design:type",B.GridApi)],b.prototype,"gridApi",void 0),e([r.Autowired("beans"),f("design:type",D.Beans)],b.prototype,"beans",void 0),e([r.Autowired("heightScaler"),f("design:type",F.HeightScaler)],b.prototype,"heightScaler",void 0),e([r.Autowired("animationFrameService"),f("design:type",E.AnimationFrameService)],b.prototype,"animationFrameService",void 0),e([r.Optional("rangeController"),f("design:type",Object)],b.prototype,"rangeController",void 0),e([g(0,r.Qualifier("loggerFactory")),f("design:type",Function),f("design:paramtypes",[v.LoggerFactory]),f("design:returntype",void 0)],b.prototype,"agWire",null),e([r.PreDestroy,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"destroy",null),b=e([r.Bean("rowRenderer")],b)}(z.BeanStub);b.RowRenderer=G},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f,g=c(0),h=c(91),i=c(2),j=c(122),k=c(18),l=c(27),m=c(1),n=c(124),o=c(6),p=c(7);!function(a){a[a.AG_GRID=0]="AG_GRID",a[a.FRAMEWORK=1]="FRAMEWORK"}(f||(f={}));var q=function(){function a(){}return b=a,a.prototype.newDateComponent=function(a){return this.componentResolver.createAgGridComponent(this.gridOptions,a,"dateComponent",{api:this.gridApi,columnApi:this.columnApi},"agDateInput")},a.prototype.newHeaderComponent=function(a){return this.componentResolver.createAgGridComponent(a.column.getColDef(),a,"headerComponent",{api:this.gridApi,columnApi:this.columnApi,column:a.column,colDef:a.column.getColDef()},"agColumnHeader")},a.prototype.newHeaderGroupComponent=function(a){return this.componentResolver.createAgGridComponent(a.columnGroup.getColGroupDef(),a,"headerGroupComponent",{api:this.gridApi,columnApi:this.columnApi},"agColumnGroupHeader")},a.prototype.newFloatingFilterWrapperComponent=function(a,c){var d=this,e=a.getColDef();if(e.suppressFilter)return this.newEmptyFloatingFilterWrapperComponent(a);var f;e.filter?"string"==typeof e.filter&&Object.keys(b.filterToFloatingFilterNames).indexOf(e.filter)>-1&&(f=b.filterToFloatingFilterNames[e.filter]):f=this.gridOptionsWrapper.isEnterprise()?"agSetColumnFloatingFilter":"agTextColumnFloatingFilter";var g={column:a,colDef:e,api:this.gridApi,columnApi:this.columnApi},i=this.componentResolver.createAgGridComponent(e,c,"floatingFilterComponent",g,f,!1),k={column:a,floatingFilterComp:i,suppressFilterButton:this.componentResolver.mergeParams(e,"floatingFilterComponent",g,c).suppressFilterButton};if(!i){var l=this.getFilterComponentPrototype(e);if(l&&!l.component.prototype.getModelAsString)return this.newEmptyFloatingFilterWrapperComponent(a);var n=c.currentParentModel;c.currentParentModel=function(){var b=d.filterManager.getFilterComponent(a);return b.resolveNow(null,function(a){return a.getModelAsString?a.getModelAsString(n()):null})},k.floatingFilterComp=m.Promise.resolve(this.componentResolver.createInternalAgGridComponent(h.ReadModelAsStringFloatingFilterComp,c))}return this.componentResolver.createInternalAgGridComponent(j.FloatingFilterWrapperComp,k)},a.prototype.newFullWidthGroupRowInnerCellRenderer=function(a){return this.componentResolver.createAgGridComponent(this.gridOptions,a,"groupRowInnerRenderer",a,null,!1)},a.prototype.newCellRenderer=function(a,b){return this.componentResolver.createAgGridComponent(a,b,"cellRenderer",b,null,!1)},a.prototype.newInnerCellRenderer=function(a,b){return this.componentResolver.createAgGridComponent(a,b,"innerRenderer",b,null)},a.prototype.newFullRowGroupRenderer=function(a){return this.componentResolver.createAgGridComponent(this.gridOptionsWrapper,a,"fullWidthCellRenderer",a,null)},a.prototype.newOverlayWrapperComponent=function(){return this.componentResolver.createInternalAgGridComponent(n.OverlayWrapperComponent,null)},a.prototype.newLoadingOverlayComponent=function(){return this.componentResolver.createAgGridComponent(this.gridOptions,null,"loadingOverlayComponent",{api:this.gridApi,columnApi:this.columnApi},"agLoadingOverlay")},a.prototype.newNoRowsOverlayComponent=function(){return this.componentResolver.createAgGridComponent(this.gridOptions,null,"noRowsOverlayComponent",{api:this.gridApi,columnApi:this.columnApi},"agNoRowsOverlay")},a.prototype.getFilterComponentPrototype=function(a){return this.componentResolver.getComponentToUse(a,"filter",{api:this.gridApi,columnApi:this.columnApi,colDef:a})},a.prototype.newEmptyFloatingFilterWrapperComponent=function(a){var b={column:a,floatingFilterComp:null};return this.componentResolver.createInternalAgGridComponent(j.EmptyFloatingFilterWrapperComp,b)},a.filterToFloatingFilterNames={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},d([g.Autowired("componentResolver"),e("design:type",l.ComponentResolver)],a.prototype,"componentResolver",void 0),d([g.Autowired("gridOptions"),e("design:type",Object)],a.prototype,"gridOptions",void 0),d([g.Autowired("gridApi"),e("design:type",o.GridApi)],a.prototype,"gridApi",void 0),d([g.Autowired("columnApi"),e("design:type",p.ColumnApi)],a.prototype,"columnApi",void 0),d([g.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([g.Autowired("filterManager"),e("design:type",k.FilterManager)],a.prototype,"filterManager",void 0),a=b=d([g.Bean("componentRecipes")],a);var b}();b.ComponentRecipes=q},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(3),h=c(5),i=c(2),j=c(7),k=c(4),l=c(1),m=c(23),n=c(6),o=c(34),p=function(){function a(){}return a.prototype.init=function(){this.eventService.addEventListener(h.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(h.Events.EVENT_COLUMN_EVERYTHING_CHANGED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(h.Events.EVENT_COLUMN_GROUP_OPENED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(h.Events.EVENT_COLUMN_MOVED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(h.Events.EVENT_COLUMN_PINNED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(h.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(h.Events.EVENT_COLUMN_VISIBLE,this.clearFocusedCell.bind(this))},a.prototype.clearFocusedCell=function(){this.focusedCell=null,this.onCellFocused(!1)},a.prototype.getFocusedCell=function(){return this.focusedCell},a.prototype.getFocusCellToUseAfterRefresh=function(){if(this.gridOptionsWrapper.isSuppressFocusAfterRefresh())return null;if(!this.focusedCell)return null;var a=this.getGridCellForDomElement(document.activeElement);return a?this.focusedCell:null},a.prototype.getGridCellForDomElement=function(a){for(var b=a;b;){var c=this.gridOptionsWrapper.getDomData(b,o.CellComp.DOM_DATA_KEY_CELL_COMP);if(c)return c.getGridCell();b=b.parentNode}return null},a.prototype.setFocusedCell=function(a,b,c,d){void 0===d&&(d=!1);var e=l.Utils.makeNull(this.columnController.getGridColumn(b));this.focusedCell=new m.GridCell({rowIndex:a,floating:l.Utils.makeNull(c),column:e}),this.onCellFocused(d)},a.prototype.isCellFocused=function(a){return!l.Utils.missing(this.focusedCell)&&(this.focusedCell.column===a.column&&this.isRowFocused(a.rowIndex,a.floating))},a.prototype.isRowNodeFocused=function(a){return this.isRowFocused(a.rowIndex,a.rowPinned)},a.prototype.isAnyCellFocused=function(){return!!this.focusedCell},a.prototype.isRowFocused=function(a,b){if(l.Utils.missing(this.focusedCell))return!1;var c=l.Utils.makeNull(b);return this.focusedCell.rowIndex===a&&this.focusedCell.floating===c},a.prototype.onCellFocused=function(a){var b={type:h.Events.EVENT_CELL_FOCUSED,forceBrowserFocus:a,rowIndex:null,column:null,floating:null,api:this.gridApi,columnApi:this.columnApi,rowPinned:null};this.focusedCell&&(b.rowIndex=this.focusedCell.rowIndex,b.column=this.focusedCell.column,b.rowPinned=this.focusedCell.floating),this.eventService.dispatchEvent(b)},d([f.Autowired("eventService"),e("design:type",g.EventService)],a.prototype,"eventService",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("columnController"),e("design:type",k.ColumnController)],a.prototype,"columnController",void 0),d([f.Autowired("columnApi"),e("design:type",j.ColumnApi)],a.prototype,"columnApi",void 0),d([f.Autowired("gridApi"),e("design:type",n.GridApi)],a.prototype,"gridApi",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([f.Bean("focusedCellController")],a)}();b.FocusedCellController=p},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(1),e=c(64),f=function(){function a(a){this.rowIndex=a.rowIndex,this.column=a.column,this.floating=d.Utils.makeNull(a.floating)}return a.prototype.getGridCellDef=function(){return{rowIndex:this.rowIndex,column:this.column,floating:this.floating}},a.prototype.getGridRow=function(){return new e.GridRow(this.rowIndex,this.floating)},a.prototype.toString=function(){return"rowIndex = "+this.rowIndex+", floating = "+this.floating+", column = "+(this.column?this.column.getId():null)},a.prototype.createId=function(){return this.rowIndex+"."+this.floating+"."+this.column.getId()},a.prototype.equals=function(a){var b=this.column===a.column,c=this.floating===a.floating,d=this.rowIndex===a.rowIndex;return b&&c&&d},a}();b.GridCell=f},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(10),g=c(0),h=c(2),i=c(7),j=c(4),k=c(3),l=c(5),m=c(0),n=c(1),o=c(6),p=function(){
function a(){}return b=a,a.prototype.progressSort=function(a,b,c){void 0===c&&(c="api");var d=this.getNextSortDirection(a);this.setSortForColumn(a,d,b,c)},a.prototype.setSortForColumn=function(a,b,c,d){if(void 0===d&&(d="api"),b!==f.Column.SORT_ASC&&b!==f.Column.SORT_DESC&&(b=null),a.setSort(b,d),a.getSort()){var e=Number((new Date).valueOf());a.setSortedAt(e)}else a.setSortedAt(null);var g=c&&!this.gridOptionsWrapper.isSuppressMultiSort();g||this.clearSortBarThisColumn(a,d),this.dispatchSortChangedEvents()},a.prototype.onSortChanged=function(){this.dispatchSortChangedEvents()},a.prototype.dispatchSortChangedEvents=function(){var a={type:l.Events.EVENT_SORT_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(a)},a.prototype.clearSortBarThisColumn=function(a,b){this.columnController.getPrimaryAndSecondaryAndAutoColumns().forEach(function(c){c!==a&&c.setSort(null,b)})},a.prototype.getNextSortDirection=function(a){var c;if(c=a.getColDef().sortingOrder?a.getColDef().sortingOrder:this.gridOptionsWrapper.getSortingOrder()?this.gridOptionsWrapper.getSortingOrder():b.DEFAULT_SORTING_ORDER,!Array.isArray(c)||c.length<=0)return void console.warn("ag-grid: sortingOrder must be an array with at least one element, currently it's "+c);var d,e=c.indexOf(a.getSort()),f=e<0,g=e==c.length-1;return d=f||g?c[0]:c[e+1],b.DEFAULT_SORTING_ORDER.indexOf(d)<0?(console.warn("ag-grid: invalid sort type "+d),null):d},a.prototype.getSortModel=function(){var a=this.getColumnsWithSortingOrdered();return n.Utils.map(a,function(a){return{colId:a.getColId(),sort:a.getSort()}})},a.prototype.setSortModel=function(a,b){var c=this;if(void 0===b&&(b="api"),!this.gridOptionsWrapper.isEnableSorting())return void console.warn("ag-grid: You are setting the sort model on a grid that does not have sorting enabled");var d=a&&a.length>0,e=this.columnController.getPrimaryAndSecondaryAndAutoColumns();e.forEach(function(e){var f=null,g=-1;if(d&&!e.getColDef().suppressSorting)for(var h=0;h<a.length;h++){var i=a[h];"string"==typeof i.colId&&"string"==typeof e.getColId()&&c.compareColIds(i,e)&&(f=i.sort,g=h)}f?(e.setSort(f,b),e.setSortedAt(g)):(e.setSort(null,b),e.setSortedAt(null))}),this.dispatchSortChangedEvents()},a.prototype.compareColIds=function(a,b){return a.colId===b.getColId()},a.prototype.getColumnsWithSortingOrdered=function(){var a=this.columnController.getPrimaryAndSecondaryAndAutoColumns(),b=n.Utils.filter(a,function(a){return!!a.getSort()});return b.sort(function(a,b){return a.sortedAt-b.sortedAt}),b},a.prototype.getSortForRowController=function(){var a=this.getColumnsWithSortingOrdered();return n.Utils.map(a,function(a){var b=a.getSort()===f.Column.SORT_ASC;return{inverter:b?1:-1,column:a}})},a.DEFAULT_SORTING_ORDER=[f.Column.SORT_ASC,f.Column.SORT_DESC,null],d([g.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([g.Autowired("columnController"),e("design:type",j.ColumnController)],a.prototype,"columnController",void 0),d([g.Autowired("eventService"),e("design:type",k.EventService)],a.prototype,"eventService",void 0),d([g.Autowired("columnApi"),e("design:type",i.ColumnApi)],a.prototype,"columnApi",void 0),d([g.Autowired("gridApi"),e("design:type",o.GridApi)],a.prototype,"gridApi",void 0),a=b=d([m.Bean("sortController")],a);var b}();b.SortController=p},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(){}return a.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",a.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",a.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",a.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",a.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",a.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",a.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",a.EVENT_COLUMN_MOVED="columnMoved",a.EVENT_COLUMN_VISIBLE="columnVisible",a.EVENT_COLUMN_PINNED="columnPinned",a.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",a.EVENT_COLUMN_RESIZED="columnResized",a.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",a.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",a.EVENT_ROW_GROUP_OPENED="rowGroupOpened",a.EVENT_ROW_DATA_CHANGED="rowDataChanged",a.EVENT_ROW_DATA_UPDATED="rowDataUpdated",a.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",a.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",a.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",a.EVENT_MODEL_UPDATED="modelUpdated",a.EVENT_PASTE_START="pasteStart",a.EVENT_PASTE_END="pasteEnd",a.EVENT_CELL_CLICKED="cellClicked",a.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",a.EVENT_CELL_MOUSE_DOWN="cellMouseDown",a.EVENT_CELL_CONTEXT_MENU="cellContextMenu",a.EVENT_CELL_VALUE_CHANGED="cellValueChanged",a.EVENT_ROW_VALUE_CHANGED="rowValueChanged",a.EVENT_CELL_FOCUSED="cellFocused",a.EVENT_ROW_SELECTED="rowSelected",a.EVENT_SELECTION_CHANGED="selectionChanged",a.EVENT_CELL_MOUSE_OVER="cellMouseOver",a.EVENT_CELL_MOUSE_OUT="cellMouseOut",a.EVENT_FILTER_CHANGED="filterChanged",a.EVENT_FILTER_MODIFIED="filterModified",a.EVENT_SORT_CHANGED="sortChanged",a.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",a.EVENT_ROW_CLICKED="rowClicked",a.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",a.EVENT_GRID_READY="gridReady",a.DEPRECATED_EVENT_GRID_SIZE_CHANGED="gridSizeChanged",a.EVENT_VIEWPORT_CHANGED="viewportChanged",a.EVENT_DRAG_STARTED="dragStarted",a.EVENT_DRAG_STOPPED="dragStopped",a.EVENT_ROW_EDITING_STARTED="rowEditingStarted",a.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",a.EVENT_CELL_EDITING_STARTED="cellEditingStarted",a.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",a.EVENT_BODY_SCROLL="bodyScroll",a.EVENT_ANIMATION_QUEUE_EMPTY="animationQueueEmpty",a.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",a.EVENT_PAGINATION_CHANGED="paginationChanged",a.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",a.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",a.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",a.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",a.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",a.EVENT_FLASH_CELLS="flashCells",a.EVENT_ROW_DRAG_ENTER="rowDragEnter",a.EVENT_ROW_DRAG_MOVE="rowDragMove",a.EVENT_ROW_DRAG_LEAVE="rowDragLeave",a.EVENT_ROW_DRAG_END="rowDragEnd",a.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",a.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",a.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",a.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",a}();b.Events=d},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(10),g=c(3),h=c(0),i=c(2),j=c(7),k=c(6),l=function(){function a(a,b,c){this.displayedChildren=[],this.localEventService=new g.EventService,this.groupId=b,this.instanceId=c,this.originalColumnGroup=a}return a.createUniqueId=function(a,b){return a+"_"+b},a.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},a.prototype.getParent=function(){return this.parent},a.prototype.setParent=function(a){this.parent=a},a.prototype.getUniqueId=function(){return a.createUniqueId(this.groupId,this.instanceId)},a.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},a.prototype.isMoving=function(){var a=this.getOriginalColumnGroup().getLeafColumns();if(!a||0===a.length)return!1;var b=!0;return a.forEach(function(a){a.isMoving()||(b=!1)}),b},a.prototype.checkLeft=function(){if(this.displayedChildren.forEach(function(b){b instanceof a&&b.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsWrapper.isEnableRtl()){var b=this.displayedChildren[this.displayedChildren.length-1],c=b.getLeft();this.setLeft(c)}else{var d=this.displayedChildren[0].getLeft();this.setLeft(d)}else this.setLeft(null)},a.prototype.getLeft=function(){return this.left},a.prototype.getOldLeft=function(){return this.oldLeft},a.prototype.setLeft=function(b){this.oldLeft=b,this.left!==b&&(this.left=b,this.localEventService.dispatchEvent(this.createAgEvent(a.EVENT_LEFT_CHANGED)))},a.prototype.createAgEvent=function(a){return{type:a}},a.prototype.addEventListener=function(a,b){this.localEventService.addEventListener(a,b)},a.prototype.removeEventListener=function(a,b){this.localEventService.removeEventListener(a,b)},a.prototype.getGroupId=function(){return this.groupId},a.prototype.getInstanceId=function(){return this.instanceId},a.prototype.isChildInThisGroupDeepSearch=function(b){var c=!1;return this.children.forEach(function(d){b===d&&(c=!0),d instanceof a&&d.isChildInThisGroupDeepSearch(b)&&(c=!0)}),c},a.prototype.getActualWidth=function(){var a=0;return this.displayedChildren&&this.displayedChildren.forEach(function(b){a+=b.getActualWidth()}),a},a.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var a=!1;return this.displayedChildren.forEach(function(b){b.isResizable()&&(a=!0)}),a},a.prototype.getMinWidth=function(){var a=0;return this.displayedChildren.forEach(function(b){a+=b.getMinWidth()}),a},a.prototype.addChild=function(a){this.children||(this.children=[]),this.children.push(a)},a.prototype.getDisplayedChildren=function(){return this.displayedChildren},a.prototype.getLeafColumns=function(){var a=[];return this.addLeafColumns(a),a},a.prototype.getDisplayedLeafColumns=function(){var a=[];return this.addDisplayedLeafColumns(a),a},a.prototype.getDefinition=function(){return this.originalColumnGroup.getColGroupDef()},a.prototype.getColGroupDef=function(){return this.originalColumnGroup.getColGroupDef()},a.prototype.isPadding=function(){return this.originalColumnGroup.isPadding()},a.prototype.isExpandable=function(){return this.originalColumnGroup.isExpandable()},a.prototype.isExpanded=function(){return this.originalColumnGroup.isExpanded()},a.prototype.setExpanded=function(a){this.originalColumnGroup.setExpanded(a)},a.prototype.addDisplayedLeafColumns=function(b){this.displayedChildren.forEach(function(c){c instanceof f.Column?b.push(c):c instanceof a&&c.addDisplayedLeafColumns(b)})},a.prototype.addLeafColumns=function(b){this.children.forEach(function(c){c instanceof f.Column?b.push(c):c instanceof a&&c.addLeafColumns(b)})},a.prototype.getChildren=function(){return this.children},a.prototype.getColumnGroupShow=function(){return this.originalColumnGroup.getColumnGroupShow()},a.prototype.getOriginalColumnGroup=function(){return this.originalColumnGroup},a.prototype.calculateDisplayedColumns=function(){var b=this;this.displayedChildren=[],this.originalColumnGroup.isExpandable()?this.children.forEach(function(c){var d=c.getColumnGroupShow();switch(d){case a.HEADER_GROUP_SHOW_OPEN:b.originalColumnGroup.isExpanded()&&b.displayedChildren.push(c);break;case a.HEADER_GROUP_SHOW_CLOSED:b.originalColumnGroup.isExpanded()||b.displayedChildren.push(c);break;default:b.displayedChildren.push(c)}}):this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(a.EVENT_DISPLAYED_CHILDREN_CHANGED))},a.HEADER_GROUP_SHOW_OPEN="open",a.HEADER_GROUP_SHOW_CLOSED="closed",a.EVENT_LEFT_CHANGED="leftChanged",a.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",d([h.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([h.Autowired("columnApi"),e("design:type",j.ColumnApi)],a.prototype,"columnApi",void 0),d([h.Autowired("gridApi"),e("design:type",k.GridApi)],a.prototype,"gridApi",void 0),a}();b.ColumnGroup=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f,g=c(0),h=c(2),i=c(1),j=c(66),k=c(76),l=c(77);!function(a){a[a.AG_GRID=0]="AG_GRID",a[a.FRAMEWORK=1]="FRAMEWORK"}(f=b.ComponentType||(b.ComponentType={}));var m;!function(a){a[a.DEFAULT=0]="DEFAULT",a[a.REGISTERED_BY_NAME=1]="REGISTERED_BY_NAME",a[a.HARDCODED=2]="HARDCODED"}(m=b.ComponentSource||(b.ComponentSource={}));var n=function(){function a(){}return a.prototype.getComponentToUse=function(a,b,c,d){var e,g=null,h=null,j=null,k=null;if(null!=a){var l=a[b];null!=l&&("string"==typeof l?g=l:this.agComponentUtils.doesImplementIComponent(l)?h=l:j=l),k=a[b+"Framework"],e=a[b+"Selector"]}if(h&&k||g&&k||j&&k)throw Error("ag-grid: you are trying to specify: "+b+" twice as a component.");if(k&&!this.frameworkComponentWrapper)throw Error("ag-grid: you are specifying a framework component but you are not using a framework version of ag-grid for : "+b);if(e&&(g||h||j||k))throw Error("ag-grid: you can't specify both, the selector and the component of ag-grid for : "+b);if(k)return{type:f.FRAMEWORK,component:k,source:m.HARDCODED,dynamicParams:null};if(h)return{type:f.AG_GRID,component:h,source:m.HARDCODED,dynamicParams:null};if(j)return this.agComponentUtils.adaptFunction(b,j,f.AG_GRID,m.HARDCODED);if(e){var n=e(c);if(null!=n){null==n.component&&(n.component=d);var o=this.resolveByName(b,n.component);return i._.assign(o,{dynamicParams:n.params})}}var p;return p=g?g:d,null==p?null:this.resolveByName(b,p)},a.prototype.resolveByName=function(a,b){var c=null!=b?b:a,d=this.componentProvider.retrieve(c);return null==d?null:d.type==f.FRAMEWORK?{component:d.component,type:f.FRAMEWORK,source:m.REGISTERED_BY_NAME,dynamicParams:null}:this.agComponentUtils.doesImplementIComponent(d.component)?{component:d.component,type:f.AG_GRID,source:d.source==j.RegisteredComponentSource.REGISTERED?m.REGISTERED_BY_NAME:m.DEFAULT,dynamicParams:null}:this.agComponentUtils.adaptFunction(a,d.component,d.type,d.source==j.RegisteredComponentSource.REGISTERED?m.REGISTERED_BY_NAME:m.DEFAULT)},a.prototype.mergeParams=function(a,b,c,d,e){void 0===e&&(e=null);var f=a?a[b+"Params"]:null,g={};if(i._.mergeDeep(g,c),null!=f){var h=null;h="function"==typeof f?f(d):f,i._.mergeDeep(g,h)}return i._.mergeDeep(g,e),g.api||(g.api=this.gridOptions.api),g},a.prototype.createAgGridComponent=function(a,b,c,d,e,f,g){void 0===f&&(f=!0);var h=null==a?this.gridOptions:a,j=this.newAgGridComponent(h,c,d,e,f);if(!j)return null;var k=this.mergeParams(h,c,b,d,j[1]);k.agGridReact=this.context.getBean("agGridReact")?i._.cloneObject(this.context.getBean("agGridReact")):{},k.frameworkComponentWrapper=this.context.getBean("frameworkComponentWrapper")?this.context.getBean("frameworkComponentWrapper"):{};var l=this.initialiseComponent(j[0],k,g);if(null==l)return i.Promise.resolve(j[0]);var m=l;return m.map(function(a){return j[0]})},a.prototype.createInternalAgGridComponent=function(a,b,c){var d=new a;return this.initialiseComponent(d,b,c),d},a.prototype.newAgGridComponent=function(a,b,c,d,e){void 0===e&&(e=!0);var g=this.getComponentToUse(a,b,c,d);if(!g||!g.component)return e&&console.error("Error creating component "+b+"=>"+d),null;if(g.type===f.AG_GRID)return[new g.component,g.dynamicParams];var h=g.component,i=this.componentMetadataProvider.retrieve(b);return[this.frameworkComponentWrapper.wrap(h,i.mandatoryMethodList,i.optionalMethodList,d),g.dynamicParams]},a.prototype.initialiseComponent=function(a,b,c){return this.context.wireBean(a),null==c?a.init(b):a.init(c(b,a))},d([g.Autowired("gridOptions"),e("design:type",Object)],a.prototype,"gridOptions",void 0),d([g.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([g.Autowired("context"),e("design:type",g.Context)],a.prototype,"context",void 0),d([g.Autowired("agComponentUtils"),e("design:type",k.AgComponentUtils)],a.prototype,"agComponentUtils",void 0),d([g.Autowired("componentMetadataProvider"),e("design:type",l.ComponentMetadataProvider)],a.prototype,"componentMetadataProvider",void 0),d([g.Autowired("componentProvider"),e("design:type",j.ComponentProvider)],a.prototype,"componentProvider",void 0),d([g.Optional("frameworkComponentWrapper"),e("design:type",Object)],a.prototype,"frameworkComponentWrapper",void 0),a=d([g.Bean("componentResolver")],a)}();b.ComponentResolver=n},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(7),h=c(4),i=c(6),j=c(2),k=c(19),l=c(20),m=c(49),n=c(16),o=c(3),p=c(53),q=c(22),r=c(54),s=c(55),t=c(35),u=c(56),v=c(43),w=c(73),x=c(45),y=c(29),z=c(37),A=c(27),B=c(15),C=c(24),D=c(18),E=c(57),F=function(){function a(){}return a.prototype.registerGridComp=function(a){this.gridPanel=a},a.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},d([f.Autowired("paginationProxy"),e("design:type",y.PaginationProxy)],a.prototype,"paginationProxy",void 0),d([f.Autowired("context"),e("design:type",f.Context)],a.prototype,"context",void 0),d([f.Autowired("columnApi"),e("design:type",g.ColumnApi)],a.prototype,"columnApi",void 0),d([f.Autowired("gridApi"),e("design:type",i.GridApi)],a.prototype,"gridApi",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",j.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("expressionService"),e("design:type",k.ExpressionService)],a.prototype,"expressionService",void 0),d([f.Autowired("rowRenderer"),e("design:type",l.RowRenderer)],a.prototype,"rowRenderer",void 0),d([f.Autowired("$compile"),e("design:type",Object)],a.prototype,"$compile",void 0),d([f.Autowired("templateService"),e("design:type",m.TemplateService)],a.prototype,"templateService",void 0),d([f.Autowired("valueService"),e("design:type",n.ValueService)],a.prototype,"valueService",void 0),d([f.Autowired("eventService"),e("design:type",o.EventService)],a.prototype,"eventService",void 0),d([f.Autowired("columnController"),e("design:type",h.ColumnController)],a.prototype,"columnController",void 0),d([f.Autowired("columnAnimationService"),e("design:type",p.ColumnAnimationService)],a.prototype,"columnAnimationService",void 0),d([f.Optional("rangeController"),e("design:type",Object)],a.prototype,"rangeController",void 0),d([f.Autowired("focusedCellController"),e("design:type",q.FocusedCellController)],a.prototype,"focusedCellController",void 0),d([f.Optional("contextMenuFactory"),e("design:type",Object)],a.prototype,"contextMenuFactory",void 0),d([f.Autowired("cellEditorFactory"),e("design:type",r.CellEditorFactory)],a.prototype,"cellEditorFactory",void 0),d([f.Autowired("cellRendererFactory"),e("design:type",s.CellRendererFactory)],a.prototype,"cellRendererFactory",void 0),d([f.Autowired("popupService"),e("design:type",t.PopupService)],a.prototype,"popupService",void 0),d([f.Autowired("cellRendererService"),e("design:type",u.CellRendererService)],a.prototype,"cellRendererService",void 0),d([f.Autowired("valueFormatterService"),e("design:type",v.ValueFormatterService)],a.prototype,"valueFormatterService",void 0),d([f.Autowired("stylingService"),e("design:type",w.StylingService)],a.prototype,"stylingService",void 0),d([f.Autowired("columnHoverService"),e("design:type",x.ColumnHoverService)],a.prototype,"columnHoverService",void 0),d([f.Autowired("enterprise"),e("design:type",Boolean)],a.prototype,"enterprise",void 0),d([f.Autowired("componentResolver"),e("design:type",A.ComponentResolver)],a.prototype,"componentResolver",void 0),d([f.Autowired("animationFrameService"),e("design:type",z.AnimationFrameService)],a.prototype,"taskQueue",void 0),d([f.Autowired("dragAndDropService"),e("design:type",B.DragAndDropService)],a.prototype,"dragAndDropService",void 0),d([f.Autowired("sortController"),e("design:type",C.SortController)],a.prototype,"sortController",void 0),d([f.Autowired("filterManager"),e("design:type",D.FilterManager)],a.prototype,"filterManager",void 0),d([f.Autowired("heightScaler"),e("design:type",E.HeightScaler)],a.prototype,"heightScaler",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"postConstruct",null),a=d([f.Bean("beans")],a)}();b.Beans=F},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(13),h=c(3),i=c(5),j=c(1),k=c(0),l=c(2),m=c(36),n=c(17),o=c(7),p=c(6),q=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.registerGridComp=function(a){this.gridPanel=a,this.addDestroyableEventListener(this.eventService,i.Events.EVENT_BODY_HEIGHT_CHANGED,this.onBodyHeightChanged.bind(this)),this.addDestroyableEventListener(this.eventService,i.Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.checkPageSize()},b.prototype.notActive=function(){return!this.gridOptionsWrapper.isPaginationAutoPageSize()},b.prototype.onScrollVisibilityChanged=function(){this.checkPageSize()},b.prototype.onBodyHeightChanged=function(){this.checkPageSize()},b.prototype.checkPageSize=function(){if(!this.notActive()){var a=this.gridOptionsWrapper.getRowHeightAsNumber(),b=this.gridPanel.getBodyHeight();if(this.scrollVisibleService.isBodyHorizontalScrollShowing()&&(b-=this.gridOptionsWrapper.getScrollbarWidth()),b>0){var c=Math.floor(b/a);this.gridOptionsWrapper.setProperty("paginationPageSize",c)}}},e([k.Autowired("eventService"),f("design:type",h.EventService)],b.prototype,"eventService",void 0),e([k.Autowired("gridOptionsWrapper"),f("design:type",l.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([k.Autowired("scrollVisibleService"),f("design:type",m.ScrollVisibleService)],b.prototype,"scrollVisibleService",void 0),b=e([k.Bean("paginationAutoPageSizeService")],b)}(g.BeanStub);b.PaginationAutoPageSizeService=q;var r=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.currentPage=0,b.topRowIndex=0,b.bottomRowIndex=0,b.pixelOffset=0,b}return d(b,a),b.prototype.postConstruct=function(){this.active=this.gridOptionsWrapper.isPagination(),this.addDestroyableEventListener(this.eventService,i.Events.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,"paginationPageSize",this.onModelUpdated.bind(this)),this.onModelUpdated()},b.prototype.isLastRowFound=function(){return this.rowModel.isLastRowFound()},b.prototype.onModelUpdated=function(a){this.setIndexesAndBounds();var b={type:i.Events.EVENT_PAGINATION_CHANGED,animate:!!a&&a.animate,newData:!!a&&a.newData,newPage:!!a&&a.newPage,keepRenderedRows:!!a&&a.keepRenderedRows,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(b)},b.prototype.goToPage=function(a){if(this.active&&this.currentPage!==a){this.currentPage=a;var b={type:i.Events.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0,api:this.gridApi,columnApi:this.columnApi};this.onModelUpdated(b)}},b.prototype.getPixelOffset=function(){return this.pixelOffset},b.prototype.getRow=function(a){return this.rowModel.getRow(a)},b.prototype.getRowNode=function(a){return this.rowModel.getRowNode(a)},b.prototype.getRowIndexAtPixel=function(a){return this.rowModel.getRowIndexAtPixel(a)},b.prototype.getCurrentPageHeight=function(){return j._.missing(this.topRowBounds)||j._.missing(this.bottomRowBounds)?0:this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop},b.prototype.isRowPresent=function(a){if(!this.rowModel.isRowPresent(a))return!1;var b=a.rowIndex>=this.topRowIndex&&a.rowIndex<=this.bottomRowIndex;return b},b.prototype.isEmpty=function(){return this.rowModel.isEmpty()},b.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},b.prototype.getNodesInRangeForSelection=function(a,b){return this.rowModel.getNodesInRangeForSelection(a,b)},b.prototype.forEachNode=function(a){return this.rowModel.forEachNode(a)},b.prototype.getType=function(){return this.rowModel.getType()},b.prototype.getRowBounds=function(a){return this.rowModel.getRowBounds(a)},b.prototype.getPageFirstRow=function(){return this.pageSize*this.currentPage},b.prototype.getPageLastRow=function(){var a=this.pageSize*(this.currentPage+1)-1,b=this.rowModel.getPageLastRow();return b>a?a:b},b.prototype.getRowCount=function(){return this.rowModel.getRowCount()},b.prototype.goToPageWithIndex=function(a){if(this.active){var b=Math.floor(a/this.pageSize);this.goToPage(b)}},b.prototype.getTotalRowCount=function(){return this.rowModel.getPageLastRow()+1},b.prototype.isLastPageFound=function(){return this.rowModel.isLastRowFound()},b.prototype.getCurrentPage=function(){return this.currentPage},b.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},b.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},b.prototype.goToFirstPage=function(){this.goToPage(0)},b.prototype.goToLastPage=function(){var a=this.rowModel.getPageLastRow()+1,b=Math.floor(a/this.pageSize);this.goToPage(b)},b.prototype.getPageSize=function(){return this.pageSize},b.prototype.getTotalPages=function(){return this.totalPages},b.prototype.setPageSize=function(){this.pageSize=this.gridOptionsWrapper.getPaginationPageSize(),this.pageSize>=1||(this.pageSize=100)},b.prototype.setIndexesAndBounds=function(){if(this.active){this.setPageSize();var a=this.getTotalRowCount();this.totalPages=Math.floor((a-1)/this.pageSize)+1,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!j._.isNumeric(this.currentPage)||this.currentPage<0)&&(this.currentPage=0),this.topRowIndex=this.pageSize*this.currentPage,this.bottomRowIndex=this.pageSize*(this.currentPage+1)-1;var b=this.rowModel.getPageLastRow();this.bottomRowIndex>b&&(this.bottomRowIndex=b)}else this.pageSize=this.rowModel.getPageLastRow()+1,this.totalPages=1,this.currentPage=0,this.topRowIndex=0,this.bottomRowIndex=this.rowModel.getPageLastRow();this.topRowBounds=this.rowModel.getRowBounds(this.topRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomRowIndex),this.pixelOffset=j._.exists(this.topRowBounds)?this.topRowBounds.rowTop:0},e([k.Autowired("rowModel"),f("design:type",Object)],b.prototype,"rowModel",void 0),e([k.Autowired("eventService"),f("design:type",h.EventService)],b.prototype,"eventService",void 0),e([k.Autowired("gridOptionsWrapper"),f("design:type",l.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([k.Autowired("selectionController"),f("design:type",n.SelectionController)],b.prototype,"selectionController",void 0),e([k.Autowired("columnApi"),f("design:type",o.ColumnApi)],b.prototype,"columnApi",void 0),e([k.Autowired("gridApi"),f("design:type",p.GridApi)],b.prototype,"gridApi",void 0),e([k.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b=e([k.Bean("paginationProxy")],b)}(g.BeanStub);b.PaginationProxy=r},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(2),g=c(14),h=c(0),i=c(3),j=c(0),k=c(5),l=c(0),m=c(9),n=c(1),o=c(7),p=c(6),q=function(){function a(){}return a.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsWrapper.getPinnedTopRowData()),this.setPinnedBottomRowData(this.gridOptionsWrapper.getPinnedBottomRowData())},a.prototype.isEmpty=function(a){var b=a===m.Constants.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;return n.Utils.missingOrEmpty(b)},a.prototype.isRowsToRender=function(a){return!this.isEmpty(a)},a.prototype.getRowAtPixel=function(a,b){var c=b===m.Constants.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;if(n.Utils.missingOrEmpty(c))return 0;for(var d=0;d<c.length;d++){var e=c[d],f=e.rowTop+e.rowHeight-1;if(f>=a)return d}return c.length-1},a.prototype.setPinnedTopRowData=function(a){this.pinnedTopRows=this.createNodesFromData(a,!0);var b={type:k.Events.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(b)},a.prototype.setPinnedBottomRowData=function(a){this.pinnedBottomRows=this.createNodesFromData(a,!1);var b={type:k.Events.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(b)},a.prototype.createNodesFromData=function(a,b){var c=this,d=[];if(a){var e=0;a.forEach(function(a,f){var h=new g.RowNode;c.context.wireBean(h),h.data=a,h.rowPinned=b?m.Constants.PINNED_TOP:m.Constants.PINNED_BOTTOM,h.setRowTop(e),h.setRowHeight(c.gridOptionsWrapper.getRowHeightForNode(h)),h.setRowIndex(f),e+=h.rowHeight,d.push(h)})}return d},a.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},a.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},a.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},a.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},a.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},a.prototype.getPinnedTopRow=function(a){return this.pinnedTopRows[a]},a.prototype.getPinnedBottomRow=function(a){return this.pinnedBottomRows[a]},a.prototype.forEachPinnedTopRow=function(a){n.Utils.missingOrEmpty(this.pinnedTopRows)||this.pinnedTopRows.forEach(a)},a.prototype.forEachPinnedBottomRow=function(a){n.Utils.missingOrEmpty(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(a)},a.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},a.prototype.getTotalHeight=function(a){if(a&&0!==a.length){var b=a[a.length-1];return b.rowTop+b.rowHeight}return 0},d([j.Autowired("gridOptionsWrapper"),e("design:type",f.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([j.Autowired("eventService"),e("design:type",i.EventService)],a.prototype,"eventService",void 0),
d([j.Autowired("context"),e("design:type",h.Context)],a.prototype,"context",void 0),d([j.Autowired("columnApi"),e("design:type",o.ColumnApi)],a.prototype,"columnApi",void 0),d([j.Autowired("gridApi"),e("design:type",p.GridApi)],a.prototype,"gridApi",void 0),d([l.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([h.Bean("pinnedRowModel")],a)}();b.PinnedRowModel=q},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(2),g=c(26),h=c(32),i=c(0),j=c(0),k=function(){function a(){}return a.prototype.calculateColInitialWidth=function(a){return a.width?a.width<this.gridOptionsWrapper.getMinColWidth()?this.gridOptionsWrapper.getMinColWidth():a.width:this.gridOptionsWrapper.getColWidth()},a.prototype.getOriginalPathForColumn=function(a,b){function c(b,f){for(var g=0;g<b.length;g++){if(e)return;var i=b[g];if(i instanceof h.OriginalColumnGroup){var j=i;c(j.getChildren(),f+1),d[f]=i}else i===a&&(e=!0)}}var d=[],e=!1;return c(b,0),e?d:null},a.prototype.depthFirstOriginalTreeSearch=function(a,b){var c=this;a&&a.forEach(function(a){a instanceof h.OriginalColumnGroup&&c.depthFirstOriginalTreeSearch(a.getChildren(),b),b(a)})},a.prototype.depthFirstAllColumnTreeSearch=function(a,b){var c=this;a&&a.forEach(function(a){a instanceof g.ColumnGroup&&c.depthFirstAllColumnTreeSearch(a.getChildren(),b),b(a)})},a.prototype.depthFirstDisplayedColumnTreeSearch=function(a,b){var c=this;a&&a.forEach(function(a){a instanceof g.ColumnGroup&&c.depthFirstDisplayedColumnTreeSearch(a.getDisplayedChildren(),b),b(a)})},d([j.Autowired("gridOptionsWrapper"),e("design:type",f.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([i.Bean("columnUtils")],a)}();b.ColumnUtils=k},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(26),g=c(10),h=c(3),i=c(0),j=c(7),k=c(6),l=function(){function a(a,b,c,d){this.localEventService=new h.EventService,this.expandable=!1,this.colGroupDef=a,this.groupId=b,this.expanded=a&&!!a.openByDefault,this.padding=c,this.level=d}return a.prototype.getLevel=function(){return this.level},a.prototype.isVisible=function(){return!!this.children&&this.children.some(function(a){return a.isVisible()})},a.prototype.isPadding=function(){return this.padding},a.prototype.setExpanded=function(b){this.expanded=b;var c={type:a.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(c)},a.prototype.isExpandable=function(){return this.expandable},a.prototype.isExpanded=function(){return this.expanded},a.prototype.getGroupId=function(){return this.groupId},a.prototype.getId=function(){return this.getGroupId()},a.prototype.setChildren=function(a){this.children=a},a.prototype.getChildren=function(){return this.children},a.prototype.getColGroupDef=function(){return this.colGroupDef},a.prototype.getLeafColumns=function(){var a=[];return this.addLeafColumns(a),a},a.prototype.addLeafColumns=function(b){this.children&&this.children.forEach(function(c){c instanceof g.Column?b.push(c):c instanceof a&&c.addLeafColumns(b)})},a.prototype.getColumnGroupShow=function(){return this.padding?this.children[0].getColumnGroupShow():this.colGroupDef.columnGroupShow},a.prototype.setupExpandable=function(){var a=this;this.setExpandable(),this.getLeafColumns().forEach(function(b){return b.addEventListener(g.Column.EVENT_VISIBLE_CHANGED,a.onColumnVisibilityChanged.bind(a))})},a.prototype.setExpandable=function(){for(var b=!1,c=!1,d=!1,e=0,g=this.children.length;e<g;e++){var h=this.children[e];if(h.isVisible()){var i=h.getColumnGroupShow();i===f.ColumnGroup.HEADER_GROUP_SHOW_OPEN?(b=!0,d=!0):i===f.ColumnGroup.HEADER_GROUP_SHOW_CLOSED?(c=!0,d=!0):(b=!0,c=!0)}}var j=b&&c&&d;if(this.expandable!==j){this.expandable=j;var k={type:a.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(k)}},a.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},a.prototype.addEventListener=function(a,b){this.localEventService.addEventListener(a,b)},a.prototype.removeEventListener=function(a,b){this.localEventService.removeEventListener(a,b)},a.EVENT_EXPANDED_CHANGED="expandedChanged",a.EVENT_EXPANDABLE_CHANGED="expandableChanged",d([i.Autowired("columnApi"),e("design:type",j.ColumnApi)],a.prototype,"columnApi",void 0),d([i.Autowired("gridApi"),e("design:type",k.GridApi)],a.prototype,"gridApi",void 0),a}();b.OriginalColumnGroup=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(2),h=function(){function a(){this.cacheVersion=0}return a.prototype.init=function(){this.active=this.gridOptionsWrapper.isValueCache(),this.neverExpires=this.gridOptionsWrapper.isValueCacheNeverExpires()},a.prototype.onDataChanged=function(){this.neverExpires||this.expire()},a.prototype.expire=function(){this.cacheVersion++},a.prototype.setValue=function(a,b,c){this.active&&(a.__cacheVersion!==this.cacheVersion&&(a.__cacheVersion=this.cacheVersion,a.__cacheData={}),a.__cacheData[b]=c)},a.prototype.getValue=function(a,b){var c=this.active&&a.__cacheVersion===this.cacheVersion&&void 0!==a.__cacheData[b];return c?a.__cacheData[b]:void 0},d([f.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([f.Bean("valueCache")],a)}();b.ValueCache=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(1),f=c(10),g=c(14),h=c(9),i=c(5),j=c(23),k=c(8),l=c(65),m=c(121),n=function(a){function b(b,c,d,e,f,g){var h=a.call(this)||this;return h.editingCell=!1,h.cellEditorVersion=0,h.cellRendererVersion=0,h.scope=b,h.beans=c,h.column=d,h.rowNode=e,h.rowComp=f,h.autoHeightCell=g,h.createGridCellVo(),h.rangeSelectionEnabled=c.enterprise&&c.gridOptionsWrapper.isEnableRangeSelection(),h.cellFocused=h.beans.focusedCellController.isCellFocused(h.gridCell),h.firstRightPinned=h.column.isFirstRightPinned(),h.lastLeftPinned=h.column.isLastLeftPinned(),h.rangeSelectionEnabled&&(h.rangeCount=h.beans.rangeController.getCellRangeCount(h.gridCell)),h.getValueAndFormat(),h.setUsingWrapper(),h.chooseCellRenderer(),h.setupColSpan(),h.rowSpan=h.column.getRowSpan(h.rowNode),h}return d(b,a),b.prototype.getCreateTemplate=function(){var a=[],b=this.column,c=this.getCellWidth(),d=b.getLeft(),f=this.getInitialValueToRender(),g=e._.get(this.column,"colDef.template",null)?f:e._.escape(f);this.tooltip=this.getToolTip();var h,i,j=e._.escape(this.tooltip),k=e._.escape(b.getId()),l=this.preProcessStylesFromColDef(),m=this.getInitialCssClasses(),n=this.getStylesForRowSpanning();return this.usingWrapper&&(h='<span ref="eCellWrapper" class="ag-cell-wrapper"><span ref="eCellValue" class="ag-cell-value">',i="</span></span>"),a.push("<div"),a.push(' tabindex="-1"'),a.push(' role="gridcell"'),a.push(' comp-id="'+this.getCompId()+'" '),a.push(' col-id="'+k+'"'),a.push(' class="'+m.join(" ")+'"'),a.push(j?' title="'+j+'"':""),a.push(' style="width: '+c+"px; left: "+d+"px; "+l+" "+n+'" >'),a.push(h),a.push(g),a.push(i),a.push("</div>"),a.join("")},b.prototype.getStylesForRowSpanning=function(){if(1===this.rowSpan)return"";var a=this.beans.gridOptionsWrapper.getRowHeightAsNumber(),b=a*this.rowSpan;return"height: "+b+"px; z-index: 1;"},b.prototype.afterAttached=function(){var a='[comp-id="'+this.getCompId()+'"]',b=this.eParentRow.querySelector(a);this.setGui(b),this.addDomData(),this.populateTemplate(),this.attachCellRenderer(),this.angular1Compile(),this.addDestroyableEventListener(this.beans.eventService,i.Events.EVENT_CELL_FOCUSED,this.onCellFocused.bind(this)),this.addDestroyableEventListener(this.beans.eventService,i.Events.EVENT_FLASH_CELLS,this.onFlashCells.bind(this)),this.addDestroyableEventListener(this.beans.eventService,i.Events.EVENT_COLUMN_HOVER_CHANGED,this.onColumnHover.bind(this)),this.addDestroyableEventListener(this.rowNode,g.RowNode.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,g.RowNode.EVENT_CELL_CHANGED,this.onCellChanged.bind(this)),this.addDestroyableEventListener(this.column,f.Column.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.addDestroyableEventListener(this.column,f.Column.EVENT_WIDTH_CHANGED,this.onWidthChanged.bind(this)),this.addDestroyableEventListener(this.column,f.Column.EVENT_FIRST_RIGHT_PINNED_CHANGED,this.onFirstRightPinnedChanged.bind(this)),this.addDestroyableEventListener(this.column,f.Column.EVENT_LAST_LEFT_PINNED_CHANGED,this.onLastLeftPinnedChanged.bind(this)),this.rangeSelectionEnabled&&this.addDestroyableEventListener(this.beans.eventService,i.Events.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this))},b.prototype.onColumnHover=function(){var a=this.beans.columnHoverService.isHovered(this.column);e._.addOrRemoveCssClass(this.getGui(),"ag-column-hover",a)},b.prototype.onCellChanged=function(a){var b=a.column===this.column;b&&this.refreshCell({})},b.prototype.getCellLeft=function(){var a;return a=this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?this.colsSpanning[this.colsSpanning.length-1]:this.column,a.getLeft()},b.prototype.getCellWidth=function(){if(this.colsSpanning){var a=0;return this.colsSpanning.forEach(function(b){return a+=b.getActualWidth()}),a}return this.column.getActualWidth()},b.prototype.onFlashCells=function(a){var b=this.gridCell.createId(),c=a.cells[b];c&&this.animateCell("highlight")},b.prototype.setupColSpan=function(){e._.missing(this.column.getColDef().colSpan)||(this.addDestroyableEventListener(this.beans.eventService,i.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addDestroyableEventListener(this.beans.eventService,i.Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)),this.colsSpanning=this.getColSpanningList())},b.prototype.getColSpanningList=function(){var a=this.column.getColSpan(this.rowNode),b=[];if(1===a)b.push(this.column);else for(var c=this.column,d=this.column.getPinned(),f=0;f<a&&(b.push(c),c=this.beans.columnController.getDisplayedColAfter(c),!e._.missing(c))&&d===c.getPinned();f++);return b},b.prototype.onDisplayColumnsChanged=function(){var a=this.getColSpanningList();e._.compareArrays(this.colsSpanning,a)||(this.colsSpanning=a,this.onWidthChanged(),this.onLeftChanged())},b.prototype.getInitialCssClasses=function(){var a=["ag-cell","ag-cell-not-inline-editing"];this.autoHeightCell||a.push("ag-cell-with-height");var b=!this.beans.gridOptionsWrapper.isSuppressCellSelection();return b?a.push(this.cellFocused?"ag-cell-focus":"ag-cell-no-focus"):a.push("ag-cell-no-focus"),this.firstRightPinned&&a.push("ag-cell-first-right-pinned"),this.lastLeftPinned&&a.push("ag-cell-last-left-pinned"),this.beans.columnHoverService.isHovered(this.column)&&a.push("ag-column-hover"),e._.pushAll(a,this.preProcessClassesFromColDef()),e._.pushAll(a,this.preProcessCellClassRules()),e._.pushAll(a,this.getRangeClasses()),this.usingWrapper||a.push("ag-cell-value"),a},b.prototype.getInitialValueToRender=function(){if(this.usingCellRenderer)return"string"==typeof this.cellRendererGui?this.cellRendererGui:"";var a=this.column.getColDef();if(a.template)return a.template;if(a.templateUrl){var b=this.beans.templateService.getTemplate(a.templateUrl,this.refreshCell.bind(this,!0));return b?b:""}return this.getValueToUse()},b.prototype.getRenderedRow=function(){return this.rowComp},b.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},b.prototype.getCellRenderer=function(){return this.cellRenderer},b.prototype.getCellEditor=function(){return this.cellEditor},b.prototype.refreshCell=function(a){if(!this.editingCell){var b=a&&a.newData,c=a&&a.suppressFlash||this.column.getColDef().suppressCellFlash,d=a&&a.forceRefresh,e=this.value;this.getValueAndFormat();var f=!this.valuesAreEqual(e,this.value),g=d||f;if(g){var h=void 0;if(h=!b&&!c&&this.attemptCellRendererRefresh(),h||this.replaceContentsAfterRefresh(),!c){var i=this.beans.gridOptionsWrapper.isEnableCellChangeFlash()||this.column.getColDef().enableCellChangeFlash;i&&this.flashCell()}this.postProcessStylesFromColDef(),this.postProcessClassesFromColDef()}this.refreshToolTip(),this.postProcessCellClassRules()}},b.prototype.flashCell=function(){this.animateCell("data-changed")},b.prototype.animateCell=function(a){var b="ag-cell-"+a,c="ag-cell-"+a+"-animation",d=this.getGui();e._.addCssClass(d,b),e._.removeCssClass(d,c),setTimeout(function(){e._.removeCssClass(d,b),e._.addCssClass(d,c),setTimeout(function(){e._.removeCssClass(d,c)},1e3)},500)},b.prototype.replaceContentsAfterRefresh=function(){e._.removeAllChildren(this.eParentOfValue),this.cellRenderer&&this.cellRenderer.destroy&&this.cellRenderer.destroy(),this.cellRenderer=null,this.cellRendererGui=null,this.putDataIntoCellAfterRefresh(),this.angular1Compile()},b.prototype.angular1Compile=function(){if(this.beans.gridOptionsWrapper.isAngularCompileRows()){var a=this.getGui(),b=this.beans.$compile(a)(this.scope);this.addDestroyFunc(function(){b.remove()})}},b.prototype.postProcessStylesFromColDef=function(){var a=this.processStylesFromColDef();a&&e._.addStylesToElement(this.getGui(),a)},b.prototype.preProcessStylesFromColDef=function(){var a=this.processStylesFromColDef();return e._.cssStyleObjectToMarkup(a)},b.prototype.processStylesFromColDef=function(){var a=this.column.getColDef();if(a.cellStyle){var b=void 0;if("function"==typeof a.cellStyle){var c={value:this.value,data:this.rowNode.data,node:this.rowNode,colDef:a,column:this.column,$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi()},d=a.cellStyle;b=d(c)}else b=a.cellStyle;return b}},b.prototype.postProcessClassesFromColDef=function(){var a=this;this.processClassesFromColDef(function(b){return e._.addCssClass(a.getGui(),b)})},b.prototype.preProcessClassesFromColDef=function(){var a=[];return this.processClassesFromColDef(function(b){return a.push(b)}),a},b.prototype.processClassesFromColDef=function(a){this.beans.stylingService.processStaticCellClasses(this.column.getColDef(),{value:this.value,data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),rowIndex:this.rowNode.rowIndex,$scope:this.scope,api:this.beans.gridOptionsWrapper.getApi(),context:this.beans.gridOptionsWrapper.getContext()},a)},b.prototype.putDataIntoCellAfterRefresh=function(){var a=this.column.getColDef();if(a.template)this.eParentOfValue.innerHTML=a.template;else if(a.templateUrl){var b=this.beans.templateService.getTemplate(a.templateUrl,this.refreshCell.bind(this,!0));b&&(this.eParentOfValue.innerHTML=b)}else if(this.usingCellRenderer)this.attachCellRenderer();else{var c=this.getValueToUse();null!==c&&void 0!==c&&(this.eParentOfValue.innerText=c)}},b.prototype.attemptCellRendererRefresh=function(){if(e._.missing(this.cellRenderer)||e._.missing(this.cellRenderer.refresh))return!1;var a=this.createCellRendererParams(),b=this.cellRenderer.refresh(a);return b===!0||void 0===b},b.prototype.refreshToolTip=function(){var a=this.getToolTip();if(this.tooltip!==a)if(this.tooltip=a,e._.exists(a)){var b=e._.escape(this.tooltip);this.eParentOfValue.setAttribute("title",b)}else this.eParentOfValue.removeAttribute("title")},b.prototype.valuesAreEqual=function(a,b){var c=this.column.getColDef(),d=c?c.equals:null;return d?d(a,b):a===b},b.prototype.getToolTip=function(){var a=this.column.getColDef(),b=this.rowNode.data;return a.tooltipField&&e._.exists(b)?e._.getValueUsingField(b,a.tooltipField,this.column.isTooltipFieldContainsDots()):a.tooltip?a.tooltip({value:this.value,valueFormatted:this.valueFormatted,data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),api:this.beans.gridOptionsWrapper.getApi(),$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext(),rowIndex:this.gridCell.rowIndex}):null},b.prototype.processCellClassRules=function(a,b){this.beans.stylingService.processClassRules(this.column.getColDef().cellClassRules,{value:this.value,data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),rowIndex:this.gridCell.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext()},a,b)},b.prototype.postProcessCellClassRules=function(){var a=this;this.processCellClassRules(function(b){e._.addCssClass(a.getGui(),b)},function(b){e._.removeCssClass(a.getGui(),b)})},b.prototype.preProcessCellClassRules=function(){var a=[];return this.processCellClassRules(function(b){a.push(b)},function(a){}),a},b.prototype.setUsingWrapper=function(){var a=this.column.getColDef();if(this.rowNode.rowPinned)return this.usingWrapper=!1,this.includeSelectionComponent=!1,void(this.includeRowDraggingComponent=!1);var b="function"==typeof a.checkboxSelection,c="function"==typeof a.rowDrag;this.includeSelectionComponent=b||a.checkboxSelection===!0,this.includeRowDraggingComponent=c||a.rowDrag===!0,this.usingWrapper=this.includeRowDraggingComponent||this.includeSelectionComponent},b.prototype.chooseCellRenderer=function(){var a=this.column.getColDef();if(a.template||a.templateUrl)return void(this.usingCellRenderer=!1);var b=this.createCellRendererParams(),c=this.beans.componentResolver.getComponentToUse(a,"cellRenderer",b,null),d=this.beans.componentResolver.getComponentToUse(a,"pinnedRowCellRenderer",b,null);d&&this.rowNode.rowPinned?(this.cellRendererType="pinnedRowCellRenderer",this.usingCellRenderer=!0):c?(this.cellRendererType="cellRenderer",this.usingCellRenderer=!0):this.usingCellRenderer=!1},b.prototype.createCellRendererInstance=function(){var a=this.createCellRendererParams();this.cellRendererVersion++;var b=this.afterCellRendererCreated.bind(this,this.cellRendererVersion);this.beans.componentResolver.createAgGridComponent(this.column.getColDef(),a,this.cellRendererType,a,null).then(b)},b.prototype.afterCellRendererCreated=function(a,b){return a!==this.cellRendererVersion?void(b.destroy&&b.destroy()):(this.cellRenderer=b,this.cellRendererGui=this.cellRenderer.getGui(),void(e._.missing(this.cellRendererGui)||this.editingCell||this.eParentOfValue.appendChild(this.cellRendererGui)))},b.prototype.attachCellRenderer=function(){this.usingCellRenderer&&this.createCellRendererInstance()},b.prototype.createCellRendererParams=function(){var a=this,b={value:this.value,valueFormatted:this.valueFormatted,getValue:this.getValue.bind(this),setValue:function(b){a.beans.valueService.setValue(a.rowNode,a.column,b)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),column:this.column,$scope:this.scope,rowIndex:this.gridCell.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.eParentOfValue,addRowCompListener:this.rowComp?this.rowComp.addEventListener.bind(this.rowComp):null,addRenderedRowListener:function(b,c){console.warn("ag-Grid: since ag-Grid .v11, params.addRenderedRowListener() is now params.addRowCompListener()"),a.rowComp&&a.rowComp.addEventListener(b,c)}};return b},b.prototype.formatValue=function(a){var b=this.beans.valueFormatterService.formatValue(this.column,this.rowNode,this.scope,a),c=null!==b&&void 0!==b;return c?b:a},b.prototype.getValueToUse=function(){var a=null!==this.valueFormatted&&void 0!==this.valueFormatted;return a?this.valueFormatted:this.value},b.prototype.getValueAndFormat=function(){this.value=this.getValue(),this.valueFormatted=this.beans.valueFormatterService.formatValue(this.column,this.rowNode,this.scope,this.value)},b.prototype.getValue=function(){var a=this.rowNode.leafGroup&&this.beans.columnController.isPivotMode(),b=this.rowNode.group&&this.rowNode.expanded&&!this.rowNode.footer&&!a;return b&&this.beans.gridOptionsWrapper.isGroupIncludeFooter()?this.beans.valueService.getValue(this.column,this.rowNode,!1,!0):this.beans.valueService.getValue(this.column,this.rowNode)},b.prototype.onMouseEvent=function(a,b){if(!e._.isStopPropagationForAgGrid(b))switch(a){case"click":this.onCellClicked(b);break;case"mousedown":this.onMouseDown(b);break;case"dblclick":this.onCellDoubleClicked(b);break;case"mouseout":this.onMouseOut(b);break;case"mouseover":this.onMouseOver(b)}},b.prototype.dispatchCellContextMenuEvent=function(a){var b=this.column.getColDef(),c=this.createEvent(a,i.Events.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(c),b.onCellContextMenu&&setTimeout(function(){return b.onCellContextMenu(c)},0)},b.prototype.createEvent=function(a,b){var c={node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:a,type:b,rowIndex:this.rowNode.rowIndex};return this.scope&&(c.$scope=this.scope),c},b.prototype.onMouseOut=function(a){var b=this.createEvent(a,i.Events.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(b),this.beans.columnHoverService.clearMouseOver()},b.prototype.onMouseOver=function(a){var b=this.createEvent(a,i.Events.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(b),this.beans.columnHoverService.setMouseOver([this.column])},b.prototype.onCellDoubleClicked=function(a){var b=this.column.getColDef(),c=this.createEvent(a,i.Events.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(c),"function"==typeof b.onCellDoubleClicked&&setTimeout(function(){return b.onCellDoubleClicked(c)},0);var d=!this.beans.gridOptionsWrapper.isSingleClickEdit()&&!this.beans.gridOptionsWrapper.isSuppressClickEdit();d&&this.startRowOrCellEdit()},b.prototype.startRowOrCellEdit=function(a,b){this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowComp.startRowEditing(a,b,this):this.startEditingIfEnabled(a,b,!0)},b.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},b.prototype.startEditingIfEnabled=function(a,b,c){if(void 0===a&&(a=null),void 0===b&&(b=null),void 0===c&&(c=!1),this.isCellEditable()&&!this.editingCell){this.editingCell=!0,this.cellEditorVersion++;var d=this.afterCellEditorCreated.bind(this,this.cellEditorVersion),f=this.createCellEditorParams(a,b,c);this.beans.cellEditorFactory.createCellEditor(this.column.getColDef(),f).then(d);var g=e._.missing(this.cellEditor);g&&c&&this.focusCell(!0)}},b.prototype.afterCellEditorCreated=function(a,b){var c=a!==this.cellEditorVersion;if(c||!this.editingCell)return void(b.destroy&&b.destroy());if(b.isCancelBeforeStart&&b.isCancelBeforeStart())return b.destroy&&b.destroy(),void(this.editingCell=!1);if(!b.getGui)return console.warn("ag-Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),b.render&&console.warn("ag-Grid: we found 'render' on the component, are you trying to set a React renderer but added it as colDef.cellEditor instead of colDef.cellEditorFmk?"),b.destroy&&b.destroy(),void(this.editingCell=!1);this.cellEditor=b,this.cellEditorInPopup=b.isPopup&&b.isPopup(),this.setInlineEditingClass(),this.cellEditorInPopup?this.addPopupCellEditor():this.addInCellEditor(),b.afterGuiAttached&&b.afterGuiAttached();var d=this.createEvent(null,i.Events.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(d)},b.prototype.addInCellEditor=function(){e._.removeAllChildren(this.getGui()),this.getGui().appendChild(this.cellEditor.getGui()),this.angular1Compile()},b.prototype.addPopupCellEditor=function(){var a=this,b=this.cellEditor.getGui();this.hideEditorPopup=this.beans.popupService.addAsModalPopup(b,!0,function(){a.onPopupEditorClosed()}),this.beans.popupService.positionPopupOverComponent({column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),ePopup:b,keepWithinBounds:!0}),this.angular1Compile()},b.prototype.onPopupEditorClosed=function(){this.editingCell&&(this.stopRowOrCellEdit(),this.beans.focusedCellController.isCellFocused(this.gridCell)&&this.focusCell(!0))},b.prototype.setInlineEditingClass=function(){var a=this.editingCell&&!this.cellEditorInPopup,b=this.editingCell&&this.cellEditorInPopup;e._.addOrRemoveCssClass(this.getGui(),"ag-cell-inline-editing",a),e._.addOrRemoveCssClass(this.getGui(),"ag-cell-not-inline-editing",!a),e._.addOrRemoveCssClass(this.getGui(),"ag-cell-popup-editing",b),e._.addOrRemoveCssClass(this.getGui().parentNode,"ag-row-inline-editing",a),e._.addOrRemoveCssClass(this.getGui().parentNode,"ag-row-not-inline-editing",!a)},b.prototype.createCellEditorParams=function(a,b,c){var d={value:this.getValue(),keyPress:a,charPress:b,column:this.column,rowIndex:this.gridCell.rowIndex,node:this.rowNode,api:this.beans.gridOptionsWrapper.getApi(),cellStartedEdit:c,columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),$scope:this.scope,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)};return d},b.prototype.stopEditingAndFocus=function(a){void 0===a&&(a=!1),this.stopRowOrCellEdit(),this.focusCell(!0),a||this.navigateAfterEdit()},b.prototype.parseValue=function(a){var b={node:this.rowNode,data:this.rowNode.data,oldValue:this.value,newValue:a,colDef:this.column.getColDef(),column:this.column,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()},c=this.column.getColDef().valueParser;return e._.exists(c)?this.beans.expressionService.evaluate(c,b):a},b.prototype.focusCell=function(a){void 0===a&&(a=!1),this.beans.focusedCellController.setFocusedCell(this.gridCell.rowIndex,this.column,this.rowNode.rowPinned,a)},b.prototype.setFocusInOnEditor=function(){this.editingCell&&(this.cellEditor&&this.cellEditor.focusIn?this.cellEditor.focusIn():this.focusCell(!0))},b.prototype.isEditing=function(){return this.editingCell},b.prototype.onKeyDown=function(a){var b=a.which||a.keyCode;if(!this.doesUserWantToCancelKeyboardEvent(a))switch(b){case h.Constants.KEY_ENTER:this.onEnterKeyDown();break;case h.Constants.KEY_F2:this.onF2KeyDown();break;case h.Constants.KEY_ESCAPE:this.onEscapeKeyDown();break;case h.Constants.KEY_TAB:this.onTabKeyDown(a);break;case h.Constants.KEY_BACKSPACE:case h.Constants.KEY_DELETE:this.onBackspaceOrDeleteKeyPressed(b);break;case h.Constants.KEY_DOWN:case h.Constants.KEY_UP:case h.Constants.KEY_RIGHT:case h.Constants.KEY_LEFT:this.onNavigationKeyPressed(a,b)}},b.prototype.doesUserWantToCancelKeyboardEvent=function(a){var b=this.column.getColDef().suppressKeyboardEvent;if(e._.missing(b))return!1;var c={event:a,editing:this.editingCell,column:this.column,api:this.beans.gridOptionsWrapper.getApi(),node:this.rowNode,data:this.rowNode.data,colDef:this.column.getColDef(),context:this.beans.gridOptionsWrapper.getContext(),columnApi:this.beans.gridOptionsWrapper.getColumnApi()};return b(c)},b.prototype.setFocusOutOnEditor=function(){this.editingCell&&this.cellEditor&&this.cellEditor.focusOut&&this.cellEditor.focusOut()},b.prototype.onNavigationKeyPressed=function(a,b){this.editingCell&&this.stopRowOrCellEdit(),a.shiftKey&&this.rangeSelectionEnabled?this.onShiftRangeSelect(b):this.beans.rowRenderer.navigateToNextCell(a,b,this.gridCell,!0),a.preventDefault()},b.prototype.onShiftRangeSelect=function(a){var b=this.beans.rangeController.extendRangeInDirection(this.gridCell,a);if(b){var c=this.beans.rangeController.getCellRanges();if(!e._.missing(c)&&1===c.length){var d=c[0].end;this.beans.rowRenderer.ensureCellVisible(d)}}},b.prototype.onTabKeyDown=function(a){this.beans.gridOptionsWrapper.isSuppressTabbing()||this.beans.rowRenderer.onTabKeyDown(this,a)},b.prototype.onBackspaceOrDeleteKeyPressed=function(a){this.editingCell||this.startRowOrCellEdit(a)},b.prototype.onEnterKeyDown=function(){this.editingCell||this.rowComp.isEditing()?this.stopEditingAndFocus():this.beans.gridOptionsWrapper.isEnterMovesDown()?this.beans.rowRenderer.navigateToNextCell(null,h.Constants.KEY_DOWN,this.gridCell,!1):this.startRowOrCellEdit(h.Constants.KEY_ENTER)},b.prototype.navigateAfterEdit=function(){var a=this.beans.gridOptionsWrapper.isFullRowEdit();if(!a){var b=this.beans.gridOptionsWrapper.isEnterMovesDownAfterEdit();b&&this.beans.rowRenderer.navigateToNextCell(null,h.Constants.KEY_DOWN,this.gridCell,!1)}},b.prototype.onF2KeyDown=function(){this.editingCell||this.startRowOrCellEdit(h.Constants.KEY_F2)},b.prototype.onEscapeKeyDown=function(){this.editingCell&&(this.stopRowOrCellEdit(!0),this.focusCell(!0))},b.prototype.onKeyPress=function(a){var b=e._.getTarget(a),c=b!==this.getGui();if(!c&&!this.editingCell){var d=String.fromCharCode(a.charCode);" "===d?this.onSpaceKeyPressed(a):e._.isEventFromPrintableCharacter(a)&&(this.startRowOrCellEdit(null,d),a.preventDefault())}},b.prototype.onSpaceKeyPressed=function(a){if(!this.editingCell&&this.beans.gridOptionsWrapper.isRowSelection()){var b=this.rowNode.isSelected();this.rowNode.setSelected(!b)}a.preventDefault()},b.prototype.onMouseDown=function(a){if(this.focusCell(!1),this.beans.rangeController){var b=this.gridCell;if(a.shiftKey)this.beans.rangeController.extendRangeToCell(b);else{var c=this.beans.rangeController.isCellInAnyRange(b);if(!c){var d=a.ctrlKey||a.metaKey;this.beans.rangeController.setRangeToCell(b,d)}}}var e=this.createEvent(a,i.Events.EVENT_CELL_MOUSE_DOWN);this.beans.eventService.dispatchEvent(e)},b.prototype.isDoubleClickOnIPad=function(){if(!e._.isUserAgentIPad())return!1;var a=(new Date).getTime(),b=a-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=a,b},b.prototype.onCellClicked=function(a){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(a),void a.preventDefault();var b=this.createEvent(a,i.Events.EVENT_CELL_CLICKED);this.beans.eventService.dispatchEvent(b);var c=this.column.getColDef();c.onCellClicked&&setTimeout(function(){return c.onCellClicked(b)},0);var d=this.beans.gridOptionsWrapper.isSingleClickEdit()&&!this.beans.gridOptionsWrapper.isSuppressClickEdit();
d&&this.startRowOrCellEdit(),this.doIeFocusHack()},b.prototype.doIeFocusHack=function(){(e._.isBrowserIE()||e._.isBrowserEdge())&&(e._.missing(document.activeElement)||document.activeElement===document.body)&&this.getGui().focus()},b.prototype.createGridCellVo=function(){var a={rowIndex:this.rowNode.rowIndex,floating:this.rowNode.rowPinned,column:this.column};this.gridCell=new j.GridCell(a)},b.prototype.getGridCell=function(){return this.gridCell},b.prototype.getParentRow=function(){return this.eParentRow},b.prototype.setParentRow=function(a){this.eParentRow=a},b.prototype.getColumn=function(){return this.column},b.prototype.detach=function(){this.eParentRow.removeChild(this.getGui())},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.cellEditor&&this.cellEditor.destroy&&(this.cellEditor.destroy(),this.cellEditor=null),this.cellRenderer&&this.cellRenderer.destroy&&(this.cellRenderer.destroy(),this.cellRenderer=null)},b.prototype.onLeftChanged=function(){var a=this.getCellLeft();this.getGui().style.left=a+"px"},b.prototype.onWidthChanged=function(){var a=this.getCellWidth();this.getGui().style.width=a+"px"},b.prototype.getRangeClasses=function(){var a=[];return this.rangeSelectionEnabled?(0!==this.rangeCount&&a.push("ag-cell-range-selected"),1===this.rangeCount&&a.push("ag-cell-range-selected-1"),2===this.rangeCount&&a.push("ag-cell-range-selected-2"),3===this.rangeCount&&a.push("ag-cell-range-selected-3"),this.rangeCount>=4&&a.push("ag-cell-range-selected-4"),a):a},b.prototype.onRowIndexChanged=function(){this.createGridCellVo(),this.onCellFocused(),this.onRangeSelectionChanged()},b.prototype.onRangeSelectionChanged=function(){if(this.beans.enterprise){var a=this.beans.rangeController.getCellRangeCount(this.gridCell),b=this.getGui();this.rangeCount!==a&&(e._.addOrRemoveCssClass(b,"ag-cell-range-selected",0!==a),e._.addOrRemoveCssClass(b,"ag-cell-range-selected-1",1===a),e._.addOrRemoveCssClass(b,"ag-cell-range-selected-2",2===a),e._.addOrRemoveCssClass(b,"ag-cell-range-selected-3",3===a),e._.addOrRemoveCssClass(b,"ag-cell-range-selected-4",a>=4),this.rangeCount=a)}},b.prototype.onFirstRightPinnedChanged=function(){var a=this.column.isFirstRightPinned();this.firstRightPinned!==a&&(this.firstRightPinned=a,e._.addOrRemoveCssClass(this.getGui(),"ag-cell-first-right-pinned",a))},b.prototype.onLastLeftPinnedChanged=function(){var a=this.column.isLastLeftPinned();this.lastLeftPinned!==a&&(this.lastLeftPinned=a,e._.addOrRemoveCssClass(this.getGui(),"ag-cell-last-left-pinned",a))},b.prototype.populateTemplate=function(){this.usingWrapper?(this.eParentOfValue=this.getRefElement("eCellValue"),this.eCellWrapper=this.getRefElement("eCellWrapper"),this.includeRowDraggingComponent&&this.addRowDragging(),this.includeSelectionComponent&&this.addSelectionCheckbox()):this.eParentOfValue=this.getGui()},b.prototype.addRowDragging=function(){if(!this.beans.gridOptionsWrapper.isRowModelDefault())return void e._.doOnce(function(){return console.warn("ag-Grid: row dragging is only allowed in the In Memory Row Model")},"CellComp.addRowDragging");if(this.beans.gridOptionsWrapper.isPagination())return void e._.doOnce(function(){return console.warn("ag-Grid: row dragging is not possible when doing pagination")},"CellComp.addRowDragging");var a=new m.RowDragComp(this.rowNode,this.column,this.getValueToUse(),this.beans);this.addFeature(this.beans.context,a),this.eCellWrapper.insertBefore(a.getGui(),this.eParentOfValue)},b.prototype.addSelectionCheckbox=function(){var a=new l.CheckboxSelectionComponent;this.beans.context.wireBean(a);var b=this.column.getColDef().checkboxSelection;b="function"==typeof b?b:null,a.init({rowNode:this.rowNode,column:this.column,visibleFunc:b}),this.addDestroyFunc(function(){return a.destroy()}),this.eCellWrapper.insertBefore(a.getGui(),this.eParentOfValue)},b.prototype.addDomData=function(){var a=this,c=this.getGui();this.beans.gridOptionsWrapper.setDomData(c,b.DOM_DATA_KEY_CELL_COMP,this),this.addDestroyFunc(function(){return a.beans.gridOptionsWrapper.setDomData(c,b.DOM_DATA_KEY_CELL_COMP,null)})},b.prototype.onCellFocused=function(a){var b=this.beans.focusedCellController.isCellFocused(this.gridCell);if(b!==this.cellFocused){var c=!this.beans.gridOptionsWrapper.isSuppressCellSelection();c&&(e._.addOrRemoveCssClass(this.getGui(),"ag-cell-focus",b),e._.addOrRemoveCssClass(this.getGui(),"ag-cell-no-focus",!b)),this.cellFocused=b}b&&a&&a.forceBrowserFocus&&this.getGui().focus();var d=this.beans.gridOptionsWrapper.isFullRowEdit();b||d||!this.editingCell||this.stopRowOrCellEdit()},b.prototype.stopRowOrCellEdit=function(a){void 0===a&&(a=!1),this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowComp.stopRowEditing(a):this.stopEditing(a)},b.prototype.stopEditing=function(a){if(void 0===a&&(a=!1),this.editingCell){if(!this.cellEditor)return void(this.editingCell=!1);var b,c=!1;if(!a){var d=this.cellEditor.isCancelAfterEnd&&this.cellEditor.isCancelAfterEnd();d||(b=this.cellEditor.getValue(),c=!0)}if(this.editingCell=!1,this.cellEditor.destroy&&this.cellEditor.destroy(),this.cellEditor=null,this.cellEditorInPopup)this.hideEditorPopup(),this.hideEditorPopup=null;else if(e._.removeAllChildren(this.getGui()),this.usingWrapper)this.getGui().appendChild(this.eCellWrapper);else if(this.cellRenderer){var f=this.cellRendererGui;f&&this.getGui().appendChild(f)}this.setInlineEditingClass(),c&&(this.rowNode.setDataValue(this.column,b),this.getValueAndFormat()),this.refreshCell({forceRefresh:!0,suppressFlash:!0});var g=this.createEvent(null,i.Events.EVENT_CELL_EDITING_STOPPED);this.beans.eventService.dispatchEvent(g)}},b.DOM_DATA_KEY_CELL_COMP="cellComp",b}(k.Component);b.CellComp=n},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(1),g=c(9),h=c(0),i=c(42),j=c(2),k=c(41),l=function(){function a(){this.activePopupElements=[]}return a.prototype.getPopupParent=function(){var a=this.gridOptionsWrapper.getPopupParent();return a?a:this.gridCore.getRootGui()},a.prototype.positionPopupForMenu=function(a){function b(){return d.right-e.left-2}function c(){return d.left-e.left-h}var d=a.eventSource.getBoundingClientRect(),e=this.getPopupParent().getBoundingClientRect(),f=d.top-e.top;f=this.keepYWithinBounds(a,f);var g,h=a.ePopup.clientWidth>0?a.ePopup.clientWidth:200,i=e.right-e.left,j=i-h;this.gridOptionsWrapper.isEnableRtl()?(g=c(),g<0&&(g=b()),g>j&&(g=0)):(g=b(),g>j&&(g=c()),g<0&&(g=0)),a.ePopup.style.left=g+"px",a.ePopup.style.top=f+"px"},a.prototype.positionPopupUnderMouseEvent=function(a){var b=this.getPopupParent().getBoundingClientRect();this.positionPopup({ePopup:a.ePopup,x:a.mouseEvent.clientX-b.left,y:a.mouseEvent.clientY-b.top,keepWithinBounds:!0}),this.callPostProcessPopup(a.ePopup,null,a.mouseEvent,a.type,a.column,a.rowNode)},a.prototype.positionPopupUnderComponent=function(a){var b=a.eventSource.getBoundingClientRect(),c=this.getPopupParent().getBoundingClientRect();this.positionPopup({ePopup:a.ePopup,minWidth:a.minWidth,nudgeX:a.nudgeX,nudgeY:a.nudgeY,x:b.left-c.left,y:b.top-c.top+b.height,keepWithinBounds:a.keepWithinBounds}),this.callPostProcessPopup(a.ePopup,a.eventSource,null,a.type,a.column,a.rowNode)},a.prototype.callPostProcessPopup=function(a,b,c,d,e,f){var g=this.gridOptionsWrapper.getPostProcessPopupFunc();if(g){var h={column:e,rowNode:f,ePopup:a,type:d,eventSource:b,mouseEvent:c};g(h)}},a.prototype.positionPopupOverComponent=function(a){var b=a.eventSource.getBoundingClientRect(),c=this.getPopupParent().getBoundingClientRect();this.positionPopup({ePopup:a.ePopup,minWidth:a.minWidth,nudgeX:a.nudgeX,nudgeY:a.nudgeY,x:b.left-c.left,y:b.top-c.top,keepWithinBounds:a.keepWithinBounds}),this.callPostProcessPopup(a.ePopup,a.eventSource,null,a.type,a.column,a.rowNode)},a.prototype.positionPopup=function(a){var b=a.x,c=a.y;a.nudgeX&&(b+=a.nudgeX),a.nudgeY&&(c+=a.nudgeY),a.keepWithinBounds&&(b=this.keepXWithinBounds(a,b),c=this.keepYWithinBounds(a,c)),a.ePopup.style.left=b+"px",a.ePopup.style.top=c+"px"},a.prototype.keepYWithinBounds=function(a,b){var c,d=this.getPopupParent().getBoundingClientRect();c=a.ePopup.clientHeight>0?a.ePopup.clientHeight:200;var e=d.bottom-d.top,f=e-c-5;return b>f?f:b<0?0:b},a.prototype.keepXWithinBounds=function(a,b){var c,d=this.getPopupParent().getBoundingClientRect();c=a.minWidth>0?a.minWidth:a.ePopup.clientWidth>0?a.ePopup.clientWidth:200;var e=d.right-d.left,f=e-c-5;return b>f?f:b<0?0:b},a.prototype.addAsModalPopup=function(a,b,c,d){var e=this,h=this.gridOptionsWrapper.getDocument();if(!h)return void console.warn("ag-grid: could not find the body of the document, document.body is empty");a.style.top="0px",a.style.left="0px";var i=f.Utils.isVisible(a);if(!i){var j=this.getPopupParent(),k=document.createElement("div");f.Utils.addCssClass(k,this.environment.getTheme()),k.appendChild(a),j.appendChild(k),this.activePopupElements.push(a);var l=!1,m=function(a){var b=a.which||a.keyCode;b===g.Constants.KEY_ESCAPE&&p(null)},n=function(a){p(a)},o=function(a){p(null,a)},p=function(b,g){e.isEventFromCurrentPopup(b,g,a)||e.isEventSameChainAsOriginalEvent(d,b,g)||l||(l=!0,j.removeChild(k),f.Utils.removeFromArray(e.activePopupElements,a),h.removeEventListener("keydown",m),h.removeEventListener("click",n),h.removeEventListener("touchstart",o),h.removeEventListener("contextmenu",n),c&&c())};return setTimeout(function(){b&&h.addEventListener("keydown",m),h.addEventListener("click",n),h.addEventListener("touchstart",o),h.addEventListener("contextmenu",n)},0),p}},a.prototype.isEventFromCurrentPopup=function(a,b,c){var d=a?a:b;if(d)for(var e=this.activePopupElements.indexOf(c),g=e;g<this.activePopupElements.length;g++){var h=this.activePopupElements[g];if(f.Utils.isElementInEventPath(h,d))return!0}return!1},a.prototype.isEventSameChainAsOriginalEvent=function(a,b,c){var d;if(b?d=b:c&&(d=c.touches[0]),d&&a){var e=Math.abs(a.screenX-b.screenX)<5,f=Math.abs(a.screenY-b.screenY)<5;if(e&&f)return!0}return!1},d([h.Autowired("gridCore"),e("design:type",i.GridCore)],a.prototype,"gridCore",void 0),d([h.Autowired("gridOptionsWrapper"),e("design:type",j.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([h.Autowired("environment"),e("design:type",k.Environment)],a.prototype,"environment",void 0),a=d([h.Bean("popupService")],a)}();b.PopupService=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(3),h=c(5),i=c(4),j=c(7),k=c(6),l=c(2),m=function(){function a(){}return a.prototype.setScrollsVisible=function(a){var b=this.bodyHorizontalScrollShowing!==a.bodyHorizontalScrollShowing||this.leftVerticalScrollShowing!==a.leftVerticalScrollShowing||this.rightVerticalScrollShowing!==a.rightVerticalScrollShowing;if(b){this.bodyHorizontalScrollShowing=a.bodyHorizontalScrollShowing,this.leftVerticalScrollShowing=a.leftVerticalScrollShowing,this.rightVerticalScrollShowing=a.rightVerticalScrollShowing;var c={type:h.Events.EVENT_SCROLL_VISIBILITY_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(c)}},a.prototype.isBodyHorizontalScrollShowing=function(){return this.bodyHorizontalScrollShowing},a.prototype.isLeftVerticalScrollShowing=function(){return this.leftVerticalScrollShowing},a.prototype.isRightVerticalScrollShowing=function(){return this.rightVerticalScrollShowing},d([f.Autowired("eventService"),e("design:type",g.EventService)],a.prototype,"eventService",void 0),d([f.Autowired("columnController"),e("design:type",i.ColumnController)],a.prototype,"columnController",void 0),d([f.Autowired("columnApi"),e("design:type",j.ColumnApi)],a.prototype,"columnApi",void 0),d([f.Autowired("gridApi"),e("design:type",k.GridApi)],a.prototype,"gridApi",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",l.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([f.Bean("scrollVisibleService")],a)}();b.ScrollVisibleService=m},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(123),h=c(2),i=c(25),j=c(3),k=function(){function a(){this.p1Tasks=new g.LinkedList,this.p2Tasks=new g.LinkedList,this.ticking=!1}return a.prototype.registerGridComp=function(a){this.gridPanel=a},a.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsWrapper.isSuppressAnimationFrame()},a.prototype.verifyAnimationFrameOn=function(a){this.useAnimationFrame===!1&&console.warn("ag-Grid: AnimationFrameService."+a+" called but animation frames are off")},a.prototype.addP1Task=function(a){this.verifyAnimationFrameOn("addP1Task"),this.p1Tasks.add(a),this.schedule()},a.prototype.addP2Task=function(a){this.verifyAnimationFrameOn("addP2Task"),this.p2Tasks.add(a),this.schedule()},a.prototype.executeFrame=function(a){this.verifyAnimationFrameOn("executeFrame");for(var b=(new Date).getTime(),c=(new Date).getTime()-b,d=!0,e=a<=0;e||c<a;){if(d)d=this.gridPanel.executeFrame();else if(this.p1Tasks.isEmpty()){if(this.p2Tasks.isEmpty())break;var f=this.p2Tasks.remove();f()}else{var f=this.p1Tasks.remove();f()}c=(new Date).getTime()-b}!d&&this.p1Tasks.isEmpty()&&this.p2Tasks.isEmpty()?this.stopTicking():this.requestFrame()},a.prototype.stopTicking=function(){this.ticking=!1;var a={type:i.Events.EVENT_ANIMATION_QUEUE_EMPTY,columnApi:this.gridOptionsWrapper.getColumnApi(),api:this.gridOptionsWrapper.getApi()};this.eventService.dispatchEvent(a)},a.prototype.flushAllFrames=function(){this.useAnimationFrame&&this.executeFrame(-1)},a.prototype.schedule=function(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))},a.prototype.requestFrame=function(){var a=this.executeFrame.bind(this,60);window.requestAnimationFrame?window.requestAnimationFrame(a):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(a):setTimeout(a,0)},a.prototype.isQueueEmpty=function(){return this.ticking},d([f.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("eventService"),e("design:type",j.EventService)],a.prototype,"eventService",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([f.Bean("animationFrameService")],a)}();b.AnimationFrameService=k},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(2),h=c(12),i=c(31),j=c(107),k=c(32),l=c(10),m=c(0),n=c(1),o=c(134),p=function(){function a(){}return a.prototype.setBeans=function(a){this.logger=a.create("BalancedColumnTreeBuilder")},a.prototype.createForAutoGroups=function(a,b){var c=this,d=[];return a.forEach(function(a){var e=c.createAutoGroupTreeItem(b,a);d.push(e)}),d},a.prototype.createAutoGroupTreeItem=function(a,b){for(var c=this.findDept(a),d=b,e=c-1;e>=0;e--){var f=new k.OriginalColumnGroup(null,"FAKE_PATH_"+b.getId()+"}_"+e,(!0),e);this.context.wireBean(f),f.setChildren([d]),d=f}return d},a.prototype.findDept=function(a){for(var b=0,c=a;c&&c[0]&&c[0]instanceof k.OriginalColumnGroup;)b++,c=c[0].getChildren();return b},a.prototype.createBalancedColumnGroups=function(a,b){var c=new j.ColumnKeyCreator,d=this.recursivelyCreateColumns(a,0,c,b),e=this.findMaxDept(d,0);this.logger.log("Number of levels for grouped columns is "+e);var f=this.balanceColumnTree(d,0,e,c);return this.columnUtils.depthFirstOriginalTreeSearch(f,function(a){a instanceof k.OriginalColumnGroup&&a.setupExpandable()}),{balancedTree:f,treeDept:e}},a.prototype.balanceColumnTree=function(a,b,c,d){var e=this,f=[];return a.forEach(function(a){if(a instanceof k.OriginalColumnGroup){var g=a,h=e.balanceColumnTree(g.getChildren(),b+1,c,d);g.setChildren(h),f.push(g)}else{for(var i=a,j=c-1;j>=b;j--){var l=d.getUniqueKey(null,null),m=e.createMergedColGroupDef(null),n=new k.OriginalColumnGroup(m,l,(!0),b);e.context.wireBean(n),n.setChildren([i]),i=n}f.push(i)}}),f},a.prototype.findMaxDept=function(a,b){for(var c=b,d=0;d<a.length;d++){var e=a[d];if(e instanceof k.OriginalColumnGroup){var f=e,g=this.findMaxDept(f.getChildren(),b+1);c<g&&(c=g)}}return c},a.prototype.recursivelyCreateColumns=function(a,b,c,d){var e=this,f=[];return a?(a.forEach(function(a){var g;g=e.isColumnGroup(a)?e.createColumnGroup(c,d,a,b):e.createColumn(c,d,a),f.push(g)}),f):f},a.prototype.createColumnGroup=function(a,b,c,d){var e=this.createMergedColGroupDef(c),f=a.getUniqueKey(e.groupId,null),g=new k.OriginalColumnGroup(e,f,(!1),d);this.context.wireBean(g);var h=this.recursivelyCreateColumns(e.children,d+1,a,b);return g.setChildren(h),g},a.prototype.createMergedColGroupDef=function(a){var b={};return n.Utils.assign(b,this.gridOptionsWrapper.getDefaultColGroupDef()),n.Utils.assign(b,a),this.checkForDeprecatedItems(b),b},a.prototype.createColumn=function(a,b,c){var d=this.mergeColDefs(c);this.checkForDeprecatedItems(d);var e=a.getUniqueKey(d.colId,d.field),f=new l.Column(d,e,b);return this.context.wireBean(f),f},a.prototype.mergeColDefs=function(a){var b={};return n.Utils.assign(b,this.gridOptionsWrapper.getDefaultColDef()),a.type&&this.assignColumnTypes(a,b),n.Utils.assign(b,a),b},a.prototype.assignColumnTypes=function(a,b){var c;if(a.type instanceof Array){var d=a.type.some(function(a){return"string"!=typeof a});d?console.warn("ag-grid: if colDef.type is supplied an array it should be of type 'string[]'"):c=a.type}else{if("string"!=typeof a.type)return void console.warn("ag-grid: colDef.type should be of type 'string' | 'string[]'");c=a.type.split(",")}var e=n.Utils.assign({},this.gridOptionsWrapper.getColumnTypes(),o.DefaultColumnTypes);c.forEach(function(a){var c=e[a.trim()];c?n.Utils.assign(b,c):console.warn("ag-grid: colDef.type '"+a+"' does not correspond to defined gridOptions.columnTypes")})},a.prototype.checkForDeprecatedItems=function(a){if(a){var b=a;void 0!==b.group&&console.warn("ag-grid: colDef.group is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==b.headerGroup&&console.warn("ag-grid: colDef.headerGroup is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==b.headerGroupShow&&console.warn("ag-grid: colDef.headerGroupShow is invalid, should be columnGroupShow, please check documentation on how to do grouping as it changed in version 3"),void 0!==b.suppressRowGroup&&console.warn("ag-grid: colDef.suppressRowGroup is deprecated, please use colDef.type instead"),void 0!==b.suppressAggregation&&console.warn("ag-grid: colDef.suppressAggregation is deprecated, please use colDef.type instead"),(b.suppressRowGroup||b.suppressAggregation)&&console.warn("ag-grid: colDef.suppressAggregation and colDef.suppressRowGroup are deprecated, use allowRowGroup, allowPivot and allowValue instead"),b.displayName&&(console.warn("ag-grid: Found displayName "+b.displayName+", please use headerName instead, displayName is deprecated."),b.headerName=b.displayName)}},a.prototype.isColumnGroup=function(a){return void 0!==a.children},d([m.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([m.Autowired("columnUtils"),e("design:type",i.ColumnUtils)],a.prototype,"columnUtils",void 0),d([m.Autowired("context"),e("design:type",m.Context)],a.prototype,"context",void 0),d([f(0,m.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[h.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),a=d([m.Bean("balancedColumnTreeBuilder")],a)}();b.BalancedColumnTreeBuilder=p},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(20),g=c(0),h=c(2),i=c(100),j=function(){function a(){}return a.prototype.registerGridComp=function(a){this.gridPanel=a},a.prototype.registerHeaderRootComp=function(a){this.headerRootComp=a},a.prototype.getPreferredWidthForColumn=function(a){var b=this.getHeaderCellForColumn(a);if(!b)return-1;var c=document.createElement("span");c.style.position="fixed";var d=this.gridPanel.getBodyContainer();d.appendChild(c),this.putRowCellsIntoDummyContainer(a,c),this.cloneItemIntoDummy(b,c);var e=c.offsetWidth;d.removeChild(c);var f=this.gridOptionsWrapper.getAutoSizePadding();return e+f},a.prototype.getHeaderCellForColumn=function(a){var b=null;return this.headerRootComp.forEachHeaderElement(function(c){if(c instanceof i.HeaderWrapperComp){var d=c;d.getColumn()===a&&(b=d)}}),b?b.getGui():null},a.prototype.putRowCellsIntoDummyContainer=function(a,b){var c=this,d=this.rowRenderer.getAllCellsForColumn(a);d.forEach(function(a){return c.cloneItemIntoDummy(a,b)})},a.prototype.cloneItemIntoDummy=function(a,b){var c=a.cloneNode(!0);c.style.width="",c.style.position="static",c.style.left="";var d=document.createElement("div");d.style.display="table-row",d.appendChild(c),b.appendChild(d)},d([g.Autowired("rowRenderer"),e("design:type",f.RowRenderer)],a.prototype,"rowRenderer",void 0),d([g.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([g.Bean("autoWidthCalculator")],a)}();b.AutoWidthCalculator=j},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(12),h=c(1),i=c(3),j=c(5),k=c(2),l=c(7),m=c(6),n=function(){function a(){this.onMouseUpListener=this.onMouseUp.bind(this),this.onMouseMoveListener=this.onMouseMove.bind(this),this.onTouchEndListener=this.onTouchUp.bind(this),this.onTouchMoveListener=this.onTouchMove.bind(this),this.dragEndFunctions=[],this.dragSources=[]}return a.prototype.init=function(){this.logger=this.loggerFactory.create("DragService")},a.prototype.destroy=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},a.prototype.removeListener=function(a){var b=a.dragSource.eElement,c=a.mouseDownListener;if(b.removeEventListener("mousedown",c),a.touchEnabled){var d=a.touchStartListener;b.removeEventListener("touchstart",d,{passive:!0})}},a.prototype.removeDragSource=function(a){var b=h.Utils.find(this.dragSources,function(b){return b.dragSource===a});b&&(this.removeListener(b),h.Utils.removeFromArray(this.dragSources,b))},a.prototype.setNoSelectToBody=function(a){var b=this.gridOptionsWrapper.getDocument(),c=b.querySelector("body");h.Utils.exists(c)&&h.Utils.addOrRemoveCssClass(c,"ag-body-no-select",a)},a.prototype.addDragSource=function(a,b){void 0===b&&(b=!1);var c=this.onMouseDown.bind(this,a);a.eElement.addEventListener("mousedown",c);var d=null,e=this.gridOptionsWrapper.isSuppressTouch(),f=b&&!e;f&&(d=this.onTouchStart.bind(this,a),a.eElement.addEventListener("touchstart",d,{passive:!1})),this.dragSources.push({dragSource:a,mouseDownListener:c,touchStartListener:d,touchEnabled:b})},a.prototype.onTouchStart=function(a,b){var c=this;this.currentDragParams=a,this.dragging=!1;var d=b.touches[0];this.touchLastTime=d,this.touchStart=d,b.preventDefault(),a.eElement.addEventListener("touchmove",this.onTouchMoveListener,{passive:!0}),a.eElement.addEventListener("touchend",this.onTouchEndListener,{passive:!0}),a.eElement.addEventListener("touchcancel",this.onTouchEndListener,{passive:!0}),this.dragEndFunctions.push(function(){a.eElement.removeEventListener("touchmove",c.onTouchMoveListener,{passive:!0}),a.eElement.removeEventListener("touchend",c.onTouchEndListener,{passive:!0}),a.eElement.removeEventListener("touchcancel",c.onTouchEndListener,{passive:!0})}),0===a.dragStartPixels&&this.onCommonMove(d,this.touchStart)},a.prototype.onMouseDown=function(a,b){var c=this;if(!(a.skipMouseEvent&&a.skipMouseEvent(b)||b._alreadyProcessedByDragService||(b._alreadyProcessedByDragService=!0,0!==b.button))){this.currentDragParams=a,this.dragging=!1,this.mouseEventLastTime=b,this.mouseStartEvent=b;var d=this.gridOptionsWrapper.getDocument();d.addEventListener("mousemove",this.onMouseMoveListener),d.addEventListener("mouseup",this.onMouseUpListener),this.dragEndFunctions.push(function(){d.removeEventListener("mousemove",c.onMouseMoveListener),d.removeEventListener("mouseup",c.onMouseUpListener)}),0===a.dragStartPixels&&this.onMouseMove(b)}},a.prototype.isEventNearStartEvent=function(a,b){var c=h.Utils.exists(this.currentDragParams.dragStartPixels)?this.currentDragParams.dragStartPixels:4;return h.Utils.areEventsNear(a,b,c)},a.prototype.getFirstActiveTouch=function(a){for(var b=0;b<a.length;b++){var c=a[b].identifier===this.touchStart.identifier;if(c)return a[b]}return null},a.prototype.onCommonMove=function(a,b){if(!this.dragging){var c=!this.dragging&&this.isEventNearStartEvent(a,b);if(c)return;this.dragging=!0;var d={type:j.Events.EVENT_DRAG_STARTED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(d),this.currentDragParams.onDragStart(b),this.setNoSelectToBody(!0)}this.currentDragParams.onDragging(a)},a.prototype.onTouchMove=function(a){var b=this.getFirstActiveTouch(a.touches);b&&this.onCommonMove(b,this.touchStart)},a.prototype.onMouseMove=function(a){this.onCommonMove(a,this.mouseStartEvent)},a.prototype.onTouchUp=function(a){var b=this.getFirstActiveTouch(a.changedTouches);b||(b=this.touchLastTime),this.onUpCommon(b)},a.prototype.onMouseUp=function(a){this.onUpCommon(a)},a.prototype.onUpCommon=function(a){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(a);var b={type:j.Events.EVENT_DRAG_STOPPED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(b)}this.setNoSelectToBody(!1),this.mouseStartEvent=null,this.mouseEventLastTime=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(a){return a()}),this.dragEndFunctions.length=0},d([f.Autowired("loggerFactory"),e("design:type",g.LoggerFactory)],a.prototype,"loggerFactory",void 0),d([f.Autowired("eventService"),e("design:type",i.EventService)],a.prototype,"eventService",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",k.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("columnApi"),e("design:type",l.ColumnApi)],a.prototype,"columnApi",void 0),d([f.Autowired("gridApi"),e("design:type",m.GridApi)],a.prototype,"gridApi",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),d([f.PreDestroy,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"destroy",null),a=d([f.Bean("dragService")],a)}();b.DragService=n},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=["fresh","dark","blue","bootstrap","material","balham-dark","balham"],h=g.concat(g.map(function(a){return"theme-"+a})),i=new RegExp("ag-("+h.join("|")+")"),j=8,k=4,l=4,m={"ag-theme-material":{headerHeight:7*j,virtualItemHeight:5*j,rowHeight:6*j},"ag-theme-classic":{headerHeight:25,virtualItemHeight:5*k,rowHeight:25},"ag-theme-balham":{headerHeight:8*l,virtualItemHeight:7*l,rowHeight:7*l}},n=function(){function a(){this.sassVariables={}}return a.prototype.loadSassVariables=function(){},a.prototype.getSassVariable=function(a,b){return"ag-theme-material"==a?m["ag-theme-material"][b]:"ag-theme-balham"==a||"ag-theme-balham-dark"==a?m["ag-theme-balham"][b]:m["ag-theme-classic"][b]},a.prototype.getTheme=function(){for(var a,b=this.eGridDiv;b!=document.documentElement&&null==a&&(a=b.className.match(i),b=b.parentElement,null!=b););return a?a[0]:"ag-fresh"},d([f.Autowired("eGridDiv"),e("design:type",HTMLElement)],a.prototype,"eGridDiv",void 0),a=d([f.Bean("environment")],a)}();b.Environment=n},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(2),h=c(7),i=c(4),j=c(20),k=c(18),l=c(3),m=c(78),n=c(12),o=c(35),p=c(1),q=c(0),r=c(22),s=c(8),t=c(6),u=c(11),v=function(a){function b(){return a.call(this)||this}return d(b,a),c=b,b.prototype.init=function(){var a=this;this.logger=this.loggerFactory.create("GridCore");
var b=this.enterprise?c.TEMPLATE_ENTERPRISE:c.TEMPLATE_NORMAL;if(this.setTemplate(b),this.instantiate(this.context),this.enterprise&&(this.toolPanelComp.registerGridComp(this.gridPanel),this.statusBar.registerGridPanel(this.gridPanel)),this.gridOptionsWrapper.addEventListener(g.GridOptionsWrapper.PROP_GRID_AUTO_HEIGHT,this.addLayoutClass.bind(this)),this.addLayoutClass(),this.showToolPanel(this.gridOptionsWrapper.isShowToolPanel()),this.eGridDiv.appendChild(this.getGui()),this.addDestroyFunc(function(){a.eGridDiv.removeChild(a.getGui())}),this.$scope){var d=this.$scope.$watch(this.quickFilterOnScope,function(b){return a.filterManager.setQuickFilter(b)});this.addDestroyFunc(d)}this.addRtlSupport(),this.finished=!1,this.addDestroyFunc(function(){return a.finished=!0}),this.logger.log("ready")},b.prototype.addLayoutClass=function(){var a=this.gridOptionsWrapper.isGridAutoHeight();this.addOrRemoveCssClass("ag-layout-auto-height",a),this.addOrRemoveCssClass("ag-layout-normal",!a),this.addOrRemoveCssClass("ag-scrolls",!a)},b.prototype.getPreferredWidth=function(){var a=this.columnController.getBodyContainerWidth()+this.columnController.getPinnedLeftContainerWidth()+this.columnController.getPinnedRightContainerWidth(),b=this.toolPanelComp?this.toolPanelComp.getPreferredWidth():0;return a+b},b.prototype.addRtlSupport=function(){var a=this.gridOptionsWrapper.isEnableRtl()?"ag-rtl":"ag-ltr";p.Utils.addCssClass(this.getGui(),a)},b.prototype.getRootGui=function(){return this.getGui()},b.prototype.showToolPanel=function(a){return this.toolPanelComp?void this.toolPanelComp.showToolPanel(a):void(a&&console.warn("ag-Grid: toolPanel is only available in ag-Grid Enterprise"))},b.prototype.isToolPanelShowing=function(){return this.toolPanelComp.isToolPanelShowing()},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.logger.log("Grid DOM removed")},b.prototype.ensureNodeVisible=function(a,b){if(void 0===b&&(b="top"),this.doingVirtualPaging)throw"Cannot use ensureNodeVisible when doing virtual paging, as we cannot check rows that are not in memory";for(var c=this.rowModel.getPageLastRow()+1,d="function"==typeof a,e=-1,f=0;f<c;f++){var g=this.rowModel.getRow(f);if(d){if(a(g)){e=f;break}}else if(a===g||a===g.data){e=f;break}}e>=0&&this.gridPanel.ensureIndexVisible(e,b)},b.TEMPLATE_NORMAL='<div class="ag-root-wrapper">\n            <div class="ag-root-wrapper-body">\n                <ag-grid-comp ref="gridPanel"></ag-grid-comp>\n            </div>\n            <ag-pagination></ag-pagination>\n        </div>',b.TEMPLATE_ENTERPRISE='<div class="ag-root-wrapper">\n            <ag-header-column-drop></ag-header-column-drop>\n            <div class="ag-root-wrapper-body">\n                <ag-grid-comp ref="gridPanel"></ag-grid-comp>\n                <ag-tool-panel ref="toolPanel"></ag-tool-panel>\n            </div>\n            <ag-status-bar ref="statusBar"></ag-status-bar>\n            <ag-pagination></ag-pagination>\n        </div>',e([q.Autowired("enterprise"),f("design:type",Boolean)],b.prototype,"enterprise",void 0),e([q.Autowired("gridOptions"),f("design:type",Object)],b.prototype,"gridOptions",void 0),e([q.Autowired("gridOptionsWrapper"),f("design:type",g.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([q.Autowired("rowModel"),f("design:type",Object)],b.prototype,"rowModel",void 0),e([q.Autowired("frameworkFactory"),f("design:type",Object)],b.prototype,"frameworkFactory",void 0),e([q.Autowired("columnController"),f("design:type",i.ColumnController)],b.prototype,"columnController",void 0),e([q.Autowired("rowRenderer"),f("design:type",j.RowRenderer)],b.prototype,"rowRenderer",void 0),e([q.Autowired("filterManager"),f("design:type",k.FilterManager)],b.prototype,"filterManager",void 0),e([q.Autowired("eventService"),f("design:type",l.EventService)],b.prototype,"eventService",void 0),e([q.Autowired("eGridDiv"),f("design:type",HTMLElement)],b.prototype,"eGridDiv",void 0),e([q.Autowired("$scope"),f("design:type",Object)],b.prototype,"$scope",void 0),e([q.Autowired("quickFilterOnScope"),f("design:type",String)],b.prototype,"quickFilterOnScope",void 0),e([q.Autowired("popupService"),f("design:type",o.PopupService)],b.prototype,"popupService",void 0),e([q.Autowired("focusedCellController"),f("design:type",r.FocusedCellController)],b.prototype,"focusedCellController",void 0),e([q.Autowired("context"),f("design:type",q.Context)],b.prototype,"context",void 0),e([q.Autowired("loggerFactory"),f("design:type",n.LoggerFactory)],b.prototype,"loggerFactory",void 0),e([q.Autowired("columnApi"),f("design:type",h.ColumnApi)],b.prototype,"columnApi",void 0),e([q.Autowired("gridApi"),f("design:type",t.GridApi)],b.prototype,"gridApi",void 0),e([q.Optional("rowGroupCompFactory"),f("design:type",Object)],b.prototype,"rowGroupCompFactory",void 0),e([q.Optional("pivotCompFactory"),f("design:type",Object)],b.prototype,"pivotCompFactory",void 0),e([u.RefSelector("statusBar"),f("design:type",Object)],b.prototype,"statusBar",void 0),e([u.RefSelector("gridPanel"),f("design:type",m.GridPanel)],b.prototype,"gridPanel",void 0),e([u.RefSelector("toolPanel"),f("design:type",Object)],b.prototype,"toolPanelComp",void 0),e([q.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),e([q.PreDestroy,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"destroy",null),b=c=e([q.Bean("gridCore"),f("design:paramtypes",[])],b);var c}(s.Component);b.GridCore=v},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(2),h=c(19),i=function(){function a(){}return a.prototype.formatValue=function(a,b,c,d){var e,f=a.getColDef();e=b&&b.rowPinned&&f.pinnedRowValueFormatter?f.pinnedRowValueFormatter:f.valueFormatter;var g=null;if(e){var h={value:d,node:b,data:b?b.data:null,colDef:a.getColDef(),column:a,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};h.$scope=c,g=this.expressionService.evaluate(e,h)}else if(f.refData)return f.refData[d];return null!==g&&void 0!==g||!Array.isArray(d)||(g=d.join(", ")),g},d([f.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("expressionService"),e("design:type",h.ExpressionService)],a.prototype,"expressionService",void 0),a=d([f.Bean("valueFormatterService")],a)}();b.ValueFormatterService=i},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(0),h=c(1),i=c(2),j=c(34),k=function(){function a(){this.gridInstanceId=b.gridInstanceSequence.next()}return b=a,a.prototype.init=function(){this.stampDomElementWithGridInstance()},a.prototype.stampDomElementWithGridInstance=function(){this.eGridDiv[b.GRID_DOM_KEY]=this.gridInstanceId},a.prototype.getRenderedCellForEvent=function(a){for(var b=h.Utils.getTarget(a);b;){var c=this.gridOptionsWrapper.getDomData(b,j.CellComp.DOM_DATA_KEY_CELL_COMP);if(c)return c;b=b.parentElement}return null},a.prototype.isEventFromThisGrid=function(a){for(var c=h.Utils.getEventPath(a),d=0;d<c.length;d++){var e=c[d],f=e[b.GRID_DOM_KEY];if(h.Utils.exists(f)){var g=f===this.gridInstanceId;return g}}return!1},a.prototype.getGridCellForEvent=function(a){var b=this.getRenderedCellForEvent(a);return b?b.getGridCell():null},a.gridInstanceSequence=new h.NumberSequence,a.GRID_DOM_KEY="__ag_grid_instance",d([g.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([g.Autowired("eGridDiv"),e("design:type",HTMLElement)],a.prototype,"eGridDiv",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=b=d([f.Bean("mouseEventService")],a);var b}();b.MouseEventService=k},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(3),h=c(0),i=c(5),j=c(13),k=c(7),l=c(6),m=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.setMouseOver=function(a){this.selectedColumns=a;var b={type:i.Events.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(b)},b.prototype.clearMouseOver=function(){this.selectedColumns=null;var a={type:i.Events.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(a)},b.prototype.isHovered=function(a){return this.selectedColumns&&this.selectedColumns.indexOf(a)>=0},e([h.Autowired("eventService"),f("design:type",g.EventService)],b.prototype,"eventService",void 0),e([h.Autowired("columnApi"),f("design:type",k.ColumnApi)],b.prototype,"columnApi",void 0),e([h.Autowired("gridApi"),f("design:type",l.GridApi)],b.prototype,"gridApi",void 0),b=e([h.Bean("columnHoverService")],b)}(j.BeanStub);b.ColumnHoverService=m},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(3),e=c(1),f=function(){function a(a,b){void 0===b&&(b=!1);var c=this;this.destroyFuncs=[],this.touching=!1,this.eventService=new d.EventService,this.eElement=a,this.preventMouseClick=b;var e=this.onTouchStart.bind(this),f=this.onTouchMove.bind(this),g=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",e,{passive:!0}),this.eElement.addEventListener("touchmove",f,{passive:!0}),this.eElement.addEventListener("touchend",g,{passive:!1}),this.destroyFuncs.push(function(){c.eElement.addEventListener("touchstart",e,{passive:!0}),c.eElement.addEventListener("touchmove",f,{passive:!0}),c.eElement.addEventListener("touchend",g,{passive:!1})})}return a.prototype.getActiveTouch=function(a){for(var b=0;b<a.length;b++){var c=a[b].identifier===this.touchStart.identifier;if(c)return a[b]}return null},a.prototype.addEventListener=function(a,b){this.eventService.addEventListener(a,b)},a.prototype.removeEventListener=function(a,b){this.eventService.removeEventListener(a,b)},a.prototype.onTouchStart=function(b){var c=this;if(!this.touching){this.touchStart=b.touches[0],this.touching=!0,this.moved=!1;var d=this.touchStart;setTimeout(function(){var e=c.touchStart===d;if(c.touching&&e&&!c.moved){c.moved=!0;var f={type:a.EVENT_LONG_TAP,touchStart:c.touchStart,touchEvent:b};c.eventService.dispatchEvent(f)}},500)}},a.prototype.onTouchMove=function(a){if(this.touching){var b=this.getActiveTouch(a.touches);if(b){var c=!e.Utils.areEventsNear(b,this.touchStart,4);c&&(this.moved=!0)}}},a.prototype.onTouchEnd=function(b){if(this.touching){if(!this.moved){var c={type:a.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(c),this.checkForDoubleTap(),this.preventMouseClick&&b.preventDefault()}this.touching=!1}},a.prototype.checkForDoubleTap=function(){var b=(new Date).getTime();if(this.lastTapTime>0){var c=b-this.lastTapTime;if(c>a.DOUBLE_TAP_MILLIS){var d={type:a.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(d),this.lastTapTime=null}else this.lastTapTime=b}else this.lastTapTime=b},a.prototype.destroy=function(){this.destroyFuncs.forEach(function(a){return a()})},a.EVENT_TAP="tap",a.EVENT_DOUBLE_TAP="doubleTap",a.EVENT_LONG_TAP="longTap",a.DOUBLE_TAP_MILLIS=500,a}();b.TouchListener=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(0),h=c(63),i=c(84),j=c(4),k=c(16),l=c(2),m=c(9),n=c(1),o="\r\n",p=function(a){function b(b,c,d,e,f,g,h){var i=a.call(this,b,c,d,e,f)||this;return i.suppressQuotes=g,i.columnSeparator=h,i.result="",i.lineOpened=!1,i}return d(b,a),b.prototype.prepare=function(a){},b.prototype.addCustomHeader=function(a){a&&(this.result+=a+o)},b.prototype.addCustomFooter=function(a){a&&(this.result+=a+o)},b.prototype.onNewHeaderGroupingRow=function(){return this.lineOpened&&(this.result+=o),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},b.prototype.onNewHeaderGroupingRowColumn=function(a,b,c){0!=b&&(this.result+=this.columnSeparator),this.result+=a;for(var d=1;d<=c;d++)this.result+=this.columnSeparator+this.putInQuotes("",this.suppressQuotes);this.lineOpened=!0},b.prototype.onNewHeaderRow=function(){return this.lineOpened&&(this.result+=o),{onColumn:this.onNewHeaderRowColumn.bind(this)}},b.prototype.onNewHeaderRowColumn=function(a,b,c){0!=b&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(a),this.suppressQuotes),this.lineOpened=!0},b.prototype.onNewBodyRow=function(){return this.lineOpened&&(this.result+=o),{onColumn:this.onNewBodyRowColumn.bind(this)}},b.prototype.onNewBodyRowColumn=function(a,b,c){0!=b&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractRowCellValue(a,b,m.Constants.EXPORT_TYPE_CSV,c),this.suppressQuotes),this.lineOpened=!0},b.prototype.putInQuotes=function(a,b){if(b)return a;if(null===a||void 0===a)return'""';var c;"string"==typeof a?c=a:"function"==typeof a.toString?c=a.toString():(console.warn("unknown value type during csv conversion"),c="");var d=c.replace(/"/g,'""');return'"'+d+'"'},b.prototype.parse=function(){return this.result},b}(h.BaseGridSerializingSession);b.CsvSerializingSession=p;var q=function(){function a(){}return a.prototype.setBeans=function(a){this.beans=a},a.prototype.export=function(a){if(this.isExportSuppressed())return console.warn("ag-grid: Export canceled. Export is not allowed as per your configuration."),"";var b=this.getMergedParamsAndData(a),c=b.mergedParams,d=b.data,e=c&&c.fileName&&0!==c.fileName.length,f=e?c.fileName:this.getDefaultFileName();return f.indexOf(".")===-1&&(f=f+"."+this.getDefaultFileExtension()),this.beans.downloader.download(f,d,this.getMimeType()),d},a.prototype.getData=function(a){return this.getMergedParamsAndData(a).data},a.prototype.getMergedParamsAndData=function(a){var b=this.mergeDefaultParams(a),c=this.beans.gridSerializer.serialize(this.createSerializingSession(b),b);return{mergedParams:b,data:c}},a.prototype.mergeDefaultParams=function(a){var b=this.beans.gridOptionsWrapper.getDefaultExportParams(),c={};return n._.assign(c,b),n._.assign(c,a),c},a}();b.BaseCreator=q;var r=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.postConstruct=function(){this.setBeans({downloader:this.downloader,gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},b.prototype.exportDataAsCsv=function(a){return this.export(a)},b.prototype.getDataAsCsv=function(a){return this.getData(a)},b.prototype.getMimeType=function(){return"text/csv;charset=utf-8;"},b.prototype.getDefaultFileName=function(){return"export.csv"},b.prototype.getDefaultFileExtension=function(){return"csv"},b.prototype.createSerializingSession=function(a){return new p(this.columnController,this.valueService,this.gridOptionsWrapper,a?a.processCellCallback:null,a?a.processHeaderCallback:null,a&&a.suppressQuotes,a&&a.columnSeparator||",")},b.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressCsvExport()},e([g.Autowired("columnController"),f("design:type",j.ColumnController)],b.prototype,"columnController",void 0),e([g.Autowired("valueService"),f("design:type",k.ValueService)],b.prototype,"valueService",void 0),e([g.Autowired("downloader"),f("design:type",i.Downloader)],b.prototype,"downloader",void 0),e([g.Autowired("gridSerializer"),f("design:type",h.GridSerializer)],b.prototype,"gridSerializer",void 0),e([g.Autowired("gridOptionsWrapper"),f("design:type",l.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([g.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b=e([g.Bean("csvCreator")],b)}(q);b.CsvCreator=r},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(31),g=c(26),h=c(32),i=c(0),j=c(1),k=c(0),l=function(){function a(){}return a.prototype.createDisplayedGroups=function(a,b,c,d){var e,f,g=this,h=[],i=this.mapOldGroupsById(d);return a.forEach(function(a){for(var d=g.getOriginalPathForColumn(b,a),j=[],k=!f,l=0;l<d.length;l++)if(k||d[l]!==f[l]){var m=g.createColumnGroup(d[l],c,i);j[l]=m,0==l?h.push(m):j[l-1].addChild(m)}else j[l]=e[l];var n=0===j.length;if(n)h.push(a);else{var o=j[j.length-1];o.addChild(a)}e=j,f=d}),this.setupParentsIntoColumns(h,null),h},a.prototype.createColumnGroup=function(a,b,c){var d=a.getGroupId(),e=b.getInstanceIdForKey(d),f=g.ColumnGroup.createUniqueId(d,e),h=c[f];return h&&h.getOriginalColumnGroup()!==a&&(h=null),j.Utils.exists(h)?h.reset():(h=new g.ColumnGroup(a,d,e),this.context.wireBean(h)),h},a.prototype.mapOldGroupsById=function(a){var b={},c=function(a){a.forEach(function(a){if(a instanceof g.ColumnGroup){var d=a;b[a.getUniqueId()]=d,c(d.getChildren())}})};return a&&c(a),b},a.prototype.setupParentsIntoColumns=function(a,b){var c=this;a.forEach(function(a){if(a.setParent(b),a instanceof g.ColumnGroup){var d=a;c.setupParentsIntoColumns(d.getChildren(),d)}})},a.prototype.getOriginalPathForColumn=function(a,b){function c(a,f){for(var g=0;g<a.length;g++){if(e)return;var i=a[g];if(i instanceof h.OriginalColumnGroup){var j=i;c(j.getChildren(),f+1),d[f]=i}else i===b&&(e=!0)}}var d=[],e=!1;return c(a,0),e?d:(console.log("could not get path"),null)},d([k.Autowired("columnUtils"),e("design:type",f.ColumnUtils)],a.prototype,"columnUtils",void 0),d([k.Autowired("context"),e("design:type",i.Context)],a.prototype,"context",void 0),a=d([i.Bean("displayedGroupCreator")],a)}();b.DisplayedGroupCreator=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(0),h=function(){function a(){this.templateCache={},this.waitingCallbacks={}}return a.prototype.getTemplate=function(a,b){var c=this.templateCache[a];if(c)return c;var d=this.waitingCallbacks[a],e=this;if(!d){d=[],this.waitingCallbacks[a]=d;var f=new XMLHttpRequest;f.onload=function(){e.handleHttpResult(this,a)},f.open("GET",a),f.send()}return b&&d.push(b),null},a.prototype.handleHttpResult=function(a,b){if(200!==a.status||null===a.response)return void console.warn("Unable to get template error "+a.status+" - "+b);this.templateCache[b]=a.response||a.responseText;for(var c=this.waitingCallbacks[b],d=0;d<c.length;d++){var e=c[d];e()}if(this.$scope){var f=this;setTimeout(function(){f.$scope.$apply()},0)}},d([g.Autowired("$scope"),e("design:type",Object)],a.prototype,"$scope",void 0),a=d([f.Bean("templateService")],a)}();b.TemplateService=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(1),h=c(34),i=c(14),j=c(2),k=c(10),l=c(5),m=c(0),n=c(8),o=c(11),p=function(a){function b(){return a.call(this,b.TEMPLATE)||this}return d(b,a),b.prototype.init=function(a){var b=g._.createIconNoSpan("groupLoading",this.gridOptionsWrapper,null);this.eLoadingIcon.appendChild(b);var c=this.gridOptionsWrapper.getLocaleTextFunc();this.eLoadingText.innerText=c("loadingOoo","Loading")},b.prototype.refresh=function(a){return!1},b.TEMPLATE='<div class="ag-stub-cell">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',e([m.Autowired("gridOptionsWrapper"),f("design:type",j.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([o.RefSelector("eLoadingIcon"),f("design:type",HTMLElement)],b.prototype,"eLoadingIcon",void 0),e([o.RefSelector("eLoadingText"),f("design:type",HTMLElement)],b.prototype,"eLoadingText",void 0),b}(n.Component);b.LoadingCellRenderer=p;var q=function(a){function b(b,c,d,e,f,g,h,i,j){var k=a.call(this)||this;return k.eAllRowContainers=[],k.active=!0,k.columnRefreshPending=!1,k.cellComps={},k.createSecondPassFuncs=[],k.removeFirstPassFuncs=[],k.removeSecondPassFuncs=[],k.initialised=!1,k.parentScope=b,k.beans=h,k.bodyContainerComp=c,k.pinnedLeftContainerComp=d,k.pinnedRightContainerComp=e,k.fullWidthContainerComp=f,k.rowNode=g,k.rowIsEven=k.rowNode.rowIndex%2===0,k.paginationPage=k.beans.paginationProxy.getCurrentPage(),k.useAnimationFrameForCreate=j,k.setAnimateFlags(i),k}return d(b,a),b.prototype.init=function(){var a=this;this.rowFocused=this.beans.focusedCellController.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.scope=this.createChildScopeOrNull(this.rowNode.data),this.setupRowContainers(),this.addListeners(),this.slideRowIn&&this.createSecondPassFuncs.push(function(){a.onTopChanged()}),this.fadeRowIn&&this.createSecondPassFuncs.push(function(){a.eAllRowContainers.forEach(function(a){return g._.removeCssClass(a,"ag-opacity-zero")})})},b.prototype.createTemplate=function(a,b){void 0===b&&(b=null);var c=[],d=this.rowNode.rowHeight,e=this.getInitialRowClasses(b).join(" "),f=g._.escape(this.rowNode.id),h=this.preProcessStylesFromGridOptions(),i=this.getRowBusinessKey(),j=g._.escape(i),k=this.getInitialRowTopStyle();return c.push("<div"),c.push(' role="row"'),c.push(' row-index="'+this.rowNode.getRowIndexString()+'"'),c.push(f?' row-id="'+f+'"':""),c.push(i?' row-business-key="'+j+'"':""),c.push(' comp-id="'+this.getCompId()+'"'),c.push(' class="'+e+'"'),c.push(' style="height: '+d+"px; "+k+" "+h+'">'),c.push(a),c.push("</div>"),c.join("")},b.prototype.getCellForCol=function(a){var b=this.cellComps[a.getColId()];return b?b.getGui():null},b.prototype.afterFlush=function(){this.initialised||(this.initialised=!0,this.executeProcessRowPostCreateFunc())},b.prototype.executeProcessRowPostCreateFunc=function(){var a=this.beans.gridOptionsWrapper.getProcessRowPostCreateFunc();if(a){var b={eRow:this.eBodyRow,ePinnedLeftRow:this.ePinnedLeftRow,ePinnedRightRow:this.ePinnedRightRow,node:this.rowNode,api:this.beans.gridOptionsWrapper.getApi(),rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};a(b)}},b.prototype.getInitialRowTopStyle=function(){var a=this.slideRowIn?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,b=this.applyPaginationOffset(a),c=this.beans.heightScaler.getRealPixelPosition(b);return this.beans.gridOptionsWrapper.isSuppressRowTransform()?"top: "+c+"px; ":"transform: translateY("+c+"px); "},b.prototype.getRowBusinessKey=function(){if("function"==typeof this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc()){var a=this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc()(this.rowNode);return a}},b.prototype.lazyCreateCells=function(a,b){if(this.active){var c=this.createCells(a);b.innerHTML=c.template,this.callAfterRowAttachedOnCells(c.cellComps,b)}},b.prototype.createRowContainer=function(a,b,c){var d,e=this;d=this.useAnimationFrameForCreate?{cellComps:[],template:""}:this.createCells(b);var f=this.createTemplate(d.template);a.appendRowTemplate(f,function(){var f=a.getRowElement(e.getCompId());e.afterRowAttached(a,f),c(f),e.useAnimationFrameForCreate?e.beans.taskQueue.addP1Task(e.lazyCreateCells.bind(e,b,f)):e.callAfterRowAttachedOnCells(d.cellComps,f)})},b.prototype.createChildScopeOrNull=function(a){if(this.beans.gridOptionsWrapper.isAngularCompileRows()){var b=this.parentScope.$new();return b.data=a,b.rowNode=this.rowNode,b.context=this.beans.gridOptionsWrapper.getContext(),this.addDestroyFunc(function(){b.$destroy(),b.data=null,b.rowNode=null,b.context=null}),b}return null},b.prototype.setupRowContainers=function(){var a=this.beans.gridOptionsWrapper.getIsFullWidthCellFunc(),c=!!a&&a(this.rowNode),d=this.beans.doingMasterDetail&&this.rowNode.detail,e=this.rowNode.group&&this.beans.gridOptionsWrapper.isGroupUseEntireRow();this.rowNode.stub?this.createFullWidthRows(b.LOADING_CELL_RENDERER,b.LOADING_CELL_RENDERER_COMP_NAME):d?this.createFullWidthRows(b.DETAIL_CELL_RENDERER,b.DETAIL_CELL_RENDERER_COMP_NAME):c?this.createFullWidthRows(b.FULL_WIDTH_CELL_RENDERER,null):e?this.createFullWidthRows(b.GROUP_ROW_RENDERER,b.GROUP_ROW_RENDERER_COMP_NAME):this.setupNormalRowContainers()},b.prototype.setupNormalRowContainers=function(){var a=this,b=this.beans.columnController.getAllDisplayedCenterVirtualColumnsForRow(this.rowNode);this.createRowContainer(this.bodyContainerComp,b,function(b){return a.eBodyRow=b});var c=this.beans.columnController.getDisplayedLeftColumnsForRow(this.rowNode),d=this.beans.columnController.getDisplayedRightColumnsForRow(this.rowNode);this.createRowContainer(this.pinnedRightContainerComp,d,function(b){return a.ePinnedRightRow=b}),this.createRowContainer(this.pinnedLeftContainerComp,c,function(b){return a.ePinnedLeftRow=b})},b.prototype.createFullWidthRows=function(a,b){var c=this;this.fullWidthRow=!0,this.fullWidthRowEmbedded=this.beans.gridOptionsWrapper.isEmbedFullWidthRows(),this.fullWidthRowEmbedded?(this.createFullWidthRowContainer(this.bodyContainerComp,null,null,a,b,function(a){c.eFullWidthRowBody=a},function(a){c.fullWidthRowComponentBody=a}),this.createFullWidthRowContainer(this.pinnedLeftContainerComp,k.Column.PINNED_LEFT,"ag-cell-last-left-pinned",a,b,function(a){c.eFullWidthRowLeft=a},function(a){c.fullWidthRowComponentLeft=a}),this.createFullWidthRowContainer(this.pinnedRightContainerComp,k.Column.PINNED_RIGHT,"ag-cell-first-right-pinned",a,b,function(a){c.eFullWidthRowRight=a},function(a){c.fullWidthRowComponentRight=a})):this.createFullWidthRowContainer(this.fullWidthContainerComp,null,null,a,b,function(a){c.eFullWidthRow=a},function(a){c.fullWidthRowComponent=a})},b.prototype.setAnimateFlags=function(a){if(a){var b=g._.exists(this.rowNode.oldRowTop);this.slideRowIn=b,this.fadeRowIn=!b}else this.slideRowIn=!1,this.fadeRowIn=!1},b.prototype.isEditing=function(){return this.editingRow},b.prototype.stopRowEditing=function(a){this.stopEditing(a)},b.prototype.isFullWidth=function(){return this.fullWidthRow},b.prototype.addListeners=function(){this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_ROW_SELECTED,this.onRowSelected.bind(this)),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_EXPANDED_CHANGED,this.onExpandedChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this));var a=this.beans.eventService;this.addDestroyableEventListener(a,l.Events.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addDestroyableEventListener(a,l.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addDestroyableEventListener(a,l.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addDestroyableEventListener(a,l.Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addDestroyableEventListener(a,l.Events.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addDestroyableEventListener(a,l.Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addDestroyableEventListener(a,l.Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this))},b.prototype.onGridColumnsChanged=function(){var a=Object.keys(this.cellComps);this.removeRenderedCells(a)},b.prototype.onRowNodeDataChanged=function(a){this.forEachCellComp(function(b){return b.refreshCell({suppressFlash:!a.update,
newData:!a.update})}),this.onRowSelected(),this.postProcessCss()},b.prototype.onRowNodeCellChanged=function(a){this.postProcessCss()},b.prototype.postProcessCss=function(){this.postProcessStylesFromGridOptions(),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},b.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},b.prototype.postProcessRowDragging=function(){var a=this.rowNode.dragging;this.eAllRowContainers.forEach(function(b){return g._.addOrRemoveCssClass(b,"ag-row-dragging",a)})},b.prototype.onExpandedChanged=function(){if(this.rowNode.group&&!this.rowNode.footer){var a=this.rowNode.expanded;this.eAllRowContainers.forEach(function(b){return g._.addOrRemoveCssClass(b,"ag-row-group-expanded",a)}),this.eAllRowContainers.forEach(function(b){return g._.addOrRemoveCssClass(b,"ag-row-group-contracted",!a)})}},b.prototype.onDisplayedColumnsChanged=function(){this.fullWidthRow||this.refreshCells()},b.prototype.destroyFullWidthComponents=function(){this.fullWidthRowComponent&&(this.fullWidthRowComponent.destroy&&this.fullWidthRowComponent.destroy(),this.fullWidthRowComponent=null),this.fullWidthRowComponentBody&&(this.fullWidthRowComponentBody.destroy&&this.fullWidthRowComponentBody.destroy(),this.fullWidthRowComponent=null),this.fullWidthRowComponentLeft&&(this.fullWidthRowComponentLeft.destroy&&this.fullWidthRowComponentLeft.destroy(),this.fullWidthRowComponentLeft=null),this.fullWidthRowComponentRight&&(this.fullWidthRowComponentRight.destroy&&this.fullWidthRowComponentRight.destroy(),this.fullWidthRowComponent=null)},b.prototype.getContainerForCell=function(a){switch(a){case k.Column.PINNED_LEFT:return this.ePinnedLeftRow;case k.Column.PINNED_RIGHT:return this.ePinnedRightRow;default:return this.eBodyRow}},b.prototype.onVirtualColumnsChanged=function(){this.fullWidthRow||this.refreshCells()},b.prototype.onColumnResized=function(){this.fullWidthRow||this.refreshCells()},b.prototype.refreshCells=function(){if(this.beans.gridOptionsWrapper.isSuppressAnimationFrame())this.refreshCellsInAnimationFrame();else{if(this.columnRefreshPending)return;this.beans.taskQueue.addP1Task(this.refreshCellsInAnimationFrame.bind(this))}},b.prototype.refreshCellsInAnimationFrame=function(){if(this.active){this.columnRefreshPending=!1;var a=this.beans.columnController.getAllDisplayedCenterVirtualColumnsForRow(this.rowNode),b=this.beans.columnController.getDisplayedLeftColumnsForRow(this.rowNode),c=this.beans.columnController.getDisplayedRightColumnsForRow(this.rowNode);this.insertCellsIntoContainer(this.eBodyRow,a),this.insertCellsIntoContainer(this.ePinnedLeftRow,b),this.insertCellsIntoContainer(this.ePinnedRightRow,c);var d=Object.keys(this.cellComps);a.forEach(function(a){return g._.removeFromArray(d,a.getId())}),b.forEach(function(a){return g._.removeFromArray(d,a.getId())}),c.forEach(function(a){return g._.removeFromArray(d,a.getId())}),d=g._.filter(d,this.isCellEligibleToBeRemoved.bind(this)),this.removeRenderedCells(d)}},b.prototype.removeRenderedCells=function(a){var b=this;a.forEach(function(a){var c=b.cellComps[a];g._.missing(c)||(c.detach(),c.destroy(),b.cellComps[a]=null)})},b.prototype.isCellEligibleToBeRemoved=function(a){var b=this.beans.columnController.getAllDisplayedColumns(),c=!0,d=!1,e=this.cellComps[a];if(!e)return c;if(this.isCellInWrongRow(e))return c;var f=e.isEditing(),g=this.beans.focusedCellController.isCellFocused(e.getGridCell()),h=f||g;if(h){var i=e.getColumn(),j=b.indexOf(i)>=0;return j?d:c}return c},b.prototype.ensureCellInCorrectContainer=function(a){var b=a.getGui(),c=a.getColumn(),d=c.getPinned(),e=this.getContainerForCell(d),f=a.getParentRow(),g=f!==e;g&&(f&&f.removeChild(b),e.appendChild(b),a.setParentRow(e))},b.prototype.isCellInWrongRow=function(a){var b=a.getColumn(),c=this.getContainerForCell(b.getPinned()),d=a.getParentRow();return d!==c},b.prototype.insertCellsIntoContainer=function(a,b){var c=this;if(a){var d=[],e=[];b.forEach(function(b){var f=b.getId(),g=c.cellComps[f];g?c.ensureCellInCorrectContainer(g):c.createNewCell(b,a,d,e)}),d.length>0&&(g._.appendHtml(a,d.join("")),this.callAfterRowAttachedOnCells(e,a))}},b.prototype.addDomData=function(a){var c=this.beans.gridOptionsWrapper;c.setDomData(a,b.DOM_DATA_KEY_RENDERED_ROW,this),this.addDestroyFunc(function(){c.setDomData(a,b.DOM_DATA_KEY_RENDERED_ROW,null)})},b.prototype.createNewCell=function(a,b,c,d){var e=new h.CellComp(this.scope,this.beans,a,this.rowNode,this,(!1)),f=e.getCreateTemplate();c.push(f),d.push(e),this.cellComps[a.getId()]=e,e.setParentRow(b)},b.prototype.onMouseEvent=function(a,b){switch(a){case"dblclick":this.onRowDblClick(b);break;case"click":this.onRowClick(b)}},b.prototype.createRowEvent=function(a,b){return{type:a,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),event:b}},b.prototype.createRowEventWithSource=function(a,b){var c=this.createRowEvent(a,b);return c.source=this,c},b.prototype.onRowDblClick=function(a){if(!g._.isStopPropagationForAgGrid(a)){var b=this.createRowEventWithSource(l.Events.EVENT_ROW_DOUBLE_CLICKED,a);this.beans.eventService.dispatchEvent(b)}},b.prototype.onRowClick=function(a){var b=g._.isStopPropagationForAgGrid(a);if(!b){var c=this.createRowEventWithSource(l.Events.EVENT_ROW_CLICKED,a);this.beans.eventService.dispatchEvent(c);var d=a.ctrlKey||a.metaKey,e=a.shiftKey;if(!this.rowNode.group&&!this.rowNode.rowPinned&&this.beans.gridOptionsWrapper.isRowSelection()&&!this.beans.gridOptionsWrapper.isSuppressRowClickSelection()){var f=this.beans.gridOptionsWrapper.isRowMultiSelectWithClick(),h=this.beans.gridOptionsWrapper.isRowDeselection();if(this.rowNode.isSelected())f?this.rowNode.setSelectedParams({newValue:!1}):d?h&&this.rowNode.setSelectedParams({newValue:!1}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!0});else{var i=!f&&!d;this.rowNode.setSelectedParams({newValue:!0,clearSelection:i,rangeSelect:e})}}}},b.prototype.createFullWidthRowContainer=function(a,b,c,d,e,f,g){var h=this,i=this.createTemplate("",c);a.appendRowTemplate(i,function(){var c=a.getRowElement(h.getCompId()),i=h.createFullWidthParams(c,b),j=function(a){if(h.isAlive()){var b=a.getGui();c.appendChild(b),g(a)}else a.destroy&&a.destroy()};h.beans.componentResolver.createAgGridComponent(null,i,d,i,e).then(j),h.afterRowAttached(a,c),f(c),h.angular1Compile(c)})},b.prototype.angular1Compile=function(a){this.scope&&this.beans.$compile(a)(this.scope)},b.prototype.createFullWidthParams=function(a,b){var c={fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,$scope:this.scope,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),eGridCell:a,eParentOfValue:a,pinned:b,addRenderedRowListener:this.addEventListener.bind(this)};return c},b.prototype.getInitialRowClasses=function(a){var b=[];return g._.exists(a)&&b.push(a),b.push("ag-row"),b.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeRowIn&&b.push("ag-opacity-zero"),this.rowIsEven?b.push("ag-row-even"):b.push("ag-row-odd"),this.rowNode.isSelected()&&b.push("ag-row-selected"),this.rowNode.group?(b.push("ag-row-group"),b.push("ag-row-level-"+this.rowNode.level),this.rowNode.footer&&b.push("ag-row-footer")):this.rowNode.parent?b.push("ag-row-level-"+(this.rowNode.parent.level+1)):b.push("ag-row-level-0"),this.rowNode.stub&&b.push("ag-row-stub"),this.fullWidthRow&&b.push("ag-full-width-row"),this.rowNode.group&&!this.rowNode.footer&&b.push(this.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted"),this.rowNode.dragging&&b.push("ag-row-dragging"),g._.pushAll(b,this.processClassesFromGridOptions()),g._.pushAll(b,this.preProcessRowClassRules()),b},b.prototype.preProcessRowClassRules=function(){var a=[];return this.processRowClassRules(function(b){a.push(b)},function(a){}),a},b.prototype.processRowClassRules=function(a,b){this.beans.stylingService.processClassRules(this.beans.gridOptionsWrapper.rowClassRules(),{value:void 0,colDef:void 0,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext()},a,b)},b.prototype.stopEditing=function(a){if(void 0===a&&(a=!1),this.forEachCellComp(function(b){b.stopEditing(a)}),this.editingRow){if(!a){var b=this.createRowEvent(l.Events.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(b)}this.setEditingRow(!1)}},b.prototype.setEditingRow=function(a){this.editingRow=a,this.eAllRowContainers.forEach(function(b){return g._.addOrRemoveCssClass(b,"ag-row-editing",a)});var b=a?this.createRowEvent(l.Events.EVENT_ROW_EDITING_STARTED):this.createRowEvent(l.Events.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(b)},b.prototype.startRowEditing=function(a,b,c){void 0===a&&(a=null),void 0===b&&(b=null),void 0===c&&(c=null),this.editingRow||(this.forEachCellComp(function(d){var e=d===c;e?d.startEditingIfEnabled(a,b,e):d.startEditingIfEnabled(null,null,e)}),this.setEditingRow(!0))},b.prototype.forEachCellComp=function(a){g._.iterateObject(this.cellComps,function(b,c){c&&a(c)})},b.prototype.postProcessClassesFromGridOptions=function(){var a=this,b=this.processClassesFromGridOptions();b&&b.forEach(function(b){a.eAllRowContainers.forEach(function(a){return g._.addCssClass(a,b)})})},b.prototype.postProcessRowClassRules=function(){var a=this;this.processRowClassRules(function(b){a.eAllRowContainers.forEach(function(a){return g._.addCssClass(a,b)})},function(b){a.eAllRowContainers.forEach(function(a){return g._.removeCssClass(a,b)})})},b.prototype.processClassesFromGridOptions=function(){var a=[],b=function(b){"string"==typeof b?a.push(b):Array.isArray(b)&&b.forEach(function(b){return a.push(b)})},c=this.beans.gridOptionsWrapper.getRowClass();if(c){if("function"==typeof c)return void console.warn("ag-Grid: rowClass should not be a function, please use getRowClass instead");b(c)}var d=this.beans.gridOptionsWrapper.getRowClassFunc();if(d){var e={node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi()},f=d(e);b(f)}return a},b.prototype.preProcessStylesFromGridOptions=function(){var a=this.processStylesFromGridOptions();return g._.cssStyleObjectToMarkup(a)},b.prototype.postProcessStylesFromGridOptions=function(){var a=this.processStylesFromGridOptions();this.eAllRowContainers.forEach(function(b){return g._.addStylesToElement(b,a)})},b.prototype.processStylesFromGridOptions=function(){var a=this.beans.gridOptionsWrapper.getRowStyle();if(a&&"function"==typeof a)return void console.log("ag-Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");var b,c=this.beans.gridOptionsWrapper.getRowStyleFunc();if(c){var d={data:this.rowNode.data,node:this.rowNode,api:this.beans.gridOptionsWrapper.getApi(),context:this.beans.gridOptionsWrapper.getContext(),$scope:this.scope};b=c(d)}return g._.assign({},a,b)},b.prototype.createCells=function(a){var b=this,c=[],d=[];a.forEach(function(a){var e=new h.CellComp(b.scope,b.beans,a,b.rowNode,b,(!1)),f=e.getCreateTemplate();c.push(f),d.push(e),b.cellComps[a.getId()]=e});var e={template:c.join(""),cellComps:d};return e},b.prototype.onRowSelected=function(){var a=this.rowNode.isSelected();this.eAllRowContainers.forEach(function(b){return g._.addOrRemoveCssClass(b,"ag-row-selected",a)})},b.prototype.callAfterRowAttachedOnCells=function(a,b){var c=this;a.forEach(function(a){a.setParentRow(b),a.afterAttached(),c.editingRow&&a.startEditingIfEnabled()})},b.prototype.afterRowAttached=function(a,b){var c=this;this.addDomData(b),this.removeSecondPassFuncs.push(function(){a.removeRowElement(b)}),this.removeFirstPassFuncs.push(function(){if(g._.exists(c.rowNode.rowTop)){var a=c.roundRowTopToBounds(c.rowNode.rowTop);c.setRowTop(a)}else g._.addCssClass(b,"ag-opacity-zero")}),this.eAllRowContainers.push(b),this.useAnimationFrameForCreate?this.beans.taskQueue.addP1Task(this.addHoverFunctionality.bind(this,b)):this.addHoverFunctionality(b)},b.prototype.addHoverFunctionality=function(a){var b=this;this.active&&(this.addDestroyableEventListener(a,"mouseenter",function(){return b.rowNode.onMouseEnter()}),this.addDestroyableEventListener(a,"mouseleave",function(){return b.rowNode.onMouseLeave()}),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_MOUSE_ENTER,function(){b.beans.gridOptionsWrapper.isSuppressRowHoverHighlight()||g._.addCssClass(a,"ag-row-hover")}),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_MOUSE_LEAVE,function(){g._.removeCssClass(a,"ag-row-hover")}))},b.prototype.roundRowTopToBounds=function(a){var b=this.beans.gridPanel.getVScrollPosition(),c=this.applyPaginationOffset(b.top,!0)-100,d=this.applyPaginationOffset(b.bottom,!0)+100;return a<c?c:a>d?d:a},b.prototype.onRowHeightChanged=function(){if(g._.exists(this.rowNode.rowHeight)){var a=this.rowNode.rowHeight+"px";this.eAllRowContainers.forEach(function(b){return b.style.height=a})}},b.prototype.addEventListener=function(b,c){"renderedRowRemoved"!==b&&"rowRemoved"!==b||(b=l.Events.EVENT_VIRTUAL_ROW_REMOVED,console.warn("ag-Grid: Since version 11, event renderedRowRemoved is now called "+l.Events.EVENT_VIRTUAL_ROW_REMOVED)),a.prototype.addEventListener.call(this,b,c)},b.prototype.removeEventListener=function(b,c){"renderedRowRemoved"!==b&&"rowRemoved"!==b||(b=l.Events.EVENT_VIRTUAL_ROW_REMOVED,console.warn("ag-Grid: Since version 11, event renderedRowRemoved and rowRemoved is now called "+l.Events.EVENT_VIRTUAL_ROW_REMOVED)),a.prototype.removeEventListener.call(this,b,c)},b.prototype.destroy=function(b){if(void 0===b&&(b=!1),a.prototype.destroy.call(this),this.active=!1,this.destroyFullWidthComponents(),b)this.removeFirstPassFuncs.forEach(function(a){return a()}),this.removeSecondPassFuncs.push(this.destroyContainingCells.bind(this));else{this.destroyContainingCells();var c=this.getAndClearDelayedDestroyFunctions();c.forEach(function(a){return a()})}var d=this.createRowEvent(l.Events.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(d),this.beans.eventService.dispatchEvent(d)},b.prototype.destroyContainingCells=function(){this.forEachCellComp(function(a){return a.destroy()}),this.destroyFullWidthComponents()},b.prototype.getAndClearDelayedDestroyFunctions=function(){var a=this.removeSecondPassFuncs;return this.removeSecondPassFuncs=[],a},b.prototype.onCellFocusChanged=function(){var a=this.beans.focusedCellController.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);a!==this.rowFocused&&(this.eAllRowContainers.forEach(function(b){return g._.addOrRemoveCssClass(b,"ag-row-focus",a)}),this.eAllRowContainers.forEach(function(b){return g._.addOrRemoveCssClass(b,"ag-row-no-focus",!a)}),this.rowFocused=a),!a&&this.editingRow&&this.stopEditing(!1)},b.prototype.onPaginationChanged=function(){var a=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==a&&(this.paginationPage=a,this.onTopChanged())},b.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},b.prototype.applyPaginationOffset=function(a,b){if(void 0===b&&(b=!1),this.rowNode.isRowPinned())return a;var c=this.beans.paginationProxy.getPixelOffset();return b?a+c:a-c},b.prototype.setRowTop=function(a){if(g._.exists(a)){var b=this.applyPaginationOffset(a),c=this.beans.heightScaler.getRealPixelPosition(b),d=c+"px";this.beans.gridOptionsWrapper.isSuppressRowTransform()?this.eAllRowContainers.forEach(function(a){return a.style.top=""+d}):this.eAllRowContainers.forEach(function(a){return a.style.transform="translateY("+d+")"})}},b.prototype.getAndClearNextVMTurnFunctions=function(){var a=this.createSecondPassFuncs;return this.createSecondPassFuncs=[],a},b.prototype.getRowNode=function(){return this.rowNode},b.prototype.getRenderedCellForColumn=function(a){return this.cellComps[a.getColId()]},b.prototype.onRowIndexChanged=function(){this.onCellFocusChanged(),this.updateRowIndexes()},b.prototype.updateRowIndexes=function(){var a=this.rowNode.getRowIndexString(),b=this.rowNode.rowIndex%2===0,c=this.rowIsEven!==b;c&&(this.rowIsEven=b),this.eAllRowContainers.forEach(function(d){d.setAttribute("row-index",a),c&&(g._.addOrRemoveCssClass(d,"ag-row-even",b),g._.addOrRemoveCssClass(d,"ag-row-odd",!b))})},b.prototype.ensureDomOrder=function(){var a=this.getBodyRowElement();a&&this.bodyContainerComp.ensureDomOrder(a);var b=this.getPinnedLeftRowElement();b&&this.pinnedLeftContainerComp.ensureDomOrder(b);var c=this.getPinnedRightRowElement();c&&this.pinnedRightContainerComp.ensureDomOrder(c);var d=this.getFullWidthRowElement();d&&this.fullWidthContainerComp.ensureDomOrder(d)},b.prototype.getPinnedLeftRowElement=function(){return this.ePinnedLeftRow?this.ePinnedLeftRow:this.eFullWidthRowLeft},b.prototype.getPinnedRightRowElement=function(){return this.ePinnedRightRow?this.ePinnedRightRow:this.eFullWidthRowRight},b.prototype.getBodyRowElement=function(){return this.eBodyRow?this.eBodyRow:this.eFullWidthRowBody},b.prototype.getFullWidthRowElement=function(){return this.eFullWidthRow},b.DOM_DATA_KEY_RENDERED_ROW="renderedRow",b.FULL_WIDTH_CELL_RENDERER="fullWidthCellRenderer",b.GROUP_ROW_RENDERER="groupRowRenderer",b.GROUP_ROW_RENDERER_COMP_NAME="agGroupRowRenderer",b.LOADING_CELL_RENDERER="loadingCellRenderer",b.LOADING_CELL_RENDERER_COMP_NAME="agLoadingCellRenderer",b.DETAIL_CELL_RENDERER="detailCellRenderer",b.DETAIL_CELL_RENDERER_COMP_NAME="agDetailCellRenderer",b}(n.Component);b.RowComp=q},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g,h=c(8),i=c(11),j=c(0),k=c(2),l=c(1);!function(a){a[a.MAIN=0]="MAIN",a[a.CONDITION=1]="CONDITION"}(g=b.FilterConditionType||(b.FilterConditionType={}));var m={loadingOoo:"Loading...",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",filterOoo:"Filter...",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",searchOoo:"Search...",selectAll:"Select All",applyFilter:"Apply Filter",clearFilter:"Clear Filter"},n=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(a){this.filterParams=a,this.defaultFilter=this.filterParams.defaultOption,this.filterParams.filterOptions&&!this.defaultFilter&&this.filterParams.filterOptions.lastIndexOf(b.EQUALS)<0&&(this.defaultFilter=this.filterParams.filterOptions[0]),this.customInit(),this.filter=this.defaultFilter,this.filterCondition=this.defaultFilter,this.clearActive=a.clearButton===!0,this.applyActive=a.applyButton===!0||a.apply===!0,this.newRowsActionKeep="keep"===a.newRowsAction,this.setTemplate(this.generateTemplate()),l._.setVisible(this.eApplyButton,this.applyActive),this.applyActive&&this.addDestroyableEventListener(this.eApplyButton,"click",this.filterParams.filterChangedCallback),l._.setVisible(this.eClearButton,this.clearActive),this.clearActive&&this.addDestroyableEventListener(this.eClearButton,"click",this.onClearButton.bind(this));var c=this.applyActive||this.clearActive;l._.setVisible(this.eButtonsPanel,c),this.instantiate(this.context),this.initialiseFilterBodyUi(g.MAIN),this.refreshFilterBodyUi(g.MAIN)},b.prototype.onClearButton=function(){this.setModel(null),this.onFilterChanged()},b.prototype.floatingFilter=function(a){if(""!==a){var b=this.modelFromFloatingFilter(a);this.setModel(b)}else this.resetState();this.onFilterChanged()},b.prototype.onNewRowsLoaded=function(){this.newRowsActionKeep||this.resetState()},b.prototype.getModel=function(){return this.isFilterActive()?this.isFilterConditionActive(g.CONDITION)?{condition1:this.serialize(g.MAIN),condition2:this.serialize(g.CONDITION),operator:this.conditionValue}:this.serialize(g.MAIN):null},b.prototype.getNullableModel=function(){return this.isFilterConditionActive(g.CONDITION)?{condition1:this.serialize(g.MAIN),condition2:this.serialize(g.CONDITION),operator:this.conditionValue}:this.serialize(g.MAIN)},b.prototype.setModel=function(a){if(a)if(a.operator){var b=a;this.parse(b.condition1,g.MAIN),this.parse(b.condition2,g.CONDITION),this.conditionValue=b.operator}else this.resetState(),this.parse(a,g.MAIN);else this.resetState();this.redrawCondition(),this.refreshFilterBodyUi(g.MAIN),this.refreshFilterBodyUi(g.CONDITION)},b.prototype.doOnFilterChanged=function(a){void 0===a&&(a=!1),this.filterParams.filterModifiedCallback();var b=this.applyActive&&a,c=!this.applyActive,d=c||b;return d&&this.filterParams.filterChangedCallback(),this.refreshFilterBodyUi(g.MAIN),this.refreshFilterBodyUi(g.CONDITION),d},b.prototype.onFilterChanged=function(a){void 0===a&&(a=!1),this.doOnFilterChanged(a),this.redrawCondition(),this.refreshFilterBodyUi(g.MAIN),this.refreshFilterBodyUi(g.CONDITION)},b.prototype.redrawCondition=function(){var a=this,b=this.eFilterBodyWrapper.querySelector(".ag-filter-condition");if(!b&&this.isFilterActive()&&this.acceptsBooleanLogic()){this.eConditionWrapper=l._.loadTemplate(this.createConditionTemplate(g.CONDITION)),this.eFilterBodyWrapper.appendChild(this.eConditionWrapper),this.wireQuerySelectors();var c=this.refreshOperatorUi(),d=c.andButton,e=c.orButton;this.addDestroyableEventListener(d,"change",function(){a.conditionValue="AND",a.onFilterChanged()}),this.addDestroyableEventListener(e,"change",function(){a.conditionValue="OR",a.onFilterChanged()}),this.initialiseFilterBodyUi(g.CONDITION)}else b&&!this.isFilterActive()?(this.eFilterBodyWrapper.removeChild(this.eConditionWrapper),this.eConditionWrapper=null):(this.refreshFilterBodyUi(g.CONDITION),this.eConditionWrapper&&this.refreshOperatorUi())},b.prototype.refreshOperatorUi=function(){var a=this.eConditionWrapper.querySelector(".and"),b=this.eConditionWrapper.querySelector(".or");return this.conditionValue=null==this.conditionValue?"AND":this.conditionValue,a.checked="AND"===this.conditionValue,b.checked="OR"===this.conditionValue,{andButton:a,orButton:b}},b.prototype.onFloatingFilterChanged=function(a){var b=a;if(null==b)this.setModel(null);else if(this.isFilterConditionActive(g.CONDITION)){var c={condition1:b.model,condition2:this.serialize(g.CONDITION),operator:this.conditionValue};this.setModel(c)}else this.setModel(b?b.model:null);return this.doOnFilterChanged(!!b&&b.apply)},b.prototype.generateFilterHeader=function(a){return""},b.prototype.generateTemplate=function(){var a=this.translate.bind(this),b=this.createConditionBody(g.MAIN),c=this.acceptsBooleanLogic()?this.wrapCondition(b):b;return"<div>\n                    <div class='ag-filter-body-wrapper'>"+c+'</div>\n                    <div class="ag-filter-apply-panel" id="applyPanel">\n                        <button type="button" id="clearButton">'+a("clearFilter")+'</button>\n                        <button type="button" id="applyButton">'+a("applyFilter")+"</button>\n                    </div>\n                </div>"},b.prototype.acceptsBooleanLogic=function(){return!1},b.prototype.wrapCondition=function(a){return this.isFilterActive()?""+a+this.createConditionTemplate(g.CONDITION):a},b.prototype.createConditionTemplate=function(a){return'<div class="ag-filter-condition">\n            <input id="andId" type="radio" class="and" name="booleanLogic" value="AND" checked="checked" /><label style="display: inline" for="andId">AND</label>\n            <input id="orId" type="radio" class="or" name="booleanLogic" value="OR" /><label style="display: inline" for="orId">OR</label>\n            <div>'+this.createConditionBody(a)+"</div>\n        </div>"},b.prototype.createConditionBody=function(a){var b=this.bodyTemplate(a);return this.generateFilterHeader(a)+b},b.prototype.translate=function(a){var b=this.gridOptionsWrapper.getLocaleTextFunc();return b(a,m[a])},b.prototype.getDebounceMs=function(a){return a.applyButton&&a.debounceMs?(console.warn("ag-Grid: debounceMs is ignored when applyButton = true"),0):null!=a.debounceMs?a.debounceMs:500},b.EQUALS="equals",b.NOT_EQUAL="notEqual",b.LESS_THAN="lessThan",b.LESS_THAN_OR_EQUAL="lessThanOrEqual",b.GREATER_THAN="greaterThan",b.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",b.IN_RANGE="inRange",b.CONTAINS="contains",b.NOT_CONTAINS="notContains",b.STARTS_WITH="startsWith",b.ENDS_WITH="endsWith",e([i.QuerySelector("#applyPanel"),f("design:type",HTMLElement)],b.prototype,"eButtonsPanel",void 0),e([i.QuerySelector(".ag-filter-body-wrapper"),f("design:type",HTMLElement)],b.prototype,"eFilterBodyWrapper",void 0),e([i.QuerySelector("#applyButton"),f("design:type",HTMLElement)],b.prototype,"eApplyButton",void 0),e([i.QuerySelector("#clearButton"),f("design:type",HTMLElement)],b.prototype,"eClearButton",void 0),e([j.Autowired("context"),f("design:type",j.Context)],b.prototype,"context",void 0),e([j.Autowired("gridOptionsWrapper"),f("design:type",k.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),b}(h.Component);b.BaseFilter=n;var o=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.doesFilterPass=function(a){var b=this.individualFilterPasses(a,g.MAIN);if(null==this.eTypeConditionSelector)return b;var c=this.individualFilterPasses(a,g.CONDITION);return"AND"===this.conditionValue?b&&c:b||c},b.prototype.init=function(b){a.prototype.init.call(this,b),this.suppressAndOrCondition=b.suppressAndOrCondition},b.prototype.customInit=function(){this.defaultFilter||(this.defaultFilter=this.getDefaultType())},b.prototype.acceptsBooleanLogic=function(){return this.suppressAndOrCondition!==!0},b.prototype.generateFilterHeader=function(a){var b=this,c=this.getApplicableFilterTypes(),d=this.filterParams.filterOptions,e=d?d:c,f=e.map(function(a){var c=b.translate(a);return'<option value="'+a+'">'+c+"</option>"}),h=1==f.length?"disabled":"",i=a==g.MAIN?"filterType":"filterConditionType";return f.length<=0?"":'<div>\n                <select class="ag-filter-select" id="'+i+'" '+h+">\n                    "+f.join("")+"\n                </select>\n            </div>"},b.prototype.initialiseFilterBodyUi=function(a){var b=this;a===g.MAIN?(this.setFilterType(this.filter,a),this.addDestroyableEventListener(this.eTypeSelector,"change",function(){return b.onFilterTypeChanged(a)})):(this.setFilterType(this.filterCondition,a),this.addDestroyableEventListener(this.eTypeConditionSelector,"change",function(){return b.onFilterTypeChanged(a)}))},b.prototype.onFilterTypeChanged=function(a){a===g.MAIN?this.filter=this.eTypeSelector.value:this.filterCondition=this.eTypeConditionSelector.value,this.refreshFilterBodyUi(a),this.isFilterActive()&&this.onFilterChanged()},b.prototype.isFilterActive=function(){var a=this.filterValues(g.MAIN);if(this.filter===n.IN_RANGE){var b=a;return null!=b[0]&&null!=b[1]}return null!=a},b.prototype.setFilterType=function(a,b){if(b===g.MAIN){if(this.filter=a,!this.eTypeSelector)return;this.eTypeSelector.value=a}else{if(this.filterCondition=a,!this.eTypeConditionSelector)return;this.eTypeConditionSelector.value=a}},b.prototype.isFilterConditionActive=function(a){return null!=this.filterValues(a)},e([i.QuerySelector("#filterType"),f("design:type",HTMLSelectElement)],b.prototype,"eTypeSelector",void 0),e([i.QuerySelector("#filterConditionType"),f("design:type",HTMLSelectElement)],b.prototype,"eTypeConditionSelector",void 0),b}(n);b.ComparableBaseFilter=o;var p=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.nullComparator=function(a){var b=this;return function(c,d){if(null==d){var e=b.translateNull(a);if(b.filter===n.EQUALS)return e?0:1;if(b.filter===n.GREATER_THAN)return e?1:-1;if(b.filter===n.GREATER_THAN_OR_EQUAL)return e?1:-1;if(b.filter===n.LESS_THAN_OR_EQUAL)return e?-1:1;if(b.filter===n.LESS_THAN)return e?-1:1;if(b.filter===n.NOT_EQUAL)return e?1:0}var f=b.comparator();return f(c,d)}},b.prototype.getDefaultType=function(){return n.EQUALS},b.prototype.translateNull=function(a){var c=a.indexOf("greater")>-1?"greaterThan":a.indexOf("lessThan")>-1?"lessThan":"equals";return this.filterParams.nullComparator&&this.filterParams.nullComparator[c]?this.filterParams.nullComparator[c]:b.DEFAULT_NULL_COMPARATOR[c]},b.prototype.individualFilterPasses=function(a,b){return this.doIndividualFilterPasses(a,b,b===g.MAIN?this.filter:this.filterCondition)},b.prototype.doIndividualFilterPasses=function(a,b,c){var d=this.filterParams.valueGetter(a.node),e=this.nullComparator(c),f=this.filterValues(b),h=Array.isArray(f)?f[0]:f;if(null==h)return b===g.MAIN||"AND"===this.conditionValue;var i=e(h,d);if(c===n.EQUALS)return 0===i;if(c===n.GREATER_THAN)return i>0;if(c===n.GREATER_THAN_OR_EQUAL)return i>=0;if(c===n.LESS_THAN_OR_EQUAL)return i<=0;if(c===n.LESS_THAN)return i<0;if(c===n.NOT_EQUAL)return 0!=i;var j=e(f[1],d);if(c===n.IN_RANGE)return this.filterParams.inRangeInclusive?i>=0&&j<=0:i>0&&j<0;throw new Error("Unexpected type of filter!: "+c)},b.DEFAULT_NULL_COMPARATOR={equals:!1,lessThan:!1,greaterThan:!1},b}(o);b.ScalarBaseFilter=p},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(1),f=c(10),g=c(13),h=function(a){function b(b,c,d,e){var f=a.call(this)||this;return f.columnOrGroup=b,f.eCell=c,f.colsSpanning=e,f.beans=d,f}return d(b,a),b.prototype.setColsSpanning=function(a){this.colsSpanning=a,this.onLeftChanged()},b.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?this.colsSpanning[this.colsSpanning.length-1]:this.columnOrGroup},b.prototype.init=function(){this.addDestroyableEventListener(this.columnOrGroup,f.Column.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime()},b.prototype.setLeftFirstTime=function(){var a=this.beans.gridOptionsWrapper.isSuppressColumnMoveAnimation(),b=e.Utils.exists(this.columnOrGroup.getOldLeft()),c=this.beans.columnAnimationService.isActive()&&b&&!a;c?this.animateInLeft():this.onLeftChanged()},b.prototype.animateInLeft=function(){var a=this,b=this.getColumnOrGroup().getLeft(),c=this.getColumnOrGroup().getOldLeft();this.setLeft(c),this.actualLeft=b,this.beans.columnAnimationService.executeNextVMTurn(function(){a.actualLeft===b&&a.setLeft(b)})},b.prototype.onLeftChanged=function(){this.actualLeft=this.getColumnOrGroup().getLeft(),this.setLeft(this.actualLeft)},b.prototype.setLeft=function(a){e.Utils.exists(a)&&(this.eCell.style.left=a+"px")},b}(g.BeanStub);b.SetLeftFeature=h},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);
return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(2),h=function(){function a(){this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.animationThreadCount=0}return a.prototype.registerGridComp=function(a){this.gridPanel=a},a.prototype.isActive=function(){return this.active},a.prototype.start=function(){this.active||this.gridOptionsWrapper.isSuppressColumnMoveAnimation()||this.gridOptionsWrapper.isEnableRtl()||(this.ensureAnimationCssClassPresent(),this.active=!0)},a.prototype.finish=function(){this.active&&(this.flush(),this.active=!1)},a.prototype.executeNextVMTurn=function(a){this.active?this.executeNextFuncs.push(a):a()},a.prototype.executeLaterVMTurn=function(a){this.active?this.executeLaterFuncs.push(a):a()},a.prototype.ensureAnimationCssClassPresent=function(){var a=this;this.animationThreadCount++;var b=this.animationThreadCount;this.gridPanel.setColumnMovingCss(!0),this.executeLaterFuncs.push(function(){a.animationThreadCount===b&&a.gridPanel.setColumnMovingCss(!1)})},a.prototype.flush=function(){var a=this.executeNextFuncs;this.executeNextFuncs=[];var b=this.executeLaterFuncs;this.executeLaterFuncs=[],0===a.length&&0===b.length||(setTimeout(function(){return a.forEach(function(a){return a()})},0),setTimeout(function(){return b.forEach(function(a){return a()})},300))},d([f.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([f.Bean("columnAnimationService")],a)}();b.ColumnAnimationService=h},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(69),h=c(2),i=c(27),j=function(){function a(){}return a.prototype.init=function(){},a.prototype.addCellEditor=function(a,b){console.warn("ag-grid: since v13.3.1 this method is not supported anymore. If you want to register your own editor check the docs: https://www.ag-grid.com/javascript-grid-cell-editor/")},a.prototype.createCellEditor=function(a,b){var c=this,d=this.componentResolver.createAgGridComponent(a,b,"cellEditor",{api:b.api,columnApi:b.columnApi,node:b.node,data:b.node.data,rowIndex:b.rowIndex,column:b.column,colDef:b.column.getColDef()},"agCellEditor");return d.map(function(a){var d=a.isPopup&&a.isPopup();if(!d)return a;c.gridOptionsWrapper.isFullRowEdit()&&console.warn("ag-Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var e=new g.PopupEditorWrapper(a);return c.context.wireBean(e),e.init(b),e})},d([f.Autowired("context"),e("design:type",f.Context)],a.prototype,"context",void 0),d([f.Autowired("componentResolver"),e("design:type",i.ComponentResolver)],a.prototype,"componentResolver",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([f.Bean("cellEditorFactory")],a)}();b.CellEditorFactory=j},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(1),h=c(2),i=c(3),j=c(19),k=c(70),l=c(71),m=c(72),n=function(){function a(){this.cellRendererMap={}}return b=a,a.prototype.init=function(){this.cellRendererMap[b.ANIMATE_SLIDE]=k.AnimateSlideCellRenderer,this.cellRendererMap[b.ANIMATE_SHOW_CHANGE]=l.AnimateShowChangeCellRenderer,this.cellRendererMap[b.GROUP]=m.GroupCellRenderer},a.prototype.addCellRenderer=function(a,b){this.cellRendererMap[a]=b},a.prototype.getCellRenderer=function(a){var b=this.cellRendererMap[a];return g.Utils.missing(b)?(console.warn("ag-Grid: unable to find cellRenderer for key "+a),null):b},a.ANIMATE_SLIDE="animateSlide",a.ANIMATE_SHOW_CHANGE="animateShowChange",a.GROUP="group",d([f.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("expressionService"),e("design:type",j.ExpressionService)],a.prototype,"expressionService",void 0),d([f.Autowired("eventService"),e("design:type",i.EventService)],a.prototype,"eventService",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=b=d([f.Bean("cellRendererFactory")],a);var b}();b.CellRendererFactory=n},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(21),h=c(27),i=c(1),j=c(2),k=function(){function a(){}return a.prototype.useCellRenderer=function(a,b,c){var d=this,e=this.componentRecipes.newCellRenderer(a,c);return null!=e?e.then(function(a){null==a?b.innerText=null!=c.valueFormatted?c.valueFormatted:c.value:d.bindToHtml(e,b)}):b.innerText=null!=c.valueFormatted?c.valueFormatted:c.value,e},a.prototype.useFilterCellRenderer=function(a,b,c){var d=this.componentRecipes.newCellRenderer(a.filterParams,c);if(null!=d)this.bindToHtml(d,b);else if(null==c.valueFormatted&&null==c.value){var e=this.gridOptionsWrapper.getLocaleTextFunc();b.innerText="("+e("blanks","Blanks")+")"}else b.innerText=null!=c.valueFormatted?c.valueFormatted:c.value;return d},a.prototype.useRichSelectCellRenderer=function(a,b,c){var d=this.componentRecipes.newCellRenderer(a.cellEditorParams,c);return null!=d?this.bindToHtml(d,b):b.innerText=null!=c.valueFormatted?c.valueFormatted:c.value,d},a.prototype.useInnerCellRenderer=function(a,b,c,d){var e=this,f=null,g=this.componentResolver.getComponentToUse(a,"innerRenderer",null);if(g&&null!=g.component&&g.source!=h.ComponentSource.DEFAULT)f=this.componentRecipes.newInnerCellRenderer(a,d);else{var j=this.componentResolver.getComponentToUse(b,"cellRenderer",null);f=j&&j.source!=h.ComponentSource.DEFAULT?this.componentRecipes.newCellRenderer(b,d):j&&j.source==h.ComponentSource.DEFAULT&&i._.get(b,"cellRendererParams.innerRenderer",null)?this.componentRecipes.newInnerCellRenderer(b.cellRendererParams,d):this.componentRecipes.newCellRenderer({},d)}return null!=f?f.then(function(a){return null==a?void(c.innerText=null!=d.valueFormatted?d.valueFormatted:d.value):void e.bindToHtml(f,c)}):c.innerText=null!=d.valueFormatted?d.valueFormatted:d.value,f},a.prototype.useFullWidthGroupRowInnerCellRenderer=function(a,b){var c=this.componentRecipes.newFullWidthGroupRowInnerCellRenderer(b);return null!=c?this.bindToHtml(c,a):a.innerText=null!=b.valueFormatted?b.valueFormatted:b.value,c},a.prototype.bindToHtml=function(a,b){return a.then(function(a){var c=a.getGui();null!=c&&("object"==typeof c?b.appendChild(c):b.innerHTML=c)}),a},d([f.Autowired("componentRecipes"),e("design:type",g.ComponentRecipes)],a.prototype,"componentRecipes",void 0),d([f.Autowired("componentResolver"),e("design:type",h.ComponentResolver)],a.prototype,"componentResolver",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",j.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([f.Bean("cellRendererService")],a)}();b.CellRendererService=k},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(13),h=c(0),i=c(3),j=c(25),k=c(1),l=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.scrollY=0,b.uiBodyHeight=0,b}return d(b,a),b.prototype.postConstruct=function(){this.addDestroyableEventListener(this.eventService,j.Events.EVENT_BODY_HEIGHT_CHANGED,this.update.bind(this)),this.scrollBarWidth=k._.getScrollbarWidth(),this.maxDivHeight=k._.getMaxDivHeight()},b.prototype.registerGridComp=function(a){this.gridPanel=a},b.prototype.isScaling=function(){return this.scaling},b.prototype.getOffset=function(){return this.offset},b.prototype.update=function(){if(this.scaling){var a=this.gridPanel.getVScrollPosition().top,b=this.getUiBodyHeight(),c=a!==this.scrollY||b!==this.uiBodyHeight;c&&(this.scrollY=a,this.uiBodyHeight=b,this.calculateOffset())}},b.prototype.calculateOffset=function(){this.uiContainerHeight=this.maxDivHeight,this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var a=this.scrollY/this.maxScrollY;this.setOffset(a*this.pixelsToShave)},b.prototype.clearOffset=function(){this.uiContainerHeight=this.modelHeight,this.pixelsToShave=0,this.setOffset(0)},b.prototype.setOffset=function(a){var b="number"==typeof a?Math.floor(a):null;this.offset!==b&&(this.offset=b,this.eventService.dispatchEvent({type:j.Events.EVENT_HEIGHT_SCALE_CHANGED}))},b.prototype.setModelHeight=function(a){this.modelHeight=a,this.scaling=this.maxDivHeight>0&&a>this.maxDivHeight,this.scaling?this.calculateOffset():this.clearOffset()},b.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},b.prototype.getRealPixelPosition=function(a){var b=a-this.offset;return b},b.prototype.getUiBodyHeight=function(){var a=this.gridPanel.getVScrollPosition(),b=a.bottom-a.top;return this.gridPanel.isHorizontalScrollShowing()&&(b-=this.scrollBarWidth),b},b.prototype.getScrollPositionForPixel=function(a){if(this.pixelsToShave<=0)return a;var b=this.modelHeight-this.getUiBodyHeight(),c=a/b,d=this.maxScrollY*c;return d},e([h.Autowired("eventService"),f("design:type",i.EventService)],b.prototype,"eventService",void 0),e([h.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b=e([h.Bean("heightScaler")],b)}(g.BeanStub);b.HeightScaler=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(2),h=c(4),i=c(3),j=c(12),k=c(5),l=c(0),m=c(0),n=c(0),o=c(0),p=function(){function a(){this.consuming=!1}return a.prototype.setBeans=function(a){this.logger=a.create("AlignedGridsService")},a.prototype.registerGridComp=function(a){this.gridPanel=a},a.prototype.init=function(){this.eventService.addEventListener(k.Events.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(k.Events.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(k.Events.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(k.Events.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(k.Events.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(k.Events.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},a.prototype.fireEvent=function(a){if(!this.consuming){var b=this.gridOptionsWrapper.getAlignedGrids();b&&b.forEach(function(b){if(b.api){var c=b.api.__getAlignedGridService();a(c)}})}},a.prototype.onEvent=function(a){this.consuming=!0,a(),this.consuming=!1},a.prototype.fireColumnEvent=function(a){this.fireEvent(function(b){b.onColumnEvent(a)})},a.prototype.fireScrollEvent=function(a){"horizontal"===a.direction&&this.fireEvent(function(b){b.onScrollEvent(a)})},a.prototype.onScrollEvent=function(a){var b=this;this.onEvent(function(){b.gridPanel.setHorizontalScrollPosition(a.left)})},a.prototype.getMasterColumns=function(a){var b=[];return a.columns?a.columns.forEach(function(a){b.push(a)}):a.column&&b.push(a.column),b},a.prototype.getColumnIds=function(a){var b=[];return a.columns?a.columns.forEach(function(a){b.push(a.getColId())}):a.columns&&b.push(a.column.getColId()),b},a.prototype.onColumnEvent=function(a){var b=this;this.onEvent(function(){switch(a.type){case k.Events.EVENT_COLUMN_MOVED:case k.Events.EVENT_COLUMN_VISIBLE:case k.Events.EVENT_COLUMN_PINNED:case k.Events.EVENT_COLUMN_RESIZED:var c=a;b.processColumnEvent(c);break;case k.Events.EVENT_COLUMN_GROUP_OPENED:var d=a;b.processGroupOpenedEvent(d);break;case k.Events.EVENT_COLUMN_PIVOT_CHANGED:console.warn("ag-Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}})},a.prototype.processGroupOpenedEvent=function(a){var b,c=a.columnGroup;if(c){var d=c.getGroupId();b=this.columnController.getOriginalColumnGroup(d)}c&&!b||(this.logger.log("onColumnEvent-> processing "+event+" expanded = "+c.isExpanded()),this.columnController.setColumnGroupOpened(b,c.isExpanded(),"alignedGridChanged"))},a.prototype.processColumnEvent=function(a){var b,c=this,d=a.column;if(d&&(b=this.columnController.getPrimaryColumn(d.getColId())),!d||b){var e=this.getColumnIds(a),f=this.getMasterColumns(a);switch(a.type){case k.Events.EVENT_COLUMN_MOVED:var g=a;this.logger.log("onColumnEvent-> processing "+a.type+" toIndex = "+g.toIndex),this.columnController.moveColumns(e,g.toIndex,"alignedGridChanged");break;case k.Events.EVENT_COLUMN_VISIBLE:var h=a;this.logger.log("onColumnEvent-> processing "+a.type+" visible = "+h.visible),this.columnController.setColumnsVisible(e,h.visible,"alignedGridChanged");break;case k.Events.EVENT_COLUMN_PINNED:var i=a;this.logger.log("onColumnEvent-> processing "+a.type+" pinned = "+i.pinned),this.columnController.setColumnsPinned(e,i.pinned,"alignedGridChanged");break;case k.Events.EVENT_COLUMN_RESIZED:var j=a;f.forEach(function(b){c.logger.log("onColumnEvent-> processing "+a.type+" actualWidth = "+b.getActualWidth()),c.columnController.setColumnWidth(b.getColId(),b.getActualWidth(),!1,j.finished,"alignedGridChanged")})}}},d([n.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([n.Autowired("columnController"),e("design:type",h.ColumnController)],a.prototype,"columnController",void 0),d([n.Autowired("eventService"),e("design:type",i.EventService)],a.prototype,"eventService",void 0),d([f(0,m.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[j.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),d([o.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([l.Bean("alignedGridsService")],a)}();b.AlignedGridsService=p},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(2),g=c(0),h=c(40),i=function(){function a(){}return a.prototype.addResizeBar=function(a){var b=this,c={dragStartPixels:0,eElement:a.eResizeBar,onDragStart:this.onDragStart.bind(this,a),onDragStop:this.onDragStop.bind(this,a),onDragging:this.onDragging.bind(this,a)};this.dragService.addDragSource(c,!0);var d=function(){return b.dragService.removeDragSource(c)};return d},a.prototype.onDragStart=function(a,b){this.draggingStarted=!0,this.dragStartX=b.clientX,this.setResizeIcons();var c=b instanceof MouseEvent&&b.shiftKey===!0;a.onResizeStart(c)},a.prototype.setResizeIcons=function(){this.oldBodyCursor=this.eGridDiv.style.cursor,this.oldMsUserSelect=this.eGridDiv.style.msUserSelect,this.oldWebkitUserSelect=this.eGridDiv.style.webkitUserSelect,this.eGridDiv.style.cursor="col-resize",this.eGridDiv.style.msUserSelect="none",this.eGridDiv.style.webkitUserSelect="none"},a.prototype.onDragStop=function(a,b){a.onResizeEnd(this.resizeAmount),this.resetIcons()},a.prototype.resetIcons=function(){this.eGridDiv.style.cursor=this.oldBodyCursor,this.eGridDiv.style.msUserSelect=this.oldMsUserSelect,this.eGridDiv.style.webkitUserSelect=this.oldWebkitUserSelect},a.prototype.onDragging=function(a,b){this.resizeAmount=b.clientX-this.dragStartX,a.onResizing(this.resizeAmount)},d([g.Autowired("gridOptionsWrapper"),e("design:type",f.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([g.Autowired("dragService"),e("design:type",h.DragService)],a.prototype,"dragService",void 0),d([g.Autowired("eGridDiv"),e("design:type",HTMLElement)],a.prototype,"eGridDiv",void 0),a=d([g.Bean("horizontalResizeService")],a)}();b.HorizontalResizeService=i},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(8),h=c(11),i=c(1),j=c(0),k=c(2),l=function(a){function b(){var b=a.call(this)||this;return b.selected=!1,b.readOnly=!1,b.passive=!1,b}return d(b,a),b.prototype.preConstruct=function(){this.setTemplate(b.TEMPLATE)},b.prototype.postConstruct=function(){this.loadIcons(),this.updateIcons(),this.props.label&&(this.eLabel.innerText=this.props.label)},b.prototype.loadIcons=function(){i.Utils.removeAllChildren(this.eChecked),i.Utils.removeAllChildren(this.eUnchecked),i.Utils.removeAllChildren(this.eIndeterminate),this.readOnly?(this.eChecked.appendChild(i.Utils.createIconNoSpan("checkboxCheckedReadOnly",this.gridOptionsWrapper,null)),this.eUnchecked.appendChild(i.Utils.createIconNoSpan("checkboxUncheckedReadOnly",this.gridOptionsWrapper,null)),this.eIndeterminate.appendChild(i.Utils.createIconNoSpan("checkboxIndeterminateReadOnly",this.gridOptionsWrapper,null))):(this.eChecked.appendChild(i.Utils.createIconNoSpan("checkboxChecked",this.gridOptionsWrapper,null)),this.eUnchecked.appendChild(i.Utils.createIconNoSpan("checkboxUnchecked",this.gridOptionsWrapper,null)),this.eIndeterminate.appendChild(i.Utils.createIconNoSpan("checkboxIndeterminate",this.gridOptionsWrapper,null)))},b.prototype.onClick=function(a){i.Utils.addAgGridEventPath(a),this.readOnly||this.toggle()},b.prototype.getNextValue=function(){return void 0===this.selected||!this.selected},b.prototype.setPassive=function(a){this.passive=a},b.prototype.setReadOnly=function(a){this.readOnly=a,this.loadIcons()},b.prototype.isReadOnly=function(){return this.readOnly},b.prototype.isSelected=function(){return this.selected},b.prototype.toggle=function(){var a=this.getNextValue();if(this.passive){var c={type:b.EVENT_CHANGED,selected:a};this.dispatchEvent(c)}else this.setSelected(a)},b.prototype.setSelected=function(a){if(this.selected!==a){a===!0?this.selected=!0:a===!1?this.selected=!1:this.selected=void 0,this.updateIcons();var c={type:b.EVENT_CHANGED,selected:this.selected};this.dispatchEvent(c)}},b.prototype.updateIcons=function(){i.Utils.setVisible(this.eChecked,this.selected===!0),i.Utils.setVisible(this.eUnchecked,this.selected===!1),i.Utils.setVisible(this.eIndeterminate,void 0===this.selected)},b.EVENT_CHANGED="change",b.TEMPLATE='<span class="ag-checkbox" role="presentation">  <span class="ag-checkbox-checked" role="presentation"></span>  <span class="ag-checkbox-unchecked" role="presentation"></span>  <span class="ag-checkbox-indeterminate" role="presentation"></span>  <span class="ag-checkbox-label" role="presentation"></span></span>',e([j.Autowired("gridOptionsWrapper"),f("design:type",k.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([h.QuerySelector(".ag-checkbox-checked"),f("design:type",HTMLElement)],b.prototype,"eChecked",void 0),e([h.QuerySelector(".ag-checkbox-unchecked"),f("design:type",HTMLElement)],b.prototype,"eUnchecked",void 0),e([h.QuerySelector(".ag-checkbox-indeterminate"),f("design:type",HTMLElement)],b.prototype,"eIndeterminate",void 0),e([h.QuerySelector(".ag-checkbox-label"),f("design:type",HTMLElement)],b.prototype,"eLabel",void 0),e([j.PreConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"preConstruct",null),e([j.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),e([h.Listener("click"),f("design:type",Function),f("design:paramtypes",[MouseEvent]),f("design:returntype",void 0)],b.prototype,"onClick",null),b}(g.Component);b.AgCheckbox=l},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(1),f=c(14),g=c(13),h=function(a){function b(c,d){var e=a.call(this)||this;return e.version=0,e.state=b.STATE_DIRTY,e.rowNodeCacheParams=d,e.blockNumber=c,e.startRow=c*d.blockSize,e.endRow=e.startRow+d.blockSize,e}return d(b,a),b.prototype.isAnyNodeOpen=function(a){var b=!1;return this.forEachNodeCallback(function(a){a.expanded&&(b=!0)},a),b},b.prototype.forEachNodeCallback=function(a,b){for(var c=this.startRow;c<this.endRow;c++)if(c<b){var d=this.getRowUsingLocalIndex(c);a(d,c)}},b.prototype.forEachNode=function(a,b,c,d){this.forEachNodeCallback(function(c){a(c,b.next()),d&&c.childrenCache&&c.childrenCache.forEachNodeDeep(a,b)},c)},b.prototype.forEachNodeDeep=function(a,b,c){this.forEachNode(a,b,c,!0)},b.prototype.forEachNodeShallow=function(a,b,c){this.forEachNode(a,b,c,!1)},b.prototype.getVersion=function(){return this.version},b.prototype.getLastAccessed=function(){return this.lastAccessed},b.prototype.getRowUsingLocalIndex=function(a,b){void 0===b&&(b=!1),b||(this.lastAccessed=this.rowNodeCacheParams.lastAccessedSequence.next());var c=a-this.startRow;return this.rowNodes[c]},b.prototype.init=function(a){this.beans=a,this.createRowNodes()},b.prototype.getStartRow=function(){return this.startRow},b.prototype.getEndRow=function(){return this.endRow},b.prototype.getBlockNumber=function(){return this.blockNumber},b.prototype.setDirty=function(){this.version++,this.state=b.STATE_DIRTY},b.prototype.setDirtyAndPurge=function(){this.setDirty(),this.rowNodes.forEach(function(a){a.setData(null)})},b.prototype.getState=function(){return this.state},b.prototype.setRowNode=function(a,b){var c=a-this.startRow;this.rowNodes[c]=b},b.prototype.setBlankRowNode=function(a){var b=a-this.startRow,c=this.createBlankRowNode(a);return this.rowNodes[b]=c,c},b.prototype.setNewData=function(a,b){var c=this.setBlankRowNode(a);return this.setDataAndId(c,b,this.startRow+a),c},b.prototype.createBlankRowNode=function(a){var b=new f.RowNode;return this.beans.context.wireBean(b),b.setRowHeight(this.rowNodeCacheParams.rowHeight),b},b.prototype.createRowNodes=function(){this.rowNodes=[];for(var a=0;a<this.rowNodeCacheParams.blockSize;a++){var b=this.startRow+a,c=this.createBlankRowNode(b);this.rowNodes.push(c)}},b.prototype.load=function(){this.state=b.STATE_LOADING,this.loadFromDatasource()},b.prototype.pageLoadFailed=function(){this.state=b.STATE_FAILED;var a={type:b.EVENT_LOAD_COMPLETE,success:!1,page:this,lastRow:null};this.dispatchEvent(a)},b.prototype.populateWithRowData=function(a){var b=this,c=[];this.rowNodes.forEach(function(d,e){var f=a[e];d.stub&&c.push(d),b.setDataAndId(d,f,b.startRow+e)}),c.length>0&&this.beans.rowRenderer.redrawRows(c)},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.rowNodes.forEach(function(a){a.childrenCache&&(a.childrenCache.destroy(),a.childrenCache=null),a.clearRowTop()})},b.prototype.pageLoaded=function(a,c,d){a===this.version&&(this.state=b.STATE_LOADED,this.populateWithRowData(c)),d=e.Utils.cleanNumber(d);var f={type:b.EVENT_LOAD_COMPLETE,success:!0,page:this,lastRow:d};this.dispatchEvent(f)},b.EVENT_LOAD_COMPLETE="loadComplete",b.STATE_DIRTY="dirty",b.STATE_LOADING="loading",b.STATE_LOADED="loaded",b.STATE_FAILED="failed",b}(g.BeanStub);b.RowNodeBlock=h},function(a,b,c){"use strict";function d(a){(a.rowDeselected||a.onRowDeselected)&&console.warn("ag-grid: as of v3.4 rowDeselected no longer exists. Please check the docs.")}Object.defineProperty(b,"__esModule",{value:!0});var e=c(5),f=c(90),g=c(1),h=c(2),i=function(){function a(){}return a.getEventCallbacks=function(){return a.EVENT_CALLBACKS||(a.EVENT_CALLBACKS=[],a.EVENT_CALLBACKS_NO_PREFIX=[],a.EVENTS.forEach(function(b){a.EVENT_CALLBACKS.push(a.getCallbackForEvent(b)),a.EVENT_CALLBACKS_NO_PREFIX.push(b)})),a.EVENT_CALLBACKS},a.copyAttributesToGridOptions=function(b,c,e){void 0===e&&(e=!1),d(c),"object"!=typeof b&&(b={});var f=b;return a.ARRAY_PROPERTIES.concat(a.STRING_PROPERTIES).concat(a.OBJECT_PROPERTIES).concat(a.FUNCTION_PROPERTIES).forEach(function(a){"undefined"!=typeof c[a]&&(f[a]=c[a])}),a.BOOLEAN_PROPERTIES.forEach(function(b){"undefined"!=typeof c[b]&&(f[b]=a.toBoolean(c[b]))}),a.NUMBER_PROPERTIES.forEach(function(b){"undefined"!=typeof c[b]&&(f[b]=a.toNumber(c[b]))}),a.getEventCallbacks().forEach(function(a){"undefined"!=typeof c[a]&&(f[a]=c[a])}),e||a.EVENT_CALLBACKS_NO_PREFIX.forEach(function(b){var d=a.getCallbackForEvent(b);"undefined"==typeof c[b]&&"undefined"==typeof c[d]||h.GridOptionsWrapper.checkEventDeprecation(b)}),b},a.getCallbackForEvent=function(a){return!a||a.length<2?a:"on"+a[0].toUpperCase()+a.substr(1)},a.processOnChange=function(b,c,f,h){if(b){d(b);var i=c;a.ARRAY_PROPERTIES.concat(a.OBJECT_PROPERTIES).concat(a.STRING_PROPERTIES).forEach(function(a){b[a]&&(i[a]=b[a].currentValue)}),a.BOOLEAN_PROPERTIES.forEach(function(c){b[c]&&(i[c]=a.toBoolean(b[c].currentValue))}),a.NUMBER_PROPERTIES.forEach(function(c){b[c]&&(i[c]=a.toNumber(b[c].currentValue))}),a.getEventCallbacks().forEach(function(a){b[a]&&(i[a]=b[a].currentValue)}),b.showToolPanel&&f.showToolPanel(a.toBoolean(b.showToolPanel.currentValue)),b.quickFilterText&&f.setQuickFilter(b.quickFilterText.currentValue),b.rowData&&f.setRowData(b.rowData.currentValue),b.pinnedTopRowData&&f.setPinnedTopRowData(b.pinnedTopRowData.currentValue),b.pinnedBottomRowData&&f.setPinnedBottomRowData(b.pinnedBottomRowData.currentValue),b.columnDefs&&f.setColumnDefs(b.columnDefs.currentValue,"gridOptionsChanged"),b.datasource&&f.setDatasource(b.datasource.currentValue),b.headerHeight&&f.setHeaderHeight(a.toNumber(b.headerHeight.currentValue)),b.paginationPageSize&&f.paginationSetPageSize(a.toNumber(b.paginationPageSize.currentValue)),b.pivotMode&&h.setPivotMode(a.toBoolean(b.pivotMode.currentValue)),b.groupRemoveSingleChildren&&f.setGroupRemoveSingleChildren(a.toBoolean(b.groupRemoveSingleChildren.currentValue)),b.suppressRowDrag&&f.setSuppressRowDrag(a.toBoolean(b.suppressRowDrag.currentValue)),b.gridAutoHeight&&f.setGridAutoHeight(a.toBoolean(b.gridAutoHeight.currentValue)),b.suppressClipboardPaste&&f.setSuppressClipboardPaste(a.toBoolean(b.suppressClipboardPaste.currentValue));var j={type:e.Events.EVENT_COMPONENT_STATE_CHANGED,api:c.api,columnApi:c.columnApi};g.Utils.iterateObject(b,function(a,b){j[a]=b}),f.dispatchEvent(j)}},a.toBoolean=function(a){return"boolean"==typeof a?a:"string"==typeof a&&("TRUE"===a.toUpperCase()||""==a)},a.toNumber=function(a){return"number"==typeof a?a:"string"==typeof a?Number(a):void 0},a.EVENTS=[],a.STRING_PROPERTIES=f.PropertyKeys.STRING_PROPERTIES,a.OBJECT_PROPERTIES=f.PropertyKeys.OBJECT_PROPERTIES,a.ARRAY_PROPERTIES=f.PropertyKeys.ARRAY_PROPERTIES,a.NUMBER_PROPERTIES=f.PropertyKeys.NUMBER_PROPERTIES,a.BOOLEAN_PROPERTIES=f.PropertyKeys.BOOLEAN_PROPERTIES,a.FUNCTION_PROPERTIES=f.PropertyKeys.FUNCTION_PROPERTIES,a.ALL_PROPERTIES=f.PropertyKeys.ALL_PROPERTIES,a}();b.ComponentUtil=i,g.Utils.iterateObject(e.Events,function(a,b){i.EVENTS.push(b)})},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(4),h=c(9),i=c(1),j=c(17),k=c(2),l=c(48),m=c(38),n=c(83),o=c(26),p=c(30),q=function(){function a(a,b,c,d,e,f){this.columnController=a,this.valueService=b,this.gridOptionsWrapper=c,this.processCellCallback=d,this.processHeaderCallback=e,this.cellAndHeaderEscaper=f}return a.prototype.extractHeaderValue=function(a){var b=this.getHeaderName(this.processHeaderCallback,a);return null!==b&&void 0!==b||(b=""),this.cellAndHeaderEscaper?this.cellAndHeaderEscaper(b):b},a.prototype.extractRowCellValue=function(a,b,c,d){var e,f=this.columnController.getRowGroupColumns().length>0;return e=d.group&&f&&0===b?this.createValueForGroupNode(d):this.valueService.getValue(a,d),
e=this.processCell(d,a,e,this.processCellCallback,c),null!==e&&void 0!==e||(e=""),this.cellAndHeaderEscaper?this.cellAndHeaderEscaper(e):e},a.prototype.getHeaderName=function(a,b){return a?a({column:b,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}):this.columnController.getDisplayNameForColumn(b,"csv",!0)},a.prototype.createValueForGroupNode=function(a){for(var b=[a.key];a.parent;)a=a.parent,b.push(a.key);return b.reverse().join(" -> ")},a.prototype.processCell=function(a,b,c,d,e){return d?d({column:b,node:a,value:c,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),type:e}):c},a}();b.BaseGridSerializingSession=q;var r=function(){function a(){}return a.prototype.serialize=function(a,b){function c(b){if((!f||!b.group)&&(!k||!b.footer)&&(!r||b.isSelected())&&!(l&&"top"===b.rowPinned||m&&"bottom"===b.rowPinned)){var c=b.level===-1;if(!c||b.leafGroup){var e=u({node:b,api:v,context:w});if(!e){var g=a.onNewBodyRow();d.forEach(function(a,c){g.onColumn(a,c,b)})}}}}var d,e=function(){return!1},f=b&&b.skipGroups,g=b&&b.skipHeader,j=b&&b.columnGroups,k=b&&b.skipFooters,l=b&&b.skipPinnedTop,m=b&&b.skipPinnedBottom,o=b&&b.customHeader,p=b&&b.customFooter,q=b&&b.allColumns,r=b&&b.onlySelected,s=b&&b.columnKeys,t=b&&b.onlySelectedAllPages,u=b&&b.shouldRowBeSkipped||e,v=this.gridOptionsWrapper.getApi(),w=this.gridOptionsWrapper.getContext(),x=this.columnController.isPivotMode(),y=this.rowModel.getType()===h.Constants.ROW_MODEL_TYPE_CLIENT_SIDE,z=!y&&r;if(d=i.Utils.existsAndNotEmpty(s)?this.columnController.getGridColumns(s):q&&!x?this.columnController.getAllPrimaryColumns():this.columnController.getAllDisplayedColumns(),!d||0===d.length)return"";if(a.prepare(d),o&&a.addCustomHeader(b.customHeader),j){var A=new n.GroupInstanceIdCreator,B=this.displayedGroupCreator.createDisplayedGroups(d,this.columnController.getGridBalancedTree(),A);this.recursivelyAddHeaderGroups(B,a)}if(!g){var C=a.onNewHeaderRow();d.forEach(function(a,b){C.onColumn(a,b,null)})}if(this.pinnedRowModel.forEachPinnedTopRow(c),x)this.rowModel.forEachPivotNode?this.rowModel.forEachPivotNode(c):this.rowModel.forEachNode(c);else if(t||z){var D=this.selectionController.getSelectedNodes();D.forEach(function(a){c(a)})}else y?this.rowModel.forEachNodeAfterFilterAndSort(c):this.rowModel.forEachNode(c);return this.pinnedRowModel.forEachPinnedBottomRow(c),p&&a.addCustomFooter(b.customFooter),a.parse()},a.prototype.recursivelyAddHeaderGroups=function(a,b){var c=[];a.forEach(function(a){var b=a;b.getChildren&&b.getChildren().forEach(function(a){return c.push(a)})}),a.length>0&&a[0]instanceof o.ColumnGroup&&this.doAddHeaderHeader(b,a),c&&c.length>0&&this.recursivelyAddHeaderGroups(c,b)},a.prototype.doAddHeaderHeader=function(a,b){var c=this,d=a.onNewHeaderGroupingRow(),e=0;b.forEach(function(a){var b=a,f=(b.getDefinition(),c.columnController.getDisplayNameForColumnGroup(b,"header"));d.onColumn(f,e++,b.getLeafColumns().length-1)})},d([f.Autowired("displayedGroupCreator"),e("design:type",l.DisplayedGroupCreator)],a.prototype,"displayedGroupCreator",void 0),d([f.Autowired("columnController"),e("design:type",g.ColumnController)],a.prototype,"columnController",void 0),d([f.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([f.Autowired("pinnedRowModel"),e("design:type",p.PinnedRowModel)],a.prototype,"pinnedRowModel",void 0),d([f.Autowired("selectionController"),e("design:type",j.SelectionController)],a.prototype,"selectionController",void 0),d([f.Autowired("balancedColumnTreeBuilder"),e("design:type",m.BalancedColumnTreeBuilder)],a.prototype,"balancedColumnTreeBuilder",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",k.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([f.Bean("gridSerializer")],a)}();b.GridSerializer=r;var s;!function(a){a[a.HEADER_GROUPING=0]="HEADER_GROUPING",a[a.HEADER=1]="HEADER",a[a.BODY=2]="BODY"}(s=b.RowType||(b.RowType={}))},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(9),e=c(1),f=c(23),g=function(){function a(a,b){this.rowIndex=a,this.floating=e.Utils.makeNull(b)}return a.prototype.isFloatingTop=function(){return this.floating===d.Constants.PINNED_TOP},a.prototype.isFloatingBottom=function(){return this.floating===d.Constants.PINNED_BOTTOM},a.prototype.isNotFloating=function(){return!this.isFloatingBottom()&&!this.isFloatingTop()},a.prototype.equals=function(a){return this.rowIndex===a.rowIndex&&this.floating===a.floating},a.prototype.toString=function(){return"rowIndex = "+this.rowIndex+", floating = "+this.floating},a.prototype.getGridCell=function(a){var b={rowIndex:this.rowIndex,floating:this.floating,column:a};return new f.GridCell(b)},a.prototype.before=function(a){var b=a.floating;switch(this.floating){case d.Constants.PINNED_TOP:if(b!==d.Constants.PINNED_TOP)return!0;break;case d.Constants.PINNED_BOTTOM:if(b!==d.Constants.PINNED_BOTTOM)return!1;break;default:if(e.Utils.exists(b))return b!==d.Constants.PINNED_TOP}return this.rowIndex<a.rowIndex},a}();b.GridRow=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(8),h=c(14),i=c(1),j=c(0),k=c(2),l=c(5),m=c(3),n=c(6),o=c(7),p=function(a){function b(){return a.call(this,'<span class="ag-selection-checkbox"/>')||this}return d(b,a),b.prototype.createAndAddIcons=function(){this.eCheckedIcon=i.Utils.createIconNoSpan("checkboxChecked",this.gridOptionsWrapper,this.column),this.eUncheckedIcon=i.Utils.createIconNoSpan("checkboxUnchecked",this.gridOptionsWrapper,this.column),this.eIndeterminateIcon=i.Utils.createIconNoSpan("checkboxIndeterminate",this.gridOptionsWrapper,this.column);var a=this.getGui();a.appendChild(this.eCheckedIcon),a.appendChild(this.eUncheckedIcon),a.appendChild(this.eIndeterminateIcon)},b.prototype.onDataChanged=function(){this.onSelectionChanged()},b.prototype.onSelectableChanged=function(){this.showOrHideSelect()},b.prototype.onSelectionChanged=function(){var a=this.rowNode.isSelected();i.Utils.setVisible(this.eCheckedIcon,a===!0),i.Utils.setVisible(this.eUncheckedIcon,a===!1),i.Utils.setVisible(this.eIndeterminateIcon,"boolean"!=typeof a)},b.prototype.onCheckedClicked=function(){var a=this.gridOptionsWrapper.isGroupSelectsFiltered(),b=this.rowNode.setSelectedParams({newValue:!1,groupSelectsFiltered:a});return b},b.prototype.onUncheckedClicked=function(a){var b=this.gridOptionsWrapper.isGroupSelectsFiltered(),c=this.rowNode.setSelectedParams({newValue:!0,rangeSelect:a.shiftKey,groupSelectsFiltered:b});return c},b.prototype.onIndeterminateClicked=function(a){var b=this.onUncheckedClicked(a);0===b&&this.onCheckedClicked()},b.prototype.init=function(a){this.rowNode=a.rowNode,this.column=a.column,this.createAndAddIcons(),this.onSelectionChanged(),this.addGuiEventListener("click",function(a){return i.Utils.stopPropagationForAgGrid(a)}),this.addGuiEventListener("dblclick",function(a){return i.Utils.stopPropagationForAgGrid(a)}),this.addDestroyableEventListener(this.eCheckedIcon,"click",this.onCheckedClicked.bind(this)),this.addDestroyableEventListener(this.eUncheckedIcon,"click",this.onUncheckedClicked.bind(this)),this.addDestroyableEventListener(this.eIndeterminateIcon,"click",this.onIndeterminateClicked.bind(this)),this.addDestroyableEventListener(this.rowNode,h.RowNode.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,h.RowNode.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,h.RowNode.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.isRowSelectableFunc=this.gridOptionsWrapper.getIsRowSelectableFunc();var b=this.isRowSelectableFunc||this.checkboxCallbackExists();b&&(this.addDestroyableEventListener(this.eventService,l.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelect.bind(this)),this.showOrHideSelect())},b.prototype.showOrHideSelect=function(){var a=this.rowNode.selectable;a&&this.checkboxCallbackExists()&&(a=this.column.isCellCheckboxSelection(this.rowNode)),this.setVisible(a)},b.prototype.checkboxCallbackExists=function(){var a=this.column?this.column.getColDef():null;return a&&"function"==typeof a.checkboxSelection},e([j.Autowired("gridOptionsWrapper"),f("design:type",k.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([j.Autowired("eventService"),f("design:type",m.EventService)],b.prototype,"eventService",void 0),e([j.Autowired("gridApi"),f("design:type",n.GridApi)],b.prototype,"gridApi",void 0),e([j.Autowired("columnApi"),f("design:type",o.ColumnApi)],b.prototype,"columnApi",void 0),b}(g.Component);b.CheckboxSelectionComponent=p},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f,g=c(67),h=c(0),i=c(68),j=c(125),k=c(126),l=c(91),m=c(27),n=c(72),o=c(71),p=c(70),q=c(50),r=c(75),s=c(92),t=c(93),u=c(94),v=c(95),w=c(96),x=c(127),y=c(128),z=c(1);!function(a){a[a.DEFAULT=0]="DEFAULT",a[a.REGISTERED=1]="REGISTERED"}(f=b.RegisteredComponentSource||(b.RegisteredComponentSource={}));var A=function(){function a(){this.agGridDefaults={agDateInput:i.DefaultDateComponent,agColumnHeader:j.HeaderComp,agColumnGroupHeader:k.HeaderGroupComp,agSetColumnFloatingFilter:l.SetFloatingFilterComp,agTextColumnFloatingFilter:l.TextFloatingFilterComp,agNumberColumnFloatingFilter:l.NumberFloatingFilterComp,agDateColumnFloatingFilter:l.DateFloatingFilterComp,agAnimateShowChangeCellRenderer:o.AnimateShowChangeCellRenderer,agAnimateSlideCellRenderer:p.AnimateSlideCellRenderer,agGroupCellRenderer:n.GroupCellRenderer,agGroupRowRenderer:n.GroupCellRenderer,agLoadingCellRenderer:q.LoadingCellRenderer,agCellEditor:g.TextCellEditor,agTextCellEditor:g.TextCellEditor,agSelectCellEditor:r.SelectCellEditor,agPopupTextCellEditor:s.PopupTextCellEditor,agPopupSelectCellEditor:t.PopupSelectCellEditor,agLargeTextCellEditor:u.LargeTextCellEditor,agTextColumnFilter:v.TextFilter,agNumberColumnFilter:w.NumberFilter,agDateColumnFilter:i.DateFilter,agLoadingOverlay:x.LoadingOverlayComponent,agNoRowsOverlay:y.NoRowsOverlayComponent},this.agDeprecatedNames={set:{newComponentName:"agSetColumnFilter",propertyHolder:"filter"},text:{newComponentName:"agTextColumnFilter",propertyHolder:"filter"},number:{newComponentName:"agNumberColumnFilter",propertyHolder:"filter"},date:{newComponentName:"agDateColumnFilter",propertyHolder:"filter"},group:{newComponentName:"agGroupCellRenderer",propertyHolder:"cellRenderer"},animateShowChange:{newComponentName:"agAnimateShowChangeCellRenderer",propertyHolder:"cellRenderer"},animateSlide:{newComponentName:"agAnimateSlideCellRenderer",propertyHolder:"cellRenderer"},select:{newComponentName:"agSelectCellEditor",propertyHolder:"cellEditor"},largeText:{newComponentName:"agLargeTextCellEditor",propertyHolder:"cellEditor"},popupSelect:{newComponentName:"agPopupSelectCellEditor",propertyHolder:"cellEditor"},popupText:{newComponentName:"agPopupTextCellEditor",propertyHolder:"cellEditor"},richSelect:{newComponentName:"agRichSelectCellEditor",propertyHolder:"cellEditor"},headerComponent:{newComponentName:"agColumnHeader",propertyHolder:"headerComponent"}},this.jsComponents={},this.frameworkComponents={}}return a.prototype.init=function(){var a=this;null!=this.gridOptions.components&&Object.keys(this.gridOptions.components).forEach(function(b){a.registerComponent(b,a.gridOptions.components[b])}),null!=this.gridOptions.frameworkComponents&&Object.keys(this.gridOptions.frameworkComponents).forEach(function(b){a.registerFwComponent(b,a.gridOptions.frameworkComponents[b])})},a.prototype.registerDefaultComponent=function(a,b,c){void 0===c&&(c=!0);var d=this.translateIfDeprecated(a);return this.agGridDefaults[d]?void console.error("Trying to overwrite a default component. You should call registerComponent"):void(this.agGridDefaults[d]=b)},a.prototype.registerComponent=function(a,b){var c=this.translateIfDeprecated(a);return this.frameworkComponents[c]?void console.error("Trying to register a component that you have already registered for frameworks: "+c):void(this.jsComponents[c]=b)},a.prototype.registerFwComponent=function(a,b){var c=this.translateIfDeprecated(a);return this.jsComponents[c]?void console.error("Trying to register a component that you have already registered for plain javascript: "+c):void(this.frameworkComponents[c]=b)},a.prototype.retrieve=function(a){var b=this.translateIfDeprecated(a);return this.frameworkComponents[b]?{type:m.ComponentType.FRAMEWORK,component:this.frameworkComponents[b],source:f.REGISTERED}:this.jsComponents[b]?{type:m.ComponentType.AG_GRID,component:this.jsComponents[b],source:f.REGISTERED}:this.agGridDefaults[b]?this.agGridDefaults[b]?{type:m.ComponentType.AG_GRID,component:this.agGridDefaults[b],source:f.DEFAULT}:null:(Object.keys(this.agGridDefaults).indexOf(b)<0&&console.warn("ag-grid: Looking for component ["+b+"] but it wasn't found."),null)},a.prototype.translateIfDeprecated=function(a){var b=this.agDeprecatedNames[a];return null!=b?(z._.doOnce(function(){console.warn("ag-grid. Since v15.0 component names have been renamed to be namespaced. You should rename "+b.propertyHolder+":"+a+" to "+b.propertyHolder+":"+b.newComponentName)},"DEPREACTE_COMPONENT_"+a),b.newComponentName):a},d([h.Autowired("gridOptions"),e("design:type",Object)],a.prototype,"gridOptions",void 0),d([h.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([h.Bean("componentProvider")],a)}();b.ComponentProvider=A},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(9),f=c(8),g=c(1),h=function(a){function b(){return a.call(this,b.TEMPLATE)||this}return d(b,a),b.prototype.init=function(a){this.params=a;var b,c=this.getGui();if(a.cellStartedEdit){this.focusAfterAttached=!0;var d=a.keyPress===e.Constants.KEY_BACKSPACE||a.keyPress===e.Constants.KEY_DELETE;d?b="":a.charPress?b=a.charPress:(b=this.getStartValue(a),a.keyPress!==e.Constants.KEY_F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,b=this.getStartValue(a);g.Utils.exists(b)&&(c.value=b),this.addDestroyableEventListener(c,"keydown",function(a){var b=a.keyCode===e.Constants.KEY_LEFT||a.keyCode===e.Constants.KEY_RIGHT||a.keyCode===e.Constants.KEY_UP||a.keyCode===e.Constants.KEY_DOWN||a.keyCode===e.Constants.KEY_PAGE_DOWN||a.keyCode===e.Constants.KEY_PAGE_UP||a.keyCode===e.Constants.KEY_PAGE_HOME||a.keyCode===e.Constants.KEY_PAGE_END;if(b){a.stopPropagation();var c=a.keyCode===e.Constants.KEY_PAGE_UP,d=a.keyCode===e.Constants.KEY_PAGE_DOWN;(c||d)&&a.preventDefault()}})},b.prototype.afterGuiAttached=function(){if(this.focusAfterAttached){var a=this.getGui();if(a.focus(),this.highlightAllOnFocus)a.select();else{var b=a.value?a.value.length:0;b>0&&a.setSelectionRange(b,b)}}},b.prototype.focusIn=function(){var a=this.getGui();a.focus(),a.select()},b.prototype.getValue=function(){var a=this.getGui();return this.params.parseValue(a.value)},b.prototype.getStartValue=function(a){var b=a.useFormatter||a.column.getColDef().refData;return b?a.formatValue(a.value):a.value},b.TEMPLATE='<input class="ag-cell-edit-input" type="text"/>',b}(f.Component);b.TextCellEditor=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(8),h=c(11),i=c(1),j=c(51),k=c(0),l=c(21),m=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.modelFromFloatingFilter=function(a){return{dateFrom:a,dateTo:this.getDateTo(),type:this.filter,filterType:"date"}},b.prototype.getApplicableFilterTypes=function(){return[j.BaseFilter.EQUALS,j.BaseFilter.GREATER_THAN,j.BaseFilter.LESS_THAN,j.BaseFilter.NOT_EQUAL,j.BaseFilter.IN_RANGE]},b.prototype.bodyTemplate=function(a){var b=a==j.FilterConditionType.MAIN?"filterDateFromPanel":"filterDateFromConditionPanel",c=a==j.FilterConditionType.MAIN?"filterDateToPanel":"filterDateToConditionPanel";return'<div class="ag-filter-body">\n                    <div class="ag-filter-date-from" id="'+b+'">\n                    </div>\n                    <div class="ag-filter-date-to" id="'+c+'">\n                    </div>\n                </div>'},b.prototype.initialiseFilterBodyUi=function(b){a.prototype.initialiseFilterBodyUi.call(this,b),this.createComponents(b),b===j.FilterConditionType.MAIN?(this.setDateFrom_date(this.dateFrom,j.FilterConditionType.MAIN),this.setDateTo_date(this.dateTo,j.FilterConditionType.MAIN),this.setFilterType(this.filterCondition,j.FilterConditionType.MAIN)):(this.setDateFrom_date(this.dateFromCondition,j.FilterConditionType.CONDITION),this.setDateTo_date(this.dateToCondition,j.FilterConditionType.CONDITION),this.setFilterType(this.filterCondition,j.FilterConditionType.CONDITION))},b.prototype.createComponents=function(a){var b=this,c={onDateChanged:function(){b.onDateChanged(a)},filterParams:this.filterParams};this.componentRecipes.newDateComponent(c).then(function(c){a===j.FilterConditionType.MAIN?b.dateToComponent=c:b.dateToConditionComponent=c;var d=c.getGui();a===j.FilterConditionType.MAIN?(b.eDateToPanel.appendChild(d),b.dateToComponent.afterGuiAttached&&b.dateToComponent.afterGuiAttached()):(b.eDateToConditionPanel.appendChild(d),b.dateToConditionComponent.afterGuiAttached&&b.dateToConditionComponent.afterGuiAttached())}),this.componentRecipes.newDateComponent(c).then(function(c){a===j.FilterConditionType.MAIN?b.dateFromComponent=c:b.dateFromConditionComponent=c;var d=c.getGui();a===j.FilterConditionType.MAIN?(b.eDateFromPanel.appendChild(d),b.dateFromComponent.afterGuiAttached&&b.dateFromComponent.afterGuiAttached()):(b.eDateFromConditionPanel.appendChild(d),b.dateFromConditionComponent.afterGuiAttached&&b.dateFromConditionComponent.afterGuiAttached())})},b.prototype.onDateChanged=function(a){a===j.FilterConditionType.MAIN?(this.dateFrom=b.removeTimezone(this.dateFromComponent.getDate()),this.dateTo=b.removeTimezone(this.dateToComponent.getDate())):(this.dateFromCondition=b.removeTimezone(this.dateFromComponent.getDate()),this.dateToCondition=b.removeTimezone(this.dateToComponent.getDate())),this.onFilterChanged()},b.prototype.refreshFilterBodyUi=function(a){var b,c;if(a===j.FilterConditionType.MAIN?(b=this.eDateToPanel,c=this.filter):(b=this.eDateToConditionPanel,c=this.filterCondition),b){var d=c===j.BaseFilter.IN_RANGE;i.Utils.setVisible(b,d)}},b.prototype.comparator=function(){return this.filterParams.comparator?this.filterParams.comparator:this.defaultComparator.bind(this)},b.prototype.defaultComparator=function(a,b){var c=b;return c<a?-1:c>a?1:null!=b?0:-1},b.prototype.serialize=function(a){var b=a===j.FilterConditionType.MAIN?this.dateToComponent:this.dateToConditionComponent,c=a===j.FilterConditionType.MAIN?this.dateFromComponent:this.dateFromConditionComponent,d=a===j.FilterConditionType.MAIN?this.filter:this.filterCondition;return{dateTo:i.Utils.serializeDateToYyyyMmDd(b.getDate(),"-"),dateFrom:i.Utils.serializeDateToYyyyMmDd(c.getDate(),"-"),type:d?d:this.defaultFilter,filterType:"date"}},b.prototype.filterValues=function(a){return a===j.FilterConditionType.MAIN?this.dateFromComponent?this.filter!==j.BaseFilter.IN_RANGE?this.dateFromComponent.getDate():[this.dateFromComponent.getDate(),this.dateToComponent.getDate()]:null:this.dateFromConditionComponent?this.filterCondition!==j.BaseFilter.IN_RANGE?this.dateFromConditionComponent.getDate():[this.dateFromConditionComponent.getDate(),this.dateToConditionComponent.getDate()]:null},b.prototype.getDateFrom=function(){return i.Utils.serializeDateToYyyyMmDd(this.dateFromComponent.getDate(),"-")},b.prototype.getDateTo=function(){return i.Utils.serializeDateToYyyyMmDd(this.dateToComponent.getDate(),"-")},b.prototype.getFilterType=function(){return this.filter},b.prototype.setDateFrom=function(a,b){var c=i.Utils.parseYyyyMmDdToDate(a,"-");this.setDateFrom_date(c,b)},b.prototype.setDateFrom_date=function(a,b){if(b===j.FilterConditionType.MAIN){if(this.dateFrom=a,!this.dateFromComponent)return;this.dateFromComponent.setDate(this.dateFrom)}else{if(this.dateFromCondition=a,!this.dateFromConditionComponent)return;this.dateFromConditionComponent.setDate(this.dateFromCondition)}},b.prototype.setDateTo=function(a,b){var c=i.Utils.parseYyyyMmDdToDate(a,"-");this.setDateTo_date(c,b)},b.prototype.setDateTo_date=function(a,b){if(b===j.FilterConditionType.MAIN){if(this.dateTo=a,!this.dateToComponent)return;this.dateToComponent.setDate(this.dateTo)}else{if(this.dateToCondition=a,!this.dateToConditionComponent)return;this.dateToConditionComponent.setDate(this.dateToCondition)}},b.prototype.resetState=function(){this.setDateFrom(null,j.FilterConditionType.MAIN),this.setDateTo(null,j.FilterConditionType.MAIN),this.setFilterType(this.defaultFilter,j.FilterConditionType.MAIN),this.setDateFrom(null,j.FilterConditionType.CONDITION),this.setDateTo(null,j.FilterConditionType.CONDITION),this.setFilterType(this.defaultFilter,j.FilterConditionType.MAIN)},b.prototype.parse=function(a,b){this.setDateFrom(a.dateFrom,b),this.setDateTo(a.dateTo,b),this.setFilterType(a.type,b)},b.prototype.setType=function(a,b){this.setFilterType(a,b)},b.removeTimezone=function(a){return a?new Date(a.getFullYear(),a.getMonth(),a.getDate()):null},e([k.Autowired("componentRecipes"),f("design:type",l.ComponentRecipes)],b.prototype,"componentRecipes",void 0),e([h.QuerySelector("#filterDateFromPanel"),f("design:type",HTMLElement)],b.prototype,"eDateFromPanel",void 0),e([h.QuerySelector("#filterDateFromConditionPanel"),f("design:type",HTMLElement)],b.prototype,"eDateFromConditionPanel",void 0),e([h.QuerySelector("#filterDateToPanel"),f("design:type",HTMLElement)],b.prototype,"eDateToPanel",void 0),e([h.QuerySelector("#filterDateToConditionPanel"),f("design:type",HTMLElement)],b.prototype,"eDateToConditionPanel",void 0),b}(j.ScalarBaseFilter);b.DateFilter=m;var n=function(a){function b(){return a.call(this,'<input class="ag-filter-filter" type="text" placeholder="yyyy-mm-dd">')||this}return d(b,a),b.prototype.init=function(a){this.eDateInput=this.getGui(),(i.Utils.isBrowserChrome()||a.filterParams.browserDatePicker)&&(i.Utils.isBrowserIE()?console.warn("ag-grid: browserDatePicker is specified to true, but it is not supported in IE 11, reverting to plain text date picker"):this.eDateInput.type="date"),this.listener=a.onDateChanged,this.addGuiEventListener("input",this.listener)},b.prototype.getDate=function(){return i.Utils.parseYyyyMmDdToDate(this.eDateInput.value,"-")},b.prototype.setDate=function(a){this.eDateInput.value=i.Utils.serializeDateToYyyyMmDd(a,"-")},b}(g.Component);b.DefaultDateComponent=n},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(8),h=c(0),i=c(2),j=function(a){function b(b){var c=a.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return c.getGuiCalledOnChild=!1,c.cellEditor=b,c}return d(b,a),b.prototype.onKeyDown=function(a){this.params.onKeyDown(a)},b.prototype.getGui=function(){return this.getGuiCalledOnChild||(this.appendChild(this.cellEditor.getGui()),this.getGuiCalledOnChild=!0),a.prototype.getGui.call(this)},b.prototype.init=function(c){var d=this;this.params=c,this.gridOptionsWrapper.setDomData(this.getGui(),b.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addDestroyFunc(function(){d.cellEditor.destroy&&d.cellEditor.destroy()}),this.addDestroyableEventListener(a.prototype.getGui.call(this),"keydown",this.onKeyDown.bind(this))},b.prototype.afterGuiAttached=function(){this.cellEditor.afterGuiAttached&&this.cellEditor.afterGuiAttached()},b.prototype.getValue=function(){return this.cellEditor.getValue()},b.prototype.isPopup=function(){return!0},b.prototype.isCancelBeforeStart=function(){if(this.cellEditor.isCancelBeforeStart)return this.cellEditor.isCancelBeforeStart()},b.prototype.isCancelAfterEnd=function(){if(this.cellEditor.isCancelAfterEnd)return this.cellEditor.isCancelAfterEnd()},b.prototype.focusIn=function(){this.cellEditor.focusIn&&this.cellEditor.focusIn()},b.prototype.focusOut=function(){this.cellEditor.focusOut&&this.cellEditor.focusOut()},b.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",e([h.Autowired("gridOptionsWrapper"),f("design:type",i.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),b}(g.Component);b.PopupEditorWrapper=j},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(1),f=c(8),g=function(a){function b(){var c=a.call(this,b.TEMPLATE)||this;return c.refreshCount=0,c.eCurrent=c.queryForHtmlElement(".ag-value-slide-current"),c}return d(b,a),b.prototype.init=function(a){this.params=a,this.refresh(a)},b.prototype.addSlideAnimation=function(){var a=this;this.refreshCount++;var b=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=e.Utils.loadTemplate('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),setTimeout(function(){b===a.refreshCount&&e.Utils.addCssClass(a.ePrevious,"ag-value-slide-out-end")},50),setTimeout(function(){b===a.refreshCount&&(a.getGui().removeChild(a.ePrevious),a.ePrevious=null)},3e3)},b.prototype.refresh=function(a){var b=a.value;if(e.Utils.missing(b)&&(b=""),b!==this.lastValue)return this.addSlideAnimation(),this.lastValue=b,e.Utils.exists(a.valueFormatted)?this.eCurrent.innerHTML=a.valueFormatted:e.Utils.exists(a.value)?this.eCurrent.innerHTML=b:this.eCurrent.innerHTML="",!0},b.TEMPLATE='<span><span class="ag-value-slide-current"></span></span>',b}(f.Component);b.AnimateSlideCellRenderer=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(1),f=c(8),g="&#65514;",h="&#65516;",i=function(a){function b(){var c=a.call(this,b.TEMPLATE)||this;return c.refreshCount=0,c}return d(b,a),b.prototype.init=function(a){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(a)},b.prototype.showDelta=function(a,b){var c=Math.abs(b),d=a.formatValue(c),f=e.Utils.exists(d)?d:c,i=b>=0;i?this.eDelta.innerHTML=g+f:this.eDelta.innerHTML=h+f,e.Utils.addOrRemoveCssClass(this.eDelta,"ag-value-change-delta-up",i),e.Utils.addOrRemoveCssClass(this.eDelta,"ag-value-change-delta-down",!i)},b.prototype.setTimerToRemoveDelta=function(){var a=this;this.refreshCount++;var b=this.refreshCount;setTimeout(function(){b===a.refreshCount&&a.hideDeltaValue()},2e3)},b.prototype.hideDeltaValue=function(){e.Utils.removeCssClass(this.eValue,"ag-value-change-value-highlight"),this.eDelta.innerHTML=""},b.prototype.refresh=function(a){var b=a.value;if(b!==this.lastValue){if(e.Utils.exists(a.valueFormatted)?this.eValue.innerHTML=a.valueFormatted:e.Utils.exists(a.value)?this.eValue.innerHTML=b:this.eValue.innerHTML="","number"==typeof b&&"number"==typeof this.lastValue){var c=b-this.lastValue;this.showDelta(a,c)}return this.lastValue&&e.Utils.addCssClass(this.eValue,"ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=b,!0}},b.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',b}(f.Component);b.AnimateShowChangeCellRenderer=i},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{
value:!0});var g=c(2),h=c(19),i=c(3),j=c(9),k=c(1),l=c(0),m=c(8),n=c(14),o=c(56),p=c(43),q=c(65),r=c(4),s=c(10),t=c(11),u=c(44),v=function(a){function b(){return a.call(this,b.TEMPLATE)||this}return d(b,a),b.prototype.init=function(a){this.params=a,this.gridOptionsWrapper.isGroupIncludeTotalFooter()&&this.assignBlankValueToGroupFooterCell(a);var b=this.isEmbeddedRowMismatch(),c=null==a.value;this.cellIsBlank=b||c,this.cellIsBlank||(this.setupDragOpenParents(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent())},b.prototype.assignBlankValueToGroupFooterCell=function(a){a.value||a.node.level!=-1||(a.value="")},b.prototype.isEmbeddedRowMismatch=function(){if(this.params.fullWidth&&this.gridOptionsWrapper.isEmbedFullWidthRows()){var a=this.params.pinned===s.Column.PINNED_LEFT,b=this.params.pinned===s.Column.PINNED_RIGHT,c=!a&&!b;return this.gridOptionsWrapper.isEnableRtl()?this.columnController.isPinningLeft()?!b:!c:this.columnController.isPinningLeft()?!a:!c}return!1},b.prototype.setIndent=function(){if(!this.gridOptionsWrapper.isGroupHideOpenParents()){var a=this.params,b=a.node,c=b.uiLevel,d=a.padding>=0;if(d)return void this.setPaddingDeprecatedWay(c,a.padding);this.indentClass&&this.removeCssClass(this.indentClass),this.indentClass="ag-row-group-indent-"+c,this.addCssClass(this.indentClass)}},b.prototype.setPaddingDeprecatedWay=function(a,b){k.Utils.doOnce(function(){return console.warn("ag-Grid: since v14.2, configuring padding for groupCellRenderer should be done with Sass variables and themes. Please see the ag-Grid documentation page for Themes, in particular the property $row-group-indent-size.")},"groupCellRenderer->doDeprecatedWay");var c=a*b;this.gridOptionsWrapper.isEnableRtl()?this.getGui().style.paddingRight=c+"px":this.getGui().style.paddingLeft=c+"px"},b.prototype.setupIndent=function(){var a=this.params.node,b=this.params.suppressPadding;b||(this.addDestroyableEventListener(a,n.RowNode.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},b.prototype.addValueElement=function(){var a=this.params,b=this.displayedGroup;b.footer?this.createFooterCell():b.hasChildren()||k.Utils.get(a.colDef,"cellRendererParams.innerRenderer",null)||k.Utils.get(a.colDef,"cellRendererParams.innerRendererFramework",null)?(this.createGroupCell(),b.hasChildren()&&this.addChildCount()):this.createLeafCell()},b.prototype.createFooterCell=function(){var a,b=this.params.footerValueGetter;if(b){var c=k.Utils.cloneObject(this.params);c.value=this.params.value,"function"==typeof b?a=b(c):"string"==typeof b?a=this.expressionService.evaluate(b,c):console.warn("ag-Grid: footerValueGetter should be either a function or a string (expression)")}else a="Total "+this.params.value;this.eValue.innerHTML=a},b.prototype.createGroupCell=function(){var a=this,b=this.params,c=this.displayedGroup.rowGroupColumn,d=c?c:b.column,e=this.params.value,f=d?this.valueFormatterService.formatValue(d,b.node,b.scope,e):null;b.valueFormatted=f;var g;g=1==b.fullWidth?this.cellRendererService.useFullWidthGroupRowInnerCellRenderer(this.eValue,b):this.cellRendererService.useInnerCellRenderer(this.params.colDef.cellRendererParams,d.getColDef(),this.eValue,b),g&&g.then(function(b){a.innerCellRenderer=b})},b.prototype.addChildCount=function(){this.params.suppressCount||(this.addDestroyableEventListener(this.displayedGroup,n.RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},b.prototype.updateChildCount=function(){var a=this.displayedGroup.allChildrenCount;this.eChildCount.innerHTML=a>=0?"("+a+")":""},b.prototype.createLeafCell=function(){k.Utils.exists(this.params.value)&&(this.eValue.innerHTML=this.params.valueFormatted?this.params.valueFormatted:this.params.value)},b.prototype.isUserWantsSelected=function(){var a=this.params.checkbox;return"function"==typeof a?a(this.params):a===!0},b.prototype.addCheckboxIfNeeded=function(){var a=this.displayedGroup,b=this.isUserWantsSelected()&&!a.footer&&!a.rowPinned&&!a.detail;if(b){var c=new q.CheckboxSelectionComponent;this.context.wireBean(c),c.init({rowNode:a,column:this.params.column}),this.eCheckbox.appendChild(c.getGui()),this.addDestroyFunc(function(){return c.destroy()})}},b.prototype.addExpandAndContract=function(){var a=this.params,b=a.eGridCell,c=k.Utils.createIconNoSpan("groupExpanded",this.gridOptionsWrapper,null),d=k.Utils.createIconNoSpan("groupContracted",this.gridOptionsWrapper,null);this.eExpanded.appendChild(c),this.eContracted.appendChild(d),this.addDestroyableEventListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addDestroyableEventListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addDestroyableEventListener(b,"keydown",this.onKeyDown.bind(this)),this.addDestroyableEventListener(a.node,n.RowNode.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons(),this.addDestroyableEventListener(this.displayedGroup,n.RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.onAllChildrenCountChanged.bind(this)),this.gridOptionsWrapper.isEnableGroupEdit()||!this.isExpandable()||a.suppressDoubleClickExpand||this.addDestroyableEventListener(b,"dblclick",this.onCellDblClicked.bind(this))},b.prototype.onAllChildrenCountChanged=function(){this.showExpandAndContractIcons(),this.setIndent()},b.prototype.onKeyDown=function(a){if(k.Utils.isKeyPressed(a,j.Constants.KEY_ENTER)){var b=this.params.column.isCellEditable(this.params.node);if(b)return;a.preventDefault(),this.onExpandOrContract()}},b.prototype.setupDragOpenParents=function(){var a=this.params.column,b=this.params.node;if(this.gridOptionsWrapper.isGroupHideOpenParents())if(b.hasChildren()){var c=b.rowGroupColumn;this.draggedFromHideOpenParents=!a.isRowGroupDisplayed(c.getId())}else this.draggedFromHideOpenParents=!0;else this.draggedFromHideOpenParents=!1;if(this.draggedFromHideOpenParents)for(var d=b.parent;;){if(k.Utils.missing(d))break;if(d.rowGroupColumn&&a.isRowGroupDisplayed(d.rowGroupColumn.getId())){this.displayedGroup=d;break}d=d.parent}k.Utils.missing(this.displayedGroup)&&(this.displayedGroup=b)},b.prototype.onExpandClicked=function(a){k.Utils.isStopPropagationForAgGrid(a)||(k.Utils.stopPropagationForAgGrid(a),this.onExpandOrContract())},b.prototype.onCellDblClicked=function(a){if(!k.Utils.isStopPropagationForAgGrid(a)){var b=k.Utils.isElementInEventPath(this.eExpanded,a)||k.Utils.isElementInEventPath(this.eContracted,a);b||this.onExpandOrContract()}},b.prototype.onExpandOrContract=function(){var a=this.displayedGroup;a.setExpanded(!a.expanded),this.gridOptionsWrapper.isGroupIncludeFooter()&&this.params.api.redrawRows({rowNodes:[a]})},b.prototype.isExpandable=function(){var a=this.params.node,b=this.columnController.isPivotMode()&&a.leafGroup;return this.draggedFromHideOpenParents||a.isExpandable()&&!a.footer&&!b},b.prototype.showExpandAndContractIcons=function(){var a=this.params.node;if(this.isExpandable()){var b=!!this.draggedFromHideOpenParents||a.expanded;k.Utils.setVisible(this.eContracted,!b),k.Utils.setVisible(this.eExpanded,b)}else k.Utils.setVisible(this.eExpanded,!1),k.Utils.setVisible(this.eContracted,!1);var c=this.displayedGroup,d=this.columnController.isPivotMode()&&c.leafGroup,e=!c.isExpandable(),f=c.footer||e||d;this.addOrRemoveCssClass("ag-row-group-leaf-indent",f)},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.innerCellRenderer&&this.innerCellRenderer.destroy&&this.innerCellRenderer.destroy()},b.prototype.refresh=function(){return!1},b.TEMPLATE='<span><span class="ag-group-expanded" ref="eExpanded"></span><span class="ag-group-contracted" ref="eContracted"></span><span class="ag-group-checkbox" ref="eCheckbox"></span><span class="ag-group-value" ref="eValue"></span><span class="ag-group-child-count" ref="eChildCount"></span></span>',e([l.Autowired("gridOptionsWrapper"),f("design:type",g.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([l.Autowired("expressionService"),f("design:type",h.ExpressionService)],b.prototype,"expressionService",void 0),e([l.Autowired("eventService"),f("design:type",i.EventService)],b.prototype,"eventService",void 0),e([l.Autowired("cellRendererService"),f("design:type",o.CellRendererService)],b.prototype,"cellRendererService",void 0),e([l.Autowired("valueFormatterService"),f("design:type",p.ValueFormatterService)],b.prototype,"valueFormatterService",void 0),e([l.Autowired("context"),f("design:type",l.Context)],b.prototype,"context",void 0),e([l.Autowired("columnController"),f("design:type",r.ColumnController)],b.prototype,"columnController",void 0),e([l.Autowired("mouseEventService"),f("design:type",u.MouseEventService)],b.prototype,"mouseEventService",void 0),e([t.RefSelector("eExpanded"),f("design:type",HTMLElement)],b.prototype,"eExpanded",void 0),e([t.RefSelector("eContracted"),f("design:type",HTMLElement)],b.prototype,"eContracted",void 0),e([t.RefSelector("eCheckbox"),f("design:type",HTMLElement)],b.prototype,"eCheckbox",void 0),e([t.RefSelector("eValue"),f("design:type",HTMLElement)],b.prototype,"eValue",void 0),e([t.RefSelector("eChildCount"),f("design:type",HTMLElement)],b.prototype,"eChildCount",void 0),b}(m.Component);b.GroupCellRenderer=v},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(19),h=function(){function a(){}return a.prototype.processAllCellClasses=function(a,b,c,d){this.processClassRules(a.cellClassRules,b,c,d),this.processStaticCellClasses(a,b,c)},a.prototype.processClassRules=function(a,b,c,d){if("object"==typeof a&&null!==a)for(var e=Object.keys(a),f=0;f<e.length;f++){var g=e[f],h=a[g],i=void 0;"string"==typeof h?i=this.expressionService.evaluate(h,b):"function"==typeof h&&(i=h(b)),i?c(g):d&&d(g)}},a.prototype.processStaticCellClasses=function(a,b,c){var d=a.cellClass;if(d){var e=void 0;if("function"==typeof a.cellClass){var f=a.cellClass;e=f(b)}else e=a.cellClass;"string"==typeof e?c(e):Array.isArray(e)&&e.forEach(function(a){c(a)})}},d([f.Autowired("expressionService"),e("design:type",g.ExpressionService)],a.prototype,"expressionService",void 0),a=d([f.Bean("stylingService")],a)}();b.StylingService=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(13),h=c(0),i=c(45),j=function(a){function b(b,c){var d=a.call(this)||this;return d.columns=b,d.addMouseHoverListeners(c),d}return d(b,a),b.prototype.addMouseHoverListeners=function(a){this.addDestroyableEventListener(a,"mouseout",this.onMouseOut.bind(this)),this.addDestroyableEventListener(a,"mouseover",this.onMouseOver.bind(this))},b.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},b.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},e([h.Autowired("columnHoverService"),f("design:type",i.ColumnHoverService)],b.prototype,"columnHoverService",void 0),b}(g.BeanStub);b.HoverFeature=j},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(8),h=c(1),i=c(9),j=c(0),k=c(2),l=c(43),m=function(a){function b(){var b=a.call(this,'<div class="ag-cell-edit-input"><select class="ag-cell-edit-input"/></div>')||this;return b.eSelect=b.getGui().querySelector("select"),b}return d(b,a),b.prototype.init=function(a){var b=this;return this.focusAfterAttached=a.cellStartedEdit,h.Utils.missing(a.values)?void console.log("ag-Grid: no values found for select cellEditor"):(a.values.forEach(function(c){var d=document.createElement("option");d.value=c;var e=b.valueFormatterService.formatValue(a.column,null,null,c),f=null!==e&&void 0!==e;d.text=f?e:c,a.value===c&&(d.selected=!0),b.eSelect.appendChild(d)}),this.gridOptionsWrapper.isFullRowEdit()||this.addDestroyableEventListener(this.eSelect,"change",function(){return a.stopEditing()}),this.addDestroyableEventListener(this.eSelect,"keydown",function(a){var b=a.keyCode===i.Constants.KEY_UP||a.keyCode===i.Constants.KEY_DOWN;b&&a.stopPropagation()}),void this.addDestroyableEventListener(this.eSelect,"mousedown",function(a){a.stopPropagation()}))},b.prototype.afterGuiAttached=function(){this.focusAfterAttached&&this.eSelect.focus()},b.prototype.focusIn=function(){this.eSelect.focus()},b.prototype.getValue=function(){return this.eSelect.value},e([j.Autowired("gridOptionsWrapper"),f("design:type",k.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([j.Autowired("valueFormatterService"),f("design:type",l.ValueFormatterService)],b.prototype,"valueFormatterService",void 0),b}(g.Component);b.SelectCellEditor=m},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(77),h=c(1),i=function(){function a(){}return a.prototype.adaptFunction=function(a,b,c,d){if(null==b)return{component:null,type:c,source:d,dynamicParams:null};var e=this.componentMetadataProvider.retrieve(a);return e&&e.functionAdapter?{type:c,component:e.functionAdapter(b),source:d,dynamicParams:null}:null},a.prototype.adaptCellRendererFunction=function(a){var b=function(){function b(){}return b.prototype.refresh=function(a){return!1},b.prototype.getGui=function(){var b=a(this.params),c=typeof b;return"string"===c||"number"===c||"boolean"===c?h._.loadTemplate("<span>"+b+"</span>"):b},b.prototype.init=function(a){this.params=a},b}();return b},a.prototype.doesImplementIComponent=function(a){return!!a&&(a.prototype&&"getGui"in a.prototype)},d([f.Autowired("componentMetadataProvider"),e("design:type",g.ComponentMetadataProvider)],a.prototype,"componentMetadataProvider",void 0),a=d([f.Bean("agComponentUtils")],a)}();b.AgComponentUtils=i},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(76),h=function(){function a(){}return a.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:[]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},pinnedRowCellRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowInnerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","afterGuiAttached"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","afterGuiAttached"]}}},a.prototype.retrieve=function(a){return this.componentMetaData[a]},d([f.Autowired("agComponentUtils"),e("design:type",g.AgComponentUtils)],a.prototype,"agComponentUtils",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"postConstruct",null),a=d([f.Bean("componentMetadataProvider")],a)}();b.ComponentMetadataProvider=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(1),h=c(129),i=c(2),j=c(4),k=c(7),l=c(20),m=c(0),n=c(3),o=c(5),p=c(40),q=c(9),r=c(17),s=c(47),t=c(44),u=c(22),v=c(36),w=c(130),x=c(29),y=c(69),z=c(58),A=c(30),B=c(6),C=c(37),D=c(50),E=c(97),F=c(16),G=c(46),H=c(21),I=c(15),J=c(131),K=c(57),L=c(8),M=c(79),N=c(53),O=c(39),P=c(28),Q=c(11),R=c(80),S='<div class="ag-root ag-font-style" role="grid">\n        <ag-header-root ref="headerRoot"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation">\n            <div class="ag-pinned-left-floating-top" ref="eLeftTop" role="presentation"></div>\n            <div class="ag-floating-top-viewport" ref="eTopViewport" role="presentation">\n                <div class="ag-floating-top-container" ref="eTopContainer" role="presentation"></div>\n            </div>\n            <div class="ag-pinned-right-floating-top" ref="eRightTop" role="presentation"></div>\n            <div class="ag-floating-top-full-width-container" ref="eTopFullWidthContainer" role="presentation"></div>\n        </div>\n        <div class="ag-body" ref="eBody" role="presentation">\n            <div class="ag-pinned-left-cols-viewport-wrapper" ref="eLeftViewportWrapper" role="presentation">\n                <div class="ag-pinned-left-cols-viewport" ref="eLeftViewport" role="presentation">\n                    <div class="ag-pinned-left-cols-container" ref="eLeftContainer" role="presentation"></div>\n                </div>\n            </div>\n            <div class="ag-body-viewport-wrapper" role="presentation">\n                <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n                    <div class="ag-body-container" ref="eBodyContainer" role="presentation"></div>\n                </div>\n            </div>\n            <div class="ag-pinned-right-cols-viewport-wrapper" ref="eRightViewportWrapper" role="presentation">\n                <div class="ag-pinned-right-cols-viewport" ref="eRightViewport" role="presentation">\n                    <div class="ag-pinned-right-cols-container" ref="eRightContainer" role="presentation"></div>\n                </div>\n            </div>\n            <div class="ag-full-width-viewport-wrapper" ref="eFullWidthViewportWrapper" role="presentation">\n                <div class="ag-full-width-viewport" ref="eFullWidthViewport" role="presentation">\n                    <div class="ag-full-width-container" ref="eFullWidthContainer" role="presentation"></div>\n                </div>\n            </div>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation">\n            <div class="ag-pinned-left-floating-bottom" ref="eLeftBottom" role="presentation"></div>\n            <div class="ag-floating-bottom-viewport" ref="eBottomViewport" role="presentation">\n                <div class="ag-floating-bottom-container" ref="eBottomContainer" role="presentation"></div>\n            </div>\n            <div class="ag-pinned-right-floating-bottom" ref="eRightBottom" role="presentation"></div>\n            <div class="ag-floating-bottom-full-width-container" ref="eBottomFullWidthContainer" role="presentation"></div>\n        </div>\n        <div class="ag-overlay" ref="eOverlay"></div>\n    </div>',T=function(a){function b(){var b=a.call(this,S)||this;return b.scrollLeft=-1,b.nextScrollLeft=-1,b.scrollTop=-1,b.nextScrollTop=-1,b.verticalRedrawNeeded=!1,b}return d(b,a),b.prototype.getVScrollPosition=function(){var a={top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight};return a},b.prototype.getHScrollPosition=function(){var a={left:this.eBodyViewport.scrollLeft,right:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetWidth};return a},b.prototype.destroy=function(){a.prototype.destroy.call(this)},b.prototype.onRowDataChanged=function(){this.showOrHideOverlay()},b.prototype.showOrHideOverlay=function(){this.paginationProxy.isEmpty()&&!this.gridOptionsWrapper.isSuppressNoRowsOverlay()?this.showNoRowsOverlay():this.hideOverlay()},b.prototype.onNewColumnsLoaded=function(){this.columnController.isReady()&&!this.paginationProxy.isEmpty()&&this.hideOverlay()},b.prototype.init=function(){this.instantiate(this.context),this.scrollWidth=this.gridOptionsWrapper.getScrollbarWidth(),this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.useAnimationFrame=!this.gridOptionsWrapper.isSuppressAnimationFrame(),this.scrollClipWidth=this.scrollWidth>0?this.scrollWidth:20,this.suppressScrollOnFloatingRow(),this.setupRowAnimationCssClass(),this.buildRowContainerComponents(),this.addEventListeners(),this.addDragListeners(),this.addScrollListener(),this.gridOptionsWrapper.isSuppressHorizontalScroll()&&(this.eBodyViewport.style.overflowX="hidden"),this.setupOverlay(),this.gridOptionsWrapper.isRowModelDefault()&&!this.gridOptionsWrapper.getRowData()&&this.showLoadingOverlay(),this.setPinnedContainersVisible(),this.setBodyAndHeaderHeights(),this.disableBrowserDragging(),this.addShortcutKeyListeners(),this.addMouseListeners(),this.addKeyboardEvents(),this.addBodyViewportListener(),this.addStopEditingWhenGridLosesFocus(),this.mockContextMenuForIPad(),this.addRowDragListener(),this.$scope&&this.addAngularApplyCheck(),this.onDisplayedColumnsWidthChanged(),this.gridApi.registerGridComp(this),this.alignedGridsService.registerGridComp(this),this.headerRootComp.registerGridComp(this),this.animationFrameService.registerGridComp(this),this.navigationService.registerGridComp(this),this.heightScaler.registerGridComp(this),this.autoHeightCalculator.registerGridComp(this),this.columnAnimationService.registerGridComp(this),this.autoWidthCalculator.registerGridComp(this),this.paginationAutoPageSizeService.registerGridComp(this),this.beans.registerGridComp(this),this.rowRenderer.registerGridComp(this),this.rangeController&&this.rangeController.registerGridComp(this);var a=h.observeResize(this.eBodyViewport,this.checkViewportAndScrolls.bind(this));this.addDestroyFunc(function(){return a()})},b.prototype.setColumnMovingCss=function(a){this.addOrRemoveCssClass("ag-column-moving",a)},b.prototype.setupOverlay=function(){this.overlayWrapper=this.componentRecipes.newOverlayWrapperComponent(),this.eOverlay=this.queryForHtmlElement('[ref="eOverlay"]'),this.overlayWrapper.hideOverlay(this.eOverlay)},b.prototype.addRowDragListener=function(){var a=new J.RowDragFeature(this.eBody,this);this.context.wireBean(a),this.dragAndDropService.addDropTarget(a)},b.prototype.addStopEditingWhenGridLosesFocus=function(){var a=this;this.gridOptionsWrapper.isStopEditingWhenGridLosesFocus()&&this.addDestroyableEventListener(this.eBody,"focusout",function(b){for(var c=b.relatedTarget,d=!1,e=c;g.Utils.exists(e)&&!d;){var f=!!a.gridOptionsWrapper.getDomData(e,y.PopupEditorWrapper.DOM_KEY_POPUP_EDITOR_WRAPPER),h=a.eBody==e;d=f||h,e=e.parentNode}d||a.rowRenderer.stopEditing()})},b.prototype.addAngularApplyCheck=function(){var a=this,b=!1,c=function(){b||(b=!0,setTimeout(function(){b=!1,a.$scope.$apply()},0))};this.addDestroyableEventListener(this.eventService,o.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,c),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,c)},b.prototype.disableBrowserDragging=function(){this.getGui().addEventListener("dragstart",function(a){if(a.target instanceof HTMLImageElement)return a.preventDefault(),!1})},b.prototype.addEventListeners=function(){this.addDestroyableEventListener(this.eventService,o.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_PINNED_ROW_DATA_CHANGED,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_ROW_DATA_CHANGED,this.onRowDataChanged.bind(this)),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_ROW_DATA_UPDATED,this.onRowDataChanged.bind(this)),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,i.GridOptionsWrapper.PROP_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,i.GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,i.GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,i.GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,i.GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,this.setBodyAndHeaderHeights.bind(this))},b.prototype.addDragListeners=function(){var a=this;if(this.gridOptionsWrapper.isEnableRangeSelection()&&!g.Utils.missing(this.rangeController)){var b=[this.eLeftContainer,this.eRightContainer,this.eBodyContainer,this.eTop,this.eBottom];b.forEach(function(b){var c={eElement:b,onDragStart:a.rangeController.onDragStart.bind(a.rangeController),onDragStop:a.rangeController.onDragStop.bind(a.rangeController),onDragging:a.rangeController.onDragging.bind(a.rangeController),skipMouseEvent:function(a){return a.shiftKey}};a.dragService.addDragSource(c),a.addDestroyFunc(function(){return a.dragService.removeDragSource(c)})})}},b.prototype.addMouseListeners=function(){var a=this,b=["click","mousedown","dblclick","contextmenu","mouseover","mouseout"];b.forEach(function(b){var c=a.processMouseEvent.bind(a,b);a.eAllCellContainers.forEach(function(d){return a.addDestroyableEventListener(d,b,c)})})},b.prototype.addKeyboardEvents=function(){var a=this,b=["keydown","keypress"];b.forEach(function(b){var c=a.processKeyboardEvent.bind(a,b);a.eAllCellContainers.forEach(function(d){a.addDestroyableEventListener(d,b,c)})})},b.prototype.addBodyViewportListener=function(){var a=this,b=function(b){var c=g.Utils.getTarget(b);c!==a.eBodyViewport&&c!==a.eLeftViewport&&c!==a.eRightViewport||(a.onContextMenu(b,null,null,null,null),a.preventDefaultOnContextMenu(b))};this.addDestroyableEventListener(this.eBodyViewport,"contextmenu",b),this.addDestroyableEventListener(this.eRightViewport,"contextmenu",b),this.addDestroyableEventListener(this.eLeftViewport,"contextmenu",b)},b.prototype.getBodyClientRect=function(){if(this.eBody)return this.eBody.getBoundingClientRect()},b.prototype.getRowForEvent=function(a){for(var b=g.Utils.getTarget(a);b;){var c=this.gridOptionsWrapper.getDomData(b,D.RowComp.DOM_DATA_KEY_RENDERED_ROW);if(c)return c;b=b.parentElement}return null},b.prototype.processKeyboardEvent=function(a,b){var c=this.mouseEventService.getRenderedCellForEvent(b);if(c)switch(a){case"keydown":var d=this.navigationService.handlePageScrollingKey(b);d||c.onKeyDown(b);break;case"keypress":c.onKeyPress(b)}},b.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},b.prototype.processMouseEvent=function(a,b){if(this.mouseEventService.isEventFromThisGrid(b)&&!g.Utils.isStopPropagationForAgGrid(b)){var c=this.getRowForEvent(b),d=this.mouseEventService.getRenderedCellForEvent(b);"contextmenu"===a?this.handleContextMenuMouseEvent(b,null,c,d):(d&&d.onMouseEvent(a,b),c&&c.onMouseEvent(a,b)),this.preventDefaultOnContextMenu(b)}},b.prototype.mockContextMenuForIPad=function(){var a=this;g.Utils.isUserAgentIPad()&&this.eAllCellContainers.forEach(function(b){var c=new G.TouchListener(b),d=function(b){var c=a.getRowForEvent(b.touchEvent),d=a.mouseEventService.getRenderedCellForEvent(b.touchEvent);
a.handleContextMenuMouseEvent(null,b.touchEvent,c,d)};a.addDestroyableEventListener(c,G.TouchListener.EVENT_LONG_TAP,d),a.addDestroyFunc(function(){return c.destroy()})})},b.prototype.handleContextMenuMouseEvent=function(a,b,c,d){var e=c?c.getRowNode():null,f=d?d.getColumn():null,g=null;if(f){var h=a?a:b;d.dispatchCellContextMenuEvent(h),g=this.valueService.getValue(f,e)}this.onContextMenu(a,b,e,f,g)},b.prototype.onContextMenu=function(a,b,c,d,e){if((this.gridOptionsWrapper.isAllowContextMenuWithControlKey()||!a||!a.ctrlKey&&!a.metaKey)&&this.contextMenuFactory&&!this.gridOptionsWrapper.isSuppressContextMenu()){var f=a?a:b.touches[0];this.contextMenuFactory.showMenu(c,d,e,f);var g=a?a:b;g.preventDefault()}},b.prototype.preventDefaultOnContextMenu=function(a){this.gridOptionsWrapper.isSuppressMiddleClickScrolls()&&2===a.which&&a.preventDefault()},b.prototype.addShortcutKeyListeners=function(){var a=this;this.eAllCellContainers.forEach(function(b){b.addEventListener("keydown",function(b){var c=a.mouseEventService.getRenderedCellForEvent(b);if((!c||!c.isEditing())&&a.mouseEventService.isEventFromThisGrid(b)&&(b.ctrlKey||b.metaKey))switch(b.which){case q.Constants.KEY_A:return a.onCtrlAndA(b);case q.Constants.KEY_C:return a.onCtrlAndC(b);case q.Constants.KEY_V:return a.onCtrlAndV(b);case q.Constants.KEY_D:return a.onCtrlAndD(b)}})})},b.prototype.onCtrlAndA=function(a){if(this.rangeController&&this.paginationProxy.isRowsToRender()){var b=void 0,c=void 0,d=void 0;c=this.pinnedRowModel.isEmpty(q.Constants.PINNED_TOP)?null:q.Constants.PINNED_TOP,this.pinnedRowModel.isEmpty(q.Constants.PINNED_BOTTOM)?(d=null,b=this.paginationProxy.getTotalRowCount()-1):(d=q.Constants.PINNED_BOTTOM,b=this.pinnedRowModel.getPinnedBottomRowData().length-1);var e=this.columnController.getAllDisplayedColumns();if(g.Utils.missingOrEmpty(e))return;this.rangeController.setRange({rowStart:0,floatingStart:c,rowEnd:b,floatingEnd:d,columnStart:e[0],columnEnd:e[e.length-1]})}return a.preventDefault(),!1},b.prototype.onCtrlAndC=function(a){if(this.clipboardService){var b=this.focusedCellController.getFocusedCell();return this.clipboardService.copyToClipboard(),a.preventDefault(),b&&this.focusedCellController.setFocusedCell(b.rowIndex,b.column,b.floating,!0),!1}},b.prototype.onCtrlAndV=function(a){if(this.enterprise&&!this.gridOptionsWrapper.isSuppressClipboardPaste())return this.clipboardService.pasteFromClipboard(),!1},b.prototype.onCtrlAndD=function(a){if(this.enterprise)return this.clipboardService.copyRangeDown(),a.preventDefault(),!1},b.prototype.ensureIndexVisible=function(a,b){if(!this.gridOptionsWrapper.isGridAutoHeight()){var c=this.paginationProxy.getTotalRowCount();if("number"!=typeof a||a<0||a>=c)return void console.warn("invalid row index for ensureIndexVisible: "+a);this.paginationProxy.goToPageWithIndex(a);var d=this.paginationProxy.getRow(a),e=this.paginationProxy.getPixelOffset(),f=d.rowTop-e,g=f+d.rowHeight,h=this.getVScrollPosition(),i=this.heightScaler.getOffset(),j=h.top+i,k=h.bottom+i;this.isHorizontalScrollShowing()&&(k-=this.scrollWidth);var l=k-j,m=null,n=this.heightScaler.getScrollPositionForPixel(f),o=this.heightScaler.getScrollPositionForPixel(g-l),p=(n+o)/2;p>f&&(p=f);var q=j>f,r=k<g;"top"===b?m=n:"bottom"===b?m=o:"middle"===b?m=p:q?m=n:r&&(m=o),null!==m&&(this.eBodyViewport.scrollTop=m,this.rowRenderer.redrawAfterScroll())}},b.prototype.getCenterWidth=function(){return this.eBodyViewport.clientWidth},b.prototype.isHorizontalScrollShowing=function(){return g.Utils.isHorizontalScrollShowing(this.eBodyViewport)},b.prototype.isVerticalScrollShowing=function(){return g.Utils.isVerticalScrollShowing(this.eBodyViewport)},b.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.setPinnedLeftWidth(),this.setPinnedRightWidth(),this.setBottomPaddingOnPinned(),this.hideVerticalScrollOnCenter(),this.hideFullWidthViewportScrollbars()},b.prototype.updateScrollVisibleService=function(){var a={bodyHorizontalScrollShowing:!1,leftVerticalScrollShowing:!1,rightVerticalScrollShowing:!1};this.enableRtl&&this.columnController.isPinningLeft()&&(a.leftVerticalScrollShowing=g.Utils.isVerticalScrollShowing(this.eLeftViewport)),!this.enableRtl&&this.columnController.isPinningRight()&&(a.rightVerticalScrollShowing=g.Utils.isVerticalScrollShowing(this.eRightViewport)),a.bodyHorizontalScrollShowing=this.isHorizontalScrollShowing(),this.scrollVisibleService.setScrollsVisible(a)},b.prototype.setBottomPaddingOnPinned=function(){this.scrollWidth<=0||(this.isHorizontalScrollShowing()?(this.eRightContainer.style.marginBottom=this.scrollWidth+"px",this.eLeftContainer.style.marginBottom=this.scrollWidth+"px"):(this.eRightContainer.style.marginBottom="",this.eLeftContainer.style.marginBottom=""))},b.prototype.hideFullWidthViewportScrollbars=function(){var a=this.scrollClipWidth>0?this.scrollWidth+"px":"";this.eFullWidthViewportWrapper.style.paddingBottom=this.isHorizontalScrollShowing()?a:"";var b=this.isVerticalScrollShowing();this.enableRtl?(this.eFullWidthViewportWrapper.style.marginLeft=b?a:"",this.eFullWidthViewport.style.marginLeft=b?"-"+a:""):(this.eFullWidthViewportWrapper.style.width=b?"calc(100% - "+a+")":"",this.eFullWidthViewport.style.width=b?"calc(100% + "+a+")":"")},b.prototype.ensureColumnVisible=function(a){var b=this.columnController.getGridColumn(a);if(b){if(b.isPinned())return void console.warn("calling ensureIndexVisible on a "+b.getPinned()+" pinned column doesn't make sense for column "+b.getColId());if(!this.columnController.isColumnDisplayed(b))return void console.warn("column is not currently visible");var c,d,e=b.getLeft(),f=e+b.getActualWidth(),g=this.eBodyViewport.clientWidth,h=this.getBodyViewportScrollLeft(),i=this.columnController.getBodyContainerWidth();this.enableRtl?(c=i-h-g,d=i-h):(c=h,d=g+h);var j=c>e,k=d<f,l=g<b.getActualWidth(),m=j||l,n=k;if(m)if(this.enableRtl){var o=i-g-e;this.setBodyViewportScrollLeft(o)}else this.setBodyViewportScrollLeft(e);else if(n)if(this.enableRtl){var o=i-f;this.setBodyViewportScrollLeft(o)}else{var o=f-g;this.setBodyViewportScrollLeft(o)}this.onHorizontalViewportChanged()}},b.prototype.showLoadingOverlay=function(){this.overlayWrapper.showLoadingOverlay(this.eOverlay)},b.prototype.showNoRowsOverlay=function(){this.overlayWrapper.showNoRowsOverlay(this.eOverlay)},b.prototype.hideOverlay=function(){this.overlayWrapper.hideOverlay(this.eOverlay)},b.prototype.getWidthForSizeColsToFit=function(){var a=this.eBody.clientWidth,b=this.isVerticalScrollShowing();return b&&(a-=this.scrollWidth),a},b.prototype.sizeColumnsToFit=function(a){var b=this,c=this.getWidthForSizeColsToFit();c>0?this.columnController.sizeColumnsToFit(c,"sizeColumnsToFit"):void 0===a?setTimeout(function(){b.sizeColumnsToFit(100)},0):100===a?setTimeout(function(){b.sizeColumnsToFit(500)},100):500===a?setTimeout(function(){b.sizeColumnsToFit(-1)},500):console.log("ag-Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},b.prototype.getBodyContainer=function(){return this.eBodyContainer},b.prototype.getDropTargetBodyContainers=function(){return[this.eBodyViewport,this.eTopViewport,this.eBottomViewport]},b.prototype.getDropTargetLeftContainers=function(){return[this.eLeftViewport,this.eLeftBottom,this.eLeftTop]},b.prototype.getDropTargetRightContainers=function(){return[this.eRightViewport,this.eRightBottom,this.eRightTop]},b.prototype.buildRowContainerComponents=function(){var a=this;this.eAllCellContainers=[this.eLeftContainer,this.eRightContainer,this.eBodyContainer,this.eTop,this.eBottom,this.eFullWidthContainer],this.rowContainerComponents={body:new w.RowContainerComponent({eContainer:this.eBodyContainer,eViewport:this.eBodyViewport}),fullWidth:new w.RowContainerComponent({eContainer:this.eFullWidthContainer,hideWhenNoChildren:!0,eViewport:this.eFullWidthViewport}),pinnedLeft:new w.RowContainerComponent({eContainer:this.eLeftContainer,eViewport:this.eLeftViewport}),pinnedRight:new w.RowContainerComponent({eContainer:this.eRightContainer,eViewport:this.eRightViewport}),floatingTop:new w.RowContainerComponent({eContainer:this.eTopContainer}),floatingTopPinnedLeft:new w.RowContainerComponent({eContainer:this.eLeftTop}),floatingTopPinnedRight:new w.RowContainerComponent({eContainer:this.eRightTop}),floatingTopFullWidth:new w.RowContainerComponent({eContainer:this.eTopFullWidthContainer,hideWhenNoChildren:!0}),floatingBottom:new w.RowContainerComponent({eContainer:this.eBottomContainer}),floatingBottomPinnedLeft:new w.RowContainerComponent({eContainer:this.eLeftBottom}),floatingBottomPinnedRight:new w.RowContainerComponent({eContainer:this.eRightBottom}),floatingBottomFullWith:new w.RowContainerComponent({eContainer:this.eBottomFullWidthContainer,hideWhenNoChildren:!0})},g.Utils.iterateObject(this.rowContainerComponents,function(b,c){c&&a.context.wireBean(c)})},b.prototype.setupRowAnimationCssClass=function(){var a=this,b=function(){var b=a.gridOptionsWrapper.isAnimateRows()&&!a.heightScaler.isScaling();g.Utils.addOrRemoveCssClass(a.eBody,"ag-row-animation",b),g.Utils.addOrRemoveCssClass(a.eBody,"ag-row-no-animation",!b)};b(),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_HEIGHT_SCALE_CHANGED,b)},b.prototype.suppressScrollOnFloatingRow=function(){var a=this,b=function(){return a.eTopViewport.scrollLeft=0},c=function(){return a.eTopViewport.scrollLeft=0};this.addDestroyableEventListener(this.eTopViewport,"scroll",b),this.addDestroyableEventListener(this.eBottomViewport,"scroll",c)},b.prototype.getRowContainers=function(){return this.rowContainerComponents},b.prototype.onDisplayedColumnsChanged=function(){this.setPinnedContainersVisible(),this.setBodyAndHeaderHeights(),this.onHorizontalViewportChanged()},b.prototype.onDisplayedColumnsWidthChanged=function(){this.setWidthsOfContainers(),this.onHorizontalViewportChanged(),this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},b.prototype.setWidthsOfContainers=function(){this.setCenterWidth(),this.setPinnedLeftWidth(),this.setPinnedRightWidth()},b.prototype.setCenterWidth=function(){var a=this.columnController.getBodyContainerWidth()+"px";this.eBodyContainer.style.width=a,this.eBottomContainer.style.width=a,this.eTopContainer.style.width=a},b.prototype.setPinnedLeftWidth=function(){var a,b,c=this.columnController.getPinnedLeftContainerWidth(),d=c+this.scrollWidth,e=c+this.scrollClipWidth;g.Utils.isVerticalScrollShowing(this.eLeftViewport)?this.enableRtl?(a=d,b=d):(a=e,b=c):(a=c,b=c),this.setElementWidth(this.eLeftViewportWrapper,b),this.setElementWidth(this.eLeftViewport,a),this.setElementWidth(this.eLeftContainer,c),this.setElementWidth(this.eLeftBottom,b),this.setElementWidth(this.eLeftTop,b)},b.prototype.setPinnedRightWidth=function(){var a,b,c=this.columnController.getPinnedRightContainerWidth(),d=c+this.scrollWidth,e=c+this.scrollClipWidth;g.Utils.isVerticalScrollShowing(this.eRightViewport)?this.enableRtl?(a=e,b=c):(a=d,b=d):(a=c,b=c),this.setElementWidth(this.eRightViewportWrapper,b),this.setElementWidth(this.eRightViewport,a),this.setElementWidth(this.eRightContainer,c),this.setElementWidth(this.eRightBottom,b),this.setElementWidth(this.eRightTop,b)},b.prototype.setElementWidth=function(a,b){a.style.width=b+"px",a.style.minWidth=b+"px"},b.prototype.setPinnedContainersVisible=function(){var a=!1,b=this.columnController.isPinningLeft();b!==this.pinningLeft&&(this.pinningLeft=b,this.headerRootComp.setLeftVisible(b),g.Utils.setVisible(this.eLeftViewportWrapper,b),a=!0,b&&(this.eLeftViewport.scrollTop=this.eBodyViewport.scrollTop));var c=this.columnController.isPinningRight();c!==this.pinningRight&&(this.pinningRight=c,this.headerRootComp.setRightVisible(c),g.Utils.setVisible(this.eRightViewportWrapper,c),c&&(this.eRightViewport.scrollTop=this.eBodyViewport.scrollTop),a=!0),a&&(this.hideVerticalScrollOnCenter(),this.setPinnedLeftWidth(),this.setPinnedRightWidth())},b.prototype.hideVerticalScrollOnCenter=function(){var a=this.enableRtl?this.columnController.isPinningLeft():this.columnController.isPinningRight(),b=g.Utils.isVerticalScrollShowing(this.eBodyViewport),c=a&&b,d=c?"-"+this.scrollClipWidth+"px":"";this.enableRtl?this.eBodyViewport.style.marginLeft=d:this.eBodyViewport.style.marginRight=d},b.prototype.checkBodyHeight=function(){var a=this.eBody.clientHeight;if(this.bodyHeight!==a){this.bodyHeight=a;var b={type:o.Events.EVENT_BODY_HEIGHT_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(b)}},b.prototype.setBodyAndHeaderHeights=function(){var a,b,c,d=this.columnController.getHeaderRowCount(),e=0;this.columnController.isPivotMode()?(e=0,b=this.gridOptionsWrapper.getPivotGroupHeaderHeight(),c=this.gridOptionsWrapper.getPivotHeaderHeight()):(this.gridOptionsWrapper.isFloatingFilter()&&d++,e=this.gridOptionsWrapper.isFloatingFilter()?1:0,b=this.gridOptionsWrapper.getGroupHeaderHeight(),c=this.gridOptionsWrapper.getHeaderHeight());var f=1+e,g=d-f;a=e*this.gridOptionsWrapper.getFloatingFiltersHeight(),a+=g*b,a+=c,this.headerRootComp.setHeight(a);var h=this.pinnedRowModel.getPinnedTopTotalHeight(),i=this.pinnedRowModel.getPinnedBottomTotalHeight();this.eTop.style.minHeight=h+"px",this.eTop.style.height=h+"px",this.eBottom.style.minHeight=i+"px",this.eBottom.style.height=i+"px",this.checkBodyHeight()},b.prototype.getBodyHeight=function(){return this.bodyHeight},b.prototype.setHorizontalScrollPosition=function(a){this.eBodyViewport.scrollLeft=a,this.nextScrollLeft!==a&&(this.nextScrollLeft=a,this.doHorizontalScroll())},b.prototype.setVerticalScrollPosition=function(a){this.eBodyViewport.scrollTop=a},b.prototype.scrollHorizontally=function(a){var b=this.eBodyViewport.scrollLeft;this.setHorizontalScrollPosition(b+a);var c=this.eBodyViewport.scrollLeft;return c-b},b.prototype.scrollVertically=function(a){var b=this.eBodyViewport.scrollTop;this.setVerticalScrollPosition(b+a);var c=this.eBodyViewport.scrollTop;return c-b},b.prototype.addScrollListener=function(){var a=this;this.addDestroyableEventListener(this.eBodyViewport,"scroll",function(){a.onBodyHorizontalScroll(),a.onAnyBodyScroll(a.eBodyViewport)}),this.addDestroyableEventListener(this.eRightViewport,"scroll",this.onAnyBodyScroll.bind(this,this.eRightViewport)),this.addDestroyableEventListener(this.eLeftViewport,"scroll",this.onAnyBodyScroll.bind(this,this.eLeftViewport)),this.addDestroyableEventListener(this.eFullWidthViewport,"scroll",this.onAnyBodyScroll.bind(this,this.eFullWidthViewport))},b.prototype.onAnyBodyScroll=function(a){var b=(new Date).getTime(),c=b-this.lastVScrollTime,d=a!==this.lastVScrollElement&&c<500;if(!d){this.lastVScrollElement=a,this.lastVScrollTime=b;var e=a.scrollTop;this.useAnimationFrame?this.nextScrollTop!==e&&(this.nextScrollTop=e,this.animationFrameService.schedule()):e!==this.scrollTop&&(this.scrollTop=e,this.synchroniseVerticalScrollPositions(e),this.redrawRowsAfterScroll())}},b.prototype.onBodyHorizontalScroll=function(){var a=this.eBodyViewport.scrollLeft;this.nextScrollLeft!==a&&(this.nextScrollLeft=a,this.useAnimationFrame?this.animationFrameService.schedule():this.doHorizontalScroll())},b.prototype.doHorizontalScroll=function(){this.scrollLeft=this.nextScrollLeft;var a={type:o.Events.EVENT_BODY_SCROLL,api:this.gridApi,columnApi:this.columnApi,direction:"horizontal",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(a),this.horizontallyScrollHeaderCenterAndFloatingCenter(),this.onHorizontalViewportChanged()},b.prototype.executeFrame=function(){return this.scrollLeft!==this.nextScrollLeft?(this.doHorizontalScroll(),!0):this.scrollTop!==this.nextScrollTop?(this.scrollTop=this.nextScrollTop,this.synchroniseVerticalScrollPositions(this.scrollTop),this.verticalRedrawNeeded=!0,!0):!!this.verticalRedrawNeeded&&(this.redrawRowsAfterScroll(),this.verticalRedrawNeeded=!1,!0)},b.prototype.redrawRowsAfterScroll=function(){var a={type:o.Events.EVENT_BODY_SCROLL,direction:"vertical",api:this.gridApi,columnApi:this.columnApi,left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(a)},b.prototype.onHorizontalViewportChanged=function(){var a=this.eBodyViewport.clientWidth,b=this.getBodyViewportScrollLeft();this.columnController.setVirtualViewportPosition(a,b)},b.prototype.getBodyViewportScrollLeft=function(){return g.Utils.getScrollLeft(this.eBodyViewport,this.enableRtl)},b.prototype.setBodyViewportScrollLeft=function(a){g.Utils.setScrollLeft(this.eBodyViewport,a,this.enableRtl)},b.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(){var a=this.getBodyViewportScrollLeft(),b=this.enableRtl?a:-a;this.headerRootComp.setHorizontalScroll(b),this.eBottomContainer.style.left=b+"px",this.eTopContainer.style.left=b+"px"},b.prototype.synchroniseVerticalScrollPositions=function(a){this.lastVScrollElement!==this.eBodyViewport&&(this.eBodyViewport.scrollTop=a),this.lastVScrollElement!==this.eLeftViewport&&this.pinningLeft&&(this.eLeftViewport.scrollTop=a),this.lastVScrollElement!==this.eRightViewport&&this.pinningRight&&(this.eRightViewport.scrollTop=a),this.lastVScrollElement!==this.eFullWidthViewport&&(this.eFullWidthViewport.scrollTop=a),this.rowContainerComponents.body.setVerticalScrollPosition(a),this.rowContainerComponents.pinnedLeft.setVerticalScrollPosition(a),this.rowContainerComponents.pinnedRight.setVerticalScrollPosition(a),this.rowContainerComponents.fullWidth.setVerticalScrollPosition(a),this.redrawRowsAfterScroll()},b.prototype.addScrollEventListener=function(a){this.eBodyViewport.addEventListener("scroll",a)},b.prototype.removeScrollEventListener=function(a){this.eBodyViewport.removeEventListener("scroll",a)},e([m.Autowired("alignedGridsService"),f("design:type",z.AlignedGridsService)],b.prototype,"alignedGridsService",void 0),e([m.Autowired("gridOptionsWrapper"),f("design:type",i.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([m.Autowired("columnController"),f("design:type",j.ColumnController)],b.prototype,"columnController",void 0),e([m.Autowired("rowRenderer"),f("design:type",l.RowRenderer)],b.prototype,"rowRenderer",void 0),e([m.Autowired("pinnedRowModel"),f("design:type",A.PinnedRowModel)],b.prototype,"pinnedRowModel",void 0),e([m.Autowired("eventService"),f("design:type",n.EventService)],b.prototype,"eventService",void 0),e([m.Autowired("context"),f("design:type",m.Context)],b.prototype,"context",void 0),e([m.Autowired("animationFrameService"),f("design:type",C.AnimationFrameService)],b.prototype,"animationFrameService",void 0),e([m.Autowired("navigationService"),f("design:type",E.NavigationService)],b.prototype,"navigationService",void 0),e([m.Autowired("autoHeightCalculator"),f("design:type",M.AutoHeightCalculator)],b.prototype,"autoHeightCalculator",void 0),e([m.Autowired("columnAnimationService"),f("design:type",N.ColumnAnimationService)],b.prototype,"columnAnimationService",void 0),e([m.Autowired("autoWidthCalculator"),f("design:type",O.AutoWidthCalculator)],b.prototype,"autoWidthCalculator",void 0),e([m.Autowired("paginationAutoPageSizeService"),f("design:type",x.PaginationAutoPageSizeService)],b.prototype,"paginationAutoPageSizeService",void 0),e([m.Autowired("beans"),f("design:type",P.Beans)],b.prototype,"beans",void 0),e([m.Autowired("paginationProxy"),f("design:type",x.PaginationProxy)],b.prototype,"paginationProxy",void 0),e([m.Autowired("columnApi"),f("design:type",k.ColumnApi)],b.prototype,"columnApi",void 0),e([m.Autowired("gridApi"),f("design:type",B.GridApi)],b.prototype,"gridApi",void 0),e([m.Autowired("dragService"),f("design:type",p.DragService)],b.prototype,"dragService",void 0),e([m.Autowired("selectionController"),f("design:type",r.SelectionController)],b.prototype,"selectionController",void 0),e([m.Autowired("csvCreator"),f("design:type",s.CsvCreator)],b.prototype,"csvCreator",void 0),e([m.Autowired("mouseEventService"),f("design:type",t.MouseEventService)],b.prototype,"mouseEventService",void 0),e([m.Autowired("focusedCellController"),f("design:type",u.FocusedCellController)],b.prototype,"focusedCellController",void 0),e([m.Autowired("$scope"),f("design:type",Object)],b.prototype,"$scope",void 0),e([m.Autowired("scrollVisibleService"),f("design:type",v.ScrollVisibleService)],b.prototype,"scrollVisibleService",void 0),e([m.Autowired("frameworkFactory"),f("design:type",Object)],b.prototype,"frameworkFactory",void 0),e([m.Autowired("valueService"),f("design:type",F.ValueService)],b.prototype,"valueService",void 0),e([m.Autowired("componentRecipes"),f("design:type",H.ComponentRecipes)],b.prototype,"componentRecipes",void 0),e([m.Autowired("dragAndDropService"),f("design:type",I.DragAndDropService)],b.prototype,"dragAndDropService",void 0),e([m.Autowired("heightScaler"),f("design:type",K.HeightScaler)],b.prototype,"heightScaler",void 0),e([m.Autowired("enterprise"),f("design:type",Boolean)],b.prototype,"enterprise",void 0),e([m.Optional("rangeController"),f("design:type",Object)],b.prototype,"rangeController",void 0),e([m.Optional("contextMenuFactory"),f("design:type",Object)],b.prototype,"contextMenuFactory",void 0),e([m.Optional("clipboardService"),f("design:type",Object)],b.prototype,"clipboardService",void 0),e([Q.RefSelector("eBody"),f("design:type",HTMLElement)],b.prototype,"eBody",void 0),e([Q.RefSelector("eBodyViewport"),f("design:type",HTMLElement)],b.prototype,"eBodyViewport",void 0),e([Q.RefSelector("eBodyContainer"),f("design:type",HTMLElement)],b.prototype,"eBodyContainer",void 0),e([Q.RefSelector("eLeftContainer"),f("design:type",HTMLElement)],b.prototype,"eLeftContainer",void 0),e([Q.RefSelector("eRightContainer"),f("design:type",HTMLElement)],b.prototype,"eRightContainer",void 0),e([Q.RefSelector("eFullWidthViewportWrapper"),f("design:type",HTMLElement)],b.prototype,"eFullWidthViewportWrapper",void 0),e([Q.RefSelector("eFullWidthViewport"),f("design:type",HTMLElement)],b.prototype,"eFullWidthViewport",void 0),e([Q.RefSelector("eFullWidthContainer"),f("design:type",HTMLElement)],b.prototype,"eFullWidthContainer",void 0),e([Q.RefSelector("eLeftViewport"),f("design:type",HTMLElement)],b.prototype,"eLeftViewport",void 0),e([Q.RefSelector("eLeftViewportWrapper"),f("design:type",HTMLElement)],b.prototype,"eLeftViewportWrapper",void 0),e([Q.RefSelector("eRightViewport"),f("design:type",HTMLElement)],b.prototype,"eRightViewport",void 0),e([Q.RefSelector("eRightViewportWrapper"),f("design:type",HTMLElement)],b.prototype,"eRightViewportWrapper",void 0),e([Q.RefSelector("eTop"),f("design:type",HTMLElement)],b.prototype,"eTop",void 0),e([Q.RefSelector("eLeftTop"),f("design:type",HTMLElement)],b.prototype,"eLeftTop",void 0),e([Q.RefSelector("eRightTop"),f("design:type",HTMLElement)],b.prototype,"eRightTop",void 0),e([Q.RefSelector("eTopContainer"),f("design:type",HTMLElement)],b.prototype,"eTopContainer",void 0),e([Q.RefSelector("eTopViewport"),f("design:type",HTMLElement)],b.prototype,"eTopViewport",void 0),e([Q.RefSelector("eTopFullWidthContainer"),f("design:type",HTMLElement)],b.prototype,"eTopFullWidthContainer",void 0),e([Q.RefSelector("eBottom"),f("design:type",HTMLElement)],b.prototype,"eBottom",void 0),e([Q.RefSelector("eLeftBottom"),f("design:type",HTMLElement)],b.prototype,"eLeftBottom",void 0),e([Q.RefSelector("eRightBottom"),f("design:type",HTMLElement)],b.prototype,"eRightBottom",void 0),e([Q.RefSelector("eBottomContainer"),f("design:type",HTMLElement)],b.prototype,"eBottomContainer",void 0),e([Q.RefSelector("eBottomViewport"),f("design:type",HTMLElement)],b.prototype,"eBottomViewport",void 0),e([Q.RefSelector("eBottomFullWidthContainer"),f("design:type",HTMLElement)],b.prototype,"eBottomFullWidthContainer",void 0),e([Q.RefSelector("headerRoot"),f("design:type",R.HeaderRootComp)],b.prototype,"headerRootComp",void 0),e([m.PreDestroy,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"destroy",null),e([m.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b}(L.Component);b.GridPanel=T},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(28),h=c(34),i=c(4),j=c(1),k=function(){function a(){}return a.prototype.registerGridComp=function(a){this.gridPanel=a},a.prototype.getPreferredHeightForRow=function(a){var b=this;this.eDummyContainer||(this.eDummyContainer=document.createElement("div"),j._.addCssClass(this.eDummyContainer,"ag-row ag-row-no-focus"));var c=this.gridPanel.getBodyContainer();c.appendChild(this.eDummyContainer);var d=[],e=this.columnController.getAllAutoRowHeightCols();console.log(),e.forEach(function(c){var e=new h.CellComp(b.$scope,b.beans,c,a,null,(!0));e.setParentRow(b.eDummyContainer),d.push(e)});var f=d.map(function(a){return a.getCreateTemplate()}).join(" ");this.eDummyContainer.innerHTML=f,d.forEach(function(a){return a.afterAttached()});for(var g=0,i=0;i<this.eDummyContainer.children.length;i++){var k=this.eDummyContainer.children[i];k.offsetHeight>g&&(g=k.offsetHeight)}return c.removeChild(this.eDummyContainer),d.forEach(function(a){a.detach(),a.destroy()}),j._.removeAllChildren(this.eDummyContainer),g},d([f.Autowired("beans"),e("design:type",g.Beans)],a.prototype,"beans",void 0),d([f.Autowired("$scope"),e("design:type",Object)],a.prototype,"$scope",void 0),d([f.Autowired("columnController"),e("design:type",i.ColumnController)],a.prototype,"columnController",void 0),a=d([f.Bean("autoHeightCalculator")],a)}();b.AutoHeightCalculator=k},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(2),h=c(4),i=c(10),j=c(0),k=c(98),l=c(3),m=c(5),n=c(36),o=c(8),p=c(11),q=c(1),r=c(6),s=c(39),t=function(a){function b(){return a.call(this,b.TEMPLATE)||this}return d(b,a),b.prototype.registerGridComp=function(a){this.gridPanel=a,this.centerContainer.registerGridComp(a),this.pinnedLeftContainer.registerGridComp(a),this.pinnedRightContainer.registerGridComp(a)},b.prototype.postConstruct=function(){var a=this;this.gridApi.registerHeaderRootComp(this),this.autoWidthCalculator.registerHeaderRootComp(this),this.centerContainer=new k.HeaderContainer(this.eHeaderContainer,this.eHeaderViewport,null),this.childContainers=[this.centerContainer],this.pinnedLeftContainer=new k.HeaderContainer(this.ePinnedLeftHeader,null,i.Column.PINNED_LEFT),this.pinnedRightContainer=new k.HeaderContainer(this.ePinnedRightHeader,null,i.Column.PINNED_RIGHT),this.childContainers.push(this.pinnedLeftContainer),this.childContainers.push(this.pinnedRightContainer),this.childContainers.forEach(function(b){return a.context.wireBean(b)}),this.eventService.addEventListener(m.Events.EVENT_COLUMN_VALUE_CHANGED,this.refreshHeader.bind(this)),this.eventService.addEventListener(m.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addPreventHeaderScroll(),this.columnController.isReady()&&this.refreshHeader()},b.prototype.setHorizontalScroll=function(a){this.eHeaderContainer.style.left=a+"px"},b.prototype.forEachHeaderElement=function(a){this.childContainers.forEach(function(b){return b.forEachHeaderElement(a)})},b.prototype.destroy=function(){this.childContainers.forEach(function(a){return a.destroy()})},b.prototype.refreshHeader=function(){this.childContainers.forEach(function(a){return a.refresh()})},b.prototype.onPivotModeChanged=function(){var a=this.columnController.isPivotMode();q.Utils.addOrRemoveCssClass(this.getGui(),"ag-pivot-on",a),q.Utils.addOrRemoveCssClass(this.getGui(),"ag-pivot-off",!a)},b.prototype.setHeight=function(a){this.getGui().style.height=a+"px",this.getGui().style.minHeight=a+"px"},b.prototype.addPreventHeaderScroll=function(){var a=this;this.addDestroyableEventListener(this.eHeaderViewport,"scroll",function(){var b=a.eHeaderViewport.scrollLeft;0!==b&&(a.gridPanel.scrollHorizontally(b),a.eHeaderViewport.scrollLeft=0)})},b.prototype.setLeftVisible=function(a){q.Utils.setVisible(this.ePinnedLeftHeader,a)},b.prototype.setRightVisible=function(a){q.Utils.setVisible(this.ePinnedRightHeader,a)},b.TEMPLATE='<div class="ag-header" role="row">\n            <div class="ag-pinned-left-header" ref="ePinnedLeftHeader" role="presentation"></div>\n            <div class="ag-header-viewport" ref="eHeaderViewport" role="presentation">\n                <div class="ag-header-container" ref="eHeaderContainer" role="presentation"></div>\n            </div>\n            <div class="ag-pinned-right-header" ref="ePinnedRightHeader" role="presentation"></div>\n        </div>',e([p.RefSelector("ePinnedLeftHeader"),f("design:type",HTMLElement)],b.prototype,"ePinnedLeftHeader",void 0),e([p.RefSelector("ePinnedRightHeader"),f("design:type",HTMLElement)],b.prototype,"ePinnedRightHeader",void 0),e([p.RefSelector("eHeaderContainer"),f("design:type",HTMLElement)],b.prototype,"eHeaderContainer",void 0),e([p.RefSelector("eHeaderViewport"),f("design:type",HTMLElement)],b.prototype,"eHeaderViewport",void 0),e([j.Autowired("gridOptionsWrapper"),f("design:type",g.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([j.Autowired("columnController"),f("design:type",h.ColumnController)],b.prototype,"columnController",void 0),e([j.Autowired("context"),f("design:type",j.Context)],b.prototype,"context",void 0),e([j.Autowired("eventService"),f("design:type",l.EventService)],b.prototype,"eventService",void 0),e([j.Autowired("scrollVisibleService"),f("design:type",n.ScrollVisibleService)],b.prototype,"scrollVisibleService",void 0),e([j.Autowired("gridApi"),f("design:type",r.GridApi)],b.prototype,"gridApi",void 0),e([j.Autowired("autoWidthCalculator"),f("design:type",s.AutoWidthCalculator)],b.prototype,"autoWidthCalculator",void 0),e([j.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),e([j.PreDestroy,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"destroy",null),b}(o.Component);b.HeaderRootComp=t},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(1),e=function(){function a(){}return a.addHeaderClassesFromColDef=function(a,b,c,e,f){d.Utils.missing(a)||this.addColumnClassesFromCollDef(a.headerClass,a,b,c,e,f)},a.addToolPanelClassesFromColDef=function(a,b,c,e,f){d.Utils.missing(a)||this.addColumnClassesFromCollDef(a.toolPanelClass,a,b,c,e,f)},a.addColumnClassesFromCollDef=function(a,b,c,e,f,g){if(!d.Utils.missing(a)){var h;if("function"==typeof a){var i={colDef:b,column:f,columnGroup:g,context:e.getContext(),api:e.getApi()},j=a;h=j(i)}else h=a;"string"==typeof h?d.Utils.addCssClass(c,h):Array.isArray(h)&&h.forEach(function(a){d.Utils.addCssClass(c,a)})}
},a}();b.CssClassApplier=e},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(9),h=c(4),i=c(1),j=c(64),k=c(23),l=c(2),m=c(30),n=function(){function a(){}return a.prototype.getNextCellToFocus=function(a,b){for(var c=b,d=!1;!d;){switch(a){case g.Constants.KEY_UP:c=this.getCellAbove(c);break;case g.Constants.KEY_DOWN:c=this.getCellBelow(c);break;case g.Constants.KEY_RIGHT:c=this.gridOptionsWrapper.isEnableRtl()?this.getCellToLeft(c):this.getCellToRight(c);break;case g.Constants.KEY_LEFT:c=this.gridOptionsWrapper.isEnableRtl()?this.getCellToRight(c):this.getCellToLeft(c);break;default:console.log("ag-Grid: unknown key for navigation "+a),c=null}d=!c||this.isCellGoodToFocusOn(c)}return c},a.prototype.isCellGoodToFocusOn=function(a){var b,c=a.column;switch(a.floating){case g.Constants.PINNED_TOP:b=this.pinnedRowModel.getPinnedTopRow(a.rowIndex);break;case g.Constants.PINNED_BOTTOM:b=this.pinnedRowModel.getPinnedBottomRow(a.rowIndex);break;default:b=this.rowModel.getRow(a.rowIndex)}var d=c.isSuppressNavigable(b);return!d},a.prototype.getCellToLeft=function(a){var b=this.columnController.getDisplayedColBefore(a.column);if(b){var c={rowIndex:a.rowIndex,column:b,floating:a.floating};return new k.GridCell(c)}return null},a.prototype.getCellToRight=function(a){var b=this.columnController.getDisplayedColAfter(a.column);if(b){var c={rowIndex:a.rowIndex,column:b,floating:a.floating};return new k.GridCell(c)}return null},a.prototype.getRowBelow=function(a){return this.isLastRowInContainer(a)?a.isFloatingBottom()?null:a.isNotFloating()?this.pinnedRowModel.isRowsToRender(g.Constants.PINNED_BOTTOM)?new j.GridRow(0,g.Constants.PINNED_BOTTOM):null:this.rowModel.isRowsToRender()?new j.GridRow(0,null):this.pinnedRowModel.isRowsToRender(g.Constants.PINNED_BOTTOM)?new j.GridRow(0,g.Constants.PINNED_BOTTOM):null:new j.GridRow(a.rowIndex+1,a.floating)},a.prototype.getCellBelow=function(a){var b=this.getRowBelow(a.getGridRow());if(b){var c={rowIndex:b.rowIndex,column:a.column,floating:b.floating};return new k.GridCell(c)}return null},a.prototype.isLastRowInContainer=function(a){if(a.isFloatingTop()){var b=this.pinnedRowModel.getPinnedTopRowData().length-1;return b<=a.rowIndex}if(a.isFloatingBottom()){var c=this.pinnedRowModel.getPinnedBottomRowData().length-1;return c<=a.rowIndex}var d=this.rowModel.getPageLastRow();return d<=a.rowIndex},a.prototype.getRowAbove=function(a){return 0===a.rowIndex?a.isFloatingTop()?null:a.isNotFloating()?this.pinnedRowModel.isRowsToRender(g.Constants.PINNED_TOP)?this.getLastFloatingTopRow():null:this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender(g.Constants.PINNED_TOP)?this.getLastFloatingTopRow():null:new j.GridRow(a.rowIndex-1,a.floating)},a.prototype.getCellAbove=function(a){var b=this.getRowAbove(a.getGridRow());if(b){var c={rowIndex:b.rowIndex,column:a.column,floating:b.floating};return new k.GridCell(c)}return null},a.prototype.getLastBodyCell=function(){var a=this.rowModel.getPageLastRow();return new j.GridRow(a,null)},a.prototype.getLastFloatingTopRow=function(){var a=this.pinnedRowModel.getPinnedTopRowData().length-1;return new j.GridRow(a,g.Constants.PINNED_TOP)},a.prototype.getNextTabbedCell=function(a,b){return b?this.getNextTabbedCellBackwards(a):this.getNextTabbedCellForwards(a)},a.prototype.getNextTabbedCellForwards=function(a){var b=this.columnController.getAllDisplayedColumns(),c=a.rowIndex,d=a.floating,e=this.columnController.getDisplayedColAfter(a.column);if(!e){e=b[0];var f=this.getRowBelow(a.getGridRow());if(i.Utils.missing(f))return;c=f.rowIndex,d=f.floating}var g={rowIndex:c,column:e,floating:d};return new k.GridCell(g)},a.prototype.getNextTabbedCellBackwards=function(a){var b=this.columnController.getAllDisplayedColumns(),c=a.rowIndex,d=a.floating,e=this.columnController.getDisplayedColBefore(a.column);if(!e){e=b[b.length-1];var f=this.getRowAbove(a.getGridRow());if(i.Utils.missing(f))return;c=f.rowIndex,d=f.floating}var g={rowIndex:c,column:e,floating:d};return new k.GridCell(g)},d([f.Autowired("columnController"),e("design:type",h.ColumnController)],a.prototype,"columnController",void 0),d([f.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([f.Autowired("pinnedRowModel"),e("design:type",m.PinnedRowModel)],a.prototype,"pinnedRowModel",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",l.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([f.Bean("cellNavigationService")],a)}();b.CellNavigationService=n},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(){this.existingIds={}}return a.prototype.getInstanceIdForKey=function(a){var b,c=this.existingIds[a];return b="number"!=typeof c?0:c+1,this.existingIds[a]=b,b},a}();b.GroupInstanceIdCreator=d},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g};Object.defineProperty(b,"__esModule",{value:!0});var e=c(0),f=function(){function a(){}return a.prototype.download=function(a,b,c){var d=new Blob(["\ufeff",b],{type:c});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(d,a);else{var e=document.createElement("a");e.href=window.URL.createObjectURL(d),e.download=a,document.body.appendChild(e),e.click(),document.body.removeChild(e)}},a=d([e.Bean("downloader")],a)}();b.Downloader=f},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(2),e=c(17),f=c(7),g=c(4),h=c(20),i=c(80),j=c(18),k=c(16),l=c(3),m=c(78),n=c(6),o=c(38),p=c(48),q=c(19),r=c(49),s=c(35),t=c(12),u=c(31),v=c(39),w=c(59),x=c(0),y=c(47),z=c(42),A=c(108),B=c(15),C=c(40),D=c(24),E=c(22),F=c(44),G=c(82),H=c(1),I=c(109),J=c(111),K=c(113),L=c(54),M=c(5),N=c(114),O=c(116),P=c(55),Q=c(56),R=c(43),S=c(60),T=c(117),U=c(36),V=c(84),W=c(118),X=c(63),Y=c(73),Z=c(45),$=c(53),_=c(112),aa=c(110),ba=c(138),ca=c(104),da=c(29),ea=c(105),fa=c(9),ga=c(33),ha=c(139),ia=c(58),ja=c(30),ka=c(27),la=c(21),ma=c(66),na=c(76),oa=c(77),pa=c(28),qa=c(41),ra=c(37),sa=c(97),ta=c(57),ua=c(86),va=c(79),wa=c(140),xa=function(){function a(b,c,M){b||console.error("ag-Grid: no div element provided to the grid"),c||console.error("ag-Grid: no gridOptions provided to the grid");var N=this.getRowModelClass(c),O=H.Utils.exists(a.enterpriseBeans),fa=M?M.frameworkFactory:null;H.Utils.missing(fa)&&(fa=new T.BaseFrameworkFactory);var xa=[];a.enterpriseBeans&&(xa=xa.concat(a.enterpriseBeans)),a.frameworkBeans&&(xa=xa.concat(a.frameworkBeans));var ya={enterprise:O,gridOptions:c,eGridDiv:b,$scope:M?M.$scope:null,$compile:M?M.$compile:null,quickFilterOnScope:M?M.quickFilterOnScope:null,globalEventListener:M?M.globalEventListener:null,frameworkFactory:fa};M&&M.seedBeanInstances&&H.Utils.assign(ya,M.seedBeanInstances);var za=[{componentName:"AgCheckbox",theClass:S.AgCheckbox},{componentName:"AgGridComp",theClass:m.GridPanel},{componentName:"AgHeaderRoot",theClass:i.HeaderRootComp},{componentName:"AgPagination",theClass:wa.PaginationComp}];a.enterpriseComponents&&(za=za.concat(a.enterpriseComponents));var Aa={overrideBeans:xa,seed:ya,beans:[N,pa.Beans,da.PaginationAutoPageSizeService,n.GridApi,ma.ComponentProvider,na.AgComponentUtils,oa.ComponentMetadataProvider,ma.ComponentProvider,ka.ComponentResolver,la.ComponentRecipes,ta.HeightScaler,va.AutoHeightCalculator,P.CellRendererFactory,w.HorizontalResizeService,ja.PinnedRowModel,C.DragService,p.DisplayedGroupCreator,l.EventService,d.GridOptionsWrapper,e.SelectionController,j.FilterManager,g.ColumnController,da.PaginationProxy,h.RowRenderer,q.ExpressionService,o.BalancedColumnTreeBuilder,y.CsvCreator,V.Downloader,W.XmlFactory,X.GridSerializer,r.TemplateService,sa.NavigationService,s.PopupService,ga.ValueCache,k.ValueService,ia.AlignedGridsService,t.LoggerFactory,u.ColumnUtils,v.AutoWidthCalculator,s.PopupService,z.GridCore,A.StandardMenuFactory,B.DragAndDropService,f.ColumnApi,E.FocusedCellController,F.MouseEventService,G.CellNavigationService,I.FilterStage,J.SortStage,K.FlattenStage,aa.FilterService,ba.RowNodeFactory,L.CellEditorFactory,Q.CellRendererService,R.ValueFormatterService,Y.StylingService,U.ScrollVisibleService,Z.ColumnHoverService,$.ColumnAnimationService,_.SortService,ua.SelectableService,ca.AutoGroupColService,ea.ImmutableService,ha.ChangeDetectionService,qa.Environment,ra.AnimationFrameService,D.SortController],components:za,debug:!!c.debug},Ba=function(){return Aa.debug};this.context=new x.Context(Aa,new t.Logger("Context",Ba)),this.setColumnsAndData(),this.dispatchGridReadyEvent(c),c.debug&&console.log("ag-Grid -> initialised successfully, enterprise = "+O)}return a.setEnterpriseBeans=function(b,c){this.enterpriseBeans=b,H.Utils.iterateObject(c,function(b,c){return a.RowModelClasses[b]=c})},a.setEnterpriseComponents=function(a){this.enterpriseComponents=a},a.setFrameworkBeans=function(a){this.frameworkBeans=a},a.prototype.setColumnsAndData=function(){var a=this.context.getBean("gridOptionsWrapper"),b=this.context.getBean("columnController"),c=this.context.getBean("rowModel"),d=a.getColumnDefs(),e=a.getRowData(),f=H.Utils.missing(d)&&H.Utils.missing(e);if(!f&&(H.Utils.exists(d)&&b.setColumnDefs(d,"gridInitializing"),H.Utils.exists(e)&&c.getType()===fa.Constants.ROW_MODEL_TYPE_CLIENT_SIDE)){var g=c;g.setRowData(e)}},a.prototype.dispatchGridReadyEvent=function(a){var b=this.context.getBean("eventService"),c={type:M.Events.EVENT_GRID_READY,api:a.api,columnApi:a.columnApi};b.dispatchEvent(c)},a.prototype.getRowModelClass=function(b){var c=b.rowModelType;if(c="enterprise"===c?fa.Constants.ROW_MODEL_TYPE_SERVER_SIDE:c,H.Utils.exists(c)){var d=a.RowModelClasses[c];if(H.Utils.exists(d))return d;if("normal"===c)return console.warn("ag-Grid: normal rowModel deprecated. Should now be called client side row model instead."),O.ClientSideRowModel;console.error("ag-Grid: could not find matching row model for rowModelType "+c),c===fa.Constants.ROW_MODEL_TYPE_VIEWPORT&&console.error("ag-Grid: rowModelType viewport is only available in ag-Grid Enterprise"),c===fa.Constants.ROW_MODEL_TYPE_SERVER_SIDE&&console.error("ag-Grid: rowModelType server side is only available in ag-Grid Enterprise")}return O.ClientSideRowModel},a.prototype.destroy=function(){this.context.destroy()},a.RowModelClasses={infinite:N.InfiniteRowModel,clientSide:O.ClientSideRowModel},a}();b.Grid=xa},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(1),h=c(2),i=function(){function a(){}return a.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.isRowSelectableFunc=this.gridOptionsWrapper.getIsRowSelectableFunc()},a.prototype.updateSelectableAfterGrouping=function(a){if(this.isRowSelectableFunc){var b=function(a){return a.childrenAfterGroup};this.recurseDown(a.childrenAfterGroup,b)}},a.prototype.updateSelectableAfterFiltering=function(a){if(this.isRowSelectableFunc){var b=function(a){return a.childrenAfterFilter};this.recurseDown(a.childrenAfterGroup,b)}},a.prototype.recurseDown=function(a,b){var c=this;a.forEach(function(a){if(a.group){a.hasChildren()&&c.recurseDown(b(a),b);var d;if(c.groupSelectsChildren){var e=g._.find(b(a),"selectable",!0);d=g._.exists(e)}else d=c.isRowSelectableFunc(a);a.setRowSelectable(d)}})},d([f.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([f.Bean("selectableService")],a)}();b.SelectableService=i},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(1),f=c(13),g=c(61),h=function(a){function b(b){var c=a.call(this)||this;return c.maxRowFound=!1,c.blocks={},c.blockCount=0,c.virtualRowCount=b.initialRowCount,c.cacheParams=b,c}return d(b,a),b.prototype.destroy=function(){var b=this;a.prototype.destroy.call(this),this.forEachBlockInOrder(function(a){return b.destroyBlock(a)})},b.prototype.init=function(){var a=this;this.active=!0,this.addDestroyFunc(function(){return a.active=!1})},b.prototype.isActive=function(){return this.active},b.prototype.getVirtualRowCount=function(){return this.virtualRowCount},b.prototype.hack_setVirtualRowCount=function(a){this.virtualRowCount=a},b.prototype.isMaxRowFound=function(){return this.maxRowFound},b.prototype.onPageLoaded=function(a){this.cacheParams.rowNodeBlockLoader.loadComplete(),this.checkBlockToLoad(),this.isActive()&&(this.logger.log("onPageLoaded: page = "+a.page.getBlockNumber()+", lastRow = "+a.lastRow),a.success&&this.checkVirtualRowCount(a.page,a.lastRow))},b.prototype.purgeBlocksIfNeeded=function(a){var b=this;if(!(e.Utils.missing(this.cacheParams.maxBlocksInCache)||this.blockCount<=this.cacheParams.maxBlocksInCache)){var c=[];this.forEachBlockInOrder(function(b){b!==a&&c.push(b)}),c.sort(function(a,b){return b.getLastAccessed()-a.getLastAccessed()});var d=this.cacheParams.maxBlocksInCache-1;c.splice(0,d),c.forEach(function(a){a.isAnyNodeOpen(b.virtualRowCount)||b.removeBlockFromCache(a)})}},b.prototype.postCreateBlock=function(a){a.addEventListener(g.RowNodeBlock.EVENT_LOAD_COMPLETE,this.onPageLoaded.bind(this)),this.setBlock(a.getBlockNumber(),a),this.purgeBlocksIfNeeded(a),this.checkBlockToLoad()},b.prototype.removeBlockFromCache=function(a){a&&this.destroyBlock(a)},b.prototype.checkBlockToLoad=function(){this.cacheParams.rowNodeBlockLoader.checkBlockToLoad()},b.prototype.checkVirtualRowCount=function(a,b){if("number"==typeof b&&b>=0)this.virtualRowCount=b,this.maxRowFound=!0,this.onCacheUpdated();else if(!this.maxRowFound){var c=(a.getBlockNumber()+1)*this.cacheParams.blockSize,d=c+this.cacheParams.overflowSize;this.virtualRowCount<d?(this.virtualRowCount=d,this.onCacheUpdated()):this.cacheParams.dynamicRowHeight&&this.onCacheUpdated()}},b.prototype.setVirtualRowCount=function(a,b){this.virtualRowCount=a,e.Utils.exists(b)&&(this.maxRowFound=b),this.maxRowFound||this.virtualRowCount%this.cacheParams.blockSize===0&&this.virtualRowCount++,this.onCacheUpdated()},b.prototype.forEachNodeDeep=function(a,b){var c=this;this.forEachBlockInOrder(function(d){d.forEachNodeDeep(a,b,c.virtualRowCount)})},b.prototype.forEachBlockInOrder=function(a){var b=this.getBlockIdsSorted();this.forEachBlockId(b,a)},b.prototype.forEachBlockInReverseOrder=function(a){var b=this.getBlockIdsSorted().reverse();this.forEachBlockId(b,a)},b.prototype.forEachBlockId=function(a,b){var c=this;a.forEach(function(a){var d=c.blocks[a];b(d,a)})},b.prototype.getBlockIdsSorted=function(){var a=function(a,b){return a-b},b=Object.keys(this.blocks).map(function(a){return parseInt(a)}).sort(a);return b},b.prototype.getBlock=function(a){return this.blocks[a]},b.prototype.setBlock=function(a,b){this.blocks[a]=b,this.blockCount++,this.cacheParams.rowNodeBlockLoader.addBlock(b)},b.prototype.destroyBlock=function(a){delete this.blocks[a.getBlockNumber()],a.destroy(),this.blockCount--,this.cacheParams.rowNodeBlockLoader.removeBlock(a)},b.prototype.onCacheUpdated=function(){if(this.isActive()){var a={type:b.EVENT_CACHE_UPDATED};this.dispatchEvent(a)}},b.prototype.purgeCache=function(){var a=this;this.forEachBlockInOrder(function(b){return a.removeBlockFromCache(b)}),this.onCacheUpdated()},b.prototype.getRowNodesInRange=function(a,b){var c=this,d=[],f=-1,g=!1,h=new e.NumberSequence;e.Utils.missing(a)&&(g=!0);var i=!1;this.forEachBlockInOrder(function(e,j){if(!i){if(g&&f+1!==j)return void(i=!0);f=j,e.forEachNodeShallow(function(c){var e=c===a||c===b;(g||e)&&d.push(c),e&&(g=!g)},h,c.virtualRowCount)}});var j=i||g;return j?[]:d},b.EVENT_CACHE_UPDATED="cacheUpdated",b}(f.BeanStub);b.RowNodeCache=h},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(14),e=c(1),f=function(){function a(b,c,d,e,f){this.nextId=0,this.allNodesMap={},this.rootNode=b,this.gridOptionsWrapper=c,this.context=d,this.eventService=e,this.columnController=f,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=a.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}return a.prototype.postConstruct=function(){this.getNodeChildDetails=this.gridOptionsWrapper.getNodeChildDetailsFunc(),this.suppressParentsInRowNodes=this.gridOptionsWrapper.isSuppressParentsInRowNodes(),this.doesDataFlower=this.gridOptionsWrapper.getDoesDataFlowerFunc(),this.isRowMasterFunc=this.gridOptionsWrapper.getIsRowMasterFunc(),this.doingLegacyTreeData=e.Utils.exists(this.getNodeChildDetails),this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},a.prototype.getCopyOfNodesMap=function(){var a=e.Utils.cloneObject(this.allNodesMap);return a},a.prototype.getRowNode=function(a){return this.allNodesMap[a]},a.prototype.setRowData=function(b){if(this.rootNode.childrenAfterFilter=null,this.rootNode.childrenAfterGroup=null,this.rootNode.childrenAfterSort=null,this.rootNode.childrenMapped=null,this.nextId=0,this.allNodesMap={},!b)return this.rootNode.allLeafChildren=[],void(this.rootNode.childrenAfterGroup=[]);var c=this.recursiveFunction(b,null,a.TOP_LEVEL);this.doingLegacyTreeData?(this.rootNode.childrenAfterGroup=c,this.setLeafChildren(this.rootNode)):this.rootNode.allLeafChildren=c},a.prototype.updateRowData=function(a,b){var c=this;if(this.isLegacyTreeData())return null;var d=a.add,f=a.addIndex,g=a.remove,h=a.update,i={remove:[],update:[],add:[]};if(e.Utils.exists(d)){var j="number"==typeof f&&f>=0;j?d.reverse().forEach(function(a){var b=c.addRowNode(a,f);i.add.push(b)}):d.forEach(function(a){var b=c.addRowNode(a);i.add.push(b)})}return e.Utils.exists(g)&&g.forEach(function(a){var b=c.updatedRowNode(a,!1);b&&i.remove.push(b)}),e.Utils.exists(h)&&h.forEach(function(a){var b=c.updatedRowNode(a,!0);b&&i.update.push(b)}),b&&e.Utils.sortRowNodesByOrder(this.rootNode.allLeafChildren,b),i},a.prototype.addRowNode=function(b,c){var d=this.createNode(b,null,a.TOP_LEVEL);return e.Utils.exists(c)?e.Utils.insertIntoArray(this.rootNode.allLeafChildren,d,c):this.rootNode.allLeafChildren.push(d),d},a.prototype.updatedRowNode=function(a,b){var c,d=this.gridOptionsWrapper.getRowNodeIdFunc();if(e.Utils.exists(d)){var f=d(a);if(c=this.allNodesMap[f],!c)return console.error("ag-Grid: could not find row id="+f+", data item was not found for this id"),null}else if(c=e.Utils.find(this.rootNode.allLeafChildren,function(b){return b.data===a}),!c)return console.error("ag-Grid: could not find data item as object was not found",a),null;return b?c.updateData(a):(c.setSelected(!1),c.clearRowTop(),e.Utils.removeFromArray(this.rootNode.allLeafChildren,c),this.allNodesMap[c.id]=void 0),c},a.prototype.recursiveFunction=function(a,b,c){var d=this;if("string"==typeof a)return void console.warn("ag-Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");var e=[];return a.forEach(function(a){var f=d.createNode(a,b,c);e.push(f)}),e},a.prototype.createNode=function(a,b,c){var f=new d.RowNode;this.context.wireBean(f);var g=this.gridOptionsWrapper.isTreeData(),h=!g&&e.Utils.exists(this.getNodeChildDetails),i=h?this.getNodeChildDetails(a):null;if(i&&i.group)f.group=!0,f.childrenAfterGroup=this.recursiveFunction(i.children,f,c+1),f.expanded=i.expanded===!0,f.field=i.field,f.key=i.key,f.canFlower=f.master,this.setLeafChildren(f);else if(f.group=!1,g)f.master=!1,f.expanded=!1;else{this.doesDataFlower?f.master=this.doesDataFlower(a):this.doingMasterDetail?this.isRowMasterFunc?f.master=this.isRowMasterFunc(a):f.master=!0:f.master=!1;var j=this.columnController.getRowGroupColumns(),k=j?j.length:0,l=c+k;f.expanded=!!f.master&&this.isExpanded(l)}return f.canFlower=f.master,b&&!this.suppressParentsInRowNodes&&(f.parent=b),f.level=c,f.setDataAndId(a,this.nextId.toString()),this.allNodesMap[f.id]=f,this.nextId++,f},a.prototype.isExpanded=function(a){var b=this.gridOptionsWrapper.getGroupDefaultExpanded();return b===-1||a<b},a.prototype.setLeafChildren=function(a){a.allLeafChildren=[],a.childrenAfterGroup&&a.childrenAfterGroup.forEach(function(b){b.group?b.allLeafChildren&&b.allLeafChildren.forEach(function(b){return a.allLeafChildren.push(b)}):a.allLeafChildren.push(b)})},a.prototype.insertItemsAtIndex=function(b,c){if(this.isLegacyTreeData())return null;var d=this.rootNode.allLeafChildren;if(b>d.length)return void console.warn("ag-Grid: invalid index "+b+", max index is "+d.length);for(var f=[],g=c.length-1;g>=0;g--){var h=c[g],i=this.createNode(h,null,a.TOP_LEVEL);e.Utils.insertIntoArray(d,i,b),f.push(i)}return f.length>0?f:null},a.prototype.addItems=function(a){var b=this.rootNode.allLeafChildren;return this.insertItemsAtIndex(b.length,a)},a.prototype.isLegacyTreeData=function(){var a=e.Utils.exists(this.gridOptionsWrapper.getNodeChildDetailsFunc());return!!a&&(console.warn("ag-Grid: adding and removing rows is not supported when using nodeChildDetailsFunc, ie it is not supported for legacy tree data. Please see the docs on the new preferred way of providing tree data that works with delta updates."),!0)},a.TOP_LEVEL=0,a.ROOT_NODE_ID="ROOT_NODE_ID",a}();b.ClientSideNodeManager=f},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a){this.active=!0,this.nodeIdsToBoolean={},this.nodeIdsToColumns={},this.keepingColumns=a}return a.prototype.setInactive=function(){this.active=!1},a.prototype.isActive=function(){return this.active},a.prototype.addParentNode=function(a,b){var c=this;this.validateActive();for(var d=a;d;)this.nodeIdsToBoolean[d.id]=!0,this.keepingColumns&&b&&(this.nodeIdsToColumns[d.id]||(this.nodeIdsToColumns[d.id]={}),b.forEach(function(a){return c.nodeIdsToColumns[d.id][a.getId()]=!0})),d=d.parent},a.prototype.isInPath=function(a){return this.validateActive(),this.nodeIdsToBoolean[a.id]},a.prototype.getValueColumnsForNode=function(a,b){if(this.validateActive(),!this.keepingColumns)return b;var c=this.nodeIdsToColumns[a.id],d=b.filter(function(a){return c[a.getId()]});return d},a.prototype.getNotValueColumnsForNode=function(a,b){if(this.validateActive(),!this.keepingColumns)return null;var c=this.nodeIdsToColumns[a.id],d=b.filter(function(a){return!c[a.getId()]});return d},a.prototype.validateActive=function(){if(!this.active)throw"ag-Grid: tried to work on an invalid changed path"},a}();b.ChangedPath=d},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(){}return a.STRING_PROPERTIES=["sortingOrder","rowClass","rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","quickFilterText","rowModelType","editType","domLayout","clipboardDeliminator","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals"],a.OBJECT_PROPERTIES=["components","frameworkComponents","rowStyle","context","autoGroupColumnDef","groupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultExportParams","columnTypes","rowClassRules","detailGridOptions","detailCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent"],a.ARRAY_PROPERTIES=["slaveGrids","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData"],a.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","colWidth","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","minColWidth","maxColWidth","viewportRowModelPageSize","viewportRowModelBufferSize","layoutInterval","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","scrollbarWidth","paginationStartPage","infiniteBlockSize","batchUpdateWaitMillis"],a.BOOLEAN_PROPERTIES=["toolPanelSuppressRowGroups","toolPanelSuppressValues","toolPanelSuppressPivots","toolPanelSuppressPivotMode","toolPanelSuppressSideButtons","toolPanelSuppressColumnFilter","toolPanelSuppressColumnSelectAll","toolPanelSuppressColumnExpandAll","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellSelection","suppressHorizontalScroll","debug","enableColResize","enableCellExpressions","enableSorting","enableServerSideSorting","enableFilter","enableServerSideFilter","angularCompileRows","angularCompileFilters","angularCompileHeaders","groupSuppressAutoColumn","groupSelectsChildren","groupIncludeFooter","groupIncludeTotalFooter","groupUseEntireRow","groupSuppressRow","groupSuppressBlankHeader","forPrint","suppressMenuHide","rowDeselection","unSortIcon","suppressMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","suppressParentsInRowNodes","showToolPanel","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","pivotPanelShow","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","suppressMenuFilterPanel","suppressMenuMainPanel","suppressMenuColumnPanel","enableStatusBar","alwaysShowStatusBar","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressUseColIdForGroups","suppressCopyRowsToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragManaged","suppressRowDrag","enableGroupEdit","embedFullWidthRows","suppressTabbing","suppressPaginationPanel","floatingFilter","groupHideOpenParents","groupMultiAutoColumn","pagination","stopEditingWhenGridLosesFocus","paginationAutoPageSize","suppressScrollOnNewData","purgeClosedRowNodes","cacheQuickFilter","deltaRowDataMode","ensureDomOrder","accentedSort","pivotTotals","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDownAfterEdit","enterMovesDown","suppressPropertyNamesCheck","rowMultiSelectWithClick","contractColumnSelection","suppressEnterpriseResetOnNewColumns","enableOldSetFilterModel","suppressRowHoverHighlight","gridAutoHeight","suppressRowTransform","suppressClipboardPaste"],a.FUNCTION_PROPERTIES=["localeTextFunc","groupRowInnerRenderer","groupRowInnerRendererFramework","dateComponent","dateComponentFramework","groupRowRenderer","groupRowRendererFramework","isExternalFilterPresent","getRowHeight","doesExternalFilterPass","getRowClass","getRowStyle","getRowClassRules","traverseNode","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getNodeChildDetails","groupRowAggNodes","getRowNodeId","isFullWidthCell","fullWidthCellRenderer","fullWidthCellRendererFramework","doesDataFlower","processSecondaryColDef","processSecondaryColGroupDef","getBusinessKeyForNode","sendToClipboard","navigateToNextCell","tabToNextCell","getDetailRowData","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","loadingOverlayComponent","loadingOverlayComponentFramework","noRowsOverlayComponent","noRowsOverlayComponentFramework","detailCellRenderer","detailCellRendererFramework","onGridReady","defaultGroupSortComparator","isRowMaster","isRowSelectable","postSort","processHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard"],a.ALL_PROPERTIES=a.ARRAY_PROPERTIES.concat(a.OBJECT_PROPERTIES).concat(a.STRING_PROPERTIES).concat(a.NUMBER_PROPERTIES).concat(a.FUNCTION_PROPERTIES).concat(a.BOOLEAN_PROPERTIES),a}();b.PropertyKeys=d},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(0),h=c(68),i=c(11),j=c(1),k=c(21),l=c(8),m=c(9),n=function(a){function b(){var b=a.call(this,'<div><input  ref="eColumnFloatingFilter" class="ag-floating-filter-input"></div>')||this;return b.lastKnownModel=null,b}return d(b,a),b.prototype.init=function(a){this.onFloatingFilterChanged=a.onFloatingFilterChanged,this.currentParentModel=a.currentParentModel;var b=null!=a.debounceMs?a.debounceMs:500,c=j._.debounce(this.syncUpWithParentFilter.bind(this),b);this.addDestroyableEventListener(this.eColumnFloatingFilter,"input",c),this.addDestroyableEventListener(this.eColumnFloatingFilter,"keypress",c),this.addDestroyableEventListener(this.eColumnFloatingFilter,"keydown",c);var d=a.column.getDefinition();d.filterParams&&d.filterParams.filterOptions&&1===d.filterParams.filterOptions.length&&"inRange"===d.filterParams.filterOptions[0]&&(this.eColumnFloatingFilter.readOnly=!0)},b.prototype.onParentModelChanged=function(a,b){if(null!=b)return this.eColumnFloatingFilter.value=this.parseAsText(b.condition1)+" "+b.operator+" "+this.parseAsText(b.condition2),this.eColumnFloatingFilter.readOnly=!0,this.lastKnownModel=null,this.eColumnFloatingFilter.title=this.eColumnFloatingFilter.value,void(this.eColumnFloatingFilter.style.cursor="default");if(this.eColumnFloatingFilter.readOnly=!1,this.equalModels(this.lastKnownModel,a))return void(this.lastKnownModel||a||(this.eColumnFloatingFilter.value=""));this.lastKnownModel=a;var c=this.asFloatingFilterText(a);c!==this.eColumnFloatingFilter.value&&(this.eColumnFloatingFilter.value=c,
this.eColumnFloatingFilter.title="")},b.prototype.syncUpWithParentFilter=function(a){var b=this.asParentModel();if(!this.equalModels(this.lastKnownModel,b)){var c=null;c=j._.isKeyPressed(a,m.Constants.KEY_ENTER)?this.onFloatingFilterChanged({model:b,apply:!0}):this.onFloatingFilterChanged({model:b,apply:!1}),c&&(this.lastKnownModel=b)}},b.prototype.equalModels=function(a,b){return!!j._.referenceCompare(a,b)||!(!a||!b)&&(!Array.isArray(a)&&!Array.isArray(b)&&(j._.referenceCompare(a.type,b.type)&&j._.referenceCompare(a.filter,b.filter)&&j._.referenceCompare(a.filterTo,b.filterTo)&&j._.referenceCompare(a.filterType,b.filterType)))},e([i.RefSelector("eColumnFloatingFilter"),f("design:type",HTMLInputElement)],b.prototype,"eColumnFloatingFilter",void 0),b}(l.Component);b.InputTextFloatingFilterComp=n;var o=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.asFloatingFilterText=function(a){return a?a.filter:""},b.prototype.asParentModel=function(){var a=this.currentParentModel();return{type:a.type,filter:this.eColumnFloatingFilter.value,filterType:"text"}},b.prototype.parseAsText=function(a){return this.asFloatingFilterText(a)},b}(n);b.TextFloatingFilterComp=o;var p=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.lastKnownModel=null,b}return d(b,a),b.prototype.init=function(a){this.onFloatingFilterChanged=a.onFloatingFilterChanged,this.currentParentModel=a.currentParentModel;var b=null!=a.debounceMs?a.debounceMs:500,c=j._.debounce(this.onDateChanged.bind(this),b),d={onDateChanged:c,filterParams:a.column.getColDef().filterParams};this.dateComponentPromise=this.componentRecipes.newDateComponent(d);var e=j._.loadTemplate("<div></div>");this.dateComponentPromise.then(function(a){e.appendChild(a.getGui())}),this.setTemplateFromElement(e)},b.prototype.onDateChanged=function(){var a=this.currentParentModel(),b=this.asParentModel();this.equalModels(a,b)||(this.onFloatingFilterChanged({model:b,apply:!0}),this.lastKnownModel=b)},b.prototype.equalModels=function(a,b){return!!j._.referenceCompare(a,b)||!(!a||!b)&&(!Array.isArray(a)&&!Array.isArray(b)&&(j._.referenceCompare(a.type,b.type)&&j._.referenceCompare(a.dateFrom,b.dateFrom)&&j._.referenceCompare(a.dateTo,b.dateTo)&&j._.referenceCompare(a.filterType,b.filterType)))},b.prototype.asParentModel=function(){var a=this.currentParentModel(),b=this.dateComponentPromise.resolveNow(null,function(a){return a.getDate()}),c=j._.serializeDateToYyyyMmDd(h.DateFilter.removeTimezone(b),"-");return{type:a.type,dateFrom:c,dateTo:a?a.dateTo:null,filterType:"date"}},b.prototype.onParentModelChanged=function(a){this.lastKnownModel=a,this.dateComponentPromise.then(function(b){return a&&a.dateFrom?void b.setDate(j._.parseYyyyMmDdToDate(a.dateFrom,"-")):void b.setDate(null)})},e([g.Autowired("componentRecipes"),f("design:type",k.ComponentRecipes)],b.prototype,"componentRecipes",void 0),b}(l.Component);b.DateFloatingFilterComp=p;var q=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.asFloatingFilterText=function(a){var b=this.currentParentModel();return null==a&&null==b?"":null==a&&null!=b&&"inRange"!==b.type?(this.eColumnFloatingFilter.readOnly=!1,""):null!=b&&"inRange"===b.type?(this.eColumnFloatingFilter.readOnly=!0,this.parseAsText(b)):(this.eColumnFloatingFilter.readOnly=!1,this.parseAsText(a))},b.prototype.parseAsText=function(a){if(a.type&&"inRange"===a.type){var b=this.asNumber(a.filter),c=this.asNumber(a.filterTo);return(b?b+"":"")+"-"+(c?c+"":"")}var d=this.asNumber(a.filter);return null!=d?d+"":""},b.prototype.asParentModel=function(){var a=this.currentParentModel(),b=this.asNumber(this.eColumnFloatingFilter.value),c=this.eColumnFloatingFilter.value,d=null;return d=null==b&&""===c?null:null==b?a.filter:b,{type:a.type,filter:d,filterTo:a?a.filterTo:null,filterType:"number"}},b.prototype.asNumber=function(a){if(null==a)return null;if(""===a)return null;var b=Number(a),c=!j._.isNumeric(b);return c?null:b},b}(n);b.NumberFloatingFilterComp=q;var r=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(b){a.prototype.init.call(this,b),this.eColumnFloatingFilter.readOnly=!0},b.prototype.asFloatingFilterText=function(a){if(this.eColumnFloatingFilter.readOnly=!0,!a)return"";var b=a instanceof Array?a:a.values;if(0===b.length)return"";var c=b.length>10?b.slice(0,10).concat("..."):b;return"("+b.length+") "+c.join(",")},b.prototype.parseAsText=function(a){return this.asFloatingFilterText(a)},b.prototype.asParentModel=function(){return null==this.eColumnFloatingFilter.value||""===this.eColumnFloatingFilter.value?{values:[],filterType:"set"}:{values:this.eColumnFloatingFilter.value.split(","),filterType:"set"}},b.prototype.equalModels=function(a,b){return!1},b}(n);b.SetFloatingFilterComp=r;var s=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(b){a.prototype.init.call(this,b),this.eColumnFloatingFilter.readOnly=!0},b.prototype.onParentModelChanged=function(a){this.eColumnFloatingFilter.value=this.asFloatingFilterText(this.currentParentModel())},b.prototype.asFloatingFilterText=function(a){return a},b.prototype.parseAsText=function(a){return a},b.prototype.asParentModel=function(){return null},b}(n);b.ReadModelAsStringFloatingFilterComp=s},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(67),f=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.isPopup=function(){return!0},b}(e.TextCellEditor);b.PopupTextCellEditor=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(75),f=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.isPopup=function(){return!0},b}(e.SelectCellEditor);b.PopupSelectCellEditor=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(8),f=c(9),g=c(1),h=function(a){function b(){return a.call(this,b.TEMPLATE)||this}return d(b,a),b.prototype.init=function(a){this.params=a,this.focusAfterAttached=a.cellStartedEdit,this.textarea=document.createElement("textarea"),this.textarea.maxLength=a.maxLength?a.maxLength:"200",this.textarea.cols=a.cols?a.cols:"60",this.textarea.rows=a.rows?a.rows:"10",g.Utils.exists(a.value)&&(this.textarea.value=a.value.toString()),this.getGui().querySelector(".ag-large-textarea").appendChild(this.textarea),this.addGuiEventListener("keydown",this.onKeyDown.bind(this))},b.prototype.onKeyDown=function(a){var b=a.which||a.keyCode;(b==f.Constants.KEY_LEFT||b==f.Constants.KEY_UP||b==f.Constants.KEY_RIGHT||b==f.Constants.KEY_DOWN||a.shiftKey&&b==f.Constants.KEY_ENTER)&&a.stopPropagation()},b.prototype.afterGuiAttached=function(){this.focusAfterAttached&&this.textarea.focus()},b.prototype.getValue=function(){return this.textarea.value},b.prototype.isPopup=function(){return!0},b.TEMPLATE='<div class="ag-large-text" tabindex="0"><div class="ag-large-textarea"></div></div>',b}(e.Component);b.LargeTextCellEditor=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(1),h=c(51),i=c(11),j=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.getDefaultType=function(){return h.BaseFilter.CONTAINS},b.prototype.customInit=function(){this.comparator=this.filterParams.textCustomComparator?this.filterParams.textCustomComparator:b.DEFAULT_COMPARATOR,this.formatter=this.filterParams.textFormatter?this.filterParams.textFormatter:1==this.filterParams.caseSensitive?b.DEFAULT_FORMATTER:b.DEFAULT_LOWERCASE_FORMATTER,a.prototype.customInit.call(this)},b.prototype.modelFromFloatingFilter=function(a){return{type:this.filter,filter:a,filterType:"text"}},b.prototype.getApplicableFilterTypes=function(){return[h.BaseFilter.EQUALS,h.BaseFilter.NOT_EQUAL,h.BaseFilter.STARTS_WITH,h.BaseFilter.ENDS_WITH,h.BaseFilter.CONTAINS,h.BaseFilter.NOT_CONTAINS]},b.prototype.bodyTemplate=function(a){var b=this.translate.bind(this),c=a==h.FilterConditionType.MAIN?"filterText":"filterConditionText";return'<div class="ag-filter-body">\n            <input class="ag-filter-filter" id='+c+' type="text" placeholder="'+b("filterOoo","Filter...")+'"/>\n        </div>'},b.prototype.initialiseFilterBodyUi=function(b){a.prototype.initialiseFilterBodyUi.call(this,b),this.addFilterChangedListener(b),this.setFilter(this.filterConditionText,h.FilterConditionType.CONDITION),this.setFilterType(this.filterCondition,h.FilterConditionType.CONDITION)},b.prototype.addFilterChangedListener=function(a){var b=this,c=a===h.FilterConditionType.MAIN?this.eFilterTextField:this.eFilterConditionTextField,d=this.getDebounceMs(this.filterParams),e=g.Utils.debounce(function(){return b.onFilterTextFieldChanged(a)},d);this.addDestroyableEventListener(c,"input",e)},b.prototype.refreshFilterBodyUi=function(a){this.eFilterConditionTextField&&this.addFilterChangedListener(h.FilterConditionType.CONDITION)},b.prototype.afterGuiAttached=function(){this.eFilterTextField.focus()},b.prototype.filterValues=function(a){return a===h.FilterConditionType.MAIN?this.filterText:this.filterConditionText},b.prototype.individualFilterPasses=function(a,b){var c=b==h.FilterConditionType.MAIN?this.filterText:this.filterConditionText,d=b==h.FilterConditionType.MAIN?this.filter:this.filterCondition;return c?this.checkIndividualFilter(a,d,c):b===h.FilterConditionType.MAIN||"AND"===this.conditionValue},b.prototype.checkIndividualFilter=function(a,b,c){var d=this.filterParams.valueGetter(a.node);if(!d)return b===h.BaseFilter.NOT_EQUAL||b===h.BaseFilter.NOT_CONTAINS;var e=this.formatter(d);return this.comparator(b,e,c)},b.prototype.onFilterTextFieldChanged=function(a){var b=a===h.FilterConditionType.MAIN?this.eFilterTextField.value:this.eFilterConditionTextField.value,c=a===h.FilterConditionType.MAIN?this.filterText:this.filterConditionText,d=g.Utils.makeNull(b);if(d&&""===d.trim()&&(d=null),c!==d){var e=d&&1!=this.filterParams.caseSensitive?d.toLowerCase():d,f=c&&1!=this.filterParams.caseSensitive?c.toLowerCase():c;a===h.FilterConditionType.MAIN?this.filterText=this.formatter(d):this.filterConditionText=this.formatter(d),f!==e&&this.onFilterChanged()}},b.prototype.setFilter=function(a,b){if(a=g.Utils.makeNull(a),b===h.FilterConditionType.MAIN)if(a){if(this.filterText=this.formatter(a),!this.eFilterTextField)return;this.eFilterTextField.value=a}else{if(this.filterText=null,!this.eFilterTextField)return;this.eFilterTextField.value=null}else if(a){if(this.filterConditionText=this.formatter(a),!this.eFilterConditionTextField)return;this.eFilterConditionTextField.value=a}else{if(this.filterConditionText=null,!this.eFilterConditionTextField)return;this.eFilterConditionTextField.value=null}},b.prototype.getFilter=function(){return this.filterText},b.prototype.resetState=function(){this.setFilter(null,h.FilterConditionType.MAIN),this.setFilterType(this.defaultFilter,h.FilterConditionType.MAIN),this.setFilter(null,h.FilterConditionType.CONDITION),this.setFilterType(this.defaultFilter,h.FilterConditionType.CONDITION)},b.prototype.serialize=function(a){var b=a===h.FilterConditionType.MAIN?this.filter:this.filterCondition,c=a===h.FilterConditionType.MAIN?this.filterText:this.filterConditionText;return{type:b?b:this.defaultFilter,filter:c,filterType:"text"}},b.prototype.parse=function(a,b){this.setFilterType(a.type,b),this.setFilter(a.filter,b)},b.prototype.setType=function(a,b){this.setFilterType(a,b)},b.DEFAULT_FORMATTER=function(a){return a},b.DEFAULT_LOWERCASE_FORMATTER=function(a){return null==a?null:a.toString().toLowerCase()},b.DEFAULT_COMPARATOR=function(a,c,d){switch(a){case b.CONTAINS:return c.indexOf(d)>=0;case b.NOT_CONTAINS:return c.indexOf(d)===-1;case b.EQUALS:return c===d;case b.NOT_EQUAL:return c!=d;case b.STARTS_WITH:return 0===c.indexOf(d);case b.ENDS_WITH:var e=c.lastIndexOf(d);return e>=0&&e===c.length-d.length;default:return console.warn("invalid filter type "+a),!1}},e([i.QuerySelector("#filterText"),f("design:type",HTMLInputElement)],b.prototype,"eFilterTextField",void 0),e([i.QuerySelector("#filterConditionText"),f("design:type",HTMLInputElement)],b.prototype,"eFilterConditionTextField",void 0),b}(h.ComparableBaseFilter);b.TextFilter=j},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(1),h=c(11),i=c(51),j=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.modelFromFloatingFilter=function(a){return{type:this.filter,filter:Number(a),filterTo:this.filterNumberTo,filterType:"number"}},b.prototype.getApplicableFilterTypes=function(){return[i.BaseFilter.EQUALS,i.BaseFilter.NOT_EQUAL,i.BaseFilter.LESS_THAN,i.BaseFilter.LESS_THAN_OR_EQUAL,i.BaseFilter.GREATER_THAN,i.BaseFilter.GREATER_THAN_OR_EQUAL,i.BaseFilter.IN_RANGE]},b.prototype.bodyTemplate=function(a){var b=this.translate.bind(this),c=a==i.FilterConditionType.MAIN?"filterText":"filterConditionText",d=a==i.FilterConditionType.MAIN?"filterNumberToPanel":"filterNumberToPanelCondition",e=a==i.FilterConditionType.MAIN?"filterToText":"filterToConditionText";return'<div class="ag-filter-body">\n            <div>\n                <input class="ag-filter-filter" id="'+c+'" type="text" placeholder="'+b("filterOoo")+'"/>\n            </div>\n             <div class="ag-filter-number-to" id="'+d+'">\n                <input class="ag-filter-filter" id="'+e+'" type="text" placeholder="'+b("filterOoo")+'"/>\n            </div>\n        </div>'},b.prototype.initialiseFilterBodyUi=function(b){a.prototype.initialiseFilterBodyUi.call(this,b),b===i.FilterConditionType.MAIN?(this.eFilterTextField=this.queryForHtmlInputElement("#filterText"),this.addFilterChangedEventListeners(b,this.eFilterTextField,this.eFilterToTextField)):(this.eFilterTextConditionField=this.queryForHtmlInputElement("#filterConditionText"),this.addFilterChangedEventListeners(b,this.eFilterTextConditionField,this.eFilterToConditionText),this.setFilter(this.filterNumberCondition,i.FilterConditionType.CONDITION),this.setFilterTo(this.filterNumberConditionTo,i.FilterConditionType.CONDITION),this.setFilterType(this.filterCondition,i.FilterConditionType.CONDITION))},b.prototype.addFilterChangedEventListeners=function(a,b,c){var d=this,e=this.getDebounceMs(this.filterParams),f=g.Utils.debounce(function(){return d.onTextFieldsChanged(a,b,c)},e);this.addDestroyableEventListener(b,"input",f),this.addDestroyableEventListener(c,"input",f)},b.prototype.afterGuiAttached=function(){this.eFilterTextField.focus()},b.prototype.comparator=function(){return function(a,b){return a===b?0:a<b?1:a>b?-1:void 0}},b.prototype.onTextFieldsChanged=function(a,b,c){var d=this.stringToFloat(b.value),e=this.stringToFloat(c.value);a===i.FilterConditionType.MAIN?this.filterNumber===d&&this.filterNumberTo===e||(this.filterNumber=d,this.filterNumberTo=e,this.onFilterChanged()):this.filterNumberCondition===d&&this.filterNumberConditionTo===e||(this.filterNumberCondition=d,this.filterNumberConditionTo=e,this.onFilterChanged())},b.prototype.filterValues=function(a){return a===i.FilterConditionType.MAIN?this.filter!==i.BaseFilter.IN_RANGE?this.asNumber(this.filterNumber):[this.asNumber(this.filterNumber),this.asNumber(this.filterNumberTo)]:this.filterCondition!==i.BaseFilter.IN_RANGE?this.asNumber(this.filterNumberCondition):[this.asNumber(this.filterNumberCondition),this.asNumber(this.filterNumberConditionTo)]},b.prototype.asNumber=function(a){return g.Utils.isNumeric(a)?a:null},b.prototype.stringToFloat=function(a){var b=g.Utils.makeNull(a);b&&""===b.trim()&&(b=null);var c;return c=null!==b&&void 0!==b?parseFloat(b):null},b.prototype.setFilter=function(a,b){if(a=g.Utils.makeNull(a),null!==a&&"number"!=typeof a&&(a=parseFloat(a)),b===i.FilterConditionType.MAIN){if(this.filterNumber=a,!this.eFilterTextField)return;this.eFilterTextField.value=a}else{if(this.filterNumberCondition=a,!this.eFilterTextConditionField)return;this.eFilterTextConditionField.value=a}},b.prototype.setFilterTo=function(a,b){if(a=g.Utils.makeNull(a),null!==a&&"number"!=typeof a&&(a=parseFloat(a)),b===i.FilterConditionType.MAIN){if(this.filterNumberTo=a,!this.eFilterToTextField)return;this.eFilterToTextField.value=a}else{if(this.filterNumberConditionTo=a,!this.eFilterToConditionText)return;this.eFilterToConditionText.value=a}},b.prototype.getFilter=function(a){return a===i.FilterConditionType.MAIN?this.filterNumber:this.filterNumberCondition},b.prototype.serialize=function(a){var b=a===i.FilterConditionType.MAIN?this.filter:this.filterCondition,c=a===i.FilterConditionType.MAIN?this.filterNumber:this.filterNumberCondition,d=a===i.FilterConditionType.MAIN?this.filterNumberTo:this.filterNumberConditionTo;return{type:b?b:this.defaultFilter,filter:c,filterTo:d,filterType:"number"}},b.prototype.parse=function(a,b){this.setFilterType(a.type,b),this.setFilter(a.filter,b),this.setFilterTo(a.filterTo,b)},b.prototype.refreshFilterBodyUi=function(a){var c=a===i.FilterConditionType.MAIN?this.filter:this.filterCondition,d=a===i.FilterConditionType.MAIN?this.eNumberToPanel:this.eNumberToConditionPanel;if(d){var e=c===b.IN_RANGE;g.Utils.setVisible(d,e)}},b.prototype.resetState=function(){this.setFilterType(this.defaultFilter,i.FilterConditionType.MAIN),this.setFilter(null,i.FilterConditionType.MAIN),this.setFilterTo(null,i.FilterConditionType.MAIN),this.setFilterType(this.defaultFilter,i.FilterConditionType.CONDITION),this.setFilter(null,i.FilterConditionType.CONDITION),this.setFilterTo(null,i.FilterConditionType.CONDITION)},b.prototype.setType=function(a,b){this.setFilterType(a,b)},b.LESS_THAN="lessThan",e([h.QuerySelector("#filterNumberToPanel"),f("design:type",HTMLElement)],b.prototype,"eNumberToPanel",void 0),e([h.QuerySelector("#filterNumberToPanelCondition"),f("design:type",HTMLElement)],b.prototype,"eNumberToConditionPanel",void 0),e([h.QuerySelector("#filterToText"),f("design:type",HTMLInputElement)],b.prototype,"eFilterToTextField",void 0),e([h.QuerySelector("#filterToConditionText"),f("design:type",HTMLInputElement)],b.prototype,"eFilterToConditionText",void 0),b}(i.ScalarBaseFilter);b.NumberFilter=j},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(23),h=c(9),i=c(44),j=c(29),k=c(22),l=c(1),m=c(37),n=c(4),o=c(2),p=function(){function a(){}return a.prototype.init=function(){this.scrollWidth=this.gridOptionsWrapper.getScrollbarWidth()},a.prototype.registerGridComp=function(a){this.gridPanel=a},a.prototype.handlePageScrollingKey=function(a){var b=a.which||a.keyCode,c=a.altKey,d=a.ctrlKey,e=this.mouseEventService.getGridCellForEvent(a).getGridCellDef();if(!e)return!1;var f=!1;switch(b){case h.Constants.KEY_PAGE_HOME:case h.Constants.KEY_PAGE_END:d||c||(this.onHomeOrEndKey(b),f=!0);break;case h.Constants.KEY_LEFT:case h.Constants.KEY_RIGHT:d&&!c&&(this.onCtrlLeftOrRight(b,e),f=!0);break;case h.Constants.KEY_UP:case h.Constants.KEY_DOWN:d&&!c&&(this.onCtrlUpOrDown(b,e),f=!0);break;case h.Constants.KEY_PAGE_DOWN:d||c||(this.onPageDown(e),f=!0);break;case h.Constants.KEY_PAGE_UP:d||c||(this.onPageUp(e),f=!0)}return f&&a.preventDefault(),f},a.prototype.onPageDown=function(a){var b=this.gridPanel.getVScrollPosition(),c=b.bottom-b.top;this.gridPanel.isHorizontalScrollShowing()&&(c-=this.scrollWidth);var d=this.paginationProxy.getPixelOffset(),e=b.top+c,f=this.paginationProxy.getRowIndexAtPixel(e+d),g=f,h=this.paginationProxy.getRow(a.rowIndex).rowTop,i=h+c-d,j=this.paginationProxy.getRowIndexAtPixel(i+d),k=this.paginationProxy.getPageLastRow();j>k&&(j=k),g>k&&(g=k),this.navigateTo(g,"top",null,j,a.column)},a.prototype.onPageUp=function(a){var b=this.gridPanel.getVScrollPosition(),c=b.bottom-b.top;this.gridPanel.isHorizontalScrollShowing()&&(c-=this.scrollWidth);var d=this.paginationProxy.getPixelOffset(),e=b.top,f=this.paginationProxy.getRowIndexAtPixel(e+d),g=f,h=this.paginationProxy.getRow(a.rowIndex),i=h.rowTop+h.rowHeight-c-d,j=this.paginationProxy.getRowIndexAtPixel(i+d),k=this.paginationProxy.getPageFirstRow();j<k&&(j=k),g<k&&(g=k),this.navigateTo(g,"bottom",null,j,a.column)},a.prototype.navigateTo=function(a,b,c,d,e){if(l._.exists(c)&&this.gridPanel.ensureColumnVisible(c),l._.exists(a)&&this.gridPanel.ensureIndexVisible(a,b),this.animationFrameService.flushAllFrames(),this.focusedCellController.setFocusedCell(d,e,null,!0),this.rangeController){var f=new g.GridCell({rowIndex:d,floating:null,column:e});this.rangeController.setRangeToCell(f)}},a.prototype.onCtrlUpOrDown=function(a,b){var c=a===h.Constants.KEY_UP,d=c?0:this.paginationProxy.getPageLastRow();this.navigateTo(d,null,b.column,d,b.column)},a.prototype.onCtrlLeftOrRight=function(a,b){var c=a===h.Constants.KEY_LEFT,d=this.columnController.getAllDisplayedColumns(),e=c?d[0]:d[d.length-1];this.navigateTo(b.rowIndex,null,e,b.rowIndex,e)},a.prototype.onHomeOrEndKey=function(a){var b=a===h.Constants.KEY_PAGE_HOME,c=this.columnController.getAllDisplayedColumns(),d=b?c[0]:c[c.length-1],e=b?0:this.paginationProxy.getPageLastRow();this.navigateTo(e,null,d,e,d)},d([f.Autowired("mouseEventService"),e("design:type",i.MouseEventService)],a.prototype,"mouseEventService",void 0),d([f.Autowired("paginationProxy"),e("design:type",j.PaginationProxy)],a.prototype,"paginationProxy",void 0),d([f.Autowired("focusedCellController"),e("design:type",k.FocusedCellController)],a.prototype,"focusedCellController",void 0),d([f.Autowired("animationFrameService"),e("design:type",m.AnimationFrameService)],a.prototype,"animationFrameService",void 0),d([f.Optional("rangeController"),e("design:type",Object)],a.prototype,"rangeController",void 0),d([f.Autowired("columnController"),e("design:type",n.ColumnController)],a.prototype,"columnController",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",o.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([f.Bean("navigationService")],a)}();b.NavigationService=p},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(1),g=c(2),h=c(0),i=c(15),j=c(4),k=c(3),l=c(5),m=c(99),n=c(101),o=c(10),p=c(36),q=function(){function a(a,b,c){this.headerRowComps=[],this.eContainer=a,this.pinned=c,this.eViewport=b}return a.prototype.registerGridComp=function(a){this.setupDragAndDrop(a)},a.prototype.forEachHeaderElement=function(a){this.headerRowComps.forEach(function(b){return b.forEachHeaderElement(a)})},a.prototype.init=function(){this.scrollWidth=this.gridOptionsWrapper.getScrollbarWidth(),this.eventService.addEventListener(l.Events.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.eventService.addEventListener(l.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.eventService.addEventListener(l.Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.eventService.addEventListener(l.Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.eventService.addEventListener(l.Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.eventService.addEventListener(l.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this))},a.prototype.onColumnRowGroupChanged=function(){this.onGridColumnsChanged()},a.prototype.onColumnValueChanged=function(){this.onGridColumnsChanged()},a.prototype.onColumnResized=function(){this.setWidthOfPinnedContainer()},a.prototype.onDisplayedColumnsChanged=function(){this.setWidthOfPinnedContainer()},a.prototype.onScrollVisibilityChanged=function(){this.setWidthOfPinnedContainer()},a.prototype.setWidthOfPinnedContainer=function(){var a=this.pinned===o.Column.PINNED_LEFT,b=this.pinned===o.Column.PINNED_RIGHT;if(a||b){var c=a?this.columnController.getPinnedLeftContainerWidth():this.columnController.getPinnedRightContainerWidth(),d=a?this.scrollVisibleService.isLeftVerticalScrollShowing():this.scrollVisibleService.isRightVerticalScrollShowing();d&&(c+=this.scrollWidth),this.eContainer.style.width=c+"px"}},a.prototype.destroy=function(){this.removeHeaderRowComps()},a.prototype.onGridColumnsChanged=function(){this.removeHeaderRowComps(),this.createHeaderRowComps()},a.prototype.refresh=function(){this.onGridColumnsChanged()},a.prototype.setupDragAndDrop=function(a){var b=this.eViewport?this.eViewport:this.eContainer,c=new n.BodyDropTarget(this.pinned,b);this.context.wireBean(c),c.registerGridComp(a)},a.prototype.removeHeaderRowComps=function(){this.headerRowComps.forEach(function(a){a.destroy()}),this.headerRowComps.length=0,f.Utils.removeAllChildren(this.eContainer)},a.prototype.createHeaderRowComps=function(){for(var a=this.columnController.getHeaderRowCount(),b=0;b<a;b++){var c=b!==a-1,d=c?m.HeaderRowType.COLUMN_GROUP:m.HeaderRowType.COLUMN,e=new m.HeaderRowComp(b,d,this.pinned,this.dropTarget);this.context.wireBean(e),this.headerRowComps.push(e),this.eContainer.appendChild(e.getGui())}var f=this.gridOptionsWrapper.isFloatingFilter()&&!this.columnController.isPivotMode();if(f){var e=new m.HeaderRowComp(a,m.HeaderRowType.FLOATING_FILTER,this.pinned,this.dropTarget);this.context.wireBean(e),this.headerRowComps.push(e),this.eContainer.appendChild(e.getGui())}},d([h.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([h.Autowired("context"),e("design:type",h.Context)],a.prototype,"context",void 0),d([h.Autowired("$scope"),e("design:type",Object)],a.prototype,"$scope",void 0),d([h.Autowired("dragAndDropService"),e("design:type",i.DragAndDropService)],a.prototype,"dragAndDropService",void 0),d([h.Autowired("columnController"),e("design:type",j.ColumnController)],a.prototype,"columnController",void 0),d([h.Autowired("eventService"),e("design:type",k.EventService)],a.prototype,"eventService",void 0),d([h.Autowired("scrollVisibleService"),e("design:type",p.ScrollVisibleService)],a.prototype,"scrollVisibleService",void 0),d([h.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a}();b.HeaderContainer=q},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g,h=c(8),i=c(0),j=c(2),k=c(4),l=c(10),m=c(3),n=c(5),o=c(1),p=c(100),q=c(133),r=c(18),s=c(21),t=c(6);!function(a){a[a.COLUMN_GROUP=0]="COLUMN_GROUP",a[a.COLUMN=1]="COLUMN",a[a.FLOATING_FILTER=2]="FLOATING_FILTER"}(g=b.HeaderRowType||(b.HeaderRowType={}));var u=function(a){function b(b,c,d,e){var f=a.call(this,'<div class="ag-header-row" role="presentation"/>')||this;return f.headerComps={},f.dept=b,f.type=c,f.pinned=d,f.dropTarget=e,f}return d(b,a),b.prototype.forEachHeaderElement=function(a){var b=this;Object.keys(this.headerComps).forEach(function(c){a(b.headerComps[c])})},b.prototype.destroy=function(){var b=Object.keys(this.headerComps);this.removeAndDestroyChildComponents(b),a.prototype.destroy.call(this)},b.prototype.removeAndDestroyChildComponents=function(a){var b=this;a.forEach(function(a){var c=b.headerComps[a];b.getGui().removeChild(c.getGui()),c.destroy&&c.destroy(),delete b.headerComps[a]})},b.prototype.onRowHeightChanged=function(){var a,b,c=this.columnController.getHeaderRowCount(),d=[],e=0;this.columnController.isPivotMode()?(e=0,a=this.gridOptionsWrapper.getPivotGroupHeaderHeight(),b=this.gridOptionsWrapper.getPivotHeaderHeight()):(this.gridOptionsWrapper.isFloatingFilter()&&c++,e=this.gridOptionsWrapper.isFloatingFilter()?1:0,a=this.gridOptionsWrapper.getGroupHeaderHeight(),b=this.gridOptionsWrapper.getHeaderHeight());
for(var f=1+e,g=c-f,h=0;h<g;h++)d.push(a);d.push(b);for(var h=0;h<e;h++)d.push(this.gridOptionsWrapper.getFloatingFiltersHeight());for(var i=0,h=0;h<this.dept;h++)i+=d[h];this.getGui().style.top=i+"px",this.getGui().style.height=d[this.dept]+"px"},b.prototype.init=function(){this.onRowHeightChanged(),this.onVirtualColumnsChanged(),this.setWidth(),this.addDestroyableEventListener(this.gridOptionsWrapper,j.GridOptionsWrapper.PROP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,j.GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,j.GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,j.GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,j.GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.eventService,n.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addDestroyableEventListener(this.eventService,n.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addDestroyableEventListener(this.eventService,n.Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addDestroyableEventListener(this.eventService,n.Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this))},b.prototype.onColumnResized=function(){this.setWidth()},b.prototype.setWidth=function(){var a=this.columnController.getContainerWidth(this.pinned)+"px";this.getGui().style.width=a},b.prototype.onGridColumnsChanged=function(){this.removeAndDestroyAllChildComponents()},b.prototype.removeAndDestroyAllChildComponents=function(){var a=Object.keys(this.headerComps);this.removeAndDestroyChildComponents(a)},b.prototype.onDisplayedColumnsChanged=function(){this.onVirtualColumnsChanged(),this.setWidth()},b.prototype.onVirtualColumnsChanged=function(){var a,b=this,c=Object.keys(this.headerComps),d=this.columnController.getVirtualHeaderGroupRow(this.pinned,this.type==g.FLOATING_FILTER?this.dept-1:this.dept),e=this.gridOptionsWrapper.isEnsureDomOrder();d.forEach(function(d){if(!d.isEmptyGroup()){var f,g,h=d.getUniqueId(),i=b.getGui(),j=c.indexOf(h)>=0;j?(o.Utils.removeFromArray(c,h),f=b.headerComps[h],g=f.getGui(),e&&o.Utils.ensureDomOrder(i,g,a),a=g):(f=b.createHeaderComp(d),b.headerComps[h]=f,g=f.getGui(),e?o.Utils.insertWithDomOrder(i,g,a):i.appendChild(g),a=g)}}),this.removeAndDestroyChildComponents(c)},b.prototype.createHeaderComp=function(a){var b;switch(this.type){case g.COLUMN:b=new p.HeaderWrapperComp(a,this.dropTarget,this.pinned);break;case g.COLUMN_GROUP:b=new q.HeaderGroupWrapperComp(a,this.dropTarget,this.pinned);break;case g.FLOATING_FILTER:var c=a;b=this.createFloatingFilterWrapper(c)}return this.context.wireBean(b),b},b.prototype.createFloatingFilterWrapper=function(a){var b=this,c=this.createFloatingFilterParams(a),d=this.componentRecipes.newFloatingFilterWrapperComponent(a,c);this.addDestroyableEventListener(a,l.Column.EVENT_FILTER_CHANGED,function(){var c=b.filterManager.getFilterComponent(a);d.onParentModelChanged(c.resolveNow(null,function(a){return a.getModel()}))});var e=this.filterManager.cachedFilter(a);if(e){var f=this.filterManager.getFilterComponent(a);d.onParentModelChanged(f.resolveNow(null,function(a){return a.getModel()}))}return d},b.prototype.createFloatingFilterParams=function(a){var b=this,c={api:this.gridApi,column:a,currentParentModel:function(){var c=b.filterManager.getFilterComponent(a),d=c.resolveNow(null,function(a){return a.getNullableModel?a.getNullableModel():a.getModel()});return null!=d.operator?d.condition1:d},onFloatingFilterChanged:function(c){var d,e=new o.Promise(function(a){d=a}),f=b.filterManager.getFilterComponent(a);return f.then(function(a){if(a.onFloatingFilterChanged){var e=a.onFloatingFilterChanged(c);d(e)}else a.setModel(c),b.filterManager.onFilterChanged(),d(!0)}),e.resolveNow(!0,function(a){return a})},suppressFilterButton:!1};return c},e([i.Autowired("gridOptionsWrapper"),f("design:type",j.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([i.Autowired("gridApi"),f("design:type",t.GridApi)],b.prototype,"gridApi",void 0),e([i.Autowired("columnController"),f("design:type",k.ColumnController)],b.prototype,"columnController",void 0),e([i.Autowired("context"),f("design:type",i.Context)],b.prototype,"context",void 0),e([i.Autowired("eventService"),f("design:type",m.EventService)],b.prototype,"eventService",void 0),e([i.Autowired("filterManager"),f("design:type",r.FilterManager)],b.prototype,"filterManager",void 0),e([i.Autowired("componentRecipes"),f("design:type",s.ComponentRecipes)],b.prototype,"componentRecipes",void 0),e([i.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b}(h.Component);b.HeaderRowComp=u},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(8),h=c(0),i=c(10),j=c(1),k=c(15),l=c(7),m=c(4),n=c(59),o=c(2),p=c(81),q=c(52),r=c(6),s=c(24),t=c(3),u=c(21),v=c(60),w=c(11),x=c(132),y=c(5),z=c(45),A=c(28),B=c(74),C=c(46),D=function(a){function b(c,d,e){var f=a.call(this,b.TEMPLATE)||this;return f.column=c,f.dragSourceDropTarget=d,f.pinned=e,f}return d(b,a),b.prototype.getColumn=function(){return this.column},b.prototype.init=function(){this.instantiate(this.context);var a=this.columnController.getDisplayNameForColumn(this.column,"header",!0),b=this.gridOptionsWrapper.isEnableSorting()&&!this.column.getColDef().suppressSorting,c=this.menuFactory.isMenuEnabled(this.column)&&!this.column.getColDef().suppressMenu;this.appendHeaderComp(a,b,c),this.setupWidth(),this.setupMovingCss(),this.setupTooltip(),this.setupResize(),this.setupMenuClass(),this.setupSortableClass(b),this.addColumnHoverListener(),this.addFeature(this.context,new B.HoverFeature([this.column],this.getGui())),this.addDestroyableEventListener(this.column,i.Column.EVENT_FILTER_ACTIVE_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged(),this.addFeature(this.context,new x.SelectAllFeature(this.cbSelectAll,this.column));var d=new q.SetLeftFeature(this.column,this.getGui(),this.beans);d.init(),this.addDestroyFunc(d.destroy.bind(d)),this.addAttributes(),p.CssClassApplier.addHeaderClassesFromColDef(this.column.getColDef(),this.getGui(),this.gridOptionsWrapper,this.column,null)},b.prototype.addColumnHoverListener=function(){this.addDestroyableEventListener(this.eventService,y.Events.EVENT_COLUMN_HOVER_CHANGED,this.onColumnHover.bind(this)),this.onColumnHover()},b.prototype.onColumnHover=function(){var a=this.columnHoverService.isHovered(this.column);j.Utils.addOrRemoveCssClass(this.getGui(),"ag-column-hover",a)},b.prototype.setupSortableClass=function(a){if(a){var b=this.getGui();j.Utils.addCssClass(b,"ag-header-cell-sortable")}},b.prototype.onFilterChanged=function(){var a=this.column.isFilterActive();j.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-filtered",a)},b.prototype.appendHeaderComp=function(a,b,c){var d=this,e={column:this.column,displayName:a,enableSorting:b,enableMenu:c,showColumnMenu:function(a){d.gridApi.showColumnMenuAfterButtonClick(d.column,a)},progressSort:function(a){d.sortController.progressSort(d.column,!!a,"uiColumnSorted")},setSort:function(a,b){d.sortController.setSortForColumn(d.column,a,!!b,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()},f=this.afterHeaderCompCreated.bind(this,a);this.componentRecipes.newHeaderComponent(e).then(f)},b.prototype.afterHeaderCompCreated=function(a,b){this.appendChild(b),this.setupMove(b.getGui(),a),b.destroy&&this.addDestroyFunc(b.destroy.bind(b))},b.prototype.onColumnMovingChanged=function(){this.column.isMoving()?j.Utils.addCssClass(this.getGui(),"ag-header-cell-moving"):j.Utils.removeCssClass(this.getGui(),"ag-header-cell-moving")},b.prototype.setupMove=function(a,b){var c=this,d=this.gridOptionsWrapper.isSuppressMovableColumns()||this.column.getColDef().suppressMovable||this.column.isLockPosition();if(!d&&a){var e={type:k.DragSourceType.HeaderCell,eElement:a,dragItemCallback:function(){return c.createDragItem()},dragItemName:b,dragSourceDropTarget:this.dragSourceDropTarget,dragStarted:function(){return c.column.setMoving(!0,"uiColumnMoved")},dragStopped:function(){return c.column.setMoving(!1,"uiColumnMoved")}};this.dragAndDropService.addDragSource(e,!0),this.addDestroyFunc(function(){return c.dragAndDropService.removeDragSource(e)})}},b.prototype.createDragItem=function(){var a={};return a[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:a}},b.prototype.setupResize=function(){var a=this,b=this.column.getColDef();if(this.eResize){if(!this.column.isResizable())return void j.Utils.removeFromParent(this.eResize);var c=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(c);var d=!this.gridOptionsWrapper.isSuppressAutoSize()&&!b.suppressAutoSize;if(d){this.addDestroyableEventListener(this.eResize,"dblclick",function(){a.columnController.autoSizeColumn(a.column,"uiColumnResized")});var e=new C.TouchListener(this.eResize);this.addDestroyableEventListener(e,C.TouchListener.EVENT_DOUBLE_TAP,function(){a.columnController.autoSizeColumn(a.column,"uiColumnResized")}),this.addDestroyFunc(e.destroy.bind(e))}}},b.prototype.onResizing=function(a,b){var c=this.normaliseResizeAmount(b),d=this.resizeStartWidth+c;this.columnController.setColumnWidth(this.column,d,this.resizeWithShiftKey,a,"uiColumnDragged")},b.prototype.onResizeStart=function(a){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=a},b.prototype.setupTooltip=function(){var a=this.column.getColDef();a.headerTooltip&&(this.getGui().title=a.headerTooltip)},b.prototype.setupMovingCss=function(){this.addDestroyableEventListener(this.column,i.Column.EVENT_MOVING_CHANGED,this.onColumnMovingChanged.bind(this)),this.onColumnMovingChanged()},b.prototype.addAttributes=function(){this.getGui().setAttribute("col-id",this.column.getColId())},b.prototype.setupWidth=function(){this.addDestroyableEventListener(this.column,i.Column.EVENT_WIDTH_CHANGED,this.onColumnWidthChanged.bind(this)),this.onColumnWidthChanged()},b.prototype.setupMenuClass=function(){this.addDestroyableEventListener(this.column,i.Column.EVENT_MENU_VISIBLE_CHANGED,this.onMenuVisible.bind(this)),this.onColumnWidthChanged()},b.prototype.onMenuVisible=function(){this.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())},b.prototype.onColumnWidthChanged=function(){this.getGui().style.width=this.column.getActualWidth()+"px"},b.prototype.normaliseResizeAmount=function(a){var b=a;return this.gridOptionsWrapper.isEnableRtl()?this.pinned!==i.Column.PINNED_LEFT&&(b*=-1):this.pinned===i.Column.PINNED_RIGHT&&(b*=-1),b},b.TEMPLATE='<div class="ag-header-cell" role="presentation" ><div ref="eResize" class="ag-header-cell-resize" role="presentation"></div><ag-checkbox ref="cbSelectAll" class="ag-header-select-all" role="presentation"></ag-checkbox></div>',e([h.Autowired("gridOptionsWrapper"),f("design:type",o.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([h.Autowired("dragAndDropService"),f("design:type",k.DragAndDropService)],b.prototype,"dragAndDropService",void 0),e([h.Autowired("columnController"),f("design:type",m.ColumnController)],b.prototype,"columnController",void 0),e([h.Autowired("horizontalResizeService"),f("design:type",n.HorizontalResizeService)],b.prototype,"horizontalResizeService",void 0),e([h.Autowired("context"),f("design:type",h.Context)],b.prototype,"context",void 0),e([h.Autowired("menuFactory"),f("design:type",Object)],b.prototype,"menuFactory",void 0),e([h.Autowired("gridApi"),f("design:type",r.GridApi)],b.prototype,"gridApi",void 0),e([h.Autowired("columnApi"),f("design:type",l.ColumnApi)],b.prototype,"columnApi",void 0),e([h.Autowired("sortController"),f("design:type",s.SortController)],b.prototype,"sortController",void 0),e([h.Autowired("eventService"),f("design:type",t.EventService)],b.prototype,"eventService",void 0),e([h.Autowired("componentRecipes"),f("design:type",u.ComponentRecipes)],b.prototype,"componentRecipes",void 0),e([h.Autowired("columnHoverService"),f("design:type",z.ColumnHoverService)],b.prototype,"columnHoverService",void 0),e([h.Autowired("beans"),f("design:type",A.Beans)],b.prototype,"beans",void 0),e([w.RefSelector("eResize"),f("design:type",HTMLElement)],b.prototype,"eResize",void 0),e([w.RefSelector("cbSelectAll"),f("design:type",v.AgCheckbox)],b.prototype,"cbSelectAll",void 0),e([h.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b}(g.Component);b.HeaderWrapperComp=D},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f,g=c(15),h=c(0),i=c(102),j=c(10),k=c(103),l=c(4);!function(a){a[a.ColumnMove=0]="ColumnMove",a[a.Pivot=1]="Pivot"}(f||(f={}));var m=function(){function a(a,b){this.dropListeners={},this.pinned=a,this.eContainer=b}return a.prototype.registerGridComp=function(a){switch(this.gridPanel=a,this.moveColumnController.registerGridComp(a),this.pinned){case j.Column.PINNED_LEFT:this.eSecondaryContainers=this.gridPanel.getDropTargetLeftContainers();break;case j.Column.PINNED_RIGHT:this.eSecondaryContainers=this.gridPanel.getDropTargetRightContainers();break;default:this.eSecondaryContainers=this.gridPanel.getDropTargetBodyContainers()}},a.prototype.isInterestedIn=function(a){return a===g.DragSourceType.HeaderCell||a===g.DragSourceType.ToolPanel},a.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},a.prototype.getContainer=function(){return this.eContainer},a.prototype.init=function(){this.moveColumnController=new i.MoveColumnController(this.pinned,this.eContainer),this.context.wireBean(this.moveColumnController);var a=new k.BodyDropPivotTarget(this.pinned);this.context.wireBean(a),this.dropListeners[f.ColumnMove]=this.moveColumnController,this.dropListeners[f.Pivot]=a,this.dragAndDropService.addDropTarget(this)},a.prototype.getIconName=function(){return this.currentDropListener.getIconName()},a.prototype.getDropType=function(a){return this.columnController.isPivotMode()&&a.dragSource.type===g.DragSourceType.ToolPanel?f.Pivot:f.ColumnMove},a.prototype.onDragEnter=function(a){var b=this.getDropType(a);this.currentDropListener=this.dropListeners[b],this.currentDropListener.onDragEnter(a)},a.prototype.onDragLeave=function(a){this.currentDropListener.onDragLeave(a)},a.prototype.onDragging=function(a){this.currentDropListener.onDragging(a)},a.prototype.onDragStop=function(a){this.currentDropListener.onDragStop(a)},d([h.Autowired("context"),e("design:type",h.Context)],a.prototype,"context",void 0),d([h.Autowired("dragAndDropService"),e("design:type",g.DragAndDropService)],a.prototype,"dragAndDropService",void 0),d([h.Autowired("columnController"),e("design:type",l.ColumnController)],a.prototype,"columnController",void 0),d([h.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a}();b.BodyDropTarget=m},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(12),h=c(4),i=c(10),j=c(1),k=c(15),l=c(2),m=function(){function a(a,b){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.pinned=a,this.eContainer=b,this.centerContainer=!j.Utils.exists(a)}return a.prototype.registerGridComp=function(a){this.gridPanel=a},a.prototype.init=function(){this.logger=this.loggerFactory.create("MoveColumnController")},a.prototype.getIconName=function(){return this.pinned?k.DragAndDropService.ICON_PINNED:k.DragAndDropService.ICON_MOVE},a.prototype.onDragEnter=function(a){var b=a.dragItem.columns,c=a.dragSource.type===k.DragSourceType.ToolPanel;if(c)this.setColumnsVisible(b,!0,"uiColumnDragged");else{var d=a.dragItem.visibleState,e=b.filter(function(a){return d[a.getId()]});this.setColumnsVisible(e,!0,"uiColumnDragged")}this.setColumnsPinned(b,this.pinned,"uiColumnDragged"),this.onDragging(a,!0)},a.prototype.onDragLeave=function(a){var b=!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()&&!a.fromNudge;if(b){var c=a.dragSource.dragItemCallback(),d=c.columns;this.setColumnsVisible(d,!1,"uiColumnDragged")}this.ensureIntervalCleared()},a.prototype.setColumnsVisible=function(a,b,c){if(void 0===c&&(c="api"),a){var d=a.filter(function(a){return!a.isLockVisible()});this.columnController.setColumnsVisible(d,b,c)}},a.prototype.setColumnsPinned=function(a,b,c){if(void 0===c&&(c="api"),a){var d=a.filter(function(a){return!a.isLockPinned()});this.columnController.setColumnsPinned(d,b,c)}},a.prototype.onDragStop=function(){this.ensureIntervalCleared()},a.prototype.normaliseX=function(a){var b=this.gridOptionsWrapper.isEnableRtl();if(b){var c=this.eContainer.clientWidth;a=c-a}var d=this.centerContainer;return d&&(a+=this.gridPanel.getBodyViewportScrollLeft()),a},a.prototype.checkCenterForScrolling=function(a){if(this.centerContainer){var b=this.gridPanel.getBodyViewportScrollLeft(),c=b+this.gridPanel.getCenterWidth();this.gridOptionsWrapper.isEnableRtl()?(this.needToMoveRight=a<b+50,this.needToMoveLeft=a>c-50):(this.needToMoveLeft=a<b+50,this.needToMoveRight=a>c-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},a.prototype.onDragging=function(a,b){var c=this;if(void 0===b&&(b=!1),this.lastDraggingEvent=a,!j.Utils.missing(a.hDirection)){var d=this.normaliseX(a.x);b||this.checkCenterForScrolling(d);var e=this.normaliseDirection(a.hDirection),f=a.dragSource.type,g=a.dragSource.dragItemCallback().columns;g=g.filter(function(a){return!a.isLockPinned()||a.getPinned()==c.pinned}),this.attemptMoveColumns(f,g,e,d,b)}},a.prototype.normaliseDirection=function(a){if(!this.gridOptionsWrapper.isEnableRtl())return a;switch(a){case k.HDirection.Left:return k.HDirection.Right;case k.HDirection.Right:return k.HDirection.Left;default:console.error("ag-Grid: Unknown direction "+a)}},a.prototype.calculateOldIndex=function(a){var b=this.columnController.getAllGridColumns(),c=[];a.forEach(function(a){return c.push(b.indexOf(a))}),j.Utils.sortNumberArray(c);var d=c[0],e=c[c.length-1],f=e-d,g=f!==c.length-1;return g?null:d},a.prototype.attemptMoveColumns=function(a,b,c,d,e){for(var f=c===k.HDirection.Left,g=c===k.HDirection.Right,h=this.calculateValidMoves(b,g,d),i=this.calculateOldIndex(b),j=0;j<h.length;j++){var l=h[j],m=null!==i&&!e;if(a==k.DragSourceType.HeaderCell&&(m=null!==i),m){if(f&&l>=i)continue;if(g&&l<=i)continue}if(this.columnController.doesMovePassRules(b,l))return void this.columnController.moveColumns(b,l,"uiColumnDragged")}},a.prototype.calculateValidMoves=function(a,b,c){var d=this.columnController.getDisplayedColumns(this.pinned),e=this.columnController.getAllGridColumns(),f=function(b){return a.indexOf(b)>=0},g=function(b){return a.indexOf(b)<0},h=d.filter(f),i=d.filter(g),k=e.filter(g),l=0,m=c;if(b){var n=0;h.forEach(function(a){return n+=a.getActualWidth()}),m-=n}for(var o=0;o<i.length;o++){var p=i[o];if(m-=p.getActualWidth(),m<0)break;l++}b&&l++;var q;if(l>0){var r=i[l-1];q=k.indexOf(r)+1}else q=0;for(var s=[q],t=e[q];j.Utils.exists(t)&&this.isColumnHidden(d,t);)q++,s.push(q),t=e[q];return s},a.prototype.isColumnHidden=function(a,b){return a.indexOf(b)<0},a.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(k.DragAndDropService.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(k.DragAndDropService.ICON_RIGHT,!0))},a.prototype.ensureIntervalCleared=function(){this.moveInterval&&(clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(k.DragAndDropService.ICON_MOVE))},a.prototype.moveInterval=function(){var a;this.intervalCount++,a=10+5*this.intervalCount,a>100&&(a=100);var b;if(this.needToMoveLeft?b=this.gridPanel.scrollHorizontally(-a):this.needToMoveRight&&(b=this.gridPanel.scrollHorizontally(a)),0!==b)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var c=this.lastDraggingEvent.dragItem.columns,d=c.filter(function(a){return!a.isLockPinned()});if(d.length>0&&(this.dragAndDropService.setGhostIcon(k.DragAndDropService.ICON_PINNED),this.failedMoveAttempts>7)){var e=this.needToMoveLeft?i.Column.PINNED_LEFT:i.Column.PINNED_RIGHT;this.setColumnsPinned(d,e,"uiColumnDragged"),this.dragAndDropService.nudge()}}},d([f.Autowired("loggerFactory"),e("design:type",g.LoggerFactory)],a.prototype,"loggerFactory",void 0),d([f.Autowired("columnController"),e("design:type",h.ColumnController)],a.prototype,"columnController",void 0),d([f.Autowired("dragAndDropService"),e("design:type",k.DragAndDropService)],a.prototype,"dragAndDropService",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",l.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a}();b.MoveColumnController=m},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(15),g=c(4),h=c(0),i=c(2),j=function(){function a(a){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=a}return a.prototype.onDragEnter=function(a){var b=this;if(this.clearColumnsList(),!this.gridOptionsWrapper.isFunctionsReadOnly()){var c=a.dragItem.columns;c.forEach(function(a){a.isPrimary()&&(a.isAnyFunctionActive()||(a.isAllowValue()?b.columnsToAggregate.push(a):a.isAllowRowGroup()?b.columnsToGroup.push(a):a.isAllowRowGroup()&&b.columnsToPivot.push(a)))})}},a.prototype.getIconName=function(){var a=this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length;return a>0?this.pinned?f.DragAndDropService.ICON_PINNED:f.DragAndDropService.ICON_MOVE:null},a.prototype.onDragLeave=function(a){this.clearColumnsList()},a.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},a.prototype.onDragging=function(a){},a.prototype.onDragStop=function(a){this.columnsToAggregate.length>0&&this.columnController.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnController.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnController.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},d([h.Autowired("columnController"),e("design:type",g.ColumnController)],a.prototype,"columnController",void 0),d([h.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a}();b.BodyDropPivotTarget=j},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(10),h=c(2),i=c(1),j=c(4),k=c(38),l=function(){function a(){}return b=a,a.prototype.createAutoGroupColumns=function(a){var b=this,c=[],d=this.gridOptionsWrapper.isTreeData(),e=this.gridOptionsWrapper.isGroupMultiAutoColumn();return d&&e&&(console.log("ag-Grid: you cannot mix groupMultiAutoColumn with treeData, only one column can be used to display groups when doing tree data"),e=!1),e?a.forEach(function(a,d){c.push(b.createOneAutoGroupColumn(a,d))}):c.push(this.createOneAutoGroupColumn(null)),c},a.prototype.createOneAutoGroupColumn=function(a,c){var d,e=this.generateDefaultColDef(a);d=a?b.GROUP_AUTO_COLUMN_ID+"-"+a.getId():b.GROUP_AUTO_COLUMN_BUNDLE_ID;var f=this.gridOptionsWrapper.getAutoGroupColumnDef();if(i._.mergeDeep(e,f),e=this.balancedColumnTreeBuilder.mergeColDefs(e),e.colId=d,!this.gridOptionsWrapper.isTreeData()){var h=i._.missing(e.field)&&i._.missing(e.valueGetter)&&i._.missing(e.filterValueGetter);h&&(e.suppressFilter=!0)}c>0&&(e.headerCheckboxSelection=!1);var j=new g.Column(e,d,(!0));return this.context.wireBean(j),j},a.prototype.generateDefaultColDef=function(a){var b=this.gridOptionsWrapper.getLocaleTextFunc(),c={headerName:b("group","Group"),cellRenderer:"agGroupCellRenderer"};if(a){var d=a.getColDef();i._.assign(c,{headerName:this.columnController.getDisplayNameForColumn(a,"header"),headerValueGetter:d.headerValueGetter}),d.cellRenderer&&i._.assign(c,{cellRendererParams:{innerRenderer:d.cellRenderer,innerRendererParams:d.cellRendererParams}}),c.showRowGroup=a.getColId()}else c.showRowGroup=!0;return c},a.GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",a.GROUP_AUTO_COLUMN_BUNDLE_ID=b.GROUP_AUTO_COLUMN_ID,d([f.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("context"),e("design:type",f.Context)],a.prototype,"context",void 0),d([f.Autowired("columnController"),e("design:type",j.ColumnController)],a.prototype,"columnController",void 0),d([f.Autowired("balancedColumnTreeBuilder"),e("design:type",k.BalancedColumnTreeBuilder)],a.prototype,"balancedColumnTreeBuilder",void 0),a=b=d([f.Bean("autoGroupColService")],a);var b}();b.AutoGroupColService=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(9),h=c(1),i=c(2),j=function(){function a(){}return a.prototype.postConstruct=function(){this.rowModel.getType()===g.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel)},a.prototype.createTransactionForRowData=function(a){if(h._.missing(this.clientSideRowModel))return void console.error("ag-Grid: ImmutableService only works with ClientSideRowModel");var b=this.gridOptionsWrapper.getRowNodeIdFunc();if(h._.missing(b))return void console.error("ag-Grid: ImmutableService requires getRowNodeId() callback to be implemented, your row data need IDs!");var c={remove:[],update:[],add:[]},d=this.clientSideRowModel.getCopyOfNodesMap(),e={};return h._.exists(a)&&a.forEach(function(a,f){var g=b(a),h=d[g];if(e[g]=f,h){var i=h.data!==a;i&&c.update.push(a),d[g]=void 0}else c.add.push(a)}),h._.iterateObject(d,function(a,b){b&&c.remove.push(b.data)}),[c,e]},d([f.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"postConstruct",null),a=d([f.Bean("immutableService")],a)}();b.ImmutableService=j},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(){}return a.STRING_PROPERTIES=["headerName","columnGroupShow","headerClass","toolPanelClass","headerValueGetter","pivotKeys","groupId","colId","sort","field","type","tooltipField","headerTooltip","cellClass","showRowGroup","template","templateUrl","filter","aggFunc","cellRenderer","cellEditor","pinned"],a.OBJECT_PROPERTIES=["headerGroupComponent","headerGroupComponentFramework","headerGroupComponentParams","cellStyle","cellRendererParams","cellEditorFramework","cellEditorParams","pinnedRowCellRendererFramework","pinnedRowCellRendererParams","filterFramework","filterParams","pivotValueColumn","headerComponent","headerComponentFramework","headerComponentParams","floatingFilterComponent","floatingFilterComponentParams","floatingFilterComponentFramework","refData"],a.ARRAY_PROPERTIES=["children","sortingOrder","allowedAggFuncs","menuTabs","pivotTotalColumnIds","cellClassRules","icons"],a.NUMBER_PROPERTIES=["sortedAt","width","minWidth","maxWidth","rowGroupIndex","pivotIndex"],a.BOOLEAN_PROPERTIES=["suppressCellFlash","suppressToolPanel","openByDefault","marryChildren","hide","rowGroup","pivot","checkboxSelection","headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","suppressMenu","suppressSorting","suppressMovable","suppressFilter","lockPosition","lockVisible","lockPinned","unSortIcon","suppressSizeToFit","suppressResize","suppressAutoSize","enableRowGroup","enablePivot","enableValue","editable","suppressPaste","suppressNavigable","enableCellChangeFlash","rowDrag","autoHeight"],a.FUNCTION_PROPERTIES=["valueGetter","valueSetter","filterValueGetter","keyCreator","cellRenderer","cellRendererFramework","pinnedRowCellRenderer","valueFormatter","pinnedRowValueFormatter","valueParser","comparator","equals","pivotComparator","suppressKeyboardEvent","colSpan","rowSpan","getQuickFilterText","newValueHandler","onCellValueChanged","onCellClicked","onCellDoubleClicked","onCellContextMenu","tooltip","cellRendererSelector","cellEditorSelector"],
a.ALL_PROPERTIES=a.ARRAY_PROPERTIES.concat(a.OBJECT_PROPERTIES).concat(a.STRING_PROPERTIES).concat(a.NUMBER_PROPERTIES).concat(a.FUNCTION_PROPERTIES).concat(a.BOOLEAN_PROPERTIES),a}();b.ColDefUtil=d},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(1),e=function(){function a(){this.existingKeys=[]}return a.prototype.getUniqueKey=function(a,b){a=d.Utils.toStringOrNull(a);for(var c=0;;){var e=void 0;if(a?(e=a,0!==c&&(e+="_"+c)):b?(e=b,0!==c&&(e+="_"+c)):e=""+c,this.existingKeys.indexOf(e)<0)return this.existingKeys.push(e),e;c++}},a}();b.ColumnKeyCreator=e},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(18),h=c(1),i=c(35),j=c(2),k=c(3),l=function(){function a(){}return a.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},a.prototype.showMenuAfterMouseEvent=function(a,b){var c=this;this.showPopup(a,function(d){c.popupService.positionPopupUnderMouseEvent({column:a,type:"columnMenu",mouseEvent:b,ePopup:d})})},a.prototype.showMenuAfterButtonClick=function(a,b){var c=this;this.showPopup(a,function(d){c.popupService.positionPopupUnderComponent({type:"columnMenu",eventSource:b,ePopup:d,keepWithinBounds:!0,column:a})})},a.prototype.showPopup=function(a,b){var c=this,d=this.filterManager.getOrCreateFilterWrapper(a),e=document.createElement("div");h.Utils.addCssClass(e,"ag-menu"),d.guiPromise.promise.then(function(a){e.appendChild(a)});var f,g=function(a){"horizontal"===a.direction&&f()};this.eventService.addEventListener("bodyScroll",g);var i=function(){c.eventService.removeEventListener("bodyScroll",g),a.setMenuVisible(!1,"contextMenu")};f=this.popupService.addAsModalPopup(e,!0,i),b(e),d.filterPromise.then(function(a){if(a.afterGuiAttached){var b={hidePopup:f};a.afterGuiAttached(b)}}),this.hidePopup=f,a.setMenuVisible(!0,"contextMenu")},a.prototype.isMenuEnabled=function(a){return this.gridOptionsWrapper.isEnableFilter()&&a.isFilterAllowed()},d([f.Autowired("eventService"),e("design:type",k.EventService)],a.prototype,"eventService",void 0),d([f.Autowired("filterManager"),e("design:type",g.FilterManager)],a.prototype,"filterManager",void 0),d([f.Autowired("popupService"),e("design:type",i.PopupService)],a.prototype,"popupService",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",j.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([f.Bean("menuFactory")],a)}();b.StandardMenuFactory=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(2),h=c(110),i=c(86),j=function(){function a(){}return a.prototype.execute=function(a){var b=a.rowNode;this.gridOptionsWrapper.isEnableServerSideFilter()?this.filterService.filter(b,!1):this.filterService.filterAccordingToColumnState(b),this.selectableService.updateSelectableAfterFiltering(b)},d([f.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("selectableService"),e("design:type",i.SelectableService)],a.prototype,"selectableService",void 0),d([f.Autowired("filterService"),e("design:type",h.FilterService)],a.prototype,"filterService",void 0),a=d([f.Bean("filterStage")],a)}();b.FilterStage=j},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(18),h=c(2),i=function(){function a(){}return a.prototype.postConstruct=function(){this.doingTreeData=this.gridOptionsWrapper.isTreeData()},a.prototype.filterAccordingToColumnState=function(a){var b=this.filterManager.isAnyFilterPresent();this.filter(a,b)},a.prototype.filter=function(a,b){var c=this;a.hasChildren()?(a.childrenAfterGroup.forEach(function(a){return c.filter(a,b)}),b?a.childrenAfterFilter=a.childrenAfterGroup.filter(function(a){var b=a.childrenAfterFilter&&a.childrenAfterFilter.length>0,d=a.data&&c.filterManager.doesRowPassFilter(a);return b||d}):a.childrenAfterFilter=a.childrenAfterGroup,this.setAllChildrenCount(a)):(a.childrenAfterFilter=a.childrenAfterGroup,a.setAllChildrenCount(null))},a.prototype.setAllChildrenCountTreeData=function(a){var b=0;a.childrenAfterFilter.forEach(function(a){b++,b+=a.allChildrenCount}),a.setAllChildrenCount(b)},a.prototype.setAllChildrenCountGridGrouping=function(a){var b=0;a.childrenAfterFilter.forEach(function(a){a.group?b+=a.allChildrenCount:b++}),a.setAllChildrenCount(b)},a.prototype.setAllChildrenCount=function(a){this.doingTreeData?this.setAllChildrenCountTreeData(a):this.setAllChildrenCountGridGrouping(a)},d([f.Autowired("filterManager"),e("design:type",g.FilterManager)],a.prototype,"filterManager",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"postConstruct",null),a=d([f.Bean("filterService")],a)}();b.FilterService=i},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(2),h=c(112),i=function(){function a(){}return a.prototype.execute=function(a){this.gridOptionsWrapper.isEnableServerSideSorting()?this.sortService.sort(a.rowNode,null):this.sortService.sortAccordingToColumnsState(a.rowNode)},d([f.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("sortService"),e("design:type",h.SortService)],a.prototype,"sortService",void 0),a=d([f.Bean("sortStage")],a)}();b.SortStage=i},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(24),h=c(1),i=c(16),j=c(2),k=c(4),l=function(){function a(){}return a.prototype.init=function(){this.postSortFunc=this.gridOptionsWrapper.getPostSortFunc()},a.prototype.sortAccordingToColumnsState=function(a){var b=this.sortController.getSortForRowController();this.sort(a,b)},a.prototype.sort=function(a,b){var c=this;a.childrenAfterSort=a.childrenAfterFilter.slice(0),this.pullDownDataForHideOpenParents(a,!0);var d=h._.exists(b)&&b.length>0;if(d){var e=a.childrenAfterSort.map(function(a,b){return{currentPos:b,rowNode:a}});e.sort(this.compareRowNodes.bind(this,b)),a.childrenAfterSort=e.map(function(a){return a.rowNode})}this.updateChildIndexes(a),this.pullDownDataForHideOpenParents(a,!1),a.childrenAfterFilter.forEach(function(a){a.hasChildren()&&c.sort(a,b)}),this.postSortFunc&&this.postSortFunc(a.childrenAfterSort)},a.prototype.compareRowNodes=function(a,b,c){for(var d=b.rowNode,e=c.rowNode,f=0,g=a.length;f<g;f++){var i=a[f],j=i.inverter===-1,k=this.getValue(d,i.column),l=this.getValue(e,i.column),m=void 0;if(m=i.column.getColDef().comparator?i.column.getColDef().comparator(k,l,d,e,j):h._.defaultComparator(k,l,this.gridOptionsWrapper.isAccentedSort()),0!==m)return m*i.inverter}return b.currentPos-c.currentPos},a.prototype.getValue=function(a,b){return this.valueService.getValue(b,a)},a.prototype.updateChildIndexes=function(a){h._.missing(a.childrenAfterSort)||a.childrenAfterSort.forEach(function(b,c){var d=0===c,e=c===a.childrenAfterSort.length-1;b.setFirstChild(d),b.setLastChild(e),b.setChildIndex(c)})},a.prototype.pullDownDataForHideOpenParents=function(a,b){var c=this;h._.missing(a.childrenAfterSort)||this.gridOptionsWrapper.isGroupHideOpenParents()&&a.childrenAfterSort.forEach(function(a){var d=c.columnController.getGroupDisplayColumns();d.forEach(function(d){var e=d.getColDef().showRowGroup;if("string"!=typeof e)return void console.error("ag-Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");var f=e,g=c.columnController.getPrimaryColumn(f),h=g===a.rowGroupColumn;if(!h)if(b)a.setGroupValue(d.getId(),null);else{var i=a.getFirstChildOfFirstChild(g);i&&a.setGroupValue(d.getId(),i.key)}})})},d([f.Autowired("sortController"),e("design:type",g.SortController)],a.prototype,"sortController",void 0),d([f.Autowired("columnController"),e("design:type",k.ColumnController)],a.prototype,"columnController",void 0),d([f.Autowired("valueService"),e("design:type",i.ValueService)],a.prototype,"valueService",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",j.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([f.Bean("sortService")],a)}();b.SortService=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(0),g=c(14),h=c(1),i=c(2),j=c(17),k=c(3),l=c(4),m=function(){function a(){}return a.prototype.execute=function(a){var b=a.rowNode,c=[],d={value:0},e=this.columnController.isPivotMode(),f=e&&b.leafGroup,g=f?[b]:b.childrenAfterSort;this.resetRowTops(b),this.recursivelyAddToRowsToDisplay(g,c,d,e,0);var h=!f&&this.gridOptionsWrapper.isGroupIncludeTotalFooter();return h&&(this.ensureFooterNodeExists(b),this.addRowNodeToRowsToDisplay(b.sibling,c,d,0)),c},a.prototype.resetRowTops=function(a){if(a.clearRowTop(),a.hasChildren()){if(a.childrenAfterGroup)for(var b=0;b<a.childrenAfterGroup.length;b++)this.resetRowTops(a.childrenAfterGroup[b]);a.sibling&&a.sibling.clearRowTop()}},a.prototype.recursivelyAddToRowsToDisplay=function(a,b,c,d,e){if(!h.Utils.missingOrEmpty(a))for(var f=this.gridOptionsWrapper.isGroupSuppressRow(),g=this.gridOptionsWrapper.isGroupHideOpenParents(),i=this.gridOptionsWrapper.isGroupRemoveSingleChildren(),j=!i&&this.gridOptionsWrapper.isGroupRemoveLowestSingleChildren(),k=0;k<a.length;k++){var l=a[k],m=l.hasChildren(),n=f&&m,o=d&&!m,p=i&&m&&1===l.childrenAfterGroup.length,q=j&&m&&l.leafGroup&&1===l.childrenAfterGroup.length,r=d&&l.leafGroup,s=g&&l.expanded&&!r,t=!(o||n||s||p||q);if(t&&this.addRowNodeToRowsToDisplay(l,b,c,e),!d||!l.leafGroup)if(m){var u=p||q;if(l.expanded||u){var v=u?e:e+1;this.recursivelyAddToRowsToDisplay(l.childrenAfterSort,b,c,d,v),this.gridOptionsWrapper.isGroupIncludeFooter()&&(this.ensureFooterNodeExists(l),this.addRowNodeToRowsToDisplay(l.sibling,b,c,e))}}else if(l.master&&l.expanded){var w=this.createDetailNode(l);this.addRowNodeToRowsToDisplay(w,b,c,e)}}},a.prototype.addRowNodeToRowsToDisplay=function(a,b,c,d){if(b.push(a),h.Utils.missing(a.rowHeight)){var e=this.gridOptionsWrapper.getRowHeightForNode(a);a.setRowHeight(e)}a.setUiLevel(d),a.setRowTop(c.value),a.setRowIndex(b.length-1),c.value+=a.rowHeight},a.prototype.ensureFooterNodeExists=function(a){if(!h.Utils.exists(a.sibling)){var b=new g.RowNode;this.context.wireBean(b),Object.keys(a).forEach(function(c){b[c]=a[c]}),b.footer=!0,b.rowTop=null,b.oldRowTop=null,h.Utils.exists(b.id)&&(b.id="rowGroupFooter_"+b.id),b.sibling=a,a.sibling=b}},a.prototype.createDetailNode=function(a){if(h.Utils.exists(a.detailNode))return a.detailNode;var b=new g.RowNode;return this.context.wireBean(b),b.detail=!0,b.flower=b.detail,b.parent=a,h.Utils.exists(a.id)&&(b.id="detail_"+a.id),b.data=a.data,b.level=a.level+1,a.detailNode=b,a.childFlower=a.detailNode,b},d([f.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("selectionController"),e("design:type",j.SelectionController)],a.prototype,"selectionController",void 0),d([f.Autowired("eventService"),e("design:type",k.EventService)],a.prototype,"eventService",void 0),d([f.Autowired("context"),e("design:type",f.Context)],a.prototype,"context",void 0),d([f.Autowired("columnController"),e("design:type",l.ColumnController)],a.prototype,"columnController",void 0),a=d([f.Bean("flattenStage")],a)}();b.FlattenStage=m},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(1),h=c(2),i=c(0),j=c(3),k=c(17),l=c(5),m=c(24),n=c(18),o=c(9),p=c(136),q=c(13),r=c(87),s=c(115),t=c(6),u=c(7),v=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.getRowBounds=function(a){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*a}},b.prototype.init=function(){var a=this;this.gridOptionsWrapper.isRowModelInfinite()&&(this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.addEventListeners(),this.setDatasource(this.gridOptionsWrapper.getDatasource()),this.addDestroyFunc(function(){return a.destroyCache()}))},b.prototype.destroyDatasource=function(){this.datasource&&this.datasource.destroy&&this.datasource.destroy(),this.datasource=null},b.prototype.isLastRowFound=function(){return!!this.infiniteCache&&this.infiniteCache.isMaxRowFound()},b.prototype.addEventListeners=function(){this.addDestroyableEventListener(this.eventService,l.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addDestroyableEventListener(this.eventService,l.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addDestroyableEventListener(this.eventService,l.Events.EVENT_COLUMN_EVERYTHING_CHANGED,this.onColumnEverything.bind(this))},b.prototype.onFilterChanged=function(){this.gridOptionsWrapper.isEnableServerSideFilter()&&this.reset()},b.prototype.onSortChanged=function(){this.gridOptionsWrapper.isEnableServerSideSorting()&&this.reset()},b.prototype.onColumnEverything=function(){this.gridOptionsWrapper.isEnableServerSideSorting()&&this.reset()},b.prototype.destroy=function(){a.prototype.destroy.call(this)},b.prototype.getType=function(){return o.Constants.ROW_MODEL_TYPE_INFINITE},b.prototype.setDatasource=function(a){this.destroyDatasource(),this.datasource=a,a&&(this.checkForDeprecated(),this.reset())},b.prototype.checkForDeprecated=function(){var a=this.datasource;g.Utils.exists(a.maxConcurrentRequests)&&console.error("ag-Grid: since version 5.1.x, maxConcurrentRequests is replaced with grid property maxConcurrentDatasourceRequests"),g.Utils.exists(a.maxPagesInCache)&&console.error("ag-Grid: since version 5.1.x, maxPagesInCache is replaced with grid property maxPagesInPaginationCache"),g.Utils.exists(a.overflowSize)&&console.error("ag-Grid: since version 5.1.x, overflowSize is replaced with grid property paginationOverflowSize"),g.Utils.exists(a.blockSize)&&console.error("ag-Grid: since version 5.1.x, pageSize/blockSize is replaced with grid property infinitePageSize")},b.prototype.isEmpty=function(){return g.Utils.missing(this.infiniteCache)},b.prototype.isRowsToRender=function(){return g.Utils.exists(this.infiniteCache)},b.prototype.getNodesInRangeForSelection=function(a,b){return this.infiniteCache.getRowNodesInRange(a,b)},b.prototype.reset=function(){if(!g.Utils.missing(this.datasource)){var a=g.Utils.exists(this.gridOptionsWrapper.getRowNodeIdFunc());a||this.selectionController.reset(),this.resetCache();var b=this.createModelUpdatedEvent();this.eventService.dispatchEvent(b)}},b.prototype.createModelUpdatedEvent=function(){return{type:l.Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,newPage:!1,newData:!1,keepRenderedRows:!1,animate:!1}},b.prototype.resetCache=function(){this.destroyCache();var a=this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();this.rowNodeBlockLoader=new s.RowNodeBlockLoader(a),this.context.wireBean(this.rowNodeBlockLoader);var b={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,maxConcurrentRequests:a,overflowSize:this.gridOptionsWrapper.getCacheOverflowSize(),initialRowCount:this.gridOptionsWrapper.getInfiniteInitialRowCount(),maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache(),blockSize:this.gridOptionsWrapper.getCacheBlockSize(),rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),lastAccessedSequence:new g.NumberSequence};b.maxConcurrentRequests>=1||(b.maxConcurrentRequests=2),b.blockSize>=1||(b.blockSize=100),b.initialRowCount>=1||(b.initialRowCount=0),b.overflowSize>=1||(b.overflowSize=1),this.infiniteCache=new p.InfiniteCache(b),this.context.wireBean(this.infiniteCache),this.infiniteCache.addEventListener(r.RowNodeCache.EVENT_CACHE_UPDATED,this.onCacheUpdated.bind(this))},b.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache.destroy(),this.infiniteCache=null),this.rowNodeBlockLoader&&(this.rowNodeBlockLoader.destroy(),this.rowNodeBlockLoader=null)},b.prototype.onCacheUpdated=function(){var a=this.createModelUpdatedEvent();this.eventService.dispatchEvent(a)},b.prototype.getRow=function(a){return this.infiniteCache?this.infiniteCache.getRow(a):null},b.prototype.getRowNode=function(a){var b=null;return this.forEachNode(function(c){c.id===a&&(b=c)}),b},b.prototype.forEachNode=function(a){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(a,new g.NumberSequence)},b.prototype.getCurrentPageHeight=function(){return this.getRowCount()*this.rowHeight},b.prototype.getRowIndexAtPixel=function(a){if(0!==this.rowHeight){var b=Math.floor(a/this.rowHeight);return b>this.getPageLastRow()?this.getPageLastRow():b}return 0},b.prototype.getPageFirstRow=function(){return 0},b.prototype.getPageLastRow=function(){return this.infiniteCache?this.infiniteCache.getVirtualRowCount()-1:0},b.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getVirtualRowCount():0},b.prototype.updateRowData=function(a){return g.Utils.exists(a.remove)||g.Utils.exists(a.update)?void console.warn("ag-Grid: updateRowData for InfiniteRowModel does not support remove or update, only add"):g.Utils.missing(a.addIndex)?void console.warn("ag-Grid: updateRowData for InfiniteRowModel requires add and addIndex to be set"):void(this.infiniteCache&&this.infiniteCache.insertItemsAtIndex(a.addIndex,a.add))},b.prototype.isRowPresent=function(a){return!1},b.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},b.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},b.prototype.getVirtualRowCount=function(){return this.infiniteCache?this.infiniteCache.getVirtualRowCount():null},b.prototype.isMaxRowFound=function(){if(this.infiniteCache)return this.infiniteCache.isMaxRowFound()},b.prototype.setVirtualRowCount=function(a,b){this.infiniteCache&&this.infiniteCache.setVirtualRowCount(a,b)},b.prototype.getBlockState=function(){return this.rowNodeBlockLoader?this.rowNodeBlockLoader.getBlockState():null},e([i.Autowired("gridOptionsWrapper"),f("design:type",h.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([i.Autowired("filterManager"),f("design:type",n.FilterManager)],b.prototype,"filterManager",void 0),e([i.Autowired("sortController"),f("design:type",m.SortController)],b.prototype,"sortController",void 0),e([i.Autowired("selectionController"),f("design:type",k.SelectionController)],b.prototype,"selectionController",void 0),e([i.Autowired("eventService"),f("design:type",j.EventService)],b.prototype,"eventService",void 0),e([i.Autowired("context"),f("design:type",i.Context)],b.prototype,"context",void 0),e([i.Autowired("gridApi"),f("design:type",t.GridApi)],b.prototype,"gridApi",void 0),e([i.Autowired("columnApi"),f("design:type",u.ColumnApi)],b.prototype,"columnApi",void 0),e([i.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),e([i.PreDestroy,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"destroyDatasource",null),e([i.PreDestroy,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"destroy",null),b=e([i.Bean("rowModel")],b)}(q.BeanStub);b.InfiniteRowModel=v},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(61),h=c(12),i=c(0),j=c(1),k=function(){function a(a){this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0,this.maxConcurrentRequests=a}return a.prototype.setBeans=function(a){this.logger=a.create("RowNodeBlockLoader")},a.prototype.addBlock=function(a){this.blocks.push(a)},a.prototype.removeBlock=function(a){j._.removeFromArray(this.blocks,a)},a.prototype.destroy=function(){this.active=!1},a.prototype.loadComplete=function(){this.activeBlockLoadsCount--},a.prototype.checkBlockToLoad=function(){if(this.active){if(this.printCacheStatus(),this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void this.logger.log("checkBlockToLoad: max loads exceeded");var a=null;this.blocks.forEach(function(b){b.getState()===g.RowNodeBlock.STATE_DIRTY&&(a=b)}),a?(a.load(),this.activeBlockLoadsCount++,this.logger.log("checkBlockToLoad: loading page "+a.getBlockNumber()),this.printCacheStatus()):this.logger.log("checkBlockToLoad: no pages to load")}},a.prototype.getBlockState=function(){var a={};return this.blocks.forEach(function(b){var c=b.getNodeIdPrefix(),d={blockNumber:b.getBlockNumber(),startRow:b.getStartRow(),endRow:b.getEndRow(),pageStatus:b.getState()};j._.exists(c)?a[c+b.getBlockNumber()]=d:a[b.getBlockNumber()]=d}),a},a.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+", blocks = "+JSON.stringify(this.getBlockState()))},d([f(0,i.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[h.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),a}();b.RowNodeBlockLoader=k},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f,g=c(1),h=c(9),i=c(2),j=c(7),k=c(4),l=c(18),m=c(14),n=c(3),o=c(5),p=c(0),q=c(17),r=c(88),s=c(89),t=c(16),u=c(33),v=c(6);!function(a){a[a.Normal=0]="Normal",a[a.AfterFilter=1]="AfterFilter",a[a.AfterFilterAndSort=2]="AfterFilterAndSort",a[a.PivotNodes=3]="PivotNodes"}(f||(f={}));var w=function(){function a(){}return a.prototype.init=function(){var a=this.refreshModel.bind(this,{step:h.Constants.STEP_EVERYTHING});this.eventService.addModalPriorityEventListener(o.Events.EVENT_COLUMN_EVERYTHING_CHANGED,a),this.eventService.addModalPriorityEventListener(o.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,a),this.eventService.addModalPriorityEventListener(o.Events.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.eventService.addModalPriorityEventListener(o.Events.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:h.Constants.STEP_PIVOT})),this.eventService.addModalPriorityEventListener(o.Events.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this)),this.eventService.addModalPriorityEventListener(o.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.eventService.addModalPriorityEventListener(o.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.eventService.addModalPriorityEventListener(o.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,a);var b=this.refreshModel.bind(this,{step:h.Constants.STEP_MAP,keepRenderedRows:!0,animate:!0});this.gridOptionsWrapper.addEventListener(i.GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN,b),this.gridOptionsWrapper.addEventListener(i.GridOptionsWrapper.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,b),this.rootNode=new m.RowNode,this.nodeManager=new r.ClientSideNodeManager(this.rootNode,this.gridOptionsWrapper,this.context,this.eventService,this.columnController),this.context.wireBean(this.rootNode)},a.prototype.ensureRowAtPixel=function(a,b){var c=this.getRowIndexAtPixel(b),d=this.getRow(c);return d!==a&&(g.Utils.removeFromArray(this.rootNode.allLeafChildren,a),g.Utils.insertIntoArray(this.rootNode.allLeafChildren,a,c),this.refreshModel({step:h.Constants.STEP_EVERYTHING,keepRenderedRows:!0,animate:!0,keepEditingRows:!0}),!0)},a.prototype.isLastRowFound=function(){return!0},a.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},a.prototype.getRowBounds=function(a){if(g.Utils.missing(this.rowsToDisplay))return null;var b=this.rowsToDisplay[a];return b?{rowTop:b.rowTop,rowHeight:b.rowHeight}:null},a.prototype.onRowGroupOpened=function(){var a=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:h.Constants.STEP_MAP,keepRenderedRows:!0,animate:a})},a.prototype.onFilterChanged=function(){var a=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:h.Constants.STEP_FILTER,keepRenderedRows:!0,animate:a})},a.prototype.onSortChanged=function(){if(!this.gridOptionsWrapper.isEnableServerSideSorting()){var a=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:h.Constants.STEP_SORT,keepRenderedRows:!0,animate:a,keepEditingRows:!0})}},a.prototype.getType=function(){return h.Constants.ROW_MODEL_TYPE_CLIENT_SIDE},a.prototype.onValueChanged=function(){this.columnController.isPivotActive()?this.refreshModel({step:h.Constants.STEP_PIVOT}):this.refreshModel({step:h.Constants.STEP_AGGREGATE})},a.prototype.createChangePath=function(a){var b=this.columnController.getValueColumns(),c=g.Utils.missingOrEmpty(b),d=g.Utils.missingOrEmpty(a),e=new s.ChangedPath((!1));return(c||d)&&e.setInactive(),e},a.prototype.refreshModel=function(a){var b=this,c=this.createChangePath(a.rowNodeTransactions);switch(a.step){case h.Constants.STEP_EVERYTHING:this.doRowGrouping(a.groupState,a.rowNodeTransactions,a.rowNodeOrder,c);case h.Constants.STEP_FILTER:this.doFilter();case h.Constants.STEP_PIVOT:this.doPivot(c);case h.Constants.STEP_AGGREGATE:this.doAggregate(c);case h.Constants.STEP_SORT:this.doSort();case h.Constants.STEP_MAP:this.doRowsToDisplay()}var d={type:o.Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:a.animate,keepRenderedRows:a.keepRenderedRows,newData:a.newData,newPage:!1};this.eventService.dispatchEvent(d),this.$scope&&setTimeout(function(){b.$scope.$apply()},0)},a.prototype.isEmpty=function(){var a,b=g.Utils.exists(this.gridOptionsWrapper.getNodeChildDetailsFunc());a=b?g.Utils.missing(this.rootNode.childrenAfterGroup)||0===this.rootNode.childrenAfterGroup.length:g.Utils.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;var c=g.Utils.missing(this.rootNode)||a||!this.columnController.isReady();return c},a.prototype.isRowsToRender=function(){return g.Utils.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},a.prototype.getNodesInRangeForSelection=function(a,b){var c,d=!b,e=!1,f=[],g=this.gridOptionsWrapper.isGroupSelectsChildren();return this.forEachNodeAfterFilterAndSort(function(h){var i=d&&!e;d||h!==b&&h!==a||(d=!0);var j=h.group&&g;if(!j){var k=d&&!e,l=h.isParentOfNode(c);(k||l)&&f.push(h)}i&&(h!==b&&h!==a||(e=!0,c=h===b?b:a))}),f},a.prototype.setDatasource=function(a){console.error("ag-Grid: should never call setDatasource on clientSideRowController")},a.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},a.prototype.getRootNode=function(){return this.rootNode},a.prototype.getRow=function(a){return this.rowsToDisplay[a]},a.prototype.isRowPresent=function(a){return this.rowsToDisplay.indexOf(a)>=0},a.prototype.getVirtualRowCount=function(){return console.warn("ag-Grid: rowModel.getVirtualRowCount() is not longer a function, use rowModel.getRowCount() instead"),this.getPageLastRow()},a.prototype.getPageFirstRow=function(){return 0},a.prototype.getPageLastRow=function(){return this.rowsToDisplay?this.rowsToDisplay.length-1:0},a.prototype.getRowIndexAtPixel=function(a){if(this.isEmpty())return-1;var b=0,c=this.rowsToDisplay.length-1;if(a<=0)return 0;var d=this.rowsToDisplay[this.rowsToDisplay.length-1];if(d.rowTop<=a)return this.rowsToDisplay.length-1;for(;;){var e=Math.floor((b+c)/2),f=this.rowsToDisplay[e];if(this.isRowInPixel(f,a))return e;f.rowTop<a?b=e+1:f.rowTop>a&&(c=e-1);
}},a.prototype.isRowInPixel=function(a,b){var c=a.rowTop,d=a.rowTop+a.rowHeight,e=c<=b&&d>b;return e},a.prototype.getCurrentPageHeight=function(){if(this.rowsToDisplay&&this.rowsToDisplay.length>0){var a=this.rowsToDisplay[this.rowsToDisplay.length-1],b=a.rowTop+a.rowHeight;return b}return 0},a.prototype.forEachLeafNode=function(a){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(b,c){return a(b,c)})},a.prototype.forEachNode=function(a){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterGroup,a,f.Normal,0)},a.prototype.forEachNodeAfterFilter=function(a){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterFilter,a,f.AfterFilter,0)},a.prototype.forEachNodeAfterFilterAndSort=function(a){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterSort,a,f.AfterFilterAndSort,0)},a.prototype.forEachPivotNode=function(a){this.recursivelyWalkNodesAndCallback([this.rootNode],a,f.PivotNodes,0)},a.prototype.recursivelyWalkNodesAndCallback=function(a,b,c,d){if(a)for(var e=0;e<a.length;e++){var g=a[e];if(b(g,d++),g.hasChildren()){var h=void 0;switch(c){case f.Normal:h=g.childrenAfterGroup;break;case f.AfterFilter:h=g.childrenAfterFilter;break;case f.AfterFilterAndSort:h=g.childrenAfterSort;break;case f.PivotNodes:h=g.leafGroup?null:g.childrenAfterSort}h&&(d=this.recursivelyWalkNodesAndCallback(h,b,c,d))}}return d},a.prototype.doAggregate=function(a){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:a})},a.prototype.expandOrCollapseAll=function(a){function b(d){d&&d.forEach(function(d){var e=c?g.Utils.exists(d.childrenAfterGroup):d.group;e&&(d.expanded=a,b(d.childrenAfterGroup))})}var c=this.gridOptionsWrapper.isTreeData();this.rootNode&&b(this.rootNode.childrenAfterGroup),this.refreshModel({step:h.Constants.STEP_MAP})},a.prototype.doSort=function(){this.sortStage.execute({rowNode:this.rootNode})},a.prototype.doRowGrouping=function(a,b,c,d){var e=this,f=g.Utils.exists(this.gridOptionsWrapper.getNodeChildDetailsFunc());f||(this.groupStage?(g.Utils.exists(b)?b.forEach(function(a){e.groupStage.execute({rowNode:e.rootNode,rowNodeTransaction:a,rowNodeOrder:c,changedPath:d})}):(this.selectionController.removeGroupsFromSelection(),this.groupStage.execute({rowNode:this.rootNode,changedPath:d}),this.restoreGroupState(a)),this.gridOptionsWrapper.isGroupSelectsChildren()&&this.selectionController.updateGroupsFromChildrenSelections()):this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren)},a.prototype.restoreGroupState=function(a){a&&g.Utils.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(b,c){"boolean"==typeof a[c]&&(b.expanded=a[c])})},a.prototype.doFilter=function(){this.filterStage.execute({rowNode:this.rootNode})},a.prototype.doPivot=function(a){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:a})},a.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsWrapper.isRememberGroupStateWhenNewData())return null;var a={};return g.Utils.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(b,c){return a[c]=b.expanded}),a},a.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},a.prototype.getRowNode=function(a){return this.nodeManager.getRowNode(a)},a.prototype.setRowData=function(a){var b=this.getGroupState();this.nodeManager.setRowData(a);var c={type:o.Events.EVENT_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(c),this.refreshModel({step:h.Constants.STEP_EVERYTHING,groupState:b,newData:!0})},a.prototype.batchUpdateRowData=function(a,b){var c=this;if(!this.rowDataTransactionBatch){this.rowDataTransactionBatch=[];var d=this.gridOptionsWrapper.getBatchUpdateWaitMillis();setTimeout(function(){c.executeBatchUpdateRowData(),c.rowDataTransactionBatch=null},d)}this.rowDataTransactionBatch.push({rowDataTransaction:a,callback:b})},a.prototype.executeBatchUpdateRowData=function(){var a=this;this.valueCache.onDataChanged();var b=[],c=[];this.rowDataTransactionBatch.forEach(function(d){var e=a.nodeManager.updateRowData(d.rowDataTransaction,null);c.push(e),d.callback&&b.push(d.callback.bind(e))}),this.commonUpdateRowData(c),b.length>0&&setTimeout(function(){b.forEach(function(a){return a()})},0)},a.prototype.updateRowData=function(a,b){this.valueCache.onDataChanged();var c=this.nodeManager.updateRowData(a,b);return this.commonUpdateRowData([c],b),c},a.prototype.commonUpdateRowData=function(a,b){this.refreshModel({step:h.Constants.STEP_EVERYTHING,rowNodeTransactions:a,rowNodeOrder:b,keepRenderedRows:!0,animate:!0,keepEditingRows:!0});var c={type:o.Events.EVENT_ROW_DATA_UPDATED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(c)},a.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},a.prototype.onRowHeightChanged=function(){this.refreshModel({step:h.Constants.STEP_MAP,keepRenderedRows:!0,keepEditingRows:!0})},a.prototype.resetRowHeights=function(){this.forEachNode(function(a){return a.setRowHeight(null)}),this.onRowHeightChanged()},d([p.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([p.Autowired("columnController"),e("design:type",k.ColumnController)],a.prototype,"columnController",void 0),d([p.Autowired("filterManager"),e("design:type",l.FilterManager)],a.prototype,"filterManager",void 0),d([p.Autowired("$scope"),e("design:type",Object)],a.prototype,"$scope",void 0),d([p.Autowired("selectionController"),e("design:type",q.SelectionController)],a.prototype,"selectionController",void 0),d([p.Autowired("eventService"),e("design:type",n.EventService)],a.prototype,"eventService",void 0),d([p.Autowired("context"),e("design:type",p.Context)],a.prototype,"context",void 0),d([p.Autowired("valueService"),e("design:type",t.ValueService)],a.prototype,"valueService",void 0),d([p.Autowired("valueCache"),e("design:type",u.ValueCache)],a.prototype,"valueCache",void 0),d([p.Autowired("columnApi"),e("design:type",j.ColumnApi)],a.prototype,"columnApi",void 0),d([p.Autowired("gridApi"),e("design:type",v.GridApi)],a.prototype,"gridApi",void 0),d([p.Autowired("filterStage"),e("design:type",Object)],a.prototype,"filterStage",void 0),d([p.Autowired("sortStage"),e("design:type",Object)],a.prototype,"sortStage",void 0),d([p.Autowired("flattenStage"),e("design:type",Object)],a.prototype,"flattenStage",void 0),d([p.Optional("groupStage"),e("design:type",Object)],a.prototype,"groupStage",void 0),d([p.Optional("aggregationStage"),e("design:type",Object)],a.prototype,"aggregationStage",void 0),d([p.Optional("pivotStage"),e("design:type",Object)],a.prototype,"pivotStage",void 0),d([p.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([p.Bean("rowModel")],a)}();b.ClientSideRowModel=w},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(){}return a.prototype.dateComponent=function(a){return a.dateComponent},a.prototype.colDefFloatingCellRenderer=function(a){return a.pinnedRowCellRenderer},a.prototype.colDefCellRenderer=function(a){return a.cellRenderer},a.prototype.colDefCellEditor=function(a){return a.cellEditor},a.prototype.colDefFilter=function(a){return a.filter},a.prototype.gridOptionsFullWidthCellRenderer=function(a){return a.fullWidthCellRenderer},a.prototype.gridOptionsGroupRowRenderer=function(a){return a.groupRowRenderer},a.prototype.gridOptionsGroupRowInnerRenderer=function(a){return a.groupRowInnerRenderer},a.prototype.setTimeout=function(a,b){setTimeout(a,b)},a}();b.BaseFrameworkFactory=d},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g};Object.defineProperty(b,"__esModule",{value:!0});var e=c(0),f="\r\n",g=function(){function a(){}return a.prototype.createXml=function(a,b){var c=this,d="";a.properties&&(a.properties.prefixedAttributes&&a.properties.prefixedAttributes.forEach(function(a){Object.keys(a.map).forEach(function(e){d+=c.returnAttributeIfPopulated(a.prefix+e,a.map[e],b)})}),a.properties.rawMap&&Object.keys(a.properties.rawMap).forEach(function(e){d+=c.returnAttributeIfPopulated(e,a.properties.rawMap[e],b)}));var e="<"+a.name+d;return a.children||null!=a.textNode?null!=a.textNode?e+">"+a.textNode+"</"+a.name+">"+f:(e+=">"+f,a.children.forEach(function(a){e+=c.createXml(a,b)}),e+"</"+a.name+">"+f):e+"/>"+f},a.prototype.returnAttributeIfPopulated=function(a,b,c){if(!b)return"";var d=b;return"boolean"==typeof b&&c&&(d=c(b)),d='"'+d+'"'," "+a+"="+d},a=d([e.Bean("xmlFactory")],a)}();b.XmlFactory=g},function(a,b,c){"use strict";(function(a){Object.defineProperty(b,"__esModule",{value:!0});var d="undefined"==typeof a?{}:a;d.HTMLElement="undefined"==typeof HTMLElement?{}:HTMLElement,d.HTMLButtonElement="undefined"==typeof HTMLButtonElement?{}:HTMLButtonElement,d.HTMLSelectElement="undefined"==typeof HTMLSelectElement?{}:HTMLSelectElement,d.HTMLInputElement="undefined"==typeof HTMLInputElement?{}:HTMLInputElement,d.Node="undefined"==typeof Node?{}:Node,d.MouseEvent="undefined"==typeof MouseEvent?{}:MouseEvent;var e=c(38);b.BalancedColumnTreeBuilder=e.BalancedColumnTreeBuilder;var f=c(4);b.ColumnController=f.ColumnController;var g=c(107);b.ColumnKeyCreator=g.ColumnKeyCreator;var h=c(31);b.ColumnUtils=h.ColumnUtils;var i=c(48);b.DisplayedGroupCreator=i.DisplayedGroupCreator;var j=c(83);b.GroupInstanceIdCreator=j.GroupInstanceIdCreator;var k=c(62);b.ComponentUtil=k.ComponentUtil;var l=c(106);b.ColDefUtil=l.ColDefUtil;var m=c(66);b.ComponentProvider=m.ComponentProvider;var n=c(135);b.initialiseAgGridWithAngular1=n.initialiseAgGridWithAngular1;var o=c(141);b.initialiseAgGridWithWebComponents=o.initialiseAgGridWithWebComponents;var p=c(13);b.BeanStub=p.BeanStub;var q=c(0);b.Context=q.Context,b.Autowired=q.Autowired,b.PostConstruct=q.PostConstruct,b.PreConstruct=q.PreConstruct,b.Optional=q.Optional,b.Bean=q.Bean,b.Qualifier=q.Qualifier,b.PreDestroy=q.PreDestroy;var r=c(11);b.QuerySelector=r.QuerySelector,b.Listener=r.Listener,b.RefSelector=r.RefSelector;var s=c(15);b.DragAndDropService=s.DragAndDropService,b.DragSourceType=s.DragSourceType,b.HDirection=s.HDirection,b.VDirection=s.VDirection;var t=c(40);b.DragService=t.DragService;var u=c(10);b.Column=u.Column;var v=c(26);b.ColumnGroup=v.ColumnGroup;var w=c(23);b.GridCell=w.GridCell;var x=c(64);b.GridRow=x.GridRow;var y=c(32);b.OriginalColumnGroup=y.OriginalColumnGroup;var z=c(14);b.RowNode=z.RowNode;var A=c(51);b.BaseFilter=A.BaseFilter;var B=c(68);b.DateFilter=B.DateFilter;var C=c(18);b.FilterManager=C.FilterManager;var D=c(96);b.NumberFilter=D.NumberFilter;var E=c(95);b.TextFilter=E.TextFilter;var F=c(78);b.GridPanel=F.GridPanel;var G=c(36);b.ScrollVisibleService=G.ScrollVisibleService;var H=c(44);b.MouseEventService=H.MouseEventService;var I=c(103);b.BodyDropPivotTarget=I.BodyDropPivotTarget;var J=c(101);b.BodyDropTarget=J.BodyDropTarget;var K=c(81);b.CssClassApplier=K.CssClassApplier;var L=c(98);b.HeaderContainer=L.HeaderContainer;var M=c(80);b.HeaderRootComp=M.HeaderRootComp;var N=c(99);b.HeaderRowComp=N.HeaderRowComp;var O=c(59);b.HorizontalResizeService=O.HorizontalResizeService;var P=c(102);b.MoveColumnController=P.MoveColumnController;var Q=c(108);b.StandardMenuFactory=Q.StandardMenuFactory;var R=c(142);b.TabbedLayout=R.TabbedLayout;var S=c(143);b.VerticalStack=S.VerticalStack;var T=c(144);b.simpleHttpRequest=T.simpleHttpRequest;var U=c(94);b.LargeTextCellEditor=U.LargeTextCellEditor;var V=c(69);b.PopupEditorWrapper=V.PopupEditorWrapper;var W=c(93);b.PopupSelectCellEditor=W.PopupSelectCellEditor;var X=c(92);b.PopupTextCellEditor=X.PopupTextCellEditor;var Y=c(75);b.SelectCellEditor=Y.SelectCellEditor;var Z=c(67);b.TextCellEditor=Z.TextCellEditor;var $=c(71);b.AnimateShowChangeCellRenderer=$.AnimateShowChangeCellRenderer;var _=c(70);b.AnimateSlideCellRenderer=_.AnimateSlideCellRenderer;var aa=c(72);b.GroupCellRenderer=aa.GroupCellRenderer;var ba=c(52);b.SetLeftFeature=ba.SetLeftFeature;var ca=c(39);b.AutoWidthCalculator=ca.AutoWidthCalculator;var da=c(54);b.CellEditorFactory=da.CellEditorFactory;var ea=c(55);b.CellRendererFactory=ea.CellRendererFactory;var fa=c(56);b.CellRendererService=fa.CellRendererService;var ga=c(65);b.CheckboxSelectionComponent=ga.CheckboxSelectionComponent;var ha=c(34);b.CellComp=ha.CellComp;var ia=c(50);b.RowComp=ia.RowComp;var ja=c(20);b.RowRenderer=ja.RowRenderer;var ka=c(43);b.ValueFormatterService=ka.ValueFormatterService;var la=c(109);b.FilterStage=la.FilterStage;var ma=c(113);b.FlattenStage=ma.FlattenStage;var na=c(111);b.SortStage=na.SortStage;var oa=c(30);b.PinnedRowModel=oa.PinnedRowModel;var pa=c(116);b.ClientSideRowModel=pa.ClientSideRowModel;var qa=c(89);b.ChangedPath=qa.ChangedPath;var ra=c(88);b.ClientSideNodeManager=ra.ClientSideNodeManager;var sa=c(114);b.InfiniteRowModel=sa.InfiniteRowModel;var ta=c(61);b.RowNodeBlock=ta.RowNodeBlock;var ua=c(115);b.RowNodeBlockLoader=ua.RowNodeBlockLoader;var va=c(87);b.RowNodeCache=va.RowNodeCache;var wa=c(73);b.StylingService=wa.StylingService;var xa=c(60);b.AgCheckbox=xa.AgCheckbox;var ya=c(8);b.Component=ya.Component;var za=c(35);b.PopupService=za.PopupService;var Aa=c(46);b.TouchListener=Aa.TouchListener;var Ba=c(117);b.BaseFrameworkFactory=Ba.BaseFrameworkFactory;var Ca=c(82);b.CellNavigationService=Ca.CellNavigationService;var Da=c(58);b.AlignedGridsService=Da.AlignedGridsService;var Ea=c(9);b.Constants=Ea.Constants;var Fa=c(47);b.CsvCreator=Fa.CsvCreator,b.BaseCreator=Fa.BaseCreator;var Ga=c(84);b.Downloader=Ga.Downloader;var Ha=c(85);b.Grid=Ha.Grid;var Ia=c(6);b.GridApi=Ia.GridApi;var Ja=c(25);b.Events=Ja.Events;var Ka=c(22);b.FocusedCellController=Ka.FocusedCellController;var La=c(145);b.defaultGroupComparator=La.defaultGroupComparator;var Ma=c(2);b.GridOptionsWrapper=Ma.GridOptionsWrapper;var Na=c(3);b.EventService=Na.EventService;var Oa=c(86);b.SelectableService=Oa.SelectableService;var Pa=c(42);b.GridCore=Pa.GridCore;var Qa=c(12);b.Logger=Qa.Logger;var Ra=c(17);b.SelectionController=Ra.SelectionController;var Sa=c(24);b.SortController=Sa.SortController;var Ta=c(49);b.TemplateService=Ta.TemplateService;var Ua=c(1);b.Utils=Ua.Utils,b.NumberSequence=Ua.NumberSequence,b._=Ua._,b.Promise=Ua.Promise;var Va=c(16);b.ValueService=Va.ValueService;var Wa=c(19);b.ExpressionService=Wa.ExpressionService;var Xa=c(118);b.XmlFactory=Xa.XmlFactory;var Ya=c(63);b.GridSerializer=Ya.GridSerializer,b.BaseGridSerializingSession=Ya.BaseGridSerializingSession,b.RowType=Ya.RowType;var Za=c(12);b.LoggerFactory=Za.LoggerFactory;var $a=c(7);b.ColumnApi=$a.ColumnApi;var _a=c(146);b.BaseComponentWrapper=_a.BaseComponentWrapper;var ab=c(41);b.Environment=ab.Environment}).call(b,c(120))},function(a,b){var c;c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(a){"object"==typeof window&&(c=window)}a.exports=c},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(8),h=c(0),i=c(14),j=c(15),k=c(25),l=c(1),m=c(13),n=function(a){function b(b,c,d,e){var f=a.call(this,'<span class="ag-row-drag"></span>')||this;return f.rowNode=b,f.column=c,f.cellValue=d,f.beans=e,f}return d(b,a),b.prototype.postConstruct=function(){this.addDragSource(),this.checkCompatibility(),this.beans.gridOptionsWrapper.isRowDragManaged()?this.addFeature(this.beans.context,new p(this,this.beans,this.rowNode,this.column)):this.addFeature(this.beans.context,new o(this,this.beans,this.rowNode,this.column))},b.prototype.checkCompatibility=function(){var a=this.beans.gridOptionsWrapper.isRowDragManaged(),b=this.beans.gridOptionsWrapper.isTreeData();b&&a&&l._.doOnce(function(){return console.warn("ag-Grid: If using row drag with tree data, you cannot have rowDragManaged=true")},"RowDragComp.managedAndTreeData")},b.prototype.addDragSource=function(){var a=this,b={rowNode:this.rowNode},c={type:j.DragSourceType.RowDrag,eElement:this.getGui(),dragItemName:this.cellValue,dragItemCallback:function(){return b},dragStartPixels:0};this.beans.dragAndDropService.addDragSource(c,!0),this.addDestroyFunc(function(){return a.beans.dragAndDropService.removeDragSource(c)})},e([h.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b}(g.Component);b.RowDragComp=n;var o=function(a){function b(b,c,d,e){var f=a.call(this)||this;return f.parent=b,f.beans=c,f.column=e,f.rowNode=d,f}return d(b,a),b.prototype.postConstruct=function(){this.addDestroyableEventListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.workOutVisibility()},b.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},b.prototype.workOutVisibility=function(){var a=this.beans.gridOptionsWrapper.isSuppressRowDrag();if(a)this.parent.setVisible(!1);else{var b=this.column.isRowDrag(this.rowNode);this.parent.setVisible(b)}},e([h.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b}(m.BeanStub),p=function(a){function b(b,c,d,e){var f=a.call(this)||this;return f.parent=b,f.beans=c,f.column=e,f.rowNode=d,f}return d(b,a),b.prototype.postConstruct=function(){this.addDestroyableEventListener(this.beans.eventService,k.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addDestroyableEventListener(this.beans.eventService,k.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addDestroyableEventListener(this.beans.eventService,k.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addDestroyableEventListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.updateSortActive(),this.updateFilterActive(),this.updateRowGroupActive(),this.workOutVisibility()},b.prototype.updateRowGroupActive=function(){var a=this.beans.columnController.getRowGroupColumns();this.rowGroupActive=!l._.missingOrEmpty(a)},b.prototype.onRowGroupChanged=function(){this.updateRowGroupActive(),this.workOutVisibility()},b.prototype.updateSortActive=function(){var a=this.beans.sortController.getSortModel();this.sortActive=!l._.missingOrEmpty(a)},b.prototype.onSortChanged=function(){this.updateSortActive(),this.workOutVisibility()},b.prototype.updateFilterActive=function(){this.filterActive=this.beans.filterManager.isAnyFilterPresent()},b.prototype.onFilterChanged=function(){this.updateFilterActive(),this.workOutVisibility()},b.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},b.prototype.workOutVisibility=function(){var a=this.sortActive||this.filterActive||this.rowGroupActive,b=this.beans.gridOptionsWrapper.isSuppressRowDrag(),c=a||b;if(c)this.parent.setVisible(!1);else{var d=this.column.isRowDrag(this.rowNode);this.parent.setVisible(d)}},e([h.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b}(m.BeanStub)},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(0),h=c(10),i=c(1),j=c(52),k=c(8),l=c(11),m=c(2),n=c(28),o=c(74),p=c(5),q=c(3),r=c(45),s=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(a){this.column=a.column;var b=i._.loadTemplate('<div class="ag-header-cell" aria-hidden="true"><div class="ag-floating-filter-body" aria-hidden="true"></div></div>');this.enrichBody(b),this.setTemplateFromElement(b),this.setupWidth(),this.addColumnHoverListener(),this.addFeature(this.context,new o.HoverFeature([this.column],this.getGui()));var c=new j.SetLeftFeature(this.column,this.getGui(),this.beans);c.init(),this.addDestroyFunc(c.destroy.bind(c))},b.prototype.addColumnHoverListener=function(){this.addDestroyableEventListener(this.eventService,p.Events.EVENT_COLUMN_HOVER_CHANGED,this.onColumnHover.bind(this)),this.onColumnHover()},b.prototype.onColumnHover=function(){var a=this.columnHoverService.isHovered(this.column);i._.addOrRemoveCssClass(this.getGui(),"ag-column-hover",a)},b.prototype.setupWidth=function(){this.addDestroyableEventListener(this.column,h.Column.EVENT_WIDTH_CHANGED,this.onColumnWidthChanged.bind(this)),this.onColumnWidthChanged()},b.prototype.onColumnWidthChanged=function(){this.getGui().style.width=this.column.getActualWidth()+"px"},e([g.Autowired("context"),f("design:type",g.Context)],b.prototype,"context",void 0),e([g.Autowired("columnHoverService"),f("design:type",r.ColumnHoverService)],b.prototype,"columnHoverService",void 0),e([g.Autowired("eventService"),f("design:type",q.EventService)],b.prototype,"eventService",void 0),e([g.Autowired("beans"),f("design:type",n.Beans)],b.prototype,"beans",void 0),b}(k.Component);b.BaseFilterWrapperComp=s;var t=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(b){this.floatingFilterCompPromise=b.floatingFilterComp,this.suppressFilterButton=b.suppressFilterButton,a.prototype.init.call(this,b),this.addEventListeners()},b.prototype.addEventListeners=function(){!this.suppressFilterButton&&this.eButtonShowMainFilter&&this.addDestroyableEventListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this))},b.prototype.enrichBody=function(a){var b=this;this.floatingFilterCompPromise.then(function(c){var d=a.querySelector(".ag-floating-filter-body"),e=c.getGui();if(b.suppressFilterButton)d.appendChild(e),i._.removeCssClass(d,"ag-floating-filter-body"),i._.addCssClass(d,"ag-floating-filter-full-body");else{d.appendChild(e),a.appendChild(i._.loadTemplate('<div class="ag-floating-filter-button" aria-hidden="true">\n                        <button type="button" ref="eButtonShowMainFilter"></button>\n                </div>'));var f=i._.createIconNoSpan("filter",b.gridOptionsWrapper,b.column);a.querySelector("button").appendChild(f)}c.afterGuiAttached&&c.afterGuiAttached(),b.wireQuerySelectors(),b.addEventListeners()})},b.prototype.onParentModelChanged=function(a){var b=void 0,c=null;a&&a.operator?(b=a,c=b.condition1):c=a,this.floatingFilterCompPromise.then(function(a){a.onParentModelChanged(c,b)})},b.prototype.showParentFilter=function(){this.menuFactory.showMenuAfterButtonClick(this.column,this.eButtonShowMainFilter,"filterMenuTab",["filterMenuTab"])},e([l.RefSelector("eButtonShowMainFilter"),f("design:type",HTMLInputElement)],b.prototype,"eButtonShowMainFilter",void 0),e([g.Autowired("menuFactory"),f("design:type",Object)],b.prototype,"menuFactory",void 0),e([g.Autowired("gridOptionsWrapper"),f("design:type",m.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),b}(s);b.FloatingFilterWrapperComp=t;var u=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.enrichBody=function(a){},b.prototype.onParentModelChanged=function(a){},b}(s);b.EmptyFloatingFilterWrapperComp=u},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(){this.first=null,this.last=null}return a.prototype.add=function(a){var b={item:a,next:null};this.last?this.last.next=b:this.first=b,this.last=b},a.prototype.remove=function(){var a=this.first;return a&&(this.first=a.next,this.first||(this.last=null)),a.item},a.prototype.isEmpty=function(){return!this.first},a}();b.LinkedList=d;(function(){function a(){}return a})()},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(1),h=c(2),i=c(0),j=c(8),k=c(21),l=function(a){function b(){return a.call(this)||this}return d(b,a),b.prototype.init=function(){},b.prototype.showLoadingOverlay=function(a){var c=this;this.setTemplate(b.LOADING_WRAPPER_OVERLAY_TEMPLATE),this.componentRecipes.newLoadingOverlayComponent().then(function(a){var b=c.getRefElement("loadingOverlayWrapper");g.Utils.removeAllChildren(b),b.appendChild(a.getGui())}),this.showOverlay(a,this.getGui())},b.prototype.showNoRowsOverlay=function(a){var c=this;this.setTemplate(b.NO_ROWS_WRAPPER_OVERLAY_TEMPLATE),this.componentRecipes.newNoRowsOverlayComponent().then(function(a){var b=c.getRefElement("noRowsOverlayWrapper");g.Utils.removeAllChildren(b),b.appendChild(a.getGui())}),this.showOverlay(a,this.getGui())},b.prototype.hideOverlay=function(a){g.Utils.removeAllChildren(a),g.Utils.setVisible(a,!1)},b.prototype.showOverlay=function(a,b){b?(g.Utils.removeAllChildren(a),g.Utils.setVisible(a,!0),a.appendChild(b)):(console.warn("ag-Grid: unknown overlay"),this.hideOverlay(a))},b.LOADING_WRAPPER_OVERLAY_TEMPLATE='<div class="ag-overlay-panel" role="presentation"><div class="ag-overlay-wrapper ag-overlay-loading-wrapper" ref="loadingOverlayWrapper">[OVERLAY_TEMPLATE]</div></div>',b.NO_ROWS_WRAPPER_OVERLAY_TEMPLATE='<div class="ag-overlay-panel" role="presentation"><div class="ag-overlay-wrapper ag-overlay-no-rows-wrapper" ref="noRowsOverlayWrapper">[OVERLAY_TEMPLATE]</div></div>',e([i.Autowired("gridOptionsWrapper"),f("design:type",h.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([i.Autowired("componentRecipes"),f("design:type",k.ComponentRecipes)],b.prototype,"componentRecipes",void 0),b}(j.Component);b.OverlayWrapperComponent=l},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(8),h=c(10),i=c(1),j=c(0),k=c(2),l=c(24),m=c(46),n=c(3),o=c(11),p=c(5),q=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.lastMovingChanged=0,b}return d(b,a),b.prototype.init=function(a){var c=i.Utils.firstExistingValue(a.template,b.TEMPLATE);this.setTemplate(c),this.params=a,this.setupTap(),this.setupIcons(a.column),this.setupMenu(),this.setupSort(),this.setupFilterIcon(),this.setupText(a.displayName)},b.prototype.setupText=function(a){this.eText&&(this.eText.innerHTML=a)},b.prototype.setupIcons=function(a){this.addInIcon("sortAscending",this.eSortAsc,a),this.addInIcon("sortDescending",this.eSortDesc,a),this.addInIcon("sortUnSort",this.eSortNone,a),this.addInIcon("menu",this.eMenu,a),this.addInIcon("filter",this.eFilter,a)},b.prototype.addInIcon=function(a,b,c){if(null!=b){var d=i.Utils.createIconNoSpan(a,this.gridOptionsWrapper,c);b.appendChild(d)}},b.prototype.setupTap=function(){var a=this;if(!this.gridOptionsWrapper.isSuppressTouch()){var b=new m.TouchListener(this.getGui());if(this.params.enableMenu){var c=function(b){a.gridOptionsWrapper.getApi().showColumnMenuAfterMouseClick(a.params.column,b.touchStart)};this.addDestroyableEventListener(b,m.TouchListener.EVENT_LONG_TAP,c)}if(this.params.enableSorting){var d=function(){a.sortController.progressSort(a.params.column,!1,"uiColumnSorted")};this.addDestroyableEventListener(b,m.TouchListener.EVENT_TAP,d)}this.addDestroyFunc(function(){return b.destroy()})}},b.prototype.setupMenu=function(){var a=this;if(this.eMenu){var b=!this.params.enableMenu||i.Utils.isUserAgentIPad();if(b)return void i.Utils.removeFromParent(this.eMenu);this.eMenu.addEventListener("click",function(){return a.showMenu(a.eMenu)}),this.gridOptionsWrapper.isSuppressMenuHide()||(this.eMenu.style.opacity="0",this.addGuiEventListener("mouseover",function(){a.eMenu.style.opacity="1"}),this.addGuiEventListener("mouseout",function(){a.eMenu.style.opacity="0"}));var c=this.eMenu.style;c.transition="opacity 0.2s, border 0.2s",c["-webkit-transition"]="opacity 0.2s, border 0.2s"}},b.prototype.showMenu=function(a){this.menuFactory.showMenuAfterButtonClick(this.params.column,a)},b.prototype.removeSortIcons=function(){i.Utils.removeFromParent(this.eSortAsc),i.Utils.removeFromParent(this.eSortDesc),i.Utils.removeFromParent(this.eSortNone),i.Utils.removeFromParent(this.eSortOrder)},b.prototype.setupSort=function(){var a=this,b=this.params.enableSorting;if(!b)return void this.removeSortIcons();var c=this.gridOptionsWrapper.isMultiSortKeyCtrl();this.addDestroyableEventListener(this.params.column,h.Column.EVENT_MOVING_CHANGED,function(){a.lastMovingChanged=(new Date).getTime()}),this.eLabel&&this.addDestroyableEventListener(this.eLabel,"click",function(b){var d=a.params.column.isMoving(),e=(new Date).getTime(),f=e-a.lastMovingChanged<50,g=d||f;
if(g)console.log("kipping sort cos of moving "+a.lastMovingChanged);else{var h=c?b.ctrlKey||b.metaKey:b.shiftKey;a.params.progressSort(h)}}),this.addDestroyableEventListener(this.params.column,h.Column.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.onSortChanged(),this.addDestroyableEventListener(this.eventService,p.Events.EVENT_SORT_CHANGED,this.setMultiSortOrder.bind(this)),this.setMultiSortOrder()},b.prototype.onSortChanged=function(){if(i.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-asc",this.params.column.isSortAscending()),i.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-desc",this.params.column.isSortDescending()),i.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-none",this.params.column.isSortNone()),this.eSortAsc&&i.Utils.addOrRemoveCssClass(this.eSortAsc,"ag-hidden",!this.params.column.isSortAscending()),this.eSortDesc&&i.Utils.addOrRemoveCssClass(this.eSortDesc,"ag-hidden",!this.params.column.isSortDescending()),this.eSortNone){var a=!this.params.column.getColDef().unSortIcon&&!this.gridOptionsWrapper.isUnSortIcon();i.Utils.addOrRemoveCssClass(this.eSortNone,"ag-hidden",a||!this.params.column.isSortNone())}},b.prototype.setMultiSortOrder=function(){if(this.eSortOrder){var a=this.params.column,b=this.sortController.getColumnsWithSortingOrdered(),c=b.indexOf(a),d=b.length>1,e=a.isSorting()&&d;i.Utils.setVisible(this.eSortOrder,e),c>=0?this.eSortOrder.innerHTML=(c+1).toString():this.eSortOrder.innerHTML=""}},b.prototype.setupFilterIcon=function(){this.eFilter&&(this.addDestroyableEventListener(this.params.column,h.Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},b.prototype.onFilterChanged=function(){var a=this.params.column.isFilterActive();i.Utils.addOrRemoveCssClass(this.eFilter,"ag-hidden",!a)},b.TEMPLATE='<div class="ag-cell-label-container" role="presentation">  <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>  <div ref="eLabel" class="ag-header-cell-label" role="presentation">    <span ref="eText" class="ag-header-cell-text" role="columnheader"></span>    <span ref="eFilter" class="ag-header-icon ag-filter-icon" aria-hidden="true"></span>    <span ref="eSortOrder" class="ag-header-icon ag-sort-order" aria-hidden="true"></span>    <span ref="eSortAsc" class="ag-header-icon ag-sort-ascending-icon" aria-hidden="true"></span>    <span ref="eSortDesc" class="ag-header-icon ag-sort-descending-icon" aria-hidden="true"></span>    <span ref="eSortNone" class="ag-header-icon ag-sort-none-icon" aria-hidden="true"></span>  </div></div>',e([j.Autowired("gridOptionsWrapper"),f("design:type",k.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([j.Autowired("sortController"),f("design:type",l.SortController)],b.prototype,"sortController",void 0),e([j.Autowired("menuFactory"),f("design:type",Object)],b.prototype,"menuFactory",void 0),e([j.Autowired("eventService"),f("design:type",n.EventService)],b.prototype,"eventService",void 0),e([o.RefSelector("eFilter"),f("design:type",HTMLElement)],b.prototype,"eFilter",void 0),e([o.RefSelector("eSortAsc"),f("design:type",HTMLElement)],b.prototype,"eSortAsc",void 0),e([o.RefSelector("eSortDesc"),f("design:type",HTMLElement)],b.prototype,"eSortDesc",void 0),e([o.RefSelector("eSortNone"),f("design:type",HTMLElement)],b.prototype,"eSortNone",void 0),e([o.RefSelector("eSortOrder"),f("design:type",HTMLElement)],b.prototype,"eSortOrder",void 0),e([o.RefSelector("eMenu"),f("design:type",HTMLElement)],b.prototype,"eMenu",void 0),e([o.RefSelector("eLabel"),f("design:type",HTMLElement)],b.prototype,"eLabel",void 0),e([o.RefSelector("eText"),f("design:type",HTMLElement)],b.prototype,"eText",void 0),b}(g.Component);b.HeaderComp=q},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(8),h=c(1),i=c(4),j=c(2),k=c(0),l=c(46),m=c(11),n=c(32),o=function(a){function b(){return a.call(this,b.TEMPLATE)||this}return d(b,a),b.prototype.init=function(a){this.params=a,this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},b.prototype.setupExpandIcons=function(){var a=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var b=function(b){if(!h.Utils.isStopPropagationForAgGrid(b)){var c=!a.params.columnGroup.isExpanded();a.columnController.setColumnGroupOpened(a.params.columnGroup.getOriginalColumnGroup(),c,"uiColumnExpanded")}};this.addTouchAndClickListeners(this.eCloseIcon,b),this.addTouchAndClickListeners(this.eOpenIcon,b);var c=function(a){h.Utils.stopPropagationForAgGrid(a)};this.addDestroyableEventListener(this.eCloseIcon,"dblclick",c),this.addDestroyableEventListener(this.eOpenIcon,"dblclick",c),this.addDestroyableEventListener(this.getGui(),"dblclick",b),this.updateIconVisibility();var d=this.params.columnGroup.getOriginalColumnGroup();this.addDestroyableEventListener(d,n.OriginalColumnGroup.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addDestroyableEventListener(d,n.OriginalColumnGroup.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},b.prototype.addTouchAndClickListeners=function(a,b){var c=new l.TouchListener(this.eCloseIcon);this.addDestroyableEventListener(c,l.TouchListener.EVENT_TAP,b),this.addDestroyFunc(function(){return c.destroy()}),this.addDestroyableEventListener(a,"click",b)},b.prototype.updateIconVisibility=function(){var a=this.params.columnGroup;if(a.isExpandable()){var b=this.params.columnGroup.isExpanded();h.Utils.setVisible(this.eOpenIcon,!b),h.Utils.setVisible(this.eCloseIcon,b)}else h.Utils.setVisible(this.eOpenIcon,!1),h.Utils.setVisible(this.eCloseIcon,!1)},b.prototype.addInIcon=function(a,b){var c=h.Utils.createIconNoSpan(a,this.gridOptionsWrapper,null);this.getRefElement(b).appendChild(c)},b.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable())return h.Utils.setVisible(this.eOpenIcon,!1),void h.Utils.setVisible(this.eCloseIcon,!1)},b.prototype.setupLabel=function(){if(this.params.displayName&&""!==this.params.displayName){var a=this.getRefElement("agLabel");a.innerHTML=this.params.displayName}},b.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer"><span ref="agLabel" class="ag-header-group-text"></span><span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span><span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span></div>',e([k.Autowired("columnController"),f("design:type",i.ColumnController)],b.prototype,"columnController",void 0),e([k.Autowired("gridOptionsWrapper"),f("design:type",j.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([m.RefSelector("agOpened"),f("design:type",HTMLElement)],b.prototype,"eOpenIcon",void 0),e([m.RefSelector("agClosed"),f("design:type",HTMLElement)],b.prototype,"eCloseIcon",void 0),b}(g.Component);b.HeaderGroupComp=o},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(2),h=c(0),i=c(8),j=function(a){function b(){return a.call(this)||this}return d(b,a),b.prototype.init=function(a){var c=this.gridOptionsWrapper.getOverlayLoadingTemplate()?this.gridOptionsWrapper.getOverlayLoadingTemplate():b.DEFAULT_LOADING_OVERLAY_TEMPLATE,d=this.gridOptionsWrapper.getLocaleTextFunc(),e=c.replace("[LOADING...]",d("loadingOoo","Loading..."));this.setTemplate(e)},b.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',e([h.Autowired("gridOptionsWrapper"),f("design:type",g.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),b}(i.Component);b.LoadingOverlayComponent=j},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(2),h=c(0),i=c(8),j=function(a){function b(){return a.call(this)||this}return d(b,a),b.prototype.init=function(a){var c=this.gridOptionsWrapper.getOverlayNoRowsTemplate()?this.gridOptionsWrapper.getOverlayNoRowsTemplate():b.DEFAULT_NO_ROWS_TEMPLATE,d=this.gridOptionsWrapper.getLocaleTextFunc(),e=c.replace("[NO_ROWS_TO_SHOW]",d("noRowsToShow","No Rows To Show"));this.setTemplate(e)},b.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',e([h.Autowired("gridOptionsWrapper"),f("design:type",g.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),b}(i.Component);b.NoRowsOverlayComponent=j},function(a,b,c){"use strict";function d(a){return parseFloat(a)||0}function e(a,b,c){var e=[b,c];return e.reduce(function(b,c){var e=a.getPropertyValue("border-"+c+"-width");return b+d(e)},0)}function f(a){for(var b=["top","right","bottom","left"],c={top:null,left:null,right:null,bottom:null},e=0,f=b;e<f.length;e+=1){var g=f[e],h=a.getPropertyValue("padding-"+g);c[g]=d(h)}return c}function g(a){var b=a.clientWidth,c=a.clientHeight;if(!b&&!c)return r;var g=q(a).getComputedStyle(a),h=f(g),i=h.left+h.right,k=h.top+h.bottom,l=d(g.width),m=d(g.height);"border-box"===g.boxSizing&&(Math.round(l+i)!==b&&(l-=e(g,"left","right")+i),Math.round(m+k)!==c&&(m-=e(g,"top","bottom")+k));var n=Math.round(l+i)-b,o=Math.round(m+k)-c;return 1!==Math.abs(n)&&(l-=n),1!==Math.abs(o)&&(m-=o),j(h.left,h.top,l,m)}function h(a){return g(a)}function i(a){var b=a.x,c=a.y,d=a.width,e=a.height,f=window.DOMRectReadOnly?window.DOMRectReadOnly:Object,g=Object.create(f.prototype);return t(g,{x:b,y:c,width:d,height:e,top:c,right:b+d,bottom:e+c,left:b}),g}function j(a,b,c,d){return{x:a,y:b,width:c,height:d}}function k(a,b){if(window.ResizeObserver){var c=new window.ResizeObserver(function(a,c){for(var d=0,e=a;d<e.length;d++){var f=e[d];b(f)}});return c.observe(a),function(){c.disconnect()}}var d=new w(function(a){b(a)});return d.observe(a),function(){d.disconnect()}}Object.defineProperty(b,"__esModule",{value:!0});var l=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame.bind(window):function(a){return setTimeout(function(){return a(Date.now())},1e3/60)}}(),m=2,n=function(a,b){function c(){f&&(f=!1,a()),g&&e()}function d(){l(c)}function e(){var a=Date.now();if(f){if(a-h<m)return;g=!0}else f=!0,g=!1,setTimeout(d,b);h=a}var f=!1,g=!1,h=0;return e},o=20,p="undefined"!=typeof MutationObserver,q=function(a){var b=a&&a.ownerDocument&&a.ownerDocument.defaultView;return b||window},r=j(0,0,0,0),s=function(){function a(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.callback_=null,this.refresh=n(this.refresh.bind(this),o)}return a.prototype.addObserver=function(a){this.observers_.indexOf(a)==-1&&this.observers_.push(a),this.connected_||this.connect_()},a.prototype.removeObserver=function(a){var b=this.observers_,c=b.indexOf(a);c>-1&&b.splice(c,1),!b.length&&this.connected_&&this.disconnect_()},a.prototype.refresh=function(){var a=this.updateObservers_();a&&this.refresh()},a.prototype.updateObservers_=function(){var a=this.observers_.filter(function(a){return a.hasActive()});return a.forEach(function(a){return a.broadcastActive()}),a.length>0},a.prototype.connect_=function(){this.connected_||(window.addEventListener("resize",this.refresh),p?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},a.prototype.disconnect_=function(){this.connected_&&(window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},a.getInstance=function(){return this.instance_||(this.instance_=new a),this.instance_},a.instance_=null,a}(),t=function(a,b){for(var c=0,d=Object.keys(b);c<d.length;c+=1){var e=d[c];Object.defineProperty(a,e,{value:b[e],enumerable:!1,writable:!1,configurable:!0})}return a},u=function(){function a(a){this.target=a,this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=null,this.contentRect_=j(0,0,0,0)}return a.prototype.isActive=function(){var a=h(this.target);return this.contentRect_=a,a.width!==this.broadcastWidth||a.height!==this.broadcastHeight},a.prototype.broadcastRect=function(){var a=this.contentRect_;return this.broadcastWidth=a.width,this.broadcastHeight=a.height,a},a}(),v=function(){function a(a,b,c){if(this.observation=null,this.callback_=null,this.controller_=null,this.callbackCtx_=null,this.observation=null,"function"!=typeof a)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=a,this.controller_=b,this.callbackCtx_=c}return a.prototype.observe=function(a){this.observation=new u(a),this.controller_.addObserver(this),this.controller_.refresh()},a.prototype.disconnect=function(){this.observation=null,this.controller_.removeObserver(this)},a.prototype.broadcastActive=function(){if(this.hasActive()){var a=this.callbackCtx_;this.callback_.call(a,{target:this.observation.target,contentRect:i(this.observation.broadcastRect())},a)}},a.prototype.hasActive=function(){return this.observation.isActive()},a}(),w=function(){function a(a){var b=s.getInstance(),c=new v(a,b,this);this.observer_=c}return a.prototype.observe=function(a){this.observer_.observe(a)},a.prototype.disconnect=function(){this.observer_.disconnect()},a}();b.observeResize=k},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(1),g=c(0),h=c(2),i=function(){function a(a){this.childCount=0,this.rowTemplatesToAdd=[],this.afterGuiAttachedCallbacks=[],this.eContainer=a.eContainer,this.eViewport=a.eViewport,this.hideWhenNoChildren=a.hideWhenNoChildren}return a.prototype.setVerticalScrollPosition=function(a){this.scrollTop=a},a.prototype.postConstruct=function(){this.domOrder=this.gridOptionsWrapper.isEnsureDomOrder(),this.checkVisibility()},a.prototype.getRowElement=function(a){return this.eContainer.querySelector('[comp-id="'+a+'"]')},a.prototype.setHeight=function(a){this.eContainer.style.height=a+"px"},a.prototype.flushRowTemplates=function(){if(0!==this.rowTemplatesToAdd.length){var a=this.rowTemplatesToAdd.join("");f.Utils.appendHtml(this.eContainer,a),this.rowTemplatesToAdd.length=0}this.afterGuiAttachedCallbacks.forEach(function(a){return a()}),this.afterGuiAttachedCallbacks.length=0,this.lastPlacedElement=null},a.prototype.appendRowTemplate=function(a,b){this.domOrder?this.lastPlacedElement=f.Utils.insertTemplateWithDomOrder(this.eContainer,a,this.lastPlacedElement):this.rowTemplatesToAdd.push(a),this.afterGuiAttachedCallbacks.push(b),this.childCount++,this.checkVisibility()},a.prototype.ensureDomOrder=function(a){this.domOrder&&(f.Utils.ensureDomOrder(this.eContainer,a,this.lastPlacedElement),this.lastPlacedElement=a)},a.prototype.removeRowElement=function(a){this.eContainer.removeChild(a),this.childCount--,this.checkVisibility()},a.prototype.checkVisibility=function(){if(this.hideWhenNoChildren){var a=this.eViewport?this.eViewport:this.eContainer,b=this.childCount>0;this.visible!==b&&(this.visible=b,f.Utils.setVisible(a,b),b&&this.eViewport&&(this.eViewport.scrollTop=this.scrollTop))}},d([g.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([g.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"postConstruct",null),a}();b.RowContainerComponent=i},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(15),g=c(0),h=c(22),i=c(2),j=c(3),k=c(25),l=function(){function a(a,b){this.eContainer=a,this.gridPanel=b}return a.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelDefault()&&(this.clientSideRowModel=this.rowModel)},a.prototype.getContainer=function(){return this.eContainer},a.prototype.isInterestedIn=function(a){return a===f.DragSourceType.RowDrag},a.prototype.getIconName=function(){return f.DragAndDropService.ICON_MOVE},a.prototype.onDragEnter=function(a){this.dispatchEvent(k.Events.EVENT_ROW_DRAG_ENTER,a),this.dragAndDropService.setGhostIcon(f.DragAndDropService.ICON_MOVE),a.dragItem.rowNode.setDragging(!0),this.onEnterOrDragging(a)},a.prototype.onDragging=function(a){this.onEnterOrDragging(a)},a.prototype.onEnterOrDragging=function(a){this.dispatchEvent(k.Events.EVENT_ROW_DRAG_MOVE,a),this.lastDraggingEvent=a;var b=this.normaliseForScroll(a.y),c=this.gridOptionsWrapper.isRowDragManaged();c&&this.doManagedDrag(a,b),this.checkCenterForScrolling(b)},a.prototype.doManagedDrag=function(a,b){var c=a.dragItem.rowNode,d=this.clientSideRowModel.ensureRowAtPixel(c,b);d&&(this.focusedCellController.clearFocusedCell(),this.rangeController&&this.rangeController.clearSelection())},a.prototype.normaliseForScroll=function(a){var b=!this.gridOptionsWrapper.isGridAutoHeight();if(b){var c=this.gridPanel.getVScrollPosition();return a+c.top}return a},a.prototype.checkCenterForScrolling=function(a){var b=this.gridPanel.getVScrollPosition();this.needToMoveUp=a<b.top+50,this.needToMoveDown=a>b.bottom-50,this.needToMoveUp||this.needToMoveDown?this.ensureIntervalStarted():this.ensureIntervalCleared()},a.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.movingIntervalId=setInterval(this.moveInterval.bind(this),100))},a.prototype.ensureIntervalCleared=function(){this.moveInterval&&(clearInterval(this.movingIntervalId),this.movingIntervalId=null)},a.prototype.moveInterval=function(){var a;this.intervalCount++,a=10+5*this.intervalCount,a>100&&(a=100);var b;this.needToMoveDown?b=this.gridPanel.scrollVertically(a):this.needToMoveUp&&(b=this.gridPanel.scrollVertically(-a)),0!==b&&this.onDragging(this.lastDraggingEvent)},a.prototype.dispatchEvent=function(a,b){var c=this.normaliseForScroll(b.y),d=-1,e=null,g=c>this.rowModel.getCurrentPageHeight();g||(d=this.rowModel.getRowIndexAtPixel(c),e=this.rowModel.getRow(d));var h;switch(b.vDirection){case f.VDirection.Down:h="down";break;case f.VDirection.Up:h="up";break;default:h=null}var i={type:a,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),event:b.event,node:b.dragItem.rowNode,overIndex:d,overNode:e,y:c,vDirection:h};this.eventService.dispatchEvent(i)},a.prototype.onDragLeave=function(a){this.dispatchEvent(k.Events.EVENT_ROW_DRAG_LEAVE,a),this.stopDragging(a)},a.prototype.onDragStop=function(a){this.dispatchEvent(k.Events.EVENT_ROW_DRAG_END,a),this.stopDragging(a)},a.prototype.stopDragging=function(a){this.ensureIntervalCleared(),a.dragItem.rowNode.setDragging(!1)},d([g.Autowired("dragAndDropService"),e("design:type",f.DragAndDropService)],a.prototype,"dragAndDropService",void 0),d([g.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([g.Autowired("focusedCellController"),e("design:type",h.FocusedCellController)],a.prototype,"focusedCellController",void 0),d([g.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([g.Optional("rangeController"),e("design:type",Object)],a.prototype,"rangeController",void 0),d([g.Autowired("eventService"),e("design:type",j.EventService)],a.prototype,"eventService",void 0),d([g.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"postConstruct",null),a}();b.RowDragFeature=l},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(60),h=c(13),i=c(0),j=c(7),k=c(6),l=c(5),m=c(3),n=c(9),o=c(17),p=c(2),q=function(a){function b(b,c){var d=a.call(this)||this;d.cbSelectAllVisible=!1,d.processingEventFromCheckbox=!1,d.cbSelectAll=b,d.column=c;var e=c.getColDef();return d.filteredOnly=!!e&&!!e.headerCheckboxSelectionFilteredOnly,d}return d(b,a),b.prototype.postConstruct=function(){this.showOrHideSelectAll(),this.addDestroyableEventListener(this.eventService,l.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addDestroyableEventListener(this.eventService,l.Events.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addDestroyableEventListener(this.eventService,l.Events.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addDestroyableEventListener(this.cbSelectAll,g.AgCheckbox.EVENT_CHANGED,this.onCbSelectAll.bind(this))},b.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setVisible(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType(),this.updateStateOfCheckbox())},b.prototype.onModelChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},b.prototype.onSelectionChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},b.prototype.getNextCheckboxState=function(a){return(0!==a.selected||0!==a.notSelected)&&(a.selected>0&&a.notSelected>0?null:a.selected>0)},b.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var a=this.getSelectionCount(),b=this.getNextCheckboxState(a);this.cbSelectAll.setSelected(b),this.processingEventFromCheckbox=!1}},b.prototype.getSelectionCount=function(){var a=0,b=0,c=function(c){c.isSelected()?a++:c.selectable&&b++};return this.filteredOnly?this.gridApi.forEachNodeAfterFilter(c):this.gridApi.forEachNode(c),{notSelected:b,selected:a}},b.prototype.checkRightRowModelType=function(){var a=this.rowModel.getType(),b=a===n.Constants.ROW_MODEL_TYPE_CLIENT_SIDE;b||console.log("ag-Grid: selectAllCheckbox is only available if using normal row model, you are using "+a)},b.prototype.onCbSelectAll=function(){if(!this.processingEventFromCheckbox&&this.cbSelectAllVisible){var a=this.cbSelectAll.isSelected();a?this.selectionController.selectAllRowNodes(this.filteredOnly):this.selectionController.deselectAllRowNodes(this.filteredOnly)}},b.prototype.isCheckboxSelection=function(){var a=this.column.getColDef().headerCheckboxSelection;if("function"==typeof a){var b=a;a=b({column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi})}return!!a&&(this.gridOptionsWrapper.isRowModelServerSide()?(console.warn("headerCheckboxSelection is not supported for Server Side Row Model"),!1):this.gridOptionsWrapper.isRowModelInfinite()?(console.warn("headerCheckboxSelection is not supported for Infinite Row Model"),!1):!this.gridOptionsWrapper.isRowModelViewport()||(console.warn("headerCheckboxSelection is not supported for Viewport Row Model"),!1))},e([i.Autowired("gridApi"),f("design:type",k.GridApi)],b.prototype,"gridApi",void 0),e([i.Autowired("columnApi"),f("design:type",j.ColumnApi)],b.prototype,"columnApi",void 0),e([i.Autowired("eventService"),f("design:type",m.EventService)],b.prototype,"eventService",void 0),e([i.Autowired("rowModel"),f("design:type",Object)],b.prototype,"rowModel",void 0),e([i.Autowired("selectionController"),f("design:type",o.SelectionController)],b.prototype,"selectionController",void 0),e([i.Autowired("gridOptionsWrapper"),f("design:type",p.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([i.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b}(h.BeanStub);b.SelectAllFeature=q},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(8),h=c(10),i=c(1),j=c(26),k=c(7),l=c(4),m=c(2),n=c(59),o=c(0),p=c(81),q=c(15),r=c(52),s=c(6),t=c(21),u=c(28),v=c(74),w=function(a){function b(c,d,e){var f=a.call(this,b.TEMPLATE)||this;return f.childColumnsDestroyFuncs=[],f.columnGroup=c,f.dragSourceDropTarget=d,f.pinned=e,f}return d(b,a),b.prototype.postConstruct=function(){p.CssClassApplier.addHeaderClassesFromColDef(this.columnGroup.getColGroupDef(),this.getGui(),this.gridOptionsWrapper,null,this.columnGroup);var a=this.columnController.getDisplayNameForColumnGroup(this.columnGroup,"header");this.appendHeaderGroupComp(a),this.setupResize(),this.addClasses(),this.setupWidth(),this.addAttributes(),this.setupMovingCss(),this.setupTooltip(),this.addFeature(this.context,new v.HoverFeature(this.columnGroup.getOriginalColumnGroup().getLeafColumns(),this.getGui()));var b=new r.SetLeftFeature(this.columnGroup,this.getGui(),this.beans);b.init(),this.addDestroyFunc(b.destroy.bind(b))},b.prototype.setupMovingCss=function(){var a=this,b=this.columnGroup.getOriginalColumnGroup(),c=b.getLeafColumns();c.forEach(function(b){a.addDestroyableEventListener(b,h.Column.EVENT_MOVING_CHANGED,a.onColumnMovingChanged.bind(a))}),this.onColumnMovingChanged()},b.prototype.setupTooltip=function(){var a=this.columnGroup.getColGroupDef();a&&a.headerTooltip&&(this.getGui().title=a.headerTooltip)},b.prototype.onColumnMovingChanged=function(){this.columnGroup.isMoving()?i.Utils.addCssClass(this.getGui(),"ag-header-cell-moving"):i.Utils.removeCssClass(this.getGui(),"ag-header-cell-moving")},b.prototype.addAttributes=function(){this.getGui().setAttribute("col-id",this.columnGroup.getUniqueId())},b.prototype.appendHeaderGroupComp=function(a){var b=this,c={displayName:a,columnGroup:this.columnGroup,setExpanded:function(a){b.columnController.setColumnGroupOpened(b.columnGroup.getOriginalColumnGroup(),a,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};if(!a){var d=this.columnGroup.getLeafColumns();a=d?d[0].getColDef().headerName:""}var e=this.afterHeaderCompCreated.bind(this,a);this.componentRecipes.newHeaderGroupComponent(c).then(e)},b.prototype.afterHeaderCompCreated=function(a,b){this.appendChild(b),this.setupMove(b.getGui(),a),b.destroy&&this.addDestroyFunc(b.destroy.bind(b))},b.prototype.addClasses=function(){this.columnGroup.isPadding()?this.addCssClass("ag-header-group-cell-no-group"):this.addCssClass("ag-header-group-cell-with-group")},b.prototype.setupMove=function(a,b){var c=this;if(a&&!this.isSuppressMoving()){var d=this.columnGroup.getOriginalColumnGroup().getLeafColumns();if(a){var e={type:q.DragSourceType.HeaderCell,eElement:a,dragItemName:b,dragItemCallback:this.getDragItemForGroup.bind(this),dragSourceDropTarget:this.dragSourceDropTarget,dragStarted:function(){return d.forEach(function(a){return a.setMoving(!0,"uiColumnDragged")})},dragStopped:function(){return d.forEach(function(a){return a.setMoving(!1,"uiColumnDragged")})}};this.dragAndDropService.addDragSource(e,!0),this.addDestroyFunc(function(){return c.dragAndDropService.removeDragSource(e)})}}},b.prototype.getDragItemForGroup=function(){var a=this.columnGroup.getOriginalColumnGroup().getLeafColumns(),b={};a.forEach(function(a){return b[a.getId()]=a.isVisible()});var c=[];return this.columnController.getAllDisplayedColumns().forEach(function(b){a.indexOf(b)>=0&&(c.push(b),i.Utils.removeFromArray(a,b))}),a.forEach(function(a){return c.push(a)}),{columns:c,visibleState:b}},b.prototype.isSuppressMoving=function(){var a=!1;this.columnGroup.getLeafColumns().forEach(function(b){
(b.getColDef().suppressMovable||b.isLockPosition())&&(a=!0)});var b=a||this.gridOptionsWrapper.isSuppressMovableColumns();return b},b.prototype.setupWidth=function(){this.addListenersToChildrenColumns(),this.addDestroyableEventListener(this.columnGroup,j.ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.destroyListenersOnChildrenColumns.bind(this))},b.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},b.prototype.addListenersToChildrenColumns=function(){var a=this;this.destroyListenersOnChildrenColumns();var b=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(function(c){c.addEventListener(h.Column.EVENT_WIDTH_CHANGED,b),c.addEventListener(h.Column.EVENT_VISIBLE_CHANGED,b),a.childColumnsDestroyFuncs.push(function(){c.removeEventListener(h.Column.EVENT_WIDTH_CHANGED,b),c.removeEventListener(h.Column.EVENT_VISIBLE_CHANGED,b)})})},b.prototype.destroyListenersOnChildrenColumns=function(){this.childColumnsDestroyFuncs.forEach(function(a){return a()}),this.childColumnsDestroyFuncs=[]},b.prototype.onWidthChanged=function(){this.getGui().style.width=this.columnGroup.getActualWidth()+"px"},b.prototype.setupResize=function(){var a=this;if(this.eHeaderCellResize=this.getRefElement("agResize"),!this.columnGroup.isResizable())return void i.Utils.removeFromParent(this.eHeaderCellResize);var b=this.horizontalResizeService.addResizeBar({eResizeBar:this.eHeaderCellResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(b),this.gridOptionsWrapper.isSuppressAutoSize()||this.eHeaderCellResize.addEventListener("dblclick",function(b){var c=[];a.columnGroup.getDisplayedLeafColumns().forEach(function(a){a.getColDef().suppressAutoSize||c.push(a.getColId())}),c.length>0&&a.columnController.autoSizeColumns(c,"uiColumnResized")})},b.prototype.onResizeStart=function(a){var b=this,c=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=i.Utils.filter(c,function(a){return a.isResizable()}),this.resizeStartWidth=0,this.resizeCols.forEach(function(a){return b.resizeStartWidth+=a.getActualWidth()}),this.resizeRatios=[],this.resizeCols.forEach(function(a){return b.resizeRatios.push(a.getActualWidth()/b.resizeStartWidth)});var d=null;if(a&&(d=this.columnController.getDisplayedGroupAfter(this.columnGroup)),d){var e=d.getDisplayedLeafColumns();this.resizeTakeFromCols=i.Utils.filter(e,function(a){return a.isResizable()}),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach(function(a){return b.resizeTakeFromStartWidth+=a.getActualWidth()}),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach(function(a){return b.resizeTakeFromRatios.push(a.getActualWidth()/b.resizeTakeFromStartWidth)})}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null},b.prototype.onResizing=function(a,b){var c=[],d=this.normaliseDragChange(b);c.push({columns:this.resizeCols,ratios:this.resizeRatios,width:this.resizeStartWidth+d}),this.resizeTakeFromCols&&c.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-d}),this.columnController.resizeColumnSets(c,a,"uiColumnDragged")},b.prototype.normaliseDragChange=function(a){var b=a;return this.gridOptionsWrapper.isEnableRtl()?this.pinned!==h.Column.PINNED_LEFT&&(b*=-1):this.pinned===h.Column.PINNED_RIGHT&&(b*=-1),b},b.TEMPLATE='<div class="ag-header-group-cell"><div ref="agResize" class="ag-header-cell-resize"></div></div>',e([o.Autowired("gridOptionsWrapper"),f("design:type",m.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([o.Autowired("columnController"),f("design:type",l.ColumnController)],b.prototype,"columnController",void 0),e([o.Autowired("horizontalResizeService"),f("design:type",n.HorizontalResizeService)],b.prototype,"horizontalResizeService",void 0),e([o.Autowired("dragAndDropService"),f("design:type",q.DragAndDropService)],b.prototype,"dragAndDropService",void 0),e([o.Autowired("context"),f("design:type",o.Context)],b.prototype,"context",void 0),e([o.Autowired("componentRecipes"),f("design:type",t.ComponentRecipes)],b.prototype,"componentRecipes",void 0),e([o.Autowired("gridApi"),f("design:type",s.GridApi)],b.prototype,"gridApi",void 0),e([o.Autowired("columnApi"),f("design:type",k.ColumnApi)],b.prototype,"columnApi",void 0),e([o.Autowired("beans"),f("design:type",u.Beans)],b.prototype,"beans",void 0),e([o.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b}(g.Component);b.HeaderGroupWrapperComp=w},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DefaultColumnTypes={numericColumn:{headerClass:"ag-numeric-header",cellClass:"ag-numeric-cell"}}},function(a,b,c){"use strict";function d(a){var b=a.module("agGrid",[]);b.directive("agGrid",function(){return{restrict:"A",controller:["$element","$scope","$compile","$attrs",e],scope:!0}})}function e(a,b,c,d){var e,g,h=d.agGrid;if(g=h+".quickFilterText",e=b.$eval(h),!e)return void console.warn("WARNING - grid options for ag-Grid not found. Please ensure the attribute ag-grid points to a valid object on the scope");var i=a[0],j={$scope:b,$compile:c,quickFilterOnScope:g},k=new f.Grid(i,e,j);b.$on("$destroy",function(){k.destroy(),k=null})}Object.defineProperty(b,"__esModule",{value:!0});var f=c(85);b.initialiseAgGridWithAngular1=d},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},g=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var h=c(0),i=c(3),j=c(5),k=c(12),l=c(137),m=c(87),n=c(6),o=c(7),p=function(a){function b(b){return a.call(this,b)||this}return d(b,a),b.prototype.setBeans=function(a){this.logger=a.create("InfiniteCache")},b.prototype.init=function(){a.prototype.init.call(this),this.getRow(0)},b.prototype.moveItemsDown=function(a,b,c){for(var d=a.getStartRow(),e=a.getEndRow(),f=b+c,g=e-1;g>=d;g--)if(!(g<f)){var h=g-c,i=this.getRow(h,!0);i?a.setRowNode(g,i):(a.setBlankRowNode(g),a.setDirty())}},b.prototype.insertItems=function(a,b,c){for(var d=a.getStartRow(),e=a.getEndRow(),f=[],g=0;g<c.length;g++){var h=b+g,i=h>=d&&h<e;if(i){var j=c[g],k=a.setNewData(h,j);f.push(k)}}return f},b.prototype.insertItemsAtIndex=function(a,b){var c=this,d=[];this.forEachBlockInReverseOrder(function(e){var f=e.getEndRow();if(!(f<=a)){c.moveItemsDown(e,a,b.length);var g=c.insertItems(e,a,b);g.forEach(function(a){return d.push(a)})}}),this.isMaxRowFound()&&this.hack_setVirtualRowCount(this.getVirtualRowCount()+b.length),this.onCacheUpdated();var e={type:j.Events.EVENT_ROW_DATA_UPDATED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},b.prototype.getRow=function(a,b){void 0===b&&(b=!1);var c=Math.floor(a/this.cacheParams.blockSize),d=this.getBlock(c);if(!d){if(b)return null;d=this.createBlock(c)}return d.getRow(a)},b.prototype.createBlock=function(a){var b=new l.InfiniteBlock(a,this.cacheParams);return this.context.wireBean(b),this.postCreateBlock(b),b},b.prototype.refreshCache=function(){this.forEachBlockInOrder(function(a){return a.setDirty()}),this.checkBlockToLoad()},e([h.Autowired("eventService"),f("design:type",i.EventService)],b.prototype,"eventService",void 0),e([h.Autowired("context"),f("design:type",h.Context)],b.prototype,"context",void 0),e([h.Autowired("columnApi"),f("design:type",o.ColumnApi)],b.prototype,"columnApi",void 0),e([h.Autowired("gridApi"),f("design:type",n.GridApi)],b.prototype,"gridApi",void 0),e([g(0,h.Qualifier("loggerFactory")),f("design:type",Function),f("design:paramtypes",[k.LoggerFactory]),f("design:returntype",void 0)],b.prototype,"setBeans",null),e([h.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b}(m.RowNodeCache);b.InfiniteCache=p},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(1),h=c(2),i=c(0),j=c(61),k=c(20),l=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.cacheParams=c,d}return d(b,a),b.prototype.createBlankRowNode=function(b){var c=a.prototype.createBlankRowNode.call(this,b);return c.uiLevel=0,this.setIndexAndTopOnRowNode(c,b),c},b.prototype.setDataAndId=function(a,b,c){g.Utils.exists(b)?a.setDataAndId(b,c.toString()):a.setDataAndId(void 0,void 0)},b.prototype.setRowNode=function(b,c){a.prototype.setRowNode.call(this,b,c),this.setIndexAndTopOnRowNode(c,b)},b.prototype.init=function(){a.prototype.init.call(this,{context:this.context,rowRenderer:this.rowRenderer})},b.prototype.getNodeIdPrefix=function(){return null},b.prototype.getRow=function(a){return this.getRowUsingLocalIndex(a)},b.prototype.setIndexAndTopOnRowNode=function(a,b){a.setRowIndex(b),a.rowTop=this.cacheParams.rowHeight*b},b.prototype.loadFromDatasource=function(){var a=this,b={startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this),sortModel:this.cacheParams.sortModel,filterModel:this.cacheParams.filterModel,context:this.gridOptionsWrapper.getContext()};if(g.Utils.missing(this.cacheParams.datasource.getRows))return void console.warn("ag-Grid: datasource is missing getRows method");var c=g.Utils.getFunctionParameters(this.cacheParams.datasource.getRows);c.length>1&&(console.warn("ag-grid: It looks like your paging datasource is of the old type, taking more than one parameter."),console.warn("ag-grid: From ag-grid 1.9.0, now the getRows takes one parameter. See the documentation for details.")),setTimeout(function(){a.cacheParams.datasource.getRows(b)},0)},e([i.Autowired("gridOptionsWrapper"),f("design:type",h.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([i.Autowired("context"),f("design:type",i.Context)],b.prototype,"context",void 0),e([i.Autowired("rowRenderer"),f("design:type",k.RowRenderer)],b.prototype,"rowRenderer",void 0),e([i.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b}(j.RowNodeBlock);b.InfiniteBlock=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(14),g=c(88),h=c(2),i=c(3),j=c(0),k=c(4),l=function(){function a(){}return a.prototype.create=function(a){var b=new f.RowNode,c=new g.ClientSideNodeManager(b,this.gridOptionsWrapper,this.context,this.eventService,this.columnController);return this.context.wireBean(b),c.setRowData(a),b},d([j.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([j.Autowired("eventService"),e("design:type",i.EventService)],a.prototype,"eventService",void 0),d([j.Autowired("context"),e("design:type",j.Context)],a.prototype,"context",void 0),d([j.Autowired("columnController"),e("design:type",k.ColumnController)],a.prototype,"columnController",void 0),a=d([j.Bean("rowNodeFactory")],a)}();b.RowNodeFactory=l},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(0),h=c(2),i=c(89),j=c(20),k=c(3),l=c(9),m=c(13),n=c(5),o=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(){this.rowModel.getType()===l.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel),this.addDestroyableEventListener(this.eventService,n.Events.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},b.prototype.onCellValueChanged=function(a){this.doChangeDetection(a.node,a.column)},b.prototype.doChangeDetection=function(a,b){if(!this.gridOptionsWrapper.isSuppressChangeDetection()){if(this.clientSideRowModel&&!a.isRowPinned()){var c=this.gridOptionsWrapper.isAggregateOnlyChangedColumns(),d=new i.ChangedPath(c);d.addParentNode(a.parent,[b]),this.clientSideRowModel.doAggregate(d)}this.rowRenderer.refreshCells()}},e([g.Autowired("gridOptionsWrapper"),f("design:type",h.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([g.Autowired("rowModel"),f("design:type",Object)],b.prototype,"rowModel",void 0),e([g.Autowired("rowRenderer"),f("design:type",j.RowRenderer)],b.prototype,"rowRenderer",void 0),e([g.Autowired("eventService"),f("design:type",k.EventService)],b.prototype,"eventService",void 0),e([g.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b=e([g.Bean("changeDetectionService")],b)}(m.BeanStub);b.ChangeDetectionService=o},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(8),h=c(0),i=c(2),j=c(11),k=c(1),l=c(3),m=c(5),n=c(20),o=c(29),p=function(a){function b(){return a.call(this)||this}return d(b,a),b.prototype.postConstruct=function(){this.setTemplate(this.getTemplate());var a=this.gridOptionsWrapper.isPagination(),b=a&&!this.gridOptionsWrapper.isSuppressPaginationPanel();return b?(this.addDestroyableEventListener(this.eventService,m.Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addDestroyableEventListener(this.btFirst,"click",this.onBtFirst.bind(this)),this.addDestroyableEventListener(this.btLast,"click",this.onBtLast.bind(this)),this.addDestroyableEventListener(this.btNext,"click",this.onBtNext.bind(this)),this.addDestroyableEventListener(this.btPrevious,"click",this.onBtPrevious.bind(this)),void this.onPaginationChanged()):void this.setVisible(!1)},b.prototype.onPaginationChanged=function(){this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels()},b.prototype.setCurrentPageLabel=function(){var a=this.paginationProxy.getTotalPages()>0,b=this.paginationProxy.getCurrentPage(),c=a?b+1:0;this.lbCurrent.innerHTML=this.formatNumber(c)},b.prototype.formatNumber=function(a){var b=this.gridOptionsWrapper.getPaginationNumberFormatterFunc();return b?b({value:a}):k._.formatNumberCommas(a)},b.prototype.getTemplate=function(){var a=this.gridOptionsWrapper.getLocaleTextFunc(),b=a("page","Page"),c=a("to","to"),d=a("of","of"),e=a("first","First"),f=a("previous","Previous"),g=a("next","Next"),h=a("last","Last");return'<div class="ag-paging-panel ag-font-style">\n                <span ref="eSummaryPanel" class="ag-paging-row-summary-panel">\n                    <span ref="lbFirstRowOnPage"></span> '+c+' <span ref="lbLastRowOnPage"></span> '+d+' <span ref="lbRecordCount"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel">\n                    <button type="button" class="ag-paging-button" ref="btFirst">'+e+'</button>\n                    <button type="button" class="ag-paging-button" ref="btPrevious">'+f+"</button>\n                    "+b+' <span ref="lbCurrent"></span> '+d+' <span ref="lbTotal"></span>\n                    <button type="button" class="ag-paging-button" ref="btNext">'+g+'</button>\n                    <button type="button" class="ag-paging-button" ref="btLast">'+h+"</button>\n                </span>\n            </div>"},b.prototype.onBtNext=function(){this.paginationProxy.goToNextPage()},b.prototype.onBtPrevious=function(){this.paginationProxy.goToPreviousPage()},b.prototype.onBtFirst=function(){this.paginationProxy.goToFirstPage()},b.prototype.onBtLast=function(){this.paginationProxy.goToLastPage()},b.prototype.enableOrDisableButtons=function(){var a=this.paginationProxy.getCurrentPage(),b=this.paginationProxy.isLastPageFound(),c=this.paginationProxy.getTotalPages(),d=0===a;this.btPrevious.disabled=d,this.btFirst.disabled=d;var e=this.isZeroPagesToDisplay(),f=b&&a===c-1,g=f||e;this.btNext.disabled=g;var h=!b||e||a===c-1;this.btLast.disabled=h},b.prototype.updateRowLabels=function(){var a,b,c=this.paginationProxy.getCurrentPage(),d=this.paginationProxy.getPageSize(),e=this.paginationProxy.isLastPageFound(),f=this.paginationProxy.isLastPageFound()?this.paginationProxy.getTotalRowCount():null;this.isZeroPagesToDisplay()?(a=0,b=0):(a=d*c+1,b=a+d-1,e&&b>f&&(b=f)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(a),this.lbLastRowOnPage.innerHTML=this.formatNumber(b)},b.prototype.isZeroPagesToDisplay=function(){var a=this.paginationProxy.isLastPageFound(),b=this.paginationProxy.getTotalPages();return a&&0===b},b.prototype.setTotalLabels=function(){var a=this.paginationProxy.isLastPageFound(),b=this.paginationProxy.getTotalPages(),c=this.paginationProxy.isLastPageFound()?this.paginationProxy.getTotalRowCount():null;if(a)this.lbTotal.innerHTML=this.formatNumber(b),this.lbRecordCount.innerHTML=this.formatNumber(c);else{var d=this.gridOptionsWrapper.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=d,this.lbRecordCount.innerHTML=d}},e([h.Autowired("gridOptionsWrapper"),f("design:type",i.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([h.Autowired("eventService"),f("design:type",l.EventService)],b.prototype,"eventService",void 0),e([h.Autowired("paginationProxy"),f("design:type",o.PaginationProxy)],b.prototype,"paginationProxy",void 0),e([h.Autowired("rowRenderer"),f("design:type",n.RowRenderer)],b.prototype,"rowRenderer",void 0),e([j.RefSelector("btFirst"),f("design:type",HTMLButtonElement)],b.prototype,"btFirst",void 0),e([j.RefSelector("btPrevious"),f("design:type",HTMLButtonElement)],b.prototype,"btPrevious",void 0),e([j.RefSelector("btNext"),f("design:type",HTMLButtonElement)],b.prototype,"btNext",void 0),e([j.RefSelector("btLast"),f("design:type",HTMLButtonElement)],b.prototype,"btLast",void 0),e([j.RefSelector("lbRecordCount"),f("design:type",Object)],b.prototype,"lbRecordCount",void 0),e([j.RefSelector("lbFirstRowOnPage"),f("design:type",Object)],b.prototype,"lbFirstRowOnPage",void 0),e([j.RefSelector("lbLastRowOnPage"),f("design:type",Object)],b.prototype,"lbLastRowOnPage",void 0),e([j.RefSelector("eSummaryPanel"),f("design:type",Object)],b.prototype,"eSummaryPanel",void 0),e([j.RefSelector("lbCurrent"),f("design:type",Object)],b.prototype,"lbCurrent",void 0),e([j.RefSelector("lbTotal"),f("design:type",Object)],b.prototype,"lbTotal",void 0),e([h.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b}(g.Component);b.PaginationComp=p},function(a,b,c){"use strict";function d(){if(console.warn("ag-grid: initialiseAgGridWithWebComponents is deprecated. Please use the ag-grid-webcomponent dependency instead. "),!h){h=!0,"undefined"!=typeof document&&document.registerElement||console.error("ag-Grid: unable to find document.registerElement() function, unable to initialise ag-Grid as a Web Component");var a=Object.create(HTMLElement.prototype);f.ComponentUtil.ALL_PROPERTIES.forEach(function(b){Object.defineProperty(a,b,{set:function(a){this.__agGridSetProperty(b,a)},get:function(){return this.__agGridGetProperty(b)},enumerable:!0,configurable:!0})});var b=a;b.__agGridSetProperty=function(a,b){this.__attributes||(this.__attributes={}),this.__attributes[a]=b;var c={};c[a]={currentValue:b},this.onChange(c)},b.onChange=function(a){this._initialised&&f.ComponentUtil.processOnChange(a,this._gridOptions,this.api,this.columnApi)},b.__agGridGetProperty=function(a){return this.__attributes||(this.__attributes={}),this.__attributes[a]},b.setGridOptions=function(a){var b=this.globalEventListener.bind(this);this._gridOptions=f.ComponentUtil.copyAttributesToGridOptions(a,this);var c={globalEventListener:b};this._agGrid=new g.Grid(this,this._gridOptions,c),this.api=a.api,this.columnApi=a.columnApi,this._initialised=!0},b.createdCallback=function(){for(var a=0;a<this.attributes.length;a++){var b=this.attributes[a];this.setPropertyFromAttribute(b)}},b.setPropertyFromAttribute=function(a){var b=e(a.nodeName),c=a.nodeValue;f.ComponentUtil.ALL_PROPERTIES.indexOf(b)>=0&&(this[b]=c)},b.attachedCallback=function(a){},b.detachedCallback=function(a){},b.attributeChangedCallback=function(a){var b=this.attributes[a];this.setPropertyFromAttribute(b)},b.globalEventListener=function(a,b){var c=a.toLowerCase(),d=new Event(c),e=d;e.agGridDetails=b,this.dispatchEvent(d);var f="on"+c;"function"==typeof this[f]&&this[f](d)},document.registerElement("ag-grid",{prototype:a})}}function e(a){if("string"==typeof a){var b=a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()});return b}return a}Object.defineProperty(b,"__esModule",{value:!0});var f=c(62),g=c(85),h=!1;b.initialiseAgGridWithWebComponents=d},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(1),e=function(){function a(b){var c=this;this.items=[],this.params=b,this.eGui=document.createElement("div"),this.eGui.innerHTML=a.TEMPLATE,this.eHeader=this.eGui.querySelector('[ref="tabHeader"]'),this.eBody=this.eGui.querySelector('[ref="tabBody"]'),d.Utils.addCssClass(this.eGui,b.cssClass),b.items&&b.items.forEach(function(a){return c.addItem(a)})}return a.prototype.setAfterAttachedParams=function(a){this.afterAttachedParams=a},a.prototype.getMinWidth=function(){var a=document.createElement("span");a.style.position="fixed",this.eGui.appendChild(a);var b=0;return this.items.forEach(function(c){d.Utils.removeAllChildren(a);var e=c.tabbedItem.bodyPromise.resolveNow(null,function(a){return a.cloneNode(!0)});null!=e&&(a.appendChild(e),b<a.offsetWidth&&(b=a.offsetWidth))}),this.eGui.removeChild(a),b},a.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},a.prototype.addItem=function(a){var b=document.createElement("span");b.appendChild(a.title),d.Utils.addCssClass(b,"ag-tab"),this.eHeader.appendChild(b);var c={tabbedItem:a,eHeaderButton:b};this.items.push(c),b.addEventListener("click",this.showItemWrapper.bind(this,c))},a.prototype.showItem=function(a){var b=d.Utils.find(this.items,function(b){return b.tabbedItem===a});b&&this.showItemWrapper(b)},a.prototype.showItemWrapper=function(a){var b=this;return this.params.onItemClicked&&this.params.onItemClicked({item:a.tabbedItem}),this.activeItem===a?void d.Utils.callIfPresent(this.params.onActiveItemClicked):(d.Utils.removeAllChildren(this.eBody),a.tabbedItem.bodyPromise.then(function(a){b.eBody.appendChild(a)}),this.activeItem&&d.Utils.removeCssClass(this.activeItem.eHeaderButton,"ag-tab-selected"),d.Utils.addCssClass(a.eHeaderButton,"ag-tab-selected"),this.activeItem=a,void(a.tabbedItem.afterAttachedCallback&&a.tabbedItem.afterAttachedCallback(this.afterAttachedParams)))},a.prototype.getGui=function(){return this.eGui},a.TEMPLATE='<div><div ref="tabHeader" class="ag-tab-header"></div><div ref="tabBody" class="ag-tab-body"></div></div>',a}();b.TabbedLayout=e},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(){this.isLayoutPanel=!0,this.childPanels=[],this.eGui=document.createElement("div"),this.eGui.style.height="100%"}return a.prototype.addPanel=function(a,b){var c;a.isLayoutPanel?(this.childPanels.push(a),c=a.getGui()):c=a,b&&(c.style.height=b),this.eGui.appendChild(c)},a.prototype.getGui=function(){return this.eGui},a.prototype.doLayout=function(){for(var a=0;a<this.childPanels.length;a++)this.childPanels[a].doLayout()},a}();b.VerticalStack=d},function(a,b,c){"use strict";function d(a){return new e.Promise(function(b){var c=new XMLHttpRequest;c.open("GET",a.url),c.send(),c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){var a=JSON.parse(c.responseText);b(a)}}})}Object.defineProperty(b,"__esModule",{value:!0});var e=c(1);b.simpleHttpRequest=d},function(a,b,c){"use strict";function d(a,b,c,d,f){void 0===f&&(f=!1),console.warn("ag-Grid: Since ag-grid 11.0.0 defaultGroupComparator is not necessary. You can remove this from your colDef");var g=e.Utils.exists(c)&&c.group,h=e.Utils.exists(d)&&d.group,i=g&&h,j=!g&&!h;return i?e.Utils.defaultComparator(c.key,d.key,f):j?e.Utils.defaultComparator(a,b,f):g?1:-1}Object.defineProperty(b,"__esModule",{value:!0});var e=c(1);b.defaultGroupComparator=d},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(){}return a.prototype.wrap=function(a,b,c,d){var e=this,f=this.createWrapper(a,d);return b.forEach(function(a){e.createMethod(f,a,!0)}),c&&c.forEach(function(a){e.createMethod(f,a,!1)}),f},a.prototype.createMethod=function(a,b,c){a.addMethod(b,this.createMethodProxy(a,b,c))},a.prototype.createMethodProxy=function(a,b,c){return function(){return a.hasMethod(b)?a.callMethod(b,arguments):(c&&console.warn("ag-Grid: Framework component is missing the method "+b+"()"),null)}},a}();b.BaseComponentWrapper=d}])}),function(){var a=function(b){var c={};return _.each(b,function(b,d){_.isPlainObject(b)?_.each(a(b),function(a,b){c[d+"."+b]=a}):c[d]=b}),c};$.i18n.load(a(window.I18n)),window.t=function(){return $.i18n._.apply($.i18n,Array.prototype.slice.call(arguments))}}(),AGN=window.AGN||(window.AGN={}),AGN.Initializers=window.AGN.Initializers||(window.AGN.Initializers={}),AGN.Lib=window.AGN.Lib||(window.AGN.Lib={}),AGN.Lib.WM=window.AGN.Lib.WM||(window.AGN.Lib.WM={}),AGN.Opt=window.AGN.Opt||(window.AGN.Opt={}),AGN.Opt.Fields=window.AGN.Opt.Fields||(window.AGN.Opt.Fields={}),AGN.Opt.Forms=window.AGN.Opt.Forms||(window.AGN.Opt.Forms={}),AGN.Opt.Controllers=window.AGN.Opt.Controllers||(window.AGN.Opt.Controllers={}),AGN.Opt.Templates=window.AGN.Opt.Templates||(window.AGN.Opt.Templates={}),AGN.Opt.TableCellRenderers=window.AGN.Opt.TableCellRenderers||(window.AGN.Opt.TableCellRenderers={}),AGN.Opt.Charts=window.AGN.Opt.Charts||(window.AGN.Opt.Charts={}),AGN.Opt.Validators=window.AGN.Opt.Validators||(window.AGN.Opt.Validators={}),AGN.url=function(a,b){return window.agnResolveRelativeUrl?(a&&"/"===a.charAt(0)&&(a=a.substring(1)),window.agnResolveRelativeUrl(a,b)):(console.error("window.agnResolveRelativeUrl is not defined"),a)},AGN.runAll=function(a){$.each(AGN.Initializers,function(b,c){c.call(c,a)}),AGN.Lib.DomInitializer.autorun(a)},function(){ace.config.set("basePath",AGN.url("assets/js/vendor/ace_20.12.14")),ace.config.setDefaultValue("session","useWorker",!1)}(),function(){var a=ace.require("ace/snippets").snippetManager;ace.require("ace/config");ace.config.loadModule("ace/snippets/html",function(b){b&&a.files&&(a.files.html=b,b.snippets=a.parseSnippetFile(b.snippetText),b.snippets.push({content:'[agnALTER column="${1}"]',name:"agn:ALTER",tabTrigger:"alt"},{content:'[agnBANNER banner="${1}" banner="${2}"]',name:"agn:BANNER",tabTrigger:"bnr"},{content:'[agnCALC column="${1}" op="${2}" value="${3}"]',name:"agn:CALC",tabTrigger:"clc"},{content:'[agnCUSTOMDATE offset="${1}" format="${2}"]',name:"agn:CUSTOMDATE",tabTrigger:"cusd"},{content:'[agnCUSTOMDATE_DE offset="${1}" format="${2}"]',name:"agn:CUSTOMDATE_DE",tabTrigger:"cust"},{content:"[agnCUSTOMERID]",name:"agn:CUSTOMERID",tabTrigger:"cst"},{content:"[agnDATE]",name:"agn:DATE",tabTrigger:"dte"},{content:'[agnDATEDB column="${1}" format="${2}"]',name:"agn:DATEDB",tabTrigger:"datb"},{content:'[agnDATEDB_DE column="${1}" format="${2}"]',name:"agn:DATEDB_DE",tabTrigger:"dadb"},{content:'[agnDAYS_UNTIL column="${1}"]',name:"agn:DAYS_UNTIL",tabTrigger:"daunt"},{content:'[agnDAYS_UNTILL column="${1}"]',name:"agn:DAYS_UNTILL",tabTrigger:"duti"},{content:'[agnDB column="${1}"]',name:"agn:DB",tabTrigger:"db"},{content:"[agnDBV]",name:"agn:DBV",tabTrigger:"dbv"},{content:"[agnEMAIL]",name:"agn:EMAIL",tabTrigger:"ema"},{content:'[agnFORM name="${1}"]',name:"agn:FORM",tabTrigger:"form"},{content:'[agnIMAGE name="${1}"]',name:"agn:IMAGE",tabTrigger:"img"},{content:'[agnIMGLINK name="${1}"]',name:"agn:IMGLINK",tabTrigger:"imgli"},{content:"[agnNULL]",name:"agn:NULL",tabTrigger:"nul"},{content:"[agnPROFILE]",name:"agn:PROFILE",tabTrigger:"prof"},{content:"[agnSUBSCRIBERCOUNT]",name:"agn:SUBSCRIBERCOUNT",tabTrigger:"subs"},{content:'[agnSWYN networks="${1}" title="${2}"]',name:"agn:SWYN",tabTrigger:"swy"},{content:'[agnTITLE type="${1:2}"]',name:"agn:TITLE",tabTrigger:"ti"},{content:'[agnTITLEFIRST type="${1:2}"]',name:"agn:TITLEFIRST",tabTrigger:"tifr"},{content:'[agnTITLEFULL type="${1:2}"]',name:"agn:TITLEFULL",tabTrigger:"tifu"},{content:'[agnTITLE_SHORT type="${1:2}"]',name:"agn:TITLE_SHORT",tabTrigger:"tish"},{content:"[agnUNSUBSCRIBE]",name:"agn:UNSUBSCRIBE",tabTrigger:"unsub"},{content:'[agnDYN name="${1}"/]',name:"agn:DYN",tabTrigger:"dyn"},{content:"BIRTHDAY",
name:"birthday",tabTrigger:"h"},{content:"CREATION_DATE",name:"creation_date",tabTrigger:"h"},{content:"CUSTOMER_ID",name:"customer_id",tabTrigger:"h"},{content:"DATASOURCE_ID",name:"datasource_id",tabTrigger:"h"},{content:"EMAIL",name:"email",tabTrigger:"h"},{content:"FACEBOOK_STATUS",name:"facebook_status",tabTrigger:"h"},{content:"FIRSTNAME",name:"firstname",tabTrigger:"h"},{content:"FOURSQUARE_STATUS",name:"foursquare_status",tabTrigger:"h"},{content:"GENDER",name:"gender",tabTrigger:"h"},{content:"GOOGLE_STATUS",name:"google_status",tabTrigger:"h"},{content:"LASTNAME",name:"lastname",tabTrigger:"h"},{content:"MAILTYPE",name:"mailtype",tabTrigger:"h"},{content:"ML_FEHLDATEN",name:"ml_fehldaten",tabTrigger:"h"},{content:"TIMESTAMP",name:"timestamp",tabTrigger:"h"},{content:"TITLE",name:"title",tabTrigger:"h"},{content:"TWITTER_STATUS",name:"twitter_status",tabTrigger:"h"},{content:"XING_STATUS",name:"xing_status",tabTrigger:"h"},{content:"HTML-Version",name:"html-version",tabTrigger:"h"},{content:"Text",name:"text",tabTrigger:"h"}),a.register(b.snippets,b.scope))})}(),function(){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(a){"use strict";if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;f<d;f++)if(b=c[f],a.call(e,b,f,c))return b}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(a){"use strict";if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;f<d;f++)if(b=c[f],a.call(e,b,f,c))return f;return-1},enumerable:!1,configurable:!1,writable:!1})}(),function(){var a=$.ui.dialog.prototype._allowInteraction;$.ui.dialog.prototype._allowInteraction=function(b){var c=$(b.target);return!(!c.closest(".cke_dialog").length&&!c.closest(".cke_panel_frame").length)||a.apply(this,arguments)}}(),Function.prototype.bind&&window.console&&"object"==typeof console.log&&["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(a){console[a]=this.bind(console[a],console)},Function.prototype.call),function(a,b){"object"==typeof exports?module.exports=b(a):"function"==typeof define&&define.amd?define([],b.bind(a,a)):b(a)}("undefined"!=typeof global?global:this,function(a){if(a.CSS&&a.CSS.escape)return a.CSS.escape;var b=function(a){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var b,c=String(a),d=c.length,e=-1,f="",g=c.charCodeAt(0);++e<d;)b=c.charCodeAt(e),f+=0!=b?b>=1&&b<=31||127==b||0==e&&b>=48&&b<=57||1==e&&b>=48&&b<=57&&45==g?"\\"+b.toString(16)+" ":(0!=e||1!=d||45!=b)&&(b>=128||45==b||95==b||b>=48&&b<=57||b>=65&&b<=90||b>=97&&b<=122)?c.charAt(e):"\\"+c.charAt(e):"ÔøΩ";return f};return a.CSS||(a.CSS={}),a.CSS.escape=b,b}),function(a){a.fn.modal.Constructor.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(b){setTimeout(a.proxy(function(){27==b.which&&this.hide()},this),100)},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")}}(jQuery),function(a){a.fn.all?console.error("$.fn.all is already defined"):a.fn.extend({all:function(a){return this.filter(a).add(this.find(a))}}),a.fn.exists?console.error("$.fn.exists is already defined"):a.fn.extend({exists:function(){return this.length>0}}),a.fn.json?console.error("$.fn.json is already defined"):a.fn.extend({json:function(){return JSON.parse(this.html())}})}(jQuery),function(a){a.fn.extend({ensureLoad:function(b){return this.each(function(){this.complete?b.call(this):a(this).load(b)})}})}(jQuery),$.extend(!0,$.inputmask.defaults.aliases,{datetime:{regex:{quartspre:new RegExp("0|1|3|4"),quartspost:new RegExp("00|15|30|45"),halfspre:new RegExp("0|3"),halfspost:new RegExp("00|30")},definitions:{q:{validator:function(a,b,c,d,e){var f=e.regex.quartspost.test(a);return!(!d&&!f)||(e.regex.quartspost.test(a[0]+"5")?{c:"5"}:{c:"0"})},cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){var f=e.regex.quartspre.test(a);if(f=!1,!d&&!f){for(var g,h,i=parseInt(a+"0"),j=["00","15","30","45"],k=100,l=0;l<j.length;l++){var m=j[l];parsedNum=parseInt(m),Math.abs(parsedNum-i)<k&&(k=Math.abs(parsedNum-i),g=m)}return h={caret:c+2,insert:[{pos:c,c:g[0]},{pos:c+1,c:g[1]}]}}return!0},cardinality:1}]},u:{validator:function(a,b,c,d,e){var f=e.regex.halfspost.test(a);return!(!d&&!f)||{c:"0"}},cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){var f=e.regex.halfspre.test(a);if(f=!1,!d&&!f){for(var g,h,i=parseInt(a+"0"),j=["00","30"],k=100,l=0;l<j.length;l++){var m=j[l];parsedNum=parseInt(m),Math.abs(parsedNum-i)<k&&(k=Math.abs(parsedNum-i),g=m)}return h={caret:c+2,insert:[{pos:c,c:g[0]},{pos:c+1,c:g[1]}]}}return!0},cardinality:1}]}}},"h:quarts t":{mask:"h:q t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:quarts":{mask:"h:q",placeholder:"hh:mm",alias:"datetime",hourFormat:"24"},"h:halfs t":{mask:"h:u t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:halfs":{mask:"h:u",placeholder:"hh:mm",alias:"datetime",hourFormat:"24"},"h:00 t":{mask:"h:00 t\\m",placeholder:"hh:00 xm",alias:"datetime",hourFormat:"12"},"h:00":{mask:"h:00",placeholder:"hh:00",alias:"datetime",hourFormat:"24"}}),$.fn.serializeObject=function(){var a={};return $.each(this.serializeArray(),function(){a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""}),a},$.fn.serializeFormDataObject=function(){var a=this.serializeObject();return this.find("input[type=file]").each(function(){if(!$(this).is(":disabled")){var b=this.files;if(0==b.length&&(b=[new File([],"",{type:"application/octet-stream"})]),a[this.name]){var c=a[this.name];$.isArray(c)?a[this.name]=c.concat(b):a[this.name]=[c].concat(b)}else b.length>1?a[this.name]=b:a[this.name]=b[0]}}),a},function(a){a.fn.style?console.error("$.fn.style is already defined"):a.fn.extend({style:function(b,c,d){return void 0===c?this.css(b):void(a.isFunction(c)?this.each(function(){if(this.style){var a=c.call(this,this.style.getPropertyValue(b));this.style.setProperty(b,a,d)}}):this.each(function(){this.style&&this.style.setProperty(b,c,d)}))}})}(jQuery),function(a){String.prototype.trim&&(a.trim=function(a){return null==a?"":(a+"").trim()})}(jQuery),$.widget("ui.dialog",$.extend({},$.ui.dialog.prototype,{_title:function(a){this.options.title||a.html("&#160;"),a.html(this.options.title)}})),_.templateSettings={evaluate:/\{\{(.+?)\}\}/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{-(.+?)\}\}/g},jQuery.extend(jQuery.fn.pickadate.defaults,{monthsFull:t("date.monthsFull"),monthsShort:t("date.monthsShort"),weekdaysFull:t("date.weekdaysFull"),weekdaysShort:t("date.weekdaysShort"),labelMonthNext:t("date.nextMonth"),labelMonthPrev:t("date.prevMonth"),labelMonthSelect:t("date.selectMonth"),labelYearSelect:t("date.selectYear"),today:t("defaults.today"),clear:t("defaults.delete"),close:t("defaults.close"),firstDay:t("date.firstDayOfWeek"),format:t("date.format"),hiddenName:!0}),jQuery.extend(jQuery.fn.pickatime.defaults,{clear:t("defaults.delete"),format:t("time.format"),hiddenName:!0}),window.onpopstate=function(){window.location.reload()},jQuery.extend($.fn.select2.defaults,{formatNoMatches:function(a){return t("selects.noMatches",a)},formatInputTooShort:function(a,b){return t("selects.errors.inputTooShort",b)},formatInputTooLong:function(a,b){return t("selects.errors.inputTooLong",b)},formatSelectionTooBig:function(a){return t("selects.errors.selectionTooBig",a)},formatLoadMore:function(a){return t("selects.loadMore")},formatSearching:function(){return t("selects.loadMore")},formatAjaxError:function(){return t("selects.errors.ajax")},formatMatches:function(a){return a>1?t("selects.matches",a):t("selects.matchesSing",a)}}),function(){String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return this.substr(!b||b<0?0:+b,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,b){return(void 0===b||b>this.length)&&(b=this.length),this.substring(b-a.length,b)===a})}(),!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.svg4everybody=b()}):"object"==typeof exports?module.exports=b():a.svg4everybody=b()}(this,function(){function a(a,b){if(b){var c=!a.getAttribute("viewBox")&&b.getAttribute("viewBox"),d=document.createDocumentFragment(),e=b.cloneNode(!0);for(c&&a.setAttribute("viewBox",c);e.childNodes.length;)d.appendChild(e.firstChild);a.appendChild(d)}}function b(b){b.onreadystatechange=function(){if(4===b.readyState){var c=document.createElement("x");c.innerHTML=b.responseText,b.s.splice(0).map(function(b){a(b[0],c.querySelector("#"+b[1].replace(/(\W)/g,"\\$1")))})}},b.onreadystatechange()}function c(c){function d(){for(var c;c=e[0];){var j=c.parentNode;if(j&&/svg/i.test(j.nodeName)){var k=c.getAttribute("xlink:href");if(f&&(!g||g(k,j,c))){var l=k.split("#"),m=l[0],n=l[1];if(j.removeChild(c),m.length){var o=i[m]=i[m]||new XMLHttpRequest;o.s||(o.s=[],o.open("GET",m),o.send()),o.s.push([j,n]),b(o)}else a(j,document.getElementById(n))}}}h(d,17)}c=c||{};var e=document.getElementsByTagName("use"),f="polyfill"in c?c.polyfill:/\bEdge\/12\b|\bTrident\/[567]\b|\bVersion\/7.0 Safari\b/.test(navigator.userAgent)||(navigator.userAgent.match(/AppleWebKit\/(\d+)/)||[])[1]<537,g=c.validate,h=window.requestAnimationFrame||setTimeout,i={};f&&d()}return c}),AGN.Opt.Templates.modal='<div class="modal">   <div class="modal-dialog {{= modalClass }}">     <div class="modal-content">       <div class="modal-header">         <button type="button" class="close-icon close" data-dismiss="modal">           <i aria-hidden="true" class="icon icon-times-circle"></i>         </button>         <h4 class="modal-title">{{= title }}</h4>       </div>       <div class="modal-body">         {{= content }}       </div>     </div>   </div> </div>',AGN.Opt.Templates["modal-yes-no-cancel"]='<div class="modal">   <div class="modal-dialog {{= modalClass }}">     <div class="modal-content">       <div class="modal-header">         <button type="button" class="close-icon close" data-dismiss="modal">           <i aria-hidden="true" class="icon icon-times-circle"></i>         </button>         <h4 class="modal-title">{{= title }}</h4>       </div>       <div class="modal-body">         {{= content }}       </div>       <div class="modal-footer">         <div class="btn-group">           <button type="button" class="btn btn-default btn-large pull-left" data-confirm-negative="cancel" data-dismiss="modal">             <i class="icon icon-times"></i>             <span class="text">{{= t(\'defaults.cancel\') }}</span>           </button>           <button type="button" class="btn btn-default btn-large" data-confirm-negative="no" data-dismiss="modal">             <i class="icon icon-times"></i>             <span class="text">{{= t(\'defaults.no\') }}</span>           </button>           <button type="button" class="btn btn-primary btn-large" data-confirm-positive="yes" data-dismiss="modal">             <i class="icon icon-check"></i>             <span class="text">{{= t(\'defaults.yes\') }}</span>           </button>         </div>       </div>     </div>   </div> </div>',AGN.Opt.Templates.error='<div class="backdrop backdrop-error js-close-error" style="position: fixed; top: 0; left: 0; bottom: 0; right:0; z-index: 1100; background-color: rgba(0,0,0,0.5)">     <div class="notification notification-alert" style="position: fixed; top: 50%; left: 50%; width: 420px; margin: -80px 0 0 -210px; z-index: 1101;">         <div class="notification-header">             <p class="headline">                 <i class="icon icon-state-alert"></i>                 <span class="text">{{= headline }}</span>                 <i class="icon icon-times-circle close-icon js-close-error"></i>             </p>         </div>         <div class="notification-content">             <p>{{= text }}</p>             <button type="button" class="btn btn-regular btn-primary vspace-top-10" onclick="location.reload();">                 <i class="icon icon-repeat"></i>                 <span class="text">{{= reload }}</span>             </button>         </div>     </div> </div>',AGN.Opt.Templates["permission-denied"]='<div class="backdrop backdrop-error js-close-error" style="position: fixed; top: 0; left: 0; bottom: 0; right:0; z-index: 1100; background-color: rgba(0,0,0,0.5)">     <div class="notification notification-alert" style="position: fixed; top: 50%; left: 50%; width: 420px; margin: -80px 0 0 -210px; z-index: 1101;">         <div class="notification-header">             <p class="headline">                 <i class="icon icon-state-alert"></i>                 <span class="text">{{= title }}</span>                 <i class="icon icon-times-circle close-icon js-close-error"></i>             </p>         </div>         <div class="notification-content">             <p>{{= text }}</p>             <button type="button" class="btn btn-regular btn-primary vspace-top-10 vspace-bottom-10 js-close-error" style="float: right">                 <i class="icon icon-check"></i>                 <span class="text">{{= btn }}</span>             </button>         </div>     </div> </div>',AGN.Opt.Templates["autosave-restore"]='<div class="modal">   <div class="modal-dialog {{= modalClass }}">     <div class="modal-content">       <div class="modal-header">         <button type="button" class="close-icon close" data-dismiss="modal">           <i aria-hidden="true" class="icon icon-times-circle"></i>         </button>         <h4 class="modal-title">{{= title }}</h4>       </div>       <div class="modal-body">         {{= content }}       </div>       <div class="modal-footer">         <div class="btn-group">           <button type="button" class="btn btn-default btn-large js-confirm-negative" data-dismiss="modal">             <i class="icon icon-times"></i>             <span class="text">{{= negative }}</span>           </button>           <button type="button" class="btn btn-primary btn-large js-confirm-positive" data-dismiss="modal">             <i class="icon icon-check"></i>             <span class="text">{{= positive }}</span>           </button>         </div>       </div>     </div>   </div> </div>',AGN.Opt.Templates["tooltip-template"]='<div class="tooltip {{= tooltipStyle }}" role="tooltip">   <div class="tooltip-arrow {{= arrowStyle }}"></div>   <div class="tooltip-inner {{= innerStyle }}"></div> </div>',AGN.Opt.Templates["tooltip-message-with-title"]='<div class="helper-popup-header">{{= title }}</div> <div class="helper-popup-content">{{= content }}</div>',AGN.Opt.Templates["tooltip-message-just-content"]='<div class="helper-popup-content">{{= content }}</div>',AGN.Opt.Templates["table-controls-top"]='<div class="table-controls clearfix">   <div class="table-control pull-left">     <div class="well">{{= t(\'tables.range\', itemStart, itemEnd, itemTotal) }}</div>   </div>   <div class="table-control pull-left" id="filtersDescription"></div>   {{ if (pagination) { }}   <div class="table-control pull-right">     <ul class="pagination">       <li class="js-data-table-first-page {{= currentPage == 1 ? \'disabled\' : \'\'¬†}}">         <span><i class="icon icon-angle-double-left"></i> {{= t(\'tables.first\') }}</span>       </li>       <li class="js-data-table-prev-page {{= currentPage == 1 ? \'disabled\' : \'\'¬†}}">         <span><i class="icon icon-angle-left"></i> {{= t(\'tables.previous\') }}</span>       </li>       {{ _.each(pageSelects, function(page) { }}       <li class="{{=¬†page == currentPage ? \'active\' : \'js-data-table-page\' }}" data-page="{{= page - 1 }}">         <span>{{= page }}</span>       </li>       {{ }) }}       <li class="js-data-table-next-page {{= currentPage == totalPages ? \'disabled\' : \'\'¬†}}">         <span>{{= t(\'tables.next\') }} <i class="icon icon-angle-right"></i></span>       </li>       <li class="js-data-table-last-page {{= currentPage == totalPages ? \'disabled\' : \'\'¬†}}">         <span>{{= t(\'tables.last\') }} <i class="icon icon-angle-double-right"></i></span>       </li>     </ul>   </div>   {{ } }}  </div>',AGN.Opt.Templates["table-controls-bottom"]="<div class=\"table-controls clearfix\">   <div class=\"table-control pull-left\">     <div class=\"well\">{{= t('tables.range', itemStart, itemEnd, itemTotal) }}</div>   </div>   {{ if (pagination) { }}   <div class=\"table-control pull-right\">     <ul class=\"pagination\">       <li class=\"js-data-table-first-page {{= currentPage == 1 ? 'disabled' : ''¬†}}\">         <span><i class=\"icon icon-angle-double-left\"></i> {{= t('tables.first') }}</span>       </li>       <li class=\"js-data-table-prev-page {{= currentPage == 1 ? 'disabled' : ''¬†}}\">         <span><i class=\"icon icon-angle-left\"></i> {{= t('tables.previous') }}</span>       </li>       {{ _.each(pageSelects, function(page) { }}        <li class=\"{{=¬†page == currentPage ? 'active' : 'js-data-table-page' }}\" data-page=\"{{= page - 1 }}\">         <span>{{= page }}</span>       </li>       {{ }) }}       <li class=\"js-data-table-next-page {{= currentPage == totalPages ? 'disabled' : ''¬†}}\">         <span>{{= t('tables.next') }} <i class=\"icon icon-angle-right\"></i></span>       </li>       <li class=\"js-data-table-last-page {{= currentPage == totalPages ? 'disabled' : ''¬†}}\">         <span>{{= t('tables.last') }} <i class=\"icon icon-angle-double-right\"></i></span>       </li>     </ul>   </div>   {{ } }} </div>",function(){window.agnTimeZoneId&&moment.tz.setDefault(window.agnTimeZoneId)}(),function(a,b){"function"==typeof define&&define.amd?define(["jquery","dot/doT","jquery-extendext"],b):"object"==typeof module&&module.exports?module.exports=b(require("jquery"),require("dot/doT"),require("jquery-extendext")):b(a.jQuery,a.doT)}(this,function(a,b){"use strict";function c(){this.root=null,this.$=a(this)}function d(a,b,c){var d,e,g=f.selectors;d=b.closest(g.rule_container),d.length&&(e="moveAfter"),e||(d=b.closest(g.group_header),d.length&&(d=b.closest(g.group_container),e="moveAtBegin")),e||(d=b.closest(g.group_container),d.length&&(e="moveAtEnd")),e&&(a[e](c.getModel(d)),c&&a instanceof j&&c.setRuleInputValue(a,a.value))}function e(a){var b=a.match(/(question_mark|numbered|named)(?:\((.)\))?/);return b||(b=[null,"question_mark",void 0]),b}var f=function(d,e){d[0].queryBuilder=this,this.$el=d,this.settings=a.extendext(!0,"replace",{},f.DEFAULTS,e),this.model=new c,this.status={id:null,generated_id:!1,group_id:0,rule_id:0,has_optgroup:!1,has_operator_optgroup:!1},this.filters=this.settings.filters,this.icons=this.settings.icons,this.operators=this.settings.operators,this.templates=this.settings.templates,this.plugins=this.settings.plugins,this.lang=null,void 0===f.regional.en&&g.error("Config",'"i18n/en.js" not loaded.'),this.lang=a.extendext(!0,"replace",{},f.regional.en,f.regional[this.settings.lang_code],this.settings.lang),this.settings.allow_groups===!1?this.settings.allow_groups=0:this.settings.allow_groups===!0&&(this.settings.allow_groups=-1),Object.keys(this.templates).forEach(function(a){this.templates[a]||(this.templates[a]=f.templates[a]),"string"==typeof this.templates[a]&&(this.templates[a]=b.template(this.templates[a]))},this),this.$el.attr("id")||(this.$el.attr("id","qb_"+Math.floor(99999*Math.random())),this.status.generated_id=!0),this.status.id=this.$el.attr("id"),this.$el.addClass("query-builder form-inline"),this.filters=this.checkFilters(this.filters),this.operators=this.checkOperators(this.operators),this.bindEvents(),this.initPlugins()};a.extend(f.prototype,{trigger:function(b){var c=new a.Event(this._tojQueryEvent(b),{builder:this});return this.$el.triggerHandler(c,Array.prototype.slice.call(arguments,1)),c},change:function(b,c){var d=new a.Event(this._tojQueryEvent(b,!0),{builder:this,value:c});return this.$el.triggerHandler(d,Array.prototype.slice.call(arguments,2)),d.value},on:function(a,b){return this.$el.on(this._tojQueryEvent(a),b),this},off:function(a,b){return this.$el.off(this._tojQueryEvent(a),b),this},once:function(a,b){return this.$el.one(this._tojQueryEvent(a),b),this},_tojQueryEvent:function(a,b){return a.split(" ").map(function(a){return a+".queryBuilder"+(b?".filter":"")}).join(" ")}}),f.types={string:"string",integer:"number",double:"number",date:"datetime",time:"datetime",datetime:"datetime",boolean:"boolean"},f.inputs=["text","number","textarea","radio","checkbox","select"],f.modifiable_options=["display_errors","allow_groups","allow_empty","default_condition","default_filter"],f.selectors={group_container:".rules-group-container",rule_container:".rule-container",filter_container:".rule-filter-container",operator_container:".rule-operator-container",value_container:".rule-value-container",error_container:".error-container",condition_container:".rules-group-header .group-conditions",rule_header:".rule-header",group_header:".rules-group-header",group_actions:".group-actions",rule_actions:".rule-actions",rules_list:".rules-group-body>.rules-list",group_condition:".rules-group-header [name$=_cond]",rule_filter:".rule-filter-container [name$=_filter]",rule_operator:".rule-operator-container [name$=_operator]",rule_value:".rule-value-container [name*=_value_]",add_rule:"[data-add=rule]",delete_rule:"[data-delete=rule]",add_group:"[data-add=group]",delete_group:"[data-delete=group]"},f.templates={},f.regional={},f.OPERATORS={equal:{type:"equal",nb_inputs:1,multiple:!1,apply_to:["string","number","datetime","boolean"]},not_equal:{type:"not_equal",nb_inputs:1,multiple:!1,apply_to:["string","number","datetime","boolean"]},in:{type:"in",nb_inputs:1,multiple:!0,apply_to:["string","number","datetime"]},not_in:{type:"not_in",nb_inputs:1,multiple:!0,apply_to:["string","number","datetime"]},less:{type:"less",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},less_or_equal:{type:"less_or_equal",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},greater:{type:"greater",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},greater_or_equal:{type:"greater_or_equal",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},between:{type:"between",nb_inputs:2,multiple:!1,apply_to:["number","datetime"]},not_between:{type:"not_between",nb_inputs:2,multiple:!1,apply_to:["number","datetime"]},begins_with:{type:"begins_with",nb_inputs:1,multiple:!1,apply_to:["string"]},not_begins_with:{type:"not_begins_with",nb_inputs:1,multiple:!1,apply_to:["string"]},contains:{type:"contains",nb_inputs:1,multiple:!1,apply_to:["string"]},not_contains:{type:"not_contains",nb_inputs:1,multiple:!1,apply_to:["string"]},ends_with:{type:"ends_with",nb_inputs:1,multiple:!1,apply_to:["string"]},not_ends_with:{type:"not_ends_with",nb_inputs:1,multiple:!1,apply_to:["string"]},is_empty:{type:"is_empty",nb_inputs:0,multiple:!1,apply_to:["string"]},is_not_empty:{type:"is_not_empty",nb_inputs:0,multiple:!1,apply_to:["string"]},is_null:{type:"is_null",nb_inputs:0,multiple:!1,apply_to:["string","number","datetime","boolean"]},is_not_null:{type:"is_not_null",nb_inputs:0,multiple:!1,apply_to:["string","number","datetime","boolean"]}},f.DEFAULTS={filters:[],plugins:[],sort_filters:!1,display_errors:!0,allow_groups:-1,allow_empty:!1,conditions:["AND","OR"],default_condition:"AND",inputs_separator:" , ",select_placeholder:"------",display_empty_filter:!0,default_filter:null,optgroups:{},default_rule_flags:{filter_readonly:!1,operator_readonly:!1,value_readonly:!1,no_delete:!1},default_group_flags:{condition_readonly:!1,no_add_rule:!1,no_add_group:!1,no_delete:!1},templates:{group:null,rule:null,filterSelect:null,operatorSelect:null,ruleValueSelect:null},lang_code:"en",lang:{},operators:["equal","not_equal","in","not_in","less","less_or_equal","greater","greater_or_equal","between","not_between","begins_with","not_begins_with","contains","not_contains","ends_with","not_ends_with","is_empty","is_not_empty","is_null","is_not_null"],icons:{add_group:"glyphicon glyphicon-plus-sign",add_rule:"glyphicon glyphicon-plus",remove_group:"glyphicon glyphicon-remove",remove_rule:"glyphicon glyphicon-remove",error:"glyphicon glyphicon-warning-sign"}},f.plugins={},f.defaults=function(b){return"object"!=typeof b?"string"==typeof b?"object"==typeof f.DEFAULTS[b]?a.extend(!0,{},f.DEFAULTS[b]):f.DEFAULTS[b]:a.extend(!0,{},f.DEFAULTS):void a.extendext(!0,"replace",f.DEFAULTS,b)},f.define=function(a,b,c){f.plugins[a]={fct:b,def:c||{}}},f.extend=function(b){a.extend(f.prototype,b)},f.prototype.initPlugins=function(){if(this.plugins){if(a.isArray(this.plugins)){var b={};this.plugins.forEach(function(a){b[a]=null}),this.plugins=b}Object.keys(this.plugins).forEach(function(b){b in f.plugins?(this.plugins[b]=a.extend(!0,{},f.plugins[b].def,this.plugins[b]||{}),f.plugins[b].fct.call(this,this.plugins[b])):g.error("Config",'Unable to find plugin "{0}"',b)},this)}},f.prototype.getPluginOptions=function(a,b){var c;return this.plugins&&this.plugins[a]?c=this.plugins[a]:f.plugins[a]&&(c=f.plugins[a].def),c?b?c[b]:c:void g.error("Config",'Unable to find plugin "{0}"',a)},f.prototype.init=function(a){this.trigger("afterInit"),a?(this.setRules(a),delete this.settings.rules):this.setRoot(!0)},f.prototype.checkFilters=function(a){var b=[];if(a&&0!==a.length||g.error("Config","Missing filters list"),a.forEach(function(a,c){switch(a.id||g.error("Config","Missing filter {0} id",c),b.indexOf(a.id)!=-1&&g.error("Config",'Filter "{0}" already defined',a.id),b.push(a.id),a.type?f.types[a.type]||g.error("Config",'Invalid type "{0}"',a.type):a.type="string",a.input?"function"!=typeof a.input&&f.inputs.indexOf(a.input)==-1&&g.error("Config",'Invalid input "{0}"',a.input):a.input="number"===f.types[a.type]?"number":"text",a.operators&&a.operators.forEach(function(a){"string"!=typeof a&&g.error("Config","Filter operators must be global operators types (string)")}),a.field||(a.field=a.id),a.label||(a.label=a.field),a.optgroup?(this.status.has_optgroup=!0,this.settings.optgroups[a.optgroup]||(this.settings.optgroups[a.optgroup]=a.optgroup)):a.optgroup=null,a.input){case"radio":case"checkbox":(!a.values||a.values.length<1)&&g.error("Config",'Missing filter "{0}" values',a.id);break;case"select":var d=[];a.has_optgroup=!1,g.iterateOptions(a.values,function(b,c,e){d.push({value:b,label:c,optgroup:e||null}),e&&(a.has_optgroup=!0,this.settings.optgroups[e]||(this.settings.optgroups[e]=e))}.bind(this)),a.has_optgroup?a.values=g.groupSort(d,"optgroup"):a.values=d,a.placeholder&&(void 0===a.placeholder_value&&(a.placeholder_value=-1),a.values.forEach(function(b){b.value==a.placeholder_value&&g.error("Config",'Placeholder of filter "{0}" overlaps with one of its values',a.id)}))}},this),this.settings.sort_filters)if("function"==typeof this.settings.sort_filters)a.sort(this.settings.sort_filters);else{var c=this;a.sort(function(a,b){return c.translate(a.label).localeCompare(c.translate(b.label))})}return this.status.has_optgroup&&(a=g.groupSort(a,"optgroup")),a},f.prototype.checkOperators=function(b){var c=[];return b.forEach(function(d,e){"string"==typeof d?(f.OPERATORS[d]||g.error("Config",'Unknown operator "{0}"',d),b[e]=d=a.extendext(!0,"replace",{},f.OPERATORS[d])):(d.type||g.error("Config",'Missing "type" for operator {0}',e),f.OPERATORS[d.type]&&(b[e]=d=a.extendext(!0,"replace",{},f.OPERATORS[d.type],d)),void 0!==d.nb_inputs&&void 0!==d.apply_to||g.error("Config",'Missing "nb_inputs" and/or "apply_to" for operator "{0}"',d.type)),c.indexOf(d.type)!=-1&&g.error("Config",'Operator "{0}" already defined',d.type),c.push(d.type),d.optgroup?(this.status.has_operator_optgroup=!0,this.settings.optgroups[d.optgroup]||(this.settings.optgroups[d.optgroup]=d.optgroup)):d.optgroup=null},this),this.status.has_operator_optgroup&&(b=g.groupSort(b,"optgroup")),b},f.prototype.bindEvents=function(){var b=this,c=f.selectors;this.$el.on("change.queryBuilder",c.group_condition,function(){if(a(this).is(":checked")){var d=a(this).closest(c.group_container);b.getModel(d).condition=a(this).val()}}),this.$el.on("change.queryBuilder",c.rule_filter,function(){var d=a(this).closest(c.rule_container);b.getModel(d).filter=b.getFilterById(a(this).val())}),this.$el.on("change.queryBuilder",c.rule_operator,function(){var d=a(this).closest(c.rule_container);b.getModel(d).operator=b.getOperatorByType(a(this).val())}),this.$el.on("click.queryBuilder",c.add_rule,function(){var d=a(this).closest(c.group_container);b.addRule(b.getModel(d))}),this.$el.on("click.queryBuilder",c.delete_rule,function(){var d=a(this).closest(c.rule_container);b.deleteRule(b.getModel(d))}),0!==this.settings.allow_groups&&(this.$el.on("click.queryBuilder",c.add_group,function(){var d=a(this).closest(c.group_container);b.addGroup(b.getModel(d))}),this.$el.on("click.queryBuilder",c.delete_group,function(){var d=a(this).closest(c.group_container);b.deleteGroup(b.getModel(d))})),this.model.on({drop:function(a,c){c.$el.remove(),b.refreshGroupsConditions()},add:function(a,c,d,e){0===e?d.$el.prependTo(c.$el.find(">"+f.selectors.rules_list)):d.$el.insertAfter(c.rules[e-1].$el),b.refreshGroupsConditions()},move:function(a,c,d,e){c.$el.detach(),0===e?c.$el.prependTo(d.$el.find(">"+f.selectors.rules_list)):c.$el.insertAfter(d.rules[e-1].$el),b.refreshGroupsConditions()},update:function(a,c,d,e,f){if(c instanceof j)switch(d){case"error":b.updateError(c);break;case"flags":b.applyRuleFlags(c);break;case"filter":b.updateRuleFilter(c,f);break;case"operator":b.updateRuleOperator(c,f);break;case"value":b.updateRuleValue(c,f)}else switch(d){case"error":b.updateError(c);break;case"flags":b.applyGroupFlags(c);break;case"condition":b.updateGroupCondition(c,f)}}})},f.prototype.setRoot=function(b,c,d){b=void 0===b||b===!0;var e=this.nextGroupId(),f=a(this.getGroupTemplate(e,1));return this.$el.append(f),this.model.root=new i(null,f),this.model.root.model=this.model,this.model.root.data=c,this.model.root.flags=a.extend({},this.settings.default_group_flags,d),this.model.root.condition=this.settings.default_condition,this.trigger("afterAddGroup",this.model.root),b&&this.addRule(this.model.root),this.model.root},f.prototype.addGroup=function(b,c,d,e){c=void 0===c||c===!0;var f=b.level+1,g=this.trigger("beforeAddGroup",b,c,f);if(g.isDefaultPrevented())return null;var h=this.nextGroupId(),i=a(this.getGroupTemplate(h,f)),j=b.addGroup(i);return j.data=d,j.flags=a.extend({},this.settings.default_group_flags,e),j.condition=this.settings.default_condition,this.trigger("afterAddGroup",j),this.trigger("rulesChanged"),c&&this.addRule(j),j},f.prototype.deleteGroup=function(a){if(a.isRoot())return!1;var b=this.trigger("beforeDeleteGroup",a);if(b.isDefaultPrevented())return!1;var c=!0;return a.each("reverse",function(a){c&=this.deleteRule(a)},function(a){c&=this.deleteGroup(a)},this),c&&(a.drop(),this.trigger("afterDeleteGroup"),this.trigger("rulesChanged")),c},f.prototype.updateGroupCondition=function(b,c){b.$el.find(">"+f.selectors.group_condition).each(function(){var c=a(this);c.prop("checked",c.val()===b.condition),c.parent().toggleClass("active",c.val()===b.condition)}),this.trigger("afterUpdateGroupCondition",b,c),this.trigger("rulesChanged")},f.prototype.refreshGroupsConditions=function(){!function a(b){(!b.flags||b.flags&&!b.flags.condition_readonly)&&b.$el.find(">"+f.selectors.group_condition).prop("disabled",b.rules.length<=1).parent().toggleClass("disabled",b.rules.length<=1),b.each(null,function(b){a(b)},this)}(this.model.root)},f.prototype.addRule=function(b,c,d){var e=this.trigger("beforeAddRule",b);if(e.isDefaultPrevented())return null;var f=this.nextRuleId(),g=a(this.getRuleTemplate(f)),h=b.addRule(g);return h.data=c,h.flags=a.extend({},this.settings.default_rule_flags,d),this.trigger("afterAddRule",h),this.trigger("rulesChanged"),
this.createRuleFilters(h),!this.settings.default_filter&&this.settings.display_empty_filter||(h.filter=this.change("getDefaultFilter",this.getFilterById(this.settings.default_filter||this.filters[0].id),h)),h},f.prototype.deleteRule=function(a){if(a.flags.no_delete)return!1;var b=this.trigger("beforeDeleteRule",a);return!b.isDefaultPrevented()&&(a.drop(),this.trigger("afterDeleteRule"),this.trigger("rulesChanged"),!0)},f.prototype.createRuleFilters=function(b){var c=this.change("getRuleFilters",this.filters,b),d=a(this.getRuleFilterSelect(b,c));b.$el.find(f.selectors.filter_container).html(d),this.trigger("afterCreateRuleFilters",b),this.applyRuleFlags(b)},f.prototype.createRuleOperators=function(b){var c=b.$el.find(f.selectors.operator_container).empty();if(b.filter){var d=this.getOperators(b.filter),e=a(this.getRuleOperatorSelect(b,d));c.html(e),b.filter.default_operator?b.__.operator=this.getOperatorByType(b.filter.default_operator):b.__.operator=d[0],b.$el.find(f.selectors.rule_operator).val(b.operator.type),this.trigger("afterCreateRuleOperators",b,d),this.applyRuleFlags(b)}},f.prototype.createRuleInput=function(b){var c=b.$el.find(f.selectors.value_container).empty();if(b.__.value=void 0,b.filter&&b.operator&&0!==b.operator.nb_inputs){for(var d=this,e=a(),g=b.filter,h=0;h<b.operator.nb_inputs;h++){var i=a(this.getRuleInput(b,h));h>0&&c.append(this.settings.inputs_separator),c.append(i),e=e.add(i)}c.css("display",""),e.on("change "+(g.input_event||""),function(){b._updating_input||(b._updating_value=!0,b.value=d.getRuleInputValue(b),b._updating_value=!1)}),g.plugin&&e[g.plugin](g.plugin_config||{}),this.trigger("afterCreateRuleInput",b),void 0!==g.default_value?b.value=g.default_value:(b._updating_value=!0,b.value=d.getRuleInputValue(b),b._updating_value=!1),this.applyRuleFlags(b)}},f.prototype.updateRuleFilter=function(a,b){this.createRuleOperators(a),this.createRuleInput(a),a.$el.find(f.selectors.rule_filter).val(a.filter?a.filter.id:"-1"),b&&a.filter&&b.id!==a.filter.id&&(a.data=void 0),this.trigger("afterUpdateRuleFilter",a,b),this.trigger("rulesChanged")},f.prototype.updateRuleOperator=function(a,b){var c=a.$el.find(f.selectors.value_container);a.operator&&0!==a.operator.nb_inputs?(c.css("display",""),!c.is(":empty")&&b&&a.operator.nb_inputs===b.nb_inputs&&a.operator.optgroup===b.optgroup||this.createRuleInput(a)):(c.hide(),a.__.value=void 0),a.operator&&(a.$el.find(f.selectors.rule_operator).val(a.operator.type),a.__.value=this.getRuleInputValue(a)),this.trigger("afterUpdateRuleOperator",a,b),this.trigger("rulesChanged")},f.prototype.updateRuleValue=function(a,b){a._updating_value||this.setRuleInputValue(a,a.value),this.trigger("afterUpdateRuleValue",a,b),this.trigger("rulesChanged")},f.prototype.applyRuleFlags=function(a){var b=a.flags,c=f.selectors;a.$el.find(c.rule_filter).prop("disabled",b.filter_readonly),a.$el.find(c.rule_operator).prop("disabled",b.operator_readonly),a.$el.find(c.rule_value).prop("disabled",b.value_readonly),b.no_delete&&a.$el.find(c.delete_rule).remove(),this.trigger("afterApplyRuleFlags",a)},f.prototype.applyGroupFlags=function(a){var b=a.flags,c=f.selectors;a.$el.find(">"+c.group_condition).prop("disabled",b.condition_readonly).parent().toggleClass("readonly",b.condition_readonly),b.no_add_rule&&a.$el.find(c.add_rule).remove(),b.no_add_group&&a.$el.find(c.add_group).remove(),b.no_delete&&a.$el.find(c.delete_group).remove(),this.trigger("afterApplyGroupFlags",a)},f.prototype.clearErrors=function(a){a=a||this.model.root,a&&(a.error=null,a instanceof i&&a.each(function(a){a.error=null},function(a){this.clearErrors(a)},this))},f.prototype.updateError=function(a){if(this.settings.display_errors)if(null===a.error)a.$el.removeClass("has-error");else{var b=this.translate("errors",a.error[0]);b=g.fmt(b,a.error.slice(1)),b=this.change("displayError",b,a.error,a),a.$el.addClass("has-error").find(f.selectors.error_container).eq(0).attr("title",b)}},f.prototype.triggerValidationError=function(b,c,d){a.isArray(c)||(c=[c]);var e=this.trigger("validationError",b,c,d);e.isDefaultPrevented()||(b.error=c)},f.prototype.destroy=function(){this.trigger("beforeDestroy"),this.status.generated_id&&this.$el.removeAttr("id"),this.clear(),this.model=null,this.$el.off(".queryBuilder").removeClass("query-builder").removeData("queryBuilder"),delete this.$el[0].queryBuilder},f.prototype.reset=function(){var b=this.trigger("beforeReset");b.isDefaultPrevented()||(this.status.group_id=1,this.status.rule_id=0,this.model.root.empty(),this.model.root.data=void 0,this.model.root.flags=a.extend({},this.settings.default_group_flags),this.model.root.condition=this.settings.default_condition,this.addRule(this.model.root),this.trigger("afterReset"),this.trigger("rulesChanged"))},f.prototype.clear=function(){var a=this.trigger("beforeClear");a.isDefaultPrevented()||(this.status.group_id=0,this.status.rule_id=0,this.model.root&&(this.model.root.drop(),this.model.root=null),this.trigger("afterClear"),this.trigger("rulesChanged"))},f.prototype.setOptions=function(b){a.each(b,function(a,b){f.modifiable_options.indexOf(a)!==-1&&(this.settings[a]=b)}.bind(this))},f.prototype.getModel=function(b){return b?b instanceof h?b:a(b).data("queryBuilderModel"):this.model.root},f.prototype.validate=function(b){b=a.extend({skip_empty:!1},b),this.clearErrors();var c=this,d=function a(d){var e=0,f=0;return d.each(function(a){if(a.filter||!b.skip_empty){if(!a.filter)return c.triggerValidationError(a,"no_filter",null),void f++;if(!a.operator)return c.triggerValidationError(a,"no_operator",null),void f++;if(0!==a.operator.nb_inputs){var d=c.validateValue(a,a.value);if(d!==!0)return c.triggerValidationError(a,d,a.value),void f++}e++}},function(b){var c=a(b);c===!0?e++:c===!1&&f++}),!(f>0)&&(0===e&&!d.isRoot()&&b.skip_empty?null:!!(0!==e||c.settings.allow_empty&&d.isRoot())||(c.triggerValidationError(d,"empty_group",null),!1))}(this.model.root);return this.change("validate",d)},f.prototype.getRules=function(b){b=a.extend({get_flags:!1,allow_invalid:!1,skip_empty:!1},b);var c=this.validate(b);if(!c&&!b.allow_invalid)return null;var d=this,e=function c(e){var f={condition:e.condition,rules:[]};if(e.data&&(f.data=a.extendext(!0,"replace",{},e.data)),b.get_flags){var g=d.getGroupFlags(e.flags,"all"===b.get_flags);a.isEmptyObject(g)||(f.flags=g)}return e.each(function(c){if(c.filter||!b.skip_empty){var e=null;c.operator&&0===c.operator.nb_inputs||(e=c.value);var g={id:c.filter?c.filter.id:null,field:c.filter?c.filter.field:null,type:c.filter?c.filter.type:null,input:c.filter?c.filter.input:null,operator:c.operator?c.operator.type:null,value:e};if((c.filter&&c.filter.data||c.data)&&(g.data=a.extendext(!0,"replace",{},c.filter.data,c.data)),b.get_flags){var h=d.getRuleFlags(c.flags,"all"===b.get_flags);a.isEmptyObject(h)||(g.flags=h)}f.rules.push(d.change("ruleToJson",g,c))}},function(a){var d=c(a);0===d.rules.length&&b.skip_empty||f.rules.push(d)},this),d.change("groupToJson",f,e)}(this.model.root);return e.valid=c,this.change("getRules",e)},f.prototype.setRules=function(b,c){c=a.extend({allow_invalid:!1},c),a.isArray(b)&&(b={condition:this.settings.default_condition,rules:b}),b&&b.rules&&(0!==b.rules.length||this.settings.allow_empty)||g.error("RulesParse","Incorrect data object passed"),this.clear(),this.setRoot(!1,b.data,this.parseGroupFlags(b)),b=this.change("setRules",b,c);var d=this;!function a(b,e){null!==e&&(void 0===b.condition?b.condition=d.settings.default_condition:d.settings.conditions.indexOf(b.condition)==-1&&(g.error(!c.allow_invalid,"UndefinedCondition",'Invalid condition "{0}"',b.condition),b.condition=d.settings.default_condition),e.condition=b.condition,b.rules.forEach(function(b){var f;if(void 0!==b.rules)if(d.settings.allow_groups!==-1&&d.settings.allow_groups<e.level)g.error(!c.allow_invalid,"RulesParse","No more than {0} groups are allowed",d.settings.allow_groups),d.reset();else{if(f=d.addGroup(e,!1,b.data,d.parseGroupFlags(b)),null===f)return;a(b,f)}else{if(b.empty||(void 0===b.id&&(g.error(!c.allow_invalid,"RulesParse","Missing rule field id"),b.empty=!0),void 0===b.operator&&(b.operator="equal")),f=d.addRule(e,b.data,d.parseRuleFlags(b)),null===f)return;b.empty||(f.filter=d.getFilterById(b.id,!c.allow_invalid)),f.filter&&(f.operator=d.getOperatorByType(b.operator,!c.allow_invalid),f.operator||(f.operator=d.getOperators(f.filter)[0])),f.operator&&0!==f.operator.nb_inputs&&(void 0!==b.value?f.value=b.value:void 0!==f.filter.default_value&&(f.value=f.filter.default_value)),d.change("jsonToRule",f,b)!=f&&g.error("RulesParse","Plugin tried to change rule reference")}}),d.change("jsonToGroup",e,b)!=e&&g.error("RulesParse","Plugin tried to change group reference"))}(b,this.model.root),this.trigger("afterSetRules")},f.prototype.validateValue=function(a,b){var c=a.filter.validation||{},d=!0;return d=c.callback?c.callback.call(this,b,a):this._validateValue(a,b),this.change("validateValue",d,b,a)},f.prototype._validateValue=function(b,c){var d,e,h=b.filter,i=b.operator,j=h.validation||{},k=!0;1===b.operator.nb_inputs&&(c=[c]);for(var l=0;l<i.nb_inputs;l++){if(!i.multiple&&a.isArray(c[l])&&c[l].length>1){k=["operator_not_multiple",i.type,this.translate("operators",i.type)];break}switch(h.input){case"radio":if(void 0===c[l]||0===c[l].length){j.allow_empty_value||(k=["radio_empty"]);break}break;case"checkbox":if(void 0===c[l]||0===c[l].length){j.allow_empty_value||(k=["checkbox_empty"]);break}break;case"select":if(void 0===c[l]||0===c[l].length||h.placeholder&&c[l]==h.placeholder_value){j.allow_empty_value||(k=["select_empty"]);break}break;default:e=a.isArray(c[l])?c[l]:[c[l]];for(var m=0;m<e.length;m++){switch(f.types[h.type]){case"string":if(void 0===e[m]||0===e[m].length){j.allow_empty_value||(k=["string_empty"]);break}if(void 0!==j.min&&e[m].length<parseInt(j.min)){k=[this.getValidationMessage(j,"min","string_exceed_min_length"),j.min];break}if(void 0!==j.max&&e[m].length>parseInt(j.max)){k=[this.getValidationMessage(j,"max","string_exceed_max_length"),j.max];break}if(j.format&&("string"==typeof j.format&&(j.format=new RegExp(j.format)),!j.format.test(e[m]))){k=[this.getValidationMessage(j,"format","string_invalid_format"),j.format];break}break;case"number":if(void 0===e[m]||0===e[m].length){j.allow_empty_value||(k=["number_nan"]);break}if(isNaN(e[m])){k=["number_nan"];break}if("integer"==h.type){if(parseInt(e[m])!=e[m]){k=["number_not_integer"];break}}else if(parseFloat(e[m])!=e[m]){k=["number_not_double"];break}if(void 0!==j.min&&e[m]<parseFloat(j.min)){k=[this.getValidationMessage(j,"min","number_exceed_min"),j.min];break}if(void 0!==j.max&&e[m]>parseFloat(j.max)){k=[this.getValidationMessage(j,"max","number_exceed_max"),j.max];break}if(void 0!==j.step&&"any"!==j.step){var n=(e[m]/j.step).toPrecision(14);if(parseInt(n)!=n){k=[this.getValidationMessage(j,"step","number_wrong_step"),j.step];break}}break;case"datetime":if(void 0===e[m]||0===e[m].length){j.allow_empty_value||(k=["datetime_empty"]);break}if(j.format){"moment"in window||g.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com");var o=moment(e[m],j.format);if(!o.isValid()){k=[this.getValidationMessage(j,"format","datetime_invalid"),j.format];break}if(j.min&&o<moment(j.min,j.format)){k=[this.getValidationMessage(j,"min","datetime_exceed_min"),j.min];break}if(j.max&&o>moment(j.max,j.format)){k=[this.getValidationMessage(j,"max","datetime_exceed_max"),j.max];break}}break;case"boolean":if(void 0===e[m]||0===e[m].length){j.allow_empty_value||(k=["boolean_not_valid"]);break}if(d=(""+e[m]).trim().toLowerCase(),"true"!==d&&"false"!==d&&"1"!==d&&"0"!==d&&1!==e[m]&&0!==e[m]){k=["boolean_not_valid"];break}}if(k!==!0)break}}if(k!==!0)break}if(("between"===b.operator.type||"not_between"===b.operator.type)&&2===c.length)switch(f.types[h.type]){case"number":c[0]>c[1]&&(k=["number_between_invalid",c[0],c[1]]);break;case"datetime":j.format&&("moment"in window||g.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com"),moment(c[0],j.format).isAfter(moment(c[1],j.format))&&(k=["datetime_between_invalid",c[0],c[1]]))}return k},f.prototype.nextGroupId=function(){return this.status.id+"_group_"+this.status.group_id++},f.prototype.nextRuleId=function(){return this.status.id+"_rule_"+this.status.rule_id++},f.prototype.getOperators=function(a){"string"==typeof a&&(a=this.getFilterById(a));for(var b=[],c=0,d=this.operators.length;c<d;c++){if(a.operators){if(a.operators.indexOf(this.operators[c].type)==-1)continue}else if(this.operators[c].apply_to.indexOf(f.types[a.type])==-1)continue;b.push(this.operators[c])}return a.operators&&b.sort(function(b,c){return a.operators.indexOf(b.type)-a.operators.indexOf(c.type)}),this.change("getOperators",b,a)},f.prototype.getFilterById=function(a,b){if("-1"==a)return null;for(var c=0,d=this.filters.length;c<d;c++)if(this.filters[c].id==a)return this.filters[c];return g.error(b!==!1,"UndefinedFilter",'Undefined filter "{0}"',a),null},f.prototype.getOperatorByType=function(a,b){if("-1"==a)return null;for(var c=0,d=this.operators.length;c<d;c++)if(this.operators[c].type==a)return this.operators[c];return g.error(b!==!1,"UndefinedOperator",'Undefined operator "{0}"',a),null},f.prototype.getRuleInputValue=function(b){var c=b.filter,d=b.operator,e=[];if(c.valueGetter)e=c.valueGetter.call(this,b);else{for(var h=b.$el.find(f.selectors.value_container),i=0;i<d.nb_inputs;i++){var j,k=g.escapeElementId(b.id+"_value_"+i);switch(c.input){case"radio":e.push(h.find("[name="+k+"]:checked").val());break;case"checkbox":j=[],h.find("[name="+k+"]:checked").each(function(){j.push(a(this).val())}),e.push(j);break;case"select":c.multiple?(j=[],h.find("[name="+k+"] option:selected").each(function(){j.push(a(this).val())}),e.push(j)):e.push(h.find("[name="+k+"] option:selected").val());break;default:e.push(h.find("[name="+k+"]").val())}}e=e.map(function(b){return d.multiple&&c.value_separator&&"string"==typeof b&&(b=b.split(c.value_separator)),a.isArray(b)?b.map(function(a){return g.changeType(a,c.type)}):g.changeType(b,c.type)}),1===d.nb_inputs&&(e=e[0]),c.valueParser&&(e=c.valueParser.call(this,b,e))}return this.change("getRuleValue",e,b)},f.prototype.setRuleInputValue=function(b,c){var d=b.filter,e=b.operator;if(d&&e){if(b._updating_input=!0,d.valueSetter)d.valueSetter.call(this,b,c);else{var h=b.$el.find(f.selectors.value_container);1==e.nb_inputs&&(c=[c]);for(var i=0;i<e.nb_inputs;i++){var j=g.escapeElementId(b.id+"_value_"+i);switch(d.input){case"radio":h.find("[name="+j+'][value="'+c[i]+'"]').prop("checked",!0).trigger("change");break;case"checkbox":a.isArray(c[i])||(c[i]=[c[i]]),c[i].forEach(function(a){h.find("[name="+j+'][value="'+a+'"]').prop("checked",!0).trigger("change")});break;default:e.multiple&&d.value_separator&&a.isArray(c[i])&&(c[i]=c[i].join(d.value_separator)),h.find("[name="+j+"]").val(c[i]).trigger("change")}}}b._updating_input=!1}},f.prototype.parseRuleFlags=function(b){var c=a.extend({},this.settings.default_rule_flags);return b.readonly&&a.extend(c,{filter_readonly:!0,operator_readonly:!0,value_readonly:!0,no_delete:!0}),b.flags&&a.extend(c,b.flags),this.change("parseRuleFlags",c,b)},f.prototype.getRuleFlags=function(b,c){if(c)return a.extend({},b);var d={};return a.each(this.settings.default_rule_flags,function(a,c){b[a]!==c&&(d[a]=b[a])}),d},f.prototype.parseGroupFlags=function(b){var c=a.extend({},this.settings.default_group_flags);return b.readonly&&a.extend(c,{condition_readonly:!0,no_add_rule:!0,no_add_group:!0,no_delete:!0}),b.flags&&a.extend(c,b.flags),this.change("parseGroupFlags",c,b)},f.prototype.getGroupFlags=function(b,c){if(c)return a.extend({},b);var d={};return a.each(this.settings.default_group_flags,function(a,c){b[a]!==c&&(d[a]=b[a])}),d},f.prototype.translate=function(a,b){b||(b=a,a=void 0);var c;return c="object"==typeof b?b[this.settings.lang_code]||b.en:(a?this.lang[a]:this.lang)[b]||b,this.change("translate",c,b,a)},f.prototype.getValidationMessage=function(a,b,c){return a.messages&&a.messages[b]||c},f.templates.group='<div id="{{= it.group_id }}" class="rules-group-container">   <div class="rules-group-header">     <div class="btn-group pull-right group-actions">       <button type="button" class="btn btn-xs btn-success" data-add="rule">         <i class="{{= it.icons.add_rule }}"></i> {{= it.translate("add_rule") }}       </button>       {{? it.settings.allow_groups===-1 || it.settings.allow_groups>=it.level }}         <button type="button" class="btn btn-xs btn-success" data-add="group">           <i class="{{= it.icons.add_group }}"></i> {{= it.translate("add_group") }}         </button>       {{?}}       {{? it.level>1 }}         <button type="button" class="btn btn-xs btn-danger" data-delete="group">           <i class="{{= it.icons.remove_group }}"></i> {{= it.translate("delete_group") }}         </button>       {{?}}     </div>     <div class="btn-group group-conditions">       {{~ it.conditions: condition }}         <label class="btn btn-xs btn-primary">           <input type="radio" name="{{= it.group_id }}_cond" value="{{= condition }}"> {{= it.translate("conditions", condition) }}         </label>       {{~}}     </div>     {{? it.settings.display_errors }}       <div class="error-container"><i class="{{= it.icons.error }}"></i></div>     {{?}}   </div>   <div class=rules-group-body>     <div class=rules-list></div>   </div> </div>',f.templates.rule='<div id="{{= it.rule_id }}" class="rule-container">   <div class="rule-header">     <div class="btn-group pull-right rule-actions">       <button type="button" class="btn btn-xs btn-danger" data-delete="rule">         <i class="{{= it.icons.remove_rule }}"></i> {{= it.translate("delete_rule") }}       </button>     </div>   </div>   {{? it.settings.display_errors }}     <div class="error-container"><i class="{{= it.icons.error }}"></i></div>   {{?}}   <div class="rule-filter-container"></div>   <div class="rule-operator-container"></div>   <div class="rule-value-container"></div> </div>',f.templates.filterSelect='{{ var optgroup = null; }} <select class="form-control" name="{{= it.rule.id }}_filter">   {{? it.settings.display_empty_filter }}     <option value="-1">{{= it.settings.select_placeholder }}</option>   {{?}}   {{~ it.filters: filter }}     {{? optgroup !== filter.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = filter.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= filter.id }}" {{? filter.icon}}data-icon="{{= filter.icon}}"{{?}}>{{= it.translate(filter.label) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>',f.templates.operatorSelect='{{? it.operators.length === 1 }} <span> {{= it.translate("operators", it.operators[0].type) }} </span> {{?}} {{ var optgroup = null; }} <select class="form-control {{? it.operators.length === 1 }}hide{{?}}" name="{{= it.rule.id }}_operator">   {{~ it.operators: operator }}     {{? optgroup !== operator.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = operator.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= operator.type }}" {{? operator.icon}}data-icon="{{= operator.icon}}"{{?}}>{{= it.translate("operators", operator.type) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>',f.templates.ruleValueSelect='{{ var optgroup = null; }} <select class="form-control" name="{{= it.name }}" {{? it.rule.filter.multiple }}multiple{{?}}>   {{? it.rule.filter.placeholder }}     <option value="{{= it.rule.filter.placeholder_value }}" disabled selected>{{= it.rule.filter.placeholder }}</option>   {{?}}   {{~ it.rule.filter.values: entry }}     {{? optgroup !== entry.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = entry.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= entry.value }}">{{= entry.label }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>',f.prototype.getGroupTemplate=function(a,b){var c=this.templates.group({builder:this,group_id:a,level:b,conditions:this.settings.conditions,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getGroupTemplate",c,b)},f.prototype.getRuleTemplate=function(a){var b=this.templates.rule({builder:this,rule_id:a,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleTemplate",b)},f.prototype.getRuleFilterSelect=function(a,b){var c=this.templates.filterSelect({builder:this,rule:a,filters:b,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleFilterSelect",c,a,b)},f.prototype.getRuleOperatorSelect=function(a,b){var c=this.templates.operatorSelect({builder:this,rule:a,operators:b,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleOperatorSelect",c,a,b)},f.prototype.getRuleValueSelect=function(a,b){var c=this.templates.ruleValueSelect({builder:this,name:a,rule:b,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleValueSelect",c,a,b)},f.prototype.getRuleInput=function(a,b){var c=a.filter,d=a.filter.validation||{},e=a.id+"_value_"+b,f=c.vertical?" class=block":"",h="";if("function"==typeof c.input)h=c.input.call(this,a,e);else switch(c.input){case"radio":case"checkbox":g.iterateOptions(c.values,function(a,b){h+="<label"+f+'><input type="'+c.input+'" name="'+e+'" value="'+a+'"> '+b+"</label> "});break;case"select":h=this.getRuleValueSelect(e,a);break;case"textarea":h+='<textarea class="form-control" name="'+e+'"',c.size&&(h+=' cols="'+c.size+'"'),c.rows&&(h+=' rows="'+c.rows+'"'),void 0!==d.min&&(h+=' minlength="'+d.min+'"'),void 0!==d.max&&(h+=' maxlength="'+d.max+'"'),c.placeholder&&(h+=' placeholder="'+c.placeholder+'"'),h+="></textarea>";break;case"number":h+='<input class="form-control" type="number" name="'+e+'"',void 0!==d.step&&(h+=' step="'+d.step+'"'),void 0!==d.min&&(h+=' min="'+d.min+'"'),void 0!==d.max&&(h+=' max="'+d.max+'"'),c.placeholder&&(h+=' placeholder="'+c.placeholder+'"'),c.size&&(h+=' size="'+c.size+'"'),h+=">";break;default:h+='<input class="form-control" type="text" name="'+e+'"',c.placeholder&&(h+=' placeholder="'+c.placeholder+'"'),"string"===c.type&&void 0!==d.min&&(h+=' minlength="'+d.min+'"'),"string"===c.type&&void 0!==d.max&&(h+=' maxlength="'+d.max+'"'),c.size&&(h+=' size="'+c.size+'"'),h+=">"}return this.change("getRuleInput",h,a,e)};var g={};f.utils=g,g.iterateOptions=function(b,c){b&&(a.isArray(b)?b.forEach(function(b){a.isPlainObject(b)?"value"in b?c(b.value,b.label||b.value,b.optgroup):a.each(b,function(a,b){return c(a,b),!1}):c(b,b)}):a.each(b,function(a,b){c(a,b)}))},g.fmt=function(a,b){return Array.isArray(b)||(b=Array.prototype.slice.call(arguments,1)),a.replace(/{([0-9]+)}/g,function(a,c){return b[parseInt(c)]})},g.error=function(){var a=0,b="boolean"!=typeof arguments[a]||arguments[a++],c=arguments[a++],d=arguments[a++],e=Array.isArray(arguments[a])?arguments[a]:Array.prototype.slice.call(arguments,a);if(b){var f=new Error(g.fmt(d,e));throw f.name=c+"Error",f.args=e,f}console.error(c+"Error: "+g.fmt(d,e))},g.changeType=function(a,b){if(""!==a&&void 0!==a)switch(b){case"integer":return"string"!=typeof a||/^-?\d+$/.test(a)?parseInt(a):a;case"double":return"string"!=typeof a||/^-?\d+\.?\d*$/.test(a)?parseFloat(a):a;case"boolean":return"string"!=typeof a||/^(0|1|true|false){1}$/i.test(a)?a===!0||1===a||"true"===a.toLowerCase()||"1"===a:a;default:return a}},g.escapeString=function(a){return"string"!=typeof a?a:a.replace(/[\0\n\r\b\\\'\"]/g,function(a){switch(a){case"\0":return"\\0";case"\n":return"\\n";case"\r":return"\\r";case"\b":return"\\b";default:return"\\"+a}}).replace(/\t/g,"\\t").replace(/\x1a/g,"\\Z")},g.escapeRegExp=function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},g.escapeElementId=function(a){return a?a.replace(/(\\)?([:.\[\],])/g,function(a,b,c){return b?a:"\\"+c}):a},g.groupSort=function(a,b){var c=[],d=[];return a.forEach(function(a){var e;a[b]?(e=c.lastIndexOf(a[b]),e==-1?e=c.length:e++):e=c.length,c.splice(e,0,a[b]),d.splice(e,0,a)}),d},g.defineModelProperties=function(b,c){c.forEach(function(c){Object.defineProperty(b.prototype,c,{enumerable:!0,get:function(){return this.__[c]},set:function(b){var d=null!==this.__[c]&&"object"==typeof this.__[c]?a.extend({},this.__[c]):this.__[c];this.__[c]=b,null!==this.model&&this.model.trigger("update",this,c,b,d)}})})},a.extend(c.prototype,{trigger:function(b){var c=new a.Event(b);return this.$.triggerHandler(c,Array.prototype.slice.call(arguments,1)),c},on:function(){return this.$.on.apply(this.$,Array.prototype.slice.call(arguments)),this},off:function(){return this.$.off.apply(this.$,Array.prototype.slice.call(arguments)),this},once:function(){return this.$.one.apply(this.$,Array.prototype.slice.call(arguments)),this}});var h=function(a,b){return this instanceof h?(Object.defineProperty(this,"__",{value:{}}),b.data("queryBuilderModel",this),this.__.level=1,this.__.error=null,this.__.flags={},this.__.data=void 0,this.$el=b,this.id=b[0].id,this.model=null,void(this.parent=a)):new h(a,b)};g.defineModelProperties(h,["level","error","data","flags"]),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){return this.__.parent},set:function(a){this.__.parent=a,this.level=null===a?1:a.level+1,this.model=null===a?null:a.model}}),h.prototype.isRoot=function(){return 1===this.level},h.prototype.getPos=function(){return this.isRoot()?-1:this.parent.getNodePos(this)},h.prototype.drop=function(){var a=this.model;this.parent&&this.parent.removeNode(this),this.$el.removeData("queryBuilderModel"),null!==a&&a.trigger("drop",this)},h.prototype.moveAfter=function(a){this.isRoot()||this.move(a.parent,a.getPos()+1)},h.prototype.moveAtBegin=function(a){this.isRoot()||(void 0===a&&(a=this.parent),this.move(a,0))},h.prototype.moveAtEnd=function(a){this.isRoot()||(void 0===a&&(a=this.parent),this.move(a,0===a.length()?0:a.length()-1))},h.prototype.move=function(a,b){this.isRoot()||("number"==typeof a&&(b=a,a=this.parent),this.parent.removeNode(this),a.insertNode(this,b,!1),null!==this.model&&this.model.trigger("move",this,a,b))};var i=function(a,b){return this instanceof i?(h.call(this,a,b),this.rules=[],void(this.__.condition=null)):new i(a,b)};i.prototype=Object.create(h.prototype),i.prototype.constructor=i,g.defineModelProperties(i,["condition"]),i.prototype.empty=function(){this.each("reverse",function(a){a.drop()},function(a){a.drop()})},i.prototype.drop=function(){this.empty(),h.prototype.drop.call(this)},i.prototype.length=function(){return this.rules.length},i.prototype.insertNode=function(a,b,c){return void 0===b&&(b=this.length()),this.rules.splice(b,0,a),a.parent=this,c&&null!==this.model&&this.model.trigger("add",this,a,b),a},i.prototype.addGroup=function(a,b){return this.insertNode(new i(this,a),b,!0)},i.prototype.addRule=function(a,b){return this.insertNode(new j(this,a),b,!0)},i.prototype.removeNode=function(a){var b=this.getNodePos(a);b!==-1&&(a.parent=null,this.rules.splice(b,1))},i.prototype.getNodePos=function(a){return this.rules.indexOf(a)},i.prototype.each=function(a,b,c,d){"boolean"!=typeof a&&"string"!=typeof a&&(d=c,c=b,b=a,a=!1),d=void 0===d?null:d;for(var e=a?this.rules.length-1:0,f=a?0:this.rules.length-1,g=a?-1:1,h=function(){return a?e>=f:e<=f},j=!1;h()&&(this.rules[e]instanceof i?c&&(j=c.call(d,this.rules[e])===!1):b&&(j=b.call(d,this.rules[e])===!1),!j);e+=g);return!j},i.prototype.contains=function(a,b){return this.getNodePos(a)!==-1||!!b&&!this.each(function(){return!0},function(b){return!b.contains(a,!0)})};var j=function(a,b){return this instanceof j?(h.call(this,a,b),this._updating_value=!1,this._updating_input=!1,this.__.filter=null,this.__.operator=null,void(this.__.value=void 0)):new j(a,b)};return j.prototype=Object.create(h.prototype),j.prototype.constructor=j,g.defineModelProperties(j,["filter","operator","value"]),j.prototype.isRoot=function(){return!1},f.Group=i,f.Rule=j,a.fn.queryBuilder=function(a){0===this.length&&g.error("Config","No target defined"),this.length>1&&g.error("Config","Unable to initialize on multiple target");var b=this.data("queryBuilder"),c="object"==typeof a&&a||{};if(!b&&"destroy"==a)return this;if(!b){var d=new f(this,c);this.data("queryBuilder",d),d.init(c.rules)}return"string"==typeof a?b[a].apply(b,Array.prototype.slice.call(arguments,1)):this},a.fn.queryBuilder.constructor=f,a.fn.queryBuilder.defaults=f.defaults,a.fn.queryBuilder.extend=f.extend,a.fn.queryBuilder.define=f.define,a.fn.queryBuilder.regional=f.regional,f.define("bt-checkbox",function(a){"glyphicons"==a.font&&this.$el.addClass("bt-checkbox-glyphicons"),this.on("getRuleInput.filter",function(b,c,d){var e=c.filter;if(("radio"===e.input||"checkbox"===e.input)&&!e.plugin){b.value="",e.colors||(e.colors={}),e.color&&(e.colors._def_=e.color);var f=e.vertical?' style="display:block"':"",h=0;g.iterateOptions(e.values,function(c,g){var i=e.colors[c]||e.colors._def_||a.color,j=d+"_"+h++;b.value+="<div"+f+' class="'+e.input+" "+e.input+"-"+i+'">   <input type="'+e.input+'" name="'+d+'" id="'+j+'" value="'+c+'">   <label for="'+j+'">'+g+"</label> </div>"})}})},{font:"glyphicons",color:"default"}),f.define("bt-selectpicker",function(b){a.fn.selectpicker&&a.fn.selectpicker.Constructor||g.error("MissingLibrary",'Bootstrap Select is required to use "bt-selectpicker" plugin. Get it here: http://silviomoreto.github.io/bootstrap-select');var c=f.selectors;this.on("afterCreateRuleFilters",function(a,d){d.$el.find(c.rule_filter).removeClass("form-control").selectpicker(b)}),this.on("afterCreateRuleOperators",function(a,d){d.$el.find(c.rule_operator).removeClass("form-control").selectpicker(b)}),this.on("afterUpdateRuleFilter",function(a,b){b.$el.find(c.rule_filter).selectpicker("render")}),this.on("afterUpdateRuleOperator",function(a,b){b.$el.find(c.rule_operator).selectpicker("render")}),this.on("beforeDeleteRule",function(a,b){b.$el.find(c.rule_filter).selectpicker("destroy"),b.$el.find(c.rule_operator).selectpicker("destroy")})},{container:"body",style:"btn-inverse btn-xs",width:"auto",showIcon:!1}),f.define("bt-tooltip-errors",function(b){a.fn.tooltip&&a.fn.tooltip.Constructor&&a.fn.tooltip.Constructor.prototype.fixTitle||g.error("MissingLibrary",'Bootstrap Tooltip is required to use "bt-tooltip-errors" plugin. Get it here: http://getbootstrap.com');var c=this;this.on("getRuleTemplate.filter getGroupTemplate.filter",function(b){var c=a(b.value);c.find(f.selectors.error_container).attr("data-toggle","tooltip"),b.value=c.prop("outerHTML")}),this.model.on("update",function(a,d,e){"error"==e&&c.settings.display_errors&&d.$el.find(f.selectors.error_container).eq(0).tooltip(b).tooltip("hide").tooltip("fixTitle")})},{placement:"right"}),f.extend({setFilters:function(a,b){var c=this;void 0===b&&(b=a,a=!1),b=this.checkFilters(b),b=this.change("setFilters",b);var d=b.map(function(a){return a.id});if(a||!function a(b){b.each(function(a){a.filter&&d.indexOf(a.filter.id)===-1&&g.error("ChangeFilter",'A rule is using filter "{0}"',a.filter.id)},a)}(this.model.root),this.filters=b,function a(b){b.each(!0,function(a){a.filter&&d.indexOf(a.filter.id)===-1?(a.drop(),c.trigger("rulesChanged")):(c.createRuleFilters(a),a.$el.find(f.selectors.rule_filter).val(a.filter?a.filter.id:"-1"),c.trigger("afterUpdateRuleFilter",a))},a)}(this.model.root),this.settings.plugins&&(this.settings.plugins["unique-filter"]&&this.updateDisabledFilters(),this.settings.plugins["bt-selectpicker"]&&this.$el.find(f.selectors.rule_filter).selectpicker("render")),this.settings.default_filter)try{this.getFilterById(this.settings.default_filter);
}catch(a){this.settings.default_filter=null}this.trigger("afterSetFilters",b)},addFilter:function(b,c){void 0===c||"#end"==c?c=this.filters.length:"#start"==c&&(c=0),a.isArray(b)||(b=[b]);var d=a.extend(!0,[],this.filters);parseInt(c)==c?Array.prototype.splice.apply(d,[c,0].concat(b)):this.filters.some(function(a,b){if(a.id==c)return c=b+1,!0})?Array.prototype.splice.apply(d,[c,0].concat(b)):Array.prototype.push.apply(d,b),this.setFilters(d)},removeFilter:function(b,c){var d=a.extend(!0,[],this.filters);"string"==typeof b&&(b=[b]),d=d.filter(function(a){return b.indexOf(a.id)===-1}),this.setFilters(c,d)}}),f.define("chosen-selectpicker",function(b){a.fn.chosen||g.error("MissingLibrary",'chosen is required to use "chosen-selectpicker" plugin. Get it here: https://github.com/harvesthq/chosen'),this.settings.plugins["bt-selectpicker"]&&g.error("Conflict","bt-selectpicker is already selected as the dropdown plugin. Please remove chosen-selectpicker from the plugin list");var c=f.selectors;this.on("afterCreateRuleFilters",function(a,d){d.$el.find(c.rule_filter).removeClass("form-control").chosen(b)}),this.on("afterCreateRuleOperators",function(a,d){d.$el.find(c.rule_operator).removeClass("form-control").chosen(b)}),this.on("afterUpdateRuleFilter",function(a,b){b.$el.find(c.rule_filter).trigger("chosen:updated")}),this.on("afterUpdateRuleOperator",function(a,b){b.$el.find(c.rule_operator).trigger("chosen:updated")}),this.on("beforeDeleteRule",function(a,b){b.$el.find(c.rule_filter).chosen("destroy"),b.$el.find(c.rule_operator).chosen("destroy")})}),f.define("filter-description",function(b){"inline"===b.mode?this.on("afterUpdateRuleFilter afterUpdateRuleOperator",function(c,d){var e=d.$el.find("p.filter-description"),f=c.builder.getFilterDescription(d.filter,d);f?(0===e.length?(e=a('<p class="filter-description"></p>'),e.appendTo(d.$el)):e.css("display",""),e.html('<i class="'+b.icon+'"></i> '+f)):e.hide()}):"popover"===b.mode?(a.fn.popover&&a.fn.popover.Constructor&&a.fn.popover.Constructor.prototype.fixTitle||g.error("MissingLibrary",'Bootstrap Popover is required to use "filter-description" plugin. Get it here: http://getbootstrap.com'),this.on("afterUpdateRuleFilter afterUpdateRuleOperator",function(c,d){var e=d.$el.find("button.filter-description"),g=c.builder.getFilterDescription(d.filter,d);g?(0===e.length?(e=a('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="popover"><i class="'+b.icon+'"></i></button>'),e.prependTo(d.$el.find(f.selectors.rule_actions)),e.popover({placement:"left",container:"body",html:!0}),e.on("mouseout",function(){e.popover("hide")})):e.css("display",""),e.data("bs.popover").options.content=g,e.attr("aria-describedby")&&e.popover("show")):(e.hide(),e.data("bs.popover")&&e.popover("hide"))})):"bootbox"===b.mode&&("bootbox"in window||g.error("MissingLibrary",'Bootbox is required to use "filter-description" plugin. Get it here: http://bootboxjs.com'),this.on("afterUpdateRuleFilter afterUpdateRuleOperator",function(c,d){var e=d.$el.find("button.filter-description"),g=c.builder.getFilterDescription(d.filter,d);g?(0===e.length?(e=a('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="bootbox"><i class="'+b.icon+'"></i></button>'),e.prependTo(d.$el.find(f.selectors.rule_actions)),e.on("click",function(){bootbox.alert(e.data("description"))})):e.css("display",""),e.data("description",g)):e.hide()}))},{icon:"glyphicon glyphicon-info-sign",mode:"popover"}),f.extend({getFilterDescription:function(a,b){return a?"function"==typeof a.description?a.description.call(this,b):a.description:void 0}}),f.define("invert",function(b){var c=this,d=f.selectors;this.on("afterInit",function(){c.$el.on("click.queryBuilder","[data-invert=group]",function(){var e=a(this).closest(d.group_container);c.invert(c.getModel(e),b)}),b.display_rules_button&&b.invert_rules&&c.$el.on("click.queryBuilder","[data-invert=rule]",function(){var e=a(this).closest(d.rule_container);c.invert(c.getModel(e),b)})}),b.disable_template||(this.on("getGroupTemplate.filter",function(e){var f=a(e.value);f.find(d.condition_container).after('<button type="button" class="btn btn-xs btn-default" data-invert="group"><i class="'+b.icon+'"></i> '+c.translate("invert")+"</button>"),e.value=f.prop("outerHTML")}),b.display_rules_button&&b.invert_rules&&this.on("getRuleTemplate.filter",function(e){var f=a(e.value);f.find(d.rule_actions).prepend('<button type="button" class="btn btn-xs btn-default" data-invert="rule"><i class="'+b.icon+'"></i> '+c.translate("invert")+"</button>"),e.value=f.prop("outerHTML")}))},{icon:"glyphicon glyphicon-random",recursive:!0,invert_rules:!0,display_rules_button:!1,silent_fail:!1,disable_template:!1}),f.defaults({operatorOpposites:{equal:"not_equal",not_equal:"equal",in:"not_in",not_in:"in",less:"greater_or_equal",less_or_equal:"greater",greater:"less_or_equal",greater_or_equal:"less",between:"not_between",not_between:"between",begins_with:"not_begins_with",not_begins_with:"begins_with",contains:"not_contains",not_contains:"contains",ends_with:"not_ends_with",not_ends_with:"ends_with",is_empty:"is_not_empty",is_not_empty:"is_empty",is_null:"is_not_null",is_not_null:"is_null"},conditionOpposites:{AND:"OR",OR:"AND"}}),f.extend({invert:function(b,c){if(!(b instanceof h)){if(!this.model.root)return;c=b,b=this.model.root}if("object"!=typeof c&&(c={}),void 0===c.recursive&&(c.recursive=!0),void 0===c.invert_rules&&(c.invert_rules=!0),void 0===c.silent_fail&&(c.silent_fail=!1),void 0===c.trigger&&(c.trigger=!0),b instanceof i){if(this.settings.conditionOpposites[b.condition]?b.condition=this.settings.conditionOpposites[b.condition]:c.silent_fail||g.error("InvertCondition",'Unknown inverse of condition "{0}"',b.condition),c.recursive){var d=a.extend({},c,{trigger:!1});b.each(function(a){c.invert_rules&&this.invert(a,d)},function(a){this.invert(a,d)},this)}}else if(b instanceof j&&b.operator&&!b.filter.no_invert)if(this.settings.operatorOpposites[b.operator.type]){var e=this.settings.operatorOpposites[b.operator.type];b.filter.operators&&b.filter.operators.indexOf(e)==-1||(b.operator=this.getOperatorByType(e))}else c.silent_fail||g.error("InvertOperator",'Unknown inverse of operator "{0}"',b.operator.type);c.trigger&&(this.trigger("afterInvert",b,c),this.trigger("rulesChanged"))}}),f.defaults({mongoOperators:{equal:function(a){return a[0]},not_equal:function(a){return{$ne:a[0]}},in:function(a){return{$in:a}},not_in:function(a){return{$nin:a}},less:function(a){return{$lt:a[0]}},less_or_equal:function(a){return{$lte:a[0]}},greater:function(a){return{$gt:a[0]}},greater_or_equal:function(a){return{$gte:a[0]}},between:function(a){return{$gte:a[0],$lte:a[1]}},not_between:function(a){return{$lt:a[0],$gt:a[1]}},begins_with:function(a){return{$regex:"^"+g.escapeRegExp(a[0])}},not_begins_with:function(a){return{$regex:"^(?!"+g.escapeRegExp(a[0])+")"}},contains:function(a){return{$regex:g.escapeRegExp(a[0])}},not_contains:function(a){return{$regex:"^((?!"+g.escapeRegExp(a[0])+").)*$",$options:"s"}},ends_with:function(a){return{$regex:g.escapeRegExp(a[0])+"$"}},not_ends_with:function(a){return{$regex:"(?<!"+g.escapeRegExp(a[0])+")$"}},is_empty:function(a){return""},is_not_empty:function(a){return{$ne:""}},is_null:function(a){return null},is_not_null:function(a){return{$ne:null}}},mongoRuleOperators:{$eq:function(a){return{val:a,op:null===a?"is_null":""===a?"is_empty":"equal"}},$ne:function(a){return a=a.$ne,{val:a,op:null===a?"is_not_null":""===a?"is_not_empty":"not_equal"}},$regex:function(a){return a=a.$regex,"^(?!"==a.slice(0,4)&&")"==a.slice(-1)?{val:a.slice(4,-1),op:"not_begins_with"}:"^((?!"==a.slice(0,5)&&").)*$"==a.slice(-5)?{val:a.slice(5,-5),op:"not_contains"}:"(?<!"==a.slice(0,4)&&")$"==a.slice(-2)?{val:a.slice(4,-2),op:"not_ends_with"}:"$"==a.slice(-1)?{val:a.slice(0,-1),op:"ends_with"}:"^"==a.slice(0,1)?{val:a.slice(1),op:"begins_with"}:{val:a,op:"contains"}},between:function(a){return{val:[a.$gte,a.$lte],op:"between"}},not_between:function(a){return{val:[a.$lt,a.$gt],op:"not_between"}},$in:function(a){return{val:a.$in,op:"in"}},$nin:function(a){return{val:a.$nin,op:"not_in"}},$lt:function(a){return{val:a.$lt,op:"less"}},$lte:function(a){return{val:a.$lte,op:"less_or_equal"}},$gt:function(a){return{val:a.$gt,op:"greater"}},$gte:function(a){return{val:a.$gte,op:"greater_or_equal"}}}}),f.extend({getMongo:function(a){if(a=void 0===a?this.getRules():a,!a)return null;var b=this;return function a(c){if(c.condition||(c.condition=b.settings.default_condition),["AND","OR"].indexOf(c.condition.toUpperCase())===-1&&g.error("UndefinedMongoCondition",'Unable to build MongoDB query with condition "{0}"',c.condition),!c.rules)return{};var d=[];c.rules.forEach(function(c){if(c.rules&&c.rules.length>0)d.push(a(c));else{var e=b.settings.mongoOperators[c.operator],f=b.getOperatorByType(c.operator);void 0===e&&g.error("UndefinedMongoOperator",'Unknown MongoDB operation for operator "{0}"',c.operator),0!==f.nb_inputs&&(c.value instanceof Array||(c.value=[c.value]));var h=b.change("getMongoDBField",c.field,c),i={};i[h]=e.call(b,c.value),d.push(b.change("ruleToMongo",i,c,c.value,e))}});var e={};return e["$"+c.condition.toLowerCase()]=d,b.change("groupToMongo",e,c)}(a)},getRulesFromMongo:function(a){if(void 0===a||null===a)return null;var b=this;if(a=b.change("parseMongoNode",a),"rules"in a&&"condition"in a)return a;if("id"in a&&"operator"in a&&"value"in a)return{condition:this.settings.default_condition,rules:[a]};var c=b.getMongoCondition(a);return c||g.error("MongoParse","Invalid MongoDB query format"),function a(c,d){var e=c[d],f=[];return e.forEach(function(c){if(c=b.change("parseMongoNode",c),"rules"in c&&"condition"in c)return void f.push(c);if("id"in c&&"operator"in c&&"value"in c)return void f.push(c);var d=b.getMongoCondition(c);if(d)f.push(a(c,d));else{var e=Object.keys(c)[0],h=c[e],i=b.getMongoOperator(h);void 0===i&&g.error("MongoParse","Invalid MongoDB query format");var j=b.settings.mongoRuleOperators[i];void 0===j&&g.error("UndefinedMongoOperator",'JSON Rule operation unknown for operator "{0}"',i);var k=j.call(b,h),l=b.getMongoDBFieldID(e,h),m=b.change("mongoToRule",{id:l,field:e,operator:k.op,value:k.val},c);f.push(m)}}),b.change("mongoToGroup",{condition:d.replace("$","").toUpperCase(),rules:f},c)}(a,c)},setRulesFromMongo:function(a){this.setRules(this.getRulesFromMongo(a))},getMongoDBFieldID:function(a,b){var c,d=this.filters.filter(function(b){return b.field===a});return c=1===d.length?d[0].id:this.change("getMongoDBFieldID",a,b)},getMongoOperator:function(a){if(null===a||"object"!=typeof a)return"$eq";if(void 0!==a.$gte&&void 0!==a.$lte)return"between";if(void 0!==a.$lt&&void 0!==a.$gt)return"not_between";var b=Object.keys(a).filter(function(a){return!!this.settings.mongoRuleOperators[a]}.bind(this));return 1===b.length?b[0]:void 0},getMongoCondition:function(a){for(var b=Object.keys(a),c=0,d=b.length;c<d;c++)if("$or"===b[c].toLowerCase()||"$and"===b[c].toLowerCase())return b[c]}}),f.define("not-group",function(b){var c=this;this.on("afterInit",function(){c.$el.on("click.queryBuilder","[data-not=group]",function(){var b=a(this).closest(f.selectors.group_container),d=c.getModel(b);d.not=!d.not}),c.model.on("update",function(a,b,d){b instanceof i&&"not"===d&&c.updateGroupNot(b)})}),this.on("afterAddGroup",function(a,b){b.__.not=!1}),b.disable_template||this.on("getGroupTemplate.filter",function(d){var e=a(d.value);e.find(f.selectors.condition_container).prepend('<button type="button" class="btn btn-xs btn-default" data-not="group"><i class="'+b.icon_unchecked+'"></i> '+c.translate("NOT")+"</button>"),d.value=e.prop("outerHTML")}),this.on("groupToJson.filter",function(a,b){a.value.not=b.not}),this.on("jsonToGroup.filter",function(a,b){a.value.not=!!b.not}),this.on("groupToSQL.filter",function(a,b){b.not&&(a.value="NOT ( "+a.value+" )")}),this.on("parseSQLNode.filter",function(a){a.value.name&&"NOT"==a.value.name.toUpperCase()&&(a.value=a.value.arguments.value[0],["AND","OR"].indexOf(a.value.operation.toUpperCase())===-1&&(a.value=new SQLParser.nodes.Op(c.settings.default_condition,a.value,null)),a.value.not=!0)}),this.on("sqlGroupsDistinct.filter",function(a,b,c,d){c.not&&d>0&&(a.value=!0)}),this.on("sqlToGroup.filter",function(a,b){a.value.not=!!b.not}),this.on("groupToMongo.filter",function(a,b){var c="$"+b.condition.toLowerCase();b.not&&a.value[c]&&(a.value={$nor:[a.value]})}),this.on("parseMongoNode.filter",function(a){var b=Object.keys(a.value);"$nor"==b[0]&&(a.value=a.value[b[0]][0],a.value.not=!0)}),this.on("mongoToGroup.filter",function(a,b){a.value.not=!!b.not})},{icon_unchecked:"glyphicon glyphicon-unchecked",icon_checked:"glyphicon glyphicon-check",disable_template:!1}),g.defineModelProperties(i,["not"]),f.selectors.group_not=f.selectors.group_header+" [data-not=group]",f.extend({updateGroupNot:function(a){var b=this.plugins["not-group"];a.$el.find(">"+f.selectors.group_not).toggleClass("active",a.not).find("i").attr("class",a.not?b.icon_checked:b.icon_unchecked),this.trigger("afterUpdateGroupNot",a),this.trigger("rulesChanged")}}),f.define("sortable",function(b){"interact"in window||g.error("MissingLibrary",'interact.js is required to use "sortable" plugin. Get it here: http://interactjs.io'),void 0!==b.default_no_sortable&&(g.error(!1,"Config",'Sortable plugin : "default_no_sortable" options is deprecated, use standard "default_rule_flags" and "default_group_flags" instead'),this.settings.default_rule_flags.no_sortable=this.settings.default_group_flags.no_sortable=b.default_no_sortable),interact.dynamicDrop(!0),interact.pointerMoveTolerance(10);var c,e,h,j;this.on("afterAddRule afterAddGroup",function(g,k){if(k!=c){var l=g.builder;b.inherit_no_sortable&&k.parent&&k.parent.flags.no_sortable&&(k.flags.no_sortable=!0),b.inherit_no_drop&&k.parent&&k.parent.flags.no_drop&&(k.flags.no_drop=!0),k.flags.no_sortable||interact(k.$el[0]).draggable({allowFrom:f.selectors.drag_handle,onstart:function(b){j=!1,h=l.getModel(b.target),e=h.$el.clone().appendTo(h.$el.parent()).width(h.$el.outerWidth()).addClass("dragging");var d=a('<div class="rule-placeholder">&nbsp;</div>').height(h.$el.outerHeight());c=h.parent.addRule(d,h.getPos()),h.$el.hide()},onmove:function(a){e[0].style.top=a.clientY-15+"px",e[0].style.left=a.clientX-15+"px"},onend:function(b){b.dropzone&&(d(h,a(b.relatedTarget),l),j=!0),e.remove(),e=void 0,c.drop(),c=void 0,h.$el.css("display",""),l.trigger("afterMove",h),l.trigger("rulesChanged")}}),k.flags.no_drop||(interact(k.$el[0]).dropzone({accept:f.selectors.rule_and_group_containers,ondragenter:function(b){d(c,a(b.target),l)},ondrop:function(b){j||d(h,a(b.target),l)}}),k instanceof i&&interact(k.$el.find(f.selectors.group_header)[0]).dropzone({accept:f.selectors.rule_and_group_containers,ondragenter:function(b){d(c,a(b.target),l)},ondrop:function(b){j||d(h,a(b.target),l)}}))}}),this.on("beforeDeleteRule beforeDeleteGroup",function(a,b){a.isDefaultPrevented()||(interact(b.$el[0]).unset(),b instanceof i&&interact(b.$el.find(f.selectors.group_header)[0]).unset())}),this.on("afterApplyRuleFlags afterApplyGroupFlags",function(a,b){b.flags.no_sortable&&b.$el.find(".drag-handle").remove()}),b.disable_template||(this.on("getGroupTemplate.filter",function(c,d){if(d>1){var e=a(c.value);e.find(f.selectors.condition_container).after('<div class="drag-handle"><i class="'+b.icon+'"></i></div>'),c.value=e.prop("outerHTML")}}),this.on("getRuleTemplate.filter",function(c){var d=a(c.value);d.find(f.selectors.rule_header).after('<div class="drag-handle"><i class="'+b.icon+'"></i></div>'),c.value=d.prop("outerHTML")}))},{inherit_no_sortable:!0,inherit_no_drop:!0,icon:"glyphicon glyphicon-sort",disable_template:!1}),f.selectors.rule_and_group_containers=f.selectors.rule_container+", "+f.selectors.group_container,f.selectors.drag_handle=".drag-handle",f.defaults({default_rule_flags:{no_sortable:!1,no_drop:!1},default_group_flags:{no_sortable:!1,no_drop:!1}}),f.define("sql-support",function(a){},{boolean_as_integer:!0}),f.defaults({sqlOperators:{equal:{op:"= ?"},not_equal:{op:"!= ?"},in:{op:"IN(?)",sep:", "},not_in:{op:"NOT IN(?)",sep:", "},less:{op:"< ?"},less_or_equal:{op:"<= ?"},greater:{op:"> ?"},greater_or_equal:{op:">= ?"},between:{op:"BETWEEN ?",sep:" AND "},not_between:{op:"NOT BETWEEN ?",sep:" AND "},begins_with:{op:"LIKE(?)",mod:"{0}%"},not_begins_with:{op:"NOT LIKE(?)",mod:"{0}%"},contains:{op:"LIKE(?)",mod:"%{0}%"},not_contains:{op:"NOT LIKE(?)",mod:"%{0}%"},ends_with:{op:"LIKE(?)",mod:"%{0}"},not_ends_with:{op:"NOT LIKE(?)",mod:"%{0}"},is_empty:{op:"= ''"},is_not_empty:{op:"!= ''"},is_null:{op:"IS NULL"},is_not_null:{op:"IS NOT NULL"}},sqlRuleOperator:{"=":function(a){return{val:a,op:""===a?"is_empty":"equal"}},"!=":function(a){return{val:a,op:""===a?"is_not_empty":"not_equal"}},LIKE:function(a){return"%"==a.slice(0,1)&&"%"==a.slice(-1)?{val:a.slice(1,-1),op:"contains"}:"%"==a.slice(0,1)?{val:a.slice(1),op:"ends_with"}:"%"==a.slice(-1)?{val:a.slice(0,-1),op:"begins_with"}:void g.error("SQLParse",'Invalid value for LIKE operator "{0}"',a)},"NOT LIKE":function(a){return"%"==a.slice(0,1)&&"%"==a.slice(-1)?{val:a.slice(1,-1),op:"not_contains"}:"%"==a.slice(0,1)?{val:a.slice(1),op:"not_ends_with"}:"%"==a.slice(-1)?{val:a.slice(0,-1),op:"not_begins_with"}:void g.error("SQLParse",'Invalid value for NOT LIKE operator "{0}"',a)},IN:function(a){return{val:a,op:"in"}},"NOT IN":function(a){return{val:a,op:"not_in"}},"<":function(a){return{val:a,op:"less"}},"<=":function(a){return{val:a,op:"less_or_equal"}},">":function(a){return{val:a,op:"greater"}},">=":function(a){return{val:a,op:"greater_or_equal"}},BETWEEN:function(a){return{val:a,op:"between"}},"NOT BETWEEN":function(a){return{val:a,op:"not_between"}},IS:function(a){return null!==a&&g.error("SQLParse","Invalid value for IS operator"),{val:null,op:"is_null"}},"IS NOT":function(a){return null!==a&&g.error("SQLParse","Invalid value for IS operator"),{val:null,op:"is_not_null"}}},sqlStatements:{question_mark:function(){var a=[];return{add:function(b,c){return a.push(c),"?"},run:function(){return a}}},numbered:function(a){(!a||a.length>1)&&(a="$");var b=0,c=[];return{add:function(d,e){return c.push(e),b++,a+b},run:function(){return c}}},named:function(a){(!a||a.length>1)&&(a=":");var b={},c={};return{add:function(d,e){b[d.field]||(b[d.field]=1);var f=d.field+"_"+b[d.field]++;return c[f]=e,a+f},run:function(){return c}}}},sqlRuleStatement:{question_mark:function(a){var b=0;return{parse:function(c){return"?"==c?a[b++]:c},esc:function(a){return a.replace(/\?/g,"'?'")}}},numbered:function(a,b){(!b||b.length>1)&&(b="$");var c=new RegExp("^\\"+b+"[0-9]+$"),d=new RegExp("\\"+b+"([0-9]+)","g");return{parse:function(b){return c.test(b)?a[b.slice(1)-1]:b},esc:function(a){return a.replace(d,"'"+("$"==b?"$$":b)+"$1'")}}},named:function(a,b){(!b||b.length>1)&&(b=":");var c=new RegExp("^\\"+b),d=new RegExp("\\"+b+"("+Object.keys(a).join("|")+")","g");return{parse:function(b){return c.test(b)?a[b.slice(1)]:b},esc:function(a){return a.replace(d,"'"+("$"==b?"$$":b)+"$1'")}}}}}),f.extend({getSQL:function(a,b,c){if(c=void 0===c?this.getRules():c,!c)return null;b=b?"\n":" ";var d=this.getPluginOptions("sql-support","boolean_as_integer");if(a===!0&&(a="question_mark"),"string"==typeof a){var f=e(a);a=this.settings.sqlStatements[f[1]](f[2])}var h=this,i=function c(e){if(e.condition||(e.condition=h.settings.default_condition),["AND","OR"].indexOf(e.condition.toUpperCase())===-1&&g.error("UndefinedSQLCondition",'Unable to build SQL query with condition "{0}"',e.condition),!e.rules)return"";var f=[];e.rules.forEach(function(e){if(e.rules&&e.rules.length>0)f.push("("+b+c(e)+b+")"+b);else{var i=h.settings.sqlOperators[e.operator],j=h.getOperatorByType(e.operator),k="";void 0===i&&g.error("UndefinedSQLOperator",'Unknown SQL operation for operator "{0}"',e.operator),0!==j.nb_inputs&&(e.value instanceof Array||(e.value=[e.value]),e.value.forEach(function(b,c){c>0&&(k+=i.sep),"boolean"==e.type&&d?b=b?1:0:a||"integer"===e.type||"double"===e.type||"boolean"===e.type||(b=g.escapeString(b)),i.mod&&(b=g.fmt(i.mod,b)),a?k+=a.add(e,b):("string"==typeof b&&(b="'"+b+"'"),k+=b)}));var l=function(a){return i.op.replace("?",function(){return a})},m=h.change("getSQLField",e.field,e),n=m+" "+l(k);f.push(h.change("ruleToSQL",n,e,k,l))}});var i=f.join(" "+e.condition+b);return h.change("groupToSQL",i,e)}(c);return a?{sql:i,params:a.run()}:{sql:i}},getRulesFromSQL:function(b,c){"SQLParser"in window||g.error("MissingLibrary","SQLParser is required to parse SQL queries. Get it here https://github.com/mistic100/sql-parser");var d=this;if("string"==typeof b&&(b={sql:b}),c===!0&&(c="question_mark"),"string"==typeof c){var f=e(c);c=this.settings.sqlRuleStatement[f[1]](b.params,f[2])}c&&(b.sql=c.esc(b.sql)),0!==b.sql.toUpperCase().indexOf("SELECT")&&(b.sql="SELECT * FROM table WHERE "+b.sql);var h=SQLParser.parse(b.sql);h.where||g.error("SQLParse","No WHERE clause found");var i=d.change("parseSQLNode",h.where.conditions);if("rules"in i&&"condition"in i)return i;if("id"in i&&"operator"in i&&"value"in i)return{condition:this.settings.default_condition,rules:[i]};var j=d.change("sqlToGroup",{condition:this.settings.default_condition,rules:[]},i),k=j;return function b(e,f){if(null!==e){if(e=d.change("parseSQLNode",e),"rules"in e&&"condition"in e)return void k.rules.push(e);if("id"in e&&"operator"in e&&"value"in e)return void k.rules.push(e);if("left"in e&&"right"in e&&"operation"in e||g.error("SQLParse","Unable to parse WHERE clause"),["AND","OR"].indexOf(e.operation.toUpperCase())!==-1){var h=d.change("sqlGroupsDistinct",f>0&&k.condition!=e.operation.toUpperCase(),k,e,f);if(h){var i=d.change("sqlToGroup",{condition:d.settings.default_condition,rules:[]},e);k.rules.push(i),k=i}k.condition=e.operation.toUpperCase(),f++;var j=k;b(e.left,f),k=j,b(e.right,f)}else{a.isPlainObject(e.right.value)&&g.error("SQLParse","Value format not supported for {0}.",e.left.value);var l;l=a.isArray(e.right.value)?e.right.value.map(function(a){return a.value}):e.right.value,c&&(l=a.isArray(l)?l.map(c.parse):c.parse(l));var m=e.operation.toUpperCase();"<>"==m&&(m="!=");var n=d.settings.sqlRuleOperator[m];void 0===n&&g.error("UndefinedSQLOperator",'Invalid SQL operation "{0}".',e.operation);var o,p=n.call(this,l,e.operation);"values"in e.left?o=e.left.values.join("."):"value"in e.left?o=e.left.value:g.error("SQLParse","Cannot find field name in {0}",JSON.stringify(e.left));var q=d.getSQLFieldID(o,l),r=d.change("sqlToRule",{id:q,field:o,operator:p.op,value:p.val},e);k.rules.push(r)}}}(i,0),j},setRulesFromSQL:function(a,b){this.setRules(this.getRulesFromSQL(a,b))},getSQLFieldID:function(a,b){var c,d=this.filters.filter(function(b){return b.field.toLowerCase()===a.toLowerCase()});return c=1===d.length?d[0].id:this.change("getSQLFieldID",a,b)}}),f.define("unique-filter",function(){this.status.used_filters={},this.on("afterUpdateRuleFilter",this.updateDisabledFilters),this.on("afterDeleteRule",this.updateDisabledFilters),this.on("afterCreateRuleFilters",this.applyDisabledFilters),this.on("afterReset",this.clearDisabledFilters),this.on("afterClear",this.clearDisabledFilters),this.on("getDefaultFilter.filter",function(a,b){var c=a.builder;if(c.updateDisabledFilters(),a.value.id in c.status.used_filters){var d=c.filters.some(function(d){if(!(d.id in c.status.used_filters)||c.status.used_filters[d.id].length>0&&c.status.used_filters[d.id].indexOf(b.parent)===-1)return a.value=d,!0});d||(g.error(!1,"UniqueFilter","No more non-unique filters available"),a.value=void 0)}})}),f.extend({updateDisabledFilters:function(a){var b=a?a.builder:this;b.status.used_filters={},b.model&&(!function a(c){c.each(function(a){a.filter&&a.filter.unique&&(b.status.used_filters[a.filter.id]||(b.status.used_filters[a.filter.id]=[]),"group"==a.filter.unique&&b.status.used_filters[a.filter.id].push(a.parent))},function(b){a(b)})}(b.model.root),b.applyDisabledFilters(a))},clearDisabledFilters:function(a){var b=a?a.builder:this;b.status.used_filters={},b.applyDisabledFilters(a)},applyDisabledFilters:function(b){var c=b?b.builder:this;c.$el.find(f.selectors.filter_container+" option").prop("disabled",!1),a.each(c.status.used_filters,function(a,b){0===b.length?c.$el.find(f.selectors.filter_container+' option[value="'+a+'"]:not(:selected)').prop("disabled",!0):b.forEach(function(b){b.each(function(b){b.$el.find(f.selectors.filter_container+' option[value="'+a+'"]:not(:selected)').prop("disabled",!0)})})}),c.settings.plugins&&c.settings.plugins["bt-selectpicker"]&&c.$el.find(f.selectors.rule_filter).selectpicker("render")}}),f.regional.en={__locale:"English (en)",__author:'Damien "Mistic" Sorel, http://www.strangeplanet.fr',add_rule:t("querybuilder.common.add_rule"),add_group:t("querybuilder.common.add_group"),delete_rule:t("querybuilder.common.delete_rule"),delete_group:t("querybuilder.common.delete_group"),conditions:{AND:t("querybuilder.conditions.AND"),OR:t("querybuilder.conditions.OR")},operators:{equal:t("querybuilder.operators.equal"),not_equal:t("querybuilder.operators.not_equal"),in:t("querybuilder.operators.in"),not_in:t("querybuilder.operators.not_in"),less:t("querybuilder.operators.less"),less_or_equal:t("querybuilder.operators.less_or_equal"),greater:t("querybuilder.operators.greater"),greater_or_equal:t("querybuilder.operators.greater_or_equal"),between:t("querybuilder.operators.between"),not_between:t("querybuilder.operators.not_between"),begins_with:t("querybuilder.operators.begins_with"),not_begins_with:t("querybuilder.operators.not_begins_with"),contains:t("querybuilder.operators.contains"),not_contains:t("querybuilder.operators.not_contains"),ends_with:t("querybuilder.operators.ends_with"),not_ends_with:t("querybuilder.operators.not_ends_with"),is_empty:t("querybuilder.operators.is_empty"),is_not_empty:t("querybuilder.operators.is_not_empty"),is_null:t("querybuilder.operators.is_null"),is_not_null:t("querybuilder.operators.is_not_null"),like:"Like",not_like:"Not like"},errors:{no_filter:t("querybuilder.errors.no_filter"),empty_group:t("querybuilder.errors.empty_group"),radio_empty:t("querybuilder.errors.radio_empty"),checkbox_empty:t("querybuilder.errors.checkbox_empty"),select_empty:t("querybuilder.errors.select_empty"),string_empty:t("querybuilder.errors.string_empty"),string_exceed_min_length:t("querybuilder.errors.string_exceed_min_length"),string_exceed_max_length:t("querybuilder.errors.string_exceed_max_length"),string_invalid_format:t("querybuilder.errors.string_invalid_format"),number_nan:t("querybuilder.errors.number_nan"),number_not_integer:t("querybuilder.errors.number_not_integer"),number_not_double:t("querybuilder.errors.number_not_double"),number_exceed_min:t("querybuilder.errors.number_exceed_min"),number_exceed_max:t("querybuilder.errors.number_exceed_max"),number_wrong_step:t("querybuilder.errors.number_wrong_step"),number_between_invalid:"Invalid values, {0} is greater than {1}",datetime_empty:t("querybuilder.errors.datetime_empty"),datetime_invalid:t("querybuilder.errors.datetime_invalid"),datetime_exceed_min:t("querybuilder.errors.datetime_exceed_min"),datetime_exceed_max:t("querybuilder.errors.datetime_exceed_max"),datetime_between_invalid:"Invalid values, {0} is greater than {1}",boolean_not_valid:t("querybuilder.errors.boolean_not_valid"),operator_not_multiple:t("querybuilder.errors.operator_not_multiple")},invert:t("querybuilder.common.invert"),NOT:"NOT"},f.defaults({lang_code:"en"}),f}),function(){var a;a=function(a,b,c){var d=this;b=_.bind(b,this),c=c&&c.exists()?c.first():$(document),_.each(a,function(a,e){c.on(e,a,function(a){d.event=a,d.trigger=e,d.el=$(this),b(),$(d.event.target).is("a")&&d.event.preventDefault()})})},a.new=function(b,c,d){new a(b,c,d)},a.translate=function(a){var b={};return _.each(a,function(a,c){a=a.split(/,\s?/),a=_.map(a,function(a){return'[data-action="'+a+'"]'}).join(", "),b[c]=a}),b},AGN.Lib.Action=a}(),function(){function a(a,b,c){var d=AGN.Lib.Storage.get("autosave#"+a);if(d){var e=b?b(d.values,d.timestamp):d.values;if(e){var f=AGN.Lib.Template.text("autosave-restore",{modalClass:"",title:t("autosave.confirm.title"),content:t("autosave.confirm.question",new Date(d.timestamp)),negative:t("autosave.discard"),positive:t("autosave.restore")});AGN.Lib.Confirm.create(f).done(function(){c(e===!0?d.values:e,d.timestamp),AGN.Lib.Messages(t("autosave.success.title"),t("autosave.success.message"),"success")}).fail(function(){AGN.Lib.Storage.delete("autosave#"+a)})}}}function b(a,b,c){var d=function(){var c=b();return c&&AGN.Lib.Storage.set("autosave#"+a,{timestamp:(new Date).getTime(),values:c}),c!==!1};if(c>0)var e=setInterval(function(){d()||clearInterval(e)},1e3*c);var f=function(){d()||$(document).unbind("ajax:unauthorized",f)};$(document).on("ajax:unauthorized",f)}AGN.Lib.AutoSave={initialize:function(c,d,e,f,g){a(c,e,f),b(c,d,g)}}}(),function(){function a(a){var b=a.parent().width(),c=0;return a.children("li").each(function(){c+=$(this).outerWidth(!0)}),c<=b}AGN.Lib.Breadcrumbs={truncate:function(b){$.each(b.find(".breadcrumbs.js-ellipsis"),function(b,c){var d=$(c),e=d.children("li");if(d.find("*").removeClass("breadcrumb-element-small"),e.removeClass("abbreviated"),e.css({"min-width":"","max-width":""}),e.show(),!a(d)&&(d.find("*").addClass("breadcrumb-element-small"),!a(d))){var f=[],g=d.parent().width();$.each(e,function(a,b){var c=$(b);if(c.hasClass("js-ellipsis")){var d=c.html();c.html("&hellip;");var e=c.outerWidth(!0);c.html(d);var h=c.outerWidth(!0),i=e<h?e:h;c.addClass("abbreviated");var j=c.outerWidth(!0);c.removeClass("abbreviated"),f.unshift({$item:c,width:h,minimumWidth:i+1,minimumWidthAbbreviated:i+(j-h)+1})}else g-=c.outerWidth(!0)});for(var h=f.length-1,i=0;i<=h;i++){var j=f[i],k=j.$item;if(j.width=k.outerWidth(!0),j.width>g){var l;if(i==h)l=j.minimumWidth;else{k.addClass("abbreviated"),l=j.minimumWidthAbbreviated;for(var m=i+1;m<=h;m++)f[m].$item.hide()}if(l>g&&i>0){k.hide();var n=f[i-1],o=n.$item;o.addClass("abbreviated"),o.outerWidth(!0)-n.width>g&&o.css("max-width",n.width+g)}else k.css("max-width",g);break}g-=j.width}}})}}}(),function(){var a;a=function(a,b){this.$modal=a,this.deferred=b||$.Deferred()},a.get=function(b){var c=a.getWrapper(b);return c.data("_confirm")},a.create=function(b,c){var d,e=AGN.Lib.Modal.create(b);return d=new a(e,c),e.data("_confirm",d),d.promise()},a.createFromTemplate=function(b,c,d){var e,f=AGN.Lib.Modal.createFromTemplate(b,c);return e=new a(f,d),f.data("_confirm",e),e.promise()},a.request=function(b){var c,d=$.Deferred();return c=_.isString(b)?$.get(b):b,c.done(function(b){var c=$(b),e=c.all(".modal");if(1===e.length){var f=new a(e,d);e.data("_confirm",f),AGN.Lib.Modal.create(e)}else AGN.Lib.Page.render(b),d.reject()}).fail(function(){d.reject()}),d.promise()},a.getWrapper=function(a){var b;return b=$(a.data("confirm-target")),0==b.length&&(b=a.closest(".modal")),b},a.prototype.promise=function(){return this.deferred.promise()},a.prototype.positive=function(a){this.deferred.resolve(a),this.$modal.modal("hide"),this.$modal.remove()},a.prototype.negative=function(a){this.deferred.reject(a),this.$modal.modal("hide"),this.$modal.remove()},AGN.Lib.Confirm=a}(),function(){var a;a=function(a){(a=_.bind(a,this))()},a.prototype.addAction=function(a,b){AGN.Lib.Action.new(AGN.Lib.Action.translate(a),b)},a.prototype.addInitializer=function(a,b){AGN.Initializers[a]=b},a.prototype.addDomInitializer=function(a,b){AGN.Lib.DomInitializer.new(a,b)},a.prototype.runInitializer=function(a){AGN.Initializers[a]()},a.new=function(a,b){AGN.Opt.Controllers[a]=b},a.init=function(a){a||(a=$(document)),a.all("[data-controller]").each(function(){var a=$(this),b=AGN.Opt.Controllers[a.data("controller")];b&&(new AGN.Lib.Controller(b),AGN.Opt.Controllers[a.data("controller")]=void 0)})},AGN.Lib.Controller=a}(),function(){var a={};a.get=function(b){var c,d=b.data("provider"),e=b.data("provider-src");switch(d){case"opt":c=a.opt(e);break;case"remote":
c=a.remote(e)}return c},a.opt=function(a){var b=$.Deferred();return AGN.Opt[a]?setTimeout(function(){b.resolve(AGN.Opt[a])},100):setTimeout(function(){b.reject()},100),b},a.remote=function(a){return $.get(a)},AGN.Lib.DataProvider=a}(),function(){var a;a={MONTH_NAMES:["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAY_NAMES:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],LZ:function(a){return(a<0||a>9?"":"0")+a},compareDates:function(b,c,d,e){var f=a.parseFormat(b,c),g=a.parseFormat(d,e);return 0==f||0==g?-1:f>g?1:0},format:function(b,c){c+="";var d,e="",f=0,g="",h="",i=b.getYear()+"",j=b.getMonth()+1,k=b.getDate(),l=b.getDay(),d=b.getHours(),m=b.getMinutes(),n=b.getSeconds(),o=new Object;for(i.length<4&&(i=""+(i-0+1900)),o.y=""+i,o.yyyy=i,o.yy=i.substring(2,4),o.M=j,o.MM=a.LZ(j),o.MMM=a.MONTH_NAMES[j-1],o.NNN=a.MONTH_NAMES[j+11],o.d=k,o.dd=a.LZ(k),o.E=a.DAY_NAMES[l+7],o.EE=a.DAY_NAMES[l],o.H=d,o.HH=a.LZ(d),0==d?o.h=12:d>12?o.h=d-12:o.h=d,o.hh=a.LZ(o.h),d>11?o.K=d-12:o.K=d,o.k=d+1,o.KK=a.LZ(o.K),o.kk=a.LZ(o.k),d>11?o.a="PM":o.a="AM",o.m=m,o.mm=a.LZ(m),o.s=n,o.ss=a.LZ(n);f<c.length;){for(g=c.charAt(f),h="";c.charAt(f)==g&&f<c.length;)h+=c.charAt(f++);e+=null!=o[h]?o[h]:h}return e},_isInteger:function(a){for(var b="1234567890",c=0;c<a.length;c++)if(b.indexOf(a.charAt(c))==-1)return!1;return!0},_getInt:function(b,c,d,e){for(var f=e;f>=d;f--){var g=b.substring(c,c+f);if(g.length<d)return null;if(a._isInteger(g))return g}return null},parseFormat:function(b,c){b+="",c+="";for(var d,e,f=0,g=0,h="",i="",j=new Date,k=j.getYear(),l=j.getMonth()+1,m=1,n=j.getHours(),o=j.getMinutes(),p=j.getSeconds(),q="";g<c.length;){for(h=c.charAt(g),i="";c.charAt(g)==h&&g<c.length;)i+=c.charAt(g++);if("yyyy"==i||"yy"==i||"y"==i){if("yyyy"==i&&(d=4),e=4,"yy"==i&&(d=2),e=2,"y"==i&&(d=2),e=4,k=a._getInt(b,f,d,e),null==k)return 0;f+=k.length,2==k.length&&(k=k>70?1900+(k-0):2e3+(k-0))}else if("MMM"==i||"NNN"==i){l=0;for(var r=0;r<a.MONTH_NAMES.length;r++){var s=a.MONTH_NAMES[r];if(b.substring(f,f+s.length).toLowerCase()==s.toLowerCase()&&("MMM"==i||"NNN"==i&&r>11)){l=r+1,l>12&&(l-=12),f+=s.length;break}}if(l<1||l>12)return 0}else if("EE"==i||"E"==i)for(var r=0;r<a.DAY_NAMES.length;r++){var t=a.DAY_NAMES[r];if(b.substring(f,f+t.length).toLowerCase()==t.toLowerCase()){f+=t.length;break}}else if("MM"==i||"M"==i){if(l=a._getInt(b,f,i.length,2),null==l||l<1||l>12)return 0;f+=l.length}else if("dd"==i||"d"==i){if(m=a._getInt(b,f,i.length,2),null==m||m<1||m>31)return 0;f+=m.length}else if("hh"==i||"h"==i){if(n=a._getInt(b,f,i.length,2),null==n||n<1||n>12)return 0;f+=n.length}else if("HH"==i||"H"==i){if(n=a._getInt(b,f,i.length,2),null==n||n<0||n>23)return 0;f+=n.length}else if("KK"==i||"K"==i){if(n=a._getInt(b,f,i.length,2),null==n||n<0||n>11)return 0;f+=n.length}else if("kk"==i||"k"==i){if(n=a._getInt(b,f,i.length,2),null==n||n<1||n>24)return 0;f+=n.length,n--}else if("mm"==i||"m"==i){if(o=a._getInt(b,f,i.length,2),null==o||o<0||o>59)return 0;f+=o.length}else if("ss"==i||"s"==i){if(p=a._getInt(b,f,i.length,2),null==p||p<0||p>59)return 0;f+=p.length}else if("a"==i){if("am"==b.substring(f,f+2).toLowerCase())q="AM";else{if("pm"!=b.substring(f,f+2).toLowerCase())return 0;q="PM"}f+=2}else{if(b.substring(f,f+i.length)!=i)return 0;f+=i.length}}if(f!=b.length)return 0;if(2==l)if(k%4==0&&k%100!=0||k%400==0){if(m>29)return 0}else if(m>28)return 0;if((4==l||6==l||9==l||11==l)&&m>30)return 0;n<12&&"PM"==q?n=n-0+12:n>11&&"AM"==q&&(n-=12);var u=new Date(k,l-1,m,n,o,p);return u},parse:function(b,c){if(c)return a.parseFormat(b,c);for(var d=2==arguments.length&&arguments[1],e=new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d"),f=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d"),g=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M"),h=[e,d?g:f,d?f:g],i=null,j=0;j<h.length;j++)for(var k=h[j],l=0;l<k.length;l++)if(i=a.parseFormat(b,k[l]),0!=i)return new Date(i);return null}},AGN.Lib.DateFormat=a}(),function(){function a(a,b){if(this.el=a,a.is(f))this.config=a.json();else{var c=a.find("script#"+CSS.escape(g+b));if(c.exists()){var d=c.attr("type");d&&"application/json"!==d?console.error("Unexpected config script type: `"+d+"`"):this.config=c.json()}}}function b(a){var b=a;b||(b=$(document)),b.all("[data-initializer]").each(function(){var b=$(this);c(b.data("initializer"),b,a)})}function c(b,c,d){var e=h["key#"+b];if(e){var f=e.call(new a(c,b),c,d);f===!1&&(h["key#"+b]=void 0)}}function d(a,b){if(h["key#"+a]){var d=b;d||(d=$(document));var e=d.all('[data-initializer="'+CSS.escape(a)+'"]');e.exists()&&c(a,e,b)}}function e(a,b){$.isFunction(b)?h["key#"+a]=b:console.error("Handler must be a function")}var f='script[type="application/json"]',g="config:",h={};a.prototype.addAction=function(a,b){AGN.Lib.Action.new(AGN.Lib.Action.translate(a),b,this.el)},AGN.Lib.DomInitializer={autorun:b,run:c,try:d,new:e}}(),function(){var a,b,c,d,e;a=function(a){var b,c,d,e,f=this;if(this.el=$(a),e=!!this.el.attr("readonly"),this.isFullHeight=!!this.el.data("full-height-editor"),this.height=15*parseInt(this.el.attr("rows")||15),b=this.el.attr("id")+"Editor",c=$("#"+b),1===c.length){d=b;var g=c.data("full-height-editor");c.css("height",g?"100%":this.height+"px")}else d=_.uniqueId("Editor"),c=$('<div id="'+d+'" class="form-control"></div>'),c.css("height",this.isFullHeight?"100%":this.height+"px"),c.insertAfter(this.el);this.el.hide(),this.editor=ace.edit(d),this.editor.setReadOnly(e),this.editor.getSession().setValue(this.el.val()),this.editor.getSession().on("change",function(a){f.el.val(f.editor.getSession().getValue()),f.el.trigger("editor:change")}),this.decorate(),this.el.hasClass("js-editor-validate")&&this.editor.getSession().setUseWorker(!0),this.el.hasClass("js-editor-wrap")&&this.editor.getSession().setUseWrapMode(!0),f.el.trigger("editor:create")},a.get=function(a){var f=a.data("_editor");return f?f:(a.hasClass("js-editor")?f=new b(a):a.hasClass("js-editor-text")?f=new c(a):a.hasClass("js-editor-eql")?f=new d(a):a.hasClass("js-editor-css")&&(f=new e(a)),a.data("_editor",f),f)},a.all=function(){return _.map($(".js-editor, .js-editor-text, .js-editor-eql, .js-editor-css"),function(b){return a.get($(b))})},a.prototype.decorate=function(){this.editor.setTheme("ace/theme/chrome"),this.editor.session.setUseWrapMode(!0),this.editor.session.setWrapLimitRange(null,null),this.editor.setBehavioursEnabled(!0),this.editor.setShowPrintMargin(!1),this.editor.session.setUseSoftTabs(!0),this.editor.getSession().setUseWorker(!1),this.editor.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,minLines:20})},a.prototype.resize=function(){this.editor.resize()},a.prototype.val=function(a){return"undefined"==typeof a?this.editor.getSession().getValue():void this.editor.getSession().setValue(a)},b=function(b){a.apply(this,b)},b.prototype=Object.create(a.prototype),b.prototype.constructor=b,b.prototype.decorate=function(){a.prototype.decorate.call(this),this.editor.getSession().setMode("ace/mode/html")},c=function(b){a.apply(this,b)},c.prototype=Object.create(a.prototype),c.prototype.constructor=c,c.prototype.decorate=function(){this.editor.setTheme("ace/theme/chrome"),this.editor.session.setUseWrapMode(!1),this.editor.session.setWrapLimitRange(null,null),this.editor.setBehavioursEnabled(!0),this.editor.setShowPrintMargin(!1),this.editor.session.setUseSoftTabs(!0),this.editor.getSession().setUseWorker(!1),this.editor.setOptions({enableBasicAutocompletion:!1,enableSnippets:!1,enableLiveAutocompletion:!1,minLines:20}),this.editor.getSession().setMode("ace/mode/text")},d=function(b){a.apply(this,b)},d.prototype=Object.create(a.prototype),d.prototype.constructor=d,d.prototype.decorate=function(){this.editor.setTheme("ace/theme/chrome"),this.editor.session.setUseWrapMode(!1),this.editor.session.setWrapLimitRange(null,null),this.editor.setBehavioursEnabled(!0),this.editor.setShowPrintMargin(!1),this.editor.session.setUseSoftTabs(!0),this.editor.getSession().setUseWorker(!1),this.editor.setOptions({enableBasicAutocompletion:!1,enableSnippets:!1,enableLiveAutocompletion:!1,minLines:20}),this.editor.getSession().setMode("ace/mode/eql")},e=function(b){a.apply(this,b)},e.prototype=Object.create(a.prototype),e.prototype.constructor=e,e.prototype.decorate=function(){a.prototype.decorate.call(this),this.editor.getSession().setMode("ace/mode/css")},AGN.Lib.Editor=a,AGN.Lib.EditorHtml=b,AGN.Lib.EditorText=c,AGN.Lib.EditorEql=d,AGN.Lib.EditorCss=e}(),function(){var a;a=function(a){var b,c,d=$(a),e=d.find("[data-equalizer-watch]:visible"),f=d.data("equalizer"),g=parseInt(d.data("equalizer-min"))||0,h=parseInt(d.data("equalizer-max"))||1e4;0!=e.length&&(1==e.length&&"min"==f&&(h=g),e.css({height:"",overflow:"","overflow-y":""}),b=_.map(e,function(a){return $(a).outerHeight(!1)}),c="min"==f?Math.min.apply(null,b):Math.max.apply(null,b),c<g&&(c=g),c>h&&(c=h),e.css({height:c,overflow:"hidden","overflow-y":"auto"}))},AGN.Lib.Equalizer=a}(),function(){var a,b,c,d,e,f,g,h,i,j;a=function(a){this.el=a},a.create=function(b){var c,d=b.data("field");return new(c=AGN.Opt.Fields[d]||a)(b)},a.prototype.valid=function(){return!0},a.prototype.errors=function(){return[]},AGN.Lib.Field=a,b=function(b){a.apply(this,[b]);var c=this.el.find("[data-field-validator]");this.$target=c,this.validatorName=c.data("field-validator");var d=c.data("validator-options");this.options=d?AGN.Lib.Helpers.objFromString(d):null},b.prototype=Object.create(a.prototype),b.prototype.constructor=b,b.prototype.valid=function(){var a=AGN.Lib.Validator.get(this.validatorName);return a?a.valid(this.$target,this.options):(console.debug("Validator `"+this.validatorName+"` doesn't exist"),!0)},b.prototype.errors=function(){var a=AGN.Lib.Validator.get(this.validatorName);return a?a.errors(this.$target,this.options):(console.debug("Validator `"+this.validatorName+"` doesn't exist"),[])},AGN.Lib.CustomField=b,AGN.Opt.Fields.validator=b,c=function(b){a.apply(this,[b]);var c=this;this.$source=this.el.find(".js-double-select-trigger"),this.$target=this.el.find(".js-double-select-target"),this.$source.on("change",function(){c.$target.val([]),c.update()}),AGN.Lib.DataProvider.get(b).done(function(a){c.options=a,c.update()})},c.prototype=Object.create(a.prototype),c.prototype.constructor=c,c.prototype.update=function(){var a=this.$source.find("option:selected").val(),b=this.$target.find("option:selected").val(),c='{{ _.forEach(opts, function(name, value) { }}<option value="{{- value }}" {{- ( value == valueSelected ) ? "selected" : "" }}>{{- name }}</option>{{ }); }}';c=_.template(c,{opts:this.options[a],valueSelected:b}),this.$target.html(c),AGN.runAll(this.el)},AGN.Lib.DoubleSelectField=c,AGN.Opt.Fields["double-select"]=c,d=function(b){a.apply(this,[b]);var c=this;this.$source=this.el.find("[data-field-vis]"),this.$source.on("change",function(){c.update()}),c.update()},d.prototype=Object.create(a.prototype),d.prototype.constructor=d,d.prototype._updateSelects=function(){var a=this;_.each(this.$source.filter("select"),function(b){a._toggleFields($(b).find(":selected"))})},d.prototype._updateDefaults=function(){var a=this;_.each(this.el.find("[data-field-vis-default]"),function(b){a._toggleFields($(b))})},d.prototype._updateCheckboxes=function(){var a=this;_.each(this.$source.filter(":checked"),function(b){a._toggleFields($(b))})},d.prototype._toggleFields=function(a){var b,c;a.is(":disabled")||(b=a.data("field-vis-hide"),c=a.data("field-vis-show"),_.each(this.el.find(b),function(b){a=$(b),a.all(":input").each(function(){var a=$(this);a.prop("disabled")||(a.data("field-disabled",!0),a.prop("disabled",!0))}),a.hide(),a.data("select2")&&(a.select2("container").hide(),a.select2("enable",!1)),a.is("option")&&(a.prop("disabled",!0),AGN.Initializers.Select(a.parents("select")))}),_.each(this.el.find(c),function(b){a=$(b),a.all(":input").each(function(){var a=$(this);a.data("field-disabled")&&(a.prop("disabled",!1),a.removeData("field-disabled"))}),a.show(),a.data("select2")&&(a.select2("container").show(),a.select2("enable",!0)),a.is("option")&&(a.prop("disabled",!1),AGN.Initializers.Select(a.parents("select")))}))},d.prototype.update=function(){this._updateDefaults(),this._updateSelects(),this._updateCheckboxes()},AGN.Lib.ToggleVisField=d,AGN.Opt.Fields["toggle-vis"]=d,j=function(b){a.apply(this,[b]),this.$target=this.el.find("[data-field-required]")},j.prototype=Object.create(a.prototype),j.prototype.constructor=j,j.prototype.valid=function(){return!this.$target.exists()||$.trim(this.$target.val())},j.prototype.errors=function(){var a=[];return this.valid()?a:(a.push({field:this.$target,msg:t("fields.required.errors.missing")}),a)},AGN.Lib.RequiredField=j,AGN.Opt.Fields.required=j,e=function(b){a.apply(this,[b]);var c=this;this.$strength=this.el.find(".js-password-strength"),this.$strengthIndicator=this.el.find(".js-password-strength-indicator"),this.$match=this.el.find(".js-password-match"),this.$matchIndicator=this.el.find(".js-password-match-indicator"),this.$strength.on("keyup",function(){c.updateStrength(),c.updateMatch()}),this.$match.on("keyup",function(){c.updateMatch()})},e.prototype=Object.create(a.prototype),e.prototype.constructor=e,e.prototype.match=function(){return this.$strength.val()==this.$match.val()},e.prototype.safe=function(){var a=this,b=this.$strength.val(),c=["[a-z]","[A-Z]","[0-9]","[^a-zA-Z0-9]"];return 0==b.length||!(b.length<8)&&_.all(c,function(c){return a.passesCheck(b,c)})},e.prototype.passesCheck=function(a,b){return!!a.match(b)},e.prototype.valid=function(){return 0==this.$match.length||this.match()&&this.safe()},e.prototype.errors=function(){var a=[];return this.valid()?a:(this.match()||a.push({field:this.$match,msg:t("fields.password.errors.notMatching")}),this.safe()||a.push({field:this.$strength,msg:t("fields.password.errors.unsafe")}),a)},e.prototype.resetStrength=function(){var a=AGN.Lib.Form.get(this.el);a.cleanErrors(this.$strengthIndicator.parents(".form-group")),this.$strengthIndicator.addClass("hidden"),this.$strengthIndicator.removeClass("state-alert"),this.$strengthIndicator.removeClass("state-success"),this.$strengthIndicator.html("")},e.prototype.resetMatch=function(){var a=AGN.Lib.Form.get(this.el);a.cleanErrors(this.$matchIndicator.parents(".form-group")),this.$matchIndicator.addClass("hidden"),this.$matchIndicator.removeClass("state-success"),this.$matchIndicator.removeClass("state-alert"),this.$matchIndicator.html("")},e.prototype.updateStrength=function(){this.resetStrength(),0!=this.$strength.val().length&&(this.$strengthIndicator.removeClass("hidden"),this.safe()?(this.$strengthIndicator.addClass("state-success"),this.$strengthIndicator.html(t("fields.password.successHtml",t("fields.password.safe")))):(this.$strengthIndicator.addClass("state-alert"),this.$strengthIndicator.html(t("fields.password.unsuccessHtml",t("fields.password.unsafe")))))},e.prototype.updateMatch=function(){this.resetMatch(),0!=this.$match.val().length&&(this.$matchIndicator.removeClass("hidden"),this.match()?(this.$matchIndicator.addClass("state-success"),this.$matchIndicator.html(t("fields.password.successHtml",t("fields.password.matches")))):(this.$matchIndicator.addClass("state-alert"),this.$matchIndicator.html(t("fields.password.unsuccessHtml",t("fields.password.matchesNot")))))},AGN.Lib.PasswordField=e,AGN.Opt.Fields.password=e,f=function(b){a.apply(this,[b]),this.$source=this.el.find("[data-field-split]"),this.targets=this.$source.data("field-split").split(/,\s?/),this.rule=new RegExp(this.$source.data("field-split-rule"))},f.prototype=Object.create(a.prototype),f.prototype.constructor=f,f.prototype.valid=function(){var a,b=AGN.Lib.Form.get(this.el);return a=this.$source.val().split(this.rule),_.each(this.targets,function(c,d){b.setValueOnce(c,a[d])}),!0},AGN.Lib.ValueSplitField=f,AGN.Opt.Fields.split=f,g=function(b){var c=this;a.apply(this,[b]),this.$filters=this.el.find("[data-field-filter]"),this.$filters.on("change",function(){c.update()}),c.position(),c.update()},g.prototype=Object.create(a.prototype),g.prototype.constructor=g,g.prototype.position=function(){var a;a=$(this.el.data("filter-target")),this.el.detach(),this.el.appendTo(a),a.parents("table").hide(),a.parents("table").show()},g.prototype.isEnabled=function(){return this.$filters.get().some(function(a){var b=$(a);if(b.is("input")){var c=b.attr("type");if("text"==c||"number"==c||"password"==c)return!!b.val()}return!!b.serialize()})},g.prototype.isDisabled=function(){return!this.isEnabled()},g.prototype.update=function(){this.isEnabled()?this.el.addClass("filter-active"):this.el.removeClass("filter-active")},AGN.Lib.FilterField=g,AGN.Opt.Fields.filter=g,h=function(b){var c=this;a.apply(this,[b]),this.$filterMin=this.el.find("[data-filter-date-min]"),this.$filterMax=this.el.find("[data-filter-date-max]"),this.$filters=this.el.find("[data-filter-date-min],[data-filter-date-max]"),this.$filterMin.on("change",function(){var a=c.$filterMax.data("pickadate");a.set("min",c.$filterMin.val())}),this.$filterMax.on("change",function(){var a=c.$filterMin.data("pickadate");a.set("max",c.$filterMax.val())}),this.$filters.on("change",function(){c.update()}),c.position(),c.update()},h.prototype=Object.create(g.prototype),h.prototype.constructor=h,h.prototype.isEnabled=function(){return _.any(this.$filters,function(a){return""!=$(a).val()})},AGN.Lib.DateFilterField=h,AGN.Opt.Fields["date-filter"]=h,i=function(b){var c=this;a.apply(this,[b]),this.$source=this.el.find("[data-field-date-split]"),this.$source.on("change",function(){c.update()})},i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.update=function(){var a=null,b=this.$source.val();b&&(a=new Date(parseInt(b)));var c=this.el.find("[data-date-split-target]");c.each(function(){var b=$(this),c=b.attr("data-date-split-target");if(a&&c)switch(c.toUpperCase()){case"MILLISECONDS":b.val(a.getMilliseconds());break;case"SECONDS":b.val(a.getSeconds());break;case"MINUTES":b.val(a.getMinutes());break;case"HOURS":b.val(a.getHours());break;case"DAY":b.val(a.getDate());break;case"MONTH":b.val(a.getMonth()+1);break;case"YEAR":b.val(a.getFullYear());break;default:b.val(a.toJSON())}else b.val("")})},AGN.Lib.DateSplitField=i,AGN.Opt.Fields["date-split"]=i}(),function(){function a(a,b){var c=a,d=a.data("_editor"),e=a.data("emojioneArea"),f=!0;d?(d=d.editor,d.container&&(f=!1,c=$(d.container))):e?e.editor&&(f=!1,c=e.editor.parent()):c.is("select")&&(f=!1),f&&c.after('<span class="icon icon-state-alert form-control-feedback js-form-error-ind"></span>'),c.after('<div class="form-control-feedback-message js-form-error-msg">'+b+"</div>")}var b,c,d=AGN.Lib.Field;c=function(a){this.group=a,this.$controls=$()},c.prototype._collect=function(a){var b=$("[data-controls-group]");return"*"===a?b:a?b.filter(function(){return a===$(this).attr("data-controls-group")}):$()},c.prototype.collect=function(){this.group&&(this.$controls=this._collect(this.group).filter(function(){var a=$(this);return!a.prop("disabled")&&!a.hasClass("disabled")}))},c.prototype.setDisabled=function(a){a===!1?(this.$controls.removeClass("disabled"),this.$controls.prop("disabled",!1)):(this.$controls.addClass("disabled"),this.$controls.prop("disabled",!0))},b=function(a){this.$form=a,this.form=a[0],this._data={},this._dataNextRequest={},this.fields=[],this.validatorName=null,this.validatorOptions=null,this.url=a.attr("action"),this.urlNextRequest=null,this.method=a.attr("method"),this.isMultipart="multipart/form-data"==(a.attr("enctype")||"").toLowerCase(),this.isCustomLoader=a.is("[data-custom-loader]"),this.controlsToDisable=new c(a.attr("data-disable-controls")),this.initFields(),this.initValidator()},b.get=function(a){var c,d,e,f;return c=b.getWrapper(a),f=c.data("_form"),f||(e=c.data("form"),d=AGN.Opt.Forms[e]||AGN.Lib.Form,f=new d(c),c.data("_form",f)),f},b.getWrapper=function(a){var b;return b=$(a.data("form-target")),0==b.length&&(b=a.closest("form")),b},b.prototype.valid=function(){var a=_.all(this.fields,function(a){return a.valid()});if(this.validatorName){var b=AGN.Lib.Validator.get(this.validatorName);if(b)return b.valid(this,this.validatorOptions,a)}return a},b.prototype.validate=function(){return!!this.valid()||(this.handleErrors(),!1)},b.prototype.getAction=function(){if(this.urlNextRequest){var a=this.urlNextRequest;return this.urlNextRequest=null,a}return this.url},b.prototype.setActionOnce=function(a){this.urlNextRequest=a},b.prototype.errors=function(){var a=[];if(_.each(this.fields,function(b){a=a.concat(b.errors())}),this.validatorName){var b=AGN.Lib.Validator.get(this.validatorName);b&&(a=a.concat(b.errors(this,this.validatorOptions)))}return a},b.prototype.setValue=function(a,b){var c=this.form[a];"object"==typeof c?($(c).val([b]),$(c).trigger("change")):this._data[a]=b},b.prototype.setValueOnce=function(a,b){this._dataNextRequest[a]=b},b.prototype.getValue=function(a){var b=this.form[a];return"object"==typeof b?b.value:this._data[a]},b.prototype.data=function(){if(this.isMultipart){var a=new FormData,b=this.$form.serializeFormDataObject();return $.each(this._data,function(a,c){b.hasOwnProperty(a)||(b[a]=c)}),$.each(this._dataNextRequest,function(a,c){b[a]=c}),$.each(b,function(b,c){$.isArray(c)?$.each(c,function(c,d){a.append(b,d)}):a.append(b,c)}),a}return _.merge({},this._data,this.$form.serializeObject(),this._dataNextRequest)},b.prototype.params=function(){return $.param(this.data(),!0)},b.prototype.jqxhr=function(){var a,c=this,d=$.Deferred();return this.$form.trigger("form:submit"),a=this.isMultipart?$.ajax({url:this.getAction(),method:this.method,data:this.data(),enctype:"multipart/form-data",processData:!1,contentType:!1,loader:this.loader()}):$.ajax({url:this.getAction(),method:this.method,data:this.params(),loader:this.loader()}),this._dataNextRequest={},this.setLoaderShown(!0),d.always(function(){c.setLoaderShown(!1)}),a.done(function(a){var c,e,f,g=$(a);c=g.filter('[data-form="polling"]').add(g.find('[data-form="polling"]')),1==c.length?(e=b.get(c),f=e.jqhxr(),f.done(function(){d.resolve.apply(this,arguments);var b=$("body"),c=$("<div></div>");c.html(a),c.find('script[data-message][type="text/html"]').appendTo(b),c.find('script[data-message][type="text/javascript"]').each(function(){try{eval.call(window,$(this).html())}catch(a){}}),c.remove()}),f.fail(function(){d.reject.apply(this,arguments)})):d.resolve(a)}),a.fail(function(){d.reject.apply(this,arguments)}),d.promise()},b.prototype._submit=function(){var a,b=this;return this.setLoaderShown(!0),a=this.jqxhr(),a.done(function(a){b.setLoaderShown(!1),b.updateHtml(a),b.$form.trigger("submitted",a)}),a},b.prototype._submitStatic=function(){var a,b=this.data();a=$('<form method="'+this.method+'" action="'+this.getAction()+'"></form>'),_.each(b,function(b,c){if(_.isArray(b)){var d=$('<select multiple name="'+c+'"></select>');_.each(b,function(a){var b=$('<option selected="selected"></option>');b.val(a),b.appendTo(d)}),d.appendTo(a)}else{var e=$('<input type="hidden" name="'+c+'"/>');e.val(b),e.appendTo(a)}}),a.appendTo($("body")),a.submit(),a.remove(),this._dataNextRequest={}},b.prototype._submitAction=function(a){return this.setValue("previousAction",this.getValue("actionList")),this.setValueOnce("action",a),this.submit()},b.prototype._submitEvent=function(){var a=$.Event("submission");this.$form.trigger(a),a.isDefaultPrevented()||this.$form.trigger("submitted"),this._dataNextRequest={}},b.prototype._submitConfirm=function(a){this.setValue("previousAction",this.getValue("actionList")),this.setValueOnce("action",a);var b=this.jqxhr(),c=this;return b.done(function(a){c.$form.trigger("submitted",a)}),b},b.prototype.submit=function(a){var b=Array.prototype.slice.call(arguments,1);if(!this.valid())return this.handleErrors(),!1;switch(this.cleanErrors(),a){case"static":return this._submitStatic(b);case"confirm":return this._submitConfirm(b);case"action":return this._submitAction(b);case"event":return this._submitEvent(b);default:return this._submit()}},b.prototype.revertAction=function(){},b.prototype.reset=function(){this.$form.trigger("reset")},b.prototype.abort=function(){},b.prototype.bulkUpdate=function(a,b){a?this.$form.find('[name^="'+a+'"]').prop("checked",b):this.$form.find(".js-bulk-ids").prop("checked",b)},b.prototype.handleMessages=function(a){var b,c=$(a);b=c.filter("script[data-message]").add(c.find("script[data-message]")),_.each(b,function(a){$("body").append(a)})},b.prototype.initFields=function(a){var b=this;a||(a=this.$form),b.fields.length=0,_.each(a.find("[data-field]"),function(a){b.fields.push(d.create($(a)))})},b.prototype.initValidator=function(){this.validatorName=this.$form.data("validator");var a=this.$form.data("validator-options");this.validatorOptions=a?AGN.Lib.Helpers.objFromString(a):null},b.prototype.updateHtml=function(a){var b,c=$(a);b=this.$form.attr("id")?$(a).filter("#"+this.$form.attr("id")).add(c.find("#"+this.$form.attr("id"))):this.$form.attr("name")?$(a).filter('[name="'+this.$form.attr("name")+'"]').add(c.find('[name="'+this.$form.attr("name")+'"]')):$(a).filter("form").add(c.find("form")),this.$form.html(b.html()),this.handleMessages(a),this.initFields(),this.initValidator(),AGN.Lib.Controller.init(this.$form),AGN.runAll(this.$form)},b.prototype.loader=function(){var a=this;return{show:function(){a.controlsToDisable.collect(),a.controlsToDisable.setDisabled(!0),a.setLoaderShown(!0)},hide:function(){a.controlsToDisable.setDisabled(!1),a.setLoaderShown(!1)}}},b.prototype.setLoaderShown=function(a){this.isCustomLoader?a?this.$form.trigger("form:loadershow"):this.$form.trigger("form:loaderhide"):a?AGN.Lib.Loader.show():AGN.Lib.Loader.hide()},b.prototype.cleanErrors=function(a){a||(a=this.$form.find(".js-form-error")),_.each(a,function(a){var b=$(a);b.removeClass("has-alert has-feedback js-form-error"),b.find(".js-form-error-ind").remove(),b.find(".js-form-error-msg").remove()})},b.prototype.handleErrors=function(){var b=[];this.cleanErrors(),_.each(this.errors(),function(c){var d=c.field;d&&d.length>0&&(d.parents(".form-group").addClass("has-alert has-feedback js-form-error"),a(d,c.msg),b.push(d.offset().top))});var c=this.$form.closest(".modal");c.exists()||(c=$(document));var d=this.$form.offset().top,e=_.sortBy(b)[0]-d-25;c.scrollTop(e)},b.prototype.cleanFieldError=function(a){this.form[a]&&this.cleanFieldError$($(this.form[a]))},b.prototype.cleanFieldError$=function(a){var b=a.closest(".js-form-error");b.removeClass("has-alert has-feedback js-form-error"),b.find(".js-form-error-ind").remove(),b.find(".js-form-error-msg").remove()},b.prototype.showFieldError=function(a,b,c){this.form[a]&&this.showFieldError$($(this.form[a]),b,c)},b.prototype.showFieldError$=function(b,c,d){var e=b.parents(".form-group");if(e.addClass("has-alert has-feedback js-form-error"),e.find(".js-form-error-ind").remove(),e.find(".js-form-error-msg").remove(),a(b,c),d!==!0){var f=this.$form.closest("[data-sizing=scroll], .modal").first();if(f.exists()){var g=$(".has-alert").first();f.animate({scrollTop:g.offset().top-f.offset().top+f.scrollTop()})}else f=$(document),f.scrollTop(b.offset().top-25)}},AGN.Lib.Form=b}(),function(){var a;a=function(a){this.$el=a},a.prototype.update=function(a){this.config=a,this.draw()},a.prototype.template=function(){var a=this.config;return _.template('<div class="grid-stage center-block" style="width: {{= viewWidth}} px; height: {{= viewHeight }}px;"><svg class="grid-view center-block" viewBox="0 0 {{= viewWidth }} {{= viewHeight }}" style="width: {{= viewWidth }}px; height: {{= viewHeight }}px"><g class="grid-columns"></g></svg></div>',{viewWidth:a.templateWidth,viewHeight:100})},a.prototype.data=function(){var a=[],b=this.config;return _.times(b.columnNum,function(c){a.push({type:"gutter",width:b.gutter/2,offset:_.reduce(a,function(a,b){return a+b.width},0)}),a.push({type:"col",width:b.columnWidth,offset:_.reduce(a,function(a,b){return a+b.width},0)}),a.push({type:"gutter",width:b.gutter/2,offset:_.reduce(a,function(a,b){return a+b.width},0)})}),a},a.prototype.draw=function(){var a;this.$el.html(this.template()),a=d3.select(this.$el.find(".grid-columns")[0]).selectAll("g").data(this.data()).enter().append("g").attr("transform",function(a,b){return"translate("+a.offset+",0)"}),a.append("rect").attr("class",function(a){return"grid-view-"+a.type}).attr("width",function(a){return a.width}).attr("height",100)},AGN.Lib.GridView=a}(),function(){var a;a=function(a){this.$el=a},a.prototype.update=function(a){this.config=a,this.draw()},a.prototype.template=function(){var a=this.config;return _.template('<div class="grid-stage center-block" style="width: {{= viewWidth }}"px"; height: {{= viewHeight }}px;"><svg class="column-view center-block" viewBox="0 0 {{= viewWidth }} {{= viewHeight }}" style="width: {{= viewWidth }}px; height: {{= viewHeight }}px"><g class="grid-columns"></g></svg></div>',{viewWidth:a.templateWidth,viewHeight:35*a.columnNum-5})},a.prototype.data=function(){var a=this.config,b=[];return _.times(a.columnNum,function(c){var d=[];d.push({type:"gutter",width:a.gutter/2,offset:0}),d.push({type:"col",width:(c+1)*a.columnWidth+c*a.gutter,offset:_.reduce(d,function(a,b){return a+b.width},0)}),d.push({type:"gutter",width:a.gutter/2,offset:_.reduce(d,function(a,b){return a+b.width},0)}),_.times(a.columnNum-(c+1),function(b){d.push({type:"gutter",width:a.gutter/2,offset:_.reduce(d,function(a,b){return a+b.width},0)}),d.push({type:"empty-col",width:a.columnWidth,offset:_.reduce(d,function(a,b){return a+b.width},0)}),d.push({type:"gutter",width:a.gutter/2,offset:_.reduce(d,function(a,b){return a+b.width},0)})}),b.push(d)}),b},a.prototype.draw=function(){var a,b,c=this.config;this.$el.html(this.template()),b=d3.select(this.$el.find(".grid-columns")[0]).selectAll(".row").data(this.data()).enter().append("g").attr("class","row").attr("transform",function(a,b){return"translate(0,"+35*b+")"}),a=b.selectAll(".col").data(function(a){return a}).enter().append("g").attr("class","col").attr("transform",function(a){return"translate("+a.offset+",0)"}),a.append("rect").attr("class",function(a){return"column-view-"+a.type}).attr("width",function(a){return a.width}).attr("height",30),b.append("text").attr("class","column-view-text").attr("x",c.gutter/2+10).attr("y",20).text(function(a,b){return _.template("{{= width }}px / {{= perc }}%",{width:a[1].width,perc:Math.floor(100*(b+1)/c.columnNum)})})},AGN.Lib.GridColumnView=a}(),function(){var a,b='<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content popover-scrollable"></div></div>';a=function(a){var b,c=AGN.url(a.data("help")),d=this;this.el=a,b=$.get(c),b.done(function(a){d.config=$(a),d.popoverInteractive(),d.show()})},a.show=function(b){var c;return(c=b.data("_help"))?void c.show():(c=new a(b),void b.data("_help",c))},a.prototype.show=function(){this.el.popover("show")},a.prototype.getConfig=function(a){var b=this.config.find(a).text();return b.replace("<![CDATA[","").replace("]]>","")},a.prototype.popover=function(){this.config&&(this.el.popover("destroy"),AGN.Lib.Popover.new(this.el,{template:b,title:this.getConfig("title"),content:this.getConfig("content"),html:!0,trigger:this.el.data("trigger")||"focus"}))},a.prototype.popoverInteractive=function(){if(this.config){this.el.popover("destroy");var a=AGN.Lib.Popover.new(this.el,{template:b,title:this.getConfig("title"),content:this.getConfig("content"),html:!0,trigger:"manual"}),c=this.el,d=a.tip();d.attr("tabindex",0),d.css("outline","none");var e=null,f=function(){e=setTimeout(function(){a.hide()},100)},g=function(){clearTimeout(e)};d.focusout(f),c.focusout(f),d.focusin(g),c.focusin(g),c.on("shown.bs.popover",function(){var a=d.children(".popover-content"),b=a.css("min-width"),c=a.outerWidth();a.css("min-width","100%"),a.css("min-width",a.outerWidth()),
c>a.outerWidth()&&a.css("min-width",b||"0px")})}},AGN.Lib.Help=a}(),function(){AGN.Lib.Helpers={paramsFromUrl:function(a){var b,c={};if(!a)return c;if(b=a.indexOf("?"),b==-1)return c;for(var d=a.substring(b+1),e=d.split("&"),f=0;f<e.length;f++){var g=e[f].split("=");c[g[0]]=g[1]}return c},objFromString:function(optsAsString){var optsArray,optsSplitRegex=/,\s*(?=(?:[^'\\]*(?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'))*[^']*$)/m,tupleSplitRegex=/:\s*(?=(?:[^'\\]*(?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'))*[^']*$)/m,floatRegex=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,arrayRegex=/^\s?\[.*?\]$/i;return opts={},""===optsAsString||void 0===optsAsString?opts:(optsArray=optsAsString.split(optsSplitRegex),_.forEach(optsArray,function(opt){var tup=opt.split(tupleSplitRegex),name,value;tup=_.filter(tup),name=tup[0].replace(/^'([^]*?)'$/m,"$1"),name=name.replace(/\\/,""),value=tup[1],"undefined"==typeof value&&(value=""),"true"==value?value=!0:"false"==value?value=!1:floatRegex.test(value)?value=parseFloat(value):arrayRegex.test(value)?(value=value.replace(/\[|\]/g,""),value=value.split(/\s+/),value=_.map(value,function(v){return/^\'(.*?)\'$/.test(v)?v.replace(/^\'(.*?)\'$/g,"$1"):eval(v)})):(value=value.replace(/^'(.*?)'$/m,"$1"),value=value.replace(/\\/,"")),opts[name]=value}),opts)},disableCSSAnimations:function(){$("body").append('<style class="disable-animation">* { -webkit-transition: none !important; -o-transition: none !important; transition: none !important; }</style>')},enableCSSAnimations:function(){window.setTimeout(function(){$(".disable-animation").remove()},10)},clearFormField:function(a){var b=$("<form></form>"),c=$("<div></div>");c.insertAfter(a),b.append(a),b.get(0).reset(),a.insertBefore(c),c.remove()},formatBytes:function(a,b){if(0==a)return"0 Bytes";if(1==a)return"1 Byte";if(a==-1)return"-1 Byte";var a=Math.abs(a);if(b&&b.toLowerCase()&&"iec"==b.toLowerCase())var c=Math.pow(2,10),d=["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];else var c=Math.pow(10,3),d=["Bytes","kB","MB","GB","TB","PB","EB","ZB","YB"];var e=Math.floor(Math.log(a)/Math.log(c)),f=a/Math.pow(c,e);return a<0&&(f*=-1),f>=99.995||0==e?f.toFixed(0)+" "+d[e]:f.toFixed(2)+" "+d[e]},pad:function(a,b,c){c=c||"0";var d=a+"";return d.length<b?new Array(b-d.length+1).join(c)+d:d},caching:function(a,b){var c,d=!1;return arguments.length>1&&(a=_.bind.apply(null,Array.prototype.slice.call(arguments))),function(){return d||(d=!0,c=a()),c}}}}(),function(){var a;a=function(a){var b,c=this;c.el=a,c.url=a.data("load"),c.interval=parseInt(a.data("load-interval")),c.target=a.data("load-target"),c.interval&&(b=function(){c.load()},c._interval=window.setInterval(b,c.interval)),c.el.removeAttr("data-load")},a.load=function(b){var c;return(c=b.data("_load"))?void c.load():void(b.is(":hidden")||(c=new a(b),c.load(),b.data("_load",c)))},a.prototype.stop=function(){window.clearInterval(this._interval)},a.prototype.load=function(){var a,b=this;b.loading||(b.loading=!0,a=$.get(b.url),a.always(function(){b.interval&&(b.loading=!1)}),a.fail(function(){b.stop()}),a.done(function(a){var c,d,e=$(a);d=e.all("[data-load-stop]"),0!=d.length&&b.stop(),c=b.target?"body"==b.target?/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(a)[1]:e.all(b.target):a,b.el.html(c),AGN.Lib.Controller.init(b.el),AGN.runAll(b.el)}))},AGN.Lib.Load=a}(),function(){var a,b={},c=0,d=!1;b.show=function(){window.clearTimeout(a),d?d=!1:(c+=1,$(".loader").show())},b.hide=function(){c-=1,c<=0&&(a=window.setTimeout(function(){$(".loader").hide()},5),c=0)},b.prevent=function(){d=!0},AGN.Lib.Loader=b}(),function(){var a,b=AGN.Lib.Form;a=function(a){b.apply(this,[a]),AGN.Lib.Loader.show(),this.submit()},a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.prototype.jqxhr=function(){var a=this,b=$.Deferred();return this.$form.trigger("form:submit"),window.setTimeout(function(){var c=$.ajax({url:a.url,method:a.method,data:a.params(),loader:a.loader()});c.done(function(a){b.resolve.apply(this,arguments)})},parseInt(this.$form.data("polling-interval"))),b.promise()},a.prototype.submit=function(){var a,b=this;return a=this.jqxhr(),a.done(function(a){b.updateHtml(a)}),a},a.prototype.updateHtml=function(a){var b,c=$(a);b=c.filter('[data-form="loading"]').add(c.find('[data-form="loading"]')),1==b.length?(this.$form.html(b.html()),AGN.runAll(this.$form),this.submit()):(AGN.Lib.Loader.hide(),AGN.Lib.Page.render(a))},AGN.Lib.LoadingForm=a,AGN.Opt.Forms.loading=a}(),function(){var a;a={init:function(){var a=AGN.Lib.Storage.get("menu_state")||"open";"open"==a?this.openDirectly():this.closeDirectly(),this.updateInits()},isOpen:function(){return $("body").hasClass("menu-is-active")},openDirectly:function(){AGN.Lib.Helpers.disableCSSAnimations(),this.open(),AGN.Lib.Helpers.enableCSSAnimations()},closeDirectly:function(){AGN.Lib.Helpers.disableCSSAnimations(),this.close(),AGN.Lib.Helpers.enableCSSAnimations()},close:function(){AGN.Lib.Storage.set("menu_state","close"),$("body").removeClass("menu-is-active"),this.updateInits()},open:function(){AGN.Lib.Storage.set("menu_state","open"),$("body").addClass("menu-is-active"),this.updateInits()},updateInits:function(){window.setTimeout(function(){AGN.Initializers.Truncate(),AGN.Initializers.Scrollable(),AGN.Initializers.DropdownExpand()},600)}},AGN.Lib.Menu=a}(),function(){var a=function(a,b,c,d,e){var f,g,h={timeout:{success:3e3,warning:3e3}};c||(c="info"),null===e&&(e=!0),g=h.timeout[c||"info"]||0,_.each($(".notification"),function(c){var d,e,f=$(c);d=f.data("message-head"),e=f.data("message-content"),a===d&&b===e&&f.remove()}),f=toastr[c](a,b,{timeOut:g,extendedTimeOut:g,onCloseClick:d,newestOnTop:e}),f.data("message-head",a),f.data("message-content",b)},b=function(b,c,d){c.forEach(function(c){a(b,c,d)})},c=function(a){a&&(a.success&&b(t("defaults.success"),a.success,"success"),a.warning&&b(t("defaults.warning"),a.warning,"warning"),a.alert&&b(t("defaults.error"),a.alert,"alert"),a.fields&&$.each(a.fields,function(a,c){c&&b(t("defaults.error"),c,"alert")}))};AGN.Lib.Messages=a,AGN.Lib.JsonMessages=c}(),function(){function a(a){var b="key#"+a,c=d[b],e=Array.prototype.slice.call(arguments,1);c&&(d[b]=c.filter(function(a){return a.apply(this,e)!==!1}))}function b(a,b){var c="key#"+a;$.isFunction(b)?(d[c]||(d[c]=[]),d[c].push(b)):console.error("Callback must be a function")}function c(a,b){if(arguments.length){var c="key#"+a;arguments.length>1?d[c]=d[c].filter(function(a){return a!==b}):d[c]=[]}}var d={};AGN.Lib.Messaging={send:a,subscribe:b,unsubscribe:c}}(),function(){var a;a=function(){},a.create=function(a,b){var c=null,d=null;d=a instanceof $?a:$(a);var e=d.filter(".modal"),f=d.filter("script");return e&&(c=$(e[0]),c.data("_modal",b),f.each(function(){$(this).appendTo(c)}),c=c.modal(),AGN.Lib.Controller.init(c),AGN.runAll(c)),c},a.createFromTemplate=function(b,c){return c=AGN.Opt.Templates[c]||AGN.Opt.Templates.modal,a.create(_.template(c,b),b)},a.get=function(b){var c=a.getWrapper(b);return c.data("_modal")},a.getWrapper=function(a){return a.closest(".modal")},AGN.Lib.Modal=a}(),function(){function renderMessages($resp){$resp.all('script[data-message][type="text/html"]').appendTo($(document.body)),$resp.all('script[data-message][type="text/javascript"]').each(function(){try{eval($(this).html())}catch(a){console.debug(a)}})}function getValidMethod(a){if(a)switch(a=a.toUpperCase()){case"CONNECT":case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"POST":case"PUT":return a}return"GET"}var Confirm=AGN.Lib.Confirm,Page={};Page.render=function(a,b){if(/<\s*\/\s*body\s*>/i.test(a)){var c=new DOMParser,d=c.parseFromString(a,"text/html");if(b!==!1&&d.head){var e=$(d.head).data("origin-uri");e&&(b=e)}b&&window.history.pushState({},"",b);var f=$(document).scrollTop();setTimeout(function(){AGN.Lib.Controller.init(),AGN.runAll(),$(document).scrollTop(f)},100),document.body=d.body,document.title=d.title;var g=$(document.body);g.find("script").each(function(a,b){var c=$(b);if(c.attr("src")){var d=$("<script></script>");$.each(b.attributes,function(){this.specified&&d.attr(this.name,this.value)});try{d.appendTo(g)}catch(a){console.debug(a)}}else if("text/javascript"==c.attr("type"))try{eval.call(window,c.html())}catch(a){console.debug(a)}})}else{var h=$(a),i=h.filter(".modal");if(i.exists()){var j=$.Deferred();return renderMessages(h),h.appendTo($(document.body)),Confirm.create(h),j.resolve(Confirm.get(h)),j.promise()}if(i=h.all("script[data-load]"),i.exists())return Page.reload(i.data("load"),!0).done(function(){renderMessages(h)});renderMessages(h)}},Page.reload=function(a,b,c){if(b){a=a||window.location.href;var d=$.Deferred();return $.ajax(a,{method:getValidMethod(c)}).done(function(b){var c=Page.render(b,a);c?c.done(d.resolve).fail(d.reject):d.resolve()}).fail(function(){d.reject()}),d.promise()}return a&&a!=window.location.href?window.location.assign(a):window.location.reload(!0),null},AGN.Lib.Page=Page}(),function(){var a,b=AGN.Lib.Page,c=AGN.Lib.Form;a=function(a){c.apply(this,[a])},a.prototype=Object.create(c.prototype),a.prototype.constructor=a,a.prototype.jqhxr=function(){var a=this,b=$.Deferred();return this.$form.trigger("form:submit"),window.setTimeout(function(){var c=$.ajax({url:a.url,method:a.method,data:a.params(),loader:a.loader()});c.done(function(c){var d=$(c),e=d.all('[data-form="polling"]');1==e.length?(a.$form.data("polling-interval",e.data("polling-interval")),a.jqhxr().done(function(){b.resolve.apply(this,arguments)})):b.resolve.apply(this,arguments)})},parseInt(this.$form.data("polling-interval"))),b.promise()},a.prototype.submit=function(){var a,b=this;return AGN.Lib.Loader.show(),a=this.jqxhr(),a.done(function(a){AGN.Lib.Loader.hide(),b.updateHtml(a)}),a},a.prototype.updateHtml=function(a){var c,d=$(a),e=this.$form.data("render");"page"==e?b.render(a):(c=this.$form.attr("id")?d.all("#"+this.$form.attr("id")):this.$form.attr("name")?d.all('[name="'+this.$form.attr("name")+'"]'):d.all("form"),setTimeout(function(){AGN.Lib.Controller.init(),AGN.runAll()},100),this.handleMessages(a),this.$form.replaceWith(c))},AGN.Lib.PollingForm=a,AGN.Opt.Forms.polling=a}(),function(){var a={},b=function(a,b){var c=$(a),d=$(b),e=$(window).scrollTop(),f=$(window).outerHeight(),g=d.outerHeight(),h=d.offset().top-e,i=h+g;return c.outerHeight()<=h?"top":f-i>h?"bottom":"top"};a.new=function(a,c){return 1===a.length&&(a.popover($.extend({container:"body",placement:b},c)),a.data("bs.popover"))},a.get=function(a){return 1!==a.length?null:a.data("bs.popover")},a.remove=function(a){return 1===a.length&&(a.popover("destroy"),!0)},a.validate=function(){$(".popover").each(function(){var a=$(this).data("bs.popover");a&&a.validate()})},AGN.Lib.Popover=a}(),function(){var a,b=AGN.Lib.Form,c=AGN.Lib.Page;a=function(a){b.apply(this,[a]),this.resourceSelector=a.data("resource-selector")},a.prototype=Object.create(b.prototype),a.prototype.getResourceSelector=function(){if(this.resourceSelectorNextRequest){var a=this.resourceSelectorNextRequest;return this.resourceSelectorNextRequest=null,a}return this.resourceSelector},a.prototype.setResourceSelectorOnce=function(a){this.resourceSelectorNextRequest=a},a.prototype.updateHtml=function(a){var b=this.getResourceSelector();if(b){var d=$(a),e=$(b),f=d.all(b);if(1==e.length&&1==f.length){var g=!1;(e[0]==this.$form[0]||$.contains(e[0],this.$form[0]))&&(g=!0),e.html(f.html()),this.handleMessages(d),g&&(this.initFields(),this.initValidator()),AGN.Lib.Controller.init(e),AGN.runAll(e)}else c.render(a)}else c.render(a)},AGN.Lib.ResourceForm=a,AGN.Opt.Forms.resource=a}(),function(){function a(a,b){this.src=a,this.promises={},this.cache=$.extend({},b)}function b(a){switch(a){case F:case G:case H:return!0;default:return!1}}function c(a,c){switch(c){case E:return a.dateOperators;case I:case J:return a.mailingOperators;case K:return a.intervalMailingOperators;default:return b(c)?a.numericOperators:a.stringOperators}}function d(a,c){var d=u("columnAndType",a);if(d){var f=d.options[d.selectedIndex],g=f.value.toUpperCase(),h=f.getAttribute("data-extra").toUpperCase(),i=u("primaryOperator",a),j=u("primaryValue",a);i.value==c.OPERATOR_IS?l(c,j,a):i.value==c.OPERATOR_MOD&&b(h)?m(c,j,a):h==E?q(c,j,a):h==K?r(c,j,a):h==I?s(c,j,a):h==J?t(c,j,a):"MAILTYPE"==g?o(c,j,a):"GENDER"==g?p(c,j,a):n(c,j,a),e(c,i,h,a)}}function e(a,b,d,e){var f=b.value,g=x(v("primaryOperator",e),"form-control","1",e),h=c(a,d);$.each(D(h),function(a,b){B(g,f,b.id,b.value)}),y(b,g)}function f(a,b){var c=u("primaryValue",b),d=c.value,e=x(v("secondaryValue",b),"form-control js-select js-option-popovers","1",b);e.setAttribute("data-action","updateMailingLinkId"+(null==b?"New":"")),w(a,d,e,a.mailingLinksSelectionsCache[b]&&a.mailingLinksSelectionsCache[b][d]);var f=$(c),g=f.clone();g.val(f.val()),g.css({display:"block"}),z([g,e],$(c.parentNode))}function g(a,b,c){var d=u("primaryValue",b),e=d.value,f=a.mailingLinksSelectionsCache[b];f||(f={},a.mailingLinksSelectionsCache[b]=f),f[e]=c}function h(a){return $('select[name="'+a+'"] option')}function i(a){return j(h(a))}function j(a){return $.map(a.toArray(),function(a){var b=$(a);return{id:b.val(),value:b.text()}})}function k(b){var c={};return $('select[name="all_mailings_urls_config"] optgroup').each(function(){var a=$(this),b=a.find("option");c[a.attr("label")]=b.map(function(){var a=$(this);return{id:a.val(),value:a.text()}})}),$.extend(b,{mailingLinks:new a(b&&b.URL_GET_MAILING_LINKS,c),mailingLinksSelectionsCache:{},allColumns:h("all_columns_config"),intervalMailings:i("interval_mailings_config"),modSecondaryOperators:i("mod_secondary_operators_config"),allMailings:i("all_mailings_config"),dateOperators:i("date_operators_config"),mailingOperators:i("mailing_operators_config"),intervalMailingOperators:i("interval_mailing_operators_config"),numericOperators:i("numeric_operators_config"),stringOperators:i("string_operators_config"),mailTypes:i("mail_types_config"),genders:i("genders_config"),dateFormats:i("date_formats_config")})}function l(a,b,c){var d=null==b.value?"":b.value,e=x(v("primaryValue",c),"form-control","1",null);B(e,d,"null","null"),B(e,d,"not null","not null"),z([e],$(b.parentNode))}function m(a,b,c){var d=a.modSecondaryOperators,e=null==b.value?"":b.value,f=u("secondaryOperator",c),g=null==f?"":f.value,h=u("secondaryValue",c),i=null==h?"":h.value,j=C(v("primaryValue",c),e,"form-control"),k=x(v("secondaryOperator",c),"form-control","1",null);$.each(D(d),function(a,b){B(k,g,b.id,b.value)});var l=C(v("secondaryValue",c),i,"form-control");z([j,k,l],$(b.parentNode))}function n(a,b,c){var d=null==b.value?"":b.value,e=C(v("primaryValue",c),d,"form-control");z([e],$(b.parentNode))}function o(a,b,c){var d=a.mailTypes,e=null==b.value?"":b.value,f=x(v("primaryValue",c),"form-control","1",null);$.each(D(d),function(a,b){B(f,e,b.id,b.value)}),z([f],$(b.parentNode))}function p(a,b,c){var d=a.genders,e=null==b.value?"":b.value,f=x(v("primaryValue",c),"form-control","1",null);$.each(D(d),function(a,b){B(f,e,b.id,b.value)}),z([f],$(b.parentNode))}function q(a,b,c){var d=a.dateFormats,e=null==b.value?"":b.value,f=u("dateFormat",c),g=null==f?"":f.value,h=C(v("primaryValue",c),e,"form-control"),i=x(v("dateFormat",c),"form-control","1",null);$.each(D(d),function(a,b){B(i,g,b.id,b.value)}),z([h,i],$(b.parentNode))}function r(a,b,c){var d=a.intervalMailings,e=null==b.value?"":b.value,f=x(v("primaryValue",c),"form-control js-select","1",null);$.each(D(d),function(a,b){B(f,e,b.id,b.value)}),z([f],$(b.parentNode))}function s(a,b,c){var d=a.allMailings,e=null==b.value?"":b.value,f=x(v("primaryValue",c),"form-control js-select","1",null);$.each(D(d),function(a,b){B(f,e,b.id,b.value)}),z([f],$(b.parentNode))}function t(a,b,c){var d=a.allMailings,e=null==b.value?"":b.value,f=u("secondaryValue",c),g=(null==f?"":f.value,x(v("primaryValue",c),"form-control js-select","1",c));g.setAttribute("data-action","resetMailingUrls"+(null==c?"New":"")),$.each(D(d),function(a,b){B(g,e,b.id,b.value)}),e=g.value;var h=x(v("secondaryValue",c),"form-control js-select js-option-popovers","1",c);h.setAttribute("data-action","updateMailingLinkId"+(null==c?"New":"")),w(a,e,h,a.mailingLinksSelectionsCache[c]&&a.mailingLinksSelectionsCache[c][e]),z([g,h],$(b.parentNode))}function u(a,b){return document.getElementsByName(v(a,b))[0]}function v(a,b){return a+(null!=b?"["+b+"]":"New")}function w(a,b,c,d){a.mailingLinks.retrieve(b).done(function(a){if(0!=a.length){var b=null;$.each(a,function(a){0!=a&&this.id!=d||(b=this.id)});var e=$(c);$.each(a,function(){e.append($("<option/>",{value:this.id,text:this.value,selected:b==this.id}))}),e.data("select2")&&e.select2("val",b)}})}function x(a,b,c,d){var e=document.createElement("select");return e.setAttribute("name",a),e.setAttribute("class",b),e.setAttribute("size",c),e.setAttribute("data-action",a.replace(/\[\d+\]/,"")),null!=d&&e.setAttribute("data-ruleid",d),e}function y(a,b){var c=$(b);$(a).parent().html(c),c.is("select")&&A(c)}function z(a,b){if(a.length>0){var c=12,d="col-sm-"+Math.round(c/a.length);b=b.parent(),b.empty(),$.each(a,function(){var a=$(this),c=$("<div>").addClass(d);c.append(a),b.append(c),a.is("select")&&A(a)})}}function A(a){"Select"in AGN.Initializers&&AGN.Initializers.Select(a.parent())}function B(a,b,c,d){var e=$("<option/>",{value:c,text:d,selected:0==b.localeCompare(c)});return e.appendTo($(a)),e}function C(a,b,c){var d=document.createElement("input");return d.setAttribute("type","text"),d.setAttribute("name",a),d.setAttribute("value",b),d.setAttribute("class",c),d}function D(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}a.prototype.retrieve=function(a){var b=this.promises,c=this.cache,d=b[a];if(d&&"pending"==d.state())return d;var e=$.Deferred();if(d=e.promise(),c[a])e.resolve(c[a]);else if(this.src){var f=$.ajax(this.src,{type:"POST",data:{mailingId:a}});b[a]=d,f.always(function(){delete b[a]}),f.done(function(b){if(b&&b.mailingId==a){var d=b.links||[];c[a]=d,e.resolve(d,a)}else e.reject(a)}),f.fail(function(){e.reject(a)})}else e.reject(a);return d};var E="DATE",F="INTEGER",G="DOUBLE",H="NUMBER",I="MAILING",J="MAILING_LINKS",K="INTERVAL_MAILING";AGN.Lib.RuleService={changedColumn:d,resetPrimaryOperators:e,resetMailingUrls:f,updateMailingLinksCache:g,switchTo:{operators:{mod:m,is:l},types:{string:n,mail:o,gender:p,date:q,mailing:s,mailingLinks:t,intervalMailing:r}},configure:k}}(),function(){var a,b=AGN.Lib.Form;a=function(a){b.apply(this,[a])},a.prototype=Object.create(b.prototype),a.prototype.updateHtml=function(a){var b=$(a).find("[data-form-content]"),c=this.$form.find("[data-form-content]");c.html(b.html()),this.handleMessages(a),this.initFields(c),AGN.Lib.Controller.init(c),AGN.runAll(c),c.trigger("scrollTo",c)},AGN.Lib.SearchForm=a,AGN.Opt.Forms.search=a}(),function(){var a;a=function(a){this.$select=a,this.select=a[0],this.api=function(){args=Array.prototype.slice.call(arguments,0),a.select2.apply(a,args)}},a.get=function(b){var c,d;return c=b,d=c.data("_select"),d||(d=new a(c),c.data("_select",d)),d},a.prototype.map=function(){var a=this;return _.reduce(a.values(),function(b,c){return b[c]=a.$select.find("option[value='"+c+"']").html(),b},{})},a.prototype.values=function(){return _.map(this.$select.find("option"),function(a){return $(a).val()})},a.prototype.clear=function(){this.api("val","")},a.prototype.selectValue=function(a){this.api("val",a)},a.prototype.getFirstValue=function(){return this.$select.find("option:first").val()},a.prototype.selectFirstValue=function(){this.api("val",this.getFirstValue())},a.prototype.selectValueOrSelectFirst=function(a){var b=!1,c=this.values();_.isArray(a)||(a=[a]),b=_.all(a,function(a){return c.indexOf(a+"")!=-1}),b&&0!=a.length?this.selectValue(a):this.selectFirstValue()},a.prototype.resetOptions=function(){this.$select.html("")},a.prototype.setOptions=function(a){var b;b=_.reduce(a,function(a,b){return a+='<option value="'+b.id+'">'+b.text+"</option>"},""),this.$select.html(b)},a.prototype.addFormattedOption=function(a){this.$select.append(a)},a.prototype.getSelectedValue=function(){var a=this.$select.val();return a?a:""},AGN.Lib.Select=a}(),function(){var a,b=AGN.Lib.Form;a=function(a){b.apply(this,[a])},a.prototype=Object.create(b.prototype),a.prototype.jqxhr=function(){return this.form.submit()},a.prototype.submit=function(){var a=this,b=_.merge({},this._data,this._dataNextRequest);return this.valid()?(this.$form.trigger("form:submit"),_.each(b,function(b,c){var d=$('<input type="hidden" name="'+c+'"/>');d.val(b),d.appendTo(a.$form)}),this._dataNextRequest={},this.$form.submit(),$.Deferred().promise()):(this.handleErrors(),!1)},AGN.Lib.StaticForm=a,AGN.Opt.Forms.static=a}(),function(){function a(a){var b=""|a.data("stored-field"),d=a.attr("name");if(void 0!=d){var f=void 0;"checkbox"==a.attr("type")?f=a.prop("checked"):(a.is("input")||a.is("select"))&&(f=a.val()),void 0!=f&&e(c(d,b),f)}}function b(a){var b=""|a.data("stored-field"),e=!1,f=a.attr("name");if(void 0!=f){var g=a.attr("type")||a.prop("type"),h=d(c(f,b));if(void 0===h)return!1;if("radio"==g){if(a.val()!==h&&1==a.prop("checked"))return a.prop("checked",!1),!0;if(a.val()==h&&0==a.prop("checked"))return a.prop("checked",!0),!0}else if("checkbox"==g)a.prop("checked")!==h&&(a.prop("checked",h),e=!0);else if("select-one"==g){var i=!1;a.find("option").each(function(){if($(this).val()==h)return i=!0,!1}),i&&a.val()!==h&&(a.val(h).change(),e=!0)}else if("select-multiple"==g){var j=[],k=a.value();a.find("option").each(function(){var a=$(this);$.each(h,function(b,c){a.val()==c&&j.push(c)})}),j.sort(),k.sort();var l=!0;j.length!=k.length&&(l=!1);for(var m=0;m<j.length;++m)j[m]!==k[m]&&(l=!1);l||(a.val(j).change(),e=!0)}else"textarea"!=g&&"text"!=g||a.val()!==h&&(a.val(h),e=!0)}return e}function c(a,b){var c="stored_field_";if(a&&(c+=a),b)return c=c+"_"+b}var d,e,f,g,h,i,j,k,l;l=function(a){function b(a,b,c){var d,e;c?(d=new Date,d.setTime(d.getTime()+24*c*60*60*1e3),e="; expires="+d.toGMTString()):e="",document.cookie=a+"="+b+e+"; path=/"}function c(a){var b,c,d=a+"=",e=document.cookie.split(";");for(b=0;b<e.length;b++){for(c=e[b];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(d))return c.substring(d.length,c.length)}return null}function d(c){c=JSON.stringify(c),"session"==a?window.name=c:b("localStorage",c,365)}function e(){"session"==a?window.name="":b("localStorage","",365)}function f(){var b="session"==a?window.name:c("localStorage");return b?JSON.parse(b):{}}var g=f();return{length:0,clear:function(){g={},this.length=0,e()},getItem:function(a,b){if(b===!0){var c=f();return void 0===c[a]?null:c[a]}return void 0===g[a]?null:g[a]},key:function(a){var b=0;for(var c in g){if(b==a)return c;b++}return null},removeItem:function(a){delete g[a],this.length--,d(g)},setItem:function(a,b){g[a]=b+"",this.length++,d(g)}}};try{k=window.localStorage?window.localStorage:new l("local")}catch(a){k=new l("local")}d=function(a){var b=k.getItem(a);return b?JSON.parse(b):void 0},e=function(a,b){b=JSON.stringify(b),k.setItem(a,b)},f=function(a){k.removeItem(a)},g=function(a){var b=a.length;_.each(k,function(c,d){d.substring(0,b)==a&&f(d)})},h=function(a){var b;try{b=window.localStorage?k.getItem(a):k.getItem(a,!0)}catch(c){b=k.getItem(a,!0)}return b?JSON.parse(b):void 0},i=function(b){b.each(function(){$(this).is("[data-stored-field]")&&$(this).is("input")||$(this).is("select")?a($(this)):$(this).find("[data-stored-field]").each(function(){a($(this))})})},j=function(a){var c=!1;return a.each(function(){$(this).is("[data-stored-field]")&&($(this).is("input")||$(this).is("select"))?b($(this))&&(c=!0):$(this).find("[data-stored-field]").each(function(){b($(this))&&(c=!0)})}),c},AGN.Lib.Storage={get:d,set:e,delete:f,deleteByNamespace:g,getFromRealStorage:h,saveChosenFields:i,restoreChosenFields:j}}(),function(){var a,b,c,d,e=AGN.Lib.Storage;a=function(a){var c=a.data("toggle-tab"),f=d(a,c),g=e.get("toggle_tab"+f)||{},h=$(c);"undefined"!=typeof h.data("tab-show")&&(g.hidden=!1,h.data("tab-show",void 0)),"undefined"!=typeof h.data("tab-hide")&&(g.hidden=!0,h.data("tab-hide",void 0)),(g.hidden===!1||g.hidden!==!0&&h.is(":visible"))&&b(a)},b=function(a){var b=a.parents("ul").find("[data-toggle-tab]").not(a),f=a.data("toggle-tab"),g=d(a,f),h=$(f),i=a.find(".tab-toggle"),j=$(a.data("extends-tab"));_.each(b,function(a){c($(a))}),a.parent().addClass("active"),i.removeClass("icon-angle-down").addClass("icon-angle-up"),h.removeClass("hidden"),j.removeClass("hidden"),h.trigger("tile:show"),e.set("toggle_tab"+g,{hidden:!1}),AGN.Initializers.Load(h)},c=function(a){var b=a.data("toggle-tab"),c=d(a,b),f=a.find(".tab-toggle");a.parent().removeClass("active"),f.removeClass("icon-angle-up").addClass("icon-angle-down"),$(b).addClass("hidden"),$(b).trigger("tile:hide"),e.set("toggle_tab"+c,{hidden:!0})},toggle=function(a){var d=a.data("toggle-tab"),e=$(d);e.is(":visible")?c(a):b(a)},d=function(a,b){var c=a.data("tab-group");return c?"/"+c:b},AGN.Lib.Tab={init:a,show:b,hide:c,toggle:toggle}}(),function(){var a,b;b='<div class="pagination-top"></div><div class="ag-theme-bootstrap" style="height: calc(100% - 106px); width: 100%"></div><div class="pagination-bottom"></div>',a=function(a,c,d,e){var f=this;this.$el=a,this.$el.html(b),this.$el.data("_table",f),this.$paginationTop=this.$el.find(".pagination-top"),this.$paginationBottom=this.$el.find(".pagination-bottom"),_.each(c,function(a){a.cellRenderer&&(a.cellRenderer=AGN.Opt.TableCellRenderers[a.cellRenderer])}),this.gridOptions=_.merge({columnDefs:c,enableSorting:!0,enableFilter:!0,enableColResize:!0,pagination:!0,paginationPageSize:100,rowSelection:"multiple",onCellClicked:function(a){return"select"==a.colDef.cellAction?void a.node.setSelected(!a.node.isSelected()):"goTo"==a.colDef.cellAction?void(a.data.show&&(window.location.href=a.data.show)):void 0},suppressRowClickSelection:!0,headerHeight:41,rowHeight:34,suppressPaginationPanel:!0,onPaginationChanged:function(){f.renderPagination()},defaultColDef:{headerComponentParams:{template:'<div class="ag-cell-label-container" role="presentation">  <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button"></span>  <div ref="eLabel" class="ag-header-cell-label" role="presentation">    <span ref="eSortAsc" class="ag-header-icon ag-sort-ascending-icon" ></span>    <span ref="eSortDesc" class="ag-header-icon ag-sort-descending-icon" ></span>    <span ref="eText" class="ag-header-cell-text" role="columnheader"></span>    <span ref="eFilter" class="ag-header-icon ag-filter-icon"></span>    <span ref="eSortOrder" class="ag-header-icon ag-sort-order" ></span>    <span ref="eSortNone" class="ag-header-icon ag-sort-none-icon" ></span>  </div></div>'},filterParams:{clearButton:!0}},columnTypes:{numberColumn:{width:83,filter:"agNumberColumnFilter",comparator:AGN.Lib.TableNumberComparator},dateColumn:{filter:AGN.Lib.TableDateFilter},setColumn:{filter:AGN.Lib.TableSetFilter}},icons:{menu:'<i class="icon icon-filter"/>',filter:'<i class="icon icon-filter"/>',columns:'<i class="icon icon-handshake-o"/>',sortAscending:'<i class="icon icon-sort-asc"/>',sortDescending:'<i class="icon icon-sort-desc"/>',checkboxChecked:'<i class="icon icon-check-square-o"/>',checkboxUnchecked:'<i class="icon icon-square-o"/>',checkboxIndeterminate:'<i class="icon icon-square-o"/>',checkboxCheckedReadOnly:'<i class="icon icon-check-square-o"/>',checkboxUncheckedReadOnly:'<i class="icon icon-square-o"/>',checkboxIndeterminateReadOnly:'<i class="icon icon-square-o"/>'},localeText:window.I18n.tables},e||{}),this.grid=new agGrid.Grid(this.$el.find(".ag-theme-bootstrap").get(0),this.gridOptions),this.api=this.gridOptions.api,this.api.setRowData(d),this.api.sizeColumnsToFit()},a.prototype.renderPagination=function(){var a,b,c,d,e=this.api,f=AGN.Lib.Template.prepare("table-controls-top");paginationBottomTemplate=AGN.Lib.Template.prepare("table-controls-bottom"),e&&(a=e.paginationGetCurrentPage()+1,b=e.paginationGetTotalPages(),c=[a],_.times(5,function(d){a-(d+1)>0&&c.unshift(a-(d+1)),a+(d+1)<=b&&c.push(a+(d+1))}),d={pagination:this.gridOptions.pagination,currentPage:a,totalPages:b,itemStart:e.paginationGetPageSize()*(a-1)+1,itemEnd:a==b?e.paginationGetRowCount():e.paginationGetPageSize()*a,itemTotal:e.paginationGetRowCount(),pageSelects:c},this.$paginationTop.html(f(d)),this.$paginationBottom.html(paginationBottomTemplate(d)),this.api.redrawRows())},a.prototype.redraw=function(){this.api.sizeColumnsToFit()},a.get=function(b){var c,d;return c=a.getWrapper(b),d=c.data("_table")},a.getWrapper=function(a){var b;return b=$(a.data("table-body")),0==b.length&&(b=a.closest(".js-data-table-body")),b},AGN.Lib.Table=a}(),function(){function a(a){if(a in d)return _.template(d[a]);throw new Error("There's no template `"+a+"` registered")}function b(b,c){return a(b)(c)}function c(a,c){return $(b(a,c))}var d=AGN.Opt.Templates;AGN.Lib.Template={prepare:a,text:b,dom:c}}(),function(){var a,b,c,d,e,f=AGN.Lib.Storage;a=function(a){var b=a.data("toggle-tile"),c=f.get("toggle_tile"+b);c&&(c.hidden?e(a):d(a))},b=function(a){var b=$(a.data("toggle-tile"));b.hasClass("hidden")?d(a):e(a)},d=function(a){var b=a.find(".icon"),c=a.data("toggle-tile"),d=$(c);d.removeClass("hidden"),b.addClass("icon-angle-up"),b.removeClass("icon-angle-down"),f.set("toggle_tile"+c,{hidden:!1}),AGN.Initializers.Load(d)},c=function(a){return a.closest(".tile").find("[data-toggle-tile]")},e=function(a){var b=a.find(".icon"),c=a.data("toggle-tile");$(c).addClass("hidden"),b.addClass("icon-angle-down"),b.removeClass("icon-angle-up"),f.set("toggle_tile"+c,{hidden:!0})},AGN.Lib.Tile={toggle:b,init:a,show:d,hide:e,trigger:c}}(),function(){function a(a,b){return{title:a,container:"body",template:g(b)}}function b(a,b,c){return{title:f(a,b),container:"body",html:!0,placement:"auto top",template:g(c,"helper-popup-arrow","helper-popup")}}var c={},d=AGN.Lib.Template,e=AGN.Lib.Helpers,f=function(){var a=d.prepare("tooltip-message-with-title"),b=d.prepare("tooltip-message-just-content");return function(c,d){return c?a({title:c,content:d}):b({content:d})}}(),g=function(){var a=d.prepare("tooltip-template");return function(b,c,d){return a({tooltipStyle:b,arrowStyle:c,innerStyle:d})}}();c.options=function(c){var f={};if(c.is("[data-tooltip]")){var g=c.data("tooltip"),h=c.data("tooltip-src");h&&(g=d.text(h,{element:c})),f=a(g,c.data("tooltip-style"))}else c.is("[data-tooltip-help]")&&(f=b(c.data("tooltip-help"),c.data("tooltip-help-text"),c.data("tooltip-style")));return $.extend(f,e.objFromString(c.data("tooltip-options")))},c.create=function(a,b){c.remove(a),a.bsTooltip(b),a.on({"dragstart.tooltip":function(){a.bsTooltip("hide"),a.bsTooltip("disable")},"dragstop.tooltip":function(){a.bsTooltip("enable")}})},c.remove=function(a){a.bsTooltip("hide"),a.bsTooltip("destroy"),a.off("dragstart.tooltip dragstop.tooltip")},c.setEnabled=function(a,b){b||void 0===b?a.bsTooltip("enable"):(a.bsTooltip("hide"),a.bsTooltip("disable"))},c.createTip=function(b,d,e){c.create(b,a(d,e))},c.createHelpTip=function(a,d,e,f){c.create(a,b(d,e,f))},AGN.Lib.Tooltip=c}(),function(){AGN.Lib.Truncate={run:function(a,b){var c,d;c=a.width(),d=_.reduce(a.children().not(b),function(a,b){return a+$(b).outerWidth(!0)},0),d+=$(b).outerWidth(!0)-$(b).outerWidth(),d=.05*d>5?1.05*d:d+5,d=d>c?c:d,a.children(b).css({"max-width":c-d+"px",overflow:"hidden"})}}}(),function(){var a,b=AGN.Lib.Form;a=function(a){b.apply(this,[a]),this.isMultipart=!1,this.count=0,this.fileData=[],this.$form.fileupload({progressInterval:100,bitrateInterval:500,dataType:"string",autoupload:!1,dropzone:this.$form.find(".dropzone"),add:_.bind(this.fileUploadAdd,this),progress:_.bind(this.fileUploadProgress,this),done:_.bind(this.fileUploadDone,this)})},a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.prototype.fileUploadAdd=function(a,b){var c=this,d=this._uploadConfig().add;if(b.count=this.count+=1,b.filename=b.files[0].name,b.size=b.files[0].size,/^image/.test(b.files[0].type)){var e=new FileReader;e.readAsDataURL(b.files[0]),e.onloadend=function(){b.preview=this.result,
template=_.template(d.template,b),d.container.removeClass("hidden"),b.context=$(template).appendTo(d.target),AGN.runAll(b.context),c.initFields()}}else b.preview=void 0,template=_.template(d.template,b),d.container.removeClass("hidden"),b.context=$(template).appendTo(d.target),AGN.runAll(b.context),c.initFields();this.fileData=this.fileData.concat(b.files)},a.prototype.fileUploadProgress=function(a,b){var c=this._uploadConfig(),d=b.progress();b.currentProgress=parseInt(100*d.loaded/d.total),template=_.template(c.progress.template,b),c.add.container.addClass("hidden"),c.progress.container.removeClass("hidden"),c.progress.target.html(template)},a.prototype.fileUploadDone=function(a,b){this.reset()},a.prototype.jqxhr=function(){return jqhxr=this.$form.fileupload("send",{paramName:this._fileParamName(),dataType:"text",files:this.fileData,form:this.$form,formData:this.data(),loader:this.loader()}),this._jqxhr=jqhxr,jqhxr},a.prototype.reset=function(){var a=this._uploadConfig();this.$form.trigger("reset"),this.count=0,this._dataNextRequest={},this.fileData=[],a.progress.target.empty(),a.progress.container.addClass("hidden"),a.add.target.empty(),a.add.container.addClass("hidden")},a.prototype.abort=function(){var a=this._uploadConfig();this._jqxhr.abort(),a.progress.target.empty(),a.progress.container.addClass("hidden"),a.add.container.removeClass("hidden")},a.prototype._fileParamName=function(){var a=this._getFileField().attr("name"),b=this._getFileField().data("upload"),c=this._getFileField().attr("multiple");return c?_.map(this.fileData,function(c,d){return"mvc"===b?a.replace(/\[\]/,""):a.replace(/\[\]/,"["+(d+1)+"]")}):a},a.prototype._getFileField=function(){return this.$form.find("[data-upload]")},a.prototype._uploadConfig=function(){return{add:{container:this.$form.find("[data-upload-add]"),target:this.$form.find("[data-upload-add-template]"),template:AGN.Opt.Templates[this.$form.find("[data-upload-add-template]").data("upload-add-template")]},progress:{container:this.$form.find("[data-upload-progress]"),target:this.$form.find("[data-upload-progress-template]"),template:AGN.Opt.Templates[this.$form.find("[data-upload-progress-template]").data("upload-progress-template")]}}},a.prototype._submit=function(){var a,b=this;return this.setLoaderShown(!0),a=this.jqxhr(),a.done(function(a){b.setLoaderShown(!1),b.updateHtml(a)}),a},a.prototype.updateHtml=function(a){AGN.Lib.Page.render(a)},AGN.Lib.UploadForm=a,AGN.Opt.Forms.upload=a}(),function(){var a;a=function(a){return $.extend(this,a)},a.exists=function(a){return AGN.Opt.Validators.hasOwnProperty(a)},a.get=function(b){return a.exists(b)?AGN.Opt.Validators[b]:null},a.new=function(b,c){a.exists(b)&&console.debug("Validator with name `"+b+"` was overridden");var d=new a(c);return AGN.Opt.Validators[b]=d,d},a.prototype.valid=function(){return!0},a.prototype.errors=function(){return[]},AGN.Lib.Validator=a}(),function(){var a,b,c;a=function(){var a=$("[data-view]:checked"),b=AGN.Lib.Storage.get("view_"+a.data("view"));b?$('[data-view][value="'+b.view+'"]').prop("checked",!0):b={view:a.val()},c(b.view)},b=function(a){var b=a.val();c(b),AGN.Lib.Storage.set("view_"+a.data("view"),{view:b})},c=function(a){_.each($("[data-view-"+a+"]"),function(b){var c=$(b);c.attr("class",c.data("view-"+a))}),$(window).trigger("resize"),AGN.Initializers.Load()},AGN.Lib.View={init:a,trigger:b}}(),function(){var a=AGN.Lib.Storage,b={};b.get=function(b){var c="web-storage#"+$.trim(b);try{return a.get(c)}catch(a){console.error(a)}return null},b.set=function(b,c){a.set("web-storage#"+$.trim(b),c)},b.extend=function(a,c){var d=b.get(a);return d=null!=d?$.extend(d,c):c,b.set(a,d),d},AGN.Lib.WebStorage=b}(),jsPlumbUtil={isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isString:function(a){return"string"==typeof a},isBoolean:function(a){return"boolean"==typeof a},isObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)},isDate:function(a){return"[object Date]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},clone:function(a){if(this.isString(a))return new String(a);if(this.isBoolean(a))return new Boolean(a);if(this.isDate(a))return new Date(a.getTime());if(this.isFunction(a))return a;if(this.isArray(a)){for(var b=[],c=0;c<a.length;c++)b.push(this.clone(a[c]));return b}if(this.isObject(a)){var b={};for(var c in a)b[c]=this.clone(a[c]);return b}return a},merge:function(a,b){var c=this.clone(a);for(var d in b)if(null==c[d]||this.isString(b[d])||this.isBoolean(b[d]))c[d]=b[d];else if(this.isArray(b[d])&&this.isArray(c[d])){var e=[];e.push.apply(e,c[d]),e.push.apply(e,b[d]),c[d]=e}else if(this.isObject(c[d])&&this.isObject(b[d]))for(var f in b[d])c[d][f]=b[d][f];return c},convertStyle:function(a,b){if("transparent"===a)return a;var c=a,d=function(a){return 1==a.length?"0"+a:a},e=function(a){return d(Number(a).toString(16))},f=/(rgb[a]?\()(.*)(\))/;if(a.match(f)){var g=a.match(f)[2].split(",");c="#"+e(g[0])+e(g[1])+e(g[2]),b||4!=g.length||(c+=e(g[3]))}return c},gradient:function(a,b){return a=jsPlumbUtil.isArray(a)?a:[a.x,a.y],b=jsPlumbUtil.isArray(b)?b:[b.x,b.y],(b[1]-a[1])/(b[0]-a[0])},normal:function(a,b){return-1/jsPlumbUtil.gradient(a,b)},lineLength:function(a,b){return a=jsPlumbUtil.isArray(a)?a:[a.x,a.y],b=jsPlumbUtil.isArray(b)?b:[b.x,b.y],Math.sqrt(Math.pow(b[1]-a[1],2)+Math.pow(b[0]-a[0],2))},segment:function(a,b){return a=jsPlumbUtil.isArray(a)?a:[a.x,a.y],b=jsPlumbUtil.isArray(b)?b:[b.x,b.y],b[0]>a[0]?b[1]>a[1]?2:1:b[1]>a[1]?3:4},intersects:function(a,b){var c=a.x,d=a.x+a.w,e=a.y,f=a.y+a.h,g=b.x,h=b.x+b.w,i=b.y,j=b.y+b.h;return c<=g&&g<=d&&e<=i&&i<=f||c<=h&&h<=d&&e<=i&&i<=f||c<=g&&g<=d&&e<=j&&j<=f||c<=h&&g<=d&&e<=j&&j<=f||g<=c&&c<=h&&i<=e&&e<=j||g<=d&&d<=h&&i<=e&&e<=j||g<=c&&c<=h&&i<=f&&f<=j||g<=d&&c<=h&&i<=f&&f<=j},segmentMultipliers:[null,[1,-1],[1,1],[-1,1],[-1,-1]],inverseSegmentMultipliers:[null,[-1,-1],[-1,1],[1,1],[1,-1]],pointOnLine:function(a,b,c){var d=jsPlumbUtil.gradient(a,b),e=jsPlumbUtil.segment(a,b),f=c>0?jsPlumbUtil.segmentMultipliers[e]:jsPlumbUtil.inverseSegmentMultipliers[e],g=Math.atan(d),h=Math.abs(c*Math.sin(g))*f[1],i=Math.abs(c*Math.cos(g))*f[0];return{x:a.x+i,y:a.y+h}},perpendicularLineTo:function(a,b,c){var d=jsPlumbUtil.gradient(a,b),e=Math.atan(-1/d),f=c/2*Math.sin(e),g=c/2*Math.cos(e);return[{x:b.x+g,y:b.y+f},{x:b.x-g,y:b.y-f}]},findWithFunction:function(a,b){if(a)for(var c=0;c<a.length;c++)if(b(a[c]))return c;return-1},indexOf:function(a,b){return jsPlumbUtil.findWithFunction(a,function(a){return a==b})},removeWithFunction:function(a,b){var c=jsPlumbUtil.findWithFunction(a,b);return c>-1&&a.splice(c,1),c!=-1},remove:function(a,b){var c=jsPlumbUtil.indexOf(a,b);return c>-1&&a.splice(c,1),c!=-1},addWithFunction:function(a,b,c){jsPlumbUtil.findWithFunction(a,c)==-1&&a.push(b)},addToList:function(a,b,c){var d=a[b];return null==d&&(d=[],a[b]=d),d.push(c),d},EventGenerator:function(){var a={},b=this,c=["ready"];this.bind=function(c,d){return jsPlumbUtil.addToList(a,c,d),b},this.fire=function(d,e,f){if(a[d])for(var g=0;g<a[d].length;g++)if(jsPlumbUtil.findWithFunction(c,function(a){return a===d})!=-1)a[d][g](e,f);else try{a[d][g](e,f)}catch(a){jsPlumbUtil.log("jsPlumb: fire failed for event "+d+" : "+a)}return b},this.unbind=function(c){return c?delete a[c]:a={},b},this.getListener=function(b){return a[b]}},logEnabled:!0,log:function(){if(jsPlumbUtil.logEnabled&&"undefined"!=typeof console)try{var a=arguments[arguments.length-1];console.log(a)}catch(a){}},group:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.group(a)},groupEnd:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.groupEnd(a)},time:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.time(a)},timeEnd:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.timeEnd(a)}},function(){var a=!!document.createElement("canvas").getContext,b=!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),c=function(){if(void 0==c.vml){var a=document.body.appendChild(document.createElement("div"));a.innerHTML='<v:shape id="vml_flag1" adj="1" />';var b=a.firstChild;b.style.behavior="url(#default#VML)",c.vml=!b||"object"==typeof b.adj,a.parentNode.removeChild(a)}return c.vml},d=function(a){var b={},c=[],d={},e={};this.register=function(f){var g=jsPlumb.CurrentLibrary;f=g.getElementObject(f);var h=a.getId(f),i=g.getDOMElement(f),j=g.getOffset(f);b[h]||(b[h]=f,c.push(f),d[h]={});var k=function(b,c){if(b)for(var f=0;f<b.childNodes.length;f++)if(3!=b.childNodes[f].nodeType){var i=g.getElementObject(b.childNodes[f]),l=a.getId(i,null,!0);if(l&&e[l]&&e[l]>0){var m=g.getOffset(i);d[h][l]={id:l,offset:{left:m.left-j.left,top:m.top-j.top}}}k(b.childNodes[f])}};k(i)},this.updateOffsets=function(b){var c=jsPlumb.CurrentLibrary,e=c.getElementObject(b),f=a.getId(e),g=d[f],h=c.getOffset(e);if(g)for(var i in g){var j=c.getElementObject(i),k=c.getOffset(j);d[f][i]={id:i,offset:{left:k.left-h.left,top:k.top-h.top}}}},this.endpointAdded=function(c){var f=jsPlumb.CurrentLibrary,g=document.body,h=a.getId(c),i=f.getDOMElement(c),j=i.parentNode;for(e[h]=e[h]?e[h]+1:1;j!=g;){var k=a.getId(j,null,!0);if(k&&b[k]){var l=f.getElementObject(j),m=f.getOffset(l);if(null==d[k][h]){var n=jsPlumb.CurrentLibrary.getOffset(c);d[k][h]={id:h,offset:{left:n.left-m.left,top:n.top-m.top}}}break}j=j.parentNode}},this.endpointDeleted=function(a){if(e[a.elementId]&&(e[a.elementId]--,e[a.elementId]<=0))for(var b in d)delete d[b][a.elementId]},this.getElementsForDraggable=function(a){return d[a]},this.reset=function(){b={},c=[],d={},e={}}};window.console||(window.console={time:function(){},timeEnd:function(){},group:function(){},groupEnd:function(){},log:function(){}}),window.jsPlumbAdapter={headless:!1,appendToRoot:function(a){document.body.appendChild(a)},getRenderModes:function(){return["canvas","svg","vml"]},isRenderModeAvailable:function(d){return{canvas:a,svg:b,vml:c()}[d]},getDragManager:function(a){return new d(a)},setRenderMode:function(a){var b;if(a){a=a.toLowerCase();var c=this.isRenderModeAvailable("canvas"),d=this.isRenderModeAvailable("svg"),e=this.isRenderModeAvailable("vml");"svg"===a?d?b="svg":c?b="canvas":e&&(b="vml"):"canvas"===a&&c?b="canvas":e&&(b="vml")}return b}}}(),function(){var a=jsPlumbUtil.findWithFunction,b=jsPlumbUtil.indexOf,c=jsPlumbUtil.removeWithFunction,d=(jsPlumbUtil.remove,jsPlumbUtil.addWithFunction),e=(jsPlumbUtil.addToList,jsPlumbUtil.isArray),f=jsPlumbUtil.isString,g=jsPlumbUtil.isObject,h=null,i=function(a,b){return x.CurrentLibrary.getAttribute(m(a),b)},j=function(a,b,c){x.CurrentLibrary.setAttribute(m(a),b,c)},k=function(a,b){x.CurrentLibrary.addClass(m(a),b)},l=function(a,b){x.CurrentLibrary.removeClass(m(a),b)},m=function(a){return x.CurrentLibrary.getElementObject(a)},n=function(a,b){var c=x.CurrentLibrary.getOffset(m(a));if(null!=b){var d=b.getZoom();return{left:c.left/d,top:c.top/d}}return c},o=function(a){return x.CurrentLibrary.getSize(m(a))},p=jsPlumbUtil.log,q=(jsPlumbUtil.group,jsPlumbUtil.groupEnd,jsPlumbUtil.time,jsPlumbUtil.timeEnd,function(){return""+(new Date).getTime()}),r=function(a){var b=this,c=arguments,d=!1,e=a.parameters||{},f=b.idPrefix,g=f+(new Date).getTime(),h=null,i=null;b._jsPlumb=a._jsPlumb,b.getId=function(){return g},b.tooltip=a.tooltip,b.hoverClass=a.hoverClass||b._jsPlumb.Defaults.HoverClass||x.Defaults.HoverClass,jsPlumbUtil.EventGenerator.apply(this),this.clone=function(){var a=new Object;return b.constructor.apply(a,c),a},this.getParameter=function(a){return e[a]},this.getParameters=function(){return e},this.setParameter=function(a,b){e[a]=b},this.setParameters=function(a){e=a},this.overlayPlacements=[];var j=a.beforeDetach;this.isDetachAllowed=function(a){var c=b._jsPlumb.checkCondition("beforeDetach",a);if(j)try{c=j(a)}catch(a){p("jsPlumb: beforeDetach callback failed",a)}return c};var k=a.beforeDrop;this.isDropAllowed=function(a,c,d,e,f){var g=b._jsPlumb.checkCondition("beforeDrop",{sourceId:a,targetId:c,scope:d,connection:e,dropEndpoint:f});if(k)try{g=k({sourceId:a,targetId:c,scope:d,connection:e,dropEndpoint:f})}catch(a){p("jsPlumb: beforeDrop callback failed",a)}return g};var l=function(){if(h&&i){var a={};x.extend(a,h),x.extend(a,i),delete b.hoverPaintStyle,a.gradient&&h.fillStyle&&delete a.gradient,i=a}};this.setPaintStyle=function(a,c){h=a,b.paintStyleInUse=h,l(),c||b.repaint()},this.getPaintStyle=function(){return h},this.setHoverPaintStyle=function(a,c){i=a,l(),c||b.repaint()},this.getHoverPaintStyle=function(){return i},this.setHover=function(a,c,e){b._jsPlumb.currentlyDragging||b._jsPlumb.isHoverSuspended()||(d=a,null!=b.hoverClass&&null!=b.canvas&&(a?n.addClass(b.canvas,b.hoverClass):n.removeClass(b.canvas,b.hoverClass)),null!=i&&(b.paintStyleInUse=a?i:h,e=e||q(),b.repaint({timestamp:e,recalc:!1})),b.getAttachedElements&&!c&&u(a,q(),b))},this.isHover=function(){return d};var m=null;this.setZIndex=function(a){m=a},this.getZIndex=function(){return m};var n=x.CurrentLibrary,o=["click","dblclick","mouseenter","mouseout","mousemove","mousedown","mouseup","contextmenu"],r={mouseout:"mouseexit"},s=function(a,b,c){var d=r[c]||c;n.bind(a,c,function(a){b.fire(d,b,a)})},t=function(a,b){r[b]||b;n.unbind(a,b)};this.attachListeners=function(a,b){for(var c=0;c<o.length;c++)s(a,b,o[c])};var u=function(a,c,d){var e=b.getAttachedElements();if(e)for(var f=0;f<e.length;f++)d&&d==e[f]||e[f].setHover(a,!0,c)};this.reattachListenersForElement=function(a){if(arguments.length>1){for(var c=0;c<o.length;c++)t(a,o[c]);for(var c=1;c<arguments.length;c++)b.attachListeners(a,arguments[c])}};var v=[],w=function(a){return null==a?null:a.split(" ")},y=function(a){if(b.getDefaultType){for(var c=b.getTypeDescriptor(),d=jsPlumbUtil.merge({},b.getDefaultType()),e=0;e<v.length;e++)d=jsPlumbUtil.merge(d,b._jsPlumb.getType(v[e],c));b.applyType(d),a||b.repaint()}};b.setType=function(a,b){v=w(a)||[],y(b)},b.getType=function(){return v},b.hasType=function(a){return jsPlumbUtil.indexOf(v,a)!=-1},b.addType=function(a,c){var d=w(a),e=!1;if(null!=d){for(var f=0;f<d.length;f++)b.hasType(d[f])||(v.push(d[f]),e=!0);e&&y(c)}},b.removeType=function(a,b){var c=w(a),d=!1,e=function(a){var b=jsPlumbUtil.indexOf(v,a);return b!=-1&&(v.splice(b,1),!0)};if(null!=c){for(var f=0;f<c.length;f++)d=e(c[f])||d;d&&y(b)}},b.toggleType=function(a,b){var c=w(a);if(null!=c){for(var d=0;d<c.length;d++){var e=jsPlumbUtil.indexOf(v,c[d]);e!=-1?v.splice(e,1):v.push(c[d])}y(b)}},this.applyType=function(a){if(b.setPaintStyle(a.paintStyle),b.setHoverPaintStyle(a.hoverPaintStyle),a.parameters)for(var c in a.parameters)b.setParameter(c,a.parameters[c])}},s=function(a){r.apply(this,arguments);var b=this;this.overlays=[];var c=function(a){var c=null;if(e(a)){var d=a[0],f=x.extend({component:b,_jsPlumb:b._jsPlumb},a[1]);if(3==a.length&&x.extend(f,a[2]),c=new(x.Overlays[b._jsPlumb.getRenderMode()][d])(f),f.events)for(var g in f.events)c.bind(g,f.events[g])}else c=a.constructor==String?new(x.Overlays[b._jsPlumb.getRenderMode()][a])({component:b,_jsPlumb:b._jsPlumb}):a;b.overlays.push(c)},d=function(a){var c=b.defaultOverlayKeys||[],d=a.overlays,e=function(a){return b._jsPlumb.Defaults[a]||x.Defaults[a]||[]};d||(d=[]);for(var f=0;f<c.length;f++)d.unshift.apply(d,e(c[f]));return d},f=d(a);if(f)for(var g=0;g<f.length;g++)c(f[g]);var h=function(a){for(var c=-1,d=0;d<b.overlays.length;d++)if(a===b.overlays[d].id){c=d;break}return c};this.addOverlay=function(a,d){c(a),d||b.repaint()},this.getOverlay=function(a){var c=h(a);return c>=0?b.overlays[c]:null},this.getOverlays=function(){return b.overlays},this.hideOverlay=function(a){var c=b.getOverlay(a);c&&c.hide()},this.hideOverlays=function(){for(var a=0;a<b.overlays.length;a++)b.overlays[a].hide()},this.showOverlay=function(a){var c=b.getOverlay(a);c&&c.show()},this.showOverlays=function(){for(var a=0;a<b.overlays.length;a++)b.overlays[a].show()},this.removeAllOverlays=function(){for(var a=0;a<b.overlays.length;a++)b.overlays[a].cleanup&&b.overlays[a].cleanup();b.overlays.splice(0,b.overlays.length),b.repaint()},this.removeOverlay=function(a){var c=h(a);if(c!=-1){var d=b.overlays[c];d.cleanup&&d.cleanup(),b.overlays.splice(c,1)}},this.removeOverlays=function(){for(var a=0;a<arguments.length;a++)b.removeOverlay(arguments[a])};var i="__label",j=function(a){var c={cssClass:a.cssClass,labelStyle:this.labelStyle,id:i,component:b,_jsPlumb:b._jsPlumb},d=x.extend(c,a);return new(x.Overlays[b._jsPlumb.getRenderMode()].Label)(d)};if(a.label){var k=a.labelLocation||b.defaultLabelLocation||.5,l=a.labelStyle||b._jsPlumb.Defaults.LabelStyle||x.Defaults.LabelStyle;this.overlays.push(j({label:a.label,location:k,labelStyle:l}))}this.setLabel=function(a){var c=b.getOverlay(i);if(c)a.constructor==String||a.constructor==Function?c.setLabel(a):(a.label&&c.setLabel(a.label),a.location&&c.setLocation(a.location));else{var d=a.constructor==String||a.constructor==Function?{label:a}:a;c=j(d),this.overlays.push(c)}b._jsPlumb.isSuspendDrawing()||b.repaint()},this.getLabel=function(){var a=b.getOverlay(i);return null!=a?a.getLabel():null},this.getLabelOverlay=function(){return b.getOverlay(i)};var m=this.applyType;this.applyType=function(a){if(m(a),b.removeAllOverlays(),a.overlays)for(var c=0;c<a.overlays.length;c++)b.addOverlay(a.overlays[c],!0)}},t=function(a,b,c){a.bind("click",function(a,c){b.fire("click",b,c)}),a.bind("dblclick",function(a,c){b.fire("dblclick",b,c)}),a.bind("contextmenu",function(a,c){b.fire("contextmenu",b,c)}),a.bind("mouseenter",function(a,d){b.isHover()||(c(!0),b.fire("mouseenter",b,d))}),a.bind("mouseexit",function(a,d){b.isHover()&&(c(!1),b.fire("mouseexit",b,d))})},u=0,v=function(){var a=u+1;return u++,a},w=function(u){this.Defaults={Anchor:"BottomCenter",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",ConnectorZIndex:null,Container:null,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:8,strokeStyle:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},u&&x.extend(this.Defaults,u),this.logEnabled=this.Defaults.LogEnabled;var w={},y={};this.registerConnectionType=function(a,b){w[a]=x.extend({},b)},this.registerConnectionTypes=function(a){for(var b in a)w[b]=x.extend({},a[b])},this.registerEndpointType=function(a,b){y[a]=x.extend({},b)},this.registerEndpointTypes=function(a){for(var b in a)y[b]=x.extend({},a[b])},this.getType=function(a,b){return"connection"===b?w[a]:y[a]},jsPlumbUtil.EventGenerator.apply(this);var z=this,A=v(),B=z.bind,C={},D=1;this.setZoom=function(a,b){D=a,b&&z.repaintEverything()},this.getZoom=function(){return D};for(var E in this.Defaults)C[E]=this.Defaults[E];this.bind=function(a,b){"ready"===a&&G?b():B.apply(z,[a,b])},z.importDefaults=function(a){for(var b in a)z.Defaults[b]=a[b]},z.restoreDefaults=function(){z.Defaults=x.extend({},C)};var F=null,G=!1,H={},I={},J={},K={},L={},M={},N={},O=[],P=this.Defaults.Scope,Q=null,R=function(a,b,c){var d=a[b];return null==d&&(d=[],a[b]=d),d.push(c),d},S=function(a,b){z.Defaults.Container?x.CurrentLibrary.appendElement(a,z.Defaults.Container):b?x.CurrentLibrary.appendElement(a,b):jsPlumbAdapter.appendToRoot(a)},T=1,U=function(){return""+T++},V=function(a){return a._nodes?a._nodes:a},W=function(a,b,c){if(!jsPlumbAdapter.headless&&!Ua){var d=i(a,"id"),e=z.dragManager.getElementsForDraggable(d);if(null==c&&(c=q()),z.anchorManager.redraw(d,b,c),e)for(var f in e)z.anchorManager.redraw(e[f].id,b,c,e[f].offset)}},X=function(a,b){var c=null;if(e(a)){c=[];for(var d=0;d<a.length;d++){var f=m(a[d]),g=i(f,"id");c.push(b(f,g))}}else{var f=m(a),g=i(f,"id");c=b(f,g)}return c},Y=function(a){return J[a]},Z=function(a,b,c){if(!jsPlumbAdapter.headless){var d=null!=b&&b,e=x.CurrentLibrary;if(d&&e.isDragSupported(a)&&!e.isAlreadyDraggable(a)){var f=c||z.Defaults.DragOptions||x.Defaults.DragOptions;f=x.extend({},f);var g=e.dragEvents.drag,h=e.dragEvents.stop,i=e.dragEvents.start;f[i]=oa(f[i],function(){z.setHoverSuspended(!0)}),f[g]=oa(f[g],function(){var b=e.getUIPosition(arguments,z.getZoom());W(a,b),k(a,"jsPlumb_dragged")}),f[h]=oa(f[h],function(){var b=e.getUIPosition(arguments,z.getZoom());W(a,b),l(a,"jsPlumb_dragged"),z.setHoverSuspended(!1)});var j=na(a);N[j]=!0;var d=N[j];f.disabled=null!=d&&!d,e.initDraggable(a,f,!1),z.dragManager.register(a)}}},$=function(a,b){var c=x.extend({sourceIsNew:!0,targetIsNew:!0},a);if(b&&x.extend(c,b),c.source&&c.source.endpoint&&(c.sourceEndpoint=c.source),c.source&&c.target.endpoint&&(c.targetEndpoint=c.target),a.uuids&&(c.sourceEndpoint=Y(a.uuids[0]),c.targetEndpoint=Y(a.uuids[1])),c.sourceEndpoint&&c.sourceEndpoint.isFull())return void p(z,"could not add connection; source endpoint is full");if(c.targetEndpoint&&c.targetEndpoint.isFull())return void p(z,"could not add connection; target endpoint is full");if(c.sourceEndpoint&&(c.sourceIsNew=!1),c.targetEndpoint&&(c.targetIsNew=!1),!c.type&&c.sourceEndpoint&&(c.type=c.sourceEndpoint.connectionType),c.sourceEndpoint&&c.sourceEndpoint.connectorOverlays){c.overlays=c.overlays||[];for(var d=0;d<c.sourceEndpoint.connectorOverlays.length;d++)c.overlays.push(c.sourceEndpoint.connectorOverlays[d])}if(c.tooltip=a.tooltip,!c.tooltip&&c.sourceEndpoint&&c.sourceEndpoint.connectorTooltip&&(c.tooltip=c.sourceEndpoint.connectorTooltip),c.target&&!c.target.endpoint&&!c.targetEndpoint&&!c.newConnection){var e=na(c.target),f=Fa[e],g=Ga[e];if(f){if(!Qa[e])return;var h=null!=g?g:z.addEndpoint(c.target,f);Ha[e]&&(Ga[e]=h),c.targetEndpoint=h,h._makeTargetCreator=!0,c.targetIsNew=!0}}if(c.source&&!c.source.endpoint&&!c.sourceEndpoint&&!c.newConnection){var e=na(c.source),f=Ka[e],g=La[e];if(f){if(!Na[e])return;var h=null!=g?g:z.addEndpoint(c.source,f);Ma[e]&&(La[e]=h),c.sourceEndpoint=h,c.sourceIsNew=!0}}return c},_=function(a){var b=z.Defaults.ConnectionType||z.getDefaultConnectionType(),c=z.Defaults.EndpointType||pb,d=x.CurrentLibrary.getParent;a.container?a.parent=a.container:a.sourceEndpoint?a.parent=a.sourceEndpoint.parent:a.source.constructor==c?a.parent=a.source.parent:a.parent=d(a.source),a._jsPlumb=z;var e=new b(a);return e.id="con_"+U(),ba("click","click",e),ba("dblclick","dblclick",e),ba("contextmenu","contextmenu",e),e},aa=function(a,b,c){if(b=b||{},a.suspendedEndpoint||R(H,a.scope,a),!b.doNotFireConnectionEvent&&b.fireEvent!==!1){var d={connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]};z.fire("jsPlumbConnection",d,c),z.fire("connection",d,c)}z.anchorManager.newConnection(a),W(a.source)},ba=function(a,b,c){c.bind(a,function(a,d){z.fire(b,c,d)})},ca=function(a){if(a.container)return a.container;var b=x.CurrentLibrary.getTagName(a.source),c=x.CurrentLibrary.getParent(a.source);return b&&"td"===b.toLowerCase()?x.CurrentLibrary.getParent(c):c},da=function(a){var b=z.Defaults.EndpointType||pb;a.parent=ca(a),a._jsPlumb=z;var c=new b(a);return c.id="ep_"+U(),ba("click","endpointClick",c),ba("dblclick","endpointDblClick",c),ba("contextmenu","contextmenu",c),jsPlumbAdapter.headless||z.dragManager.endpointAdded(a.source),c},ea=function(a,b,c){var d=I[a];if(d&&d.length)for(var e=0;e<d.length;e++){for(var f=0;f<d[e].connections.length;f++){var g=b(d[e].connections[f]);if(g)return}c&&c(d[e])}},fa=function(a,b){null!=a&&null!=a.parentNode&&a.parentNode.removeChild(a)},ga=function(a,b){for(var c=0;c<a.length;c++)fa(a[c],b)},ha=function(a,b){return X(a,function(a,c){N[c]=b,x.CurrentLibrary.isDragSupported(a)&&x.CurrentLibrary.setDraggable(a,b)})},ia=function(a,b,c){b="block"===b;var d=null;c&&(d=b?function(a){a.setVisible(!0,!0,!0)}:function(a){a.setVisible(!1,!0,!0)});var e=i(a,"id");ea(e,function(a){if(b&&c){var d=a.sourceId===e?1:0;a.endpoints[d].isVisible()&&a.setVisible(!0)}else a.setVisible(b)},d)},ja=function(a){return X(a,function(a,b){var c=null!=N[b]&&N[b];return c=!c,N[b]=c,x.CurrentLibrary.setDraggable(a,c),c})},ka=function(a,b){var c=null;b&&(c=function(a){var b=a.isVisible();a.setVisible(!b)}),ea(a,function(a){var b=a.isVisible();a.setVisible(!b)},c)},la=function(a){var b=a.timestamp,c=a.recalc,d=a.offset,e=a.elId;if(Ua&&!b&&(b=Va),!c&&b&&b===L[e])return K[e];if(c||!d){var f=m(e);null!=f&&(O[e]=o(f),K[e]=n(f,z),L[e]=b)}else if(K[e]=d,null==O[e]){var f=m(e);null!=f&&(O[e]=o(f))}return K[e]&&!K[e].right&&(K[e].right=K[e].left+O[e][0],K[e].bottom=K[e].top+O[e][1],K[e].width=O[e][0],K[e].height=O[e][1],K[e].centerx=K[e].left+K[e].width/2,K[e].centery=K[e].top+K[e].height/2),K[e]},ma=function(a){var b=K[a];return b||(b=la({elId:a})),{o:b,s:O[a]}},na=function(a,b,c){var d=m(a),e=i(d,"id");return e&&"undefined"!=e||(2==arguments.length&&void 0!=arguments[1]?e=b:(1==arguments.length||3==arguments.length&&!arguments[2])&&(e="jsPlumb_"+A+"_"+U()),c||j(d,"id",e)),e},oa=function(a,b,c){return a=a||function(){},b=b||function(){},function(){var d=null;try{d=b.apply(this,arguments)}catch(a){p(z,"jsPlumb function failed : "+a)}if(null==c||d!==c)try{a.apply(this,arguments)}catch(a){p(z,"wrapped function failed : "+a)}return d}};this.connectorClass="_jsPlumb_connector",this.endpointClass="_jsPlumb_endpoint",this.overlayClass="_jsPlumb_overlay",this.Anchors={},this.Connectors={canvas:{},svg:{},vml:{}},this.Endpoints={canvas:{},svg:{},vml:{}},this.Overlays={canvas:{},svg:{},vml:{}},this.addClass=function(a,b){return x.CurrentLibrary.addClass(a,b)},this.removeClass=function(a,b){return x.CurrentLibrary.removeClass(a,b)},this.hasClass=function(a,b){return x.CurrentLibrary.hasClass(a,b)},this.addEndpoint=function(a,b,c){c=c||{};var d=x.extend({},c);x.extend(d,b),d.endpoint=d.endpoint||z.Defaults.Endpoint||x.Defaults.Endpoint,d.paintStyle=d.paintStyle||z.Defaults.EndpointStyle||x.Defaults.EndpointStyle,a=V(a);for(var e=[],f=a.length&&a.constructor!=String?a:[a],g=0;g<f.length;g++){var h=m(f[g]),i=na(h);d.source=h,la({elId:i,timestamp:Va});var j=da(d);d.parentAnchor&&(j.parentAnchor=d.parentAnchor),R(I,i,j);var k=K[i],l=O[i],n=j.anchor.compute({xy:[k.left,k.top],wh:l,element:j,timestamp:Va}),o={anchorLoc:n,timestamp:Va};Ua&&(o.recalc=!1),j.paint(o),e.push(j)}return 1==e.length?e[0]:e},this.addEndpoints=function(a,b,c){for(var d=[],f=0;f<b.length;f++){var g=z.addEndpoint(a,b[f],c);e(g)?Array.prototype.push.apply(d,g):d.push(g)}return d},this.animate=function(a,b,c){var d=m(a),e=i(a,"id");c=c||{};var f=x.CurrentLibrary.dragEvents.step,g=x.CurrentLibrary.dragEvents.complete;c[f]=oa(c[f],function(){z.repaint(e)}),c[g]=oa(c[g],function(){z.repaint(e)}),x.CurrentLibrary.animate(d,b,c)},this.checkCondition=function(a,b){var c=z.getListener(a),d=!0;if(c&&c.length>0)try{for(var e=0;e<c.length;e++)d=d&&c[e](b)}catch(b){p(z,"cannot check condition ["+a+"]"+b)}return d},this.checkASyncCondition=function(a,b,c,d){var e=z.getListener(a);if(e&&e.length>0)try{e[0](b,c,d)}catch(b){p(z,"cannot asynchronously check condition ["+a+"]"+b)}},this.connect=function(a,b){var c,d=$(a,b);return d&&(null==d.deleteEndpointsOnDetach&&(d.deleteEndpointsOnDetach=!0),c=_(d),aa(c,d)),c},this.deleteEndpoint=function(a){var b="string"==typeof a?J[a]:a;if(b){var c=b.getUuid();c&&(J[c]=null),b.detachAll(),b.endpoint.cleanup&&b.endpoint.cleanup(),ga(b.endpoint.getDisplayElements()),z.anchorManager.deleteEndpoint(b);for(var d in I){var e=I[d];if(e){for(var f=[],g=0;g<e.length;g++)e[g]!=b&&f.push(e[g]);I[d]=f}}jsPlumbAdapter.headless||z.dragManager.endpointDeleted(b)}},this.deleteEveryEndpoint=function(){z.setSuspendDrawing(!0);for(var a in I){var b=I[a];if(b&&b.length)for(var c=0;c<b.length;c++)z.deleteEndpoint(b[c])}I={},J={},z.setSuspendDrawing(!1,!0)};var pa=function(a,b,c){var d=z.Defaults.ConnectionType||z.getDefaultConnectionType(),e=a.constructor==d,f=e?{connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]}:a;b&&(z.fire("jsPlumbConnectionDetached",f,c),z.fire("connectionDetached",f,c)),z.anchorManager.connectionDetached(f)},qa=function(a){z.fire("connectionDrag",a)},ra=function(a){z.fire("connectionDragStop",a)};this.detach=function(){if(0!=arguments.length){var a=z.Defaults.ConnectionType||z.getDefaultConnectionType(),b=arguments[0].constructor==a,c=2==arguments.length&&b?arguments[1]||{}:arguments[0],d=c.fireEvent!==!1,e=c.forceDetach,f=b?arguments[0]:c.connection;if(f)(e||f.isDetachAllowed(f)&&f.endpoints[0].isDetachAllowed(f)&&f.endpoints[1].isDetachAllowed(f))&&(e||z.checkCondition("beforeDetach",f))&&f.endpoints[0].detach(f,!1,!0,d);else{var g=x.extend({},c);if(g.uuids)Y(g.uuids[0]).detachFrom(Y(g.uuids[1]),d);else if(g.sourceEndpoint&&g.targetEndpoint)g.sourceEndpoint.detachFrom(g.targetEndpoint);else{var h=na(g.source),i=na(g.target);ea(h,function(a){(a.sourceId==h&&a.targetId==i||a.targetId==h&&a.sourceId==i)&&z.checkCondition("beforeDetach",a)&&a.endpoints[0].detach(a,!1,!0,d)})}}}},this.detachAllConnections=function(a,b){b=b||{},a=m(a);var c=i(a,"id"),d=I[c];if(d&&d.length)for(var e=0;e<d.length;e++)d[e].detachAll(b.fireEvent)},this.detachEveryConnection=function(a){a=a||{};for(var b in I){var c=I[b];if(c&&c.length)for(var d=0;d<c.length;d++)c[d].detachAll(a.fireEvent)}H={}},this.draggable=function(a,b){if("object"==typeof a&&a.length)for(var c=0;c<a.length;c++){var d=m(a[c]);d&&Z(d,!0,b)}else if(a._nodes)for(var c=0;c<a._nodes.length;c++){var d=m(a._nodes[c]);d&&Z(d,!0,b)}else{var d=m(a);d&&Z(d,!0,b)}},this.extend=function(a,b){return x.CurrentLibrary.extend(a,b)},this.getDefaultEndpointType=function(){return pb},this.getDefaultConnectionType=function(){return lb};var sa=function(a,b,c,d){for(var e=0;e<a.length;e++)a[e][b].apply(a[e],c);return d(a)},ta=function(a,b,c){for(var d=[],e=0;e<a.length;e++)d.push([a[e][b].apply(a[e],c),a[e]]);return d},ua=function(a,b,c){return function(){return sa(a,b,arguments,c)}},va=function(a,b){return function(){return ta(a,b,arguments)}},wa=function(a,b){var c=[];if(a)if("string"==typeof a){if("*"===a)return a;c.push(a)}else if(b)c=a;else for(var d=0;d<a.length;d++)c.push(na(m(a[d])));return c},xa=function(a,c,d){return"*"===a||(a.length>0?b(a,c)!=-1:!d)};this.getConnections=function(a,b){a?a.constructor==String&&(a={scope:a}):a={};var c=a.scope||z.getDefaultScope(),d=wa(c,!0),e=wa(a.source),f=wa(a.target),g=!b&&d.length>1?{}:[],h=function(a,c){if(!b&&d.length>1){var e=g[a];null==e&&(e=[],g[a]=e),e.push(c)}else g.push(c)};for(var i in H)if(xa(d,i))for(var j=0;j<H[i].length;j++){var k=H[i][j];xa(e,k.sourceId)&&xa(f,k.targetId)&&h(i,k)}return g};var ya=function(a,b){return function(c){for(var d=0;d<a.length;d++)c(a[d]);return b(a)}},za=function(a){return function(b){return a[b]}},Aa=function(a,b){return{setHover:ua(a,"setHover",b),removeAllOverlays:ua(a,"removeAllOverlays",b),setLabel:ua(a,"setLabel",b),addOverlay:ua(a,"addOverlay",b),removeOverlay:ua(a,"removeOverlay",b),removeOverlays:ua(a,"removeOverlays",b),showOverlay:ua(a,"showOverlay",b),hideOverlay:ua(a,"hideOverlay",b),showOverlays:ua(a,"showOverlays",b),hideOverlays:ua(a,"hideOverlays",b),setPaintStyle:ua(a,"setPaintStyle",b),setHoverPaintStyle:ua(a,"setHoverPaintStyle",b),setParameter:ua(a,"setParameter",b),setParameters:ua(a,"setParameters",b),setVisible:ua(a,"setVisible",b),setZIndex:ua(a,"setZIndex",b),repaint:ua(a,"repaint",b),addType:ua(a,"addType",b),toggleType:ua(a,"toggleType",b),removeType:ua(a,"removeType",b),getLabel:va(a,"getLabel"),getOverlay:va(a,"getOverlay"),isHover:va(a,"isHover"),getParameter:va(a,"getParameter"),getParameters:va(a,"getParameters"),getPaintStyle:va(a,"getPaintStyle"),getHoverPaintStyle:va(a,"getHoverPaintStyle"),isVisible:va(a,"isVisible"),getZIndex:va(a,"getZIndex"),hasType:va(a,"hasType"),getType:va(a,"getType"),length:a.length,
each:ya(a,b),get:za(a)}},Ba=function(a){var b=Aa(a,Ba);return x.CurrentLibrary.extend(b,{setDetachable:ua(a,"setDetachable",Ba),setReattach:ua(a,"setReattach",Ba),setConnector:ua(a,"setConnector",Ba),detach:function(){for(var b=0;b<a.length;b++)z.detach(a[b])},isDetachable:va(a,"isDetachable"),isReattach:va(a,"isReattach")})},Ca=function(a){var b=Aa(a,Ca);return x.CurrentLibrary.extend(b,{setEnabled:ua(a,"setEnabled",Ca),isEnabled:va(a,"isEnabled"),detachAll:function(){for(var b=0;b<a.length;b++)a[b].detachAll()},delete:function(){for(var b=0;b<a.length;b++)z.deleteEndpoint(a[b])}})};this.select=function(a){a=a||{},a.scope=a.scope||"*";var b=z.getConnections(a,!0);return Ba(b)},this.selectEndpoints=function(a){a=a||{},a.scope=a.scope||"*";var b=!a.element&&!a.source&&!a.target,c=b?"*":wa(a.element),d=b?"*":wa(a.source),e=b?"*":wa(a.target),f=wa(a.scope,!0),g=[];for(var h in I){var i=xa(c,h,!0),j=xa(d,h,!0),k="*"!=d,l=xa(e,h,!0),m="*"!=e;if(i||j||l)a:for(var n=0;n<I[h].length;n++){var o=I[h][n];if(xa(f,o.scope,!0)){var p=k&&d.length>0&&!o.isSource,q=m&&e.length>0&&!o.isTarget;if(p||q)continue a;g.push(o)}}}return Ca(g)},this.getAllConnections=function(){return H},this.getDefaultScope=function(){return P},this.getEndpoint=Y,this.getEndpoints=function(a){return I[na(a)]},this.getId=na,this.getOffset=function(a){K[a];return la({elId:a})},this.getSelector=function(a){return x.CurrentLibrary.getSelector(a)},this.getSize=function(a){var b=O[a];return b||la({elId:a}),O[a]},this.appendElement=S;var Da=!1;this.isHoverSuspended=function(){return Da},this.setHoverSuspended=function(a){Da=a};var Ea=function(a){return function(){return jsPlumbAdapter.isRenderModeAvailable(a)}};this.isCanvasAvailable=Ea("canvas"),this.isSVGAvailable=Ea("svg"),this.isVMLAvailable=Ea("vml"),this.hide=function(a,b){ia(a,"none",b)},this.idstamp=U,this.init=function(){if(!G){z.setRenderMode(z.Defaults.RenderMode);var a=function(a){x.CurrentLibrary.bind(document,a,function(b){if(!z.currentlyDragging&&Q==x.CANVAS){for(var c in H)for(var d=H[c],e=0;e<d.length;e++){var f=d[e].connector[a](b);if(f)return}for(var g in I)for(var h=I[g],e=0;e<h.length;e++)if(h[e].endpoint[a](b))return}})};a("click"),a("dblclick"),a("mousemove"),a("mousedown"),a("mouseup"),a("contextmenu"),G=!0,z.fire("ready")}},this.log=F,this.jsPlumbUIComponent=r,this.makeAnchor=function(){if(0==arguments.length)return null;var a=arguments[0],b=arguments[1],c=(arguments[2],null);if(a.compute&&a.getOrientation)return a;if("string"==typeof a)c=x.Anchors[arguments[0]]({elementId:b,jsPlumbInstance:z});else if(e(a))if(e(a[0])||f(a[0]))if(2==a.length&&f(a[0])&&g(a[1])){var d=x.extend({elementId:b,jsPlumbInstance:z},a[1]);c=x.Anchors[a[0]](d)}else c=new Za(a,null,b);else{var h={x:a[0],y:a[1],orientation:a.length>=4?[a[2],a[3]]:[0,0],offsets:6==a.length?[a[4],a[5]]:[0,0],elementId:b};c=new Xa(h),c.clone=function(){return new Xa(h)}}return c.id||(c.id="anchor_"+U()),c},this.makeAnchors=function(a,b,c){for(var d=[],f=0;f<a.length;f++)"string"==typeof a[f]?d.push(x.Anchors[a[f]]({elementId:b,jsPlumbInstance:c})):e(a[f])&&d.push(z.makeAnchor(a[f],b,c));return d},this.makeDynamicAnchor=function(a,b){return new Za(a,b)};var Fa={},Ga={},Ha={},Ia={},Ja=function(a,b){a.paintStyle=a.paintStyle||z.Defaults.EndpointStyles[b]||z.Defaults.EndpointStyle||x.Defaults.EndpointStyles[b]||x.Defaults.EndpointStyle,a.hoverPaintStyle=a.hoverPaintStyle||z.Defaults.EndpointHoverStyles[b]||z.Defaults.EndpointHoverStyle||x.Defaults.EndpointHoverStyles[b]||x.Defaults.EndpointHoverStyle,a.anchor=a.anchor||z.Defaults.Anchors[b]||z.Defaults.Anchor||x.Defaults.Anchors[b]||x.Defaults.Anchor,a.endpoint=a.endpoint||z.Defaults.Endpoints[b]||z.Defaults.Endpoint||x.Defaults.Endpoints[b]||x.Defaults.Endpoint};this.makeTarget=function(a,b,c){var d=x.extend({_jsPlumb:z},c);x.extend(d,b),Ja(d,1);var e=x.CurrentLibrary,f=d.scope||z.Defaults.Scope,g=!(d.deleteEndpointsOnDetach===!1),h=d.maxConnections||-1,j=d.onMaxConnections;_doOne=function(a){var b=na(a);Fa[b]=d,Ha[b]=d.uniqueEndpoint,Ia[b]=h,Qa[b]=!0,proxyComponent=new r(d);var c=x.extend({},d.dropOptions||{}),k=function(){var c=x.CurrentLibrary.getDropEvent(arguments),f=z.select({target:b}).length;z.currentlyDragging=!1;var h=m(e.getDragObject(arguments)),k=i(h,"dragId"),l=i(h,"originalScope"),p=M[k],q=p.endpoints[0];d.endpoint?x.extend({},d.endpoint):{};if(!Qa[b]||Ia[b]>0&&f>=Ia[b])return j&&j({element:a,connection:p},c),!1;q.anchor.locked=!1,l&&e.setDragScope(h,l);var r=proxyComponent.isDropAllowed(p.sourceId,na(a),p.scope,p,null);if(p.endpointsToDeleteOnDetach&&(q===p.endpointsToDeleteOnDetach[0]?p.endpointsToDeleteOnDetach[0]=null:q===p.endpointsToDeleteOnDetach[1]&&(p.endpointsToDeleteOnDetach[1]=null)),p.suspendedEndpoint&&(p.targetId=p.suspendedEndpoint.elementId,p.target=e.getElementObject(p.suspendedEndpoint.elementId),p.endpoints[1]=p.suspendedEndpoint),r){q.detach(p,!1,!0,!1);var s=Ga[b]||z.addEndpoint(a,d);if(d.uniqueEndpoint&&(Ga[b]=s),s._makeTargetCreator=!0,null!=s.anchor.positionFinder){var t=e.getUIPosition(arguments,z.getZoom()),u=n(a,z),v=o(a),w=s.anchor.positionFinder(t,u,v,s.anchor.constructorParams);s.anchor.x=w[0],s.anchor.y=w[1]}var y=z.connect({source:q,target:s,scope:l,previousConnection:p,container:p.parent,deleteEndpointsOnDetach:g,doNotFireConnectionEvent:q.endpointWillMoveAfterConnection});p.endpoints[1]._makeTargetCreator&&p.endpoints[1].connections.length<2&&z.deleteEndpoint(p.endpoints[1]),g&&(y.endpointsToDeleteOnDetach=[q,s]),y.repaint()}else p.suspendedEndpoint&&(p.isReattach()?(p.setHover(!1),p.floatingAnchorIndex=null,p.suspendedEndpoint.addConnection(p),z.repaint(q.elementId)):q.detach(p,!1,!0,!0,c))},l=e.dragEvents.drop;c.scope=c.scope||f,c[l]=oa(c[l],k),e.initDroppable(a,c,!0)},a=V(a);for(var k=a.length&&a.constructor!=String?a:[a],l=0;l<k.length;l++)_doOne(m(k[l]));return z},this.unmakeTarget=function(a,b){a=x.CurrentLibrary.getElementObject(a);var c=na(a);return b||(delete Fa[c],delete Ha[c],delete Ia[c],delete Qa[c]),z},this.makeTargets=function(a,b,c){for(var d=0;d<a.length;d++)z.makeTarget(a[d],b,c)};var Ka={},La={},Ma={},Na={},Oa={},Pa={},Qa={};this.makeSource=function(a,b,d){var e=x.extend({},d);x.extend(e,b),Ja(e,0);var f=x.CurrentLibrary,g=e.maxConnections||-1,h=e.onMaxConnections,i=function(a){var d=na(a),i=e.parent,j=null!=i?z.getId(f.getElementObject(i)):d;Ka[j]=e,Ma[j]=e.uniqueEndpoint,Na[j]=!0;var k=f.dragEvents.stop,l=f.dragEvents.drag,m=x.extend({},e.dragOptions||{}),n=m.drag,o=m.stop,p=null,q=!1;Pa[j]=g,m.scope=m.scope||e.scope,m[l]=oa(m[l],function(){n&&n.apply(this,arguments),q=!1}),m[k]=oa(m[k],function(){if(o&&o.apply(this,arguments),z.currentlyDragging=!1,0==p.connections.length)z.deleteEndpoint(p);else{f.unbind(p.canvas,"mousedown");var a=e.anchor||z.Defaults.Anchor,b=(p.anchor,p.connections[0]);if(p.anchor=z.makeAnchor(a,d,z),e.parent){var g=f.getElementObject(e.parent);if(g){var h=p.elementId,i=e.container||z.Defaults.Container||x.Defaults.Container;p.setElement(g,i),p.endpointWillMoveAfterConnection=!1,z.anchorManager.rehomeEndpoint(h,g),b.previousConnection=null,c(H[b.scope],function(a){return a.id===b.id}),z.anchorManager.connectionDetached({sourceId:b.sourceId,targetId:b.targetId,connection:b}),aa(b)}}p.repaint(),z.repaint(p.elementId),z.repaint(b.targetId)}});var r=function(c){if(Na[j]){var i=z.select({source:j}).length;if(Pa[j]>=0&&i>=Pa[j])return h&&h({element:a,maxConnections:g},c),!1;if(b.filter){var k=b.filter(f.getOriginalEvent(c),a);if(k===!1)return}var l=la({elId:d}),n=((c.pageX||c.page.x)-l.left)/l.width,o=((c.pageY||c.page.y)-l.top)/l.height,r=n,s=o;if(e.parent){var t=f.getElementObject(e.parent),u=na(t);l=la({elId:u}),r=((c.pageX||c.page.x)-l.left)/l.width,s=((c.pageY||c.page.y)-l.top)/l.height}var v={};if(x.extend(v,e),v.isSource=!0,v.anchor=[n,o,0,0],v.parentAnchor=[r,s,0,0],v.dragOptions=m,e.parent){var w=v.container||z.Defaults.Container||x.Defaults.Container;w?v.container=w:v.container=x.CurrentLibrary.getParent(e.parent)}p=z.addEndpoint(d,v),q=!0,p.endpointWillMoveAfterConnection=null!=e.parent,p.endpointWillMoveTo=e.parent?f.getElementObject(e.parent):null;var y=function(){q&&z.deleteEndpoint(p)};z.registerListener(p.canvas,"mouseup",y),z.registerListener(a,"mouseup",y),f.trigger(p.canvas,"mousedown",c)}};z.registerListener(a,"mousedown",r),Oa[d]=r};a=V(a);for(var j=a.length&&a.constructor!=String?a:[a],k=0;k<j.length;k++)i(m(j[k]));return z},this.unmakeSource=function(a,b){a=x.CurrentLibrary.getElementObject(a);var c=na(a),d=Oa[c];return d&&z.unregisterListener(a,"mousedown",d),b||(delete Ka[c],delete Ma[c],delete Na[c],delete Oa[c],delete Pa[c]),z},this.unmakeEverySource=function(){for(var a in Na)z.unmakeSource(a,!0);Ka={},Ma={},Na={},Oa={}},this.unmakeEveryTarget=function(){for(var a in Qa)z.unmakeTarget(a,!0);return Fa={},Ha={},Ia={},Qa={},z},this.makeSources=function(a,b,c){for(var d=0;d<a.length;d++)z.makeSource(a[d],b,c);return z};var Ra=function(a,b,c,d){var e="source"==a?Na:Qa;if(f(b))e[b]=d?!e[b]:c;else if(b.length){b=V(b);for(var g=0;g<b.length;g++){var h=_el=x.CurrentLibrary.getElementObject(b[g]),h=na(_el);e[h]=d?!e[h]:c}}return z};this.setSourceEnabled=function(a,b){return Ra("source",a,b)},this.toggleSourceEnabled=function(a){return Ra("source",a,null,!0),z.isSourceEnabled(a)},this.isSource=function(a){return a=x.CurrentLibrary.getElementObject(a),null!=Na[na(a)]},this.isSourceEnabled=function(a){return a=x.CurrentLibrary.getElementObject(a),Na[na(a)]===!0},this.setTargetEnabled=function(a,b){return Ra("target",a,b)},this.toggleTargetEnabled=function(a){return Ra("target",a,null,!0)},this.isTarget=function(a){return a=x.CurrentLibrary.getElementObject(a),null!=Qa[na(a)]},this.isTargetEnabled=function(a){return a=x.CurrentLibrary.getElementObject(a),Qa[na(a)]===!0},this.ready=function(a){z.bind("ready",a)},this.repaint=function(a,b,c){if("object"==typeof a)for(var d=0;d<a.length;d++)W(m(a[d]),b,c);else W(m(a),b,c);return z},this.repaintEverything=function(){for(var a in I)W(m(a));return z},this.removeAllEndpoints=function(a){var b=i(a,"id"),c=I[b];if(c)for(var d=0;d<c.length;d++)z.deleteEndpoint(c[d]);return I[b]=[],z};var Sa={},Ta=function(){for(var a in Sa)for(var b=0;b<Sa[a].length;b++){var c=Sa[a][b];x.CurrentLibrary.unbind(c.el,c.event,c.listener)}Sa={}};this.registerListener=function(a,b,c){x.CurrentLibrary.bind(a,b,c),R(Sa,b,{el:a,event:b,listener:c})},this.unregisterListener=function(a,b,d){x.CurrentLibrary.unbind(a,b,d),c(Sa,function(a){return a.type==b&&a.listener==d})},this.reset=function(){z.deleteEveryEndpoint(),z.unbind(),Fa={},Ga={},Ha={},Ia={},Ka={},La={},Ma={},Pa={},Ta(),z.anchorManager.reset(),jsPlumbAdapter.headless||z.dragManager.reset()},this.setDefaultScope=function(a){return P=a,z},this.setDraggable=ha,this.setId=function(a,b,c){var d=a.constructor==String?a:z.getId(a),e=z.getConnections({source:d,scope:"*"},!0),f=z.getConnections({target:d,scope:"*"},!0);b=""+b,c||(a=x.CurrentLibrary.getElementObject(d),x.CurrentLibrary.setAttribute(a,"id",b)),a=x.CurrentLibrary.getElementObject(b),I[b]=I[d]||[];for(var g=0;g<I[b].length;g++)I[b][g].elementId=b,I[b][g].element=a,I[b][g].anchor.elementId=b;delete I[d],z.anchorManager.changeId(d,b);var h=function(c,d,e){for(var f=0;f<c.length;f++)c[f].endpoints[d].elementId=b,c[f].endpoints[d].element=a,c[f][e+"Id"]=b,c[f][e]=a};h(e,0,"source"),h(f,1,"target")},this.setIdChanged=function(a,b){z.setId(a,b,!0)},this.setDebugLog=function(a){F=a};var Ua=!1,Va=null;this.setSuspendDrawing=function(a,b){Ua=a,Va=a?(new Date).getTime():null,b&&z.repaintEverything()},this.isSuspendDrawing=function(){return Ua},this.CANVAS="canvas",this.SVG="svg",this.VML="vml",this.setRenderMode=function(a){return Q=jsPlumbAdapter.setRenderMode(a)},this.getRenderMode=function(){return Q},this.show=function(a,b){return ia(a,"block",b),z},this.sizeCanvas=function(a,b,c,d,e){return a&&(a.style.height=e+"px",a.height=e,a.style.width=d+"px",a.width=d,a.style.left=b+"px",a.style.top=c+"px"),z},this.getTestHarness=function(){return{endpointsByElement:I,endpointCount:function(a){var b=I[a];return b?b.length:0},connectionCount:function(a){a=a||P;var b=H[a];return b?b.length:0},getId:na,makeAnchor:self.makeAnchor,makeDynamicAnchor:self.makeDynamicAnchor}},this.toggle=ka,this.toggleVisible=ka,this.toggleDraggable=ja,this.wrap=oa,this.addListener=this.bind;var Wa=function(a,b){var c=null,d=a;if("svg"===b.tagName.toLowerCase()&&b.parentNode?c=b.parentNode:b.offsetParent&&(c=b.offsetParent),null!=c){var e="body"===c.tagName.toLowerCase()?{left:0,top:0}:n(c,z),f="body"===c.tagName.toLowerCase()?{left:0,top:0}:{left:c.scrollLeft,top:c.scrollTop};d[0]=a[0]-e.left+f.left,d[1]=a[1]-e.top+f.top}return d},Xa=function(a){var b=this;this.x=a.x||0,this.y=a.y||0,this.elementId=a.elementId;var c=a.orientation||[0,0],d=null;this.offsets=a.offsets||[0,0],b.timestamp=null,this.compute=function(a){var c=a.xy,e=a.wh,f=a.element,g=a.timestamp;return g&&g===b.timestamp?d:(d=[c[0]+b.x*e[0]+b.offsets[0],c[1]+b.y*e[1]+b.offsets[1]],d=Wa(d,f.canvas),b.timestamp=g,d)},this.getOrientation=function(a){return c},this.equals=function(a){if(!a)return!1;var b=a.getOrientation(),c=this.getOrientation();return this.x==a.x&&this.y==a.y&&this.offsets[0]==a.offsets[0]&&this.offsets[1]==a.offsets[1]&&c[0]==b[0]&&c[1]==b[1]},this.getCurrentLocation=function(){return d}},Ya=function(a){var b=a.reference,c=a.referenceCanvas,d=o(m(c)),e=0,f=0,g=null,h=null;this.x=0,this.y=0,this.isFloating=!0,this.compute=function(a){var b=a.xy,c=a.element,e=[b[0]+d[0]/2,b[1]+d[1]/2];return e=Wa(e,c.canvas),h=e,e},this.getOrientation=function(a){if(g)return g;var c=b.getOrientation(a);return[Math.abs(c[0])*e*-1,Math.abs(c[1])*f*-1]},this.over=function(a){g=a.getOrientation()},this.out=function(){g=null},this.getCurrentLocation=function(){return h}},Za=function(a,b,c){this.isSelective=!0,this.isDynamic=!0;for(var d=[],e=this,f=function(a){return a.constructor==Xa?a:z.makeAnchor(a,c,z)},g=0;g<a.length;g++)d[g]=f(a[g]);this.addAnchor=function(a){d.push(f(a))},this.getAnchors=function(){return d},this.locked=!1;var h=d.length>0?d[0]:null,e=(d.length>0?0:-1,this),i=function(a,b,c,d,e){var f=d[0]+a.x*e[0],g=d[1]+a.y*e[1],h=d[0]+e[0]/2,i=d[1]+e[1]/2;return Math.sqrt(Math.pow(b-f,2)+Math.pow(c-g,2))+Math.sqrt(Math.pow(h-f,2)+Math.pow(i-g,2))},j=b||function(a,b,c,d,e){for(var f=c[0]+d[0]/2,g=c[1]+d[1]/2,h=-1,j=1/0,k=0;k<e.length;k++){var l=i(e[k],f,g,a,b);l<j&&(h=k+0,j=l)}return e[h]};this.compute=function(a){var b=a.xy,c=a.wh,f=(a.timestamp,a.txy),g=a.twh;return e.locked||null==f||null==g?h.compute(a):(a.timestamp=null,h=j(b,c,f,g,d),e.x=h.x,e.y=h.y,h.compute(a))},this.getCurrentLocation=function(){return null!=h?h.getCurrentLocation():null},this.getOrientation=function(a){return null!=h?h.getOrientation(a):[0,0]},this.over=function(a){null!=h&&h.over(a)},this.out=function(){null!=h&&h.out()}},$a={},_a={},ab={},bb={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},cb=function(a,b,c,d){if(a===b)return{orientation:bb.IDENTITY,a:["top","top"]};var e=Math.atan2(d.centery-c.centery,d.centerx-c.centerx),f=Math.atan2(c.centery-d.centery,c.centerx-d.centerx),g=c.left<=d.left&&c.right>=d.left||c.left<=d.right&&c.right>=d.right||c.left<=d.left&&c.right>=d.right||d.left<=c.left&&d.right>=c.right,h=c.top<=d.top&&c.bottom>=d.top||c.top<=d.bottom&&c.bottom>=d.bottom||c.top<=d.top&&c.bottom>=d.bottom||d.top<=c.top&&d.bottom>=c.bottom;if(g||h)return g?{orientation:bb.HORIZONTAL,a:c.top<d.top?["bottom","top"]:["top","bottom"],theta:e,theta2:f}:{orientation:bb.VERTICAL,a:c.left<d.left?["right","left"]:["left","right"],theta:e,theta2:f};var i=null;return d.left>c.left&&d.top>c.top?i=["right","top"]:d.left>c.left&&c.top>d.top?i=["top","left"]:d.left<c.left&&d.top<c.top?i=["top","right"]:d.left<c.left&&d.top>c.top&&(i=["left","top"]),{orientation:bb.DIAGONAL,a:i,theta:e,theta2:f}},db=function(a,b,c,d,e,f,g){for(var h=[],i=b[e?0:1]/(d.length+1),j=0;j<d.length;j++){var k=(j+1)*i,l=f*b[e?1:0];g&&(k=b[e?0:1]-k);var m=e?k:l,n=c[0]+m,o=m/b[0],p=e?l:k,q=c[1]+p,r=p/b[1];h.push([n,q,o,r,d[j][1],d[j][2]])}return h},eb=function(a,b){return a[0]>b[0]?1:-1},fb=function(a){return function(b,c){var d=!0;return d=a?b[0][0]<c[0][0]||b[0][1]>c[0][1]:b[0][0]>c[0][0]||b[0][1]>c[0][1],d===!1?-1:1}},gb=function(a,b){var c=a[0][0]<0?-Math.PI-a[0][0]:Math.PI-a[0][0],d=b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0];return c>d?1:a[0][1]>b[0][1]?1:-1},hb={top:eb,right:fb(!0),bottom:fb(!0),left:gb},ib=function(a,b){return a.sort(b)},jb=function(a,b){var c=O[a],d=K[a],e=function(b,c,d,e,f,g,h){if(e.length>0)for(var i=ib(e,hb[b]),j="right"===b||"top"===b,k=db(b,c,d,i,f,g,j),l=function(a,b){var c=Wa([b[0],b[1]],a.canvas);_a[a.id]=[c[0],c[1],b[2],b[3]],ab[a.id]=h},m=0;m<k.length;m++){var n=k[m][4],o=n.endpoints[0].elementId===a,p=n.endpoints[1].elementId===a;o?l(n.endpoints[0],k[m]):p&&l(n.endpoints[1],k[m])}};e("bottom",c,[d.left,d.top],b.bottom,!0,1,[0,1]),e("top",c,[d.left,d.top],b.top,!0,0,[0,-1]),e("left",c,[d.left,d.top],b.left,!1,0,[-1,0]),e("right",c,[d.left,d.top],b.right,!1,1,[1,0])},kb=function(){var b={},e={},f=this,g={};this.reset=function(){b={},e={},g={}},this.newConnection=function(a){var b=a.sourceId,c=a.targetId,d=a.endpoints,f=!0,g=function(a,g,h,i,j){b==c&&h.isContinuous&&(x.CurrentLibrary.removeElement(d[1].canvas),f=!1),R(e,i,[j,g,h.constructor==Za])};g(0,d[0],d[0].anchor,c,a),f&&g(1,d[1],d[1].anchor,b,a)},this.connectionDetached=function(a){var b=a.connection||a,d=b.sourceId,h=b.targetId,i=b.endpoints,j=function(a,b,d,f,g){d.constructor==Ya||c(e[f],function(a){return a[0].id==g.id})};j(1,i[1],i[1].anchor,d,b),j(0,i[0],i[0].anchor,h,b);var k=b.sourceId,l=b.targetId,m=b.endpoints[0].id,n=b.endpoints[1].id,o=function(a,b){if(a){var d=function(a){return a[4]==b};c(a.top,d),c(a.left,d),c(a.bottom,d),c(a.right,d)}};o(g[k],m),o(g[l],n),f.redraw(k),f.redraw(l)},this.add=function(a,c){R(b,c,a)},this.changeId=function(a,c){e[c]=e[a],b[c]=b[a],delete e[a],delete b[a]},this.getConnectionsFor=function(a){return e[a]||[]},this.getEndpointsFor=function(a){return b[a]||[]},this.deleteEndpoint=function(a){c(b[a.elementId],function(b){return b.id==a.id})},this.clearFor=function(a){delete b[a],b[a]=[]};var h=function(b,c,e,f,g,h,i,j,k,l,m,n){var o=-1,p=-1,q=f.endpoints[i],r=q.id,s=([1,0][i],[[c,e],f,g,h,r]),t=b[k],u=q._continuousAnchorEdge?b[q._continuousAnchorEdge]:null;if(u){var v=a(u,function(a){return a[4]==r});if(v!=-1){u.splice(v,1);for(var w=0;w<u.length;w++)d(m,u[w][1],function(a){return a.id==u[w][1].id}),d(n,u[w][1].endpoints[i],function(a){return a.id==u[w][1].endpoints[i].id})}}for(var w=0;w<t.length;w++)1==i&&t[w][3]===h&&p==-1&&(p=w),d(m,t[w][1],function(a){return a.id==t[w][1].id}),d(n,t[w][1].endpoints[i],function(a){return a.id==t[w][1].endpoints[i].id});if(o!=-1)t[o]=s;else{var x=j?p!=-1?p:0:t.length;t.splice(x,0,s)}q._continuousAnchorEdge=k};this.redraw=function(a,c,f,i){if(!Ua){var j=b[a]||[],k=e[a]||[],l=[],m=[],n=[];f=f||q(),i=i||{left:0,top:0},c&&(c={left:c.left+i.left,top:c.top+i.top}),la({elId:a,offset:c,recalc:!1,timestamp:f});for(var o=K[a],p=O[a],r={},s=0;s<k.length;s++){var t=k[s][0],u=t.sourceId,v=t.targetId,w=t.endpoints[0].anchor.isContinuous,x=t.endpoints[1].anchor.isContinuous;if(w||x){var y=u+"_"+v,z=r[y],A=t.sourceId==a?1:0;w&&!g[u]&&(g[u]={top:[],right:[],bottom:[],left:[]}),x&&!g[v]&&(g[v]={top:[],right:[],bottom:[],left:[]}),a!=v&&la({elId:v,timestamp:f}),a!=u&&la({elId:u,timestamp:f});var B=ma(v),C=ma(u);v==u&&(w||x)?h(g[u],-Math.PI/2,0,t,!1,v,0,!1,"top",u,l,m):(z||(z=cb(u,v,C.o,B.o),r[y]=z),w&&h(g[u],z.theta,0,t,!1,v,0,!1,z.a[0],u,l,m),x&&h(g[v],z.theta2,-1,t,!0,u,1,!0,z.a[1],v,l,m)),w&&d(n,u,function(a){return a===u}),x&&d(n,v,function(a){return a===v}),d(l,t,function(a){return a.id==t.id}),(w&&0==A||x&&1==A)&&d(m,t.endpoints[A],function(a){return a.id==t.endpoints[A].id})}}for(var s=0;s<j.length;s++)0==j[s].connections.length&&j[s].anchor.isContinuous&&(g[a]||(g[a]={top:[],right:[],bottom:[],left:[]}),h(g[a],-Math.PI/2,0,{endpoints:[j[s],j[s]],paint:function(){}},!1,a,0,!1,"top",a,l,m),d(n,a,function(b){return b===a}));for(var s=0;s<n.length;s++)jb(n[s],g[n[s]]);for(var s=0;s<j.length;s++)j[s].paint({timestamp:f,offset:o,dimensions:p});for(var s=0;s<m.length;s++)m[s].paint({timestamp:f,offset:o,dimensions:p});for(var s=0;s<k.length;s++){var D=k[s][1];if(D.anchor.constructor==Za){D.paint({elementWithPrecedence:a}),d(l,k[s][0],function(a){return a.id==k[s][0].id});for(var E=0;E<D.connections.length;E++)D.connections[E]!==k[s][0]&&d(l,D.connections[E],function(a){return a.id==D.connections[E].id})}else D.anchor.constructor==Xa&&d(l,k[s][0],function(a){return a.id==k[s][0].id})}var F=M[a];F&&F.paint({timestamp:f,recalc:!1,elId:a});for(var s=0;s<l.length;s++)l[s].paint({elId:a,timestamp:f,recalc:!1})}},this.rehomeEndpoint=function(a,c){var d=b[a]||[],e=z.getId(c);if(e!==a){for(var g=0;g<d.length;g++)f.add(d[g],e);d.splice(0,d.length)}}};z.anchorManager=new kb,z.continuousAnchorFactory={get:function(a){var b=$a[a.elementId];return b||(b={type:"Continuous",compute:function(a){return _a[a.element.id]||[0,0]},getCurrentLocation:function(a){return _a[a.id]||[0,0]},getOrientation:function(a){return ab[a.id]||[0,0]},isDynamic:!0,isContinuous:!0},$a[a.elementId]=b),b}},jsPlumbAdapter.headless||(z.dragManager=jsPlumbAdapter.getDragManager(z)),z.recalculateOffsets=z.dragManager.updateOffsets;var lb=function(a){var b,c,d=this,g=!0;d.idPrefix="_jsplumb_c_",d.defaultLabelLocation=.5,d.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.parent=a.parent,s.apply(this,arguments),this.isVisible=function(){return g},this.setVisible=function(a){g=a,d[a?"showOverlays":"hideOverlays"](),d.connector&&d.connector.canvas&&(d.connector.canvas.style.display=a?"block":"none"),d.repaint()},this.getTypeDescriptor=function(){return"connection"},this.getDefaultType=function(){return{parameters:{},scope:null,detachable:d._jsPlumb.Defaults.ConnectionsDetachable,rettach:d._jsPlumb.Defaults.ReattachConnections,paintStyle:d._jsPlumb.Defaults.PaintStyle||x.Defaults.PaintStyle,connector:d._jsPlumb.Defaults.Connector||x.Defaults.Connector,hoverPaintStyle:d._jsPlumb.Defaults.HoverPaintStyle||x.Defaults.HoverPaintStyle,overlays:d._jsPlumb.Defaults.ConnectorOverlays||x.Defaults.ConnectorOverlays}};var j=this.applyType;this.applyType=function(a){j(a),null!=a.detachable&&d.setDetachable(a.detachable),null!=a.reattach&&d.setReattach(a.reattach),a.scope&&(d.scope=a.scope),d.setConnector(a.connector)},c=d.setHover,d.setHover=function(a){var b=z.ConnectorZIndex||x.Defaults.ConnectorZIndex;b&&d.connector.setZIndex(b+(a?1:0)),d.connector.setHover.apply(d.connector,arguments),c.apply(d,arguments)},b=function(a){null==h&&d.setHover(a,!1)},this.setConnector=function(c,g){null!=d.connector&&ga(d.connector.getDisplayElements(),d.parent);var h={_jsPlumb:d._jsPlumb,parent:a.parent,cssClass:a.cssClass,container:a.container,tooltip:d.tooltip};f(c)?this.connector=new x.Connectors[Q][c](h):e(c)&&(1==c.length?this.connector=new x.Connectors[Q][c[0]](h):this.connector=new x.Connectors[Q][c[0]](x.extend(c[1],h))),d.canvas=d.connector.canvas,t(d.connector,d,b);var i=z.ConnectorZIndex||x.Defaults.ConnectorZIndex;i&&d.connector.setZIndex(i),g||d.repaint()},this.source=m(a.source),this.target=m(a.target),a.sourceEndpoint&&(this.source=a.sourceEndpoint.endpointWillMoveTo||a.sourceEndpoint.getElement()),a.targetEndpoint&&(this.target=a.targetEndpoint.getElement()),d.previousConnection=a.previousConnection,this.sourceId=i(this.source,"id"),this.targetId=i(this.target,"id"),this.scope=a.scope,this.endpoints=[],this.endpointStyles=[];var k=function(a,b){return a?z.makeAnchor(a,b,z):null},l=function(a,b,c,e,f,g,h){var i;if(a)d.endpoints[b]=a,a.addConnection(d);else{c.endpoints||(c.endpoints=[null,null]);var j=c.endpoints[b]||c.endpoint||z.Defaults.Endpoints[b]||x.Defaults.Endpoints[b]||z.Defaults.Endpoint||x.Defaults.Endpoint;c.endpointStyles||(c.endpointStyles=[null,null]),c.endpointHoverStyles||(c.endpointHoverStyles=[null,null]);var l=c.endpointStyles[b]||c.endpointStyle||z.Defaults.EndpointStyles[b]||x.Defaults.EndpointStyles[b]||z.Defaults.EndpointStyle||x.Defaults.EndpointStyle;null==l.fillStyle&&null!=g&&(l.fillStyle=g.strokeStyle),null==l.outlineColor&&null!=g&&(l.outlineColor=g.outlineColor),null==l.outlineWidth&&null!=g&&(l.outlineWidth=g.outlineWidth);var m=c.endpointHoverStyles[b]||c.endpointHoverStyle||z.Defaults.EndpointHoverStyles[b]||x.Defaults.EndpointHoverStyles[b]||z.Defaults.EndpointHoverStyle||x.Defaults.EndpointHoverStyle;null!=h&&(null==m&&(m={}),null==m.fillStyle&&(m.fillStyle=h.strokeStyle));var n=c.anchors?c.anchors[b]:c.anchor?c.anchor:k(z.Defaults.Anchors[b],f)||k(x.Defaults.Anchors[b],f)||k(z.Defaults.Anchor,f)||k(x.Defaults.Anchor,f),o=c.uuids?c.uuids[b]:null;i=da({paintStyle:l,hoverPaintStyle:m,endpoint:j,connections:[d],uuid:o,anchor:n,source:e,scope:c.scope,container:c.container,reattach:c.reattach||z.Defaults.ReattachConnections,detachable:c.detachable||z.Defaults.ConnectionsDetachable}),d.endpoints[b]=i,c.drawEndpoints===!1&&i.setVisible(!1,!0,!0)}return i},n=l(a.sourceEndpoint,0,a,d.source,d.sourceId,a.paintStyle,a.hoverPaintStyle);n&&R(I,this.sourceId,n);var o=l(a.targetEndpoint,1,a,d.target,d.targetId,a.paintStyle,a.hoverPaintStyle);o&&R(I,this.targetId,o),this.scope||(this.scope=this.endpoints[0].scope),d.endpointsToDeleteOnDetach=[null,null],a.deleteEndpointsOnDetach&&(a.sourceIsNew&&(d.endpointsToDeleteOnDetach[0]=d.endpoints[0]),a.targetIsNew&&(d.endpointsToDeleteOnDetach[1]=d.endpoints[1])),d.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||a.connector||z.Defaults.Connector||x.Defaults.Connector,!0),this.setPaintStyle(this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||a.paintStyle||z.Defaults.PaintStyle||x.Defaults.PaintStyle,!0),this.setHoverPaintStyle(this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||a.hoverPaintStyle||z.Defaults.HoverPaintStyle||x.Defaults.HoverPaintStyle,!0),this.paintStyleInUse=this.getPaintStyle(),la({elId:this.sourceId,timestamp:Va}),la({elId:this.targetId,timestamp:Va});var p=K[this.sourceId],r=O[this.sourceId],u=K[this.targetId],v=O[this.targetId],w=Va||q(),y=this.endpoints[0].anchor.compute({xy:[p.left,p.top],wh:r,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[u.left,u.top],twh:v,tElement:this.endpoints[1],timestamp:w});this.endpoints[0].paint({anchorLoc:y,timestamp:w}),y=this.endpoints[1].anchor.compute({xy:[u.left,u.top],wh:v,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[p.left,p.top],twh:r,tElement:this.endpoints[0],timestamp:w}),this.endpoints[1].paint({anchorLoc:y,timestamp:w});var A=z.Defaults.ConnectionsDetachable;a.detachable===!1&&(A=!1),d.endpoints[0].connectionsDetachable===!1&&(A=!1),d.endpoints[1].connectionsDetachable===!1&&(A=!1),this.isDetachable=function(){return A===!0},this.setDetachable=function(a){A=a===!0};var B=a.reattach||d.endpoints[0].reattachConnections||d.endpoints[1].reattachConnections||z.Defaults.ReattachConnections;this.isReattach=function(){return B===!0},this.setReattach=function(a){B=a===!0};var C=a.cost||d.endpoints[0].getConnectionCost();d.getCost=function(){return C},d.setCost=function(a){C=a};var D=!(a.bidirectional===!1);null==a.bidirectional&&(D=d.endpoints[0].areConnectionsBidirectional()),d.isBidirectional=function(){return D};var E=x.extend({},this.endpoints[0].getParameters());x.extend(E,this.endpoints[1].getParameters()),x.extend(E,d.getParameters()),d.setParameters(E),this.getAttachedElements=function(){return d.endpoints},this.moveParent=function(a){var b=x.CurrentLibrary,c=b.getParent(d.connector.canvas);d.connector.bgCanvas&&(b.removeElement(d.connector.bgCanvas,c),b.appendElement(d.connector.bgCanvas,a)),b.removeElement(d.connector.canvas,c),b.appendElement(d.connector.canvas,a);for(var e=0;e<d.overlays.length;e++)d.overlays[e].isAppendedAtTopLevel&&(b.removeElement(d.overlays[e].canvas,c),b.appendElement(d.overlays[e].canvas,a),d.overlays[e].reattachListeners&&d.overlays[e].reattachListeners(d.connector));d.connector.reattachListeners&&d.connector.reattachListeners()};var F=null;this.paint=function(a){if(g){a=a||{};var b=a.elId,c=a.ui,e=a.recalc,f=a.timestamp,h=!1,i=h?this.sourceId:this.targetId,j=(h?this.targetId:this.sourceId,h?0:1),k=h?1:0;if(null==f||f!=F){for(var l=la({elId:b,offset:c,recalc:e,timestamp:f}),m=la({elId:i,timestamp:f}),n=this.endpoints[k],o=this.endpoints[j],p=n.anchor.getCurrentLocation(n),q=o.anchor.getCurrentLocation(o),r=0,s=0;s<d.overlays.length;s++){var t=d.overlays[s];t.isVisible()&&(r=Math.max(r,t.computeMaxSize()))}var u=this.connector.compute(p,q,this.endpoints[k],this.endpoints[j],this.endpoints[k].anchor,this.endpoints[j].anchor,d.paintStyleInUse.lineWidth,r,l,m);d.connector.paint(u,d.paintStyleInUse);for(var s=0;s<d.overlays.length;s++){var t=d.overlays[s];t.isVisible&&(d.overlayPlacements[s]=t.draw(d.connector,d.paintStyleInUse,u))}}F=f}},this.repaint=function(a){a=a||{};var b=!(a.recalc===!1);this.paint({elId:this.sourceId,recalc:b,timestamp:a.timestamp})};var G=a.type||d.endpoints[0].connectionType||d.endpoints[1].connectionType;G&&d.addType(G)},mb=function(a){var b=!1;return{drag:function(){if(b)return b=!1,!0;var c=x.CurrentLibrary.getUIPosition(arguments,z.getZoom()),d=a.element;d&&(x.CurrentLibrary.setOffset(d,c),W(m(d),c))},stopDrag:function(){b=!0}}},nb=function(a,b,c,d,e){var f=new Ya({reference:b,referenceCanvas:d});return da({paintStyle:a,endpoint:c,anchor:f,source:e,scope:"__floating"})},ob=function(a,b){var c=document.createElement("div");c.style.position="absolute";var d=m(c);S(c,b);var e=na(d);la({elId:e}),a.id=e,a.element=d},pb=function(b){var d=this;d.idPrefix="_jsplumb_e_",d.defaultLabelLocation=[.5,.5],d.defaultOverlayKeys=["Overlays","EndpointOverlays"],this.parent=b.parent,s.apply(this,arguments),b=b||{},this.getTypeDescriptor=function(){return"endpoint"},this.getDefaultType=function(){return{parameters:{},scope:null,maxConnections:d._jsPlumb.Defaults.MaxConnections,paintStyle:d._jsPlumb.Defaults.EndpointStyle||x.Defaults.EndpointStyle,endpoint:d._jsPlumb.Defaults.Endpoint||x.Defaults.Endpoint,hoverPaintStyle:d._jsPlumb.Defaults.EndpointHoverStyle||x.Defaults.EndpointHoverStyle,overlays:d._jsPlumb.Defaults.EndpointOverlays||x.Defaults.EndpointOverlays,connectorStyle:b.connectorStyle,connectorHoverStyle:b.connectorHoverStyle,connectorClass:b.connectorClass,connectorHoverClass:b.connectorHoverClass,connectorOverlays:b.connectorOverlays,connector:b.connector,connectorTooltip:b.connectorTooltip}};var g=this.applyType;this.applyType=function(a){g(a),null!=a.maxConnections&&(D=a.maxConnections),a.scope&&(d.scope=a.scope),d.connectorStyle=a.connectorStyle,d.connectorHoverStyle=a.connectorHoverStyle,d.connectorOverlays=a.connectorOverlays,d.connector=a.connector,d.connectorTooltip=a.connectorTooltip,d.connectionType=a.connectionType,d.connectorClass=a.connectorClass,d.connectorHoverClass=a.connectorHoverClass};var h=!0,k=!(b.enabled===!1);this.isVisible=function(){return h},this.setVisible=function(a,b,c){if(h=a,d.canvas&&(d.canvas.style.display=a?"block":"none"),d[a?"showOverlays":"hideOverlays"](),!b)for(var e=0;e<d.connections.length;e++)if(d.connections[e].setVisible(a),!c){var f=d===d.connections[e].endpoints[0]?1:0;1==d.connections[e].endpoints[f].connections.length&&d.connections[e].endpoints[f].setVisible(a,!0,!0)}},this.isEnabled=function(){return k},this.setEnabled=function(a){k=a};var l=b.source,o=b.uuid,p=null,q=null;o&&(J[o]=d);var r=i(l,"id");this.elementId=r,this.element=l;var u=b.connectionCost;this.getConnectionCost=function(){return u},this.setConnectionCost=function(a){u=a};var v=b.connectionsBidirectional!==!1;this.areConnectionsBidirectional=function(){return v},this.setConnectionsBidirectional=function(a){v=a},d.anchor=b.anchor?z.makeAnchor(b.anchor,r,z):b.anchors?z.makeAnchor(b.anchors,r,z):z.makeAnchor(z.Defaults.Anchor||"TopCenter",r,z),b._transient||z.anchorManager.add(d,r);
var w=null,y=null;this.setEndpoint=function(a){var c={_jsPlumb:d._jsPlumb,parent:b.parent,container:b.container,tooltip:b.tooltip,connectorTooltip:b.connectorTooltip,endpoint:d};f(a)?w=new x.Endpoints[Q][a](c):e(a)?(c=x.extend(a[1],c),w=new x.Endpoints[Q][a[0]](c)):w=a.clone();var g=x.extend({},c);w.clone=function(){var a=new Object;return w.constructor.apply(a,[g]),a},d.endpoint=w,d.type=d.endpoint.type},this.setEndpoint(b.endpoint||z.Defaults.Endpoint||x.Defaults.Endpoint||"Dot"),y=w;var A=d.setHover;d.setHover=function(){d.endpoint.setHover.apply(d.endpoint,arguments),A.apply(d,arguments)};var B=function(a){d.connections.length>0?d.connections[0].setHover(a,!1):d.setHover(a)};t(d.endpoint,d,B),this.setPaintStyle(b.paintStyle||b.style||z.Defaults.EndpointStyle||x.Defaults.EndpointStyle,!0),this.setHoverPaintStyle(b.hoverPaintStyle||z.Defaults.EndpointHoverStyle||x.Defaults.EndpointHoverStyle,!0),this.paintStyleInUse=this.getPaintStyle();var C=this.getPaintStyle();this.connectorStyle=b.connectorStyle,this.connectorHoverStyle=b.connectorHoverStyle,this.connectorOverlays=b.connectorOverlays,this.connector=b.connector,this.connectorTooltip=b.connectorTooltip,this.connectorClass=b.connectorClass,this.connectorHoverClass=b.connectorHoverClass,this.isSource=b.isSource||!1,this.isTarget=b.isTarget||!1;var D=b.maxConnections||z.Defaults.MaxConnections;this.getAttachedElements=function(){return d.connections},this.canvas=this.endpoint.canvas,this.connections=b.connections||[],this.scope=b.scope||P,this.connectionType=b.connectionType,this.timestamp=null,d.reattachConnections=b.reattach||z.Defaults.ReattachConnections,d.connectionsDetachable=z.Defaults.ConnectionsDetachable,b.connectionsDetachable!==!1&&b.detachable!==!1||(d.connectionsDetachable=!1);var E=b.dragAllowedWhenFull||!0;b.onMaxConnections&&d.bind("maxConnections",b.onMaxConnections),this.computeAnchor=function(a){return d.anchor.compute(a)},this.addConnection=function(a){d.connections.push(a)},this.detach=function(b,e,f,g,h){var i=a(d.connections,function(a){return a.id==b.id}),j=!1;if(g=g!==!1,i>=0&&(f||b._forceDetach||b.isDetachable()||b.isDetachAllowed(b))){var k=b.endpoints[0]==d?b.endpoints[1]:b.endpoints[0];if(f||b._forceDetach||d.isDetachAllowed(b)){if(d.connections.splice(i,1),!e&&(k.detach(b,!0,f),b.endpointsToDeleteOnDetach))for(var l=0;l<b.endpointsToDeleteOnDetach.length;l++){var m=b.endpointsToDeleteOnDetach[l];m&&0==m.connections.length&&z.deleteEndpoint(m)}ga(b.connector.getDisplayElements(),b.parent),c(H[b.scope],function(a){return a.id==b.id}),j=!0;var n=!e&&g;pa(b,n,h)}}return j},this.detachAll=function(a,b){for(;d.connections.length>0;)d.detach(d.connections[0],!1,!0,a,b)},this.detachFrom=function(a,b,c){for(var e=[],f=0;f<d.connections.length;f++)d.connections[f].endpoints[1]!=a&&d.connections[f].endpoints[0]!=a||e.push(d.connections[f]);for(var f=0;f<e.length;f++)d.detach(e[f],!1,!0,b,c)&&e[f].setHover(!1,!1)},this.detachFromConnection=function(b){var c=a(d.connections,function(a){return a.id==b.id});c>=0&&d.connections.splice(c,1)},this.getElement=function(){return l},this.setElement=function(a,b){var e=na(a);c(I[d.elementId],function(a){return a.id==d.id}),l=m(a),r=na(l),d.elementId=r;var f=ca({source:e,container:b}),g=V.getParent(d.canvas);V.removeElement(d.canvas,g),V.appendElement(d.canvas,f);for(var h=0;h<d.connections.length;h++)d.connections[h].moveParent(f),d.connections[h].sourceId=r,d.connections[h].source=l;R(I,e,d)},this.getUuid=function(){return o},this.makeInPlaceCopy=function(){var a=d.anchor.getCurrentLocation(d),b=d.anchor.getOrientation(d),c={compute:function(){return[a[0],a[1]]},getCurrentLocation:function(){return[a[0],a[1]]},getOrientation:function(){return b}};return da({anchor:c,source:l,paintStyle:this.getPaintStyle(),endpoint:w,_transient:!0,scope:d.scope})},this.isConnectedTo=function(a){var b=!1;if(a)for(var c=0;c<d.connections.length;c++)if(d.connections[c].endpoints[1]==a){b=!0;break}return b},this.isFloating=function(){return null!=p},this.connectorSelector=function(){var a=d.connections[0];return d.isTarget&&a?a:d.connections.length<D||D==-1?null:a},this.isFull=function(){return!(d.isFloating()||D<1||d.connections.length<D)},this.setDragAllowedWhenFull=function(a){E=a},this.setStyle=d.setPaintStyle,this.equals=function(a){return this.anchor.equals(a.anchor)};var F=function(a){var b=0;if(null!=a)for(var c=0;c<d.connections.length;c++)if(d.connections[c].sourceId==a||d.connections[c].targetId==a){b=c;break}return d.connections[b]};if(this.paint=function(a){a=a||{};var b=a.timestamp,c=!(a.recalc===!1);if(!b||d.timestamp!==b){la({elId:r,timestamp:b,recalc:c});var e=a.offset||K[r];if(e){var f=a.anchorPoint,g=a.connectorPaintStyle;if(null==f){var h=a.dimensions||O[r];null!=e&&null!=h||(la({elId:r,timestamp:b}),e=K[r],h=O[r]);var i={xy:[e.left,e.top],wh:h,element:d,timestamp:b};if(c&&d.anchor.isDynamic&&d.connections.length>0){var j=F(a.elementWithPrecedence),k=j.endpoints[0]==d?1:0,l=0==k?j.sourceId:j.targetId,m=K[l],n=O[l];i.txy=[m.left,m.top],i.twh=n,i.tElement=j.endpoints[k]}f=d.anchor.compute(i)}var o=w.compute(f,d.anchor.getOrientation(d),d.paintStyleInUse,g||d.paintStyleInUse);w.paint(o,d.paintStyleInUse,d.anchor),d.timestamp=b;for(var p=0;p<d.overlays.length;p++){var q=d.overlays[p];q.isVisible&&(d.overlayPlacements[p]=q.draw(d.endpoint,d.paintStyleInUse,o))}}}},this.repaint=this.paint,this.removeConnection=this.detach,x.CurrentLibrary.isDragSupported(l)){var G={id:null,element:null},L=null,N=!1,S=null,T=mb(G),U=function(){L=d.connectorSelector();var a=!0;if(d.isEnabled()||(a=!1),null!=L||b.isSource||(a=!1),b.isSource&&d.isFull()&&!E&&(a=!1),null==L||L.isDetachable()||(a=!1),a===!1)return x.CurrentLibrary.stopDrag&&x.CurrentLibrary.stopDrag(),T.stopDrag(),!1;L&&!d.isFull()&&b.isSource&&(L=null),la({elId:r}),q=d.makeInPlaceCopy(),q.referenceEndpoint=d,q.paint(),ob(G,d.parent);var c=m(q.canvas),e=n(c,z),f=Wa([e.left,e.top],q.canvas);if(x.CurrentLibrary.setOffset(G.element,{left:f[0],top:f[1]}),d.parentAnchor&&(d.anchor=z.makeAnchor(d.parentAnchor,d.elementId,z)),j(m(d.canvas),"dragId",G.id),j(m(d.canvas),"elId",r),b.proxy&&d.setPaintStyle(b.proxy.paintStyle),p=nb(d.getPaintStyle(),d.anchor,w,d.canvas,G.element),null==L)d.anchor.locked=!0,d.setHover(!1,!1),L=_({sourceEndpoint:d,targetEndpoint:p,source:d.endpointWillMoveTo||m(l),target:G.element,anchors:[d.anchor,p.anchor],paintStyle:b.connectorStyle,hoverPaintStyle:b.connectorHoverStyle,connector:b.connector,overlays:b.connectorOverlays,type:d.connectionType,cssClass:d.connectorClass,hoverClass:d.connectorHoverClass});else{N=!0,L.setHover(!1),ea(m(q.canvas),!1,!0);var g=L.endpoints[0].id==d.id?0:1;L.floatingAnchorIndex=g,d.detachFromConnection(L);var h=m(d.canvas),i=x.CurrentLibrary.getDragScope(h);j(h,"originalScope",i);var k=x.CurrentLibrary.getDropScope(h);x.CurrentLibrary.setDragScope(h,k),0==g?(S=[L.source,L.sourceId,ba,i],L.source=G.element,L.sourceId=G.id):(S=[L.target,L.targetId,ba,i],L.target=G.element,L.targetId=G.id),L.endpoints[0==g?1:0].anchor.locked=!0,L.suspendedEndpoint=L.endpoints[g],L.suspendedEndpoint.setHover(!1),p.referenceEndpoint=L.suspendedEndpoint,L.endpoints[g]=p,qa(L)}M[G.id]=L,p.addConnection(L),R(I,G.id,p),z.currentlyDragging=!0},V=x.CurrentLibrary,W=b.dragOptions||{},X=x.extend({},V.defaultDragOptions),Y=V.dragEvents.start,Z=V.dragEvents.stop,$=V.dragEvents.drag;W=x.extend(X,W),W.scope=W.scope||d.scope,W[Y]=oa(W[Y],U),W[$]=oa(W[$],T.drag),W[Z]=oa(W[Z],function(){var a=V.getDropEvent(arguments);z.currentlyDragging=!1,c(I[G.id],function(a){return a.id==p.id}),ga([G.element[0],p.canvas],l),fa(q.canvas,l),z.anchorManager.clearFor(G.id);var b=null==L.floatingAnchorIndex?1:L.floatingAnchorIndex;L.endpoints[0==b?1:0].anchor.locked=!1,d.setPaintStyle(C),L.endpoints[b]==p&&(N&&L.suspendedEndpoint?(0==b?(L.source=S[0],L.sourceId=S[1]):(L.target=S[0],L.targetId=S[1]),x.CurrentLibrary.setDragScope(S[2],S[3]),L.endpoints[b]=L.suspendedEndpoint,(L.isReattach()||L._forceReattach||L._forceDetach||!L.endpoints[0==b?1:0].detach(L,!1,!1,!0,a))&&(L.setHover(!1),L.floatingAnchorIndex=null,L.suspendedEndpoint.addConnection(L),z.repaint(S[1])),L._forceDetach=null,L._forceReattach=null):(ga(L.connector.getDisplayElements(),d.parent),d.detachFromConnection(L))),d.anchor.locked=!1,d.paint({recalc:!1}),ra(L),L=null,q=null,delete I[p.elementId],p.anchor=null,p=null,z.currentlyDragging=!1});var ba=m(d.canvas);x.CurrentLibrary.initDraggable(ba,W,!0)}var ea=function(a,c,e,f){if((b.isTarget||c)&&x.CurrentLibrary.isDropSupported(l)){var g=b.dropOptions||z.Defaults.DropOptions||x.Defaults.DropOptions;g=x.extend({},g),g.scope=g.scope||d.scope;var h=x.CurrentLibrary.dragEvents.drop,j=x.CurrentLibrary.dragEvents.over,k=x.CurrentLibrary.dragEvents.out,n=function(){var a=x.CurrentLibrary.getDropEvent(arguments),b=m(x.CurrentLibrary.getDragObject(arguments)),c=i(b,"dragId"),e=(i(b,"elId"),i(b,"originalScope")),g=M[c],h=g.suspendedEndpoint&&(g.suspendedEndpoint.id==d.id||d.referenceEndpoint&&g.suspendedEndpoint.id==d.referenceEndpoint.id);if(h)return void(g._forceReattach=!0);if(null!=g){var j=null==g.floatingAnchorIndex?1:g.floatingAnchorIndex;e&&x.CurrentLibrary.setDragScope(b,e);var k=null==f||f.isEnabled();if(d.isFull()&&d.fire("maxConnections",{endpoint:d,connection:g,maxConnections:D},a),!d.isFull()&&(0!=j||d.isSource)&&(1!=j||d.isTarget)&&k){var l=!0;g.suspendedEndpoint&&g.suspendedEndpoint.id!=d.id&&(0==j?(g.source=g.suspendedEndpoint.element,g.sourceId=g.suspendedEndpoint.elementId):(g.target=g.suspendedEndpoint.element,g.targetId=g.suspendedEndpoint.elementId),g.isDetachAllowed(g)&&g.endpoints[j].isDetachAllowed(g)&&g.suspendedEndpoint.isDetachAllowed(g)&&z.checkCondition("beforeDetach",g)||(l=!1)),0==j?(g.source=d.element,g.sourceId=d.elementId):(g.target=d.element,g.targetId=d.elementId);var n=function(){g.floatingAnchorIndex=null},o=function(){g.endpoints[j].detachFromConnection(g),g.suspendedEndpoint&&g.suspendedEndpoint.detachFromConnection(g),g.endpoints[j]=d,d.addConnection(g);var b=d.getParameters();for(var c in b)g.setParameter(c,b[c]);if(g.suspendedEndpoint){var e=g.suspendedEndpoint.getElement(),f=g.suspendedEndpoint.elementId;pa({source:0==j?e:g.source,target:1==j?e:g.target,sourceId:0==j?f:g.sourceId,targetId:1==j?f:g.targetId,sourceEndpoint:0==j?g.suspendedEndpoint:g.endpoints[0],targetEndpoint:1==j?g.suspendedEndpoint:g.endpoints[1],connection:g},!0,a)}else b.draggable&&x.CurrentLibrary.initDraggable(d.element,W,!0);aa(g,null,a),n()},p=function(){g.suspendedEndpoint&&(g.endpoints[j]=g.suspendedEndpoint,g.setHover(!1),g._forceDetach=!0,0==j?(g.source=g.suspendedEndpoint.element,g.sourceId=g.suspendedEndpoint.elementId):(g.target=g.suspendedEndpoint.element,g.targetId=g.suspendedEndpoint.elementId),g.suspendedEndpoint.addConnection(g),g.endpoints[0].repaint(),g.repaint(),z.repaint(g.source.elementId),g._forceDetach=!1),n()};l=l&&d.isDropAllowed(g.sourceId,g.targetId,g.scope,g,d),l?o():p()}z.currentlyDragging=!1,delete M[c],g.suspendedEndpoint=null}};g[h]=oa(g[h],n),g[j]=oa(g[j],function(){var a=x.CurrentLibrary.getDragObject(arguments),b=i(m(a),"dragId"),c=M[b];if(null!=c){var e=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex,f=d.isTarget&&0!=c.floatingAnchorIndex||c.suspendedEndpoint&&d.referenceEndpoint&&d.referenceEndpoint.id==c.suspendedEndpoint.id;f&&c.endpoints[e].anchor.over(d.anchor)}}),g[k]=oa(g[k],function(){var a=x.CurrentLibrary.getDragObject(arguments),b=i(m(a),"dragId"),c=M[b];if(null!=c){var e=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex,f=d.isTarget&&0!=c.floatingAnchorIndex||c.suspendedEndpoint&&d.referenceEndpoint&&d.referenceEndpoint.id==c.suspendedEndpoint.id;f&&c.endpoints[e].anchor.out()}}),x.CurrentLibrary.initDroppable(a,g,!0,e)}};return ea(m(d.canvas),!0,!(b._transient||d.anchor.isFloating),d),b.type&&d.addType(b.type),d}},x=new w;"undefined"!=typeof window&&(window.jsPlumb=x),x.getInstance=function(a){var b=new w(a);return b.init(),b},"function"==typeof define&&define.amd&&define.amd.jsPlumb&&define("jsplumb",[],function(){return x});var y=function(a,b,c,d,e,f){return function(g){g=g||{};var h=g.jsPlumbInstance.makeAnchor([a,b,c,d,0,0],g.elementId,g.jsPlumbInstance);return h.type=e,f&&f(h,g),h}};x.Anchors.TopCenter=y(.5,0,0,-1,"TopCenter"),x.Anchors.BottomCenter=y(.5,1,0,1,"BottomCenter"),x.Anchors.LeftMiddle=y(0,.5,-1,0,"LeftMiddle"),x.Anchors.RightMiddle=y(1,.5,1,0,"RightMiddle"),x.Anchors.Center=y(.5,.5,0,0,"Center"),x.Anchors.TopRight=y(1,0,0,-1,"TopRight"),x.Anchors.BottomRight=y(1,1,0,1,"BottomRight"),x.Anchors.TopLeft=y(0,0,0,-1,"TopLeft"),x.Anchors.BottomLeft=y(0,1,0,1,"BottomLeft"),x.Defaults.DynamicAnchors=function(a){return a.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],a.elementId,a.jsPlumbInstance)},x.Anchors.AutoDefault=function(a){var b=a.jsPlumbInstance.makeDynamicAnchor(x.Defaults.DynamicAnchors(a));return b.type="AutoDefault",b},x.Anchors.Assign=y(0,0,0,0,"Assign",function(a,b){var c=b.position||"Fixed";a.positionFinder=c.constructor==String?b.jsPlumbInstance.AnchorPositionFinders[c]:c,a.constructorParams=b}),x.Anchors.Continuous=function(a){return a.jsPlumbInstance.continuousAnchorFactory.get(a)},x.AnchorPositionFinders={Fixed:function(a,b,c,d){return[(a.left-b.left)/c[0],(a.top-b.top)/c[1]]},Grid:function(a,b,c,d){var e=a.left-b.left,f=a.top-b.top,g=c[0]/d.grid[0],h=c[1]/d.grid[1],i=Math.floor(e/g),j=Math.floor(f/h);return[(i*g+g/2)/c[0],(j*h+h/2)/c[1]]}},x.Anchors.Perimeter=function(a){a=a||{};var b=a.anchorCount||60,c=a.shape;if(!c)throw new Error("no shape supplied to Perimeter Anchor type");var d=function(){for(var a=.5,c=2*Math.PI/b,d=0,e=[],f=0;f<b;f++){var g=a+a*Math.sin(d),h=a+a*Math.cos(d);e.push([g,h,0,0]),d+=c}return e},e=function(a){for(var c=b/a.length,d=[],e=function(a,e,f,g,h){c=b*h;for(var i=(f-a)/c,j=(g-e)/c,k=0;k<c;k++)d.push([a+i*k,e+j*k,0,0])},f=0;f<a.length;f++)e.apply(null,a[f]);return d},f=function(a){for(var b=[],c=0;c<a.length;c++)b.push([a[c][0],a[c][1],a[c][2],a[c][3],1/a.length]);return e(b)},g=function(){return f([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},h={circle:d,ellipse:d,diamond:function(){return f([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},rectangle:g,square:g,triangle:function(){return f([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},path:function(a){for(var b=a.points,c=[],d=0,f=0;f<b.length-1;f++){var g=Math.sqrt(Math.pow(b[f][2]-b[f][0])+Math.pow(b[f][3]-b[f][1]));d+=g,c.push([b[f][0],b[f][1],b[f+1][0],b[f+1][1],g])}for(var f=0;f<c.length;f++)c[f][4]=c[f][4]/d;return e(c)}},i=function(a,b){for(var c=[],d=b/180*Math.PI,e=0;e<a.length;e++){var f=a[e][0]-.5,g=a[e][1]-.5;c.push([.5+(f*Math.cos(d)-g*Math.sin(d)),.5+(f*Math.sin(d)+g*Math.cos(d)),a[e][2],a[e][3]])}return c};if(!h[c])throw new Error("Shape ["+c+"] is unknown by Perimeter Anchor type");var j=h[c](a);a.rotation&&(j=i(j,a.rotation));var k=a.jsPlumbInstance.makeDynamicAnchor(j);return k.type="Perimeter",k}}(),function(){jsPlumb.DOMElementComponent=function(a){jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.mousemove=this.dblclick=this.click=this.mousedown=this.mouseup=function(a){}},jsPlumb.Connectors.Straight=function(){this.type="Straight";var a,b,c,d,e,f,g,h,i,j,k,l,m=this,n=null;this.compute=function(m,o,p,q,r,s,t,u){var v=Math.abs(m[0]-o[0]),w=Math.abs(m[1]-o[1]),x=.45*v,y=.45*w;v*=1.9,w*=1.9;var z=Math.min(m[0],o[0])-x,A=Math.min(m[1],o[1])-y,B=Math.max(2*t,u);return v<B&&(v=B,z=m[0]+(o[0]-m[0])/2-B/2,x=(v-Math.abs(m[0]-o[0]))/2),w<B&&(w=B,A=m[1]+(o[1]-m[1])/2-B/2,y=(w-Math.abs(m[1]-o[1]))/2),h=m[0]<o[0]?x:v-x,i=m[1]<o[1]?y:w-y,j=m[0]<o[0]?v-x:x,k=m[1]<o[1]?w-y:y,n=[z,A,v,w,h,i,j,k],d=j-h,e=k-i,a=jsPlumbUtil.gradient({x:h,y:i},{x:j,y:k}),b=-1/a,c=-1*(a*h-i),f=Math.atan(a),g=Math.atan(b),l=Math.sqrt(d*d+e*e),n},this.pointOnPath=function(a,b){if(0!=a||b){if(1!=a||b){var c=b?a>0?a:l+a:a*l;return jsPlumbUtil.pointOnLine({x:h,y:i},{x:j,y:k},c)}return{x:j,y:k}}return{x:h,y:i}},this.gradientAtPoint=function(b){return a},this.pointAlongPathFrom=function(a,b,c){var d=m.pointOnPath(a,c),e=1==a?{x:h+10*(j-h),y:i+10*(i-k)}:b<=0?{x:h,y:i}:{x:j,y:k};return b<=0&&Math.abs(b)>1&&(b*=-1),jsPlumbUtil.pointOnLine(d,e,b)}},jsPlumb.Connectors.Bezier=function(a){var b=this;a=a||{},this.majorAnchor=a.curviness||150,this.minorAnchor=10;var c=null;this.type="Bezier",this._findControlPoint=function(a,c,d,e,f,g,h){var i=g.getOrientation(e),j=h.getOrientation(f),k=i[0]!=j[0]||i[1]==j[1],l=[],m=b.majorAnchor,n=b.minorAnchor;return k?(0==j[0]?l.push(d[0]<c[0]?a[0]+n:a[0]-n):l.push(a[0]+m*j[0]),0==j[1]?l.push(d[1]<c[1]?a[1]+n:a[1]-n):l.push(a[1]+m*i[1])):(0==i[0]?l.push(c[0]<d[0]?a[0]+n:a[0]-n):l.push(a[0]-m*i[0]),0==i[1]?l.push(c[1]<d[1]?a[1]+n:a[1]-n):l.push(a[1]+m*j[1])),l};var d,e,f,g,h,f,i,j,k,l,m;this.compute=function(a,n,o,p,q,r,s,t){s=Math.max(t,s||0),l=Math.abs(a[0]-n[0])+s,m=Math.abs(a[1]-n[1])+s,j=Math.min(a[0],n[0])-s/2,k=Math.min(a[1],n[1])-s/2,f=a[0]<n[0]?l-s/2:s/2,i=a[1]<n[1]?m-s/2:s/2,g=a[0]<n[0]?s/2:l-s/2,h=a[1]<n[1]?s/2:m-s/2,d=b._findControlPoint([f,i],a,n,o,p,q,r),e=b._findControlPoint([g,h],n,a,p,o,r,q);var u=Math.min(f,g),v=Math.min(d[0],e[0]),w=Math.min(u,v),x=Math.max(f,g),y=Math.max(d[0],e[0]),z=Math.max(x,y);if(z>l&&(l=z),w<0){j+=w;var A=Math.abs(w);l+=A,d[0]+=A,f+=A,g+=A,e[0]+=A}var B=Math.min(i,h),C=Math.min(d[1],e[1]),D=Math.min(B,C),E=Math.max(i,h),F=Math.max(d[1],e[1]),G=Math.max(E,F);if(G>m&&(m=G),D<0){k+=D;var H=Math.abs(D);m+=H,d[1]+=H,i+=H,h+=H,e[1]+=H}if(t&&l<t){var I=(t-l)/2;l=t,j-=I,f+=I,g+=I,d[0]=d[0]+I,e[0]=e[0]+I}if(t&&m<t){var I=(t-m)/2;m=t,k-=I,i+=I,h+=I,d[1]=d[1]+I,e[1]=e[1]+I}return c=[j,k,l,m,f,i,g,h,d[0],d[1],e[0],e[1]]};var n=function(){return[{x:f,y:i},{x:d[0],y:d[1]},{x:e[0],y:e[1]},{x:g,y:h}]},o=function(a,b,c){return c&&(b=jsBezier.locationAlongCurveFrom(a,b>0?0:1,b)),b};this.pointOnPath=function(a,b){var c=n();return a=o(c,a,b),jsBezier.pointOnCurve(c,a)},this.gradientAtPoint=function(a,b){var c=n();return a=o(c,a,b),jsBezier.gradientAtPoint(c,a)},this.pointAlongPathFrom=function(a,b,c){var d=n();return a=o(d,a,c),jsBezier.pointAlongCurveFrom(d,a,b)}},jsPlumb.Connectors.Flowchart=function(a){this.type="Flowchart",a=a||{};var b,c,d=this,e=a.stub||a.minStubLength||30,f=jsPlumbUtil.isArray(e)?e[0]:e,g=jsPlumbUtil.isArray(e)?e[1]:e,h=a.gap||0,i=a.midpoint||.5,j=[],k=0,l=[],m=[],n=[],o=-(1/0),p=-(1/0),q=1/0,r=1/0,s=(a.grid,function(a,b,c,d){for(var e=0,f=0;f<j.length;f++)m[f]=j[f][5]/k,l[f]=[e,e+=j[f][5]/k]}),t=function(){n.push(j.length);for(var a=0;a<j.length;a++)n.push(j[a][0]),n.push(j[a][1])},u=function(a,b,c,d,e,f){var g=0==j.length?c:j[j.length-1][0],h=0==j.length?d:j[j.length-1][1],i=a==g?1/0:0,l=Math.abs(a==g?b-h:a-g);j.push([a,b,g,h,i,l]),k+=l,o=Math.max(o,a),p=Math.max(p,b),q=Math.min(q,a),r=Math.min(r,b)},v=function(a,b){b&&(a=a>0?a/k:(k+a)/k);for(var c=l.length-1,d=1,e=0;e<l.length;e++)if(l[e][1]>=a){c=e,d=(a-l[e][0])/m[e];break}return{segment:j[c],proportion:d,index:c}};this.compute=function(a,e,v,w,x,y,z,A,B,C){j=[],l=[],k=0,m=[],o=p=-(1/0),q=r=1/0,d.lineWidth=z,b=e[0]<a[0],c=e[1]<a[1];var D=z||1,E=D/2+(f+g),F=D/2+(g+f),G=D/2+(f+g),H=D/2+(g+f),I=x.orientation||x.getOrientation(v),J=y.orientation||y.getOrientation(w),K=b?e[0]:a[0],L=c?e[1]:a[1],M=Math.abs(e[0]-a[0])+E+F,N=Math.abs(e[1]-a[1])+G+H;if(0==I[0]&&0==I[1]||0==J[0]&&0==J[1]){var O=M>N?0:1,P=[1,0][O];I=[],J=[],I[O]=a[O]>e[O]?-1:1,J[O]=a[O]>e[O]?1:-1,I[P]=0,J[P]=0}var Q=b?M-F+h*I[0]:E+h*I[0],R=c?N-H+h*I[1]:G+h*I[1],S=b?E+h*J[0]:M-F+h*J[0],T=c?G+h*J[1]:N-H+h*J[1],U=Q+I[0]*f,V=R+I[1]*f,W=S+J[0]*g,X=T+J[1]*g,Y=Math.abs(Q-S)>f+g,Z=Math.abs(R-T)>f+g,$=U+(W-U)*i,_=V+(X-V)*i,aa=I[0]*J[0]+I[1]*J[1],ba=aa==-1,ca=1==aa;K-=E,L-=G,n=[K,L,M,N,Q,R,S,T];var da=0==I[0]?"y":"x",ea=ba?"opposite":ca?"orthogonal":"perpendicular",fa=jsPlumbUtil.segment([Q,R],[S,T]),ga=I["x"==da?0:1]==-1,ha={x:[null,4,3,2,1],y:[null,2,1,4,3]};ga&&(fa=ha[da][fa]),u(U,V,Q,R,S,T);var ia={oppositex:function(){if(v.elementId==w.elementId){var a=V+(1-x.y)*B.height+Math.max(f,g);return[[U,a],[W,a]]}return!Y||1!=fa&&2!=fa?[[U,_],[W,_]]:[[$,R],[$,T]]},orthogonalx:function(){return 1==fa||2==fa?[[W,V]]:[[U,X]]},perpendicularx:function(){var a=(T+R)/2;return 1==fa&&1==J[1]||2==fa&&J[1]==-1?Math.abs(S-Q)>Math.max(f,g)?[[W,V]]:[[U,V],[U,a],[W,a]]:3==fa&&J[1]==-1||4==fa&&1==J[1]?[[U,a],[W,a]]:3==fa&&1==J[1]||4==fa&&J[1]==-1?[[U,X]]:1==fa&&J[1]==-1||2==fa&&1==J[1]?Math.abs(S-Q)>Math.max(f,g)?[[$,V],[$,X]]:[[U,X]]:void 0},oppositey:function(){if(v.elementId==w.elementId){var a=U+(1-x.x)*B.width+Math.max(f,g);return[[a,V],[a,X]]}return!Z||2!=fa&&3!=fa?[[$,V],[$,X]]:[[Q,_],[S,_]]},orthogonaly:function(){return 2==fa||3==fa?[[U,X]]:[[W,V]]},perpendiculary:function(){var a=(S+Q)/2;if(2==fa&&J[0]==-1||3==fa&&1==J[0])return Math.abs(S-Q)>Math.max(f,g)?[[U,X]]:[[U,_],[W,_]];if(1==fa&&J[0]==-1||4==fa&&1==J[0]){var a=(S+Q)/2;return[[a,V],[a,X]]}return 1==fa&&1==J[0]||4==fa&&J[0]==-1?[[W,V]]:2==fa&&1==J[0]||3==fa&&J[0]==-1?Math.abs(T-R)>Math.max(f,g)?[[U,_],[W,_]]:[[W,V]]:void 0}},ja=ia[ea+da]();if(ja)for(var ka=0;ka<ja.length;ka++)u(ja[ka][0],ja[ka][1],Q,R,S,T);return u(W,X,Q,R,S,T),u(S,T,Q,R,S,T),t(),s(Q,R,S,T),p>n[3]&&(n[3]=p+2*z),o>n[2]&&(n[2]=o+2*z),n},this.pointOnPath=function(a,b){return d.pointAlongPathFrom(a,0,b)},this.gradientAtPoint=function(a,b){return j[v(a,b).index][4]},this.pointAlongPathFrom=function(a,b,c){var d=v(a,c),e=d.segment,f=d.proportion,g=j[d.index][5],h=j[d.index][4],i={x:h==1/0?e[2]:e[2]>e[0]?e[0]+(1-f)*g-b:e[2]+f*g+b,y:0==h?e[3]:e[3]>e[1]?e[1]+(1-f)*g-b:e[3]+f*g+b,segmentInfo:d};return i}},jsPlumb.Endpoints.Dot=function(a){this.type="Dot";var b=this;a=a||{},this.radius=a.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this.compute=function(a,c,d,e){var f=d.radius||b.radius,g=a[0]-f,h=a[1]-f;return[g,h,2*f,2*f,f]}},jsPlumb.Endpoints.Rectangle=function(a){this.type="Rectangle";var b=this;a=a||{},this.width=a.width||20,this.height=a.height||20,this.compute=function(a,c,d,e){var f=d.width||b.width,g=d.height||b.height,h=a[0]-f/2,i=a[1]-g/2;return[h,i,f,g]}};var a=function(a){jsPlumb.DOMElementComponent.apply(this,arguments);var b=[];this.getDisplayElements=function(){return b},this.appendDisplayElement=function(a){b.push(a)}};jsPlumb.Endpoints.Image=function(b){this.type="Image",a.apply(this,arguments);var c=this,d=!1,e=!1,f=b.width,g=b.height,h=null,i=b.endpoint;this.img=new Image,c.ready=!1,this.img.onload=function(){c.ready=!0,f=f||c.img.width,g=g||c.img.height,h&&h(c)},i.setImage=function(a,b){a.constructor==String?a:a.src;h=b,c.img.src=a,null!=c.canvas&&c.canvas.setAttribute("src",a)},i.setImage(b.src||b.url,b.onload),this.compute=function(a,b,d,e){return c.anchorPoint=a,c.ready?[a[0]-f/2,a[1]-g/2,f,g]:[0,0,0,0]},c.canvas=document.createElement("img"),d=!1,c.canvas.style.margin=0,c.canvas.style.padding=0,c.canvas.style.outline=0,c.canvas.style.position="absolute";var j=b.cssClass?" "+b.cssClass:"";c.canvas.className=jsPlumb.endpointClass+j,f&&c.canvas.setAttribute("width",f),g&&c.canvas.setAttribute("height",g),jsPlumb.appendElement(c.canvas,b.parent),c.attachListeners(c.canvas,c),c.cleanup=function(){e=!0};var k=function(a,b,h){if(!e){d||(c.canvas.setAttribute("src",c.img.src),c.appendDisplayElement(c.canvas),d=!0);var i=c.anchorPoint[0]-f/2,j=c.anchorPoint[1]-g/2;jsPlumb.sizeCanvas(c.canvas,i,j,f,g)}};this.paint=function(a,b,d){c.ready?k(a,b,d):window.setTimeout(function(){c.paint(a,b,d)},200)}},jsPlumb.Endpoints.Blank=function(b){var c=this;this.type="Blank",a.apply(this,arguments),this.compute=function(a,b,c,d){return[a[0],a[1],10,0]},c.canvas=document.createElement("div"),c.canvas.style.display="block",c.canvas.style.width="1px",c.canvas.style.height="1px",c.canvas.style.background="transparent",c.canvas.style.position="absolute",c.canvas.className=c._jsPlumb.endpointClass,jsPlumb.appendElement(c.canvas,b.parent),this.paint=function(a,b,d){jsPlumb.sizeCanvas(c.canvas,a[0],a[1],a[2],a[3])}},jsPlumb.Endpoints.Triangle=function(a){this.type="Triangle",a=a||{},a.width=a.width||55,a.height=a.height||55,this.width=a.width,this.height=a.height,this.compute=function(a,b,c,d){var e=c.width||self.width,f=c.height||self.height,g=a[0]-e/2,h=a[1]-f/2;return[g,h,e,f]}};var b=function(a){var b=!0,c=this;this.isAppendedAtTopLevel=!0,this.component=a.component,this.loc=null==a.location?.5:a.location,this.endpointLoc=null==a.endpointLocation?[.5,.5]:a.endpointLocation,this.setVisible=function(a){b=a,c.component.repaint()},this.isVisible=function(){return b},this.hide=function(){c.setVisible(!1)},this.show=function(){c.setVisible(!0)},this.incrementLocation=function(a){c.loc+=a,c.component.repaint()},this.setLocation=function(a){c.loc=a,c.component.repaint()},this.getLocation=function(){return c.loc}};jsPlumb.Overlays.Arrow=function(a){this.type="Arrow",b.apply(this,arguments),this.isAppendedAtTopLevel=!1,a=a||{};var c=this;this.length=a.length||20,this.width=a.width||20,this.id=a.id;var d=(a.direction||1)<0?-1:1,e=a.paintStyle||{lineWidth:1},f=a.foldback||.623;this.computeMaxSize=function(){return 1.5*c.width},this.cleanup=function(){},this.draw=function(a,b,g){var h,i,j,k,l;if(a.pointAlongPathFrom){if(jsPlumbUtil.isString(c.loc)||c.loc>1||c.loc<0){var m=parseInt(c.loc);h=a.pointAlongPathFrom(m,d*c.length/2,!0),i=a.pointOnPath(m,!0),j=jsPlumbUtil.pointOnLine(h,i,c.length)}else if(1==c.loc){if(h=a.pointOnPath(c.loc),i=a.pointAlongPathFrom(c.loc,-1),j=jsPlumbUtil.pointOnLine(h,i,c.length),d==-1){var n=j;j=h,h=n}}else if(0==c.loc){if(j=a.pointOnPath(c.loc),i=a.pointAlongPathFrom(c.loc,1),h=jsPlumbUtil.pointOnLine(j,i,c.length),d==-1){var n=j;j=h,h=n}}else h=a.pointAlongPathFrom(c.loc,d*c.length/2),i=a.pointOnPath(c.loc),j=jsPlumbUtil.pointOnLine(h,i,c.length);k=jsPlumbUtil.perpendicularLineTo(h,j,c.width),l=jsPlumbUtil.pointOnLine(h,j,f*c.length);var o=Math.min(h.x,k[0].x,k[1].x),p=Math.max(h.x,k[0].x,k[1].x),q=Math.min(h.y,k[0].y,k[1].y),r=Math.max(h.y,k[0].y,k[1].y),s={hxy:h,tail:k,cxy:l},t=e.strokeStyle||b.strokeStyle,u=e.fillStyle||b.strokeStyle,v=e.lineWidth||b.lineWidth;return c.paint(a,s,v,t,u,g),[o,p,q,r]}return[0,0,0,0]}},jsPlumb.Overlays.PlainArrow=function(a){a=a||{};var b=jsPlumb.extend(a,{foldback:1});jsPlumb.Overlays.Arrow.call(this,b),this.type="PlainArrow"},jsPlumb.Overlays.Diamond=function(a){a=a||{};var b=a.length||40,c=jsPlumb.extend(a,{length:b/2,foldback:2});jsPlumb.Overlays.Arrow.call(this,c),this.type="Diamond"};var c=function(a){jsPlumb.DOMElementComponent.apply(this,arguments),b.apply(this,arguments);var c=this,d=!1;a=a||{},this.id=a.id;var e,f=function(){e=a.create(a.component),e=jsPlumb.CurrentLibrary.getDOMElement(e),e.style.position="absolute";var b=a._jsPlumb.overlayClass+" "+(c.cssClass?c.cssClass:a.cssClass?a.cssClass:"");e.className=b,jsPlumb.appendElement(e,a.component.parent),a._jsPlumb.getId(e),c.attachListeners(e,c),c.canvas=e};this.getElement=function(){return null==e&&f(),e},this.getDimensions=function(){return jsPlumb.CurrentLibrary.getSize(jsPlumb.CurrentLibrary.getElementObject(c.getElement()))};var g=null,h=function(a){return null==g&&(g=c.getDimensions()),g};this.clearCachedDimensions=function(){g=null},this.computeMaxSize=function(){var a=h();return Math.max(a[0],a[1])};var i=c.setVisible;c.setVisible=function(a){i(a),e.style.display=a?"block":"none"},this.cleanup=function(){null!=e&&jsPlumb.CurrentLibrary.removeElement(e)},this.paint=function(a,b,f){d||(c.getElement(),a.appendDisplayElement(e),c.attachListeners(e,a),d=!0),e.style.left=f[0]+b.minx+"px",e.style.top=f[1]+b.miny+"px"},this.draw=function(a,b,d){var e=h();if(null!=e&&2==e.length){var f={x:0,y:0};if(a.pointOnPath){var g=c.loc,i=!1;(jsPlumbUtil.isString(c.loc)||c.loc<0||c.loc>1)&&(g=parseInt(c.loc),i=!0),f=a.pointOnPath(g,i)}else{var j=c.loc.constructor==Array?c.loc:c.endpointLoc;f={x:j[0]*d[2],y:j[1]*d[3]}}return minx=f.x-e[0]/2,miny=f.y-e[1]/2,c.paint(a,{minx:minx,miny:miny,td:e,cxy:f},d),[minx,minx+e[0],miny,miny+e[1]]}return[0,0,0,0]},this.reattachListeners=function(a){e&&c.reattachListenersForElement(e,c,a)}};jsPlumb.Overlays.Custom=function(a){this.type="Custom",c.apply(this,arguments)},jsPlumb.Overlays.Label=function(a){var b=this;this.labelStyle=a.labelStyle||jsPlumb.Defaults.LabelStyle,this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null,a.create=function(){return document.createElement("div")},jsPlumb.Overlays.Custom.apply(this,arguments),this.type="Label";var c=a.label||"",b=this,d=null;this.setLabel=function(a){c=a,d=null,b.clearCachedDimensions(),e(),b.component.repaint()};var e=function(){if("function"==typeof c){var a=c(b);b.getElement().innerHTML=a.replace(/\r\n/g,"<br/>")}else null==d&&(d=c,b.getElement().innerHTML=d.replace(/\r\n/g,"<br/>"))};this.getLabel=function(){return c};var f=this.getDimensions;this.getDimensions=function(){return e(),f()}}}(),function(){var a=function(a,b,c,d){return a<=c&&d<=b?1:a<=c&&b<=d?2:c<=a&&d>=b?3:4},b=function(a,b,c,d,e,f,g,h,i){return h<=i?[a,b]:1==c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:2==c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:3==c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:4==c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:void 0};jsPlumb.Connectors.StateMachine=function(c){var d,e,f,g,h=null,i=[],j=c.curviness||10,k=c.margin||5,l=c.proximityLimit||80,m=c.orientation&&"clockwise"==c.orientation,n=c.loopbackRadius||25,o=!1,p=c.showLoopback!==!1;this.type="StateMachine",c=c||{},this.compute=function(c,q,r,s,t,u,v,w){var x=Math.abs(c[0]-q[0]),y=Math.abs(c[1]-q[1]),z=.45*x,A=.45*y;x*=1.9,y*=1.9,v=v||1;var B=Math.min(c[0],q[0])-z,C=Math.min(c[1],q[1])-A;if(p&&r.elementId==s.elementId){o=!0;var D=c[0],E=c[0],F=c[1]-k,G=c[1]-k,H=D,I=F-n;x=2*v+4*n,y=2*v+4*n,B=H-n-v-n,C=I-n-v-n,h=[B,C,x,y,H-B,I-C,n,m,D-B,F-C,E-B,G-C]}else{o=!1,d=c[0]<q[0]?z:x-z,e=c[1]<q[1]?A:y-A,f=c[0]<q[0]?x-z:z,g=c[1]<q[1]?y-A:A,0==c[2]&&(d-=k),1==c[2]&&(d+=k),0==c[3]&&(e-=k),1==c[3]&&(e+=k),0==q[2]&&(f-=k),1==q[2]&&(f+=k),0==q[3]&&(g-=k),1==q[3]&&(g+=k);var J=(d+f)/2,K=(e+g)/2,L=-1*J/K,M=Math.atan(L),N=(L==1/0||L==-(1/0)?0:Math.abs(j/2*Math.sin(M)),L==1/0||L==-(1/0)?0:Math.abs(j/2*Math.cos(M)),a(d,e,f,g)),O=Math.sqrt(Math.pow(f-d,2)+Math.pow(g-e,2));i=b(J,K,N,c,q,j,j,O,l);var P=Math.max(3*Math.abs(i[0]-d),3*Math.abs(i[0]-f),Math.abs(f-d),2*v,w),Q=Math.max(3*Math.abs(i[1]-e),3*Math.abs(i[1]-g),Math.abs(g-e),2*v,w);if(x<P){var R=P-x;B-=R/2,d+=R/2,f+=R/2,x=P,i[0]+=R/2}if(y<Q){var S=Q-y;C-=S/2,e+=S/2,g+=S/2,y=Q,i[1]+=S/2}h=[B,C,x,y,d,e,f,g,i[0],i[1]]}return h};var q=function(){return[{x:f,y:g},{x:i[0],y:i[1]},{x:i[0]+1,y:i[1]+1},{x:d,y:e}]},r=function(a,b,c){return c&&(b=jsBezier.locationAlongCurveFrom(a,b>0?0:1,b)),b};this.pointOnPath=function(a,b){if(o){if(b){var c=2*Math.PI*n;a/=c}a>0&&a<1&&(a=1-a);var d=2*a*Math.PI+Math.PI/2,e=h[4]+h[6]*Math.cos(d),f=h[5]+h[6]*Math.sin(d);return{x:e,y:f}}var g=q();return a=r(g,a,b),jsBezier.pointOnCurve(g,a)},this.gradientAtPoint=function(a,b){if(o){if(b){var c=2*Math.PI*n;a/=c}return Math.atan(2*a*Math.PI)}var d=q();return a=r(d,a,b),jsBezier.gradientAtPoint(d,a)},this.pointAlongPathFrom=function(a,b,c){if(o){if(c){var d=2*Math.PI*n;a/=d}a>0&&a<1&&(a=1-a);var d=2*Math.PI*h[6],e=b/d*2*Math.PI,f=2*a*Math.PI-e+Math.PI/2,g=h[4]+h[6]*Math.cos(f),i=h[5]+h[6]*Math.sin(f);return{x:g,y:i}}var j=q();return a=r(j,a,c),jsBezier.pointAlongCurveFrom(j,a,b)}},jsPlumb.Connectors.canvas.StateMachine=function(a){a=a||{};var b=this;a.drawGuideline||!0,a.avoidSelector;jsPlumb.Connectors.StateMachine.apply(this,arguments),jsPlumb.CanvasConnector.apply(this,arguments),this._paint=function(a){if(10==a.length)b.ctx.beginPath(),b.ctx.moveTo(a[4],a[5]),b.ctx.bezierCurveTo(a[8],a[9],a[8],a[9],a[6],a[7]),b.ctx.stroke();else{b.ctx.save(),b.ctx.beginPath();var c=2*Math.PI,d=a[7];b.ctx.arc(a[4],a[5],a[6],0,c,d),b.ctx.stroke(),b.ctx.closePath(),b.ctx.restore()}},this.createGradient=function(a,b){
return b.createLinearGradient(a[4],a[5],a[6],a[7])}},jsPlumb.Connectors.svg.StateMachine=function(){jsPlumb.Connectors.StateMachine.apply(this,arguments),jsPlumb.SvgConnector.apply(this,arguments),this.getPath=function(a){return 10==a.length?"M "+a[4]+" "+a[5]+" C "+a[8]+" "+a[9]+" "+a[8]+" "+a[9]+" "+a[6]+" "+a[7]:"M"+(a[8]+4)+" "+a[9]+" A "+a[6]+" "+a[6]+" 0 1,0 "+(a[8]-4)+" "+a[9]}},jsPlumb.Connectors.vml.StateMachine=function(){jsPlumb.Connectors.StateMachine.apply(this,arguments),jsPlumb.VmlConnector.apply(this,arguments);var a=jsPlumb.vml.convertValue;this.getPath=function(b){if(10==b.length)return"m"+a(b[4])+","+a(b[5])+" c"+a(b[8])+","+a(b[9])+","+a(b[8])+","+a(b[9])+","+a(b[6])+","+a(b[7])+" e";var c=a(b[8]-b[6]),d=a(b[9]-2*b[6]),e=c+a(2*b[6]),f=d+a(2*b[6]),g=c+","+d+","+e+","+f,h="ar "+g+","+a(b[8])+","+a(b[9])+","+a(b[8])+","+a(b[9])+" e";return h}}}(),function(){var a={"stroke-linejoin":"joinstyle",joinstyle:"joinstyle",endcap:"endcap",miterlimit:"miterlimit"},b=null;if(document.createStyleSheet&&document.namespaces){var c=[".jsplumb_vml","jsplumb\\:textbox","jsplumb\\:oval","jsplumb\\:rect","jsplumb\\:stroke","jsplumb\\:shape","jsplumb\\:group"],d="behavior:url(#default#VML);position:absolute;";b=document.createStyleSheet();for(var e=0;e<c.length;e++)b.addRule(c[e],d);document.namespaces.add("jsplumb","urn:schemas-microsoft-com:vml")}jsPlumb.vml={};var f=1e3,g=function(a,b){for(var c in b)a[c]=b[c]},h=function(a,b,c,d,e,f){c=c||{};var h=document.createElement("jsplumb:"+a);return f?e.appendElement(h,d):jsPlumb.CurrentLibrary.appendElement(h,d),h.className=(c.class?c.class+" ":"")+"jsplumb_vml",i(h,b),g(h,c),h},i=function(a,b,c){a.style.left=b[0]+"px",a.style.top=b[1]+"px",a.style.width=b[2]+"px",a.style.height=b[3]+"px",a.style.position="absolute",c&&(a.style.zIndex=c)},j=jsPlumb.vml.convertValue=function(a){return Math.floor(a*f)},k=function(a,b,c,d){"transparent"===b?d.setOpacity(c,"0.0"):d.setOpacity(c,"1.0")},l=function(a,b,c,d){var e={};if(b.strokeStyle){e.stroked="true";var f=jsPlumbUtil.convertStyle(b.strokeStyle,!0);e.strokecolor=f,k(e,f,"stroke",c),e.strokeweight=b.lineWidth+"px"}else e.stroked="false";if(b.fillStyle){e.filled="true";var i=jsPlumbUtil.convertStyle(b.fillStyle,!0);e.fillcolor=i,k(e,i,"fill",c)}else e.filled="false";if(b.dashstyle)null==c.strokeNode?c.strokeNode=h("stroke",[0,0,0,0],{dashstyle:b.dashstyle},a,d):c.strokeNode.dashstyle=b.dashstyle;else if(b["stroke-dasharray"]&&b.lineWidth){for(var j=b["stroke-dasharray"].indexOf(",")==-1?" ":",",l=b["stroke-dasharray"].split(j),m="",n=0;n<l.length;n++)m+=Math.floor(l[n]/b.lineWidth)+j;null==c.strokeNode?c.strokeNode=h("stroke",[0,0,0,0],{dashstyle:m},a,d):c.strokeNode.dashstyle=m}g(a,e)},m=function(){var a=this;jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.opacityNodes={stroke:null,fill:null},this.initOpacityNodes=function(b){a.opacityNodes.stroke=h("stroke",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb),a.opacityNodes.fill=h("fill",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb)},this.setOpacity=function(b,c){var d=a.opacityNodes[b];d&&(d.opacity=""+c)};var b=[];this.getDisplayElements=function(){return b},this.appendDisplayElement=function(c,d){d||a.canvas.parentNode.appendChild(c),b.push(c)}},n=jsPlumb.VmlConnector=function(b){var c=this;c.strokeNode=null,c.canvas=null,m.apply(this,arguments);var d=c._jsPlumb.connectorClass+(b.cssClass?" "+b.cssClass:"");this.paint=function(e,j,k){if(null!=j){var m=c.getPath(e),n={path:m};if(j.outlineColor){var o=j.outlineWidth||1,p=j.lineWidth+2*o,q={strokeStyle:jsPlumbUtil.convertStyle(j.outlineColor),lineWidth:p};for(var r in a)q[r]=j[r];null==c.bgCanvas?(n.class=d,n.coordsize=e[2]*f+","+e[3]*f,c.bgCanvas=h("shape",e,n,b.parent,c._jsPlumb,!0),i(c.bgCanvas,e,c.getZIndex()),c.appendDisplayElement(c.bgCanvas,!0),c.attachListeners(c.bgCanvas,c),c.initOpacityNodes(c.bgCanvas,["stroke"])):(n.coordsize=e[2]*f+","+e[3]*f,i(c.bgCanvas,e,c.getZIndex()),g(c.bgCanvas,n)),l(c.bgCanvas,q,c)}null==c.canvas?(n.class=d,n.coordsize=e[2]*f+","+e[3]*f,c.tooltip&&(n.label=c.tooltip),c.canvas=h("shape",e,n,b.parent,c._jsPlumb,!0),c.appendDisplayElement(c.canvas,!0),c.attachListeners(c.canvas,c),c.initOpacityNodes(c.canvas,["stroke"])):(n.coordsize=e[2]*f+","+e[3]*f,i(c.canvas,e,c.getZIndex()),g(c.canvas,n)),l(c.canvas,j,c,c._jsPlumb)}},this.reattachListeners=function(){c.canvas&&c.reattachListenersForElement(c.canvas,c)}},o=window.VmlEndpoint=function(a){m.apply(this,arguments);var b=null,c=this;c.canvas=document.createElement("div"),c.canvas.style.position="absolute";var d=c._jsPlumb.endpointClass+(a.cssClass?" "+a.cssClass:"");a._jsPlumb.appendElement(c.canvas,a.parent),c.tooltip&&c.canvas.setAttribute("label",c.tooltip),this.paint=function(a,e,f){var h={};jsPlumb.sizeCanvas(c.canvas,a[0],a[1],a[2],a[3]),null==b?(h.class=d,b=c.getVml([0,0,a[2],a[3]],h,f,c.canvas,c._jsPlumb),c.attachListeners(b,c),c.appendDisplayElement(b,!0),c.appendDisplayElement(c.canvas,!0),c.initOpacityNodes(b,["fill"])):(i(b,[0,0,a[2],a[3]]),g(b,h)),l(b,e,c)},this.reattachListeners=function(){b&&c.reattachListenersForElement(b,c)}};jsPlumb.Connectors.vml.Bezier=function(){jsPlumb.Connectors.Bezier.apply(this,arguments),n.apply(this,arguments),this.getPath=function(a){return"m"+j(a[4])+","+j(a[5])+" c"+j(a[8])+","+j(a[9])+","+j(a[10])+","+j(a[11])+","+j(a[6])+","+j(a[7])+" e"}},jsPlumb.Connectors.vml.Straight=function(){jsPlumb.Connectors.Straight.apply(this,arguments),n.apply(this,arguments),this.getPath=function(a){return"m"+j(a[4])+","+j(a[5])+" l"+j(a[6])+","+j(a[7])+" e"}},jsPlumb.Connectors.vml.Flowchart=function(){jsPlumb.Connectors.Flowchart.apply(this,arguments),n.apply(this,arguments),this.getPath=function(a){for(var b="m "+j(a[4])+","+j(a[5])+" l",c=0;c<a[8];c++)b=b+" "+j(a[9+2*c])+","+j(a[10+2*c]);return b=b+" "+j(a[6])+","+j(a[7])+" e"}},jsPlumb.Endpoints.vml.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h("oval",a,b,d,e)}},jsPlumb.Endpoints.vml.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h("rect",a,b,d,e)}},jsPlumb.Endpoints.vml.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.vml.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.vml.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.vml.Custom=jsPlumb.Overlays.Custom;var p=function(a,b){a.apply(this,b),m.apply(this,b);var c=this;c.canvas=null,c.isAppendedAtTopLevel=!0;var d=function(a,b){return"m "+j(a.hxy.x)+","+j(a.hxy.y)+" l "+j(a.tail[0].x)+","+j(a.tail[0].y)+" "+j(a.cxy.x)+","+j(a.cxy.y)+" "+j(a.tail[1].x)+","+j(a.tail[1].y)+" x e"};this.paint=function(a,b,e,j,k,l){var m={};j&&(m.stroked="true",m.strokecolor=jsPlumbUtil.convertStyle(j,!0)),e&&(m.strokeweight=e+"px"),k&&(m.filled="true",m.fillcolor=k);var n=Math.min(b.hxy.x,b.tail[0].x,b.tail[1].x,b.cxy.x),o=Math.min(b.hxy.y,b.tail[0].y,b.tail[1].y,b.cxy.y),p=Math.max(b.hxy.x,b.tail[0].x,b.tail[1].x,b.cxy.x),q=Math.max(b.hxy.y,b.tail[0].y,b.tail[1].y,b.cxy.y),r=Math.abs(p-n),s=Math.abs(q-o),t=[n,o,r,s];m.path=d(b,l),m.coordsize=l[2]*f+","+l[3]*f,t[0]=l[0],t[1]=l[1],t[2]=l[2],t[3]=l[3],null==c.canvas?(c.canvas=h("shape",t,m,a.canvas.parentNode,a._jsPlumb,!0),a.appendDisplayElement(c.canvas,!0),c.attachListeners(c.canvas,a),c.attachListeners(c.canvas,c)):(i(c.canvas,t),g(c.canvas,m))},this.reattachListeners=function(){c.canvas&&c.reattachListenersForElement(c.canvas,c)},this.cleanup=function(){null!=c.canvas&&jsPlumb.CurrentLibrary.removeElement(c.canvas)}};jsPlumb.Overlays.vml.Arrow=function(){p.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumb.Overlays.vml.PlainArrow=function(){p.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumb.Overlays.vml.Diamond=function(){p.apply(this,[jsPlumb.Overlays.Diamond,arguments])}}(),function(){var a={joinstyle:"stroke-linejoin","stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},b="stroke-dasharray",c="dashstyle",d="linearGradient",e="radialGradient",f="fill",g="stop",h="stroke",i="stroke-width",j="style",k="none",l="jsplumb_gradient_",m="lineWidth",n={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},o=function(a,b){for(var c in b)a.setAttribute(c,""+b[c])},p=function(a,b){var c=document.createElementNS(n.svg,a);return b=b||{},b.version="1.1",b.xmlns=n.xhtml,o(c,b),c},q=function(a){return"position:absolute;left:"+a[0]+"px;top:"+a[1]+"px"},r=function(a){for(var b=0;b<a.childNodes.length;b++)a.childNodes[b].tagName!=d&&a.childNodes[b].tagName!=e||a.removeChild(a.childNodes[b])},s=function(a,b,c,i,k){var m=l+k._jsPlumb.idstamp();if(r(a),c.gradient.offset){var n=p(e,{id:m});a.appendChild(n)}else{var n=p(d,{id:m,gradientUnits:"userSpaceOnUse"});a.appendChild(n)}for(var o=0;o<c.gradient.stops.length;o++){var q=o;q=8==i.length?i[4]<i[6]?o:c.gradient.stops.length-1-o:i[4]<i[6]?c.gradient.stops.length-1-o:o;var s=jsPlumbUtil.convertStyle(c.gradient.stops[q][1],!0),t=p(g,{offset:Math.floor(100*c.gradient.stops[o][0])+"%","stop-color":s});n.appendChild(t)}var u=c.strokeStyle?h:f;b.setAttribute(j,u+":url(#"+m+")")},t=function(d,e,g,l,n){if(g.gradient?s(d,e,g,l,n):(r(d),e.setAttribute(j,"")),e.setAttribute(f,g.fillStyle?jsPlumbUtil.convertStyle(g.fillStyle,!0):k),e.setAttribute(h,g.strokeStyle?jsPlumbUtil.convertStyle(g.strokeStyle,!0):k),g.lineWidth&&e.setAttribute(i,g.lineWidth),g[c]&&g[m]&&!g[b]){var o=g[c].indexOf(",")==-1?" ":",",p=g[c].split(o),q="";p.forEach(function(a){q+=Math.floor(a*g.lineWidth)+o}),e.setAttribute(b,q)}else g[b]&&e.setAttribute(b,g[b]);for(var t in a)g[t]&&e.setAttribute(a[t],g[t])},u=function(a,b,c){for(var d=c.split(" "),e=a.className,f=e.baseVal.split(" "),g=0;g<d.length;g++)if(b)f.indexOf(d[g])==-1&&f.push(d[g]);else{var h=f.indexOf(d[g]);h!=-1&&f.splice(h,1)}a.className.baseVal=f.join(" ")},v=function(a,b){u(a,!0,b)},w=function(a,b){u(a,!1,b)};jsPlumbUtil.svg={addClass:v,removeClass:w,node:p,attr:o,pos:q};var x=function(a){var b=this,c=a.pointerEventsSpec||"all";jsPlumb.jsPlumbUIComponent.apply(this,a.originalArgs),b.canvas=null,b.path=null,b.svg=null;var d=a.cssClass+" "+(a.originalArgs[0].cssClass||""),e={style:"",width:0,height:0,"pointer-events":c,position:"absolute"};b.tooltip&&(e.title=b.tooltip),b.svg=p("svg",e),a.useDivWrapper?(b.canvas=document.createElement("div"),b.canvas.style.position="absolute",jsPlumb.sizeCanvas(b.canvas,0,0,1,1),b.canvas.className=d,b.tooltip&&b.canvas.setAttribute("title",b.tooltip)):(o(b.svg,{class:d}),b.canvas=b.svg),a._jsPlumb.appendElement(b.canvas,a.originalArgs[0].parent),a.useDivWrapper&&b.canvas.appendChild(b.svg);var f=[b.canvas];this.getDisplayElements=function(){return f},this.appendDisplayElement=function(a){f.push(a)},this.paint=function(c,d,e){if(null!=d){var f=c[0],g=c[1];a.useDivWrapper&&(jsPlumb.sizeCanvas(b.canvas,c[0],c[1],c[2],c[3]),f=0,g=0);var h=q([f,g,c[2],c[3]]);b.getZIndex()&&(h+=";z-index:"+b.getZIndex()+";"),o(b.svg,{style:h,width:c[2],height:c[3]}),b._paint.apply(this,arguments)}}},y=jsPlumb.SvgConnector=function(a){var b=this;x.apply(this,[{cssClass:a._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",tooltip:a.tooltip,_jsPlumb:a._jsPlumb}]),this._paint=function(a,c){var d=b.getPath(a),e={d:d},f=null;if(e["pointer-events"]="all",c.outlineColor){var g=c.outlineWidth||1,h=c.lineWidth+2*g,f=jsPlumb.CurrentLibrary.extend({},c);f.strokeStyle=jsPlumbUtil.convertStyle(c.outlineColor),f.lineWidth=h,null==b.bgPath?(b.bgPath=p("path",e),b.svg.appendChild(b.bgPath),b.attachListeners(b.bgPath,b)):o(b.bgPath,e),t(b.svg,b.bgPath,f,a,b)}null==b.path?(b.path=p("path",e),b.svg.appendChild(b.path),b.attachListeners(b.path,b)):o(b.path,e),t(b.svg,b.path,c,a,b)},this.reattachListeners=function(){b.bgPath&&b.reattachListenersForElement(b.bgPath,b),b.path&&b.reattachListenersForElement(b.path,b)}};jsPlumb.Connectors.svg.Bezier=function(a){jsPlumb.Connectors.Bezier.apply(this,arguments),y.apply(this,arguments),this.getPath=function(a){var b="M "+a[4]+" "+a[5];return b+=" C "+a[8]+" "+a[9]+" "+a[10]+" "+a[11]+" "+a[6]+" "+a[7]}},jsPlumb.Connectors.svg.Straight=function(a){jsPlumb.Connectors.Straight.apply(this,arguments),y.apply(this,arguments),this.getPath=function(a){return"M "+a[4]+" "+a[5]+" L "+a[6]+" "+a[7]}},jsPlumb.Connectors.svg.Flowchart=function(){var a=this;jsPlumb.Connectors.Flowchart.apply(this,arguments),y.apply(this,arguments),this.getPath=function(b){for(var c="M "+b[4]+","+b[5],d=b[4],e=b[5],f=0;f<b[8];f++){var g=b[9+2*f],h=b[10+2*f],i=b[9+2*(f+1)],j=b[10+2*(f+1)],k=g!=d&&h==e,l=g==d&&h!=e,m=k?g>i?1:-1:0,n=l?h>j?1:-1:0,o=a.lineWidth/2;c=c+" L "+g+" "+h,c=c+" L "+(g+m*o)+" "+(h+n*o),d=g,e=h,c=c+" M "+g+" "+h}return c=c+" L "+b[6]+","+b[7]}};var z=window.SvgEndpoint=function(a){var b=this;x.apply(this,[{cssClass:a._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:a._jsPlumb}]),this._paint=function(a,c){var d=jsPlumb.extend({},c);d.outlineColor&&(d.strokeWidth=d.outlineWidth,d.strokeStyle=jsPlumbUtil.convertStyle(d.outlineColor,!0)),null==b.node&&(b.node=b.makeNode(a,d),b.svg.appendChild(b.node),b.attachListeners(b.node,b)),t(b.svg,b.node,d,a,b),q(b.node,a)},this.reattachListeners=function(){b.node&&b.reattachListenersForElement(b.node,b)}};jsPlumb.Endpoints.svg.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),z.apply(this,arguments),this.makeNode=function(a,b){return p("circle",{cx:a[2]/2,cy:a[3]/2,r:a[2]/2})}},jsPlumb.Endpoints.svg.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),z.apply(this,arguments),this.makeNode=function(a,b){return p("rect",{width:a[2],height:a[3]})}},jsPlumb.Endpoints.svg.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.svg.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.svg.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.svg.Custom=jsPlumb.Overlays.Custom;var A=function(a,b){a.apply(this,b),jsPlumb.jsPlumbUIComponent.apply(this,b),this.isAppendedAtTopLevel=!1;var c=this,d=null;this.paint=function(a,f,g,h,i){null==d&&(d=p("path",{"pointer-events":"all"}),a.svg.appendChild(d),c.attachListeners(d,a),c.attachListeners(d,c));var j=b&&1==b.length?b[0].cssClass||"":"";o(d,{d:e(f),class:j,stroke:h?h:null,fill:i?i:null})};var e=function(a){return"M"+a.hxy.x+","+a.hxy.y+" L"+a.tail[0].x+","+a.tail[0].y+" L"+a.cxy.x+","+a.cxy.y+" L"+a.tail[1].x+","+a.tail[1].y+" L"+a.hxy.x+","+a.hxy.y};this.reattachListeners=function(){d&&c.reattachListenersForElement(d,c)},this.cleanup=function(){null!=d&&jsPlumb.CurrentLibrary.removeElement(d)}};jsPlumb.Overlays.svg.Arrow=function(){A.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumb.Overlays.svg.PlainArrow=function(){A.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumb.Overlays.svg.Diamond=function(){A.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumb.Overlays.svg.GuideLines=function(){var a,b,c=null,d=this;jsPlumb.Overlays.GuideLines.apply(this,arguments),this.paint=function(f,g,h,i,j){null==c&&(c=p("path"),f.svg.appendChild(c),d.attachListeners(c,f),d.attachListeners(c,d),a=p("path"),f.svg.appendChild(a),d.attachListeners(a,f),d.attachListeners(a,d),b=p("path"),f.svg.appendChild(b),d.attachListeners(b,f),d.attachListeners(b,d)),o(c,{d:e(g[0],g[1]),stroke:"red",fill:null}),o(a,{d:e(g[2][0],g[2][1]),stroke:"blue",fill:null}),o(b,{d:e(g[3][0],g[3][1]),stroke:"green",fill:null})};var e=function(a,b){return"M "+a.x+","+a.y+" L"+b.x+","+b.y}}}(),function(){var a=null,b=function(a,b){return jsPlumb.CurrentLibrary.hasClass(c(a),b)},c=function(a){return jsPlumb.CurrentLibrary.getElementObject(a)},d=function(a){return jsPlumb.CurrentLibrary.getOffset(c(a))},e=function(a){return jsPlumb.CurrentLibrary.getPageXY(a)},f=function(a){return jsPlumb.CurrentLibrary.getClientXY(a)},g=function(){var g=this;g.overlayPlacements=[],jsPlumb.jsPlumbUIComponent.apply(this,arguments),jsPlumbUtil.EventGenerator.apply(this,arguments),this._over=function(a){var b=d(c(g.canvas)),f=e(a),h=f[0]-b.left,i=f[1]-b.top;if(h>0&&i>0&&h<g.canvas.width&&i<g.canvas.height){for(var j=0;j<g.overlayPlacements.length;j++){var k=g.overlayPlacements[j];if(k&&k[0]<=h&&k[1]>=h&&k[2]<=i&&k[3]>=i)return!0}var l=g.canvas.getContext("2d").getImageData(parseInt(h),parseInt(i),1,1);return 0!=l.data[0]||0!=l.data[1]||0!=l.data[2]||0!=l.data[3]}return!1};var h=!1,i=!1,j=null,k=!1,l=function(a,c){return null!=a&&b(a,c)};this.mousemove=function(b){var c=(e(b),f(b)),d=document.elementFromPoint(c[0],c[1]),i=l(d,"_jsPlumb_overlay"),j=null==a&&(l(d,"_jsPlumb_endpoint")||l(d,"_jsPlumb_connector"));return!h&&j&&g._over(b)?(h=!0,g.fire("mouseenter",g,b),!0):(!h||g._over(b)&&j||i||(h=!1,g.fire("mouseexit",g,b)),void g.fire("mousemove",g,b))},this.click=function(a){h&&g._over(a)&&!k&&g.fire("click",g,a),k=!1},this.dblclick=function(a){h&&g._over(a)&&!k&&g.fire("dblclick",g,a),k=!1},this.mousedown=function(a){g._over(a)&&!i&&(i=!0,j=d(c(g.canvas)),g.fire("mousedown",g,a))},this.mouseup=function(a){i=!1,g.fire("mouseup",g,a)},this.contextmenu=function(a){h&&g._over(a)&&!k&&g.fire("contextmenu",g,a),k=!1}},h=function(a){var b=document.createElement("canvas");return a._jsPlumb.appendElement(b,a.parent),b.style.position="absolute",a.class&&(b.className=a.class),a._jsPlumb.getId(b,a.uuid),a.tooltip&&b.setAttribute("title",a.tooltip),b},i=function(a){g.apply(this,arguments);var b=[];this.getDisplayElements=function(){return b},this.appendDisplayElement=function(a){b.push(a)}},j=jsPlumb.CanvasConnector=function(a){i.apply(this,arguments);var b=function(a,b){if(c.ctx.save(),jsPlumb.extend(c.ctx,b),b.gradient){for(var d=c.createGradient(a,c.ctx),e=0;e<b.gradient.stops.length;e++)d.addColorStop(b.gradient.stops[e][0],b.gradient.stops[e][1]);c.ctx.strokeStyle=d}c._paint(a,b),c.ctx.restore()},c=this,d=c._jsPlumb.connectorClass+" "+(a.cssClass||"");c.canvas=h({class:d,_jsPlumb:c._jsPlumb,parent:a.parent,tooltip:a.tooltip}),c.ctx=c.canvas.getContext("2d"),c.appendDisplayElement(c.canvas),c.paint=function(a,d){if(null!=d){if(jsPlumb.sizeCanvas(c.canvas,a[0],a[1],a[2],a[3]),c.getZIndex()&&(c.canvas.style.zIndex=c.getZIndex()),null!=d.outlineColor){var e=d.outlineWidth||1,f=d.lineWidth+2*e,g={strokeStyle:d.outlineColor,lineWidth:f};b(a,g)}b(a,d)}}},k=function(a){var b=this;i.apply(this,arguments);var c=b._jsPlumb.endpointClass+" "+(a.cssClass||""),d={class:c,_jsPlumb:b._jsPlumb,parent:a.parent,tooltip:b.tooltip};b.canvas=h(d),b.ctx=b.canvas.getContext("2d"),b.appendDisplayElement(b.canvas),this.paint=function(a,c,d){if(jsPlumb.sizeCanvas(b.canvas,a[0],a[1],a[2],a[3]),null!=c.outlineColor){var e=c.outlineWidth||1,f=c.lineWidth+2*e;({strokeStyle:c.outlineColor,lineWidth:f})}b._paint.apply(this,arguments)}};jsPlumb.Endpoints.canvas.Dot=function(a){jsPlumb.Endpoints.Dot.apply(this,arguments),k.apply(this,arguments);var b=this,c=function(a){try{return parseInt(a)}catch(b){if("%"==a.substring(a.length-1))return parseInt(a.substring(0,a-1))}},d=function(a){var d=b.defaultOffset,e=b.defaultInnerRadius;return a.offset&&(d=c(a.offset)),a.innerRadius&&(e=c(a.innerRadius)),[d,e]};this._paint=function(a,c,e){if(null!=c){var f=b.canvas.getContext("2d"),g=e.getOrientation(b);if(jsPlumb.extend(f,c),c.gradient){for(var h=d(c.gradient),i=1==g[1]?h[0]*-1:h[0],j=1==g[0]?h[0]*-1:h[0],k=f.createRadialGradient(a[4],a[4],a[4],a[4]+j,a[4]+i,h[1]),l=0;l<c.gradient.stops.length;l++)k.addColorStop(c.gradient.stops[l][0],c.gradient.stops[l][1]);f.fillStyle=k}f.beginPath(),f.arc(a[4],a[4],a[4],0,2*Math.PI,!0),f.closePath(),(c.fillStyle||c.gradient)&&f.fill(),c.strokeStyle&&f.stroke()}}},jsPlumb.Endpoints.canvas.Rectangle=function(a){var b=this;jsPlumb.Endpoints.Rectangle.apply(this,arguments),k.apply(this,arguments),this._paint=function(a,c,d){var e=b.canvas.getContext("2d"),f=d.getOrientation(b);if(jsPlumb.extend(e,c),c.gradient){for(var g=1==f[1]?a[3]:0==f[1]?a[3]/2:0,h=f[1]==-1?a[3]:0==f[1]?a[3]/2:0,i=1==f[0]?a[2]:0==f[0]?a[2]/2:0,j=f[0]==-1?a[2]:0==f[0]?a[2]/2:0,k=e.createLinearGradient(i,g,j,h),l=0;l<c.gradient.stops.length;l++)k.addColorStop(c.gradient.stops[l][0],c.gradient.stops[l][1]);e.fillStyle=k}e.beginPath(),e.rect(0,0,a[2],a[3]),e.closePath(),(c.fillStyle||c.gradient)&&e.fill(),c.strokeStyle&&e.stroke()}},jsPlumb.Endpoints.canvas.Triangle=function(a){var b=this;jsPlumb.Endpoints.Triangle.apply(this,arguments),k.apply(this,arguments),this._paint=function(a,c,d){var e=a[2],f=a[3],g=(a[0],a[1],b.canvas.getContext("2d")),h=0,i=0,j=0,k=d.getOrientation(b);1==k[0]&&(h=e,i=f,j=180),k[1]==-1&&(h=e,j=90),1==k[1]&&(i=f,j=-90),g.fillStyle=c.fillStyle,g.translate(h,i),g.rotate(j*Math.PI/180),g.beginPath(),g.moveTo(0,0),g.lineTo(e/2,f/2),g.lineTo(0,f),g.closePath(),(c.fillStyle||c.gradient)&&g.fill(),c.strokeStyle&&g.stroke()}},jsPlumb.Endpoints.canvas.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.canvas.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Connectors.canvas.Bezier=function(){var a=this;jsPlumb.Connectors.Bezier.apply(this,arguments),j.apply(this,arguments),this._paint=function(b,c){a.ctx.beginPath(),a.ctx.moveTo(b[4],b[5]),a.ctx.bezierCurveTo(b[8],b[9],b[10],b[11],b[6],b[7]),a.ctx.stroke()},this.createGradient=function(b,c,d){return a.ctx.createLinearGradient(b[6],b[7],b[4],b[5])}},jsPlumb.Connectors.canvas.Straight=function(){var a=this,b=[null,[1,-1],[1,1],[-1,1],[-1,-1]];jsPlumb.Connectors.Straight.apply(this,arguments),j.apply(this,arguments),this._paint=function(c,d){if(a.ctx.beginPath(),d.dashstyle&&2==d.dashstyle.split(" ").length){var e=d.dashstyle.split(" ");2!=e.length&&(e=[2,2]);for(var f=[e[0]*d.lineWidth,e[1]*d.lineWidth],g=(c[6]-c[4])/(c[7]-c[5]),h=jsPlumbUtil.segment([c[4],c[5]],[c[6],c[7]]),i=b[h],j=Math.atan(g),k=Math.sqrt(Math.pow(c[6]-c[4],2)+Math.pow(c[7]-c[5],2)),l=Math.floor(k/(f[0]+f[1])),m=[c[4],c[5]],n=0;n<l;n++){a.ctx.moveTo(m[0],m[1]);var o=m[0]+Math.abs(Math.sin(j)*f[0])*i[0],p=m[1]+Math.abs(Math.cos(j)*f[0])*i[1],q=m[0]+Math.abs(Math.sin(j)*(f[0]+f[1]))*i[0],r=m[1]+Math.abs(Math.cos(j)*(f[0]+f[1]))*i[1];a.ctx.lineTo(o,p),m=[q,r]}a.ctx.moveTo(m[0],m[1]),a.ctx.lineTo(c[6],c[7])}else a.ctx.moveTo(c[4],c[5]),a.ctx.lineTo(c[6],c[7]);a.ctx.stroke()},this.createGradient=function(a,b){return b.createLinearGradient(a[4],a[5],a[6],a[7])}},jsPlumb.Connectors.canvas.Flowchart=function(){var a=this;jsPlumb.Connectors.Flowchart.apply(this,arguments),j.apply(this,arguments),this._paint=function(b,c){a.ctx.beginPath(),a.ctx.moveTo(b[4],b[5]);for(var d=0;d<b[8];d++)a.ctx.lineTo(b[9+2*d],b[10+2*d]);a.ctx.lineTo(b[6],b[7]),a.ctx.stroke()},this.createGradient=function(a,b){return b.createLinearGradient(a[4],a[5],a[6],a[7])}},jsPlumb.Overlays.canvas.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.canvas.Custom=jsPlumb.Overlays.Custom;var l=function(){jsPlumb.jsPlumbUIComponent.apply(this,arguments)},m=function(a,b){a.apply(this,b),l.apply(this,b),this.paint=function(a,b,c,d,e){var f=a.ctx;f.lineWidth=c,f.beginPath(),f.moveTo(b.hxy.x,b.hxy.y),f.lineTo(b.tail[0].x,b.tail[0].y),f.lineTo(b.cxy.x,b.cxy.y),f.lineTo(b.tail[1].x,b.tail[1].y),f.lineTo(b.hxy.x,b.hxy.y),f.closePath(),d&&(f.strokeStyle=d,f.stroke()),e&&(f.fillStyle=e,f.fill())}};jsPlumb.Overlays.canvas.Arrow=function(){m.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumb.Overlays.canvas.PlainArrow=function(){m.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumb.Overlays.canvas.Diamond=function(){m.apply(this,[jsPlumb.Overlays.Diamond,arguments])}}(),function(a){jsPlumb.CurrentLibrary={addClass:function(a,b){a=jsPlumb.CurrentLibrary.getElementObject(a);try{a[0].className.constructor==SVGAnimatedString&&jsPlumbUtil.svg.addClass(a[0],b)}catch(a){}a.addClass(b)},animate:function(a,b,c){a.animate(b,c)},appendElement:function(a,b){jsPlumb.CurrentLibrary.getElementObject(b).append(a)},ajax:function(b){b=b||{},b.type=b.type||"get",a.ajax(b)},bind:function(a,b,c){a=jsPlumb.CurrentLibrary.getElementObject(a),a.bind(b,c)},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete"},extend:function(b,c){return a.extend(b,c)},getAttribute:function(a,b){return a.attr(b)},getClientXY:function(a){return[a.clientX,a.clientY]},getDragObject:function(a){return a[1].draggable},getDragScope:function(a){return a.draggable("option","scope")},getDropEvent:function(a){return a[0]},getDropScope:function(a){return a.droppable("option","scope")},getDOMElement:function(a){return"string"==typeof a?document.getElementById(a):a.context||null!=a.length?a[0]:a},getElementObject:function(b){return a("string"==typeof b?"#"+b:b)},getOffset:function(a){return a.offset()},getOriginalEvent:function(a){return a.originalEvent},getPageXY:function(a){return[a.pageX,a.pageY]},getParent:function(a){return jsPlumb.CurrentLibrary.getElementObject(a).parent()},getScrollLeft:function(a){return a.scrollLeft()},getScrollTop:function(a){return a.scrollTop()},getSelector:function(b){return a(b)},getSize:function(a){return[a.outerWidth(),a.outerHeight()]},getTagName:function(a){var b=jsPlumb.CurrentLibrary.getElementObject(a);return b.length>0?b[0].tagName:null},getUIPosition:function(a,b){if(b=b||1,1==a.length)ret={left:a[0].pageX,top:a[0].pageY};else{var c=a[1],d=c.offset;ret=d||c.absolutePosition,c.position.left/=b,c.position.top/=b}return{left:ret.left/b,top:ret.top/b}},hasClass:function(a,b){return a.hasClass(b)},initDraggable:function(a,b,c){b=b||{},b.helper=null,c&&(b.scope=b.scope||jsPlumb.Defaults.Scope),a.draggable(b)},initDroppable:function(a,b){b.scope=b.scope||jsPlumb.Defaults.Scope,a.droppable(b)},isAlreadyDraggable:function(a){return a=jsPlumb.CurrentLibrary.getElementObject(a),a.hasClass("ui-draggable")},isDragSupported:function(a,b){return a.draggable},isDropSupported:function(a,b){return a.droppable},removeClass:function(a,b){a=jsPlumb.CurrentLibrary.getElementObject(a);try{a[0].className.constructor==SVGAnimatedString&&jsPlumbUtil.svg.removeClass(a[0],b)}catch(a){}a.removeClass(b)},removeElement:function(a,b){jsPlumb.CurrentLibrary.getElementObject(a).remove()},setAttribute:function(a,b,c){a.attr(b,c)},setDraggable:function(a,b){a.draggable("option","disabled",!b)},setDragScope:function(a,b){a.draggable("option","scope",b)},setOffset:function(a,b){jsPlumb.CurrentLibrary.getElementObject(a).offset(b)},trigger:function(a,b,c){var d=jQuery._data(jsPlumb.CurrentLibrary.getElementObject(a)[0],"handle");d(c)},unbind:function(a,b,c){a=jsPlumb.CurrentLibrary.getElementObject(a),a.unbind(b,c)}},a(document).ready(jsPlumb.init)}(jQuery),function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(a){return 0==a?0:0<a?1:-1});var a={subtract:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},dotProduct:function(a,b){return a.x*b.x+a.y*b.y},square:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},scale:function(a,b){return{x:a.x*b,y:a.y*b}}},b=Math.pow(2,-65),c=function(b,c){for(var f=[],g=c.length-1,h=2*g-1,i=[],k=[],l=[],m=[],n=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],o=0;o<=g;o++)i[o]=a.subtract(c[o],b);for(o=0;o<=g-1;o++)k[o]=a.subtract(c[o+1],c[o]),k[o]=a.scale(k[o],3);for(o=0;o<=g-1;o++)for(var p=0;p<=g;p++)l[o]||(l[o]=[]),l[o][p]=a.dotProduct(k[o],i[p]);for(o=0;o<=h;o++)m[o]||(m[o]=[]),m[o].y=0,m[o].x=parseFloat(o)/h;for(h=g-1,i=0;i<=g+h;i++)for(o=Math.max(0,i-h),k=Math.min(i,g);o<=k;o++)j=i-o,m[o+j].y=m[o+j].y+l[j][o]*n[j][o];for(g=c.length-1,m=d(m,2*g-1,f,0),h=a.subtract(b,c[0]),l=a.square(h),o=n=0;o<m;o++)h=a.subtract(b,e(c,g,f[o],null,null)),h=a.square(h),h<l&&(l=h,n=f[o]);return h=a.subtract(b,c[g]),h=a.square(h),h<l&&(l=h,n=1),{location:n,distance:l}},d=function(a,c,f,g){var h,i,j=[],k=[],l=[],m=[],n=0;i=Math.sgn(a[0].y);for(var o=1;o<=c;o++)h=Math.sgn(a[o].y),h!=i&&n++,i=h;switch(n){case 0:return 0;case 1:if(g>=64)return f[0]=(a[0].x+a[c].x)/2,1;var p,n=a[0].y-a[c].y;for(i=a[c].x-a[0].x,o=a[0].x*a[c].y-a[c].x*a[0].y,h=max_distance_below=0,p=1;p<c;p++){var q=n*a[p].x+i*a[p].y+o;q>h?h=q:q<max_distance_below&&(max_distance_below=q)}if(p=i,h=(1*(o-h)-0*p)*(1/(0*p-1*n)),p=i,i=o-max_distance_below,n=(1*i-0*p)*(1/(0*p-1*n)),i=Math.min(h,n),Math.max(h,n)-i<b)return l=a[c].x-a[0].x,m=a[c].y-a[0].y,f[0]=0+1*(l*(a[0].y-0)-m*(a[0].x-0))*(1/(0*l-1*m)),1}for(e(a,c,.5,j,k),a=d(j,c,l,g+1),c=d(k,c,m,g+1),g=0;g<a;g++)f[g]=l[g];for(g=0;g<c;g++)f[g+a]=m[g];return a+c},e=function(a,b,c,d,e){for(var f=[[]],g=0;g<=b;g++)f[0][g]=a[g];for(a=1;a<=b;a++)for(g=0;g<=b-a;g++)f[a]||(f[a]=[]),f[a][g]||(f[a][g]={}),f[a][g].x=(1-c)*f[a-1][g].x+c*f[a-1][g+1].x,f[a][g].y=(1-c)*f[a-1][g].y+c*f[a-1][g+1].y;if(null!=d)for(g=0;g<=b;g++)d[g]=f[g][0];if(null!=e)for(g=0;g<=b;g++)e[g]=f[b-g][g];return f[b][0]},f={},g=function(a){var b=f[a];if(!b){var b=[],c=function(a){return function(){return a}},d=function(){return function(a){return a}},e=function(){return function(a){return 1-a}},g=function(a){return function(b){for(var c=1,d=0;d<a.length;d++)c*=a[d](b);return c}};b.push(new function(){return function(b){return Math.pow(b,a)}});for(var h=1;h<a;h++){for(var i=[new c(a)],j=0;j<a-h;j++)i.push(new d);for(j=0;j<h;j++)i.push(new e);b.push(new g(i))}b.push(new function(){return function(b){return Math.pow(1-b,a)}}),f[a]=b}return b},h=function(a,b){for(var c=g(a.length-1),d=0,e=0,f=0;f<a.length;f++)d+=a[f].x*c[f](b),e+=a[f].y*c[f](b);return{x:d,y:e}},i=function(a,b,c){for(var d=h(a,b),e=0,f=c>0?1:-1,g=null;e<Math.abs(c);)b+=.005*f,g=h(a,b),e+=Math.sqrt(Math.pow(g.x-d.x,2)+Math.pow(g.y-d.y,2)),d=g;return{point:g,location:b}},k=function(a,b){var c=h(a,b),d=h(a.slice(0,a.length-1),b),e=d.y-c.y,c=d.x-c.x;return 0==e?1/0:Math.atan(e/c)};window.jsBezier={distanceFromCurve:c,gradientAtPoint:k,gradientAtPointAlongCurveFrom:function(a,b,c){return b=i(a,b,c),b.location>1&&(b.location=1),b.location<0&&(b.location=0),k(a,b.location)},nearestPointOnCurve:function(a,b){var d=c(a,b);return{point:e(b,b.length-1,d.location,null,null),location:d.location}},pointOnCurve:h,pointAlongCurveFrom:function(a,b,c){return i(a,b,c).point},perpendicularToCurveAt:function(a,b,c,d){return b=i(a,b,null==d?0:d),a=k(a,b.location),d=Math.atan(-1/a),a=c/2*Math.sin(d),c=c/2*Math.cos(d),[{x:b.point.x+c,y:b.point.y+a},{x:b.point.x-c,y:b.point.y-a}]},locationAlongCurveFrom:function(a,b,c){return i(a,b,c).location}}}(),function(){var a=function(a,b,c){this.MAILING_TYPE_ACTIONBASED=1,this.MAILING_TYPE_DATEBASED=2,this.MAILING_TYPE_FOLLOWUP=3,this.PARAM_MAILING_LIST=1,this.PARAM_TARGET_GROUPS=2,this.PARAM_ARCHIVE=3,this.PARAM_LIST_SPLIT=4,this.PARAM_PLANNED_DATE=5,this.PARAM_SEND_DATE=6,this.node={},this.mailingsStatus="all",this.defaultMailingsSort=a.defaultMailingsSort,this.defaultMailingsOrder=a.defaultMailingsOrder,this.mailingsSort=this.defaultMailingsSort,this.mailingsOrder=this.defaultMailingsOrder,this.formNameJId="form[name='"+a.form+"']",this.containerId=a.container,this.mailingType=a.mailingType,this.mailingTypesForLoading=a.mailingTypesForLoading,this.statusName=a.mailingStatus,this.selectName=a.selectName,this.selectNameJId="select[name="+a.selectName+"]",this.mailingId=0,this.showCreateEditLinks=a.showCreateEditLinks,this.dropDownEl=null,this.campaignManager=b,a.dropDownEl&&(this.dropDownEl=a.dropDownEl),this.isChangeDecisionOptions=a.isEnableTrackingVeto&&a.isFollowUpBaseMailing,this.followUpContainer=a.followUpContainer,this.advertisingAdditionalOptions=a.advertisingAdditionalOptions,this.advertisingUrl=a.advertisingUrl,this.nodesChain=[],this.mailingData={},this.configuredMailingData=null;var d=this,e=b.getEditorsHelper();this.fillEditorBase=function(a){this.node=a,this.mailingsStatus=$(this.formNameJId).find("input[checked=checked]").val()||"all",this.mailingsSort=this.defaultMailingsSort,this.mailingsOrder=this.defaultMailingsOrder,this.cleanOptions(),this.hideSendSettings(),this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)},this.cleanOptions=function(){this.setDefaultSortOptions(),jQuery(this.containerId+" #"+this.statusName+"_all").attr("checked","checked"),this.activateInputs(),this.setSelectMailingOptions(this.node.data[this.selectName]),this.getMailingsByWorkStatus(this.mailingsStatus,this.mailingsSort,this.mailingsOrder,this.node.data.mailingId);
},this.setDefaultSortOptions=function(){this.mailingsSort=this.defaultMailingsSort,this.mailingsOrder=this.defaultMailingsOrder,jQuery(this.containerId+" .arrowUp").hide(),jQuery(this.containerId+" .arrowDown").hide(),jQuery(this.containerId+" #shortname_sort").attr("press",1),jQuery(this.containerId+" #change_date_sort").attr("press",2),this.mailingType==this.MAILING_TYPE_ACTIONBASED||this.mailingType==this.MAILING_TYPE_DATEBASED?jQuery(this.containerId+" #shortname_sort .arrowUp").show():jQuery(this.containerId+" #change_date_sort .arrowDown").show()},this.onMailingsStatusChange=function(a){this.setSelectMailingOptions(0),this.getMailingsByWorkStatus(a,this.mailingsSort,this.mailingsOrder),this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)},this.onMailingSelectChange=function(a){this.setSelectMailingOptions(a),this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)},this.changeDecisionOptionsSet=function(a,b){if(b){var c=this.mailingId,d=$(a.find(this.followUpContainer)),e=this.advertisingAdditionalOptions,f=this.advertisingUrl;jQuery.ajax({action:"POST",url:f,data:{mailingId:c},success:function(a){if($(d.find(".advertisingOption")).remove(),a.isAdvertisingContentType){var b=AGN.Lib.Template.text("followupAdvertisingOptions",{items:e});d.append(b)}}})}},this.onMailingSortClick=function(a,b){jQuery(this.containerId+" .arrowUp").hide(),jQuery(this.containerId+" .arrowDown").hide();var c=jQuery(this.containerId+" .sort"),d=this.containerId+" #"+a+"_sort",e=jQuery(d),f=jQuery(d+" .arrowUp"),g=jQuery(d+" .arrowDown"),h=e.attr("press"),i=jQuery(this.formNameJId+" "+this.selectNameJId).val();if(h)switch(h){case"1":e.attr("press",2),g.show(),this.mailingsOrder="DESC";break;case"2":e.attr("press",1),f.show(),this.mailingsOrder="ASC"}else c.attr("press",2),e.attr("press",2),f.show(),this.mailingsOrder="ASC";this.getMailingsByWorkStatus(this.mailingsStatus,b,this.mailingsOrder,i)},this.setMailingId=function(a){this.mailingId=a,this.dropDownEl&&(this.mailingId>0?this.dropDownEl.show():this.dropDownEl.hide())},this.setSelectMailingOptions=function(a){this.setMailingId(a),this.showCreateEditLinks&&this.setMailingLinks(a)},this.setMailingLinks=function(a){var b="";b="0"!=a?'<span style="font-weight: bold;">'+t("workflow.mailing.tip")+': &nbsp;</span><a href="#" data-action="mailing-editor-edit">'+t("workflow.mailing.edit_mailing_link")+"</a> ":'<a href="#" class="setting-mailing-left" data-action="mailing-editor-new"> '+t("workflow.mailing.new")+"</a>";var c=jQuery(this.containerId+" #mailing_create_edit_link");c.html(""),c.append(b)},this.showSecurityQuestion=function(){if(this.setSecurityQuestion(),this.setIsUsedInCMAttr(),this.isSentMailing(this.mailingIsSent)||this.mailingIsUsedInCM){var a=this.getSelectedMailingOption();return $(this.containerId+"-security-dialog").dialog({title:'<span class="dialog-fat-title">'+a.html()+"</span>",dialogClass:"no-close",open:function(a,b){},width:650,modal:!0,resizable:!1}),!1}return!0},this.isSentMailing=function(a){return"mailing.status.sent"==a||"mailing.status.scheduled"==a||"mailing.status.norecipients"==a},this.cancelSecurityDialog=function(){jQuery(this.containerId+"-security-dialog").dialog("close")},this.getMailingsByWorkStatus=function(a,c,d,f){var g=this,h=$(this.formNameJId+" "+this.selectNameJId);h.attr("readonly","readonly"),jQuery.ajax({type:"POST",url:"workflow.do;jsessionid="+b.getSessionId(),data:{method:"getMailingsByWorkStatus",mailingTypes:this.mailingTypesForLoading.join(","),status:a,sort:c,order:d},success:function(b){h.empty(),h.append($("<option></option>",{value:0,text:t("workflow.defaults.no_mailing")})),b.forEach(function(a){var b=$("<option></option>",{value:a.MAILING_ID,text:a.SHORTNAME,selected:f==a.MAILING_ID});g.isSentMailing(a.WORK_STATUS)&&b.css("color","#808080"),b.attr({status:a.WORK_STATUS,senddate:a.SENDDATE}),b.data({status:a.WORK_STATUS,"send-date":a.SENDDATE,"dependent-campaigns":a.USEDINWORKFLOWS||""}),h.append(b)}),h.removeAttr("readonly"),g.mailingsStatus=a,g.mailingsSort=c,g.mailingsOrder=d,h.val(g.mailingId),e.initSelectWithValueOrChooseFirst(h,g.mailingId)}})},this.disableInputs=function(){jQuery(this.containerId+" [name='"+this.statusName+"']").attr("disabled","disabled")},this.activateInputs=function(){jQuery(this.containerId+" [name='"+this.statusName+"']").removeAttr("disabled")},this.setNodeFields=function(){var a=this.getSelectedMailingOption();this.setNodeFilled(a),this.setNodeIconTitle(a)},this.setNodeFilled=function(a){this.node.filled=!1,parseInt(this.mailingId,10)>0&&(this.node.filled=!0)},this.setNodeIconTitle=function(a){this.node.iconTitle="",parseInt(this.mailingId,10)>0&&(this.node.iconTitle=a.html())},this.setSecurityQuestion=function(){var a=this.getSelectedMailingOption();this.mailingIsSent="",parseInt(this.mailingId,10)>0&&(this.mailingIsSent=a.data("status"))},this.setIsUsedInCMAttr=function(){var a=this.getSelectedMailingOption(),b=a.data("dependent-campaigns"),c=a.val();if(this.mailingIsUsedInCM=!1,parseInt(this.mailingId,10)>0&&c==this.mailingId&&b){var d=this.campaignManager.workflowId||0,e=b.split(",");e.length>0&&(d>0?this.mailingIsUsedInCM=e.indexOf(d.toString())<0:this.mailingIsUsedInCM=!0)}},this.getSelectedMailingOption=function(){return jQuery(this.formNameJId+" "+this.selectNameJId+" option[value="+this.mailingId+"]")},this.getSelectedDecisionOption=function(){var a="decisionCriterion",b=jQuery(this.formNameJId+" select[name='"+a+"']").val();return jQuery(this.formNameJId+" select[name='"+a+"'] option[value="+b+"]")},this.createNewMailing=function(a){l({iconId:this.node.id,successCallback:f,forwardName:a,mailingEditorBase:this})};var f=function(a,b,d){if(a.hasMailingList){var f=[];f.push("mailingType="+d.mailingType),d.mailingType==d.MAILING_TYPE_FOLLOWUP&&(f.push("workflowFollowUpParentMailing="+d.node.data.baseMailingId),f.push("workflowFollowUpDecisionCriterion="+d.node.data.decisionCriterion)),e.processForward(b,d.formNameJId+" "+d.selectNameJId,[],c,f.join(";"))}else jQuery(d.containerId+" .editor-error-messages").html(t("error.workflow.notAddedMailingList")),jQuery(d.containerId+" .editor-error-messages").css("display","block")};this.processCopyAndEditMailingForward=function(a,b,d,f){jQuery("#forwardTargetItemId").val(a);var g=[];this.mailingType==this.MAILING_TYPE_FOLLOWUP&&(g.push("workflowFollowUpParentMailing="+this.node.data.baseMailingId),g.push("workflowFollowUpDecisionCriterion="+this.node.data.decisionCriterion)),g.length>0?e.processForward(b,d+" "+f,[],c,g.join(";")):e.processForward(b,d+" "+f,[],c)},this.editMailing=function(a){this.processCopyAndEditMailingForward(this.mailingId,a,this.formNameJId,this.selectNameJId)},this.copyMailing=function(a){this.processCopyAndEditMailingForward(this.mailingId,a,this.formNameJId,this.selectNameJId)},this.trySupplementNodes=function(a){var c=b.getIncomingChainsForIcon();if(c.length>0){var d=c[0];this.configuredMailingData=g(d),this.nodesChain=d,this.mailingData=a,h(this)}},this.checkDifferentMailingLists=function(a,c,d){var e=this;k(a,function(a){var f=b.getIncomingChainsForIcon()[0];e.configuredMailingData=g(f),e.nodesChain=f,e.mailingData=a;var h=0;f.forEach(function(a){a.type==AGN.Lib.WM.NodeFactory.NODE_TYPE_MAILING&&h++});var i=e.configuredMailingData.mailinglistId;h>1&&0!=i&&i!=a.mailinglistId?d(a):c(a)})};var g=function(a){for(var b={parameterValue:0,campaignId:0,mailinglistId:0,targets:[],date:null},c=a.length-1;c>=0;c--){var d=a[c].data;switch(a[c].type){case AGN.Lib.WM.NodeFactory.NODE_TYPE_PARAMETER:b.parameterValue=d.value;break;case AGN.Lib.WM.NodeFactory.NODE_TYPE_ARCHIVE:b.campaignId=d.campaignId;break;case AGN.Lib.WM.NodeFactory.NODE_TYPE_RECIPIENT:if(0==b.mailinglistId&&(b.mailinglistId=d.mailinglistId),null!==d.targets)for(var e=0;e<d.targets.length;e++)C(b.targets,d.targets[e])||b.targets.push(parseInt(d.targets[e]));break;case AGN.Lib.WM.NodeFactory.NODE_TYPE_START:d.date?(b.date=A(d.date),b.date.setHours(d.hour),b.date.setMinutes(d.minute)):b.date=null;break;case AGN.Lib.WM.NodeFactory.NODE_TYPE_DEADLINE:d.deadlineType==constants.deadlineTypeFixedDeadline?d.date?(b.date=A(d.date),b.date.setHours(d.hour),b.date.setMinutes(d.minute)):b.date=null:d.deadlineType==constants.deadlineTypeDelay&&null!=b.date&&(d.timeUnit==constants.deadlineTimeUnitMinute?b.date.setMinutes(b.date.getMinutes()+parseInt(d.delayValue)):d.timeUnit==constants.deadlineTimeUnitHour?b.date.setHours(b.date.getHours()+parseInt(d.delayValue)):d.timeUnit==constants.deadlineTimeUnitDay&&(b.date.setDate(b.date.getDate()+parseInt(d.delayValue)),(d.useTime||"true"==d.useTime)&&(b.date.setMinutes(b.date.getMinutes()+parseInt(d.minute)),b.date.setHours(b.date.getHours()+parseInt(d.hour)))))}}return b},h=function(){var a=i(d,!0);a.length>0?s(d):d.supplementNewOrUpdateExistingNodes()},i=function(a,b){var c=a.configuredMailingData,d=a.mailingData,e=[],f=[],g=[];0==d.mailinglistId?g.push(a.PARAM_MAILING_LIST):0==c.mailinglistId?e.push(a.PARAM_MAILING_LIST):c.mailinglistId!=d.mailinglistId&&(b?f.push(a.PARAM_MAILING_LIST):e.push(a.PARAM_MAILING_LIST));var h=c.targets,i=d.targetGroupIds;null==i||0==i.length?g.push(a.PARAM_TARGET_GROUPS):null==h||0==h.length?e.push(a.PARAM_TARGET_GROUPS):B(c,d)||(b?f.push(a.PARAM_TARGET_GROUPS):e.push(a.PARAM_TARGET_GROUPS));var k=a.getParameterValue(d.splitBase,d.splitPart);null==k?g.push(a.PARAM_LIST_SPLIT):0==c.parameterValue?e.push(a.PARAM_LIST_SPLIT):c.parameterValue!=k&&(b?f.push(a.PARAM_LIST_SPLIT):e.push(a.PARAM_LIST_SPLIT)),0==d.campaignId?g.push(a.PARAM_ARCHIVE):0==c.campaignId?e.push(a.PARAM_ARCHIVE):c.campaignId!=d.campaignId&&(b?f.push(a.PARAM_ARCHIVE):e.push(a.PARAM_ARCHIVE));var l=c.date,m=z(d),n=y(d);return null==m&&null==n?g.push(a.PARAM_PLANNED_DATE):null==l?null!=m?e.push(a.PARAM_PLANNED_DATE):e.push(a.PARAM_SEND_DATE):(A(m)>A(l)?b?f.push(a.PARAM_PLANNED_DATE):e.push(a.PARAM_PLANNED_DATE):m&&A(m)<A(l)&&g.push(a.PARAM_PLANNED_DATE),n>l?b?f.push(a.PARAM_SEND_DATE):e.push(a.PARAM_SEND_DATE):n&&n<l&&g.push(a.PARAM_SEND_DATE)),j(a,g),b?f:e},j=function(a,b){for(var c=a.configuredMailingData,d=a.mailingData,e=0;e<b.length;e++)switch(b[e]){case a.PARAM_MAILING_LIST:d.mailinglistId=c.mailinglistId;break;case a.PARAM_TARGET_GROUPS:d.targetGroupIds=c.targets;break;case a.PARAM_ARCHIVE:d.campaignId=c.campaignId;break;case a.PARAM_LIST_SPLIT:d.splitBase="",d.splitPart="";break;case a.PARAM_PLANNED_DATE:var f=A(c.date);f?d.planDate=f.getTime():d.planDate=0;break;case a.PARAM_SEND_DATE:d.sendDate=A(c.date),c.date&&(d.sendHour=c.date.getHours(),d.sendMinute=c.date.getMinutes())}},k=function(a,c){jQuery.ajax({type:"POST",url:"workflow.do;jsessionid="+b.getSessionId(),data:{method:"getMailingContent",mailingId:a},success:function(a){c(a)}})},l=function(a){function c(a){for(var b=Object.keys(j[a]||{}),c={};b.length>0;){var d=b;b=[];for(var e=0;e<d.length;e++){var f=d[e],g=i[f];if(g.type===AGN.Lib.WM.NodeFactory.NODE_TYPE_RECIPIENT)return g.mailinglistId>0;c[f]=!0,Object.keys(j[f]||{}).forEach(function(a){c[a]||b.push(a)})}}return!1}var d=a.iconId||e.curEditingNode.id,f=a.successCallback,g=a.forwardName,h=b.getIconsForSubmission(),i={},j={};h.forEach(function(a){i[a.id]=a,a.connections&&a.connections.forEach(function(b){var c=a.id,d=b.targetIconId;j[d]||(j[d]={}),j[d][c]=!0})}),f({hasMailingList:c(d)},g,a.mailingEditorBase)};this.closeTransferDialog=function(){jQuery(this.containerId+"-transfer-dialog").dialog("close")},this.transferMailingData=function(){var a=i(d,!0),b=[],c=d;jQuery(this.containerId+"-transfer-dialog input[name^=transfer]").each(function(){var d=jQuery(this);if(!d[0].checked){var e=null;switch(d.attr("name")){case"transferPlanedFor":e=c.PARAM_PLANNED_DATE;break;case"transferMailingList":e=c.PARAM_MAILING_LIST;break;case"transferTargetGroups":e=c.PARAM_TARGET_GROUPS;break;case"transferArchive":e=c.PARAM_ARCHIVE;break;case"transferListSplit":e=c.PARAM_LIST_SPLIT;break;case"transferDeliveryTime":e=c.PARAM_SEND_DATE}e&&C(a,e)&&b.push(e)}}),j(d,b),d.supplementNewOrUpdateExistingNodes(),this.closeTransferDialog()},this.transferRequiredMailingData=function(){var a=i(this,!0);j(this,a),this.supplementNewOrUpdateExistingNodes(),this.closeTransferDialog()},this.supplementNewOrUpdateExistingNodes=function(){var a=this,b=q(e.curEditingNode.usedAnchors,!1);this.nodesChain.length>1&&(b=r(e.curEditingNode,this.nodesChain[1]));for(var c=[AGN.Lib.WM.NodeFactory.NODE_TYPE_MAILING,AGN.Lib.WM.NodeFactory.NODE_TYPE_ACTION_BASED_MAILING,AGN.Lib.WM.NodeFactory.NODE_TYPE_DATE_BASED_MAILING,AGN.Lib.WM.NodeFactory.NODE_TYPE_FOLLOWUP_MAILING],d=0,f=1;f<a.nodesChain.length;f++)if(c.indexOf(a.nodesChain[f].type)>=0){d=f;break}var g=i(this,!1);d>0?this.supplementNodesBetweenMailings(g,d,b):this.supplementNodesBeforeMailing(g,b)},this.supplementNodesBetweenMailings=function(a,c,f){var g=d,h={x:e.curEditingNode.x,y:e.curEditingNode.y},i=[],j=g.mailingData;if(C(a,this.PARAM_LIST_SPLIT)){var k=AGN.Lib.WM.NodeFactory.NODE_TYPE_PARAMETER,l=c>0?c:g.nodesChain.length,m=[];this.updateExistingOrAddNewNodeForThanOneValue(k,l,h,f,m,i,function(a){a.data.value=g.getParameterValue(j.splitBase,j.splitPart)})}if(C(a,this.PARAM_ARCHIVE)){var k=AGN.Lib.WM.NodeFactory.NODE_TYPE_ARCHIVE,l=c>0?c:g.nodesChain.length,m=[AGN.Lib.WM.NodeFactory.NODE_TYPE_PARAMETER];this.updateExistingOrAddNewNodeForThanOneValue(k,l,h,f,m,i,function(a){a.data.campaignId=j.campaignId})}if(C(a,this.PARAM_MAILING_LIST)||C(a,this.PARAM_TARGET_GROUPS)){var k=AGN.Lib.WM.NodeFactory.NODE_TYPE_RECIPIENT,l=c>0?c:g.nodesChain.length,m=[AGN.Lib.WM.NodeFactory.NODE_TYPE_PARAMETER,AGN.Lib.WM.NodeFactory.NODE_TYPE_ARCHIVE];this.updateExistingOrAddNewNodeForThanOneValue(k,l,h,f,m,i,function(b){C(a,g.PARAM_MAILING_LIST)&&(b.data.mailinglistId=j.mailinglistId,b.isDependent=!0),C(a,g.PARAM_TARGET_GROUPS)&&(b.data.targets=j.targetGroupIds,b.data.targetsOption="ONE_TARGET_REQUIRED")})}if(C(a,this.PARAM_PLANNED_DATE)||C(a,this.PARAM_SEND_DATE)){var k=AGN.Lib.WM.NodeFactory.NODE_TYPE_DEADLINE,l=c>0?c:g.nodesChain.length,m=[AGN.Lib.WM.NodeFactory.NODE_TYPE_PARAMETER,AGN.Lib.WM.NodeFactory.NODE_TYPE_ARCHIVE,AGN.Lib.WM.NodeFactory.NODE_TYPE_RECIPIENT];this.updateExistingOrAddNewNodeForThanOneValue(k,l,h,f,m,i,function(b){if(C(a,g.PARAM_PLANNED_DATE)){b.data.date=z(g.mailingData);var c=g.configuredMailingData.date;c&&(b.data.date.setHours(c.getHours()),b.data.date.setMinutes(c.getMinutes()))}else C(a,g.PARAM_SEND_DATE)&&(b.data.date=y(g.mailingData));b.data.deadlineType=constants.deadlineTypeFixedDeadline,b.data.hour=b.data.date.getHours(),b.data.minute=b.data.date.getMinutes()})}var n=b.getCMNodes().getNodeIdPrefix();if(i.length>0){var q=b.getCurrentState();b.setCurrentState(b.STATE_AUTOMATICALLY_CREATING_CONNECTION);for(var r=0;r<i.length;r++)o(i[r].newNode,i[r].nextNodeId),o(b.getCMNodes().getNodeById(n+i[r].prevNodeId),i[r].newNode.id),p(i[r].newNode);b.setCurrentState(q)}},this.supplementNodesBeforeMailing=function(a,c){var f=d,g=v(this.nodesChain,a);if(this.nodesChain.length-1<g.length)for(var h=1;h<this.nodesChain.length;h++)b.deleteNode(b.getCMNodes().getNodeIdPrefix()+this.nodesChain[h].id,!0,!0);for(var i={x:e.curEditingNode.x,y:e.curEditingNode.y},j={nextNode:e.curEditingNode},k=!1,l=[],m=0;m<g.length;m++)switch(k=!1,g[m]){case AGN.Lib.WM.NodeFactory.NODE_TYPE_PARAMETER:for(var n=0;n<this.nodesChain.length;n++)if(this.nodesChain[n].type==AGN.Lib.WM.NodeFactory.NODE_TYPE_PARAMETER){k=!0;break}if(C(a,this.PARAM_LIST_SPLIT)||k){var q=this.updateExistingOrAddNewNode(j,i,c,AGN.Lib.WM.NodeFactory.NODE_TYPE_PARAMETER,function(b,c){c&&(b.data=c.data),C(a,f.PARAM_LIST_SPLIT)&&(b.data.value=f.getParameterValue(f.mailingData.splitBase,f.mailingData.splitPart),p(b))});q&&l.push(q)}break;case AGN.Lib.WM.NodeFactory.NODE_TYPE_ARCHIVE:for(var n=0;n<this.nodesChain.length;n++)if(this.nodesChain[n].type==AGN.Lib.WM.NodeFactory.NODE_TYPE_ARCHIVE){k=!0;break}if(C(a,this.PARAM_ARCHIVE)||k){var q=this.updateExistingOrAddNewNode(j,i,c,AGN.Lib.WM.NodeFactory.NODE_TYPE_ARCHIVE,function(b,c){c&&(b.data=c.data),C(a,f.PARAM_ARCHIVE)&&(b.data.campaignId=f.mailingData.campaignId,p(b))});q&&l.push(q)}break;case AGN.Lib.WM.NodeFactory.NODE_TYPE_RECIPIENT:for(var n=0;n<this.nodesChain.length;n++)if(this.nodesChain[n].type==AGN.Lib.WM.NodeFactory.NODE_TYPE_RECIPIENT){k=!0;break}if(C(a,this.PARAM_MAILING_LIST)||C(a,this.PARAM_TARGET_GROUPS)||k){var q=this.updateExistingOrAddNewNode(j,i,c,AGN.Lib.WM.NodeFactory.NODE_TYPE_RECIPIENT,function(b,c){c&&(b.data=c.data),C(a,f.PARAM_MAILING_LIST)&&(b.data.mailinglistId=f.mailingData.mailinglistId,p(b)),C(a,f.PARAM_TARGET_GROUPS)&&(b.data.targets=f.mailingData.targetGroupIds,b.data.targetsOption="ONE_TARGET_REQUIRED",p(b))});q&&l.push(q)}break;case AGN.Lib.WM.NodeFactory.NODE_TYPE_START:for(var n=0;n<this.nodesChain.length;n++)if(this.nodesChain[n].type==AGN.Lib.WM.NodeFactory.NODE_TYPE_START){k=!0;break}var r=b.getCMNodes().getNodesByType(AGN.Lib.WM.NodeFactory.NODE_TYPE_START);if(0==r.length&&this.mailingData.mailingType!=this.MAILING_TYPE_ACTIONBASED&&this.mailingData.mailingType!=this.MAILING_TYPE_DATEBASED&&(C(a,this.PARAM_PLANNED_DATE)||C(a,this.PARAM_SEND_DATE))||k){var q=this.updateExistingOrAddNewNode(j,i,c,AGN.Lib.WM.NodeFactory.NODE_TYPE_START,function(b,c){if(c&&(b.filled=c.filled,b.data=c.data),C(a,f.PARAM_PLANNED_DATE)){b.data.date=z(f.mailingData);var d=f.configuredMailingData.date;d&&(b.data.hour=d.getHours(),b.data.minute=d.getMinutes()),p(b)}else C(a,f.PARAM_SEND_DATE)&&(b.data.date=y(f.mailingData),b.data.hour=b.data.date.getHours(),b.data.minute=b.data.date.getMinutes(),p(b))});q&&l.push(q)}break;default:for(var n=0;n<this.nodesChain.length;n++)if(this.nodesChain[n].type==g[m]){k=!0;break}if(k){var q=this.updateExistingOrAddNewNode(j,i,c,g[m],function(a,b){b&&(a.data=b.data,p(a))});q&&l.push(q)}}if(l.length>0){var s=b.getCurrentState();b.setCurrentState(b.STATE_AUTOMATICALLY_CREATING_CONNECTION);for(var n=0;n<l.length;n++){o(l[n].node,l[n].nextNode.id);var t=!1;switch(l[n].node.type){case AGN.Lib.WM.NodeFactory.NODE_TYPE_PARAMETER:0!=l[n].node.data.value&&(t=!0);break;case AGN.Lib.WM.NodeFactory.NODE_TYPE_ARCHIVE:l[n].node.data.campaignId>0&&(t=!0);break;case AGN.Lib.WM.NodeFactory.NODE_TYPE_RECIPIENT:(l[n].node.data.mailinglistId>0||l[n].node.data.targets.length>0)&&(t=!0);break;case AGN.Lib.WM.NodeFactory.NODE_TYPE_START:null!=l[n].node.data.date&&(t=!0)}t?p(l[n].node):b.updateNode(l[n].node)}b.setCurrentState(s)}},this.updateExistingOrAddNewNode=function(a,c,d,e,f){for(var g=!1,h=!1,i=b.getCMNodes().getNodeIdPrefix(),j=0;j<this.nodesChain.length;j++)if(this.nodesChain[j].type==e){if(b.getCMNodes().getNodeById(i+this.nodesChain[j].id))return f(this.nodesChain[j],!1),g=!0,a.nextNode=this.nodesChain[j],null;h=this.nodesChain[j]}if(!g){var k=m(e,c,d,!0);h?f(k,h):f(k,!1);var l={nextNode:a.nextNode,node:k};a.nextNode=k}return l},this.updateExistingOrAddNewNodeForThanOneValue=function(a,c,e,f,g,h,i){for(var j=d,k=b.getCMNodes().getNodeIdPrefix(),l=!1,n=1;n<c;n++)if(j.nodesChain[n].type==a){i(j.nodesChain[n]),p(j.nodesChain[n]),l=!0;break}if(!l){var o=m(a,e,f,!0);i(o);for(var n=1;n<c;n++)if(g.indexOf(j.nodesChain[n].type)==-1||n==c-1)if(0==h.length){h.push({newNode:o,nextNodeId:j.nodesChain[n-1].id,prevNodeId:j.nodesChain[n].id});for(var q=b.getNodeOutgoingConnections(j.nodesChain[n]),r=0,s=q.length;r<s;r++)q[r].target==k+j.nodesChain[n-1].id&&b.deleteConnectionByIdsOfElements(q[r],!0)}else{var t=h[h.length-1];h.push({newNode:o,nextNodeId:t.newNode.id,prevNodeId:t.prevNodeId}),t.prevNodeId=o.id}}},this.closeOneMailinglistWarningDialog=function(){jQuery(this.containerId+"-oneMailinglistWarning-dialog").dialog("close")},this.acceptOneMailinglistPerCampaign=function(){this.closeOneMailinglistWarningDialog(),e.mailingSpecificSaveAfterMailinglistCheckModal(d)},this.validateEditor=function(a){var b=jQuery(this.containerId+" .editor-error-messages");b.html(""),b.css("display","none");var c=!1;if(jQuery(this.containerId+" .delivery-settings").length){var d=jQuery(this.containerId+" [name='maxRecipients']").val();parseInt(d)!=d?(b.html(t("error.workflow.wrongMaxRecipientsFormat")),c=!0):parseInt(d)<0?(b.html(t("error.workflow.maxRecipientsLessThanZero")),c=!0):parseInt(d)>1e9&&(b.html(t("error.workflow.maxRecipientsTooBig")),c=!0)}var f=jQuery(this.formNameJId+" "+this.selectNameJId);f.val()<=0&&(""!=b.html()&&b.html(b.html()+"<br>"),b.html(b.html()+t("error.workflow.noMailing")),c=!0),c?b.css("display","block"):a?a():e.saveCurrentEditor()},this.toggleSendSettings=function(a){"none"==jQuery("#sendSettings_"+a).css("display")?(jQuery("#sendSettingsToggle_"+a).removeClass("toggle_closed"),jQuery("#sendSettingsToggle_"+a).addClass("toggle_open")):(jQuery("#sendSettingsToggle_"+a).removeClass("toggle_open"),jQuery("#sendSettingsToggle_"+a).addClass("toggle_closed")),jQuery("#sendSettings_"+a).toggle("blind",200)},this.hideSendSettings=function(){jQuery(".wm-mailing-send-settings-link").removeClass("toggle_open"),jQuery(".wm-mailing-send-settings-link").addClass("toggle_closed"),jQuery(".wm-mailing-send-settings").css("display","none")},this.getParameterValue=function(a,b){if(a.length>4){for(var c=0;c<a.length/2;c++)if(c+1==b)return a.substring(2*c,2*(c+1))}else for(var c=0;c<a.length/2;c++)if(a.substring(2*c,2*(c+1))==b)return a.substring(2*c,2*(c+1));return null};var m=function(a,c,d,e){var f=null;do c=n(c,d),f=b.getCMNodes().addNode(a,c.x,c.y);while(f===!1&&e);return f},n=function(a,c){return c==b.getCMNodes().LEFT?a.x--:c==b.getCMNodes().RIGHT?a.x++:c==b.getCMNodes().TOP?a.y--:c==b.getCMNodes().BOTTOM&&a.y++,a},o=function(a,c){var d=b.getCMNodes().getNodeIdPrefix();a&&(b.connectNodes(d+a.id,d+c,!0),b.justifyNodeElement(a))},p=function(a){var b=e.curEditingNode;e.curEditingNode=a,e.curEditor=e.editors[a.type],e.curEditor.fillEditor(a),e.saveCurrentEditor(),e.curEditingNode=b},q=function(a,c){var d=b.getCMNodes().TOP,e=b.getCMNodes().LEFT;return c&&(d=b.getCMNodes().BOTTOM,e=b.getCMNodes().RIGHT),a.indexOf(e)==-1?e:a.indexOf(d)==-1?d:e},r=function(a,c){var d=c.x-a.x,e=c.y-a.y;return d>0&&e>=0&&d>=e||d>0&&e<0&&d>=e?b.getCMNodes().RIGHT:d<=0&&e<=0&&d<=e||d<0&&e>0&&d<=e?b.getCMNodes().LEFT:d>=0&&e>0&&d<e||d<0&&e>0&&d<e?b.getCMNodes().BOTTOM:d>=0&&e<0&&d>e||d<0&&e<0&&d>e?b.getCMNodes().TOP:void 0},s=function(a){jQuery(a.containerId+"-transfer-dialog").dialog({title:'<span class="dialog-fat-title">'+t("workflow.defaults.title")+"</span>",dialogClass:"no-close",open:function(b,c){u(a)},width:350,modal:!0,resizable:!1})};this.initOneMailinglistWarningDialog=function(a){jQuery(a.containerId+"-oneMailinglistWarning-dialog").dialog({title:'<span class="dialog-fat-title">'+a.getSelectedMailingOption().html()+"</span>",dialogClass:"no-close",width:350,modal:!0,resizable:!1})};var u=function(a){jQuery(a.containerId+"-transfer-dialog input[name^=transfer]").each(function(){var a=jQuery(this);a.parent().parent().hide()});for(var b=i(a,!0),c=!1,d=0;d<b.length;d++)switch(b[d]){case a.PARAM_MAILING_LIST:jQuery(a.containerId+"-transferMailingList").parent().parent().show(),c=!0;break;case a.PARAM_TARGET_GROUPS:jQuery(a.containerId+"-transferTargetGroups").parent().parent().show(),c=!0;break;case a.PARAM_ARCHIVE:jQuery(a.containerId+"-transferArchive").parent().parent().show(),c=!0;break;case a.PARAM_LIST_SPLIT:jQuery(a.containerId+"-transferListSplit").parent().parent().show(),c=!0;break;case a.PARAM_PLANNED_DATE:jQuery(a.containerId+"-transferPlanedFor").parent().parent().show(),c=!0;break;case a.PARAM_SEND_DATE:jQuery(a.containerId+"-transferDeliveryTime").parent().parent().show(),c=!0}1==c&&jQuery(a.containerId+"-transferAllSettings").parent().parent().show(),jQuery(a.containerId+"-transferAllSettings").unbind().click(function(){var b=jQuery(this).prop("checked");jQuery(a.containerId+"-transferArchive").prop("checked",b),jQuery(a.containerId+"-transferMailingList").prop("checked",b),jQuery(a.containerId+"-transferPlanedFor").prop("checked",b),jQuery(a.containerId+"-transferDeliveryTime").prop("checked",b),jQuery(a.containerId+"-transferListSplit").prop("checked",b),jQuery(a.containerId+"-transferTargetGroups").prop("checked",b)})},v=function(a,b){for(var c=d,e=[],f=[],g=1;g<a.length;g++){var h=a[g].type;switch(e.push(h),h){case AGN.Lib.WM.NodeFactory.NODE_TYPE_PARAMETER:case AGN.Lib.WM.NodeFactory.NODE_TYPE_ARCHIVE:case AGN.Lib.WM.NodeFactory.NODE_TYPE_RECIPIENT:case AGN.Lib.WM.NodeFactory.NODE_TYPE_START:break;default:f.push(h)}}return(C(e,AGN.Lib.WM.NodeFactory.NODE_TYPE_PARAMETER)||C(b,c.PARAM_LIST_SPLIT))&&f.push(AGN.Lib.WM.NodeFactory.NODE_TYPE_PARAMETER),(C(e,AGN.Lib.WM.NodeFactory.NODE_TYPE_ARCHIVE)||C(b,c.PARAM_ARCHIVE))&&f.push(AGN.Lib.WM.NodeFactory.NODE_TYPE_ARCHIVE),(C(e,AGN.Lib.WM.NodeFactory.NODE_TYPE_RECIPIENT)||C(b,c.PARAM_MAILING_LIST)||C(b,c.PARAM_TARGET_GROUPS))&&f.push(AGN.Lib.WM.NodeFactory.NODE_TYPE_RECIPIENT),(C(e,AGN.Lib.WM.NodeFactory.NODE_TYPE_START)||C(b,c.PARAM_PLANNED_DATE)||C(b,c.PARAM_SEND_DATE))&&f.push(AGN.Lib.WM.NodeFactory.NODE_TYPE_START),f},w=function(a){return void 0!=a.sendDate&&null!=a.sendDate&&null!=a.sendHour&&null!=a.sendMinute},x=function(a){return a.planDate>0},y=function(a){return w(a)?new Date(a.sendDate+"T"+a.sendHour+":"+a.sendMinute+":00"):null},z=function(a){return x(a)?new Date(a.planDate):null},A=function(a){return null==a?null:new Date(a.getFullYear(),a.getMonth(),a.getDate())},B=function(a,b){var c=a.targets,d=b.targetGroupIds;if(null==c&&null==d)return!0;if(c.length!=d.length)return!1;for(var e=0;e<d.length;e++)if(!C(c,d[e]))return!1;return!0},C=function(a,b){return a.indexOf(b)!=-1}};AGN.Lib.WM.MailingEditorBase=a}(),function(){var a=function(a,b,c,d,e,f){this.formNameJId="form[name='"+a+"']",this.container=b,this.pageContextSessionId=c,this.selectNameJId="select[name="+d+"]",this.defaultSortField="date",this.mailingId=0,this.noMailingOption=e,this.editorsHelper=f,this.cleanOptions=function(a){void 0==a&&(a=0),jQuery(this.container+" .sort").prop("press",a),this.onMailingSortClick(this.defaultSortField)},this.onMailingSelectChange=function(a){},this.onMailingSortClick=function(a){jQuery(this.container+" .arrowUp").hide(),jQuery(this.container+" .arrowDown").hide();var b=jQuery(this.container+" .sort"),c=this.container+" #"+a+"_sort",d=jQuery(c),e=jQuery(c+" .arrowUp"),f=jQuery(c+" .arrowDown"),g=parseInt(d.prop("press")),h="asc";switch(b.prop("press",0),g){case 0:d.prop("press",1),e.show(),h="asc";break;case 1:d.attr("press",2),f.show(),h="desc";break;case 2:d.prop("press",1),e.show(),h="asc"}this.getAllMailingSorted(a,h)},this.setMailingId=function(a){this.mailingId=a},this.getAllMailingSorted=function(a,b){var c=this,d=jQuery(this.formNameJId+" "+this.selectNameJId),e=d.val();null!=e&&(c.mailingId=e),d.attr("readonly","readonly"),jQuery.ajax({type:"POST",url:"workflow.do;jsessionid="+this.pageContextSessionId,data:{method:"getAllMailingSorted",sortField:a,sortDirection:b},success:function(a){d.html(""),c.noMailingOption&&d.append('<option value="0">'+t("workflow.defaults.no_mailing")+"</option>");for(var b=0;b<a.length;b++)d.append("<option  value='"+a[b].mailingID+"'>"+a[b].shortname+"</option>");d.removeAttr("readonly"),0==c.mailingId&&0==c.noMailingOption&&a.length>0?d.val(a[0].mailingID):d.val(c.mailingId),f.initSelectWithValueOrChooseFirst(d,d.val())}})},this.getSelectedMailingOption=function(){return jQuery(this.formNameJId+" "+this.selectNameJId+" option[value="+this.mailingId+"]")}};AGN.Lib.WM.MailingSelectorBase=a}(),function(){function a(a){this.rules=a}var b=AGN.Lib.Helpers;a.prototype.isConstraint=function(a){return _.isBoolean(a)||_.isFunction(a)},a.prototype.evaluate=function(a,b,c,d){return a===!0||a===!1?a:$.isFunction(a)?a(b,c,d):void 0},a.prototype.getRulesToCheck=function(a,b){return[{from:a.type,to:[b.type,"*"]},{from:"*",to:[b.type,"*"]}]},a.prototype.getRelevantConstraints=function(a,b){var c=this.isConstraint,d=this.getRulesToCheck(a,b),e=this.rules,f=[];return d.forEach(function(a){var b=!0;if(_.has(e,a.from)){var d=e[a.from];c(d)?(f.push(d),b=!1):a.to.forEach(function(g){_.has(e[a.from],g)&&(d=e[a.from][g],c(d)&&(f.push(d),b=!1))})}b&&"*"!=a.from&&f.push(!1)}),f},a.prototype.check=function(a,b,c){for(var d=this.getRelevantConstraints(a,b),e=!1,f=0;f<d.length;f++){if(!this.evaluate(d[f],a,b,c))return!1;e=!0}return e};var c=function(c){var d=AGN.Lib.WM.NodeFactory;this.IS_ACTION_BASED=!1,this.IS_DATE_BASED=!1,this.STATE_WAITING=0,this.STATE_DRAGGING_STAGE_WAIT_MOUSE=1,this.STATE_DRAGGING_STAGE=2,this.STATE_SELECTING_NODES=3,this.STATE_CREATING_NODE=4,this.STATE_CREATING_CONNECTION=5,this.STATE_SPACE_RESTORED=6,this.STATE_EXPANDING_ICONS_SET=7,this.STATE_AUTOMATICALLY_CREATING_CONNECTION=8,this.Z_INDEX_VIEW_PORT=10,this.Z_INDEX_ICON_PANEL=50,this.Z_INDEX_DRAGGABLE_BUTTON=60,this.Z_INDEX_ICON_NODE=10,this.Z_INDEX_CONNECT_RAPID_BUTTON=20,this.Z_INDEX_JSPLUMB_DRAG_OPTIONS=25,this.Z_INDEX_NAVIGATOR_GLOBE=30,this.Z_INDEX_NAVIGATOR_ARROWS=31,this.Z_INDEX_CONTEXT_MENU=40,this.CONNECTION_CONSTRAINTS={"*":{deadline:function(a,b,c){return!b.connections.incoming.some(function(a){return a.source in c&&"import"==c[a.source].type})},mailing:function(a,b){return 0==b.connections.incoming.length},datebased_mailing:function(a,b){return 0==b.connections.incoming.length}},start:{recipient:!0,form:!0,import:!0,export:!0},stop:!1,decision:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0},parameter:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0},deadline:{decision:!0,parameter:!0,report:!0,recipient:!0,archive:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0},report:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,archive:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0},recipient:{decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0},actionbased_mailing:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},datebased_mailing:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},followup_mailing:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},mailing:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},archive:{decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0},form:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0},import:{deadline:function(a){return 0==a.connections.outgoing.length}},export:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0,archive:!0,form:!0}};var e=this;this.workflowId=c.workflowId,this.pageContextSessionId=c.pageContextSessionId,this.isActivated=c.isActivated,this.isPdf=c.isPdfGenerating;var f="viewPort",g=jQuery("#"+f),h=g.get(0).clientWidth,i=g.get(0).clientHeight,j="editorCanvas",k=0,l=0,m=h,n=i,o=jQuery('<div id="'+j+'"></div>').appendTo("#"+f).css({position:"absolute",left:k,top:l,width:m,height:n}),p=0,q=0,r="bounder",s=c.editorPositionLeft,u=c.editorPositionTop,v=c.localeDateNTimePattern,w=!1,x=!1,y=c.noContextMenu,z=jQuery('<div id="'+r+'"></div>').appendTo("#"+j).css({position:"absolute"}),A="navigatorBody",B=jQuery('<div id="'+A+'"></div>').insertAfter("#"+f),C=c.campaignManagerSettings,D=c.restoreSpaceFields,E=c.campaignManagerScale,F=c.allUsedEntity,G=new AGN.Lib.WM.CampaignManagerNodes({
nodesContainerDOMId:r,localeDateNTimePattern:v,campaignManagerScale:E,campaignManager:e,nodeFactory:d,allUsedEntity:F}),H=new AGN.Lib.WM.EditorsHelper(e,d,C),I=new AGN.Lib.WM.AutoLayout(C),J=new AGN.Lib.WM.ChainProcessor({campaignManager:e,pageContextSessionId:this.pageContextSessionId,editorsHelper:H,nodeFactory:d}),K=this.STATE_WAITING,L=[],M=E.getCurrentScaleSliderPosition(),N=!1,O="",P=[],Q=null,R=null,S=null,T=!1,U=null,V=new AGN.Lib.WM.CommentControls(e,c);updateBoundNodesVariables=function(){var a=G.normalizeNodes();a.collapsedX&&(s-=a.collapsedX*E.getScaledGridSize()),a.collapsedY&&(u-=a.collapsedY*E.getScaledGridSize()),s<0&&(s=0);var b=G.getNodes();for(var c in b)G.updateNodeView(b[c],E,F.allMailings);var d,e,f,g=!1,h=!1,i=!1;for(c in b)f=parseInt(b[c].elementJQ.find("div.icon-extra-info").css("top")),d=parseInt(b[c].element.style.left)+parseInt(b[c].element.style.width),e=parseInt(b[c].element.style.top)+parseInt(b[c].element.style.height),(g===!1||g<d)&&(g=d),(h===!1||h<f)&&(h=f),(i===!1||i<e)&&(i=e);u<0&&(u=h?h:0),w=g,x=i},updateBoundNodesDOM=function(){z.css({left:s,top:u,width:w+E.getScaledGridSize(),height:x+E.getScaledGridSize()})},updateEditorCanvas=function(){updateBoundNodesVariables();var a=0,b=0,c=parseInt(o.css("left")),d=parseInt(o.css("top"));s=parseInt(s)+c,s<=0&&(a+=-s,p+=-s,s=0),u=parseInt(u)+d,u<=0&&(b+=-u,q+=-u,u=0),o.css({left:0,top:0,width:h+p,height:i+q}),g.scrollLeft(g.scrollLeft()+a),g.scrollTop(g.scrollTop()+b);var e=0;s-g.scrollLeft()>0?(e=g.scrollLeft(),s-=g.scrollLeft()):g.scrollLeft()-s>E.getScaledGridSize()&&(e=s,s=0),p-=e;var f=0;u-g.scrollTop()>0?(f=g.scrollTop(),u-=g.scrollTop()):g.scrollTop()-u>E.getScaledGridSize()&&(f=u,u=0),q-=f;var j=g.scrollLeft(),k=g.scrollTop();o.css({width:h+p,height:i+q}),g.scrollLeft(j-e),g.scrollTop(k-f);var l;l=g.scrollLeft()+h<w?h+p-w:h+p-g.scrollLeft()-h,p-=l;var m;m=g.scrollTop()+i<x?i+q-x:i+q-g.scrollTop()-i,q-=m,o.css({width:h+p,height:i+q}),updateBoundNodesDOM()},resetJsPlumber=function(){N?N.reset():(N=jsPlumb.getInstance(),N.bind("beforeDrop",function(a){if(!e.checkActivation())return e.connectIntermediateNodes(a.sourceId,a.targetId)})),N.bind("ready",function(){var a=[[.5,.6,0,1],[.5,.4,0,-1],[.6,.5,1,0],[.4,.5,-1,0]];N.setRenderMode(C.renderMode),N.importDefaults({Anchors:[a,a],DragOptions:{cursor:"pointer",zIndex:e.Z_INDEX_JSPLUMB_DRAG_OPTIONS},Endpoints:["Blank","Blank"],Connector:["Flowchart",{stub:5,gap:0,midpoint:.5}],PaintStyle:{strokeStyle:C.lineColor,lineWidth:E.getLineWidth()},ConnectionOverlays:[["PlainArrow",{width:E.getArrowWidth(),length:E.getArrowLength(),location:.52,id:"arrow"}]]}),N.draggable(jQuery(G.getIconNodesSelector()),getJSPlumbDraggableProperties()),G.resetUsedAnchors();for(var b=0;b<L.length;b++){var c=N.connect(L[b]);processJSPlumbConnection(c)}N.bind("jsPlumbConnection",function(a){e.connectNodes(a.sourceId,a.targetId,!1)||resetJsPlumber(),e.getCurrentState()!=e.STATE_AUTOMATICALLY_CREATING_CONNECTION&&updateEditorCanvas(),updateNodeAdditionalViewElements(),e.getCurrentState()!=e.STATE_AUTOMATICALLY_CREATING_CONNECTION&&updateEditorCanvas()})})},processJSPlumbConnection=function(a){for(var b={},c=0;c<a.endpoints.length;c++){var d=a.endpoints[c];b.hasOwnProperty(d.elementId)||(b[d.elementId]=[]),.5==d.anchor.x&&.6==d.anchor.y?jQuery.inArray(G.BOTTOM,b[d.elementId])==-1&&b[d.elementId].push(G.BOTTOM):.5==d.anchor.x&&.4==d.anchor.y?jQuery.inArray(G.TOP,b[d.elementId])==-1&&b[d.elementId].push(G.TOP):.6==d.anchor.x&&.5==d.anchor.y?jQuery.inArray(G.RIGHT,b[d.elementId])==-1&&b[d.elementId].push(G.RIGHT):.4==d.anchor.x&&.5==d.anchor.y&&jQuery.inArray(G.LEFT,b[d.elementId])==-1&&b[d.elementId].push(G.LEFT)}var e=G.getNodes();for(var c in e)b.hasOwnProperty(e[c].elementJQ.attr("id"))&&(e[c].usedAnchors=e[c].usedAnchors.concat(b[e[c].elementJQ.attr("id")]),jQuery.unique(e[c].usedAnchors))},rearrangeStage=function(){jQuery("#connectRapidButton").width(C.rapidButtonSize*E.getCurrentScale()),jQuery("#connectRapidButton").height(C.rapidButtonSize*E.getCurrentScale()),updateEditorCanvas(),resetJsPlumber(),updateNodeAdditionalViewElements()},updateNodeAdditionalViewElements=function(){var a=G.getNodes();for(var b in a)G.updateNodeAdditionalViewElements(a[b],E)},connectSelectedNodes=function(){var a=e.needSaveSnapshot;e.needSaveSnapshot=!1,e.saveSnapshot();var b=AGN.Lib.WM.CampaignManagerSelection.getSelected(),c=null,d=!1,f=b.slice(0);return f.sort(function(a,b){var c=G.getNodeById(a),d=G.getNodeById(b);return c.x<d.x?-1:c.x>d.x?1:c.y<d.y?-1:c.y>d.y?1:0}),jQuery.each(f,function(a,b){null!=c&&(e.connectNodes(c,b,!0),d=!0),c=b}),AGN.Lib.WM.CampaignManagerSelection.prevSelected=null,e.needSaveSnapshot=a,d},getCanvasOffsetX=function(){return jQuery("#toolbarLeft").offset().left+jQuery("#toolbarLeft").width()-g.scrollLeft()},getCanvasOffsetY=function(){return jQuery("#toolbarTop").offset().top+jQuery("#toolbarTop").height()-g.scrollTop()},justifyNodeElement=function(a){N.draggable(a.element,getJSPlumbDraggableProperties()),V.addCommentEllipsis(a),jQuery(a.elementJQ).click(function(a){if(K==e.STATE_WAITING||e.STATE_SPACE_RESTORED){var b=jQuery(this);b.hasClass("preventClickAfterDrop")?b.removeClass("preventClickAfterDrop"):AGN.Lib.WM.CampaignManagerSelection.handleClick(a,jQuery(this))}}).mouseover(Z).mouseout(_).mousemove(ca).dblclick(function(b){a.data.editable!==!1?e.editNode(a,!0):"function"==typeof S&&S()})},getJSPlumbDraggableProperties=function(){var a,b,c=!1,d=!1;return{distance:jQuery.browser.msie&&jQuery.browser.version<9?5:10,start:function(c,d){var e=!1;a=AGN.Lib.WM.CampaignManagerSelection.getSelected(),U=b;for(var f=0;f<a.length;f++)if(a[f]==d.helper.attr("id")){e=!0;break}for(e||(AGN.Lib.WM.CampaignManagerSelection.clear(),AGN.Lib.WM.CampaignManagerSelection.select(d.helper)),a=AGN.Lib.WM.CampaignManagerSelection.getSelected(),b=[],f=0;f<a.length;f++){var g=document.getElementById(a[f]);b[f]={DOMElement:g,left:parseInt(g.style.left),top:parseInt(g.style.top)}}},drag:function(a,e){V.hidePopover(!0);for(var f=e.position.left-e.originalPosition.left,g=e.position.top-e.originalPosition.top,h=0;h<b.length;h++)e.helper.get(0)!=b[h].DOMElement&&(b[h].DOMElement.style.left=b[h].left+f+"px",b[h].DOMElement.style.top=b[h].top+g+"px");if(AGN.Lib.WM.CampaignManagerSelection.selected.length>1){var i=function(){try{N.repaint(AGN.Lib.WM.CampaignManagerSelection.selected)}finally{if(d){var a=d;d=!1,c=setTimeout(a,50)}else c=!1}};d=i,c||(d=!1,c=setTimeout(i,50))}},stop:function(a,c){U=null;for(var d=!1,f=0;f<b.length;f++)if(b[f].x=E.pxToCoordinate(parseInt(b[f].DOMElement.style.left)),b[f].y=E.pxToCoordinate(parseInt(b[f].DOMElement.style.top)),!G.isEmptyCell(b[f].x,b[f].y,b)){d=!0;break}if(!d)for(e.saveSnapshot(),f=0;f<b.length;f++){var g=G.getNodes()[jQuery(b[f].DOMElement).data("index")];G.updateNode(g.id,{x:b[f].x,y:b[f].y})}rearrangeStage(),c.helper.addClass("preventClickAfterDrop")}}};var W=void 0,X=function(a,b){return a===b||a.screenX==b.screenX&&a.screenY==b.screenY},Y=function(){var a,b;return{distance:10,start:function(c,d){a=c.pageX,b=c.pageY,ia(),K=e.STATE_SELECTING_NODES},stop:function(c,d){var f=c.pageX,g=c.pageY;if(f<a){var h=a;a=f,f=h}g<b&&(h=b,b=g,g=h);var i=E.getScaledGridSize()/2,j=G.getNodesFromRegion(E.pxToCoordinate(a-i-getCanvasOffsetX()-s),E.pxToCoordinate(b-i-getCanvasOffsetY()-u),E.pxToCoordinate(f-i-getCanvasOffsetX()-s),E.pxToCoordinate(g-i-getCanvasOffsetY()-u),0);AGN.Lib.WM.CampaignManagerSelection.validateMultiselection(c);for(ha in j)AGN.Lib.WM.CampaignManagerSelection.select(jQuery(j[ha].element));K=e.STATE_WAITING,W=c.originalEvent.originalEvent}}},Z=function(){if(K==e.STATE_WAITING){var a=$(this),b=G.getNodeById(a.attr("id"));aa(a,b),V.showCommentPopover(b)}},_=function(){K==e.STATE_WAITING&&(ba(),V.hideCommentPopover())},aa=function(a,b){N.unmakeEverySource(),jQuery(a).append(jQuery("#connectRapidButton")),jQuery("#connectRapidButton").offset({top:jQuery(a).offset().top,left:jQuery(a).offset().left+jQuery(a).width()-jQuery("#connectRapidButton").width()}),jQuery("#connectRapidButton").css("visibility","visible"),N.makeSource(jQuery("#connectRapidButton"),{parent:jQuery(a),dragOptions:{start:function(a,b){ia(),K=e.STATE_CREATING_CONNECTION},stop:function(a,b){K=e.STATE_WAITING,ba()}}}),N.makeTarget(jQuery(G.getIconNodesSelector()),{dropOptions:{hoverClass:"hover"}})},ba=function(){N.unmakeEverySource(),N.unmakeEveryTarget(),jQuery("#connectRapidButton").css("visibility","hidden")},ca=function(){K==e.STATE_WAITING&&jQuery(this).attr("id")!=jQuery("#connectRapidButton").parent().attr("id")&&(jQuery(this).append(jQuery("#connectRapidButton")),jQuery("#connectRapidButton").css("visibility","visible"))},da=function(){$("#invisible").append($("#connectRapidButton"))};this.needSaveSnapshot=!0,this.extendAllUsedEntities=function(a){$.extend(!0,F,a)},this.noSnapshot=function(a){var b=e.needSaveSnapshot;try{e.needSaveSnapshot=!1,a()}finally{e.needSaveSnapshot=b}},this.getBoundNodesDOM=function(){return{left:z.css("left"),top:z.css("top"),width:z.css("width"),height:z.css("height")}},this.getCurrentState=function(){return K},this.setCurrentState=function(a){K=a},this.isConnectionAllowed=function(c,f){if(!c||!f||c==f)return!1;var g=new a(e.CONNECTION_CONSTRAINTS),h=G.getNodesMap(),i=h[c],j=h[f],k={node:i,type:i.type,connections:{}},l={node:j,type:j.type,connections:{}};return Object.defineProperty(k.connections,"incoming",{get:b.caching(e.getNodeIncomingConnections,e,i)}),Object.defineProperty(k.connections,"outgoing",{get:b.caching(e.getNodeOutgoingConnections,e,i)}),Object.defineProperty(l.connections,"incoming",{get:b.caching(e.getNodeIncomingConnections,e,j)}),Object.defineProperty(l.connections,"outgoing",{get:b.caching(e.getNodeOutgoingConnections,e,j)}),k.type!=d.NODE_TYPE_STOP||this.nodeHasIncomingConnections(k.node)||(k.type=d.NODE_TYPE_START),l.type!=d.NODE_TYPE_START||this.nodeHasOutgoingConnections(l.node)||(l.type=d.NODE_TYPE_STOP),g.check(k,l,h)?(i.type==d.NODE_TYPE_STOP&&(i.type=d.NODE_TYPE_START),j.type==d.NODE_TYPE_START&&(j.type=d.NODE_TYPE_STOP),!0):("function"==typeof R&&R(),!1)},this.connectNodes=function(a,b,c){for(var d=!1,f=0;f<L.length;f++){var g=L[f];if(g.source==a&&g.target==b||g.source==b&&g.target==a){d=!0;break}}if(!d&&e.isConnectionAllowed(a,b)){var h={source:a,target:b};e.needSaveSnapshot&&this.saveSnapshot(),L.push(h),c&&processJSPlumbConnection(N.connect(h)),J.updateParameterValueAfterDecision()}},this.connectIntermediateNodes=function(a,b){if(T){var c=E.pxToCoordinate(E.getScaledNodeSize()),d=G.getNodeById(a),f=G.getNodeById(b),g=Math.abs(f.x-d.x),h=Math.abs(f.y-d.y),i={x1:0,y1:0,x2:0,y2:0};g>=h?(i.x1=Math.min(d.x,f.x)+c,i.y1=Math.min(d.y,f.y),i.x2=Math.max(d.x,f.x),i.y2=Math.max(d.y,f.y)+c):(i.x1=Math.min(d.x,f.x),i.y1=Math.min(d.y,f.y)+c,i.x2=Math.max(d.x,f.x)+c,i.y2=Math.max(d.y,f.y));var j=G.getNodesFromRegion(i.x1,i.y1,i.x2,i.y2,0);j[d.id]=d,j[f.id]=f;var k=[];for(var l in j)k.push(j[l]);k.sort(function(a,b){return g>=h&&d.x<=f.x?a.x-b.x:g>=h&&d.x>f.x?b.x-a.x:g<=h&&d.y<=f.y?a.y-b.y:g<=h&&d.y>f.y?b.y-a.y:void 0});var m=e.getConnectionNotAllowedCallback();k.length>2&&e.setConnectionNotAllowedCallback(function(){});var n=null;return jQuery.each(k,function(a,b){null!=n&&e.connectNodes(G.getNodeIdPrefix()+n.id,G.getNodeIdPrefix()+b.id,!0),n=b}),e.setConnectionNotAllowedCallback(m),!1}return e.isConnectionAllowed(a,b)},this.deleteSelectedNode=function(){var a=!0,b=AGN.Lib.WM.CampaignManagerSelection.getSelected();jQuery.each(b,function(b,c){var d=G.getNodeById(c);null!=d&&(a&&(e.saveSnapshot(),a=!1),e.deleteNode(c,!1,!0))}),AGN.Lib.WM.CampaignManagerSelection.clear(),rearrangeStage(),e.restoreCampaignActionsType(),J.updateParameterValueAfterDecision(),this.callWorkflowManagerStateChangedCallback()},this.deleteNode=function(a,b,c){if(1!=c||!e.checkActivation()){da();var f=G.getNodesMap(),g=[a];if(f[a])switch(f[a].type){case d.NODE_TYPE_DEADLINE:e.getIncomingConnectionsById(a).forEach(function(a){var b=f[a.source];b&&b.type==d.NODE_TYPE_IMPORT&&g.push(b.element.id)});break;case d.NODE_TYPE_IMPORT:e.getOutgoingConnectionsById(a).forEach(function(a){var b=f[a.target];b&&b.type==d.NODE_TYPE_DEADLINE&&g.push(b.element.id)})}L=L.filter(function(a){return g.indexOf(a.source)<0&&g.indexOf(a.target)<0}),g.forEach(function(a){G.deleteNode(a)}),b===!0&&rearrangeStage()}},this.deleteConnection=function(a){if(!e.checkActivation()){var b=a.source.attr("id"),c=a.target.attr("id"),f=G.getNodeById(b),g=G.getNodeById(c);f.type==d.NODE_TYPE_IMPORT&&g.type==d.NODE_TYPE_DEADLINE||(this.saveSnapshot(),L=L.filter(function(a){return!(a.source==b&&a.target==c||a.source==c&&a.target==b)}),rearrangeStage(),J.updateParameterValueAfterDecision())}},this.deleteConnectionByHtmlElement=function(a){for(var b=N.getConnections(),c=0;c<b.length;c++)if(b[c].canvas==a){e.deleteConnection(b[c]);break}},this.deleteConnectionByIdsOfElements=function(a,b){for(var c=[],d=0;d<L.length;d++)L[d].source==a.source&&L[d].target==a.target||L[d].source==a.target&&L[d].target==a.source||c.push(L[d]);L=c,1==b&&rearrangeStage()},this.getConnectionsFromSelected=function(a){var b=[];return jQuery.each(a,function(a,c){jQuery.each(e.getIncomingConnectionsById(c),function(a,c){jQuery.inArray(c,b)==-1&&b.push(c)}),jQuery.each(e.getOutgoingConnectionsById(c),function(a,c){jQuery.inArray(c,b)==-1&&b.push(c)})}),b},this.getNodesFromSelected=function(a){return jQuery.map(a,function(a){return G.getNodeById(a)})},this.deleteConnections=function(a){jQuery.each(a,function(a,b){e.deleteConnectionByIdsOfElements(b,!1)}),rearrangeStage()},this.deleteAllNodes=function(a){var b=G.getNodes();for(var c in b)this.deleteNode(b[c].elementJQ.attr("id"),a,!0)},this.getSessionId=function(){return this.pageContextSessionId},this.getEditorsHelper=function(){return H},this.setCampaignActionsType=function(a){"actionbased_mailing"==a.type&&(e.IS_ACTION_BASED=!0),"datebased_mailing"==a.type&&(e.IS_DATE_BASED=!0)},this.restoreCampaignActionsType=function(){var a=G.getNodes();e.IS_ACTION_BASED=!1,e.IS_DATE_BASED=!1;for(var b in a)e.setCampaignActionsType(a[b]);e.restoreStopsTitles()},this.isNormalCampaignActionsType=function(){return!e.IS_ACTION_BASED&&!e.IS_DATE_BASED},this.restoreStopsTitles=function(){var a=G.getNodes(),b=e.isNormalCampaignActionsType()?t("workflow.stop.automatic_end"):t("workflow.stop.open_end");for(var c in a){var d=a[c];if(d.data.endType==constants.endTypeAutomatic){d.elementJQ.find(".icon-extra-info").remove(),d.elementJQ.append("<div class='icon-extra-info'>"+b+"</div>");var f=90*E.getCurrentScale(),g=G.getIconExtraInfoPosition(d,E),h=g.top,i=g.left;d.elementJQ.find("div.icon-extra-info").css("font-size",f+"%"),d.elementJQ.find("div.icon-extra-info").css("top",h+"px"),d.elementJQ.find("div.icon-extra-info").css("left",i+"px")}}},this.getIncomingConnectionsById=function(a){for(var b=[],c=0;c<L.length;c++)L[c].target==a&&b.push(L[c]);return b},this.getNodeIncomingConnections=function(a){return e.getIncomingConnectionsById(a.elementJQ.attr("id"))},this.getOutgoingConnectionsById=function(a){for(var b=[],c=0;c<L.length;c++)L[c].source==a&&b.push(L[c]);return b},this.getNodeOutgoingConnections=function(a){return e.getOutgoingConnectionsById(a.elementJQ.attr("id"))},this.clearLabelConnection=function(a){for(var b=e.getNodeOutgoingConnections(a),c=0;c<b.length;c++)for(var d=N.getConnections(),f=0;f<d.length;f++)if(d[f].source[0].id==b[c].source&&d[f].target[0].id==b[c].target){var g=d[f].getOverlay("label");null!=g&&(jQuery("#"+g.canvas.id).remove(),d[f].removeOverlay("label"));break}},this.updateLabelConnection=function(a){if(a.data.decisionType==constants.decisionTypeDecision||a.data.decisionType==constants.decisionTypeAutoOptimization){e.clearLabelConnection(a);var b=e.getNodeOutgoingConnections(a);if(a.data.decisionType==constants.decisionTypeDecision&&2==b.length){var c=t("workflow.defaults.yes"),d=t("workflow.defaults.no");void 0!=a.statisticsList&&(c+=": <span class='node-stats'>"+a.statisticsList[0]+"</span>",d+=": <span class='node-stats'>"+a.statisticsList[1]+"</span>");var f=e.getConnectionObject(b[0]);if(null==f)return;var g=e.getConnectionObject(b[1]),h=G.getNodeById(b[0].target),i=G.getNodeById(b[1].target),j=h.x-i.x,k=h.y-i.y,l=Math.abs(j)<Math.abs(k)?"top":"right",m=Math.abs(j)<Math.abs(k)?"bottom":"left";a.y>=h.y&&a.y>=i.y?h.y<i.y?(e.setLabelToConnection(f,c,l),e.setLabelToConnection(g,d,m)):h.y>i.y?(e.setLabelToConnection(f,d,m),e.setLabelToConnection(g,c,l)):h.x<i.x?(e.setLabelToConnection(f,c,l),e.setLabelToConnection(g,d,m)):(e.setLabelToConnection(f,d,m),e.setLabelToConnection(g,c,l)):a.y<h.y&&a.y<i.y?h.x<i.x?(e.setLabelToConnection(f,d,m),e.setLabelToConnection(g,c,l)):(e.setLabelToConnection(f,c,l),e.setLabelToConnection(g,d,m)):h.y<i.y?(e.setLabelToConnection(f,c,l),e.setLabelToConnection(g,d,m)):(e.setLabelToConnection(f,d,m),e.setLabelToConnection(g,c,l));var n=jQuery("._jsPlumb_overlay");0!=n.size()&&n.css("font-size",E.getLabelFontSize())}}},this.getConnectionObject=function(a){for(var b=N.getConnections(),c=0;c<b.length;c++)if(b[c].source[0].id==a.source&&b[c].target[0].id==a.target)return b[c];return null},this.setLabelToConnection=function(a,b,c){if(null!=a){a.setLabel({id:"label",label:b,location:.65,cssClass:"connection-label"});var d=jQuery(a.getOverlay("label").canvas),e=6+d.width()/2,f=4+d.height()/2;"bottom"==c&&(f=-f),"right"==c&&(e=-e),jQuery(a.getOverlay("label").canvas).css({"margin-top":f+"px","margin-left":e+"px"})}},this.nodeHasIncomingConnections=function(a){var b=a.elementJQ.attr("id");return L.some(function(a){return a.target==b})},this.nodeHasOutgoingConnections=function(a){var b=a.elementJQ.attr("id");return L.some(function(a){return a.source==b})},this.editNode=function(a,b){void 0==a&&(a=G.getNodeById(AGN.Lib.WM.CampaignManagerSelection.getSelected()[0])),a.isExpandable&&(a.filled||ea(a))?a.data.created||!a.data.copyContent||ea(a)?fa(a,a.data.created):e.expandNodeUseOriginal(a.data.copyContent,H.curEditingNode.id):(AGN.Lib.WM.CampaignManagerSelection.clear(),H.showEditDialog(a,e.checkActivation()))};var ea=function(a){return a.isExpandable&&"ownWorkflow"!=a.type},fa=function(a,b){new AGN.Lib.WM.IconsSetLoader(e).loadIconsSetAJAX(a,b),a.data.created=!0};this.expandNodeUseOriginal=function(a,b){var c=G.getNodes()[b];fa(c,!a)},this.isNewNode=function(a){return(a.id+"").indexOf("new")!=-1},this.updateNode=function(a){G.updateNodeView(a,E)},this.restoreWorkflow=function(a){var b=e.restoreNodes(a);return e.restoreConnections(a),e.relayout(),b},this.restoreNodes=function(a){var b=[];return a.forEach(function(a){var c=G.restoreNode(a);b.push(c),justifyNodeElement(c)}),b},this.restoreConnections=function(a){var b=G.getNodes();e.noSnapshot(function(){a.forEach(function(a){if(a.connections){var c=a.id;a.connections.forEach(function(a){var d=a.targetIconId;b[c]&&b[d]&&e.restoreConnection(c,d)})}})})},this.restoreConnection=function(a,b){var c=G.getNodeIdPrefix();this.connectNodes(c+a,c+b,!1)},this.relayout=function(){rearrangeStage(),K=e.STATE_WAITING},this.getCMNodes=function(){return G},this.isNodesFilled=function(){var a=G.getNodes();for(var b in a)if(!a[b].filled)return!1;return!0},this.justifyNodeElement=function(a){justifyNodeElement(a)},this.saveSnapshot=function(){P.length==C.MAX_UNDO_HISTORY&&P.shift(),P.push({icons:e.getIconsForSubmission(),workflowBound:e.getBoundNodesDOM()}),"function"==typeof Q&&Q(!0)},this.undo=function(){P.length>0&&e.noSnapshot(function(){var a=P.pop();e.deleteAllNodes(!1),s=parseInt(a.workflowBound.left),u=parseInt(a.workflowBound.top),w=parseInt(a.workflowBound.width),x=parseInt(a.workflowBound.height),updateBoundNodesDOM(),e.restoreWorkflow(a.icons),Q(P.length>0)})},this.canUndo=function(){return P.length>0},this.getUndoHistoryDataForSubmission=function(){return JSON.stringify(P)},this.setUndoHistoryDataForSubmission=function(a){Q(P.length>0)},this.setHistoryStackChangedCallback=function(a){Q=a},this.setConnectionNotAllowedCallback=function(a){R=a},this.getConnectionNotAllowedCallback=function(){return R},this.setEditingNotAllowedCallback=function(a){S=a},this.setEditorCanvasWidth=function(a){m=a},this.setEditorCanvasHeight=function(a){n=a},this.setViewPortWidth=function(a){h=a},this.setViewPortHeight=function(a){i=a},this.updateWorkflowForPdf=function(){g.css({overflow:"inherit",float:"none",border:"none",sceneHeight:"100%",width:"100%","min-height":g.css("height"),height:"100%"}),B.remove();var a=z.height(),b=z.width(),c=1360,d=800;if(a>d||b>c){var f=1;f=b/a<c/d?d/a:c/b,e.setScale(f),e.relayout()}e.resetScrolling()},this.resetScrolling=function(){z.css({position:"relative",top:"0",left:"0",margin:$("div.icon-extra-info").css("top")+" 15px"}),o.css({position:"initial",height:"100%","min-height":o.css("height")})},this.omitKeys=function(a,b){var c={};for(key in a)b.indexOf(key)==-1&&(c[key]=a[key]);return c},this.getIconsForSubmission=function(a){var b=[],c=G.getNodes(),f={},g=Object.keys(c);if(a===!0){var h=0;g.forEach(function(a){var b=parseInt(a,10);b>h&&(h=b)}),g.forEach(function(a){var b=parseInt(a,10);b>0?f[a]=b:(h++,f[a]=h)})}else g.forEach(function(a){f[a]=a});g.forEach(function(a){var g=e.omitKeys(d.prepareNodeForSubmission(c[a]),["isExpandable"]);g.id=f[a],b.push(g)});var i={};return L.forEach(function(a){var b=f[e.extractIdFromConnectionEnd(a.source)],c=f[e.extractIdFromConnectionEnd(a.target)];b in i?i[b].push(c):i[b]=[c]}),b.forEach(function(a){var b=i[a.id];b?a.connections=$.map(b,function(a){return{targetIconId:a}}):a.connections=[]}),b},this.getIconsForSubmissionJson=function(){return JSON.stringify(this.getIconsForSubmission(!0))},this.getLeftPosition=function(){return z.offset().left-g.offset().left},this.getTopPosition=function(){return z.offset().top-g.offset().top},this.extractIdFromConnectionEnd=function(a){return a.substring(a.indexOf(G.getNodeIdPrefix())+G.getNodeIdPrefix().length,a.length)},this.updateParameterValueAfterDecision=function(){J.updateParameterValueAfterDecision()},this.getIncomingChainsForIcon=function(){var a=e.getCMNodes().getNodeIdPrefix(),b=e.getCMNodes(),c=[];return J.getIncomingChainsForIcon().forEach(function(d){var e=[];d.forEach(function(c){e.push(b.getNodeById(a+c.id))}),c.push(e)}),c},this.setWorkflowManagerStateChangedCallback=function(a){O=a},this.callWorkflowManagerStateChangedCallback=function(){"function"==typeof O&&O()},this.getCampaignManagerNodes=function(){return G},this.getNodesFactory=function(){return d},this.getMailingNames=function(){for(var a="",b=e.getCMNodes().getNodesByTypeList([d.NODE_TYPE_MAILING,d.NODE_TYPE_ACTION_BASED_MAILING,d.NODE_TYPE_DATE_BASED_MAILING,d.NODE_TYPE_FOLLOWUP_MAILING]),c=0;c<b.length;c++)a=a+b[c].iconTitle+"<br/>";return a},this.showError=function(a){AGN.Lib.Messages(t("workflow.defaults.error"),a,"alert")},this.checkWorkflowBeforeSave=function(){var a=e.checkActivation(),b=e.checkUsingActivatedWorkflow(),c=e.checkPartOfActivatedWorkflow();return a||b||c},this.checkActivation=function(){var a=$("input[name='__STRUTS_CHECKBOX_workflow.statusString']").val();return!(!this.isActivated||"STATUS_ACTIVE"!=a&&"STATUS_TESTING"!=a)&&(e.showError(t("error.workflow.saveActivatedWorkflow")),!0)},this.checkUsingActivatedWorkflow=function(){var a=$("input[name='usingActivatedWorkflow']").val();if(""!=a){var b=$("input[name='usingActivatedWorkflowName']").val();return e.showError(t("error.workflow."+a).replace("%s",b)),!0}return!1},this.checkPartOfActivatedWorkflow=function(){var a=$("input[name='partOfActivatedWorkflow']").val();if(""!=a){var b=$("input[name='partOfActivatedWorkflowName']").val();return e.showError(t("error.workflow."+a).replace("%s",b)),!0}return!1},this.checkMailingTypesConvertingRequired=function(){for(var a=this.getIconsForSubmission(!1),b="UNKNOWN",c={},e=0;e<a.length;e++){var f=a[e];if(f.type==d.NODE_TYPE_START&&f.filled){var g="UNKNOWN";switch(f.startType){case constants.startTypeDate:g="DATE";break;case constants.startTypeEvent:switch(f.event){case constants.startEventDate:g="RULE";break;case constants.startEventReaction:g="REACTION"}}if(b!=g){if("UNKNOWN"!=b)return!1;b=g}}switch(f.type){case d.NODE_TYPE_MAILING:case d.NODE_TYPE_FOLLOWUP_MAILING:c.DATE=!0;break;case d.NODE_TYPE_ACTION_BASED_MAILING:c.REACTION=!0;break;case d.NODE_TYPE_DATE_BASED_MAILING:c.RULE=!0}}if("UNKNOWN"!=b)if(c=Object.keys(c),1==c.length){if(b!=c[0])return!0}else if(c.length>1)return!0;return!1},this.setScale=function(a){E.setExternalScale(a)},this.getCommentControls=function(){return V},this.getDraggedElements=function(){return U},B.css({right:20,bottom:20}).append('<div id="navigatorArrowTop"></div>').append('<div id="navigatorArrowRight"></div>').append('<div id="navigatorArrowBottom"></div>').append('<div id="navigatorArrowLeft"></div>'),jQuery("#navigatorArrowTop").click(function(){o.animate({top:C.navigatorStep},"fast",function(){rearrangeStage()})}),jQuery("#navigatorArrowRight").click(function(){var a=g.scrollLeft();o.css({width:m+p+C.navigatorStep}),g.scrollLeft(a),o.animate({left:-C.navigatorStep},"fast",function(){rearrangeStage()})}),jQuery("#navigatorArrowBottom").click(function(){var a=g.scrollTop();o.css({height:n+q+C.navigatorStep}),g.scrollTop(a),o.animate({top:-C.navigatorStep},"fast",function(){rearrangeStage()})}),jQuery("#navigatorArrowLeft").click(function(){o.animate({left:C.navigatorStep},"fast",function(){rearrangeStage()})});for(var ga="",ha=0;ha<D.length;ha++)ga&&(ga+=", "),ga+="#"+D[ha];var ia=function(){jQuery(ga).filter(":focus").blur()};jQuery(ga).focus(function(){K=e.STATE_SPACE_RESTORED}).blur(function(){K=e.STATE_WAITING}),jQuery("#slider").slider({value:M,step:C.zoomStep,change:function(){E.setCurrentScaleSliderPosition(jQuery(this).slider("value")),rearrangeStage()}}),document.onselectstart=function(){return!1},rearrangeStage(),$(".draggableButton").css({zIndex:e.Z_INDEX_DRAGGABLE_BUTTON}).draggable({revert:!0,revertDuration:0,start:function(a,b){ia(),K=e.STATE_CREATING_NODE,b.helper.css({zIndex:e.Z_INDEX_DRAGGABLE_BUTTON+1}),b.helper.parent().css({zIndex:e.Z_INDEX_ICON_PANEL+1})},stop:function(a,b){if(!e.checkActivation()){b.helper.css({zIndex:e.Z_INDEX_DRAGGABLE_BUTTON}),b.helper.parent().css({zIndex:e.Z_INDEX_ICON_PANEL});var c=g.offset(),f=b.helper.attr("type"),j=1;switch(f){case d.NODE_TYPE_OWN_WORKFLOW:case d.NODE_TYPE_SC_BIRTHDAY:case d.NODE_TYPE_SC_DOI:case d.NODE_TYPE_SC_ABTEST:j=4}var k=b.helper.width()/2,l=b.helper.height()/2;if(b.offset.left+k>=c.left&&b.offset.top+l>=c.top&&b.offset.left+k<=c.left+h&&b.offset.top+l<=c.top+i){e.saveSnapshot();var m,n;if(G.count()){var o=b.offset.left-k/j-getCanvasOffsetX(),p=b.offset.top-l/j-getCanvasOffsetY(),q=Math.round((o-s)/E.getScaledGridSize()),r=Math.round((p-u)/E.getScaledGridSize());f==d.NODE_TYPE_IMPORT?n=G.addNodeSequence([f,d.NODE_TYPE_DEADLINE],q,r):m=G.addNode(f,q,r)}else f==d.NODE_TYPE_IMPORT?n=G.addNodeSequence([f,d.NODE_TYPE_DEADLINE],0,0):m=G.addNode(f,0,0),s=b.offset.left-k/j-getCanvasOffsetX(),u=b.offset.top-l/j-getCanvasOffsetY();if(n)n.forEach(function(a){justifyNodeElement(a)}),n.reduce(function(a,b){return e.connectNodes(a.element.id,b.element.id,!0),b});else if(m)switch(f){case d.NODE_TYPE_OWN_WORKFLOW:case d.NODE_TYPE_SC_BIRTHDAY:case d.NODE_TYPE_SC_DOI:case d.NODE_TYPE_SC_ABTEST:G.normalizeNodes(),e.editNode(m,!0);break;case d.NODE_TYPE_ACTION_BASED_MAILING:case d.NODE_TYPE_DATE_BASED_MAILING:var t=e.getCMNodes().getNodesByType(d.NODE_TYPE_DEADLINE);if(t.length>0)for(var v=0;v<t.length;v++){var w=t[v];w.filled&&(w.data.deadlineType=constants.deadlineTypeDelay,e.updateNode(w))}justifyNodeElement(m);break;default:justifyNodeElement(m)}(n||m)&&rearrangeStage(),e.callWorkflowManagerStateChangedCallback()}K=e.STATE_WAITING}}}).dblclick(function(a){function b(a,b){if(f==d.NODE_TYPE_IMPORT)return G.addNodeSequence([f,d.NODE_TYPE_DEADLINE],a,b);var c=G.addNode(f,a,b);if(c){switch(f){case d.NODE_TYPE_OWN_WORKFLOW:case d.NODE_TYPE_SC_BIRTHDAY:case d.NODE_TYPE_SC_DOI:case d.NODE_TYPE_SC_ABTEST:e.editNode(c,!0)}return[c]}return!1}var c,f=$(this).attr("type");if(e.saveSnapshot(),G.count())for(var g=E.pxToCoordinate(E.getScaledNodeSize()),h=0;h<=x;h+=g){for(var i=0;i<=w&&!(c=b(i,h));i+=g);if(c)break}else c=b(0,0),s=w/2,u=x/2;c&&(c.forEach(function(a){justifyNodeElement(a)}),c.reduce(function(a,b){return e.connectNodes(a.element.id,b.element.id,!0),b}),rearrangeStage(),$(c[0].elementJQ).click()),e.callWorkflowManagerStateChangedCallback()}),$(document).keydown(function(a){a.keyCode==C.dragStageKeyCode?a.target&&!$(a.target).is("input, textarea")&&K!=e.STATE_SPACE_RESTORED&&(K==e.STATE_WAITING&&($("#editorCanvas").selectable("destroy"),$(G.getIconNodesSelector()).draggable("disable"),K=e.STATE_DRAGGING_STAGE_WAIT_MOUSE),a.preventDefault(),a.stopPropagation()):a.keyCode==C.multiConnectionKeyCode&&(T=!0)}),$(document).keyup(function(a){a.keyCode==C.dragStageKeyCode?a.target&&!$(a.target).is("input, textarea")&&(K!=e.STATE_DRAGGING_STAGE_WAIT_MOUSE&&K!=e.STATE_DRAGGING_STAGE||($("#editorCanvas").selectable(Y()),$(G.getIconNodesSelector()).draggable("enable"),a.stopPropagation(),K=e.STATE_WAITING)):a.keyCode==C.multiConnectionKeyCode?T=!1:C.deleteKeyCode==a.keyCode&&e.deleteSelectedNode()});var ja=!1,ka=!1,la=!1,ma=!1,na=!1,oa=!1;g.mousedown(function(a){K==e.STATE_DRAGGING_STAGE_WAIT_MOUSE&&(ja=a.pageX,ka=a.pageY,K=e.STATE_DRAGGING_STAGE,la=parseInt(o.css("width")),ma=parseInt(o.css("height")),na=parseInt(o.css("left")),oa=parseInt(o.css("top")),a.preventDefault(),a.stopPropagation())}),jQuery(document).mousemove(function(a){K==e.STATE_DRAGGING_STAGE&&(o.css({left:na+a.pageX-ja,top:oa+a.pageY-ka,width:la-a.pageX+ja,height:ma-a.pageY+ka}),a.preventDefault(),a.stopPropagation())}),jQuery(document).mouseup(function(a){K==e.STATE_DRAGGING_STAGE&&(K=e.STATE_DRAGGING_STAGE_WAIT_MOUSE,updateNodeAdditionalViewElements(),updateEditorCanvas(),resetJsPlumber(),a.preventDefault(),a.stopPropagation())}),jQuery(document).click(function(a){K!=e.STATE_WAITING&&K!=e.STATE_SPACE_RESTORED||(!jQuery.browser.msie&&1==a.which||jQuery.browser.msie)&&(void 0!=W&&X(W,a.originalEvent)||AGN.Lib.WM.CampaignManagerSelection.clear(),W=void 0)}),AGN.Lib.WM.CampaignManagerToolbar.init({deleteSelected:function(){e.deleteSelectedNode()},connectSelected:function(){return connectSelectedNodes()},undoSelected:function(){e.undo()},zoomMinSelected:function(){var a=jQuery("#slider"),b=a.slider("option","min"),c=a.slider("option","value");if(c>b){var d=a.slider("option","value")-a.slider("option","step");a.slider("option","value",d<b?b:d)}},zoomMiddleSelected:function(){var a=jQuery("#slider");a.slider("option","value",Math.round(a.slider("option","max")/2))},zoomMaxSelected:function(){var a=jQuery("#slider"),b=a.slider("option","max"),c=a.slider("option","value");if(c<b){var d=a.slider("option","value")+a.slider("option","step");a.slider("option","value",d>b?b:d)}},doAutoLayout:function(){I.layoutWorkflow(G.getNodes(),L),s=15,u=15,rearrangeStage()}}),AGN.Lib.WM.CampaignManagerSelection.init({nodeSelector:G.getIconNodesSelector(),onSelectionChanged:function(){var a=this.getSelected();a&&a.length?(AGN.Lib.WM.CampaignManagerToolbar.setDeletionAvailable(!0),AGN.Lib.WM.CampaignManagerToolbar.arrowMode&&null!=this.prevSelected&&e.connectNodes(this.prevSelected,this.lastSelected,!0)):AGN.Lib.WM.CampaignManagerToolbar.setDeletionAvailable(!1)}}),y||AGN.Lib.WM.CampaignManagerContextMenu.init({nodeSelector:G.getIconNodesSelector(),campaignManager:e,campaignManagerSelection:AGN.Lib.WM.CampaignManagerSelection}),o.selectable(Y())};AGN.Lib.WM.CampaignManager=c}(),function(){var a=function(a){var b=Math.round(1.5*a.nodeSize/a.gridSize),c=Math.round(1.8*a.nodeSize/a.gridSize);this.layoutWorkflow=function(f,j){var l=[],m=1,n=0,o=i(f,j);if(o.length>0)for(var p=0;p<o.length;p++){var q=[],r=[];for(r.push(o[p]);r.length>0;){for(var s=-Math.round((r.length-1)*c/2)+0,t=[],u=0;u<r.length;u++){var v=r[u];if(l.indexOf(v.id)==-1){v.x=m,v.y=s+u*c,v.y<n&&(n=v.y);var w=h(f,v,j);t=t.concat(w),l.push(v.id)}}q=r,r=[],jQuery.each(t,function(a,b){
jQuery.inArray(b,r)===-1&&r.push(b)});var x=Math.abs(q.length-r.length);if(m+=x>1?b+Math.round(a.nodeSize/a.gridSize*.5*x):b,e(q)&&e(r)){var y=g(q);for(u=0;u<y.length;u++){var z=h(f,y[u],j);for(r=d(r,z),r.push(y[u]),l=d(l,[y[u].id]),k=0;k<q.length;k++){var A=q[k];A.y>y[u].y&&(A.y-=c)}}}}}for(u in f){var B=f[u];l.indexOf(B.id)==-1&&(B.y=0,B.x=m,m+=b),B.y+=-n+1}};var d=function(a,b){var c=[];return jQuery.each(a,function(a,d){jQuery.inArray(d,b)===-1&&c.push(d)}),c},e=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(f(c))return!0}return!1},f=function(a){return"mailing"==a.type||"actionbased_mailing"==a.type||"datebased_mailing"==a.type||"followup_mailing"==a.type},g=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];f(d)&&b.push(d)}return b},h=function(a,b,c){for(var d=[],e=0;e<c.length;e++){var f=c[e];if(b.element.id==f.source){for(var g in a){var h=a[g];h.element.id==f.target&&d.push(h)}"decision"==b.type&&d.sort(function(a,c){if(b.y>=a.y&&b.y>=c.y){var d=a.y-c.y;return 0===d?a.x-c.x:d}return a.y-c.y})}}return d},i=function(a,b){var c=[];for(var d in a){for(var e=a[d],f=!1,g=!1,h=0;h<b.length;h++){var i=b[h];e.element.id==i.source?g=!0:e.element.id==i.target&&(f=!0)}g&&!f&&c.push(e)}return c}};AGN.Lib.WM.AutoLayout=a}(),function(){var a=function(a){this.STATE_IDLE=1,this.STATE_PROCESSING_CHAIN=2,this.STATE_TIMER_WAITING=3;var b=this,c=a.campaignManager,d=a.editorsHelper,e=a.nodeFactory,f=this.STATE_IDLE,g=function(a){f=a},h=function(a){var b={};return a.forEach(function(a){b[a.id]=a}),b},i=function(a){var b={};return a.forEach(function(a){a.connections&&a.connections.forEach(function(c){var d=a.id,e=c.targetIconId;b[d]||(b[d]={}),b[d][e]=!0})}),b},j=function(a){var b={};return a.forEach(function(a){a.connections&&a.connections.forEach(function(c){var d=a.id,e=c.targetIconId;b[e]||(b[e]={}),b[e][d]=!0})}),b},k=function(a){for(var c=b.getIncomingChainsForIcon(a),d={},f=[],g=0;g<c.length;g++){var h=c[g];if(h[1]&&h[1].type==e.NODE_TYPE_MAILING&&h[2]&&h[2].type==e.NODE_TYPE_PARAMETER){var i;i=h[3]&&h[3].type==e.NODE_TYPE_PARAMETER?h[3]:h[2],d[i.id]||(d[i.id]=!0,f.push(i))}}var j=0;if(f.length>0){for(var k=0;k<f.length;k++){var l=f[k];if(!l.filled)return null;j+=parseInt(l.value,10)}return Math.max(0,100-j)}return null};this.updateParameterValueAfterDecision=function(){function a(a,b,c){for(var d=c?n:o,e=Object.keys(d[a]||{}),f={};e.length>0;){var g=e;e=[];for(var h=0;h<g.length;h++){var i=g[h],j=m[i];if(j.type===b)return j;f[i]=!0,Object.keys(d[i]||{}).forEach(function(a){f[a]||e.push(a)})}}return!1}if(c.getCurrentState()==c.STATE_WAITING){g(b.STATE_PROCESSING_CHAIN);var d=c.getCMNodes().getNodeIdPrefix(),l=c.getIconsForSubmission(),m=h(l),n=i(l),o=j(l);l.filter(function(a){return a.type==e.NODE_TYPE_DECISION}).forEach(function(b){if(b.decisionType==constants.decisionTypeAutoOptimization){var f=a(b.id,e.NODE_TYPE_PARAMETER,!0);if(f&&f.editable===!1){var g=c.getCMNodes().getNodeById(d+f.id),h=k(b.id);null==h?(g.data.value=0,g.filled=!1):(g.data.value=h,g.filled=!0),c.updateNode(g)}}}),g(b.STATE_IDLE)}else f==b.STATE_IDLE&&(setTimeout(b.updateParameterValueAfterDecision,100),g(b.STATE_TIMER_WAITING))},this.getIncomingChainsForIcon=function(a){function b(a,c){var d=[],e=f[a];if(e&&!c[a]){var h=Object.keys(g[a]||{});h.length>0?(c[a]=!0,h.forEach(function(a){b(a,c).forEach(function(a){a.unshift(e),d.push(a)})}),c[a]=!1):d.push([e])}return d}var e=c.getIconsForSubmission(),f=h(e),g=j(e);return b(a||d.curEditingNode.id,{})}};AGN.Lib.WM.ChainProcessor=a}(),function(){var a=AGN.Lib.Popover,b=["mailing","actionbased_mailing","datebased_mailing","followup_mailing"],c=function(a,b){this.manager=a,this.commentPopover=null,this.timeoutId=void 0,this.isPdf=a.isPdf,this.commentCounter=1,this.workflowURL=b.workflowURL,this.componentURL=b.componentURL};c.popoverOptions=function(a,b){var c='<div class="popover popover-wide" role="tooltip" ><div class="arrow"></div><div class="popover-content" style="width: auto; height: auto; max-width: 300px; max-height: 350px; overflow: auto;"></div></div>';return{trigger:"manual",html:!0,template:c,content:function(){return a.generatePopoverContent(b)}}},c.prototype.generatePopoverContent=function(a){var c="",d=0;if(b.includes(a.type)){d=a.data.mailingId;var e=d>0?this.getMailingThumbnail(this.manager.pageContextSessionId,d):"";""!=e&&(c="<img src='"+e.src+"' style='width: 100%; height: 100%;'/>")}var f=a.data.iconComment;return null!=f&&""!=f.trim()&&(c+="<div>"+f+"</div>"),c},c.prototype.getMailingThumbnail=function(a,b){var c=this,d="";return jQuery.ajax({type:"POST",url:c.workflowURL,async:!1,data:{method:"getMailingThumbnail",mailingId:b},success:function(a){a>0&&(d=new Image,d.src=c.componentURL.replace("{component-id}",a))}}),d},c.prototype.showCommentPopover=function(a){var b=a.data.iconComment,c=a.data.mailingId||0;if(null!=b&&""!=b.trim()||!(c<=0)){var d=$(a.elementJQ),e=this.manager.getDraggedElements();if(e)for(var f=0;f<e.length;f++)if(e[f].DOMElement==d[0])return;this.updateComments(a),this.showPopover()}},c.prototype.hideCommentPopover=function(){this.hidePopover(!1)},c.prototype.updateComments=function(b){this.commentPopover&&this.commentPopover.destroy();var d=this;this.commentPopover=a.new(b.elementJQ,c.popoverOptions(d,b));var e=this.commentPopover.tip();e.on("mouseenter",function(){d.showPopover(b)}),e.on("mouseleave",function(){d.hidePopover(!0)})},c.prototype.stopHiding=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},c.prototype.showPopover=function(){this.stopHiding(),this.commentPopover.show()},c.prototype.hidePopover=function(a){if(this.stopHiding(),a===!0)this.commentPopover&&this.commentPopover.hide();else{var b=this;this.timeoutId=setTimeout(function(){b.hidePopover(!0)},200)}},c.prototype.showCommentEditDialog=function(){var a=this.manager.getCampaignManagerNodes().getNodeById(AGN.Lib.WM.CampaignManagerSelection.getSelected()[0]);this.manager.checkActivation()||this.manager.getEditorsHelper().showIconCommentDialog(a)},c.prototype.addCommentEllipsis=function(a){var b=a.data.iconComment,c=this;c.isPdf?null!=b&&""!=b.trim()&&c.showCommentFootnote(a.elementJQ,b):null!=b&&""!=b.trim()?a.elementJQ.addClass("icon-commented"):a.elementJQ.removeClass("icon-commented")},c.prototype.showCommentFootnote=function(a,b){var c=this,d="icon-footnote-"+c.commentCounter;$("#footnotes-container table#comment-footnotes-list").append('<tr id="'+d+'"><td>'+c.commentCounter+". "+b+"</td></tr>"),a.append('<a aria-describedby="footnote-label" href="#'+d+"\"><span class='icon-footnote-number badge badge-info'>"+c.commentCounter+"</span>"),c.commentCounter++},AGN.Lib.WM.CommentControls=c}(),function(){var a={nodeSelector:"",init:function(a){this.nodeSelector=a.nodeSelector;var b=a.campaignManager,c=a.campaignManagerSelection,d=this;jQuery.contextMenu({selector:d.nodeSelector,build:function(a,d){var e=d.currentTarget.id;c.isSelected(e)||(c.clear(),c.select(jQuery("#"+e)));var f={};if(c.selected.length>1){f.connect={name:t("workflow.connect"),icon:"connect",callback:function(a,d){if(2==c.selected.length)b.connectIntermediateNodes(c.selected);else{var e=null;jQuery.each(c.selected,function(a,c){null!=e&&b.connectNodes(e,c,!0),e=c})}}};var g=b.getConnectionsFromSelected(c.selected);g.length>0&&(f.disconnect={name:t("workflow.disconnect"),icon:"disconnect",callback:function(a,c){b.deleteConnections(g)}})}if(1==c.selected.length){var h=b.getNodesFromSelected(c.selected)[0];f.edit={name:t("workflow.defaults.edit"),icon:"edit",disabled:h.data.editable===!1,callback:function(a,c){b.editNode(void 0,!0)}}}return f.delete={name:t("workflow.defaults.delete"),icon:"delete",callback:function(a,c){b.deleteSelectedNode()}},f.iconComment={name:t("workflow.defaults.comment"),icon:"comment",callback:function(a,c){b.getCommentControls().showCommentEditDialog()}},{callback:function(a,b){},items:f}}}),jQuery.contextMenu({selector:"._jsPlumb_connector",build:function(a,d){var e={};if(c.selected.length>1){var f=b.getConnectionsFromSelected(c.selected);f.length>0&&(e.disconnect={name:t("workflow.disconnect"),icon:"disconnect",callback:function(a,c){b.deleteConnections(f)}})}return e.delete={name:t("workflow.defaults.delete"),icon:"delete",callback:function(a,c){b.deleteConnectionByHtmlElement(c.$trigger[0])}},{callback:function(a,b){},items:e}}})}};AGN.Lib.WM.CampaignManagerContextMenu=a}(),function(){function a(a){var b=$(a.target);b.find(".disable-for-active").each(function(a,b){$(b).attr("disabled",!0)}),b.find(".hide-for-active").each(function(a,b){$(b).hide()}),b.find(":input:enabled[type!='hidden']").not(":button, .select2, .js-select, .js-datepicker").each(function(a,b){"radio"==$(b).prop("type")||"checkbox"==$(b).prop("type")?$(b).attr("disabled",!0):$(b).attr("readonly",!0)}),b.find(":input:enabled.select2, :input:enabled.js-select, .select2-container").not(".disabled, :disabled").each(function(a,b){"text"==$(b).prop("type")||$(b).is("input, select")?$(b).attr("disabled",!0):$(b).select2("disable")}),b.find(".js-datepicker").each(function(a,b){$(b).attr("disabled",!0)})}var b=function(b,c,d){this.editors=[],this.curEditor,this.curEditingNode,this.showEditDialog=function(e,f){"start"==e.type&&!e.filled&&b.nodeHasIncomingConnections(e)&&(e.type="stop"),"stop"!=e.type||e.filled||b.nodeHasIncomingConnections(e)||(e.type="start"),this.curEditingNode=e,this.curEditor=this.editors[e.type],this.curEditor.fillEditor(e);var g=this;this.getEditorPanel(e.type).dialog({open:function(b,h){var i=g.getEditorPanel(e.type).parent().find(".ui-dialog-title");i.empty(),i.append('<span class="dialog-title-image">'+g.curEditor.getTitle()+"</span>"),i.find(".dialog-title-image").css("background-image","url(' "+d.imagePath+c.getSmallImageForNode(e)+"')"),e.type==c.NODE_TYPE_RECIPIENT&&(1==e.isDependent?g.getEditorPanel(e.type).parent().find(".recipient-editor-select").prop("disabled",!0):g.getEditorPanel(e.type).parent().find(".recipient-editor-select").prop("disabled",!1)),jQuery(b.target).find(".js-datepicker").each(function(a,b){var c=jQuery(b).pickadate("picker");c.set("select",c.get("select"))}),f&&a(b)},close:function(a,b){void 0!=g.curEditor.closeEditor&&g.curEditor.closeEditor()},width:650,height:"auto",minHeight:"auto",modal:!0,resizable:!1})},this.showIconCommentDialog=function(a){this.curEditingNode=a,this.curEditor=this.editors["icon-comment"],this.curEditor.fillEditor(a);var b=this;this.getEditorPanel("icon-comment").dialog({open:function(a,c){b.getEditorPanel("icon-comment").parent().find(".ui-dialog-titlebar").hide()},width:300,height:"auto",minHeight:"auto",modal:!0,resizable:!1,fluid:!0,position:{my:"left top",at:"left bottom",of:a.element}})},this.saveIconComment=function(a){var c=this.curEditingNode,d={iconComment:a};jQuery.extend(c.data,d),b.getCommentControls().addCommentEllipsis(c)},this.saveCurrentEditor=function(a,c){var d=this,e=this.curEditor.saveEditor();if(a||this.cancelEditor(),this.isNodeIsMailing(this.curEditingNode)){var f=e.mailingId;c&&c.checkDifferentMailingLists(f,function(b){d.mailingSpecificSave(a,b,e,c)},function(b){d.curEditor.storedMailingContent=b,d.curEditor.storedMailingId=f,d.curEditor.storedLeaveOpen=a,d.curEditor.storedEditorData=e,c.initOneMailinglistWarningDialog(c)})}else"ownWorkflow"!=this.curEditingNode.type&&"scBirthday"!=this.curEditingNode.type&&"scDOI"!=this.curEditingNode.type&&"scABTest"!=this.curEditingNode.type&&b.saveSnapshot(),jQuery.extend(this.curEditingNode.data,e),this.curEditingNode.filled||this.isNodeIsMailing(this.curEditingNode)||(this.curEditingNode.filled=!0),this.curEditingNode.filled&&"function"==typeof this.curEditor.isSetFilledAllowed&&!this.curEditor.isSetFilledAllowed()&&(this.curEditingNode.filled=!1),b.updateNode(this.curEditingNode),b.updateParameterValueAfterDecision(),b.callWorkflowManagerStateChangedCallback()},this.isNodeIsMailing=function(a){return"mailing"==a.type||"actionbased_mailing"==a.type||"datebased_mailing"==a.type||"followup_mailing"==a.type},this.mailingSpecificSave=function(a,c,d,e){b.saveSnapshot(),jQuery.extend(this.curEditingNode.data,d),this.curEditingNode.data.iconTitle=this.curEditingNode.iconTitle,this.curEditingNode.filled&&"function"==typeof this.curEditor.isSetFilledAllowed&&!this.curEditor.isSetFilledAllowed()&&(this.curEditingNode.filled=!1),b.updateNode(this.curEditingNode),this.isNodeIsMailing(this.curEditingNode)&&e.trySupplementNodes(c),b.updateParameterValueAfterDecision(),b.callWorkflowManagerStateChangedCallback()},this.mailingSpecificSaveAfterMailinglistCheckModal=function(a){this.curEditor.storedMailingContent.mailinglistId=a.configuredMailingData.mailinglistId,this.mailingSpecificSave(this.curEditor.storedLeaveOpen,this.curEditor.storedMailingContent,this.curEditor.storedEditorData,a)},this.cancelEditor=function(){this.getEditorPanel(this.curEditingNode.type).dialog("instance")&&this.getEditorPanel(this.curEditingNode.type).dialog("close")},this.getEditorPanel=function(a){var b="stop"==a?"start":a;return jQuery("#"+b+"-editor")},this.formToObject=function(a){var b=jQuery('form[name="'+a+'"]').serializeArray(),c={};return jQuery.each(b,function(){if(this.name.indexOf("[")!=-1){var a=this.name.substring(0,this.name.indexOf("["));void 0==c[a]&&(c[a]=[]);var b=this.name.substring(this.name.indexOf("[")+1,this.name.indexOf("]"));if(void 0==c[a][b]&&(c[a][b]={}),this.name.indexOf(".")!=-1){var d=this.name.substring(this.name.indexOf(".")+1);c[a][b][d]=this.value}else c[a][b]=this.value}else c[this.name]=this.value||""}),jQuery('form[name="'+a+'"] [type="checkbox"]').each(function(){jQuery(this).prop("checked")||(c[this.name]=!1)}),c},this.fillFormFromObject=function(a,b,c,d){if("string"==typeof b)this.fillFormFromObjectItem(a,c,c,b||d);else for(var e in b){var f=b[e];!f&&d&&d[e]&&(f=d[e]),this.fillFormFromObjectItem(a,c,e,f)}},this.fillFormFromObjectItem=function(a,b,c,d){if("[object Array]"===Object.prototype.toString.call(d))for(var e=0;e<d.length;e++)this.fillFormFromObject(a,d[e],c+"["+e+"].");else{var f=jQuery('form[name="'+a+'"] [name="'+b+c+'"]'),g=f.attr("type");switch(g){case"checkbox":f.prop("checked",Boolean(d));break;case"radio":f.filter('[value="'+d+'"]').prop("checked",!0);break;default:var h=f.prop("tagName");switch(h){case"SELECT":f.val(d),this.initSelectWithValueOrChooseFirst(f,d);break;default:f.val(d)}}}},this.processForward=function(a,c,d,e,f){$("#forwardName").val(a),$("#forwardParams").val("nodeId="+b.extractIdFromConnectionEnd(this.curEditingNode.elementJQ.attr("id"))+";elementId="+encodeURIComponent(c)+(f?";"+f:"")),this.curEditor.safeToSave&&this.saveCurrentEditor(),e(!1)},this.getFirstOptionValue=function(a){return AGN.Lib.Select.get(a).getFirstValue()},this.resetSelect=function(a){AGN.Lib.Select.get(a).clear()},this.initSelectWithFirstValue=function(a){AGN.Lib.Select.get(a).selectFirstValue()},this.initSelectWithValueOrChooseFirst=function(a,b){AGN.Lib.Select.get(a).selectValueOrSelectFirst(b)},this.deleteNode=function(a){b.deleteNode(b.getCMNodes().getNodeIdPrefix()+a,!1,!1)},this.openNode=function(a,c){b.editNode(a,c)}};AGN.Lib.WM.EditorsHelper=b}(),function(){var a=function(a){this.loadIconsSetAJAX=function(b,c){var d,e="ownWorkflow"!==b.type,f={x:0,y:0,icons:[]},g=this;d=e&&!c?{method:"getSampleWorkflowContent",type:b.type}:{method:"getWorkflowContent",workflowId:b.data.ownWorkflowId},d.isWithContent=b.data.copyContent;var h=a.getCMNodes();$.ajax({type:"POST",url:"workflow.do;jsessionid="+a.getSessionId(),data:d,async:!1}).done(function(d){$.ajax({type:"POST",url:"workflow.do;jsessionid="+a.getSessionId(),data:{method:"getAllMailingSorted",sortField:"shortname",sortDirection:"asc"},async:!1}).always(function(e){var i={};e.forEach(function(a){i[a.mailingID]=a.shortname}),a.extendAllUsedEntities({allMailings:i}),f.icons=d,b.data.copyContent=!0,a.getCampaignManagerNodes().count()>1&&g.removeStartAndEndIcons(f),c||g.generateNewIDs(f.icons),g.expand(b,f),h.openNodeIcon()})})},this.generateNewIDs=function(b){var c={};b.forEach(function(b){c[b.id]=a.getCMNodes().generateId()}),b.forEach(function(a){a.id=c[a.id],a.connections?a.connections=a.connections.map(function(a){return{targetIconId:c[a.targetIconId]}}):a.connections=[]})},this.removeStartAndEndIcons=function(a){var b=a.icons,c={};b.forEach(function(a){"start"!==a.type&&"stop"!==a.type||(c[a.id]=!0)}),b=b.filter(function(a){return!c[a.id]&&(a.connections?a.connections=a.connections.filter(function(a){return!c[a.targetIconId]}):a.connections=[],!0)});var d=1e5,e=1e5;b.forEach(function(a){d=Math.min(d,a.x),e=Math.min(e,a.y)}),(d>0||e>0)&&b.forEach(function(a){a.x-=d,a.y-=e}),a.icons=b},this.expand=function(c,d){var e=d.icons,f=a.getCurrentState();a.setCurrentState(a.STATE_EXPANDING_ICONS_SET);var g=a.needSaveSnapshot;a.needSaveSnapshot=!1,d.x=c.x,d.y=c.y,a.deleteNode(c.elementJQ.attr("id"),!1,!1),e.forEach(function(a){a.x+=c.x,a.y+=c.y}),b(d),a.restoreWorkflow(e),a.callWorkflowManagerStateChangedCallback(),a.needSaveSnapshot=g,e.forEach(function(a){a.x-=c.x,a.y-=c.y}),a.setCurrentState(f)};var b=function(b){var d=c(b.icons),e=a.getCMNodes(),f=e.getNodesFromRegion(b.x,b.y,b.x+d.maxX,b.y+d.maxY,1);if(!$.isEmptyObject(f))for(var g in f)if(f.hasOwnProperty(g)){var h=f[g],i=0,j=0;if(h.y<b.y){var k=b.y-h.y-3;j=0===Math.abs(k)?-1:k}else i=d.maxX-b.x,j=d.maxY-b.y;h.x=h.x+i,h.y=h.y+j}},c=function(a){var b=0,c=0;return a.forEach(function(a){a.x>b&&(b=a.x),a.y>c&&(c=a.y)}),{maxX:b,maxY:c}}};AGN.Lib.WM.IconsSetLoader=a}(),function(){var a={NODE_TYPE_START:"start",NODE_TYPE_STOP:"stop",NODE_TYPE_DECISION:"decision",NODE_TYPE_DEADLINE:"deadline",NODE_TYPE_PARAMETER:"parameter",NODE_TYPE_REPORT:"report",NODE_TYPE_RECIPIENT:"recipient",NODE_TYPE_ARCHIVE:"archive",NODE_TYPE_FORM:"form",NODE_TYPE_MAILING:"mailing",NODE_TYPE_OWN_WORKFLOW:"ownWorkflow",NODE_TYPE_SC_BIRTHDAY:"scBirthday",NODE_TYPE_SC_DOI:"scDOI",NODE_TYPE_SC_ABTEST:"scABTest",NODE_TYPE_ACTION_BASED_MAILING:"actionbased_mailing",NODE_TYPE_DATE_BASED_MAILING:"datebased_mailing",NODE_TYPE_FOLLOWUP_MAILING:"followup_mailing",NODE_TYPE_IMPORT:"import",NODE_TYPE_EXPORT:"export",NODE_TYPE_START_ID:0,NODE_TYPE_STOP_ID:1,NODE_TYPE_DECISION_ID:2,NODE_TYPE_DEADLINE_ID:3,NODE_TYPE_PARAMETER_ID:4,NODE_TYPE_REPORT_ID:5,NODE_TYPE_RECIPIENT_ID:6,NODE_TYPE_ARCHIVE_ID:7,NODE_TYPE_FORM_ID:8,NODE_TYPE_MAILING_ID:9,NODE_TYPE_OWN_WORKFLOW_ID:10,NODE_TYPE_SC_BIRTHDAY_ID:11,NODE_TYPE_SC_DOI_ID:12,NODE_TYPE_SC_ABTEST_ID:13,NODE_TYPE_ACTION_BASED_MAILING_ID:14,NODE_TYPE_DATE_BASED_MAILING_ID:15,NODE_TYPE_FOLLOWUP_MAILING_ID:16,NODE_TYPE_IMPORT_ID:17,NODE_TYPE_EXPORT_ID:18,reactionRegistry:[],createNode:function(a,b,c,d,e,f){var g={id:e,x:b,y:c,type:a,data:{},filled:!1,element:d,elementJQ:jQuery(d),usedAnchors:[],isExpandable:!1,iconTitle:"",editable:!0};switch(f.setCampaignActionsType(g),g.type){case"scABTest":case"scBirthday":case"scDOI":g.filled=!0,g.isExpandable=!0,g.data={copyContent:!0,created:!1};break;case"ownWorkflow":g.isExpandable=!0,g.data={ownWorkflowId:0,copyContent:!0,created:!1};break;case"start":g.data={startType:null,date:null,hour:0,minute:0,sendReminder:!1,remindAdminId:0,remindAtOnce:!1,scheduleReminder:!1,remindSpecificDate:!1,remindDate:new Date,remindHour:0,remindMinute:0,event:null,reaction:null,mailingId:0,profileField:"",useRules:!1,rules:[],executeOnce:!0,comment:"",recipients:"",adminTimezone:""};break;case"stop":g.data={endType:null,date:null,hour:0,minute:0,sendReminder:!1,remindAdminId:0,remindAtOnce:!1,scheduleReminder:!1,remindSpecificDate:!1,remindDate:new Date,remindHour:0,remindMinute:0,event:null,reaction:null,mailingId:0,profileField:"",useRules:!1,rules:[],executeOnce:!0,comment:"",recipients:"",adminTimezone:""};break;case"decision":g.data={decisionType:null,decisionCriteria:null,reaction:null,mailingId:0,linkId:0,profileField:"",aoDecisionCriteria:null,threshold:"",decisionDate:new Date,rules:[],includeVetoed:!0};break;case"deadline":g.data={deadlineType:null,date:new Date,timeUnit:null,delayValue:0,hour:0,minute:0,useTime:!1};break;case"parameter":g.data={value:0};break;case"report":g.data={reports:[]};break;case"recipient":g.isDependent=!1,g.data={mailinglistId:0,targets:[],targetsOption:null};break;case"archive":g.data={campaignId:0,archived:!1};break;case"form":g.data={userFormId:0,formType:"form"};break;case"optin_form":g.data={userFormId:0,formType:"optin_form"},g.type="form";break;case"fullview":g.data={userFormId:0,formType:"fullview"},g.type="form";break;case"optout_form":g.data={userFormId:0,formType:"optout_form"},g.type="form";break;case"mailing":case"actionbased_mailing":case"datebased_mailing":g.data={mailingId:0};break;case"followup_mailing":g.data={baseMailingId:0,mailingId:0,decisionCriterion:"OPENED"};break;case"import":case"export":g.data={importexportId:0,errorTolerant:!1}}return g},createNodeFromData:function(a,b,c){var d={id:a.id,x:a.x,y:a.y,type:a.type,data:{},filled:a.filled,element:b,elementJQ:jQuery(b),isExpandable:!1,usedAnchors:[],iconTitle:a.iconTitle};c.setCampaignActionsType(d);for(var e=Object.keys(a),f=0;f<e.length;f++){var g=e[f];if("x"!=g&&"y"!=g&&"type"!=g&&"filled"!=g)if("date"==g||"remindDate"==g||"decisionDate"==g){if(a[g])if(a[g].toString().indexOf("-")!=-1){var h=a[g].toString().split("-");d.data[g]=new Date(h[0],h[1]-1,h[2])}else d.data[g]=new Date(a[g])}else d.data[g]=a[g]}return"ownWorkflow"!=d.type&&"scBirthday"!=d.type&&"scDOI"!=d.type&&"scABTest"!=d.type||(d.isExpandable=!0),d},prepareNodeForSubmission:function(a){var b={x:a.x,y:a.y,type:a.type,filled:a.filled,iconTitle:a.iconTitle};if(void 0!=a.data)for(var c=Object.keys(a.data),d=0;d<c.length;d++)b[c[d]]=a.data[c[d]];return void 0!=a.value&&(b.value=a.value),void 0!=a.mailinglistId&&(b.mailinglistId=a.mailinglistId),b.date&&b.date.getMonth&&(b.date=b.date.getTime()),b.remindDate&&b.remindDate.getMonth&&(b.remindDate=b.remindDate.getTime()),b.decisionDate&&b.decisionDate.getMonth&&(b.decisionDate=b.decisionDate.getTime()),b.id=a.id,b},getFixedType:function(a){return"stop"==a?"start":a},getImage:function(a){return"icon_"+this.getFixedType(a)+"_l.png"},getEmptyImage:function(a){return"icon_"+this.getFixedType(a)+"_g.png"},getSmallImage:function(a){return"icon_"+this.getFixedType(a)+"_s.png"},getImageForNode:function(a){return"form"==a.type?this.getImage(a.data.formType):this.getImage(a.type)},getEmptyImageForNode:function(a){return"form"==a.type?this.getEmptyImage(a.data.formType):this.getEmptyImage(a.type)},getSmallImageForNode:function(a){return"form"==a.type?this.getSmallImage(a.data.formType):this.getSmallImage(a.type)},getReactionImage:function(a){return this.reactionRegistry[a].image},getReactionName:function(a){return this.reactionRegistry[a].name}};AGN.Lib.WM.NodeFactory=a}(),function(){var a=function(a){function b(a){switch(String(a)){case d.REACTION_OPENED:return t("workflow.reaction.opened");case d.REACTION_NOT_OPENED:return t("workflow.reaction.not_opened");case d.REACTION_CLICKED:return t("workflow.reaction.clicked");case d.REACTION_NOT_CLICKED:return t("workflow.reaction.not_clicked");case d.REACTION_BOUGHT:return t("workflow.reaction.bought");case d.REACTION_NOT_BOUGHT:return t("workflow.reaction.NotBought")}return""}function c(a,b){var c=!1;if(q(a)>b){for(var d=a,e=d.html(),f=e.split("<br>"),g=0;g<f.length;g++){d.text("");for(var h=d.height(),i="",j="",k=f[g].split(" "),l=0;l<k.length;l++)l>0&&d.text(d.text()+" "),d.text(d.text()+k[l]),""!=i&&(i+=" "),i+=k[l],d.height()>h&&(h=d.height(),q(d)>b&&(c=!0,i=p(d,i,b)),""!=j&&(j+=" "),d.text(j+i),j=d.text(),i="");f[g]=d.text()}for(d.html(""),g=0;g<f.length;g++)d.html(d.html()+f[g]),g<f.length-1&&d.html(d.html()+"<br>")}return c}this.LEFT="left",this.TOP="top",this.RIGHT="right",this.BOTTOM="bottom";var d=this,e={},f=0,g="iconNode",h=a.campaignManager,j=a.campaignManagerScale,k=a.nodeFactory,l=j.pxToCoordinate(j.getScaledNodeSize())-1,m=a.allUsedEntity;this.openNodeId=null,this.openNodeValue=null,this.nodesContainerDOMId=a.nodesContainerDOMId,this.localeDateNTimePattern=a.localeDateNTimePattern,this.MAX_NUMBER_OF_TARGETS_FOR_DISPLAY=2,this.MAX_NUMBER_OF_REPORTS_FOR_DISPLAY=2,this.REACTION_OPENED="OPENED",this.REACTION_NOT_OPENED="NOT_OPENED",this.REACTION_CLICKED="CLICKED",this.REACTION_NOT_CLICKED="NOT_CLICKED",this.REACTION_BOUGHT="BOUGHT",this.REACTION_NOT_BOUGHT="NOT_BOUGHT",this.TITLE_ELLIPSIS_LENGTH=14;var n=function(){return g},o=function(a,b,c){var d=0,e=b.getScaledNodeSize()-b.getScaledNodeSize()*c/100;return{top:d,left:e}};this.getIconExtraInfoPosition=function(a,b){var c,e=0;if(("start"==a.type||"stop"==a.type)&&a.data.startType==constants.startTypeEvent&&a.data.event==constants.startEventReaction){if(a.usedAnchors.indexOf(d.BOTTOM)==-1&&a.usedAnchors.indexOf(d.TOP)==-1)return c=b.getScaledNodeSize(),e=0,{top:c,left:e};if(a.usedAnchors.indexOf(d.LEFT)==-1&&a.usedAnchors.indexOf(d.RIGHT)==-1)return c=.3*b.getScaledNodeSize(),e=b.getScaledNodeSize()*-1,{top:c,left:e}}return a.usedAnchors.indexOf(d.BOTTOM)==-1?(c=b.getScaledNodeSize(),e=0):a.usedAnchors.indexOf(d.LEFT)==-1?(c=.3*b.getScaledNodeSize(),e=b.getScaledNodeSize()*-1):a.usedAnchors.indexOf(d.RIGHT)==-1?(c=.3*b.getScaledNodeSize(),e=b.getScaledNodeSize()):a.usedAnchors.indexOf(d.TOP)==-1?(c=b.getScaledNodeSize()*-.4,e=0):(c=b.getScaledNodeSize(),e=0),{top:c,left:e}},this.isEmptyCell=function(a,b,c){return this.isEmptyArea(a,b,1,1,c)},this.isEmptyArea=function(a,b,c,e,f){var g=d.getNodesFromRegion(a,b,a+Math.abs(c)*l,b+Math.abs(e)*l,0);if(0==Object.keys(g).length&&0==f.length)return!0;var h=0;return _.each(g,function(a){for(var b=0;b<f.length;b++)if(f[b].DOMElement.id==a.element.id){h++;break}}),Object.keys(g).length==h},this.count=function(){return Object.keys(e).length},this.createNodeElement=function(a,b){var c=this.getNodeIdPrefix()+b,d=k.getEmptyImage(a),e=jQuery('<div class="'+n()+'" id="'+c+'"><img class="node-image" src="'+campaignManagerSettings.imagePath+d+'"></div>').appendTo("#"+this.nodesContainerDOMId).get(0);return jQuery(e).data("index",b).disableSelection().find("img").disableSelection(),e},this.addNode=function(a,b,c){if(this.isEmptyCell(b,c,[])){var d=this.generateId(),f=this.createNodeElement(a,d);return e[d]=k.createNode(a,b,c,f,d,h),e[d]}return!1},this.addNodeSequence=function(a,b,c){function f(a){return a>1?2*a-1:a}return!!(a.length>0&&this.isEmptyArea(b,c,f(a.length),1,[]))&&a.map(function(a,g){var i=d.generateId(),j=d.createNodeElement(a,i),m=(f(g+1)-1)*l;return e[i]=k.createNode(a,b+m,c,j,i,h)})},this.generateId=function(){return++f},this.restoreNode=function(a){if((a.id+"").indexOf("new")==-1)f<a.id&&(f=a.id+1);else{var b=a.id.split("-"),c=parseInt(b[b.length-1]);c>f&&(f=c)}var d=a.id,g=this.createNodeElement(a.type,d);return e[d]=k.createNodeFromData(a,g,h),e[d]},this.normalizeNodes=function(){d.addIndexOffset(-1,-1);var a=!1,b=!1;for(var c in e)(a===!1||a>e[c].x)&&(a=e[c].x),(b===!1||b>e[c].y)&&(b=e[c].y);return(a||b)&&d.addIndexOffset(-a,-b),d.addIndexOffset(1,1),{collapsedX:-a,collapsedY:-b}},this.getNodes=function(){return e},this.updateNode=function(a,b){jQuery.extend(e[a],b)},this.getIconNodesSelector=function(){return"."+n()},this.getNodeIdPrefix=function(){return"campaignManagerNode-"},this.getNewNodeIdPrefix=function(){return"new-"},this.deleteNode=function(a){for(i in e)if(e[i].element.id==a){jQuery(e[i].element).remove(),delete e[i];break}},this.getNodesMap=function(){var a={};return _.each(e,function(b){a[b.element.id]=b}),a},this.getNodeById=function(a){for(var b in e)if(e[b].element.id===a)return e[b];return null},this.addIndexOffset=function(a,b){for(i in e)this.updateNode(i,{x:e[i].x+a,y:e[i].y+b})},this.getNodesFromRegion=function(a,b,c,d,f){var g={};for(i in e)(e[i].x>=a&&e[i].x<=c&&e[i].y>=b&&e[i].y<=d||e[i].x+l+f>=a&&e[i].x+l+f<=c&&e[i].y>=b&&e[i].y<=d||e[i].x>=a&&e[i].x<=c&&e[i].y+l+f>=b&&e[i].y+l+f<=d||e[i].x+l+f>=a&&e[i].x+l+f<=c&&e[i].y+l+f>=b&&e[i].y+l+f<=d)&&(g[i]=e[i]);return g},this.updateNodeView=function(a,b){a.element.style.top=b.coordinateToPx(a.y)+"px",a.element.style.left=b.coordinateToPx(a.x)+"px",a.element.style.width=b.getScaledNodeSize()+"px",a.element.style.height=b.getScaledNodeSize()+"px",a.filled?this.setActiveImage(a):this.setNotActiveImage(a),d.updateNodeAdditionalViewElements(a,b)},this.setActiveImage=function(a){a.elementJQ.find(".node-image").attr("src",campaignManagerSettings.imagePath+k.getImageForNode(a))},this.setNotActiveImage=function(a){a.elementJQ.find(".node-image").attr("src",campaignManagerSettings.imagePath+k.getEmptyImageForNode(a))},this.updateNodeAdditionalViewElements=function(a,e){if(a.filled||a.type==k.NODE_TYPE_MAILING||a.type==k.NODE_TYPE_ACTION_BASED_MAILING||a.type==k.NODE_TYPE_DATE_BASED_MAILING||a.type==k.NODE_TYPE_FOLLOWUP_MAILING||a.type==k.NODE_TYPE_IMPORT&&(a.type!=k.NODE_TYPE_IMPORT||0!=a.data.importexportId)||a.type==k.NODE_TYPE_EXPORT&&(a.type!=k.NODE_TYPE_EXPORT||0!=a.data.importexportId)){var f=90*e.getCurrentScale(),g=d.getIconExtraInfoPosition(a,e),i=g.top,j=g.left;if(a.elementJQ.find(".icon-extra-info").each(function(){jQuery(this).remove()}),_.each(a.elementJQ.find(".icon-footnote-number"),function(a){var b=$(a),c=110*e.getCurrentScale(),d=5.2*e.getCurrentScale();b.css("font-size",c+"%"),b.css("padding","0 "+d+"px")}),"start"==a.type||"stop"==a.type){var l;if(void 0!=a.data.date){var n=new Date(a.data.date);n.setHours(a.data.hour,a.data.minute),l=AGN.Lib.DateFormat.format(n,this.localeDateNTimePattern)}else l="";if("start"==a.type&&a.data.startType==constants.startTypeDate){var p=t("workflow.start.start_date");a.elementJQ.append("<div class='icon-extra-info'>"+p+":<br>"+l+"</div>")}else if("stop"==a.type&&a.data.endType==constants.endTypeDate)p=t("workflow.stop.end_date"),a.elementJQ.append("<div class='icon-extra-info'>"+p+":<br>"+l+"</div>");else if(a.data.startType==constants.startTypeEvent&&a.data.event==constants.startEventReaction){var q="start"==a.type?t("workflow.start.start_event"):t("workflow.stop.end_event"),r=k.getReactionName(a.data.reaction);a.elementJQ.append("<div class='icon-extra-info'>"+q+":<br>"+r+"<br>("+l+")</div>");var s=k.getReactionImage(a.data.reaction);a.elementJQ.append("<img class='icon-extra-info' title='"+r+"'/>"),a.elementJQ.find("img.icon-extra-info").attr("src",campaignManagerSettings.imagePath+s);var u=60;a.elementJQ.find("img.icon-extra-info").css("height",""+u+"%"),a.elementJQ.find("img.icon-extra-info").css("width",""+u+"%");var g=o(a.usedAnchors,e,u);a.elementJQ.find("img.icon-extra-info").css("top",g.top+"px"),a.elementJQ.find("img.icon-extra-info").css("left",g.left+"px")}else if(a.data.startType==constants.startTypeEvent&&a.data.event==constants.startEventDate){var v=a.data.dateProfileField+" "+constants.operators[a.data.dateFieldOperator]+" "+(null==a.data.dateFieldValue?"":a.data.dateFieldValue),w=t("workflow.start.start_event");a.elementJQ.append("<div class='icon-extra-info'>"+w+":<br>"+v+"<br>("+l+")</div>")}else if(a.data.endType==constants.endTypeAutomatic){var x=h.isNormalCampaignActionsType()?t("workflow.stop.automatic_end"):t("workflow.stop.open_end");a.elementJQ.append("<div class='icon-extra-info'>"+x+"</div>")}}else if("deadline"===a.type){if(a.data.deadlineType===constants.deadlineTypeFixedDeadline){var n=new Date(a.data.date);n.setHours(a.data.hour,a.data.minute);var l=AGN.Lib.DateFormat.format(n,this.localeDateNTimePattern);p=t("workflow.deadline.title"),a.elementJQ.append("<div class='icon-extra-info'>"+p+":<br>"+l+"</div>")}else if(a.data.deadlineType===constants.deadlineTypeDelay){var y=t("workflow.defaults.delay")+": <br>"+a.data.delayValue+" ";if(a.data.delayValue>1)switch(a.data.timeUnit){case constants.deadlineTimeUnitMinute:y+=t("workflow.deadline.minutes");break;case constants.deadlineTimeUnitHour:y+=t("workflow.defaults.hours");break;case constants.deadlineTimeUnitDay:y+=t("workflow.defaults.days");break;case constants.deadlineTimeUnitWeek:y+=t("workflow.defaults.weeks");break;case constants.deadlineTimeUnitMonth:y+=t("workflow.defaults.months")}else switch(a.data.timeUnit){case constants.deadlineTimeUnitMinute:y+=t("workflow.deadline.minute");
break;case constants.deadlineTimeUnitHour:y+=t("workflow.defaults.hour");break;case constants.deadlineTimeUnitDay:y+=t("workflow.defaults.day");break;case constants.deadlineTimeUnitWeek:y+=t("workflow.defaults.week");break;case constants.deadlineTimeUnitMonth:y+=t("workflow.defaults.month")}a.elementJQ.append("<div class='icon-extra-info'>"+y+"</div>")}}else if("parameter"==a.type)a.elementJQ.append("<div class='icon-extra-info icon-extra-info-center'>"+a.data.value+"</div>"),i=.36*e.getScaledNodeSize(),a.elementJQ.find("div.icon-extra-info-center").css("top",i+"px"),a.elementJQ.find("div.icon-extra-info-center").css("left","0px"),void 0!=a.statisticsList&&(a.elementJQ.append("<div class='icon-extra-info stat-value'><span class='node-stats'>"+a.statisticsList[0]+"</span></div>"),a.elementJQ.find("div.stat-value").css("top",g.top+"px"),a.elementJQ.find("div.stat-value").css("left",g.left+"px"));else if("decision"==a.type){var z="";if(a.data.decisionType==constants.decisionTypeAutoOptimization){if(z=t("workflow.mailing.autooptimization")+", ",z+=a.data.aoDecisionCriteria==constants.decisionAOCriteriaClickRate?t("workflow.defaults.ckickrate"):a.data.aoDecisionCriteria==constants.decisionAOCriteriaOpenrate?t("workflow.opening_rate"):t("workflow.statistic.revenue"),a.data.threshold&&""!=a.data.threshold&&(z+=": "+a.data.threshold),void 0!=a.data.decisionDate){var l=AGN.Lib.DateFormat.format(a.data.decisionDate,this.localeDateNTimePattern);z+=", "+t("workflow.defaults.date")+": "+l}}else if(z=t("workflow.decision")+", ",a.data.decisionCriteria==constants.decisionReaction){var r=k.getReactionName(a.data.reaction);z+=t("workflow.reaction.title")+": "+r+", "+t("workflow.defaults.mailing")+": "+m.allMailings[a.data.mailingId]}else{for(var A={0:"",1:"("},B={0:"",1:")"},C="",D=0,E=a.data.rules.length;D<E;D++)0!=C.length&&(C+=" "+constants.chainOperatorOptions[a.data.rules[D].chainOperator]+" "),C+=A[a.data.rules[D].parenthesisOpened],C+=a.data.profileField+" ",C+=constants.operatorsMap[a.data.rules[D].primaryOperator]+" ",C+="GENDER"==a.data.profileField?constants.genderOptions[a.data.rules[D].primaryValue]:a.data.rules[D].primaryValue,C+=B[a.data.rules[D].parenthesisClosed];z+=t("workflow.start.rule")+": "+C}a.elementJQ.append("<div class='icon-extra-info'>"+z+"</div>")}else if("recipient"==a.type){var F=t("workflow.mailinglist.short")+": "+m.allMailinglists[a.data.mailinglistId];if(a.data.targets&&a.data.targets.length>0)for(F+="<br>"+t("workflow.target.short")+": ",D=0;D<a.data.targets.length;D++){if(F+=m.allTargets[a.data.targets[D]],D==d.MAX_NUMBER_OF_TARGETS_FOR_DISPLAY-1&&a.data.targets.length>d.MAX_NUMBER_OF_TARGETS_FOR_DISPLAY){F+=", ...";break}if(D<a.data.targets.length-1)switch(String(a.data.targetsOption)){case"ALL_TARGETS_REQUIRED":F+=" ‚à© ";break;case"NOT_IN_TARGETS":F+=" ‚â† ";break;case"ONE_TARGET_REQUIRED":F+=" ‚à™ ";break;default:F+=", "}}if(a.elementJQ.append("<div class='icon-extra-info'>"+F+"</div>"),0==j&&i<1){a.elementJQ.find("div.icon-extra-info").css("font-size",f+"%");var G=-1*a.elementJQ.find("div.icon-extra-info").height();i>G&&(i=G)}}else if("report"==a.type){for(var H="",D=0;D<a.data.reports.length;D++){if(H+=m.allReports[a.data.reports[D]],D==d.MAX_NUMBER_OF_REPORTS_FOR_DISPLAY-1&&a.data.reports.length>d.MAX_NUMBER_OF_REPORTS_FOR_DISPLAY){H+=", ...";break}D<a.data.reports.length-1&&(H+=",<br>")}a.elementJQ.append("<div class='icon-extra-info'>"+t("workflow.defaults.report")+":<br>"+H+"</div>")}else if("archive"==a.type)a.elementJQ.append("<div class='icon-extra-info'>"+m.allCampaigns[a.data.campaignId]+"</div>");else if("form"==a.type)a.elementJQ.append("<div class='icon-extra-info'>"+m.allUserForms[a.data.userFormId]+"</div>");else if("mailing"==a.type||"actionbased_mailing"==a.type||"datebased_mailing"==a.type){var F="";a.iconTitle?F=a.iconTitle:a.filled&&a.data.mailingId>0&&(F=m.allMailings[a.data.mailingId]),a.elementJQ.append("<div class='icon-extra-info'>"+F+"</div>")}else if("followup_mailing"==a.type){var I,J,F="",K="";if(a.iconTitle){var L=a.iconTitle.split(":/");L.length&&(L.length>1?(I=L[0],J=L[1]):J=L[0])}else a.filled&&a.data.mailingId>0&&(I=m.allMailings[a.data.baseMailingId]||"?",J=m.allMailings[a.data.mailingId]||"?");if(J)if(I){var M=I,N=J;M.length>d.TITLE_ELLIPSIS_LENGTH&&(M=M.substring(0,d.TITLE_ELLIPSIS_LENGTH)+"..."),N.length>d.TITLE_ELLIPSIS_LENGTH&&(N=N.substring(0,d.TITLE_ELLIPSIS_LENGTH)+"...");var O=b(a.data.decisionCriterion);F=M+" ("+O+") "+N,K=I+" ("+O+") "+J}else F=J;a.elementJQ.append("<div class='icon-extra-info'>"+F+"</div>"),K&&a.elementJQ.on({mouseover:function(){a.elementJQ.find(".icon-extra-info").html(K)},mouseleave:function(){a.elementJQ.find(".icon-extra-info").html(F)}})}else a.type==k.NODE_TYPE_IMPORT?a.elementJQ.append("<div class='icon-extra-info'>"+m.allAutoImports[a.data.importexportId]+"</div>"):a.type==k.NODE_TYPE_EXPORT&&a.elementJQ.append("<div class='icon-extra-info'>"+m.allAutoExports[a.data.importexportId]+"</div>");var P=a.elementJQ.find("div.icon-extra-info");if(P.css("font-size",f+"%"),"parameter"!=a.type&&(P.css("left",j+"px"),i<0&&0==j?P.css("top",-P.height()+"px"):P.css("top",i+"px")),"parameter"!=a.type)var Q=a.elementJQ.find("div.icon-extra-info"),R=Q.html(),S=c(Q,e.getScaledNodeSize());if(S&&(Q.mouseover(function(){jQuery("#icon-label-popup-holder").append("<div id='node-label-fulltext-popup'>"+R+"</div>");var a=jQuery("#node-label-fulltext-popup");a.offset({top:Q.offset().top,left:Q.offset().left+e.getScaledNodeSize()})}),Q.mouseout(function(){jQuery("#node-label-fulltext-popup").remove()})),void 0!=a.statisticsList&&"parameter"!=a.type&&"decision"!=a.type)for(D=0;D<a.statisticsList.length;D++){var P=a.elementJQ.find("div.icon-extra-info");P.append("<br><span class='node-stats'>"+a.statisticsList[D]+"</span>"),i<0&&0==j&&P.css("top",-P.height()+"px")}h.updateLabelConnection(a)}};var p=function(a,b,c){for(var e=a.text(),f=d.TITLE_ELLIPSIS_LENGTH;f>0;f--){var g=b.substr(0,f)+"...";if(a.text(g),q(a)<=c)return a.text(e),g}return a.text(e),""},q=function(a){var b=a.html();a.html("<span class='span-bounder'>"+b+"</span>");var c=a.find(".span-bounder").width();return a.html(b),c};this.resetUsedAnchors=function(){for(var a in e)e[a].usedAnchors=[];return e},this.getNodesByTypeList=function(a){var b=[];for(var c in e)jQuery.inArray(e[c].type,a)!=-1&&b.push(e[c]);return b},this.getNodesByType=function(a){return d.getNodesByTypeList([a])},this.openNodeIcon=function(){if(null!=d.openNodeId&&0!=d.openNodeId){var a=h.getCMNodes().getNodeIdPrefix()+d.openNodeId,b=h.getCampaignManagerNodes().getNodeById(a);null!=b&&null!=d.openNodeValue&&("mailing"==b.type||"actionbased_mailing"==b.type||"datebased_mailing"==b.type||"followup_mailing"==b.type?b.data.mailingId=d.openNodeValue:"recipient"==b.type&&"0"!=d.openNodeValue&&jQuery.inArray(d.openNodeValue,b.data.targets)==-1?b.data.targets.push(d.openNodeValue):"archive"==b.type?b.data.campaignId=d.openNodeValue:"form"==b.type?b.data.userFormId=d.openNodeValue:"report"==b.type&&"0"!=d.openNodeValue&&jQuery.inArray(d.openNodeValue,b.data.reports)==-1?b.data.reports.push(d.openNodeValue):"import"!=b.type&&"export"!=b.type||(b.data.importexportId=d.openNodeValue));var c=jQuery("#"+a);c.length>0&&(d.openNodeId=null,d.openNodeValue=null,c.dblclick())}},this.setOpenNode=function(a,b){this.openNodeId=a,this.openNodeValue=b}};AGN.Lib.WM.CampaignManagerNodes=a}(),function(){var a=function(a){var b=0,c=this,d=a.campaignManagerSettings,e=function(){return(d.defaultScale-d.minScale)/((d.maxScale-d.minScale)/100)},f=e();this.getCurrentScale=function(){return 0==b?d.minScale+f*(d.maxScale-d.minScale)/100:b},this.setExternalScale=function(a){b=a},this.getScaledGridSize=function(){return d.gridSize*c.getCurrentScale()},this.getScaledNodeSize=function(){return d.nodeSize*c.getCurrentScale()},this.getCurrentScaleSliderPosition=function(){return f},this.setCurrentScaleSliderPosition=function(a){f=a},this.coordinateToPx=function(a){return Math.round(a*c.getScaledGridSize())},this.pxToCoordinate=function(a){return Math.round(a/c.getScaledGridSize())},this.pxToMaxCoordinate=function(a){return Math.ceil(a/c.getScaledGridSize())},this.getLineWidth=function(){return Math.round(d.lineWidth*c.getCurrentScale())},this.getArrowLength=function(){return Math.round(d.arrowSize*c.getCurrentScale())},this.getArrowWidth=function(){return Math.round(d.arrowSize*c.getCurrentScale())},this.getLabelFontSize=function(){return Math.round(d.labelFontSize*c.getCurrentScale())}};AGN.Lib.WM.CampaignManagerScale=a}(),function(){var a={selected:[],prevSelected:null,lastSelected:null,onSelectionChanged:null,nodeSelector:"",init:function(a){this.nodeSelector=a.nodeSelector,this.onSelectionChanged=a.onSelectionChanged},handleClick:function(a,b){a.stopPropagation(),this.selected.length>0&&(this.prevSelected=this.selected[this.selected.length-1]),this.validateMultiselection(a),$.inArray(b.attr("id"),this.selected)!=-1?this.isMultiselection(a)&&this.unselect(b):this.select(b),this.onSelectionChanged()},isMultiselection:function(a){return a.shiftKey},validateMultiselection:function(a){this.isMultiselection(a)||this.clear()},select:function(a){this.selected.push(a.attr("id")),a.addClass("selected"),this.lastSelected=a.attr("id"),this.onSelectionChanged()},unselect:function(a){this.selected.splice($.inArray(a.attr("id"),this.selected),1),a.removeClass("selected"),this.onSelectionChanged()},isSelected:function(a){return $.inArray(a,this.selected)!=-1},clear:function(){this.selected=[],$(this.nodeSelector).removeClass("selected"),this.onSelectionChanged()},getSelected:function(){return this.selected}};AGN.Lib.WM.CampaignManagerSelection=a}(),campaignManagerSettings={renderMode:jsPlumb.CANVAS,gridSize:20,nodeSize:64,arrowSize:10,lineWidth:4,lineColor:"#2e83b1",minScale:.5,defaultScale:1,maxScale:1.5,rapidButtonSize:16,dragStageKeyCode:32,deleteKeyCode:46,multiConnectionKeyCode:16,navigatorStep:100,imagePath:"",MAX_UNDO_HISTORY:17,zoomStep:10,labelFontSize:12},function(){var a=function(a){this.showStatistics=function(b){jQuery.ajax({type:"POST",url:"workflow.do;jsessionid="+a.getSessionId(),data:{method:"loadStatistics",workflowId:b},success:function(b){for(var c in b)a.getCMNodes().getNodes()[c].statisticsList=b[c];a.relayout(),window.status="wmLoadFinished"}})},this.hideStatistics=function(){var b=a.getCMNodes().getNodes();for(var c in b){var d=b[c];void 0!=d.statisticsList&&delete d.statisticsList}a.relayout()},this.toggleStatistics=function(a){this.statisticsVisible?this.hideStatistics():this.showStatistics(a),this.statisticsVisible=!this.statisticsVisible}};AGN.Lib.WM.WorkflowManagerStatistics=a}(),function(){function a(a,b,c){if($.isFunction(b)){var d=arguments.length>2;return function(){var e=b.apply(a,arguments);return d?c:e}}return b}var b={arrowMode:!1,deleteSelected:!1,connectSelected:!1,undoSelected:!1,zoomMinSelected:!1,zoomMiddleSelected:!1,zoomMaxSelected:!1,doAutoLayout:!1,init:function(b){$.extend(this,b),$("#arrowButton").click(a(this,this.arrowButtonClick)),$("#autoLayout, #autoLayoutItem").click(a(this,this.doAutoLayout)),$("#deleteButton, #deleteItem").click(a(this,this.deleteSelected)),$("#undoButton, #undoItem").click(a(this,this.undoSelected,!1)),$("#zoomMin, #zoomMinItem").click(a(this,this.zoomMinSelected,!1)),$("#zoomMiddle, #zoomMiddleItem").click(a(this,this.zoomMiddleSelected,!1)),$("#zoomMax, #zoomMaxItem").click(a(this,this.zoomMaxSelected,!1))},arrowButtonClick:function(){this.arrowMode?this.arrowMode=!1:this.connectSelected()||(this.arrowMode=!0),this.arrowMode?$("#arrowButton").addClass("button-selected"):$("#arrowButton").removeClass("button-selected")},setUndoAvailable:function(a){a?($("#undoButtonFake").css("visibility","hidden"),$("#undoButton").removeClass("backgroundImageNone")):($("#undoButtonFake").css("visibility","visible"),$("#undoButton").addClass("backgroundImageNone")),$("#undoItem").prop("disabled",!a)},setDeletionAvailable:function(a){$("#deleteButton, #deleteItem").prop("disabled",!a)}};AGN.Lib.WM.CampaignManagerToolbar=b}(),agGrid.BaseFilter.prototype.generateTemplate=function(){var a=this.translate.bind(this),b=this.createConditionBody(0),c=this.acceptsBooleanLogic()?this.wrapCondition(b):b;return"<div>\n                    <div class='ag-filter-body-wrapper'>"+c+'</div>\n                    <div class="ag-filter-apply-panel" id="applyPanel">\n                        <a href="#" id="clearButton">'+a("clearFilter")+'</a>\n                        <button type="button" id="applyButton">'+a("applyFilter")+"</button>\n                    </div>\n                </div>"},agGrid.BaseFilter.prototype.createConditionTemplate=function(a){return'<div class="ag-filter-condition">\n            <div class="ag-filter-condition-type radio"><label class="" for="andId"><input id="andId" type="radio" class="and" name="booleanLogic" value="AND" checked="checked" /> AND</label>\n            <label  class="" for="orId"><input id="orId" type="radio" class="or" name="booleanLogic" value="OR" /> OR</label></div>\n            <div>'+this.createConditionBody(a)+"</div>\n        </div>"},agGrid.TextFilter.prototype.bodyTemplate=function(a){var b=this.translate.bind(this),c=0==a?"filterText":"filterConditionText";return'<div class="ag-filter-body">\n            <input class="ag-filter-filter form-control" id='+c+' type="text" placeholder="'+b("filterOoo","Filter...")+'"/>\n        </div>'},agGrid.TextFilter.prototype.generateFilterHeader=function(a){var b=this,c=this.getApplicableFilterTypes(),d=this.filterParams.filterOptions,e=d?d:c,f=e.map(function(a){var c=b.translate(a);return'<option value="'+a+'">'+c+"</option>"}),g=1==f.length?"disabled":"",h=0==a?"filterType":"filterConditionType";return f.length<=0?"":'<div>\n                <select class="ag-filter-select form-control" id="'+h+'" '+g+">\n                    "+f.join("")+"\n                </select>\n            </div>"},agGrid.NumberFilter.prototype.bodyTemplate=function(a){var b=this.translate.bind(this),c=0==a?"filterText":"filterConditionText",d=0==a?"filterNumberToPanel":"filterNumberToPanelCondition",e=0==a?"filterToText":"filterToConditionText";return'<div class="ag-filter-body">\n            <div>\n                <input class="ag-filter-filter form-control" id="'+c+'" type="text" placeholder="'+b("filterOoo")+'"/>\n            </div>\n             <div class="ag-filter-number-to" id="'+d+'">\n                <input class="ag-filter-filter form-control" id="'+e+'" type="text" placeholder="'+b("filterOoo")+'"/>\n            </div>\n        </div>'},agGrid.NumberFilter.prototype.generateFilterHeader=agGrid.TextFilter.prototype.generateFilterHeader,agGrid.TextFilter.prototype.createConditionTemplate=function(a){return'<div class="ag-filter-condition">\n            <div class="ag-filter-condition-type radio"><label class="" for="andId"><input id="andId" type="radio" class="and" name="booleanLogic" value="AND" checked="checked" /> AND</label>\n            <label  class="" for="orId"><input id="orId" type="radio" class="or" name="booleanLogic" value="OR" /> OR</label></div>\n            <div>'+this.createConditionBody(a)+"</div>\n        </div>"},function(){var a=function(){};a.prototype.init=function(a){this.eGui=document.createElement("div"),a.optionDateFormat?this.format=a.optionDateFormat:(this.format="DD.MM.YYYY",a.optionShowTime&&(a.optionShowSeconds?this.format+=" HH:mm:ss":this.format+=" HH:mm")),a.value&&(a.valueFormatted||(a.valueFormatted=moment(a.value).format(this.format)),this.eGui.innerHTML=a.valueFormatted)},a.prototype.getGui=function(){return this.eGui},a.prototype.refresh=function(a){return a.value?(a.valueFormatted=moment(a.value).format(this.format),this.eGui.innerHTML=a.valueFormatted):this.eGui.innerHTML="",!0},a.prototype.destroy=function(){},AGN.Opt.TableCellRenderers.DateCellRenderer=a}(),function(){var a=function(){};a.prototype.init=function(a){this.eGui=document.createElement("div"),this.eGui.innerHTML='<div class="ag-filter">  <div>    <div class="ag-filter-body-wrapper">      <div class="ag-filter-body">        <label class="">'+t("tables.from")+'</label>        <input class="ag-filter-filter form-control js-datepicker js-datepicker-right" id="filterBegin" type="text" placeholder="">      </div>      <div class="ag-filter-body">        <label class="">'+t("tables.till")+'</label>        <input class="ag-filter-filter form-control js-datepicker js-datepicker-right" id="filterEnd" type="text" placeholder="">      </div>    </div>    <div class="ag-filter-apply-panel" id="applyPanel">      <a href="#" id="clearFilter" class="">'+t("tables.clearFilter")+"</a>    </div>  </div></div>",this.filterBegin=$(this.eGui).find("#filterBegin"),this.filterEnd=$(this.eGui).find("#filterEnd"),this.beginDate=void 0,this.endDate=void 0,this.clearFilter=$(this.eGui).find("#clearFilter"),this.filterBegin.on("change",this.filterBeginChanged.bind(this)),this.filterEnd.on("change",this.filterEndChanged.bind(this)),this.clearFilter.on("click",this.filterClear.bind(this)),this.filterActive=!1,this.filterChangedCallback=a.filterChangedCallback,this.valueGetter=a.valueGetter},a.prototype.afterGuiAttached=function(){AGN.Initializers.PickADate($(this.eGui))},a.prototype.destroy=function(){this.filterBegin.off("change",this.filterBeginChanged.bind(this)),this.filterEnd.off("change",this.filterEndChanged.bind(this))},a.prototype.filterBeginChanged=function(){var a=this.filterEnd.data("pickadate");a.set("min",this.filterBegin.val()),this.beginDate=this.filterBegin.data("pickadate").get("select").pick,this.filterActive=this.beginDate||this.endDate,this.filterChangedCallback()},a.prototype.filterEndChanged=function(){var a=this.filterBegin.data("pickadate");a.set("max",this.filterEnd.val()),this.endDate=this.filterEnd.data("pickadate").get("select").pick,this.filterActive=this.beginDate||this.endDate,this.filterChangedCallback()},a.prototype.filterClear=function(){var a,b;this.filterEnd.val(void 0),this.filterBegin.val(void 0),this.beginDate=void 0,this.endDate=void 0,b=this.filterEnd.data("pickadate"),b.set("min",!1),a=this.filterBegin.data("pickadate"),a.set("max",!1),this.filterActive=!1,this.filterChangedCallback()},a.prototype.getGui=function(){return this.eGui},a.prototype.doesFilterPass=function(a){var b=this.valueGetter(a.node);return!this.beginDate&&!this.endDate||!!b&&(this.beginDate&&this.endDate?b>=this.beginDate&&b<=this.endDate:this.beginDate?b>=this.beginDate:this.endDate?b<=this.endDate:void 0)},a.prototype.parseDate=function(a){if(a)return moment(a,t("date.format").toUpperCase()).valueOf()},a.prototype.isFilterActive=function(){return this.filterActive},a.prototype.getModel=function(){},a.prototype.setModel=function(){},AGN.Lib.TableDateFilter=a}(),function(){function a(a){return a.valueFormatted?a.valueFormatted:a.value}var b=AGN.Lib.Table,c=AGN.Lib.Confirm,d=AGN.Lib.Page,e=AGN.Lib.Tooltip,f=function(){};f.prototype.init=function(f){f.eGridCell.classList.add("ag-cell-table-actions"),this.eGui=document.createElement("div"),this.eGui.innerHTML='<button type="button" class="btn btn-regular btn-alert"><i class="icon icon-trash-o"></i></button>',this.eButton=this.eGui.querySelector(".btn"),f.colDef["button-tooltip"]&&e.createTip($(this.eButton),f.colDef["button-tooltip"]);var g=a(f);g?this.eButton.setAttribute("href",g):this.eGui.style.visibility="hidden",this.eventListener=function(e){var g=this;return $.get(a(f)).done(function(a){var e,h=$(a);e=h.all(".modal"),1==e.length?c.create(a).done(function(){b.get($(g)).api.updateRowData({remove:[f.data]})}):d.render(a)}),e.preventDefault(),!1},this.eButton.addEventListener("click",this.eventListener)},f.prototype.getGui=function(){return this.eGui},f.prototype.refresh=function(b){var c=a(b);return this.eGui.style.visibility=c?"visible":"hidden",this.eButton.dataset.url=c,!0},f.prototype.destroy=function(){this.eButton.removeEventListener("click",this.eventListener)},AGN.Opt.TableCellRenderers.DeleteCellRenderer=f}(),function(){function a(a,b,c,d,e){return a=parseFloat(a),b=parseFloat(b),isNaN(a)||isNaN(b)?isNaN(a)?isNaN(b)?0:e?-1:1:e?1:-1:a-b}AGN.Lib.TableNumberComparator=a}(),function(){var a=(AGN.Lib.Table,function(){});a.prototype.init=function(a){var b=this;this.eGui=document.createElement("div"),this.eGui.innerHTML='<label><input type="checkbox" name="" value="on"</label>',this.eInput=this.eGui.querySelector("input"),this.eInput.setAttribute("name",a.valueFormatted?a.valueFormatted:a.value),this.eventListener=function(){this!==b.eInput&&(b.eInput.checked=!b.eInput.checked)},this.eGui.addEventListener("click",this.eventListener)},a.prototype.getGui=function(){return this.eGui},a.prototype.refresh=function(a){return this.eInput.setAttribute("name",a.valueFormatted?a.valueFormatted:a.value),!0},a.prototype.destroy=function(){this.eGui.removeEventListener("click",this.eventListener)},AGN.Lib.SelectCellRenderer=a}(),function(){var a=(AGN.Lib.Table,function(){});a.prototype.init=function(a){this.agParams=a,this.eGui=document.createElement("div"),this.eGui.innerHTML='<input type="checkbox" data-form-bulk="bulkID">'},a.prototype.getGui=function(){return this.eGui},a.prototype.destroy=function(){},AGN.Lib.SelectHeaderComponent=a}(),function(){var a=function(){};a.prototype.init=function(a){this.column=a.colDef.field,this.values=_.sortBy(_.uniq(_.map(a.rowModel.rowsToDisplay,function(b){return b.data[a.colDef.field]}))),this.eGui=document.createElement("div"),this.eGui.innerHTML='<div class="ag-filter">  <div>    <div class="ag-filter-body-wrapper">'+this.buildOptions()+'    </div>    <div class="ag-filter-apply-panel" id="applyPanel">      <a href="#" id="clearFilter" class="">'+t("tables.clearFilter")+"</a>    </div>  </div></div>",this.checkBoxes=$(this.eGui).find("input"),this.checkedBoxes=[],this.clearFilter=$(this.eGui).find("#clearFilter"),this.checkBoxes.on("change",this.checkBoxesChanged.bind(this)),this.clearFilter.on("click",this.filterClear.bind(this)),this.filterActive=!1,this.filterChangedCallback=a.filterChangedCallback,this.valueGetter=a.valueGetter},a.prototype.buildOptions=function(){return _.map(this.values,function(a){return'<div class="ag-filter-body">  <label class="">    <input class="" type="checkbox" value="'+a+'">    '+a+"  </label></div>"}).join("\n")},a.prototype.afterGuiAttached=function(){},a.prototype.destroy=function(){this.checkBoxes.off("change",this.checkBoxesChanged.bind(this)),this.clearFilter.off("click",this.filterClear.bind(this))},a.prototype.checkBoxesChanged=function(){this.valuesFiltered=_.map(_.filter(this.checkBoxes,{checked:!0}),function(a){return a.value}),this.filterActive=0!=this.valuesFiltered.length,this.filterChangedCallback()},a.prototype.filterClear=function(){this.checkBoxes.removeAttr("checked"),this.valuesFiltered=[],this.filterActive=!1,this.filterChangedCallback()},a.prototype.getGui=function(){return this.eGui},a.prototype.doesFilterPass=function(a){var b=this.valueGetter(a.node);return _.contains(this.valuesFiltered,b)},a.prototype.isFilterActive=function(){return this.filterActive},a.prototype.getModel=function(){},a.prototype.setModel=function(){},AGN.Lib.TableSetFilter=a}(),function(){var a=AGN.Lib.Editor;AGN.Initializers.Ace=function(b){b||(b=$(document)),_.each(b.find(".js-editor, .js-editor-text, .js-editor-eql, .js-editor-css"),function(b){a.get($(b))})}}(),function(){function a(a,c,d){c.change(function(){b(a,c,d)})}function b(a,b,c){c?b.is(":checked")?a.removeClass("hidden"):a.addClass("hidden"):b.is(":checked")?a.addClass("hidden"):a.removeClass("hidden")}function c(a,b,c){b.change(function(){d(a,b,c)})}function d(a,b,c){for(var d=b.val(),e=!1,f=0;f<c.length;f++)if(c[f]==d){e=!0;break}e?a.removeClass("hidden"):a.addClass("hidden")}AGN.Initializers.CheckboxHider=function(e){e||(e=$(document)),_.each(e.find("[data-show-by-checkbox]"),function(c){var d=$(c),e=$(d.data("show-by-checkbox"));b(d,e,!0),a(d,e,!0)}),_.each(e.find("[data-hide-by-checkbox]"),function(c){var d=$(c),e=$(d.data("hide-by-checkbox"));b(d,e,!1),a(d,e,!1)}),_.each(e.find("[data-show-by-select]"),function(a){for(var b=$(a),e=$(b.data("show-by-select")),f=b.data("show-by-select-values").split(","),g=0;g<f.length;g++)f[g]=f[g].trim();d(b,e,f),c(b,e,f)})}}(),function(){function a(a,b){var c=a.attr("id"),d=a.data("_editor");window.CKEDITOR&&CKEDITOR.instances[c]?CKEDITOR.instances[c].setData(b):d?d.val(b):a.val(b)}var b=AGN.Lib.AutoSave;AGN.Initializers.AutoSave=function(c){c||(c=$(document)),_.each(c.find("[data-autosave-scope]"),function(c){function d(){if(j=j.filter(function(a,b){return document.contains(b)}),j.length>0){var a={};return _.each(j,function(b){var c=$(b);a["value#"+c.data("autosave")]=c.val()}),a}return!1}function e(b){var c=$.map(j,function(c){var d=$(c),e="value#"+d.data("autosave");if(e in b){var f=d.val(),g=b[e];if(f!=g){if(!d.is("[data-autorestore]"))return{target:d,value:g};a(d,g)}return null}});return c.length>0&&c}function f(b){_.each(b,function(b){a(b.target,b.value)})}var g=$(c),h=g.data("autosave-scope"),i=g.data("autosave-period"),j=g.all("[data-autosave]");j.length>0&&b.initialize(h,d,e,f,i)})}}(),AGN.Lib.DomInitializer.new("autosubmit",function(a){setTimeout(function(){AGN.Lib.Form.get(a).submit()},100)}),AGN.Lib.DomInitializer.new("calendar-table",function(){var a=this.config;AGN.Lib.CalendarService.setUp(a),window.setInterval(AGN.Lib.CalendarService.checkProgress,500),AGN.Lib.CalendarService.getMonthMode()?AGN.Lib.CalendarService.generateMonthCalendar(AGN.Lib.CalendarService.getCurMonth(),AGN.Lib.CalendarService.getCurYear()):AGN.Lib.CalendarService.generateWeekCalendar(AGN.Lib.CalendarService.getCurMonth(),AGN.Lib.CalendarService.getCurYear(),AGN.Lib.CalendarService.getCurDay()),AGN.Lib.CalendarService.generateUnsentMailingsTable();var b=AGN.Lib.Action;b.new({click:"#dateTimePicker"},function(){this.event.stopPropagation()}),b.new({click:"#dateTimePickerButton"},function(){this.event.stopPropagation()}),b.new({click:".js-calendar-navigate-previous"},function(){return AGN.Lib.CalendarService.prevEntry(),this.event.preventDefault(),!1}),b.new({click:".js-calendar-navigate-next"},function(){return AGN.Lib.CalendarService.nextEntry(),this.event.preventDefault(),!1}),b.new({click:".js-calendar-navigate-today"},function(){return AGN.Lib.CalendarService.jumpToday(),this.event.preventDefault(),!1}),b.new({click:".js-calendar-view-month"},function(){return AGN.Lib.CalendarService.toggleDateSelectionMode("SELECT_MONTH"),this.event.preventDefault(),!1}),b.new({click:".js-calendar-view-week"},function(){return AGN.Lib.CalendarService.toggleDateSelectionMode("SELECT_WEEK"),this.event.preventDefault(),!1}),b.new({click:".js-calendar-list-unsent"},function(){return AGN.Lib.CalendarService.generateUnsentMailingsTable(),this.event.preventDefault(),!1}),b.new({click:".js-calendar-list-planned"},function(){return AGN.Lib.CalendarService.generatePlannedMailingsTable(),this.event.preventDefault(),!1}),b.new({click:"#comment-save-button"},function(){AGN.Lib.ReminderService.reminder.onSave()}),b.new({click:".calendar-comments-add"},function(){var b,c=this.el;return b=c.parents(".calendar-day-container").data("date"),AGN.Lib.CalendarService.showCommentDialog(AGN.Lib.ReminderService.getNewReminder(b,a)),!1}),b.new({click:".calendar-comments-toggle"},function(){var a,b=this.el;return a=b.parents(".calendar-day-container").data("date"),AGN.Lib.CalendarService.toggleComment(a),!1}),b.new({change:".js-calendar-toggle-all-comments"},function(){this.el.prop("checked")?$(".calendar-table").find(".calendar-comment").show():$(".calendar-table").find(".calendar-comment").hide()}),b.new({change:"#scheduleReminder"},function(){AGN.Lib.ReminderService.onScheduleChanged()}),b.new({change:"#isDeadline"},function(){AGN.Lib.ReminderService.onDeadlineChanged()}),b.new({change:"#month_list, #month_list_year, #weeks_list"},function(){AGN.Lib.CalendarService.showDate()}),b.new({change:"#weeks_list_year"},function(){AGN.Lib.CalendarService.createWeeksList(this.el[0])}),b.new({change:'#reminderDetails input[name="userType"]'},function(){var a=this.el[0];AGN.Lib.ReminderService.onUserTypeChanged(a.value)}),this.addAction({mouseover:"mailing-popup"},function(){var a=this.el,b=$("#popup-"+a.data("mailing-id"));if(b.exists()){var c,d=$(window).scrollTop(),e=b.outerHeight(),f=15,g=a.offset().top,h=g+a.outerHeight(),i=g-d-f,j=d+$(window).outerHeight()-h;e<=i||i>j?(c=g-f-e,b.addClass("top"),b.removeClass("bottom")):(c=h+f,b.addClass("bottom"),b.removeClass("top")),b.css({top:c,left:a.offset().left+a.outerWidth()/2-b.outerWidth()/2}),b.css("z-index","1500"),b.css("display","block")}}),this.addAction({mouseout:"mailing-popup"},function(){var a=this.el.data("mailing-id");$("#popup-"+a).css("display","none")})}),function(){var a;a=function(){function a(){return Za}function b(){return Ta}function c(){return Wa}function d(){return Xa}function e(){return Ya}function f(a){Ta=a}function g(a){za=a.localeDatePattern,Aa=new Date(a.currentServerTime),Ba=a.firstDayOfWeek,Ca=Va.getWeek(Ba),Da=a.pushStatusSent,Ea=a.pushStatusScheduled,Ga=a.adminName,Fa=a.secondsBeforeWaitMessage,Ha=a.urls.CALENDAR_UNSENT_MAILINGS,Ia=a.urls.CALENDAR_PLANNED_MAILINGS,Ja=a.urls.CALENDAR_MAILINGS_LIST,Ka=a.urls.CALENDAR_MAILINGS_MOVE,La=a.urls.CALENDAR_PUSHES_LIST,Ma=a.urls.CALENDAR_PUSHES_MOVE,Na=a.urls.CALENDAR_AUTO_OPTIMIZATION,Oa=a.urls.CALENDAR_COMMENT_LIST,Pa=a.urls.CALENDAR_COMMENT_SAVE,Qa=a.urls.CALENDAR_COMMENT_REMOVE,Ra=a.urls.MAILING_VIEW,Sa=a.urls.MAILING_STATISTICS_VIEW}function h(a){"SELECT_MONTH"==a&&($("#linkSelectByMonth").toggleClass("active"),$("#linkSelectByWeek").toggleClass("active"),$("#dateSelectByMonth").css("display","inline"),$("#dateSelectByWeek").css("display","none"),w(a),ab="MONTH"),"SELECT_WEEK"==a&&($("#linkSelectByMonth").toggleClass("active"),$("#linkSelectByWeek").toggleClass("active"),$("#dateSelectByMonth").css("display","none"),$("#dateSelectByWeek").css("display","inline"),sa($("#weeks_list_year")[0]),w(a),ab="WEEK")}function i(){db?(cb+=.5,cb>=Fa&&$("#calendar-wait-notification").show()):cb=0}function j(){db=!0,eb++}function k(){eb--,eb<=0&&(eb=0,db=!1,$("#calendar-wait-notification").hide())}function l(a,b){_a={};var c=new Date(b,a,1),d=v(a+1,b),e=c.getDay()-Ba;e<0&&(e=7+e);var f=Math.ceil((d+e)/7),g=new Date(b,a,1-e),h=new Date(b,a,1+7*f);c=new Date(g);for(var i=0;i<f;i++){var j="row-"+(i+1);$("#calendar-container").append('<tr id="'+j+'"><td class="calendar-week-number-cell">'+c.getWeek(Ba)+"</td></tr>");for(var k=0;k<7;k++){var l=c.getMonth()!=a;D(c,c.getDate(),"",!0,j,l),c.setDate(c.getDate()+1)}}$("#calendar-days").html(Ua[a]+" "+b),ha(g,h),X(g,h),ca(g,h),da(g,h),Q(),xa(),R(),ra(a,b)}function m(a,b,c){var d=6048e5;_a={};var e=new Date(b,a,c);e.getDay();e.setDate(c-e.getDay()-1+Ba);var f=new Date(e.getFullYear(),e.getMonth(),e.getDate());f.setDate(f.getDate()+1),Ca=f.getWeek(Ba),0==a&&1==c&&1!=f.getWeek(Ba)&&(f.setTime(f.getTime()+d),e.setTime(e.getTime()+d)),$("#calendar-container").append('<tr id="week-row"></tr>'),$("#week-row").append('<td class="calendar-week-number-cell">'+f.getWeek(Ba)+"</td>");for(var g=0;g<=6;g++)e.setDate(e.getDate()+1),D(e,AGN.Lib.DateFormat.format(e,za),"calendar-week-day-container",!1,"week-row",!1);$("#calendar-days").html(AGN.Lib.DateFormat.format(f,za)+" - "+AGN.Lib.DateFormat.format(e,za)),ha(f,e),X(f,e),ca(f,e),da(f,e),Q(),R(),qa(a,b,c)}function n(a,b){var c;a.draggable({stack:b,revert:"invalid",distance:20,start:function(){c=$("#popup-"+a.prop("id")),c.hide(),c.detach(),u()},stop:function(){$("#calendar-popup-holder").append(c)}})}function o(a){n(a,".calendar-mail-label")}function p(a){n(a,".calendar-comment")}function q(){$(".calendar-comments-toggle").css("visibility","hidden"),$(".calendar-day-container").has(".calendar-comment").each(function(){$(this).find(".calendar-comments-toggle").css("visibility","visible")}),R()}function r(){ja()}function s(){ka()}function u(){var a;document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&(a=window.getSelection(),
a&&a.removeAllRanges&&a.removeAllRanges())}function v(a,b){return new Date(b,a,0).getDate()}function w(a){var b="SELECT_MONTH"==a;if(b&&Za||!b&&!Za)return void(Za?ra(Wa,Xa):qa(Wa,Xa,Ya));if(x(),b){var c=new Date(Xa,Wa,Ya);c.setDate(c.getDate()+7),1==Ca&&Xa<c.getFullYear()&&(Wa=0,Xa++,Ya=1),l(Wa,Xa),Za=!0,$a=!1}else m(Wa,Xa,Ya),Za=!1,$a=!0}function x(){$("#calendar-container").empty(),$("#calendar-popup-holder").empty(),$(".calendar-mail-label").remove()}function y(){Za?B():A(!0)}function z(){Za?C():A(!1)}function A(a){var b=a?-7:7;x();var c=new Date(Xa,Wa,Ya);c.setDate(c.getDate()+b),Ya=c.getDate(),Wa=c.getMonth(),Xa=c.getFullYear(),c.setDate(c.getDate()+b);var d=$("#month_list_year option"),e=Number(d[d.length-1].value),f=Number(d[0].value);c.getFullYear()<e&&ma(),c.getFullYear()>f&&la(),m(Wa,Xa,Ya)}function B(){x(),Wa--,Wa<0&&(Wa=11,Xa--);var a=$("#month_list_year option"),b=Number(a[a.length-1].value);Xa<b&&ma(),l(Wa,Xa)}function C(){x(),Wa++,Wa>11&&(Wa=0,Xa++);var a=$("#month_list_year option"),b=Number(a[0].value);Xa>b&&la(),l(Wa,Xa)}function D(a,b,c,d,e,f){var g="",h="";if(f)g="calendar-another-month-day";else{var i=new Date(a.getFullYear(),a.getMonth(),a.getDate());i.getTime()==Va.getTime()&&(g="calendar-current-day"),0!=i.getDay()&&6!=i.getDay()||(g+=" calendar-weekend-day",h=" calendar-weekend-day-label")}var j=ua(new Date(a.getFullYear(),a.getMonth(),a.getDate())),k="day-"+j;$("#"+e).append('<td id="'+k+'" data-date="'+j+'" class="calendar-day-container '+c+" "+g+'"></td>'),$("#"+k).append('<div class="calendar-day-label'+h+'" id="label-'+k+'"></div>'),$("#label-"+k).append(b),F(k),d&&E(k),_a[k]=!d}function E(a){$("#label-"+a).append('<button type="button" class="calendar-comments-toggle" title="'+t("calendar.title.show_hide_comment")+'"><i class="icon icon-comments"></i></button>'),$("#"+a+" .calendar-comments-toggle").css("visibility","hidden")}function F(a){$("#label-"+a).append('<button type="button" class="calendar-comments-add" title="'+t("calendar.title.new_comment")+'"><i class="icon icon-plus"></i></button>'),$("#label-"+a+" .calendar-comments-add").css("visibility","hidden"),$("#"+a).mouseover(function(){$("#"+a).hasClass("calendar-another-month-day")||$("#label-"+a+" .calendar-comments-add").css("visibility","visible")}),$("#"+a).mouseout(function(){$("#label-"+a+" .calendar-comments-add").css("visibility","hidden")})}function G(a){_a["day-"+a]?$("#day-"+a+" .calendar-comment").hide():$("#day-"+a+" .calendar-comment").show(),_a["day-"+a]=!_a["day-"+a],R()}function H(a){return""==a?($("#calendar-comment-error").html(t("calendar.error.empty_comment")),!1):!(ya(a)>1e3)||($("#calendar-comment-error").html(t("calendar.error.long_comment")),!1)}function I(a){if(a){for(var b=a.split(/[,; \t\n]+/),c=[],d=0;d<b.length;d++)b[d]&&c.push(b[d]);return c}return[]}function J(a){if(!a||0==a.length)return $("#calendar-comment-error").html(t("calendar.error.empty_recipient_list")),!1;var b=a.join(",");if(ya(b)>2e3)return $("#calendar-comment-error").html(t("calendar.error.long_recipient_list")),!1;for(var c=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,d=0;d<a.length;d++)if(!c.test(a[d]))return $("#calendar-comment-error").html(t("calendar.error.invalid_email")+" "+a[d]),!1;return!0}function K(a){AGN.Lib.Modal.create($("#calendar-dialog-modal-template").html()),AGN.Lib.ReminderService.fillCommentDialog(a),$("#calendar-comment-error").html(""),AGN.Lib.ReminderService.updateVisibility()}function L(a){var b="comment-"+a.id,c="day-"+a.getDateAsString(),d=a.text.replace(/\n/g,"<br>"),e=$("#"+c),f=$("#"+b);if(!f.exists()&&e.exists()){f=$('<div id="'+b+'" data-comment-id="'+a.id+'" class="calendar-mail-label calendar-comment"><span class="calendar-badge comment-badge"><span class="comment-text-content">'+d+"</span></span></div>"),_a[c]||f.css("display","none"),e.append(f);var g=$("#calendar-popup-holder");g.append('<input type="hidden" id="deadline-'+b+'" name="'+b+'" value="'+a.isDeadline+'"/>'),g.append('<input type="hidden" id="notified-'+b+'" name="'+b+'" value="'+a.isNotified+'"/>'),g.append('<input type="hidden" id="emm-user-type-'+b+'" name="'+b+'" value="'+a.isEmmUserType+'"/>'),g.append('<input type="hidden" id="notify-admin-id-'+b+'" name="'+b+'" value="'+a.notifyAdminId+'"/>'),g.append('<input type="hidden" id="recipients-'+b+'" name="'+b+'" value="'+a.recipients+'"/>'),g.append('<input type="hidden" id="plannedSendDate-'+b+'" name="'+b+'" value="'+a.getPlannedSendDateAsString()+'"/>'),f.dblclick(function(){AGN.Lib.CalendarService.showCommentDialog(AGN.Lib.ReminderService.getReminder(b,a.currentAdminName))});var h=$('<button type="button" id="remove-'+b+'" class="calendar-comments-remove"><i class="icon icon-trash-o"></i></button>');f.find(".comment-badge").append(h),h.attr("title",t("calendar.title.delete_comment")),h.click(function(){return $("#deadline-"+b).remove(),$("#popup-"+b).remove(),f.remove(),W(b),q(),R(),!1}),f.mouseover(function(){h.css("display","block")}),f.mouseout(function(){h.css("display","none")}),p(f),M(a.id,d)}}function M(a,b){$("#calendar-popup-holder").append('<div class="calendar-mail-popup" id="popup-comment-'+a+'"></div>'),$("#popup-comment-"+a).append('<div class="arrow"></div>'),$("#popup-comment-"+a).append('<div class="calendar-mail-popup-header">'+t("calendar.common.comment")+"</div>"),$("#popup-comment-"+a).append('<div class="calendar-mail-popup-content"><p class="comment-text-content">'+b+"</p></div>"),$("#popup-comment-"+a).css("display","none"),$("#popup-comment-"+a).css("word-wrap","break-word"),$("#comment-"+a).mouseover(function(){var b=$("#popup-comment-"+a),c=$(this),d=c.offset().top-$(window).scrollTop(),e=c.outerHeight(),f=b.outerHeight(),g=15,h=c.offset().top+e+g;f+g<d?(h=c.offset().top-f-g,b.addClass("top"),b.removeClass("bottom")):(b.addClass("bottom"),b.removeClass("top")),b.css({top:h,left:c.offset().left+c.outerWidth()/2-b.outerWidth()/2}),b.css("z-index","1500"),b.css("display","block")}),$("#comment-"+a).mouseout(function(){$("#popup-comment-"+a).css("display","none")})}function N(a,b,c){var d=a.data("date");_a["day-"+d]||$(".js-calendar-toggle-all-comments").prop("checked")||b.hide(),a.append(b),V(AGN.Lib.ReminderService.getReminder("comment-"+c,Ga)),R(),q()}function O(a,b,c){var d=a.data("date");if("true"!=b.attr("sent")){var e=b.data("time"),f=wa(d,e);if(f>=Aa){if("true"==b.attr("planned")){var g=b.find("a");if(g.hasClass("calendar-mailing-status-planned-in-past")){var h="calendar-"+b.attr("workstatus").replace(/\./g,"-");g.addClass(h).removeClass("calendar-mailing-status-planned-in-past")}}var i=new Date(f);i.setHours(i.getHours()-3),i<Aa&&(e=null,b.data("time",null));var j=a.find(".calendar-mail-label"),k=!1;if(e&&$(j.get().reverse()).each(function(){var a=$(this),c=a.data("time");c&&c<e&&(a.after(b),k=!0)}),!k){var l=j.filter("[data-mailing-id]").last();l.length?(l.after(b),k=!0):a.append(b)}R(),S(c,d)}}}function P(a,b,c){var d=a.data("date");switch(b.data("status")){case Da:return;case Ea:if(wa(d,"00:00")<Va)return}var e=a.find(".calendar-mail-label").filter("[data-push-id]").last();e.length?e.after(b):a.append(b),T(c,d)}function Q(){$(".calendar-day-container").droppable({hoverClass:"calendar-day-hover",drop:function(a,b){var c=$(this),d="UNKNOWN",e=b.draggable.data("comment-id");if(e?d="COMMENT":(e=b.draggable.data("mailing-id"),e?d="MAILING":(e=b.draggable.data("push-id"),e&&(d="PUSH"))),"UNKNOWN"!=d)switch(b.draggable.css({top:"",left:""}),d){case"COMMENT":N(c,b.draggable,e);break;case"MAILING":O(c,b.draggable,e);break;case"PUSH":P(c,b.draggable,e)}}})}function R(){var a=$("#calendar-table").height();$(".calendar-sidebar").css({"max-height":a+"px"})}function S(a,b){return $.ajax({type:"POST",url:Ka,data:{mailingId:a,date:b}})}function T(a,b){return $.ajax({type:"POST",url:Ma,data:{pushId:a,date:b}})}function U(a){var b="comment-"+a.id,c=$("#"+b);$("#deadline-"+b).val(a.isDeadline),$("#emm-user-type-"+b).val(a.isEmmUserType),$("#notify-admin-id-"+b).val(a.notifyAdminId),$("#recipients-"+b).val(a.recipients);var d=a.text.replace(/\n/g,"<br>");p(c),c.find(".comment-text-content").html(d),$("#popup-"+b+" .comment-text-content").html(d),$("#plannedSendDate-"+b).val(a.getPlannedSendDateAsString())}function V(a){$.ajax({type:"POST",url:Pa,data:{commentId:a.id,date:a.getDateAsString(),comment:a.text,deadline:a.isDeadline,sendNow:a.isSendNow,emmUserType:a.isEmmUserType,notifyAdminId:a.notifyAdminId,recipients:a.recipients,notified:a.isNotified,plannedSendDate:a.getPlannedSendDateAsString()},success:function(b){a.isSendNow=!1,0==a.id?(a.id=b.commentId,L(a),q()):U(a)}})}function W(a){$.ajax({type:"POST",url:Qa,data:{commentId:AGN.Lib.ReminderService.getReminderIdFromTag(a)}})}function X(a,b){a=ua(a),b=ua(b),j(),$.ajax({type:"GET",url:Ja,data:{startDate:a,endDate:b}}).success(function(a){$.each(a,function(a,b){Y(b)})}).always(k)}function Y(a){var b=$("#day-"+a.sendDate),c=$("#"+a.mailingId);if(b.exists()&&!c.exists()){var d,e=Z(a);d=a.plannedInPast?"calendar-mailing-status-planned-in-past":"calendar-"+a.workstatus.replace(".","-");var f={sent:a.sent,planned:a.planned,mailingId:a.mailingId,statusClass:d,mailingLink:e,workstatus:a.workstatus,shortname:a.shortname,sendTime:a.sendTime};c=AGN.Lib.Template.dom("calendar-mail-link",f),b.append(c),f.subject=a.subject,f.mailsSent=a.mailsSent,f.previewImage=aa(a.preview_component),f.popupClass=a.preview_component?"":"calendar-mail-popup-preview-missing",f.emptyWorkstatus=!a.workstatus.trim(),f.openers=a.openers,f.clickers=a.clickers,f.workstatusIn=a.workstatusIn;var g=AGN.Lib.Template.dom("calendar-mail-popup",f);$("#calendar-popup-holder").append(g),AGN.Lib.CalendarService.addMailingDragging(c)}}function Z(a){var b;return b=a.sent&&"mailing.status.test"!=a.workstatus?Sa.replace("{mailingId}",a.mailingId):Ra.replace("{mailingId}",a.mailingId)}function aa(a){var b;return b=a?AGN.url("/sc?compID="+a):AGN.url("/assets/core/images/facelift/no_preview.svg")}function ba(a){switch(a.status){case Da:return a.sendDate;case Ea:return a.startDate;default:return ua(va(a.plannedFor))}}function ca(a,b){j(),$.ajax({type:"GET",url:La,data:{startDate:ua(a),endDate:ua(b)}}).done(function(a){var b=_.template(AGN.Opt.Templates["calendar-planned-push-notification"]);$.each(a,function(a,c){var d=$(b(c));$("#day-"+ba(c)).append(d),o(d)})}).always(k)}function da(a,b){j(),$.ajax({type:"POST",url:Na,data:{startDate:ua(a),endDate:ua(b)},success:function(a){var b=_.template(AGN.Opt.Templates["calendar-auto-optimization"]);$.each(a,function(a,c){var d=$(b({optimizationId:c.campaignID,shortname:c.shortname,action:ea(c),idParamName:fa(c),idParamValue:ga(c),status:c.autoOptimizationStatus}));$("#day-"+c.sendDate).append(d)})}}).always(k)}function ea(a){return 0==a.workflowId?"optimize.do":"workflow.do"}function fa(a){return 0==a.workflowId?"optimizationID":"workflowId"}function ga(a){return 0==a.workflowId?a.id:a.workflowId}function ha(a,b){$.ajax({type:"GET",url:Oa,data:{startDate:ua(a),endDate:ua(b)},success:function(a){$.each(a,function(a,b){ia(b)}),AGN.Lib.CalendarService.checkHideCommentIconsVisibility(),xa()}})}function ia(a){var b=_.cloneDeep(AGN.Lib.ReminderService.reminder),c=a.recipients.adminId;b.id=a.commentId,b.setDate(a.date),b.text=a.comment,b.notifyAdminId=c,b.isEmmUserType=0!=c,b.currentAdminName=a.adminName,b.isDeadline=a.deadline,b.isNotified=a.notified,b.setPlannedSendDate(a.plannedSendDates),b.recipients=a.recipients.value,AGN.Lib.CalendarService.addComment(b)}function ja(){$.ajax({type:"GET",url:Ha,success:function(a){$(".calendar-sidebar-content").html(a),R(),AGN.Initializers.Tooltip($(".calendar-wrapper")),AGN.Initializers.Scrollable($(".calendar-wrapper"))}})}function ka(){$.ajax({type:"GET",url:Ia,success:function(a){$(".calendar-sidebar-content").html(a),R(),AGN.Initializers.Tooltip($(".calendar-wrapper")),AGN.Initializers.Scrollable($(".calendar-wrapper"))}})}function la(){for(var a=$("#month_list_year option"),b=$("#weeks_list_year option"),c=Number(a[a.length-1].value),d=0;d<a.length;d++){var e=Number(a[d].value)+1;a[d].text=e,a[d].value=e,b[d].text=e,b[d].value=e}a[a.length]=new Option(c,c),b[b.length]=new Option(c,c)}function ma(){var a=$("#month_list_year option"),b=$("#weeks_list_year option"),c=Number(a[a.length-1].value)-1;a[a.length]=new Option(c,c),b[b.length]=new Option(c,c)}function na(){var a;if("MONTH"==ab){var b=$("#month_list option:selected").val(),c=$("#month_list_year option:selected").val(),d=new Date(c,b,1);strDate=AGN.Lib.DateFormat.format(d,getDateFormat()),a=$("#month_list_year option:selected").index()}if("WEEK"==ab){var e=$("#weeks_list option:selected").val();for(var f in bb)if(bb.hasOwnProperty(f)&&bb[f].number==e){strDate=AGN.Lib.DateFormat.format(bb[f].firstDay,getDateFormat());break}a=$("#weeks_list_year option:selected").index()}0==a&&la(),oa(strDate)}function oa(a){var b=AGN.Lib.DateFormat.parseFormat(a,getDateFormat());Wa=b.getMonth(),Xa=b.getFullYear(),Ya=b.getDate(),x(),Za?l(Wa,Xa):m(Wa,Xa,Ya)}function pa(){var a=AGN.Lib.DateFormat.format(new Date,getDateFormat());oa(a)}function qa(a,b,c){var d=6048e5,e=new Date(b,a,c);e.setDate(c-e.getDay()-1+Ba);var f=new Date(e.getFullYear(),e.getMonth(),e.getDate());f.setDate(f.getDate()+1),0==a&&1==c&&1!=f.getWeek(Ba)&&f.setTime(f.getTime()+d);var g=f.getWeek(Ba);if(1==g){var h=new Date(f.valueOf()+d);f.getFullYear()!=h.getFullYear()&&(b=h.getFullYear())}$("#weeks_list_year")[0].selectedIndex=$("#weeks_list_year option[value = "+b+"]")[0].index,sa($("#weeks_list_year")[0]),$("#weeks_list")[0].selectedIndex=$("#weeks_list option[value = "+g+"]")[0].index,$("#weeks_list_year").select2({minimumResultsForSearch:-1}),$("#weeks_list").select2({minimumResultsForSearch:-1})}function ra(a,b){$("#month_list_year")[0].selectedIndex=$("#month_list_year option[value = "+b+"]")[0].index,$("#month_list")[0].selectedIndex=$("#month_list option[value = "+a+"]")[0].index,$("#month_list").select2({minimumResultsForSearch:-1}),$("#month_list_year").select2({minimumResultsForSearch:-1})}function sa(a){bb=[];var b,c=6048e5,d=a.options[a.selectedIndex].value,e=(new Date(d,11,31),new Date(d,0,1));e.setDate(1-e.getDay()-1+Ba),e.setDate(e.getDate()+1);var f=new Date(e.getFullYear(),e.getMonth(),e.getDate());f.setTime(e.getTime()+c-864e5),1!=e.getWeek(Ba)&&(e.setTime(e.getTime()+c),f.setTime(f.getTime()+c));do b=new Object,b.number=e.getWeek(Ba),b.firstDay=new Date(e.getFullYear(),e.getMonth(),e.getDate()),b.lastDay=new Date(f.getFullYear(),f.getMonth(),f.getDate()),bb.push(b),e.setTime(e.getTime()+c),f.setTime(f.getTime()+c);while(1!=e.getWeek(Ba)&&e.getFullYear()==d);$("#weeks_list option").remove();for(var g in bb)if(bb.hasOwnProperty(g)){var h=document.createElement("option"),i=AGN.Lib.DateFormat.format(bb[g].firstDay,za),j=AGN.Lib.DateFormat.format(bb[g].lastDay,za);h.value=bb[g].number,h.innerHTML=bb[g].number+" : "+i+" - "+j,$("#weeks_list").append(h)}}function ta(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function ua(a){var b=ta(a.getDate(),2),c=ta(a.getMonth()+1,2),d=a.getFullYear();return b+"-"+c+"-"+d}function va(a){if(a){var b=a[0],c=a[1]-1,d=a[2];return new Date(b,c,d)}return null}function wa(a,b){var c=a.match(/^(\d\d)-(\d\d)-(\d{4})$/);if(c){var d=c[1],e=c[2]-1,f=c[3];if(b&&(c=b.match(/^(\d\d):(\d\d)$/))){var g=c[1],h=c[2];return new Date(f,e,d,g,h)}return new Date(f,e,d)}return null}function xa(){$(".js-calendar-toggle-all-comments").prop("checked")&&$(".calendar-table .calendar-comment").show()}function ya(a){var b=encodeURI(a);if(b.indexOf("%")!=-1){var c=b.split("%").length-1;0==c&&c++;var d=b.length-3*c;c+=d}else c=b.length;return c}var za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta=0,Ua=t("date.monthsFull"),Va=new Date;Va.setHours(0,0,0,0);var Wa=Va.getMonth(),Xa=Va.getFullYear(),Ya=Va.getDate(),Za=!0,$a=!1,_a={},ab="MONTH",bb=[],cb=0,db=!1,eb=0;this.getMonthMode=a,this.getDayWidth=b,this.getCurMonth=c,this.getCurYear=d,this.getCurDay=e,this.setDayWidth=f,this.setUp=g,this.toggleDateSelectionMode=h,this.checkProgress=i,this.startProgress=j,this.stopProgress=k,this.generateMonthCalendar=l,this.generateWeekCalendar=m,this.addMailingDragging=o,this.addCommentDragging=p,this.checkHideCommentIconsVisibility=q,this.generateUnsentMailingsTable=r,this.generatePlannedMailingsTable=s,this.clearSelection=u,this.daysInMonth=v,this.changeCalendarMode=w,this.removeCurrentCalendar=x,this.prevEntry=y,this.nextEntry=z,this.switchWeek=A,this.prevMonth=B,this.nextMonth=C,this.addDayToCalendar=D,this.addCommentsShowButton=E,this.addDayPopup=F,this.toggleComment=G,this.validateComment=H,this.parseRecipients=I,this.validateEmails=J,this.showCommentDialog=K,this.addComment=L,this.saveCommentDB=V,this.removeCommentDB=W,this.showDate=na,this.jumpToDate=oa,this.jumpToday=pa,this.createWeeksList=sa,this.setAllCommentsCheckState=xa},AGN.Lib.CalendarService=new a;var b={showDiv:function(a){$("div#calendar-dialog-modal div#"+a).css("display","block")},hideDiv:function(a){$("div#calendar-dialog-modal div#"+a).css("display","none")},updateVisibility:function(){this.onScheduleChanged(),this.onDeadlineChanged()},onDeadlineChanged:function(){return $("#isDeadline:checked").val()?($("#remindDate").prop("disabled",!1),$("#remindTime").prop("disabled",!1),$(".js-open-datepicker").prop("disabled",!1),$(".js-open-timepicker").prop("disabled",!1)):($("#remindDate").prop("disabled",!0),$("#remindTime").prop("disabled",!0),$(".js-open-datepicker").prop("disabled",!0),$(".js-open-timepicker").prop("disabled",!0)),!1},onUserTypeChanged:function(a){a==this.reminder.recipientEmm?($("#emmUsers").show(),$("#customRecipients").hide()):($("#customRecipients").show(),$("#emmUsers").hide())},onScheduleChanged:function(){return $("#scheduleReminder:checked").val()?($("#admin-for-notify").prop("disabled",!1),this.showDiv("reminderDetails")):($("#admin-for-notify").prop("disabled",!0),this.hideDiv("reminderDetails")),!1},reminder:{isDeadline:!1,isSendNow:!1,isEmmUserType:!0,recipientEmm:1,recipientCustom:2,defaultDate:{date:"",hours:8,minutes:0},plannedSendDate:{date:"",hours:8,minutes:0},getDateAsString:function(){return $.datepicker.formatDate("dd-mm-yy",this.defaultDate.date)},setDate:function(a){this.defaultDate.date=$.datepicker.parseDate("dd-mm-yy",a),this.plannedSendDate.date=$.datepicker.parseDate("dd-mm-yy",a),this.plannedSendDate.hours=this.defaultDate.hours,this.plannedSendDate.minutes=this.defaultDate.minutes},getPlannedSendDateAsString:function(){return $.datepicker.formatDate("dd-mm-yy",this.plannedSendDate.date)+(this.plannedSendDate.hours<10?" 0":" ")+this.plannedSendDate.hours.toString()+(this.plannedSendDate.minutes<10?":0":":")+this.plannedSendDate.minutes.toString()},setPlannedSendDate:function(a){var b=a.split(" ");this.plannedSendDate.date=$.datepicker.parseDate("dd-mm-yy",b[0]);var c=b[1].split(":");this.plannedSendDate.hours=parseInt(c[0]),this.plannedSendDate.minutes=parseInt(c[1])},getScheduleReminder:function(){return this.isDeadline||this.isSendNow},getRemindCalendarDate:function(){return this.defaultDate.date.toString()==this.plannedSendDate.date.toString()&&this.defaultDate.hours==this.plannedSendDate.hours&&this.defaultDate.minutes==this.plannedSendDate.minutes},onSave:function(){b.saveReminder(b.reminder)}},getNewReminder:function(a,b){return this.reminder.id=0,this.reminder.setDate(a),this.reminder.text="",this.reminder.isEmmUserType=!0,this.reminder.notifyAdminId=b.adminId,this.reminder.recipients="",this.reminder.currentAdminName=b.adminName,this.reminder.isDeadline=!1,this.reminder.isNotified=!1,this.reminder.title=t("calendar.common.new_comment"),this.reminder.recipientEmm=b.recipientEmm,this.reminder.recipientCustom=b.recipientCustom,this.reminder},getReminder:function(a,b){var c=$("#"+a+" .comment-text-content").html()+"";return this.reminder.id=this.getReminderIdFromTag(a),this.reminder.setDate(this.getDateFromTag($("#"+a).parent().attr("id"))),this.reminder.text=c.replace(/<br>/gi,"\n"),this.reminder.isEmmUserType="true"==$("#emm-user-type-"+a).val(),this.reminder.notifyAdminId=$("#notify-admin-id-"+a).val(),this.reminder.recipients=$("#recipients-"+a).val(),this.reminder.currentAdminName=b,this.reminder.isDeadline="true"==$("#deadline-"+a).val(),this.reminder.isNotified="true"==$("#notified-"+a).val(),this.reminder.setPlannedSendDate($("#plannedSendDate-"+a).val()),this.reminder.title=t("calendar.common.edit_comment"),this.reminder},fillCommentDialog:function(a){var b=$("#calendar-dialog-modal");b.find(".modal-title").html(a.title),b.find("#comment-text").val(a.text),b.find('#reminderDetails input[name="userType"][value='+(a.isEmmUserType?a.recipientEmm:a.recipientCustom)+"]").prop("checked",!0).trigger("change"),b.find("#admin-for-notify").val(a.notifyAdminId),AGN.Lib.Select.get(b.find("#admin-for-notify")).selectValueOrSelectFirst(a.notifyAdminId),b.find("#recipients-text").val(a.recipients),b.find("#isDeadline").prop("checked",a.isDeadline),b.find("#isSendNow").prop("checked",a.isSendNow),b.find("#scheduleReminder").prop("checked",a.getScheduleReminder()),b.find("#remindDate").pickadate("picker").set("select",a.plannedSendDate.date),b.find("#remindTime").val(a.plannedSendDate.hours+":"+a.plannedSendDate.minutes)},saveReminder:function(a){var b=$("#comment-text").val();if(AGN.Lib.CalendarService.validateComment(b)){var c=$("#isEmmUserType").prop("checked"),d=AGN.Lib.CalendarService.parseRecipients($("#recipients-text").val());if(c||AGN.Lib.CalendarService.validateEmails(d)){if($("#calendar-dialog-modal").modal("hide"),a.text=b,a.isEmmUserType=c,c?(a.notifyAdminId=$("#admin-for-notify").val(),a.recipients=""):(a.notifyAdminId=0,a.recipients=d.join(",")),a.isSendNow=$("#isSendNow").prop("checked"),a.isDeadline=$("#isDeadline").prop("checked"),$("#isDeadline").prop("checked")&&$("#scheduleReminder").prop("checked")){var e=$("#remindDate").pickadate("picker"),f=$("#remindTime");a.plannedSendDate.date=AGN.Lib.DateFormat.parseFormat(e.get("select","dd-mm-yyyy"),"dd-MM-yyyy"),a.plannedSendDate.hours=f.val().substring(0,2),a.plannedSendDate.minutes=f.val().substring(3,5)}else a.plannedSendDate.date=a.defaultDate.date,a.plannedSendDate.hours=a.defaultDate.hours,a.plannedSendDate.minutes=a.defaultDate.minutes;AGN.Lib.CalendarService.saveCommentDB(a)}}},getDateFromTag:function(a){return a.substr(a.indexOf("-")+1)},getReminderIdFromTag:function(a){return a.substr(a.indexOf("-")+1)}};AGN.Lib.ReminderService=b}(),function(){AGN.Initializers.Colorpicker=function(a){_.each($(".js-colorpicker"),function(a){var b=$(a);b.colorpicker({format:"hex",container:!0})})}}(),function(){function a(){$.ajax({type:"GET",url:AGN.Lib.RecipientStatsData.URL,data:{method:"ajaxStatistic"},success:function(a){a&&(e(a.reactorType,a.notAvailable),f(a.rebuyTitle,a.rebuyRate,a.notAvailable),g(a.revenue,a.notAvailable),k(a),AGN.Initializers.Equalizer())}})}function b(){var a={method:"getProgressOfUsedDevices"},b=$("input[name=progressOfUsedPeriod]:checked").val();"month"==b?a.byMonth=!0:"dates"==b&&(a.from=$("#progressOfUsedFrom").val(),a.till=$("#progressOfUsedTill").val()),$.ajax({type:"GET",url:AGN.Lib.RecipientStatsData.URL,data:a,success:function(a){h(a),AGN.Initializers.Equalizer()}})}function c(a){var b=u[a+"Data"];if(void 0!=b){var c=j()?v:w,d=c[a+"Data"];$.extend(!0,b,d),$("#"+a).removeClass("hidden"),c3.generate(b),x.indexOf(a)==-1&&x.push(a)}}function d(){x.forEach(function(a){c(a)})}function e(a,b){if(void 0!==a){var d=[],e=!1;for(var f in a)a.hasOwnProperty(f)&&(d.push([f,a[f]]),a[f]>0&&(e=!0));e?4==d.length?u.reactorChartData.color.pattern=["#008F00","#92D050","#CCCDCD","#F43536"]:u.reactorChartData.color.pattern=["#92D050","#CCCDCD","#F43536"]:(d=[[b,100]],u.reactorChartData.color.pattern=["#CCCDCD"]),u.reactorChartData.data.columns=d,c("reactorChart")}}function f(a,b,d){void 0!==b&&(b>0?u.rebuyChartData.data.columns=[[a,i(b)]]:(u.rebuyChartData.gauge={},u.rebuyChartData.gauge.label={},u.rebuyChartData.gauge.label.format=function(a,b){return d},u.rebuyChartData.gauge.label.show=!1,u.rebuyChartData.data.columns=[[d,0]]),c("rebuyChart"))}function g(a,b){if(void 0!==a){var d=["#0071B9","#4C9BCE","#99C6E3","#CCCDCD"],e=[],f=[""],g=[],h=[],i=0,k=0,l=!1;for(var m in a)if(a.hasOwnProperty(m)){var n=a[m];e.push(m),n>0?(l=!0,g.push(n),i+=n):g.push(0)}if(l){for(var o=j()?70:60,p=!1,q=0;q<g.length;q++)h[q]=Math.round(g[q]/i*100),k+=h[q],h[q]>=70&&(p=!0);for(100!=k&&(h[h.length-1]+=100-k),q=0;q<h.length;q++)f.push(25+(p?h[q]*o/100:h[q]));u.revenueChartData.data.labels.format=function(a,b,c,d){return h[c]+"% "+e[c]}}else{for(q=0;q<e.length;q++)f.push(50),h[q]=25;u.revenueChartData.data.labels.format=function(a,c,d,e){return b}}u.revenueChartData.data.columns=[f],u.revenueChartData.data.color=function(a,b){return void 0!=b.value?d[b.index]:a},c("revenueChart")}}function h(a){if(void 0!==a&&void 0!==a.usedDevicesByPeriods&&void 0!==a.usedDevices){var b={windows:a.windowsTitle,mac:a.macTitle,android:a.androidTitle,ios:a.iosTitle,other:a.otherTitle,reactions:a.numberOfReactions},d=a.usedDevices,e=[],f=[];f.push({name:"windows",count:d.windows}),f.push({name:"mac",count:d.mac}),f.push({name:"android",count:d.android}),f.push({name:"ios",count:d.ios}),f.sort(function(a,b){return b.count-a.count});for(var g=0;g<f.length;g++)e.push([b[f[g].name],f[g].count]);e.push([a.otherTitle,d.other]),u.devicesChartData.data.columns=e,u.devicesChartData.data.names=b,c("devicesChart");for(var h=[],j=[],k=0;k<f.length;k++)j[f[k].name]=k,h.push([f[k].name]);h.push(["other"],["reactions"],["date"]);for(var l=0;l<a.usedDevicesByPeriods.length;l++){var m=a.usedDevicesByPeriods[l],n=m.windows,o=m.mac,p=m.android,q=m.ios,r=m.other,s=n+o+p+q+r;h[j.windows].push(i(n/s)),h[j.mac].push(i(o/s)),h[j.android].push(i(p/s)),h[j.ios].push(i(q/s)),h[4].push(i(r/s)),h[5].push(s),h[6].push(m.date)}u.progressChartData.data.columns=h,u.progressChartData.data.names=b,u.progressChartData.data.xFormat=a.dateFormat,u.progressChartData.axis.x.min=a.min,u.progressChartData.axis.x.max=a.max,u.progressChartData.axis.x.tick.format=a.dateFormat,c("progressChart")}}function i(a){return Math.round(1e3*a)/10}function j(){return $(window).width()>=1600}function k(a){q(a.favoriteOpeningDays),r(a.favoriteOpeningHours),l(a.ctr),m(a.conversion),n(a.pageImpressions),o(a.pageImpressionsPerVisit),p(a.pageImpressionsPerBuy)}function l(a){$("#ctr-val").text(a.toString().replace(".",","))}function m(a){0!=a?$("#conversion-val").text(a.toString().replace(".",",")):($("#conversion-val").text("---"),$("#conversion-val").parent().find(".l-stat-sign").text(""))}function n(a){0!=a?$("#pi-val").text(a.toString().replace(",",".")):($("#pi-val").text("---"),$("#pi-val").parent().find(".l-stat-sign").text(""))}function o(a){0!=a?$("#pi-visit-val").text(a.toString().replace(",",".")):($("#pi-visit-val").text("---"),$("#pi-visit-val").parent().find(".l-stat-sign").text(""))}function p(a){0!=a?$("#pi-buy-val").text(a.toString().replace(",",".")):($("#pi-buy-val").text("---"),$("#pi-buy-val").parent().find(".l-stat-sign").text(""))}function q(a){var b=$("#favOpeningDays").find(".stat-fav-day");s(a,b)}function r(a){var b=$("#favOpeningHours").find(".stat-fav-time");s(a,b)}function s(a,b){var c=b.closest(".l-stat-content").find("hr"),d=0,e=t(a);$.each(a,function(a,f){if(b.find(".l-stat-name").text(a),b.find(".l-stat-val").text(f),d++,d<e){var g=b.clone();g.insertAfter(c),b=g,d<e-1&&(c=c.clone(),c.insertAfter(b))}})}function t(a){var b=0;return $.each(a,function(a,c){b++}),b}var u={URL:void 0,reactorChartData:{bindto:"#reactor-type-chart",data:{columns:[],type:"donut",order:null},color:{pattern:["#008F00","#92D050","#CCCDCD","#F43536"]},legend:{position:"right"}},rebuyChartData:{bindto:"#rebuy-rate-chart",data:{columns:[],type:"gauge"},color:{pattern:["#0071B9"]}},revenueChartData:{bindto:"#revenue-chart",data:{columns:[],type:"bar",labels:{show:!0,format:function(a,b,c,d){return a}},color:function(a,b){return a}},tooltip:{show:!1},axis:{rotated:!0,x:{show:!1},y:{show:!1,min:0,max:150}},legend:{show:!1},bar:{width:{ratio:.7}}},progressChartData:{bindto:"#progress-of-used-devices-chart",onrendered:function(){d3.selectAll("#progress-of-used-devices-chart").selectAll(".c3-axis.c3-axis-x").selectAll(".tick text").style("text-anchor","start")},data:{columns:[],groups:[["windows","mac","android","ios","other"]],types:{reactions:"spline"},axes:{reactions:"y2"},names:{},type:"bar",x:"date",xFormat:"%m/%d/%Y",order:null},axis:{x:{type:"timeseries",tick:{culling:!0,format:"%m/%d/%Y"}},y:{padding:{top:10},tick:{format:function(a){return a+" %"}}},y2:{show:!0,min:0}},bar:{width:{ratio:.5}},tooltip:{format:{value:function(a,b,c){return"reactions"===c?a:a+" %"}}},color:{pattern:["#0071B9","#4C9BCE","#99C6E3","#CCE3F1","#CCCDCD","#555555"]}},devicesChartData:{bindto:"#devices-reacted-on-chart",data:{columns:[],type:"donut",order:null,names:{}},legend:{position:"right"},color:{pattern:["#0071B9","#4C9BCE","#99C6E3","#CCE3F1","#CCCDCD"]}}},v={reactorChartData:{size:{width:400,height:350}},rebuyChartData:{size:{width:400,height:250}},revenueChartData:{size:{width:350,height:275}},progressChartData:{size:{width:860,height:350}},devicesChartData:{size:{width:400,height:350}}},w={reactorChartData:{size:{width:350,height:250}},rebuyChartData:{size:{width:250,height:200}},revenueChartData:{size:{width:300,height:250}},progressChartData:{size:{width:550,height:250}},devicesChartData:{size:{width:350,height:250}}},x=[],y=null,z=!1;AGN.Lib.RecipientStatsData=u,AGN.Lib.DomInitializer.new("company-insights",function(){this.config&&this.config.url&&(AGN.Lib.RecipientStatsData.URL=this.config.url,a(),b(),$("input[type=radio][name=progressOfUsedPeriod]").change(function(){"dates"==this.value?$("#progressOfUsedDates").removeClass("hidden"):$("#progressOfUsedDates").addClass("hidden")}),$("#refreshProgressOfUsedDevices").click(function(){b()}),z=j(),$(window).resize(function(){null!=y&&clearTimeout(y),y=setTimeout(function(){var a=j();z!=a&&(z=a,d())},200)}))})}(),function(){var a;a={data:{chartsColors:["#0071b9","#009999","#92d050","#41641a","#ffc000"],statChartData:{columnTitles:[],c3data:{bindto:".js-stat-chart",data:{columns:[],type:"bar",labels:!0},axis:{x:{tick:{centered:!0,fit:!0,format:function(b){return a.data.statChartData.columnTitles[b]}}}},legend:{show:!1},tooltip:{format:{title:function(){return null},name:function(b,c,d,e){return a.data.statChartData.columnTitles[e]},value:function(a,b,c,d){return a}}},padding:{right:25}},build:function(a,b){this.columnTitles=a;var c=b.slice(0);return c.unshift("values"),this.c3data.data.columns=[c],this.c3data}},clickChartData:{c3data:{bindto:".js-click-chart",data:{rows:[],type:"donut"},size:{height:150},donut:{title:"",label:{show:!1},width:15},legend:{position:"right"},tooltip:{show:!1}},build:function(b,c,d){this.c3data.donut.title=b,this.c3data.data.rows=[c,d];for(var e={},f=0;f<c.length;f++)e[c[f]]=a.data.chartsColors[f];return this.c3data.data.colors=e,this.c3data}},viewChartData:{c3data:{bindto:".js-view-chart",data:{rows:[],type:"donut"},size:{height:150},donut:{title:"",label:{show:!1},width:15},legend:{position:"right"},tooltip:{show:!1}},build:function(b,c,d){this.c3data.donut.title=b,this.c3data.data.rows=[c,d];for(var e={},f=0;f<c.length;f++)e[c[f]]=a.data.chartsColors[f];return this.c3data.data.colors=e,this.c3data}}},updateCharts:function(b){jQuery.ajax({type:"POST",url:AGN.url("/dashboard/statistics.action"),data:{mailingId:b},success:function(b){var c,d,e;b=_.merge({common:[["no Data","0"]],clickers:[["no Data","0"]],clickersPercent:[0],openers:[["no Data","0"]],openersPercent:[0]},b),c=[],d=[];for(var f=0;f<b.common.length;f++){var g=parseInt(b.common[f][1]);c.push(b.common[f][0]),d.push(g)}c3.generate(a.data.statChartData.build(c,d)),c=[],d=[],e=0;for(var f=0;f<b.clickers.length;f++){var g=a.roundTo(100*b.clickers[f][1],1);c.push(b.clickers[f][0]),d.push(g),e+=g}if(!isNaN(e)&&e>0)for(var f=0;f<d.length;f++)c[f]+=" "+a.roundTo(100*d[f]/e,1)+"%";var h=a.roundTo(100*b.clickersPercent[0],1)+"%*";c3.generate(a.data.clickChartData.build(h,c,d)),
c=[],d=[],e=0;for(var f=0;f<b.openers.length;f++){var g=a.roundTo(100*b.openers[f][1],1);c.push(b.openers[f][0]),d.push(g),e+=g}if(!isNaN(e)&&e>0)for(var f=0;f<d.length;f++)c[f]+=" "+a.roundTo(100*d[f]/e,1)+"%";var i=a.roundTo(100*b.openersPercent[0],1)+"%*";c3.generate(a.data.viewChartData.build(i,c,d)),AGN.Initializers.Equalizer()}})},roundTo:function(a,b){return 1*parseFloat(a).toFixed(b)}},AGN.Lib.DashboardStatisticsService=a}(),function(){var a=AGN.Lib.Helpers;AGN.Initializers.PickADate=function(b){b||(b=$(document)),_.each(b.find(".js-datepicker"),function(b){var c,d,e=$(b),f={editable:!0,maxFor:void 0,minFor:void 0,klass:{holder:"datepicker__holder picker__holder"+(e.hasClass("js-datepicker-right")?" datepicker__holder-right":"")}};d=_.merge({},f,a.objFromString(e.data("datepicker-options"))),$(b).pickadate(d),c=e.pickadate("picker"),c.on("open",function(){this.$node.parents(".input-group").find(".js-open-datepicker").addClass("is-active")}),c.on("close",function(){this.$node.parents(".input-group").find(".js-open-datepicker").removeClass("is-active")}),d.maxFor&&e.on("change",function(){var a=$(this).val()||d.min;a&&$(d.maxFor).pickadate("picker").set("max",a)}),d.minFor&&e.on("change",function(){var a=$(this).val()||d.max;a&&$(d.minFor).pickadate("picker").set("min",a)});var g=!0;e.on("change",function(){if(g){var a=$(this),b=a.pickadate("picker");try{g=!1,a.val()?b.set("select",a.val()):b.set("clear")}finally{g=!0}}})}),_.each(b.find(".js-timepicker"),function(b){var c,d,e=$(b),f={mask:"h:halfs",oncomplete:function(){e.trigger("timepicker:complete")},onincomplete:function(){e.trigger("timepicker:incomplete")}};c=_.merge({},f,a.objFromString(e.data("timepicker-options"))),d=c.mask,delete c.mask,e.inputmask(d,c),e.attr("placeholder",e.data("_inputmask").opts.placeholder)})}}(),function(){AGN.Initializers.Delegate=function(a){a||(a=$(document)),a.all("[data-delegate]").each(function(){var a=$(this),b=a.data("delegate"),c=a.data("delegate-events")||"click";a.on(c,function(a){var c=$(b);c.length>0&&c.trigger($.Event(a))})})}}(),function(){var a=AGN.Lib.Helpers;AGN.Initializers.DisplayDimensions=function(b){_.each($("[data-display-dimensions]"),function(b){var c=$(b),d=a.objFromString(c.data("display-dimensions")).scope,e=c.parents(d),f=e.find("[data-dimensions]");c.ensureLoad(function(){var a=b.naturalWidth,c=b.naturalHeight;f.html(a+" x "+c+" px")})})}}(),function(){AGN.Initializers.Dragster=function(a){$(".dropzone").each(function(){new Dragster(this)})}}(),function(){AGN.Initializers.DropdownExpand=function(a){_.each($("[data-dropdown-expand]"),function(a){var b,c,d=$(a),e=d.find(".dropdown-menu"),f=d.data("dropdown-expand"),g=$(f);d.removeClass("hidden"),e.html(""),b=g.parent().width(),c=g.children().filter(d).outerWidth(!0)+15,_.each(g.siblings(),function(a){var c=$(a);b-=c.outerWidth(!0)}),d.addClass("hidden"),_.reduce(g.children().not(d),function(a,c){var f=$(c);return f.removeClass("hidden"),a+=f.outerWidth(!0),a>=b&&(d.removeClass("hidden"),e.append(f.clone()),f.addClass("hidden")),a},c)})}}(),function(){AGN.Initializers.Emoji=function(a){a||(a=$(document)),a.all("[data-emoji]").each(function(){$(this).emojioneArea({placeholder:null})})}}(),function(){var a=AGN.Lib.Equalizer;AGN.Initializers.Equalizer=function(b){window.setTimeout(function(){_.each($("[data-equalizer]"),function(b){a($(b))})},1)}}(),function(){var a=AGN.Lib.Form;AGN.Initializers.Form=function(b){b||(b=$(document)),b.find("form input[type=text], form input[type=password]").bind("keyup keypress",function(a){var b=a.keyCode||a.which;if(13===b)return a.preventDefault(),!1});var c=b.all("form[data-form-focus]").first();if(c.exists()){var d=c.find('[name="'+c.data("form-focus")+'"]');!d.exists()||d.is(":disabled")||d.is(":hidden")||d.trigger("focus")}_.each(b.find("form"),function(b){a.get($(b))})}}(),function(){AGN.Initializers.IconsDefs=function(a){a||(a=$(document)),_.each(a.find("[data-icon]"),function(a){$icon=$(a);var b=AGN.url("assets/icons-defs.svg#"+$icon.data("icon"),!0);$icon.html('<svg viewBox="0 0 45 45"><use xlink:href="'+b+'"/></svg>')}),svg4everybody()}}(),function(){AGN.Initializers.Iframe=function(a){a||(a=$(document)),a.find("iframe:not(.js-fixed-iframe)").each(function(){var a=this,b=$(this);if(b.hasClass("js-simple-iframe")){var c,d,e=b.parent(),f=e.parent(),g=parseInt(b.data("max-width")),h=parseInt(b.data("height-extra"))||10,i=b.data("media-query"),j=!!window.sidebar;c=function(){var c,e,f=a.contentDocument?a.contentDocument:a.contentWindow.document,k=f.body,l=f.documentElement;e=i?g:Math.max(k.scrollWidth,k.offsetWidth,l.clientWidth,l.scrollWidth,l.offsetWidth),c=Math.max(k.scrollHeight,k.offsetHeight,l.clientHeight,l.scrollHeight,l.offsetHeight),c+=h,b.height(c),b.width(e),i&&j&&b.contents().find("body").css("overflow","hidden"),d(),$(window).off("viewportChanged",d),$(window).on("viewportChanged",d)},d=function(){f.width("auto"),b.width()>g&&g>f.width()?e.width(b.width()):e.width(Math.min(g,f.width())),i||(e.doubleScroll(),e.parent().doubleScroll(),$(".doubleScroll-scroll-wrapper").css("margin","0 auto"))},b.off("load"),b.on("load",c)}else b.on("load",function(){window.setTimeout(function(){b.iFrameResize({heightCalculationMethod:"grow",enablePublicMethods:!0})},50)})})}}(),function(){AGN.Initializers.ImageEditor=function(a){a||(a=$(document)),_.each(a.find("#editor-canvas"),function(a){var b=a.getContext("2d"),c=new Image;c.src=$("#editor-img").attr("src"),$("#editorResult").val(""),c.onload=function(){var a=c.width,d=c.height;b.canvas.width=a,b.canvas.height=d,b.drawImage(c,0,0,a,d),$("#l-editor-img-width").attr("value",a),$("#l-editor-img-height").attr("value",d),$("#l-editor-img-percent").attr("value",100);var e=a+$("#l-img-editor-tools").width()+10;$("#l-img-editor").css("min-width",e);var f=b.canvas.toDataURL();$("#editorResult").attr("value",f)}})}}(),function(){var a=AGN.Lib.Helpers;AGN.Initializers.InputMask=function(b){b||(b=$(document)),_.each(b.find(".js-inputmask"),function(b){var c,d,e=$(b);c=_.merge({},a.objFromString(e.data("inputmask-options"))),d=c.mask,delete c.mask,e.inputmask(d,c)})}}(),$.fn.queryBuilder.defaults({templates:{group:'<dl id="{{= it.group_id }}" class="rules-group-container">   <dt class="rules-group-header">     <div class="btn-group pull-right group-actions">       <button type="button" class="btn btn-xs btn-primary" data-add="rule">         <i class="{{= it.icons.add_rule }}"></i> {{= it.translate("add_rule") }}       </button>       {{? it.settings.allow_groups===-1 || it.settings.allow_groups>=it.level }}         <button type="button" class="btn btn-xs btn-primary" data-add="group">           <i class="{{= it.icons.add_group }}"></i> {{= it.translate("add_group") }}         </button>       {{?}}       {{? it.level>1 }}         <button type="button" class="btn btn-xs btn-alert" data-delete="group">           <i class="{{= it.icons.remove_group }}"></i> {{= it.translate("delete_group") }}         </button>       {{?}}     </div>     <div class="btn-group group-conditions">       {{~ it.conditions: condition }}         <label class="btn btn-xs btn-primary">           <input type="radio" name="{{= it.group_id }}_cond" value="{{= condition }}"> {{= it.translate("conditions", condition) }}         </label>       {{~}}     </div>     {{? it.settings.display_errors }}       <div class="error-container"><i class="{{= it.icons.error }}"></i></div>     {{?}}   </dt>   <dd class=rules-group-body>     <ul class=rules-list></ul>   </dd> </dl>'}}),$.fn.queryBuilder.defaults({templates:{rule:'<li id="{{= it.rule_id }}" class="rule-container">   <div class="rule-header clearfix">     <div class="btn-group pull-right rule-actions">       <button type="button" class="btn btn-regular btn-alert" data-delete="rule">         <i class="{{= it.icons.remove_rule }}"></i>       </button>     </div>   </div>   {{? it.settings.display_errors }}     <div class="error-container"><i class="{{= it.icons.error }}"></i></div>   {{?}}   <div class="rule-filter-container"></div>   <div class="rule-operator-container"></div>   <div class="rule-value-container"></div> </li>'}}),$.fn.queryBuilder.defaults({templates:{filterSelect:'{{ var optgroup = null; }} <select class="form-control js-select" name="{{= it.rule.id }}_filter">   {{? it.settings.display_empty_filter }}     <option value="-1">{{= it.settings.select_placeholder }}</option>   {{?}}   {{~ it.filters: filter }}     {{? optgroup !== filter.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = filter.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= filter.id }}">{{= it.translate(filter.label) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>'}}),$.fn.queryBuilder.defaults({templates:{ruleValueSelect:'{{ var optgroup = null; }} <select class="form-control js-select" name="{{= it.name }}" {{? it.rule.filter.multiple }}multiple{{?}}>   {{? it.rule.filter.placeholder }}     <option value="{{= it.rule.filter.placeholder_value }}" disabled selected>{{= it.rule.filter.placeholder }}</option>   {{?}}   {{~ it.rule.filter.values: entry }}     {{? optgroup !== entry.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = entry.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= entry.value }}">{{= entry.label }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>'}}),$.fn.queryBuilder.defaults({icons:{add_group:"icon icon-plus-circle",add_rule:"icon icon-plus",remove_group:"icon icon-times",remove_rule:"icon icon-trash",error:"icon icon-exclamation-triangle"}}),function(){var a=AGN.Lib.Load;AGN.Initializers.Load=function(b){b||(b=$(document)),_.each(b.find("[data-load]"),function(b){window.setTimeout(function(){a.load($(b))},100)})}}(),AGN.Lib.DomInitializer.new("logon-complete",function(a){var b=AGN.Lib.Form.get(a),c={};this.config&&$.each(this.config,function(a,b){try{var d=AGN.Lib.Storage.get("web-storage#"+b);null!=d&&(c[b]=d)}catch(a){console.error(a)}}),b.setValue("webStorageJson",JSON.stringify(c)),b.submit()}),function(){var a=30,b=function(){localStorage.setItem("closedDate",new Date)},c=function(a){var b=new Date,c=new Date(localStorage.getItem("closedDate"));return c.setDate(c.getDate()+parseInt(a)),b-c>0};AGN.Lib.DomInitializer.new("logon-notification",function(d){var e=t("defaults.info"),f=t("logon.info.multiple_tabs");c(a)&&AGN.Lib.Messages(e,f,"info",b,!1)})}(),AGN.Lib.DomInitializer.new("mailing-content-overview",function(a,b){if(!b){var c=AGN.Lib.Storage.get("mailings-content-dynNameID");if(c){var d=$("tr[data-dyn-name-id='"+c.dynNameID+"']");if(d.exists()){var e=d.position().top;setTimeout(function(){$("body").scrollTop(e)},1),AGN.Lib.Storage.set("mailings-content-dynNameID",{dynNameID:0})}}}var f=$("#myDatePicker");if(f.exists()){f.pickadate("picker").on({set:function(a){if("select"in a){var b=new Date(a.select);$("#startDay").val(b.getDate()),$("#startMonth").val(b.getMonth()+1),$("#startYear").val(b.getFullYear())}else $("#startDay").val(0),$("#startMonth").val(0),$("#startYear").val(0)}});var g=$("#myTimePicker");g.on("timepicker:complete",function(){var a=g.val();$("#startHour").val(a.substr(0,2)),$("#startMinute").val(a.substring(3,5))}),g.on("timepicker:incomplete",function(){$("#startHour").val(0),$("#startMinute").val(0)})}}),AGN.Lib.DomInitializer.new("mailing-content-view",function(a){AGN.Lib.Storage.set("mailings-content-dynNameID",{dynNameID:a.data("dyn-name-id")})}),AGN.Lib.Controller.new("mailing-followup-options",function(){var a="",b="",c=[],d="";this.addDomInitializer("mailing-followup-options",function(){var e=this.config;a=e.followUpContainer,b=e.mailingIdContainer,c=e.additionalOptions,d=e.advertisingUrl,changeFollowUpOptionsSet()}),getAdditionalAdvertisingOptions=function(){return AGN.Lib.Template.text("followupAdvertisingOptions",{items:c})},changeFollowUpOptionsSet=function(){var c=AGN.Lib.Select.get($(b)).getSelectedValue();jQuery.ajax({action:"POST",url:d,data:{mailingId:c},success:function(b){$(jQuery.find(a+" .advertisingOption")).remove(),b.isAdvertisingContentType&&$(jQuery.find(a)).append(getAdditionalAdvertisingOptions())}})},AGN.Lib.Action.new({change:b},function(){changeFollowUpOptionsSet()})}),AGN.Lib.DomInitializer.new("mailing-overview-table",function(a){a.removeClass("hidden")}),function(){function a(a,b,c,d,e,f){function g(a,b){var c=a||"";b.select2("search",c)}function h(a,b){var c=a||"",d=b.select2("container").find(".select2-chosen");b.select2("val",c),d.text(c)}var i=d,j={results:[]},k=a;k.select2({openOnEnter:!0,minimumInputLength:1,initSelection:function(a,b){},id:function(a){return e?a.mailingID:i},formatResult:function(a){return'<div style="box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);"><div class="row"><div class="col-sm-6">'+t("fields.mailing.parameter")+'</div><div class="col-sm-6">'+a.name+'</div></div><div class="row"><div class="col-sm-6">'+t("fields.mailing.description")+'</div><div class="col-sm-6">'+a.description+'</div></div><div class="row"><div class="col-sm-6">'+t("fields.mailing.for_mailing")+'</div><div class="col-sm-6">'+a.mailingID+'</div></div><div class="row"><div class="col-sm-6">'+t("fields.mailing.change_date")+'</div><div class="col-sm-6  ">'+new Date(a.changeDate).toLocaleDateString()+"</div></div></div>"},formatSelection:function(a){return e?a.mailingID:void AGN.Lib.Page.reload(f.replace("{mailing-info-id}",a.mailingInfoID),!0)},ajax:{url:b,data:function(a){var b={};return i=a,h(i,k),b[c]=a,b},results:function(a){var b=0;return a.forEach(function(a){a.id=b++}),j={results:a}},cache:!0}}),k.on("select2-open",function(){g(i,k)}),h(d,k)}AGN.Lib.DomInitializer.new("mailing-parameter-list-search-initializer",function(b){var c=AGN.Lib.Helpers.objFromString(b.data("config")),d=c.searchLink,e=c.viewLink,f=c.mailingSearchQuery,g=c.parameterSearchQuery,h=$("#parameter_search_field"),i=$("#mailing_search_field");new a(h,d,"parameterSearchQuery",g,(!1),e),new a(i,d,"mailingSearchQuery",f,(!0))})}(),AGN.Lib.DomInitializer.new("mediapool-image-pick",function(a){function b(a){var b=a.data("image-id");if(b>0){var c=k.images.find(function(a){return a.id===b});return c||{id:b}}return null}var c=a.find("#mediapool-image-pick-options"),d=a.find("#mediapool-browser-results"),e=a.find(".modal-body"),f=a.find("#mpFilterKeywords"),g=a.find("#mpFilterCategory"),h=a.find("#mpSortCriteria"),i=a.find("#mpIsAscendingSortOrder"),j=AGN.Lib.Template.prepare("mediapool-browser-results-template"),k=c.json(),l=null;k.images&&d.html(j({results:k.images,fullListSize:k.fullListSize})),this.addAction({click:"mpSearchImages",enterdown:"mpFilterKeywords"},function(){e.addClass("ui-modal-loading"),$.ajax({type:"POST",url:k.urls.MEDIAPOOL_VIEW,data:{categoryId:g.val(),keywords:f.val(),sortCriteria:h.val(),isAscendingSortOrder:i.val()}}).done(function(a){var b=a.fullListSize,c=a.partialList;d.html(j({results:c,fullListSize:b})),k.images=c,l=null}).fail(function(){d.html(j({results:[],fullListSize:0})),k.images=[],l=null}).always(function(){e.removeClass("ui-modal-loading")})}),this.addAction({dblclick:"mpSelectImage"},function(){var c=b(this.el);c&&AGN.Lib.Confirm.get(a).positive(c)}),this.addAction({click:"mpSelectImage"},function(){l&&l.removeClass("active"),l=this.el,l.addClass("active")}),this.addAction({click:"mpAcceptImage"},function(){if(l){var c=b(l);c&&AGN.Lib.Confirm.get(a).positive(c)}else AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")})}),function(){AGN.Initializers.Menu=function(a){a||(a=$(document)),AGN.Lib.Menu.init()}}(),function(){var a={data:{chartsColors:["#26b98a"],statChartData:{columnTitles:[],c3data:{bindto:"#barchart-message-stats",data:{columns:[],type:"bar",labels:!0},axis:{x:{tick:{centered:!0,fit:!0,format:function(b){return a.data.statChartData.columnTitles[b]}}},y:{show:!1}},legend:{show:!1},tooltip:{format:{title:function(){return null},name:function(b,c,d,e){return a.data.statChartData.columnTitles[e]},value:function(a,b,c,d){return a}}},padding:{right:25,left:25}},build:function(a){return this.columnTitles.push(a.shift()),a.unshift("values"),this.c3data.data.columns=[a],this.c3data}}},updateChart:function(b){$.ajax({type:"GET",url:b,success:function(b){c3.generate(a.data.statChartData.build(b)),AGN.Initializers.Equalizer()}})}};AGN.Lib.MessageStatisticsService=a,AGN.Lib.DomInitializer.new("message-stat",function(b){var c=AGN.Lib.Helpers.objFromString(b.data("config"));c&&c.url&&a.updateChart(c.url)})}(),function(){function a(a){a||(a=$(document));var c=[];_.each(a.find(".js-datepicker"),function(a){var b=$(a);b.hasClass("js-datepicker-period-start")&&(b.attr("datepicker-period-id")in c||(c[b.attr("datepicker-period-id")]={startEl:null,endEl:null}),c[b.attr("datepicker-period-id")].startEl=b),b.hasClass("js-datepicker-period-end")&&(b.attr("datepicker-period-id")in c||(c[b.attr("datepicker-period-id")]={startEl:null,endEl:null}),c[b.attr("datepicker-period-id")].endEl=b)});for(var d=0;d<c.length;d++)b(c[d].startEl.pickadate("picker"),c[d].endEl.pickadate("picker"))}function b(a,b){var c=a,d=b;c.get("value")&&d.set("min",c.get("select")),d.get("value")&&c.set("max",d.get("select")),c.on("set",function(a){a.select?d.set("min",c.get("select")):"clear"in a&&d.set("min",!1)}),d.on("set",function(a){a.select?c.set("max",d.get("select")):"clear"in a&&c.set("max",!1)})}AGN.Lib.DomInitializer.new("news-editor-period",function(b){a(b)})}(),function(){var a={data:{chartsColors:["#0071b9","#009999","#92d050","#41641a","#ffc000"],browserChartData:{c3data:{bindto:"#notificationGlobalBrowserStat",data:{rows:[],type:"donut"},donut:{label:{show:!0}},legend:{position:"right"},tooltip:{show:!1}},build:function(b,c){this.c3data.data.rows=[b,c];for(var d={},e=0;e<b.length;e++)d[b[e]]=a.data.chartsColors[e];return this.c3data.data.colors=d,this.c3data}}},roundTo:function(a,b){return 1*parseFloat(a).toFixed(b)},updateChart:function(b){$.ajax({type:"POST",url:b,success:function(b){var c=[],d=[],e=0;for(key in b){var f=a.roundTo(100*b[key],1);c.push(key),d.push(f),e+=f}if(!isNaN(e)&&e>0)for(var g=0;g<d.length;g++)c[g]+=" "+a.roundTo(100*d[g]/e,1)+"%";c3.generate(a.data.browserChartData.build(c,d)),AGN.Initializers.Equalizer()}})}};AGN.Lib.GLobalNotificationBrowserStatService=a,AGN.Lib.DomInitializer.new("notification-global-browser-stat",function(a){var b=AGN.Lib.Helpers.objFromString(a.data("config"));b&&b.url&&AGN.Lib.GLobalNotificationBrowserStatService.updateChart(b.url)})}(),function(){var a={data:{chartColors:["#0071b9","#006600","#b30000"],globalProgressChartData:{columnTitles:[],c3data:{bindto:"#notificationGlobalProgressStat",data:{x:"x",columns:[]},axis:{x:{type:"category",tick:{centered:!0,fit:!1}}},padding:{right:25}},build:function(b,c,d,e){this.c3data.data.columns=[b,c,d,e];var f={};return f[c[0]]=a.data.chartColors[0],f[d[0]]=a.data.chartColors[1],f[e[0]]=a.data.chartColors[2],this.c3data.data.colors=f,this.c3data}}},updateChart:function(b){var c=["x"],d=[],e=[],f=[],g=$("#selectMode").val(),h=$("#selectMonth").val(),i=$("#selectYear").val(),j=$("#startDay").val(),k=$("#endDay").val();$.ajax({type:"POST",url:b,data:{dateMode:g,selectMonth:h,selectYear:i,startDay:j,endDay:k},success:function(b){for(objIndex in b){var g=b[objIndex];for(objKey in g){0==objIndex&&"time"!=objKey&&(0==d.length?d.push(objKey):0==e.length?e.push(objKey):0==f.length&&f.push(objKey));var h=g[objKey];"time"==objKey?c.push(h):objKey==d[0]?d.push(h):objKey==e[0]?e.push(h):objKey==f[0]&&f.push(h)}}c3.generate(a.data.globalProgressChartData.build(c,d,e,f)),AGN.Initializers.Equalizer()}})}};AGN.Lib.GLobalNotificationProgressStatService=a,AGN.Lib.DomInitializer.new("notification-global-progress-stat",function(a){var b=AGN.Lib.Helpers.objFromString(a.data("config"));b&&b.url&&AGN.Lib.GLobalNotificationProgressStatService.updateChart(b.url)})}(),function(){var a={data:{chartsColors:["#0071b9","#92D050","#41641A"],statusChartData:{columnTitles:[],c3data:{bindto:"#notificationGlobalStatusStat",data:{columns:[],type:"bar",labels:!0,color:function(b,c){return a.data.chartsColors[c.index]}},axis:{x:{tick:{centered:!0,fit:!0,format:function(b){return a.data.statusChartData.columnTitles[b]}}},y:{show:!1}},legend:{show:!1},tooltip:{format:{title:function(){return null},name:function(b,c,d,e){return a.data.statusChartData.columnTitles[e]},value:function(a,b,c,d){return a}}},padding:{right:25,left:25}},build:function(a,b){this.columnTitles=a;var c=b.slice(0);return c.unshift("values"),this.c3data.data.columns=[c],this.c3data}}},updateChart:function(b){$.ajax({type:"POST",url:b,success:function(b){var c=[],d=[];for(key in b)c.push(key),d.push(b[key]);c3.generate(a.data.statusChartData.build(c,d)),AGN.Initializers.Equalizer()}})}};AGN.Lib.GLobalNotificationStatusStatService=a,AGN.Lib.DomInitializer.new("notification-global-status-stat",function(a){var b=AGN.Lib.Helpers.objFromString(a.data("config"));b&&b.url&&AGN.Lib.GLobalNotificationStatusStatService.updateChart(b.url)})}(),function(){AGN.Initializers.PushNotificationPreview=function(a){a||(a=$(document)),_.each(a.find(".push-notification-preview-button"),function(a){function b(a){a.prop("disabled",!0),a.parent().attr("data-tooltip",a.parent().attr("data-tooltip-if-disabled"))}var c=$(a),d=c.data("notification-form");"denied"==Notification.permission?b(c):c.click(function(){function a(){var a=$("#"+d),b=a.find("#pushTitle"),c=a.find("#pushContent"),e=a.find("#pushIcon"),f=a.find("#pushLink"),g=b?b.val():"",h=c?c.val():"",i=e?e.val():"",j=f?f.val():"",k={body:h,icon:i},l=new Notification(g,k);l.onclick=function(a){a.preventDefault(),window.open(j,"_blank")}}"granted"!=Notification.permission?Notification.requestPermission(function(d){"granted"==d?a():"denied"==d&&b(c)}):a()})})}}(),function(){function a(a){var b=[],d=[];for(var e in a)a.hasOwnProperty(e)&&(b.push(e),d.push(a[e]));c3.generate(c.data.statChartData.build(b,d))}function b(a){var b=["x"],d=[],e=[];for(objIndex in a){var f=a[objIndex];for(var g in f)f.hasOwnProperty(g)&&(0==objIndex&&"time"!=g&&(0==d.length?d.push(g):0==e.length&&e.push(g)),"time"==g?b.push(f[g]):d[0]==g?d.push(f[g]):e[0]==g&&e.push(f[g]))}c3.generate(c.data.progressChartData.build(b,d,e))}var c={data:{chartsColors:["#0071b9"],statChartData:{columnTitles:[],c3data:{bindto:"#barchart-notification-stats",data:{columns:[],type:"bar",labels:!0},axis:{x:{tick:{centered:!0,fit:!0,format:function(a){return c.data.statChartData.columnTitles[a]}}}},legend:{show:!1},tooltip:{format:{title:function(){return null},name:function(a,b,d,e){return c.data.statChartData.columnTitles[e]},value:function(a,b,c,d){return a}}},padding:{right:25}},build:function(a,b){this.columnTitles=a;var c=b.slice(0);return c.unshift("values"),this.c3data.data.columns=[c],this.c3data}},progressChartData:{c3data:{bindto:"#progresschart-notification-stats",data:{x:"x",columns:[]},axis:{x:{type:"category",tick:{fit:!1}}},zoom:{enabled:!0,rescale:!0},subchart:{show:!0},padding:{right:25}},build:function(a,b,c){return this.c3data.data.columns=[a,b,c],this.c3data}}},updateCharts:function(c,d){$.ajax({type:"POST",url:d,data:{pushID:c},success:function(c){a(c.common),b(c.viewsclicks),AGN.Initializers.Equalizer()}})}};AGN.Lib.NotificationStatService=c,AGN.Lib.DomInitializer.new("notification-stats",function(a){var b=AGN.Lib.Helpers.objFromString(a.data("config"));b&&b.pushId&&b.url&&AGN.Lib.NotificationStatService.updateCharts(b.pushId,b.url)})}(),function(){var a=AGN.Lib.Helpers;AGN.Initializers.PicturesSlider=function(b){b||(b=$(document)),_.each(b.find(".js-pictures-slider"),function(c){var d=$(c),e=function(a,c){_.each(b.find(a.getOption(c)),function(a){var b=$(a);b.hasClass("slick-disabled")?b.addClass("disabled"):b.removeClass("disabled")})};d.on("init",function(a,b){e(b,"prevArrow"),e(b,"nextArrow")}),d.on("afterChange",function(a,b,c){e(b,"prevArrow"),e(b,"nextArrow")});var f=_.merge({},a.objFromString(d.data("pictures-slider-options")));d.slick(f)})}}(),function(){AGN.Initializers.PollingForm=function(a){a||(a=$(document)),_.each(a.find('[data-form="polling"]'),function(a){var b=$(a);AGN.Lib.Form.get(b).submit()})}}(),function(){var a=AGN.Lib.Popover;AGN.Initializers.Popover=function(){a.validate()}}(),function(){function a(a){var b=[];return a.forEach(function(a){var c=$("<option />");c.text(t("date.formats."+a)),c.val(a),b.push($("<div/>").append(c).html())}),b.join("")}function b(a,b){return b.replace("DD",AGN.Lib.Helpers.pad(a.getDate(),2)).replace("MM",AGN.Lib.Helpers.pad(a.getMonth()+1,2)).replace("YYYY",AGN.Lib.Helpers.pad(a.getFullYear(),4))}function c(a,b){if(!a)return!1;var c=e(b);if(c){for(var d=0;d<c.length;d++){var f=c[d];if(f.isDigitFragment)if(f.isLenient){var g=a.match("^\\d{1,"+f.lexeme.length+"}");if(!g)return!1;a=a.substring(g[0].length)}else{if(a.length<f.lexeme.length)return!1;if(!a.substr(0,f.lexeme.length).match(/^\d+$/))return!1;a=a.substring(f.lexeme.length)}else{if(!a.startsWith(f.lexeme))return!1;a=a.substring(f.lexeme.length)}}return!a}return!1}function d(a){var b=["DD","MM","YYYY",".","-","_"];if(a)for(var c=0;c<b.length;c++)if(a.startsWith(b[c]))return b[c];return!1}function e(a){for(var b=["DD","MM","YYYY"],c=[];a;){var e=d(a);if(!e)return!1;var f=!1,g=!1;if(b.includes(e)&&(f=!0,g=!0,c.length)){var h=c[c.length-1];h.isDigitFragment&&(h.isLenient=!1,g=!1)}c.push({lexeme:e,isDigitFragment:f,isLenient:g}),a=a.substring(e.length)}return!!c.length&&c}AGN.Initializers.TargetGroupQueryBuilderExtend=function(){function d(a,b){Math.sign(a)===-1?b.push("sub"):b.push("add")}function e(a,b,c){c&&(b="sub"===c?"-"+Math.abs(b):"+"+Math.abs(b)),a.$el.find("#date-filter").val(b)}var f=2,g={},h=function(){return $("#helpLanguage").val()},i=function(b){return"<select class='form-control' id='date-format'>"+a(b)+"</select>"},j=$.fn.queryBuilder,k=j.constructor,l=k.prototype.init,m=k.prototype.validate;g=k.utils;var n=k.selectors;j.extend({init:function(a){return this.on("afterCreateRuleInput",function(a,b){var c=a.builder.optionsByType[b.filter.type];if(c){var d=c.postCreate;d&&"function"==typeof d&&d.call(a.builder,b,c)}}),a&&a.rules&&a.rules.length?this.initialRule=!1:(this.initialRule=!0,a.rules=[{initialRule:!0,empty:!0}]),l.call(this,a)},optionsByType:{date:{availableFormats:["DD.MM.YYYY","YYYYMMDD","DDMMYYYY","MMDD","DDMM","DD","MM","YYYY"],input:function(a,b){return $('<div class="qb-input-label"><label class="checkbox-inline"><input name="today" type="checkbox"><span class="text">'+t("defaults.today")+'</span></label></div><div class="qb-input-element date-filter"><input class="form-control" type="text" id="date-filter"/></div><div class="qb-input-label" id="date-offset-label" style="display: none;"><div class="form-badge qb-input-inner">'+t("defaults.days")+'</div></div><div class="qb-input-label"><div class="qb-input-inner">'+t("date.formats.label")+'</div></div><div class="qb-input-element">'+i(b.availableFormats)+'</div><div class="qb-input-label"><div class="qb-input-inner"><button type="button" class="icon icon-help" data-help="help_'+h()+'/targets/DateFormat.xml"></button></div></div>')},postCreate:function(a){var c=a.$el.find("input[name=today]"),d=a.$el.find("#date-offset-label"),e=a.$el.find("#date-filter"),f=a.$el.find("#date-format"),g=function(){var g=c.prop("checked");d.toggle(g),e.off("change.offset keyup.offset"),a._updating_input||(a._updating_value=!0,g?e.val("+0"):e.val(b(new Date,f.val())),a._updating_value=!1),g&&e.on("change.offset keyup.offset",function(a){var b=e.val();if(b){var c=parseInt(b);if(!isNaN(c)){var d=(c<0?"":"+")+c;d!=b&&e.val(d)}}else"change"===a.type&&e.val("+0")})};c.on("change",g)},valueSetter:function(a,b){var c,d,g,h=b.slice(0),i=a.$el.find("input[name=today]"),j=a.$el.find("#date-offset-label"),k=a.$el.find("#date-format"),l=!1;b.length>f?("today"===h.shift()&&(l=!0),g=h.shift(),c=h.shift(),d=h.shift()):(g=h.shift(),"today"===g&&(l=!0,g="+0"),d=h.shift()),j.toggle(l),e(a,g,c),k.val(d),i.prop("checked",l).change()},valueGetter:function(a){var b=[],c=a.$el.find("#date-filter").val(),e=a.$el.find("#date-format").val(),f=a.$el.find("input[name=today]").is(":checked");return f?(b.push("today"),b.push(c),d(c,b)):b.push(c),b.push(e),b},validate:function(a){if(2==a.length){var b=a[0],d=a[1];return b?!d||(!!c(b,d.toUpperCase())||["invalid_format"]):["empty_date"]}if(4==a.length){var e=a[1];if(!e||e!=parseInt(e))return["invalid_expression"]}return!0}}},validate:function(a){var b=this,c=b.model.root.rules;this.initialRule&&1===c.length?(this.clearErrors(),c[0].$el.addClass("initial-rule"),this.initialRule=!1):($(".initial-rule").removeClass("initial-rule"),m.call(this,a))},getRuleInput:function(a,b){var c=a.filter,d=a.filter.validation||{},e=a.id+"_value_"+b,f=c.vertical?" class=block":"",h="";if("function"==typeof c.input)h=c.input.call(this,a,e);else if("function"==typeof a.operator.input)h=a.operator.input.call(this,a,e);else if(this.optionsByType[a.filter.type]&&"function"==typeof this.optionsByType[a.filter.type].input)h=this.optionsByType[a.filter.type].input.call(this,a,this.optionsByType[a.filter.type],e);else switch(c.input){case"radio":case"checkbox":g.iterateOptions(c.values,function(a,b){h+="<label"+f+'><input type="'+c.input+'" name="'+e+'" value="'+a+'"> '+b+"</label> "});break;case"select":h=this.getRuleValueSelect(e,a);break;case"textarea":h+='<textarea class="form-control" name="'+e+'"',c.size&&(h+=' cols="'+c.size+'"'),c.rows&&(h+=' rows="'+c.rows+'"'),void 0!==d.min&&(h+=' minlength="'+d.min+'"'),void 0!==d.max&&(h+=' maxlength="'+d.max+'"'),c.placeholder&&(h+=' placeholder="'+c.placeholder+'"'),h+="></textarea>";break;case"number":h+='<input class="form-control" type="number" name="'+e+'"',void 0!==d.step&&(h+=' step="'+d.step+'"'),void 0!==d.min&&(h+=' min="'+d.min+'"'),void 0!==d.max&&(h+=' max="'+d.max+'"'),c.placeholder&&(h+=' placeholder="'+c.placeholder+'"'),c.size&&(h+=' size="'+c.size+'"'),h+=">";break;default:h+='<input class="form-control" type="text" name="'+e+'"',c.placeholder&&(h+=' placeholder="'+c.placeholder+'"'),"string"===c.type&&void 0!==d.min&&(h+=' minlength="'+d.min+'"'),"string"===c.type&&void 0!==d.max&&(h+=' maxlength="'+d.max+'"'),c.size&&(h+=' size="'+c.size+'"'),h+=">"}return this.change("getRuleInput",h,a,e)},getRuleValueSelect:function(a,b){var c=this.templates.ruleValueSelect({builder:this,name:a,rule:b,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleValueSelect",c,a,b)},updateRuleOperator:function(a,b){var c=a.$el.find(n.value_container);a.operator&&0!==a.operator.nb_inputs?(c.css("display",""),!c.is(":empty")&&b&&"function"!=typeof b.input&&"function"!=typeof a.operator.input&&a.operator.nb_inputs===b.nb_inputs&&a.operator.optgroup===b.optgroup||this.createRuleInput(a)):(c.hide(),a.__.value=void 0),a.operator&&(a.$el.find(n.rule_operator).val(a.operator.type),a.__.value=this.getRuleInputValue(a)),this.trigger("afterUpdateRuleOperator",a,b),this.trigger("rulesChanged")},createRuleOperators:function(a){var b=a.$el.find(n.operator_container).empty();if(a.filter){var c=this.getOperators(a.filter);if(!a.filter.skipOperator){var d=$(this.getRuleOperatorSelect(a,c));b.html(d)}a.filter.default_operator?a.__.operator=this.getOperatorByType(a.filter.default_operator):a.__.operator=c[0],a.$el.find(n.rule_operator).val(a.operator.type),this.trigger("afterCreateRuleOperators",a,c),this.applyRuleFlags(a)}},createRuleInput:function(a){var b=a.$el.find(n.value_container).empty();if(a.__.value=void 0,a.filter&&a.operator&&0!==a.operator.nb_inputs){for(var c=this,d=$(),e=a.filter,f=0;f<a.operator.nb_inputs;f++){var g=$(this.getRuleInput(a,f));if(e.canBeNegated){var h=c.getNegateInput();b.prepend(h),d=d.add(h)}f>0&&b.append(this.settings.inputs_separator),b.append(g),"function"==typeof e.values&&e.values.call(this,g),d=d.add(g);
}b.css("display",""),d.on("change "+(e.input_event||""),function(){a._updating_input||(a._updating_value=!0,a.negated=c.getNegateValue(a),a.value=c.getRuleInputValue(a),a._updating_value=!1)}),e.plugin&&d[e.plugin](e.plugin_config||{}),this.trigger("afterCreateRuleInput",a),void 0!==e.default_value?a.value=e.default_value:(a._updating_value=!0,a.negated=c.getNegateValue(a),a.value=c.getRuleInputValue(a),a._updating_value=!1),this.applyRuleFlags(a)}},setRuleInputValue:function(a,b){var c=a.filter,d=a.operator;if(c&&d){if(a._updating_input=!0,c.valueSetter)c.valueSetter.call(this,a,b);else if("function"==typeof a.operator.valueSetter)a.operator.valueSetter.call(this,a,b);else if(this.optionsByType[a.filter.type]&&"function"==typeof this.optionsByType[a.filter.type].valueSetter)this.optionsByType[a.filter.type].valueSetter.call(this,a,b);else{var e=a.$el.find(n.value_container);1===d.nb_inputs&&(b=[b]);for(var f=0;f<d.nb_inputs;f++){var h=g.escapeElementId(a.id+"_value_"+f);switch(c.input){case"radio":e.find("[name="+h+'][value="'+b[f]+'"]').prop("checked",!0).trigger("change");break;case"checkbox":$.isArray(b[f])||(b[f]=[b[f]]),b[f].forEach(function(a){e.find("[name="+h+'][value="'+a+'"]').prop("checked",!0).trigger("change")});break;default:d.multiple&&c.value_separator&&$.isArray(b[f])&&(b[f]=b[f].join(c.value_separator)),e.find("[name="+h+"]").val(b[f]).trigger("change")}}}this.setNegated(a),a._updating_input=!1}},getRuleInputValue:function(a){var b=a.filter,c=a.operator,d=[];if(b.valueGetter)d=b.valueGetter.call(this,a);else if("function"==typeof a.operator.valueGetter)d=a.operator.valueGetter.call(this,a);else if(this.optionsByType[a.filter.type]&&"function"==typeof this.optionsByType[a.filter.type].valueGetter)d=this.optionsByType[a.filter.type].valueGetter.call(this,a);else{for(var e=a.$el.find(n.value_container),f=0;f<c.nb_inputs;f++){var h,i=g.escapeElementId(a.id+"_value_"+f);switch(b.input){case"radio":d.push(e.find("[name="+i+"]:checked").val());break;case"checkbox":h=[],e.find("[name="+i+"]:checked").each(function(){h.push($(this).val())}),d.push(h);break;case"select":b.multiple?(h=[],e.find("[name="+i+"] option:selected").each(function(){h.push($(this).val())}),d.push(h)):d.push(e.find("[name="+i+"] option:selected").val());break;default:d.push(e.find("[name="+i+"]").val())}}d=d.map(function(a){return c.multiple&&b.value_separator&&"string"==typeof a&&(a=a.split(b.value_separator)),$.isArray(a)?a.map(function(a){return g.changeType(a,b.type)}):g.changeType(a,b.type)}),1===c.nb_inputs&&(d=d[0]),b.valueParser&&(d=b.valueParser.call(this,a,d))}return this.change("getRuleValue",d,a)},validateValue:function(a,b){var c=a.filter.validation||{},d=!0;return d=c.callback?c.callback.call(this,b,a):"function"==typeof a.operator.validate?a.operator.validate.call(this,b,a):this.optionsByType[a.filter.type]&&"function"==typeof this.optionsByType[a.filter.type].validate?this.optionsByType[a.filter.type].validate.call(this,b,a):this._validateValue(a,b),this.change("validateValue",d,b,a)},getRules:function(a){a=$.extend({get_flags:!1,allow_invalid:!1,skip_empty:!1},a);var b=this.validate(a);if(!b&&!a.allow_invalid)return null;var c=this,d=function b(d){var e={condition:d.condition,rules:[]};if(d.data&&(e.data=$.extendext(!0,"replace",{},d.data)),a.get_flags){var f=c.getGroupFlags(d.flags,"all"===a.get_flags);$.isEmptyObject(f)||(e.flags=f)}return d.each(function(b){if(b.filter||!a.skip_empty){var d=null;b.operator&&0===b.operator.nb_inputs||(d=b.value);var f={id:b.filter?b.filter.id:null,field:b.filter?b.filter.field:null,type:b.filter?b.filter.type:null,input:b.filter?b.filter.input:null,operator:b.operator?b.operator.type:null,value:d};if((b.filter&&b.filter.data||b.data)&&(f.data=$.extendext(!0,"replace",{},b.filter.data,b.data)),b.filter&&b.filter.canBeNegated&&(f.negated=b.negated),a.get_flags){var g=c.getRuleFlags(b.flags,"all"===a.get_flags);$.isEmptyObject(g)||(f.flags=g)}e.rules.push(c.change("ruleToJson",f,b))}},function(c){var d=b(c);0===d.rules.length&&a.skip_empty||e.rules.push(d)},this),c.change("groupToJson",e,d)}(this.model.root);return d.valid=b,this.change("getRules",d)},setRules:function(a,b){b=$.extend({allow_invalid:!1},b),$.isArray(a)&&(a={condition:this.settings.default_condition,rules:a}),a&&a.rules&&(0!==a.rules.length||this.settings.allow_empty)||g.error("RulesParse","Incorrect data object passed"),this.clear(),this.setRoot(!1,a.data,this.parseGroupFlags(a)),this.applyGroupFlags(this.model.root),a=this.change("setRules",a,b);var c=this;!function a(d,e){null!==e&&(void 0===d.condition?d.condition=c.settings.default_condition:c.settings.conditions.indexOf(d.condition)==-1&&(g.error(!b.allow_invalid,"UndefinedCondition",'Invalid condition "{0}"',d.condition),d.condition=c.settings.default_condition),e.condition=d.condition,d.rules.forEach(function(d){var f;if(void 0!==d.rules)if(c.settings.allow_groups!==-1&&c.settings.allow_groups<e.level)g.error(!b.allow_invalid,"RulesParse","No more than {0} groups are allowed",c.settings.allow_groups),c.reset();else{if(f=c.addGroup(e,!1,d.data,c.parseGroupFlags(d)),null===f)return;c.applyGroupFlags(f),a(d,f)}else{if(d.empty||(void 0===d.id&&(g.error(!b.allow_invalid,"RulesParse","Missing rule field id"),d.empty=!0),void 0===d.operator&&(d.operator="equal")),f=c.addRule(e,d.data,c.parseRuleFlags(d)),null===f)return;d.id&&(d.empty||(f.filter=c.getFilterById(d.id,!b.allow_invalid)),f.filter&&(f.operator=c.getOperatorByType(d.operator,!b.allow_invalid),f.operator||(f.operator=c.getOperators(f.filter)[0])),f.negated=d.negated,f.operator&&0!==f.operator.nb_inputs&&(void 0!==d.value?f.value=d.value:void 0!==f.filter.default_value&&(f.value=f.filter.default_value))),c.change("jsonToRule",f,d)!=f&&g.error("RulesParse","Plugin tried to change rule reference")}}),c.change("jsonToGroup",e,d)!=e&&g.error("RulesParse","Plugin tried to change group reference"))}(a,this.model.root),this.validate(),this.trigger("afterSetRules")},getNegateValue:function(a){var b,c=a.$el.find("select.negate");return 0!==c.length&&(b="true"===c.val()),b},getNegateInput:function(){var a='<div class="qb-input-negate"><select class="form-control negate"><option value="false">'+t("defaults.yes")+'</option><option value="true">'+t("defaults.no")+"</option></select></div>";return $(a)},setNegated:function(a){var b=a.$el.find("select.negate");0!==b.length&&b.val(""+a.negated)},displayError:function(a){if(this.settings.display_errors)if(null===a.error)a.$el.removeClass("has-error");else{var b=this.translate("errors",a.error[0]);b=this.constructor.utils.fmt(b,a.error.slice(1)),b=this.change("displayError",b,a.error,a),a.$el.addClass("has-error").find(this.constructor.selectors.error_container).eq(0).attr("data-tooltip",b),AGN.Initializers.Tooltip(a.$el)}}})}}(),function(){function a(a){var b=["data1"],c=[],d=0;return $.each(a.values,function(e,f){f>d&&(d=f),b.push(f),c.push(a.percentages[e])}),{values:b,percentages:c,maxValue:d}}function b(a,b){$(a.axes.x[0]).find(".tick text").attr("y",function(a,c){return parseInt(c||0)+b})}function c(c){c=a(c);var d=t("recipient.reaction.day"),e=t("date.weekdaysShort");c3.generate({bindto:"#reaction-weekday-chart",onrendered:function(){b(this,10)},size:{height:200},data:{type:"bar",columns:[c.values],labels:{format:{data1:function(a,b,d){return c.percentages[d]+"%"}}},color:function(a,b){return b.value===c.maxValue?"#0071b9":"#eaeaea"}},bar:{width:{ratio:.88}},legend:{show:!1},tooltip:{format:{name:function(){return d}}},axis:{x:{type:"category",categories:e,tick:{outer:!1}},y:{show:!1,padding:{top:20,bottom:20}}}})}function d(c){c=a(c);var d=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24];c3.generate({bindto:"#reaction-hour-chart",onrendered:function(){b(this,10)},size:{height:200},data:{type:"bar",columns:[c.values],labels:{format:{data1:function(a,b,d){return c.percentages[d]+"%"}}},color:function(a,b){return b.value===c.maxValue?"#0071b9":"#eaeaea"},onmouseover:function(a){this.internal.mainText.style("visibility",function(b){return a.index===b.index?"visible":"hidden"})},onmouseout:function(a){this.internal.mainText.filter(function(b){return a.index===b.index}).style("visibility","hidden")}},bar:{width:{ratio:.7}},legend:{show:!1},tooltip:{show:!1},axis:{x:{type:"category",categories:d,tick:{multiline:!1,centered:!0,outer:!1}},y:{show:!1,padding:{top:20,bottom:20}}}})}function e(a){var b;if("de"===a){var c=d3.locale({decimal:",",thousands:".",grouping:[3],currency:[""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M√§rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});b=c.numberFormat}else b=d3.format;return function(a){return[{text:a.date,classes:"l-revenue-date"},{text:b(",.2f")(a.revenue),classes:"l-revenue-value"},{text:a.name,mailingId:a.mailingId,classes:"l-revenue-name"}]}}function f(a,b,c){var d=[{title:t("mailing.senddate"),criterion:"timestamp",sorting:!1},{title:t("statistic.revenue"),criterion:"revenue",sorting:!1},{title:t("Mailing"),criterion:"name",sorting:!1}],f=e(c),g=function(a){return"asc"===a.sorting?"icon icon-arrow-down":"desc"===a.sorting?"icon icon-arrow-up":"hidden"},h=$.noop,i=d3.select("#mailings-revenue-rating-table").append("table"),j=i.append("thead").append("tr").selectAll("th").data(d).enter().append("th");j.append("span").on("click",function(a){h(a)}).attr("class","clickable unselectable").html(function(a){return a.title+"&nbsp;"});var k=j.append("i").attr("class",g);if(a.length){var l=i.append("tbody").selectAll("tr").data(a).enter().append("tr"),m=l.selectAll("td").data(f).enter().append("td").attr("class",function(a){return a.classes});m.filter(function(a){return!a.mailingId}).text(function(a){return a.text}),m.filter(function(a){return a.mailingId>0}).append("a").attr("href",function(a){return b.replace("{mailing-id}",a.mailingId)}).attr("title",function(a){return a.text}).text(function(a){return a.text}),h=function(a){k.attr("class",function(b){return b===a?b.sorting="asc"===b.sorting?"desc":"asc":b.sorting=!1,g(b)});var b="desc"===a.sorting?d3.descending:d3.ascending;l.sort(function(c,d){return b(c[a.criterion],d[a.criterion])})}}else l=i.append("tbody").append("tr").append("td").attr("colspan",3).attr("class","l-revenue-unavailable").text(t("recipient.chart.not_available"))}function g(a){var c=t("statistic.reactions"),d=t("statistic.impressions"),e=t("statistic.revenue"),f={};f[c]="#99c6e3",f[d]="#f43536",f[e]="#0071b9";var g=[],h=[c],i=[d],j=[e],k=!1,l=!1;$.each(a.values,function(a,b){g.push(a),h.push(b.reactions),i.push(b.impressions),j.push(b.revenues),b.impressions>0&&(k=!0),b.revenues>0&&(l=!0)});var m=[h],n={reactions:"area"};k&&(m.push(i),n.impressions="area"),l&&(m.push(j),n.revenues="bar");var o=a.mailingNames,p=g.length,q=3;p<60?q=5:p<100&&(q=4),c3.generate({bindto:"#reaction-progress-chart",onrendered:function(){b(this,10)},size:{height:200},data:{columns:m,types:n,color:function(a,b){return f[b.id?b.id:b]||a}},tooltip:{format:{title:function(b){var c=g[b],d=a.values[c].mailingIds;return d.length?o[d[0]]:c}}},bar:{width:10},point:{r:q},axis:{x:{type:"category",categories:g,height:40,tick:{multiline:!1,centered:!0,outer:!1,culling:!0}},y:{show:!1}}})}function h(a){var b=["#0071B9","#009BFF","#64C3FF","#00558A","#92D050"],c=[],d={},e={},f={};$.each(a,function(a,g){var h="data"+a;c.push([h,g.value]),d[h]=t(g.deviceClass),e[h]=g.percentage,f[h]=b[a]}),c3.generate({bindto:"#reaction-device-chart",size:{height:200},data:{columns:c,type:"donut",names:d,color:function(a,b){return f[b.id?b.id:b]||a}},donut:{label:{format:function(a,b,c){return e[c]+"%"}}},legend:{position:"right"},tooltip:{format:{value:function(a,b,c){return a+" ("+e[c]+"%)"}}}})}function i(a,b){var c=$(a),d=c.find(".l-kpi-value"),e=c.find(".l-kpi-sign");b>0?b<q?d.text(r):d.text(d3.round(b,2)):d.text(p),e.toggle(b>0)}function j(a){i("#reactionTypeKpi",a.percentage.percentage),$("#reactionGradeIcon").css("color",n(a.grade))}function k(a){i("#revenueSumKpi",a.value),i("#revenueAvgKpi",a.average),$("#revenueIcon").addClass(o(a.value))}function l(a){a.clicks.percentage>0?i("#performanceClicksKpi",a.clicks.percentage):i("#performanceClicksKpi",a.clicks.value>0?s:0),i("#performanceRevenueKpi",a.revenue)}function m(a){i("#impressionsByClickKpi",a.perClick),i("#impressionsByVisitKpi",a.perVisit),i("#impressionsByBuyKpi",a.perBuy)}function n(a){return u[a]||"inherit"}function o(a){return a>=v?A:a>=w?z:a>0?y:x}var p="---",q=.01,r="< 1",s=.001,u={HIGH_PERFORMER:"#008F00",OPPORTUNITY:"#92D050",LEAD:"#CCCDCD",SLEEPER:"#F43536"},v=500,w=150,x="poor-dog",y="question-mark",z="rising-star",A="cash-cow";AGN.Lib.DomInitializer.new("recipient-insights",function(){var a=this.config,b=this.config.insightsData;$.i18n.load(a.translations),c(b.weekdayReactionRankData),d(b.hourReactionRankData),f(b.mailingsRevenueRatingData,a.mailingUriPattern,a.localeLanguage),g(b.reactionsInProgressData),h(b.reactionDeviceRankData),j(b.mailingReactionPercentageData),k(b.customerRevenueData),l(b.customerPerformanceData),m(b.pageImpressionsData),this.addAction({change:"selectReactionProgressPeriodType"},function(){$("#reactionProgressPeriodDates").toggleClass("hidden","CUSTOM"!==this.el.val())}),this.addAction({click:"selectReactionProgressPeriod"},function(){var b,c,d=$('input[name="reactionProgressPeriod"]:checked');switch(d.val()){case"YEAR":case"MONTH":b=d.data("min"),c=d.data("max");break;case"CUSTOM":b=$("#reactionProgressMinDate").val(),c=$("#reactionProgressMaxDate").val();break;default:return void console.error("Unexpected period type: `"+d.val()+"`")}b&&c?$.ajax(a.urls.reactionsInProgress,{type:"GET",data:{customerId:a.customerId,min:b,max:c}}).done(function(a){g(a)}):AGN.Lib.Messages(t("defaults.error"),t("defaults.error"),"alert")})})}(),function(){AGN.Initializers.Scrollable=function(a){a||(a=$(document)),_.each(a.find(".js-scrollable"),function(a){var b=$(a);b.perfectScrollbar("destroy"),b.perfectScrollbar({wheelSpeed:5,scrollXMarginOffset:1})})}}(),function(){var a=AGN.Lib.Popover,b=AGN.Lib.Page;AGN.Initializers.Select=function(c){c||(c=$(document)),_.each(c.all("select"),function(c){var d=$(c),e={placeholder:d.attr("placeholder"),minimumResultsForSearch:10};d.hasClass("js-select")||(e.minimumResultsForSearch=-1),d.prop("multiple")&&(e.minimumResultsForSearch=1,e.formatSelection=function(a){if(a.element&&1===a.element.length){var c=$(a.element).data("url");if(c)return $("<a></a>",{href:c,text:a.text,click:function(){b.reload(c)}})}return a.text}),d.data("select2")&&d.select2("destroy"),d.hasClass("js-option-popovers")&&(e.formatResult=function(b,c,d,e){var f='<span style="white-space: nowrap;">'+e(b.text)+"</span>";return a.new(c,{trigger:"hover",delay:{show:300,hide:100},html:!0,template:'<div class="popover popover-wide" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',content:f}),f},d.on("select2-close",function(){a.validate()})),d.select2(e);var f=d.find("option[data-exclusive]");f.length>0&&d.on("select2-selecting",function(a){var b=d.find("option[value='"+a.val+"'][data-exclusive]").length>0;if(b){var c=!1;d.find("option:selected:not([data-exclusive])").each(function(){c=!0,$(this).removeAttr("selected")}),c&&d.trigger("change")}else c=!1,d.find("option:selected[data-exclusive]").each(function(){c=!0,$(this).removeAttr("selected")}),c&&d.trigger("change")})})}}(),AGN.Lib.DomInitializer.new("session-timer",function(){function a(){setInterval(function(){var a=Date.now(),c=j>a?j-a:0;A&&!(c<=k)||z||B||(u.show(),h(c)),!B&&!z&&j+l>a&&j<a&&i(),!z&&!B&&j+l<a&&b()},1e3)}function b(){$.ajax({url:p,global:!1,beforeSend:c,success:d,error:e,complete:f})}function c(){B=!0}function d(a){s=a.maxInactiveInterval,j=Date.now()+1e3*a.maxInactiveInterval,z=!1}function e(a){a.status===m&&(z=!0,g())}function f(){B=!1,A=!1}function g(){w.attr("class",x),v.text(t("logon.session.expired"))}function h(a){if(w.attr("class",x),a>0){var b=new Date(a),c="";c+=b.getMinutes()>0?d3.format("02")(b.getUTCMinutes())+":":"00:",c+=b.getSeconds()>0?d3.format("02")(b.getUTCSeconds()):"00",c+=" "+t("time.min")+" "+t("logon.session.remaining"),v.text(c)}}function i(){w.attr("class",y),v.text(t("logon.session.checking"))}var j,k=6e5,l=5e3,m=401,n=501,o=this.config,p=this.config.sessionInfoUrl,q=this.config.creationTime,r=this.config.lastAccessedTime,s=this.config.maxInactiveInterval,u=$("#session-time-layout"),v=$("#session-time-field"),w=$("#session-time-icon"),x="menu-item-logo icon icon-hourglass-end",y="icon icon-refresh icon-spin",z=!1,A=!0,B=!1;o&&q&&r&&s&&(j=1e3*s+Date.now(),a()),$(document).ajaxComplete(function(a,b){!a.preventSessionTimer&&!z&&!B&&b.status!==m&&b.status<n&&(j=1e3*s+Date.now()),a.preventSessionTimer=!0})}),function(){AGN.Initializers.Sizing=function(a){a||(a=$(document));var b=$(window).height();_.each(a.find('[data-sizing="container"]'),function(a){var c,d,e,f,g,h=$(a),i=h.find('[data-sizing="top"]'),j=h.find('[data-sizing="bottom"]'),k=h.find('[data-sizing="scroll"]');c=h.offset().top,d=_.reduce(_.map(i,function(a){return $(a).outerHeight()}),function(a,b){return a+b})||0,e=_.reduce(_.map(j,function(a){return $(a).outerHeight()}),function(a,b){return a+b})||0,g=h.data("sizing-offset")||20,f=b-c-d-e-g,_.each(k,function(a){var b,c=$(a);b=c.data("sizing-offset")||0,c.css({height:f-b,"overflow-y":"auto"}),c.trigger("scrollTo")})})}}(),function(){var a=AGN.Lib.Helpers;AGN.Initializers.Slider=function(b){b||(b=$(document)),_.each(b.find(".js-slider"),function(b){var c,d,e=$(b);c={handle:"round",min:0,max:101},d=_.merge({},c,a.objFromString(e.data("slider-options"))),e.slider(d)})}}(),function(){AGN.Initializers.Sync=function(a){a||(a=$(document)),_.each(a.find("[data-sync]"),function(a){var b=$(a),c=$(b.data("sync")),d=b.data("_editor");d?d.val(c.val()):b.val(c.val())})}}(),function(){var a=AGN.Lib.Tab;AGN.Initializers.TabToggle=function(b){b||(b=$(document)),_.each(b.find("[data-toggle-tab]"),function(b){a.init($(b))})}}(),AGN.Initializers.TableResponsiveWrap=function(a){a||(a=$(document)),a.find(".table-wrapper:not(.table-overflow-visible) table").wrap('<div class="table-responsive" />'),a.find(".table-wrapper.table-overflow-visible table").wrap('<div class="table-responsive" style="overflow: visible;" />')},function(){function a(a){var b=a.find(".js-row-show");1===b.length&&(a.data("link",b.attr("href")),b.remove(),_.each(a.prop("cells"),function(a){var c=$(a);0===c.find("a,input,select,textarea,button").length&&(c.addClass("table-link"),0===c.contents().length?c.html('<a href="'+b.attr("href")+'">&nbsp;</a>'):c.contents().wrapAll('<a href="'+b.attr("href")+'"></a>'))}))}function b(a){var b=a.find(".js-row-popover");if(1===b.length){var d=!1,e=null,f=function(){if(d===!1){d=$.Deferred();var c=b.children();if(0==c.length){var f=$("<div></div>");f.css({position:"fixed",visibility:"hidden"}),f.html(b.html()),c=f.children(),$(document.body).append(f),d.done(function(){c.detach(),f.remove()})}d.done(function(){e=c});var g=c.find("img").add(c.filter("img")).filter(function(){return this.complete?null:this});if(g.length>0){d.done(function(){var b=a.data("bs.popover");b&&(b.setContent(),a.is(":hover")&&a.popover("show"))});for(var h=function(){for(var a=!0,b=0;b<g.length;b++){var c=g[b];c&&(c.complete?($(c).off("load error"),g[b]=null):a=!1)}return a},i=0;i<g.length;i++)$(g[i]).on("load error",function(){h()&&d.resolve()})}else d.resolve()}return e};c.new(a,{trigger:"hover",delay:{show:300,hide:100},html:!0,content:f})}}var c=AGN.Lib.Popover;AGN.Initializers.TableRowActions=function(c){c||(c=$(document)),c.find(".js-table").each(function(){_.each(this.rows,function(c){var d=$(c);a(d),b(d)})})}}(),function(){var a=AGN.Lib.Table;AGN.Initializers.Table=function(b){b||(b=$(document)),b.all(".js-data-table").each(function(){var b=$(this),c=b.find(".js-data-table-body"),d=b.data("table");if(c.exists()&&d){var e,f,g=$("script#"+CSS.escape(d));g.exists()&&(e=g.json(),f=c.data("web-storage")?_.merge(AGN.Lib.WebStorage.get(c.data("web-storage"))||{},e.options||{}):e.options||{},new a(c,e.columns,e.data,f))}})}}(),function(){var a={filter_readonly:!0,condition_readonly:!0,operator_readonly:!0,value_readonly:!0,no_delete:!0,no_add_rule:!0,no_add_group:!0};AGN.Initializers.TargetGroupQueryBuilder=function(b){function c(a){var c=JSON.stringify(a.getRules({allow_invalid:!0}));_.each(b.find("#queryBuilderRules"),function(a){var b=$(a);b.val(c)})}function d(a,b){!q&&a.is("select")?AGN.Lib.Select.get(a).selectValueOrSelectFirst(b):a.val(b)}function e(a,b){var c=m(a,b);if(null===c)c=[{id:"?",label:"?",type:"string"}];else{var d={};c=c.filter(function(a){return!d[a.id]&&(d[a.id]=!0,!0)})}return g(c),c}function f(b){return b&&(b.flags=a,_.each(b.rules,function(b){b.flags=a})),b}function g(a){var b=function(a){var b=$('<select class="form-control qb-input-element-select mailings js-select">');return b.attr("id",a.id),b},c=function(a){var b=$('<select class="form-control qb-input-element-select auto-imports js-select">');return b.attr("id",a.id),b},e=function(a){return a.$el.find(".mailings :selected").val()},f=function(a){return a.$el.find(".auto-imports :selected").val()},g=function(a){var b={},c={},e=-1;return $(p).on("values-set",a,function(f){if($.isEmptyObject(c))d($(f.target),e);else{var g=$(f.target).attr("id"),h=c[g],i=h?h.$el.find(a):$(f.target);d(i,b[g]||e)}}),function(e,f){var g=e.$el.find(a);b[e.id]=f,c[e.id]=e,d(g,f)}},l=g("select.mailings"),m=g("select.auto-imports"),n={"finished auto-import":{type:"string",input_event:"values-setup-finished",input:c,values:function(a){i(a).done(function(){a.trigger("values-setup-finished")})},valueSetter:m,valueGetter:f,canBeNegated:!0,skipOperator:!0},"received mailing":{type:"string",input_event:"values-setup-finished",input:b,values:function(a){h(a).done(function(){a.trigger("values-setup-finished")})},valueSetter:l,valueGetter:e,canBeNegated:!0,skipOperator:!0},"opened mailing":{type:"string",input_event:"values-setup-finished",input:b,canBeNegated:!0,values:function(a){h(a).done(function(){a.trigger("values-setup-finished")})},valueSetter:l,valueGetter:e,skipOperator:!0},"clicked in mailing":{type:"string",input_event:"values-setup-finished",input:function(a){return $('<div class="qb-input-element"><select class="form-control js-select mailings" id="'+a.id+'" /></div><div class="qb-input-label"><div class="qb-input-inner">Links</div></div><div class="qb-input-element"><select class="form-control js-select links" id="'+a.id+'" /></div>')},values:function(a){var b=a.find(".mailings");b.change(function(b){var c=$(b.target).find(":selected").val();k(c,function(b){var c=a.find(".links"),d=$('<option value="-1">'+t("querybuilder.common.anyLink")+"</option>");c.empty(),c.append(d),$.each(b,function(a,b){d=$("<option/>"),d.text(b.url),d.val(b.id),c.append(d)}),c.trigger("link-values-set")})}),h(b,function(a){j(a,b),b.trigger("mailing-values-set")})},valueGetter:function(a){var b=[],c=0,d=1;return b[c]=a.$el.find("select.mailings").val(),b[d]=a.$el.find("select.links").val(),b},valueSetter:function(){var a=0,b=1,c="#tab-targetgroupQueryBuilderEditor",e={},f={},g=function(a,b){e[a.id]=b,f[a.id]=a};return $(c).on("mailing-values-set",function(b){var c,g=$(b.target),h=g.attr("id"),i=f[h];i?(c=i.$el.find(".mailings"),d(c,e[h][a]),c.trigger("change")):(d(g),g.trigger("change"))}),$(c).on("link-values-set",function(a){var c,g=$(a.target).attr("id"),h=f[g];h?(c=h.$el.find(".links"),d(c,e[g][b]||-1)):(c=$(a.target),d(c)),c.trigger("values-setup-finished")}),g}(),validation:{callback:function(a){return a.every(function(a){return a})||["string_empty"]}},canBeNegated:!0,skipOperator:!0},"revenue by mailing":{type:"string",input_event:"values-setup-finished",input:b,values:function(a){h(a).done(function(){a.trigger("values-setup-finished")})},valueSetter:l,valueGetter:e,canBeNegated:!0,skipOperator:!0}};a.forEach(function(a){var b=n[a.id];b&&$.extend(a,b)})}function h(a,b){var c=b||function(b){b.forEach(function(b){var c=$("<option>");c.text(b.shortname),c.val(b.mailingID),a.append(c)}),a.trigger("values-set")};return $.ajax({type:"POST",url:"workflow.do;jsessionid="+o,data:{method:"getAllMailingSorted",sortField:"date",sortDirection:"desc"},success:c})}function i(a,b){var c=b||function(b){b.forEach(function(b){a.append($("<option>",{text:b.shortname,value:b.autoImportId}))}),a.trigger("values-set")};return $.ajax({type:"POST",url:"autoimport.do;jsessionid="+o,data:{method:"listJson"},success:c})}function j(a,b){a.forEach(function(a){var c=$("<option>");c.text(a.shortname),c.val(a.mailingID),b.append(c)})}function k(a,b){$.ajax({type:"POST",url:"workflow.do;jsessionid="+o,data:{method:"getMailingLinks",mailingId:a},success:b})}function l(a,b,c){var d=m(a,b,c);return"true"==c&&(d=f(d)),d}function m(a,b){var c=null;return _.each(a.find(b),function(a){if(null===c){var b=$(a),d=b.val();c=JSON.parse(d)}}),c}function n(){return[{type:"equal",apply_to:["string","number","datetime"]},{type:"not_equal",apply_to:["string","number","datetime"]},{type:"less",apply_to:["string","number","datetime"]},{type:"less_or_equal",apply_to:["string","number","datetime"]},{type:"greater",apply_to:["string","number","datetime"]},{type:"greater_or_equal",apply_to:["string","number","datetime"]},{type:"like",nb_inputs:1,apply_to:["string"]},{type:"not_like",nb_inputs:1,apply_to:["string"]},{type:"contains",nb_inputs:1,apply_to:["string"]},{type:"not_contains",nb_inputs:1,apply_to:["string"]},{type:"begins_with",nb_inputs:1,apply_to:["string"]},{type:"not_begins_with",nb_inputs:1,apply_to:["string"]},{type:"mod",nb_inputs:1,apply_to:["number"],valueSelectors:["#first","#operator select","#second"],valueGetter:function(a){var b=[];return a.operator.valueSelectors.forEach(function(c){b.push(a.$el.find(c).val())}),b},valueSetter:function(a,b){a.operator.valueSelectors.forEach(function(c,d){a.$el.find(c).val(b[d])})},input:function(a){var b=this.operators.filter(function(a){return"mod"!==a.type}),c=this.getRuleOperatorSelect(a,b);return"<div class='qb-input-element'><input class='form-control' id='first' type='number'/></div><div class='qb-input-element' id='operator'>"+c+"</div><div class='qb-input-element'><input class='form-control' id='second' type='number'/></div>"},validate:function(a){return a.every(function(a){return a})||["string_empty"]}},{type:"is_empty",nb_inputs:0,apply_to:["string","number","datetime"]},{type:"is_not_empty",nb_inputs:0,apply_to:["string","number","datetime"]}]}b||(b=$(document));var o=$("#jSessionId").val(),p="#targetgroup-querybuilder",q=navigator.userAgent.match("MSIE 10.0;"),r=$('[name="locked"]').val();_.each(b.find(p),function(a){var b=$(a),d=n(),f=e(b,"#queryBuilderFilters");b.queryBuilder({filters:f,allow_empty:!0,operators:d,plugins:{sortable:{inherit_no_drop:!0,inherit_no_sortable:!0,icon:"icon icon-arrows-alt"}},rules:l(b,"#queryBuilderRules",r)}),q||AGN.Initializers.Select(b),b.on("afterMove.queryBuilder rulesChanged.queryBuilder",function(a){c(a.builder)}),b.on("afterAddGroup.queryBuilder afterDeleteGroup.queryBuilder afterUpdateGroupCondition.queryBuilder",function(a){c(a.builder)}),b.on("afterAddRule.queryBuilder afterDeleteRule.queryBuilder afterUpdateRuleValue.queryBuilder afterUpdateRuleOperator.queryBuilder afterUpdateRuleFilter.queryBuilder",function(a){c(a.builder)}),b.on("afterSetRules.queryBuilder afterUpdateRuleFilter.queryBuilder afterCreateRuleFilters.queryBuilder afterAddRule.querybuilder",function(a){q||AGN.Initializers.Select($(this))}),b.on("link-values-set",function(a){q||AGN.Initializers.Select($(a.target))}),b.on("mailing-values-set values-set",function(a){q||AGN.Initializers.Select($(a.target))})})}}(),AGN.Initializers.Template=function(a){a||(a=$(document)),_.each(a.find('script[type="text/x-mustache-template"]'),function(a){var b=$(a),c=b.attr("id");AGN.Opt.Templates[c]=b.html()})},function(){var a=AGN.Lib.Tile;AGN.Initializers.TileToggle=function(b){b||(b=$(document)),_.each(b.find("[data-toggle-tile]"),function(b){a.init($(b))})}}(),function(){var a=AGN.Lib.Tooltip;AGN.Initializers.Tooltip=function(b){b||(b=$(document)),$(".tooltip").remove(),b.find("[data-tooltip], [data-tooltip-help]").each(function(){var b=$(this);a.create(b,a.options(b))})}}(),function(){var a=AGN.Lib.Truncate.run,b=AGN.Lib.Breadcrumbs.truncate;AGN.Initializers.Truncate=function(c){c||(c=$(document)),setTimeout(function(){_.each(c.find(".l-header"),function(c){var d=$(c);a(d,".header-nav"),b(d.find(".header-nav"))})},50)}}(),function(){function a(a){a||(a=$(document));var c=[];_.each(a.find(".js-datepicker"),function(a){var b=$(a);b.hasClass("js-datepicker-period-start")&&(b.attr("datepicker-period-id")in c||(c[b.attr("datepicker-period-id")]={startEl:null,endEl:null}),c[b.attr("datepicker-period-id")].startEl=b),b.hasClass("js-datepicker-period-end")&&(b.attr("datepicker-period-id")in c||(c[b.attr("datepicker-period-id")]={startEl:null,endEl:null}),c[b.attr("datepicker-period-id")].endEl=b)});for(var d=0;d<c.length;d++)b(c[d].startEl.pickadate("picker"),c[d].endEl.pickadate("picker"))}function b(a,b){var c=a,d=b;c.get("value")&&d.set("min",c.get("select")),d.get("value")&&c.set("max",d.get("select")),c.on("set",function(a){a.select?d.set("min",c.get("select")):"clear"in a&&d.set("min",!1)}),d.on("set",function(a){a.select?c.set("max",d.get("select")):"clear"in a&&c.set("max",!1)})}AGN.Lib.DomInitializer.new("user-activity-log-period",function(b){a(b)})}(),function(){var a=AGN.Lib.View;AGN.Initializers.View=function(b){b||(b=$(document)),a.init()}}(),AGN.Lib.DomInitializer.new("web-storage-persist",function(){this.config&&$.each(this.config,function(a,b){var c="web-storage#"+$.trim(a),d=null;try{d=AGN.Lib.Storage.get(c)}catch(a){console.error(a)}null!=d?AGN.Lib.Storage.set(c,$.extend(d,b)):AGN.Lib.Storage.set(c,b)})}),function(){var a=AGN.Lib.Loader,b=AGN.Lib.Template,c=AGN.Lib.Page,d={initialize:function(b){b.loader!==!0&&void 0!==b.loader||(b.loader={show:function(){a.show()},hide:function(){a.hide()}})},show:function(a){var b=a.loader;if(b&&b.show)try{b.show()}catch(a){console.error(a)}},hide:function(a){var b=a.loader;if(b&&b.hide)try{b.hide()}catch(a){console.error(a)}}};$.ajaxPrefilter(function(a){d.initialize(a)}),$(document).ajaxSend(function(a,b,c){d.show(c)}),$(document).ajaxComplete(function(a,b,c){d.hide(c)}),$(document).ajaxError(function(a,e,f){if(d.hide(f),0!=e.readyState&&0!=e.status&&!(f.statusCode&&e.status in f.statusCode)){var g;if(401==e.status){var h=$.Event("ajax:unauthorized");$(document).trigger(h),!h.isDefaultPrevented()&&e.responseText&&c.render(e.responseText)}else if(403==e.status)g=b.text("permission-denied",{title:t("messages.permission.denied.title"),text:t("messages.permission.denied.text"),btn:t("defaults.ok")}),$("body").append(g);else{if(e.responseText)try{g=$(e.responseText).filter("#error-message")}catch(a){console.debug(a)}g&&g.exists()?$("body").append(g.html()):(g=b.text("error",{headline:t("messages.error.headline"),text:t("messages.error.text"),reload:t("messages.error.reload")}),$("body").append(g))}}}),$(document).on("click","a[data-ajax], a.js-ajax",function(a){var b=$(this);a.preventDefault(),c.reload(b.attr("href"),!0,b.data("ajax"))}),$(document).on("click","[data-prevent-load]",function(){a.prevent()}),window.onbeforeunload=function(){a.show()}}(),function(){$(document).on("click","[data-toggle-checkboxes]",function(a){var b=$(this),c=b.data("toggle-checkboxes"),d=b.closest(".tile-header").find("[data-toggle-tile]").data("toggle-tile");_.each($(d+" [type=checkbox]:enabled"),function(a){var b="on"==c;$(a).prop("checked",b)}),a.preventDefault()}),$(document).on("click","[data-toggle-checkboxes-all]",function(a){var b=$(this).data("toggle-checkboxes-all");
_.each($(".checkboxes-content [type=checkbox]:enabled"),function(a){var c="on"==b;$(a).prop("checked",c)}),a.preventDefault()})}(),function(){var a=AGN.Lib.Action;a.new({click:"[data-clone]"},function(){var a,b,c=this.el.data("clone"),d=this.el.data("clone-target"),e=parseInt(this.el.data("clone-count"));e+=1,this.el.data("clone-count",e),a=_.template(AGN.Opt.Templates[c],{count:e}),b=$(d).append(a),AGN.runAll(b)}),$(document).on("click","a[data-clone]",function(a){a.preventDefault()})}(),function(){var a=AGN.Lib.Form,b=AGN.Lib.Confirm,c=AGN.Lib.Action,d=AGN.Lib.Page;c.new({click:"[data-confirm], .js-confirm"},function(){var a;a=$.get(this.el.attr("href")),a.done(function(a){var c,e=$(a);return c=e.filter(".modal").add(e.find(".modal")),1!=c.length?void d.render(a):void b.create(a).done(function(a){d.render(a)})}),this.event.preventDefault()}),$(document).on("click","[data-confirm-positive], .js-confirm-positive",function(){var c=$(this),d=b.get(c),e=a.getWrapper(c);d&&(e.exists()?a.get(e).jqxhr().done(function(a){d.positive(a)}):d.positive(c.data("confirm-positive")))}),$(document).on("click","[data-confirm-negative], .js-confirm-negative",function(){var a=$(this),c=b.get(a);c&&c.negative(a.data("confirm-negative"))})}(),function(){var a=AGN.Lib.Table,b=AGN.Lib.WebStorage;$(document).on("click",".js-data-table-first-page",function(b){a.get($(this)).api.paginationGoToFirstPage()}),$(document).on("click",".js-data-table-prev-page",function(b){a.get($(this)).api.paginationGoToPreviousPage()}),$(document).on("click",".js-data-table-page",function(b){a.get($(this)).api.paginationGoToPage($(this).data("page"))}),$(document).on("click",".js-data-table-next-page",function(b){a.get($(this)).api.paginationGoToNextPage()}),$(document).on("click",".js-data-table-last-page",function(b){a.get($(this)).api.paginationGoToLastPage()}),$(document).on("click",".js-data-table-paginate",function(c){var d=$(this),e=d.data("page-size"),f=a.get(d).api;f.paginationSetPageSize(e),d.closest(".dropdown-menu").trigger("click");var g=d.data("web-storage");g&&b.extend(g,{paginationPageSize:parseInt(e)})}),$(window).on("viewportChanged",function(a){$(document).all(".js-data-table-body").each(function(){AGN.Lib.Table.get($(this)).redraw()})})}(),$(document).ready(function(){window.AGN.Lib.Controller.init(),window.AGN.runAll()}),function(){$(document).on("dragster:enter",function(a){$(a.target).addClass("drag-over")}),$(document).on("dragster:leave",function(a){$(a.target).removeClass("drag-over")})}(),function(){$(document).on("click",".dropdown-menu *",function(a){$target=$(a.target),$target.hasClass("js-dropdown-open")&&(a.preventDropdownClose=!0),1==$target.parent(".js-dropdown-open").length&&(a.preventDropdownClose=!0),$target.is("button")||$target.is("a")||1!=$target.parent("a").length&&1!=$target.parent("button").length&&($target.hasClass("js-dropdown-close")||1!=$target.parent(".js-dropdown-close").length&&(a.preventDropdownClose=!0))})}(),$(document).on("click",".js-close-error",function(a){$(a.target).hasClass("js-close-error")&&$(this).closest(".backdrop").remove()}),function(){function a(a){var b=a.keyCode||a.which;if(13===b)return!0;if(229===b&&a.originalEvent){var c=a.originalEvent.code;if("Enter"===c||"NumpadEnter"===c)return!0}return!1}var b=AGN.Lib.Action,c=AGN.Lib.Form,d=AGN.Lib.Confirm,e=AGN.Lib.Helpers;b.new({click:"[data-form-change]"},function(){c.get(this.el).setValueOnce("numberOfRowsChanged",!0)}),b.new({click:"[data-form-bulk]"},function(){var a=this.el.data("form-bulk"),b=this.el.prop("checked");c.get(this.el).bulkUpdate(a,b)}),b.new({click:"a[data-form-set], button[data-form-set]",change:"select[data-form-set], input[data-form-set]"},function(){var a=e.objFromString(this.el.data("form-set")),b=c.get(this.el);_.forEach(a,function(a,c){b.setValueOnce(c,a)})}),b.new({click:"a[data-form-url], button[data-form-url]",change:"select[data-form-url], input[data-form-url]"},function(){c.get(this.el).setActionOnce(this.el.data("form-url"))}),b.new({click:"a[data-form-resource], button[data-form-resource]",change:"select[data-form-resource], input[data-form-resource]"},function(){var a=c.get(this.el);a instanceof AGN.Lib.ResourceForm&&a.setResourceSelectorOnce(this.el.data("form-resource"))}),b.new({click:"a[data-form-persist], button[data-form-persist]",change:"select[data-form-persist], input[data-form-persist]"},function(){var a=e.objFromString(this.el.data("form-persist")),b=c.get(this.el);_.forEach(a,function(a,c){b.setValue(c,a)})}),b.new({click:"a[data-form-reset], button[data-form-reset]"},function(){c.get(this.el).reset()}),b.new({click:"a[data-form-abort], button[data-form-abort]"},function(){c.get(this.el).abort()}),b.new({click:"[data-form-confirm]"},function(){var a,b=this.el.data("form-confirm"),e=c.get(this.el);a=e.submit("confirm",b),a.done(function(a){var b,c=$(a);return b=c.filter(".modal").add(c.find(".modal")),1!=b.length?void e.updateHtml(a):void d.create(a).done(function(a){e.updateHtml(a)}).fail(e.revertAction)})}),b.new({click:"a[data-form-action], button[data-form-action]",change:"select[data-form-action], input[data-form-action]"},function(){var a,b=this.el.data("form-action"),d=c.get(this.el);setTimeout(function(){a=d.submit("action",b)},5)}),b.new({click:"a[data-form-submit], button[data-form-submit]",change:"select[data-form-submit], input[data-form-submit]"},function(){var a=this;setTimeout(function(){c.get(a.el).submit()},5)}),b.new({click:"a[data-form-submit-static], button[data-form-submit-static]",change:"select[data-form-submit-static], input[data-form-submit-static]"},function(){var a=this;setTimeout(function(){c.get(a.el).submit("static")},5)}),b.new({click:"a[data-form-submit-event], button[data-form-submit-event]",change:"select[data-form-submit-event], input[data-form-submit-event]"},function(){var a=this;setTimeout(function(){c.get(a.el).submit("event")},5)}),b.new({submit:"[data-form]"},function(){var a=this;"static"!=this.el.data("form")&&(this.event.preventDefault(),setTimeout(function(){c.get(a.el).submit()},5))}),b.new({keydown:'input[type="text"], input[type="password"]'},function(){if(a(this.event)){var b=$.Event("enterdown");if(this.el.trigger(b),b.isDefaultPrevented())return;var d=this.el.parents("form");if(d.exists())if(d.is("[data-form]")){var e=c.get(d);d.is("[data-action]")?e.submit("event"):e.submit()}else d.submit()}})}(),function(){var a=AGN.Lib.Help;$(document).on("click","[data-help]",function(b){a.show($(this)),b.preventDefault()})}(),function(){$(document).on("click","label",function(a){var b,c,d=$(this);b=$("#"+d.attr("for")),c=b.data("select2"),1==b.length&&c&&setTimeout(function(){c.opened()||c.open()},0)})}(),function(){function a(a){if("#"!==a){var c=window.location.href,d=c.indexOf("#");d>=0&&(c=c.substring(0,d)),b.replaceState(b.state||{},document.title,c+a)}}var b=window.history;$(document).on("click",'a[href^="#"]',function(b){b.isDefaultPrevented()||(b.preventDefault(),a($(this).attr("href")))}),$(document).on("click","[data-one-time]",function(){var a=$(this);setTimeout(function(){a.attr("disabled","disabled"),a.is("a")&&a.removeAttr("href")},1)})}(),function(){var a=AGN.Lib.Action,b=AGN.Lib.Menu;a.new({click:".menu-close"},function(){b.close()}),a.new({click:".menu-open"},function(){b.open()}),a.new({click:".menu-open"},function(){b.open()}),$(document).on("click","main",function(){b.isOpen()&&b.close()}),$(document).on("")}(),function(){var a=AGN.Lib.Action,b=AGN.Lib.Messages;a.new({click:"[data-msg]"},function(){var a=this.el.data("msg"),c=this.el.data("msg-content"),d=this.el.data("msg-type");if("system"===this.el.data("msg-system")){var e=$(document);if(e.find(".notification-info").is(":visible"))return!1;b(a,c,d)}else b(a,c,d)}),$(document).on("click","a[data-msg]",function(a){a.preventDefault()})}(),function(){var a=AGN.Lib.Action,b=AGN.Lib.Modal,c=AGN.Lib.Helpers;a.new({click:"[data-modal]"},function(){var a=this.el.data("modal"),d=c.objFromString(this.el.data("modal-set"));b.createFromTemplate(d,a)}),$(document).on("hidden.bs.modal",".modal",function(){var a=$(this);a.trigger("modal:close"),setTimeout(function(){a.remove()},100)}),$.fn.modal.Constructor.prototype.enforceFocus=function(){var a=this;$(document).on("focusin.modal",function(b){a.$element[0]!==b.target&&!a.$element.has(b.target).length&&$(b.target.parentNode).hasClass("cke_contents cke_reset")&&a.$element.focus()})}}(),function(){var a=AGN.Lib.Action;a.new({click:"[data-password]"},function(){var a=this.el.data("password"),b=this.el.data("password-toggle"),c=$(a);this.el.data("password-toggle",this.el.text()),this.el.text(b),"password"===c.prop("type")?c.prop("type","text"):c.prop("type","password"),this.event.preventDefault()})}(),function(){$(document).on("click",".js-open-datepicker",function(a){var b=$(this),c=b.parents(".input-group").find(".js-datepicker"),d=c.pickadate("picker");d.open()}),$(document).on("click",".js-datepicker",function(a){var b=$(this),c=b.pickadate("picker");c.open(),b.focus()})}(),function(){var a=AGN.Lib.Action;AGN.Lib.Modal,AGN.Lib.Helpers;a.new({click:"[data-popup]"},function(){var a=this.el.data("popup"),b=window.location.href,c=b.substring(0,b.lastIndexOf("/"));(!a||a.indexOf("://")<=0)&&(a=c+"/"+a),window.open(a,"help","width=800,height=600,left=0,top=0,scrollbars=yes")}),$(document).on("click","a[data-modal]",function(a){a.preventDefault()}),$(document).on("hidden.bs.modal",".modal",function(){var a=$(this);a.trigger("modal:close"),setTimeout(function(){a.remove()},100)})}(),function(){var a,b;a=function(){b&&clearTimeout(b),b=setTimeout(function(){AGN.Initializers.Equalizer(),AGN.Initializers.Truncate(),AGN.Initializers.Sizing(),AGN.Initializers.Scrollable(),AGN.Initializers.DropdownExpand(),_.each(AGN.Lib.Editor.all(),function(a){a.resize()}),$(window).trigger("viewportChanged")},500)},$(window).on("resize",a)}(),function(){var a=AGN.Lib.Action;a.new({"click change":"[data-sync-from]"},function(){var a=this.el.data("sync-from").split(/,\s?/),b=this.el.data("sync-to").split(/,\s?/);_.each(a,function(a,c){var d=$(a),e=$(b[c]),f=d.val(),g=e.attr("id"),h=e.data("_editor");window.CKEDITOR&&CKEDITOR.instances[g]?CKEDITOR.instances[g].setData(f):h?h.val(f):e.val(f)})}),$(document).on("click","a[data-sync-from]",function(a){a.preventDefault()})}(),function(){var a=AGN.Lib.Tile,b=AGN.Lib.Tab;$(document).on("click","[data-toggle-tab]",function(c){var d=$(this),e=a.trigger(d),f=d.data("toggle-tab-method")||"show";return a.show(e),b[f](d),c.preventDefault(),!1})}(),function(){var a=AGN.Lib.Form,b=AGN.Lib.Confirm,c=AGN.Lib.Helpers,d=AGN.Lib.Page;$(document).on("click",".js-table a, .js-table input, .js-table select, .js-table button, .js-table .js-checkable, .js-table .disabled",function(a){a.preventViewLoad=!0}),$(document).on("click",".js-table-sort",function(b){var e=$(this),f=e.children("a"),g=$(b.target),h=f.attr("href");if(g[0]==f[0]){if(a.getWrapper(e).exists()){var i=a.get(e),j=c.paramsFromUrl(h);_.each(j,function(a,b){i.setValue(b,a)}),i.submit()}else $.get(h).done(function(a){d.render(a,!1)});b.preventDefault()}}),$(document).on("click",".js-table-paginate",function(b){var d=$(this),e=d.attr("href"),f=a.get(d),g=c.paramsFromUrl(e);_.each(g,function(a,b){f.setValue(b,a)}),f.submit(),b.preventDefault();var h=d.closest(".tile");if(h.exists()){var i=h.offset().top;window.scrollY>i&&window.scrollTo(0,i-150)}else window.scrollTo(0,0)}),$(document).on("click",".js-row-delete",function(c){var d,e=$(this),f=e.is("button")?e.data("url"):e.attr("href"),g=a.get(e);f&&(d=$.get(f),d.done(function(a){var c,d=$(a);return c=d.filter(".modal").add(d.find(".modal")),1!=c.length?void g.updateHtml(a):void b.create(a).done(function(a){e.closest("tr").remove(),g.updateHtml(a)})})),c.preventDefault()}),$(document).on("click",".js-table tr",function(a){var b,c=$(this);a.preventViewLoad||(b=c.data("link"),"undefined"!=typeof b&&(window.location.href=b))}),$(document).on("click",'.js-checkable label, .js-checkable input[type="checkbox"], .js-checkable input[type="radio"]',function(a){a.stopPropagation()}),$(document).on("click",".js-checkable",function(a){var b,c,d=$(this);b=d.find('input[type="checkbox"], input[type="radio"]'),b.length&&_.each(b,function(a){c=$(a),c.prop("disabled")||(c.prop("checked",!c.prop("checked")),c.trigger("change"))})}),$(document).on("click",".disabled",function(a){a.preventDefault()})}(),function(){var a=AGN.Lib.Tile;$(document).on("click","[data-toggle-tile]",function(b){a.toggle($(this)),b.preventDefault()}),$(document).on("click","[data-toggle-tile-all]",function(b){var c=$(this).data("toggle-tile-all");_.each($("[data-toggle-tile]"),function(d){var e=$(d);"expand"==c?a.show(e):a.hide(e),b.preventDefault()})})}(),function(){$(document).on("change","[data-toggle-usability]",function(){var a=$(this),b=a.data("toggle-usability"),c=$(document).find(b);_.each(c,function(a){var b=$(a);b.prop("disabled")?b.prop("disabled",!1):b.prop("disabled",!0)})})}(),function(){var a=AGN.Lib.Action,b=AGN.Lib.View;a.new({change:"[data-view]"},function(){b.trigger(this.el),this.el.trigger("click.bs.dropdown.data-api")})}(),function(){function a(a,b){var d=b.data("browse-mailing-id");if(d)return d;var e=b.data("form-target"),f=e?$(e):b,g=c.get(f);return d=g.getValue("mailingID"),d||(d=g.getValue("mailingId")),d}function b(a){return function(b){var c=a.parent().width(),d=a.parent().height();b.editor.resize(c,d),b.editor.resresize_enabledze=!1,$(window).on("resize."+f(a),e(a))}}var c=AGN.Lib.Form,d=AGN.Lib.Editor;$(document).on("tile:show",function(c){var d=$(c.target),e=d.find(".js-wysiwyg"),f=e.attr("id");if(1===e.length){var h=g(e),i=1==d.data("full-tags"),j=a(d,e),k=h?0:e.height(),l=h?e.parent().width():"100%";window.createEditorExt(f,l,k,j,i,h),h&&CKEDITOR.instances[f].on("instanceReady",b(e))}}),$(document).on("tile:hide modal:close",function(a){$(a.target).find(".js-wysiwyg").each(function(){CKEDITOR.instances[$(this).attr("id")]&&CKEDITOR.instances[$(this).attr("id")].updateElement(),g($(this))&&$(window).off("resize."+f($(this))),d.get($(this)).val($(this).val()),window.removeEditor($(this).attr("id"))})}),$(document).on("form:submit",function(a){var b=$(a.target).find(".js-wysiwyg");b.length>0&&window.removeAllEditors&&window.removeAllEditors()});var e=function(a){return function(){var b=a.parent();CKEDITOR.instances[a.attr("id")].resize(b.width(),b.height())}},f=function(a){return"ck-editor-"+a.attr("id")},g=function(a){return!!a.data("full-height-editor")}}(),AGN.Lib.Validator.new("logon-new-password/form",{valid:function(){return!this.errors().length},errors:function(){var a=[],b=$("#password"),c=$("#password-repeat"),d=b.val();return $.trim(d)?d!=c.val()&&a.push({field:c,msg:t("fields.password.errors.notMatching")}):a.push({field:b,msg:t("fields.required.errors.missing")}),a}}),AGN.Lib.Validator.new("mailing-priorities/form",{valid:function(){return $("#priorityCount").val()>0||(AGN.Lib.Messages(t("defaults.error"),t("error.mailing.invalidPriorityCount"),"alert"),!1)},errors:function(){return[]}}),AGN.Lib.Validator.new("max-length-validator",{valid:function(a,b){return!this.errors(a,b).length},errors:function(a,b){var c=a.val(),d=[];return a.hasClass("js-wysiwyg")&&!c&&(c=$("#cke_"+a.attr("id")).find("iframe").contents().find("body").text()),c?c.length>b.max&&d.push({field:a,msg:t("fields.errors.contentLengthExceedsLimit",b.max)}):b.required===!0&&d.push({field:a,msg:t("fields.required.errors.missing")}),d}}),function(){AGN.Lib.Validator.new("number",{valid:function(a,b){return!this.errors(a,b).length},errors:function(a,b){var c=[],d=a.val();if(d){var e=b.float===!0?parseFloat(d):parseInt(d);isNaN(e)?c.push({field:a,msg:t("fields.errors.number_nan")}):e<b.min?c.push({field:a,msg:t("fields.errors.number_exceed_min",b.min)}):e>b.max?c.push({field:a,msg:t("fields.errors.number_exceed_max",b.max)}):b.strict===!0&&$.trim(d)!==e.toString()&&(b.float===!0?c.push({field:a,msg:t("fields.errors.number_not_double")}):c.push({field:a,msg:t("fields.errors.number_not_integer")}))}else b.required===!0&&c.push({field:a,msg:t("fields.required.errors.missing")});return c}})}(),AGN.Lib.Validator.new("upload-file/form",{valid:function(a,b){var c=!0,d=$("#dropzone");return d.exists()&&a.fileData.length<1&&(AGN.Lib.Messages(t("defaults.error"),t("error.upload.file"),"alert"),c=!1),c&&!this.errors(a,b).length},errors:function(a,b){var c=[{field:$("#name"),maxLength:99},{field:$("#firstName"),maxLength:99},{field:$("#phone"),maxLength:99},{field:$("#email"),maxLength:99,regexpRules:[{regexp:/\S+@\S+\.\S{2,}/,message:t("error.upload.email")}]}],d=[];return c.forEach(function(a){var b=a.field,c=b.val();if(!c||c.length<3)return void d.push({field:b,msg:t("fields.required.errors.missing")});if(a.maxLength&&c.length>a.maxLength)return void d.push({field:b,msg:t("fields.errors.contentLengthExceedsLimit",a.maxLength)});if(a.regexpRules&&a.regexpRules.length>0)for(var e=0;e<a.regexpRules.length;++e){var f=a.regexpRules[e];if(!c.match(f.regexp))return void d.push({field:b,msg:f.message})}}),d}}),AGN.Lib.Controller.new("admin-enabling",function(){function a(a){return a?$("input:checkbox:checked[data-enabling="+a+"]"):$("input:checkbox:checked[data-enabling]")}function b(a){return a?$("input:checkbox:not(:checked)[data-enabling="+a+"]"):$("input:checkbox:not(:checked)[data-enabling]")}function c(){$("input[name*='enabledMailinglist']").remove(),b("mailinglist").each(function(){var a=$(this).data("mailinglist");$("<input>").attr({type:"hidden",name:"enabledMailinglist["+a+"]",value:"off"}).appendTo("#EnablingForm")})}this.addAction({click:"save-enabling"},function(){c(),$("#EnablingForm").submit()}),this.addAction({click:"toggle-checkboxes-on"},function(){b(this.el.data("enabling-scope")).each(function(){$(this).prop("checked",!0)})}),this.addAction({click:"toggle-checkboxes-off"},function(){a(this.el.data("enabling-scope")).each(function(){$(this).prop("checked",!1)})})}),AGN.Lib.Controller.new("allowed-profile-field-values",function(){var a=this;this.addInitializer("allowed-values",function(b){b||(b=$(document));var c=b.find('[data-controller="allowed-profile-field-values"]');0!=c.length&&(a.container=c.find("table .js-allowed-value").first().parent())}),this.addAction({click:"addNewValue"},function(){var b=a.getRow(this.el),c=a.getField(b).val();b.remove(),a.appendRow(!1,c),a.appendRow(!0)}),this.addAction({click:"deleteValue"},function(){a.getRow(this.el).remove()}),this.appendRow=function(a,b){var c=$(_.template(AGN.Opt.Templates["allowed-value-new-row"],{isLastRow:a}));b&&this.getField(c).val(b),this.container.append(c)},this.getRow=function(a){return a.closest("tr.js-allowed-value")},this.getField=function(a){return a.find('input[name="allowedValues"]')}}),AGN.Lib.Controller.new("auto-import-export",function(){function a(){this.exportType="",this.mailingType=-1,this.oneTimeOption="",this.oneTimeOptionValues={checked:!1,disabled:!1}}function b(){}var c,d,e,f=$('<div class="input-group-addon"><a href="#" class="btn btn-regular btn-alert" data-action="remove-schedule"><i class="icon icon-trash-o"></i></a></div>'),g=$('<a href="#" class="btn btn-regular" data-action="remove-day"><i class="icon icon-trash-o"></i><span class="text">'+t("defaults.delete")+"</span></a>"),h=$('<div class="form-control-feedback-message js-form-error-msg">'+t("error.delay.60")+"</div>"),i={},j=!1,k=new b,l=new a,m=function(){var a=$("#tile-importexport-schedule-time").find("select[name=dayOfTheWeek]"),b=[];return a.each(function(){var a={},c=$(this).parents("tr"),d=c.find(".hour-checkbox");a.weekDay=c.find("select[name=dayOfTheWeek]").val(),a.scheduledTime=[],c.find(".schedule-time-wrapper").each(function(){var b=$(this).find(".time-checkbox"),c={active:b.is(":checked")&&!b.is(":disabled"),time:$(this).find(".time-input").val()};a.scheduledTime.push(c)}),a.scheduledInterval={active:d.is(":checked")&&!d.is(":disabled"),interval:c.find("select.hour-select").val()},b.push(a)}),b},n=function(a){var b,c=$("#tile-importexport-schedule-time"),e=c.find("tbody");a.forEach(function(a,c){0===c?(b=e.find("tr"),p(b,a)):(b=d.clone(),p(b,a),e.append(b)),v(b)}),AGN.runAll(e)},o=function(){var a=m();$("input[name=intervalAsJson]").val(JSON.stringify(a))},p=function(a,b){var c=a.find(".schedule-settings-wrapper");a.find("select[name=dayOfTheWeek]").val(b.weekDay),a.find(".hour-checkbox").prop("checked",b.scheduledInterval.active),a.find("select.hour-select").val(b.scheduledInterval.interval),b.scheduledTime.forEach(function(a,d){if(0===d){var e=c.find(".schedule-time-wrapper");b.scheduledTime.length>1&&e.find(".input-group").append(f.clone()),q(e,a),c.append(e)}else{var g=x();q(g,a),c.append(g)}})},q=function(a,b){a.find(".time-checkbox").prop("checked",b.active),a.find(".time-input").val(b.time)},r=function(){var a=this.el,b=a.attr("disables"),c=a.is(":checked"),d=a.parents(".schedule-settings-wrapper");d.find(b).prop("disabled",c)},s=function(){for(var a,b=this.el,d=b.attr("disables"),e=b.is(":checked"),f=b.parents(".schedule-settings-wrapper"),g=b.parents("tr").find(".time-checkbox"),h=f.find(".hour-checkbox"),i=0;i<g.length;i++){var j=g[i],k=$(j);if(b[0]!==j&&k.is(":checked")){a=!0;break}}h.is(":disabled")&&a||!c.extended||f.find(d).prop("disabled",e)},u=function(a){1!==a.find('[data-action="remove-day"]').length&&a.find('[data-action="add-another-day"]').parent().append(g.clone())},v=function(a){var b={"hour-checkbox-toggle":r,"time-checkbox-toggle":s};for(var c in b)a.find("input[data-action="+c+"]").each(function(){b[c].call({el:$(this)})})},w=function(a){a.find("select2-container").remove(),a.find("select").removeAttr("style"),a.find("select").removeAttr("tabindex"),a.find("select").removeAttr("title")},x=function(){var a=$(".schedule-time-wrapper.prime").clone();return w(a),a.removeClass("prime"),a};this.addInitializer("optionsChangeable",function(){$("#recipient-autoimport-csvdescription").length&&$('[data-action="options-availability"][value="ReferenceTable"]').prop("disabled",!1)}),this.addAction({click:"add-schedule"},function(){var a=this.el.parents(".schedule-time-wrapper"),b=e.clone(),c=a.parents("tr").find(".hour-checkbox");b.find("#hours").parent().append("<span>"+t("time.interval")+" "+t("time.60")+"</span>"),b.find(".input-group").append(f.clone()),0===a.find(".btn-alert").length&&a.find(".input-group").append(f.clone()),a.parent().append(b),r.call({el:c}),AGN.runAll(b)}),this.addAction({click:"time-checkbox-toggle"},s),this.addAction({click:"hour-checkbox-toggle"},r),this.addAction({click:"add-another-day"},function(){var a,b=this.el.parents("tbody").find("tr").first(),c=this.el.parents("tbody");1===c.find("tr").length&&(u(d),u(c)),a=d.clone(),b.parent().append(a),AGN.runAll(a),o()}),this.addAction({click:"remove-schedule"},function(){var a=this.el.parents(".schedule-time-wrapper"),b=a.parents("tr"),c=this.el.parents(".schedule-settings-wrapper");a.remove(),v(b),1===c.find(".schedule-time-wrapper").length&&c.find(".btn-alert").parent().remove(),o()}),this.addAction({change:"auto-import-export-validation"},function(){var a=m(),b=this.el,c=$(this.el).parents("tr"),d=this.el.find(".time-input"),e=c.find("select[name=dayOfTheWeek]").val();k.valid(a,e)?(b.removeClass("has-alert has-feedback js-form-error"),b.find(".js-form-error-msg").remove()):(b.addClass("has-alert has-feedback js-form-error"),d.after(h.clone())),$("input[name=intervalAsJson]").val(JSON.stringify(a))}),this.addAction({click:"remove-day"},function(){this.el.parents("tr").remove(),1===$("tbody").find("tr").length&&$("tbody").find('[data-action="remove-day"]').remove(),o()}),this.addAction({click:"check-ftp-server"},function(){return document.getElementById("action_method").value="checkConnectionStatus",document.getElementById("recipient-autoimport-form").submit(),!1}),this.addDomInitializer("auto-import-export-init",function(a){c=a.json();var b=JSON.parse($("input[name=intervalAsJson]").val()),f=$("tr.l-time-schedule-row");b.length>1&&f.find('[data-action="add-another-day"]').parent().append(g.clone()),d=f.clone(),d.removeClass("l-time-schedule-row"),w(d),e=$(".schedule-time-wrapper").clone(),n(b||[])}),this.addDomInitializer("mailing-options-attribute-resolver",function(a){l.config(a,this.config)}),this.addAction({change:"change-mailing-type"},function(){l.setProperlyFieldState($(this.el).val())}),this.addAction({change:"export-type-resolver"},function(){l.setExportType($(this.el).find("[type=radio]:checked").val()),l.setProperlyFieldState($("#exportMailing select").val())}),a.prototype.config=function(a,b){if(a&&b){this.element=a,this.exportType=b.exportType||"",this.mailingType=b.mailingType>=0?b.mailingType:-1,this.oneTimeOption=b.oneTimeOption||"";var c=$('input[name="'+this.oneTimeOption+'"]');this.oneTimeOptionValues={checked:c.is(":checked"),disabled:c.is(":disabled")},this.setOneTimeValue()}},a.prototype.setExportType=function(a){this.exportType=a||""},a.prototype.setMailingType=function(a){this.mailingType=a||-1},a.prototype.isAfterMailingDeliveryType=function(){return"Mailing"==this.exportType&&0==this.mailingType},a.prototype.setOneTimeValue=function(){var a=this.isAfterMailingDeliveryType()||this.oneTimeOptionValues.checked,b=this.isAfterMailingDeliveryType()||this.oneTimeOptionValues.disabled,c=$('input[name="'+this.oneTimeOption+'"]');c.prop("checked",a?"checked":""),c.prop("disabled",b?"checked":"")},a.prototype.setProperlyFieldState=function(a){this.setMailingType(a),this.setOneTimeValue()},b.prototype.prepareTimeBy=function(a){var b=[];return a.forEach(function(a){a.active&&b.push(parseInt(a.time.replace(":","")))}),b},b.prototype.valid=function(a,b){var c=[];return a.forEach(function(a){0===a.weekDay&&(c=a.scheduledTime),a.weekDay===b&&a.scheduledTime.forEach(function(a){c.push(a)})}),c=this.prepareTimeBy(c),c.every(this.hasCorrectInterval)},b.prototype.hasCorrectInterval=function(a,b,c){var d=!0;return c.splice(b,1),c.forEach(function(b){Math.abs(b-a)<100&&(d=!1)}),d},this.addDomInitializer("import-profile-mailing-lists",function(){var a=this.config;j=a.isAutoImportNew,i=a.profileMailinglists;var b=$('[name="'+a.profileIdPropertyName+'"]').val();y(b,j)}),this.addAction({change:"change-import-profile"},function(){var a=$(this.el).val();y(a,j)});var y=function(a,b){if(b){var c=i[a];$('input[type=checkbox][name^="mailinglist"]').prop("checked",!1),_.each(c,function(a){$('input[type=checkbox][name="mailinglist['+a+']"]').prop("checked",!0)})}}}),AGN.Lib.Controller.new("available-building-blocks",function(){function a(){d={},e={}}function b(){var a=$(f.form).find(".table-controls .well");a.first().html(a.last().html())}function c(){f&&f.setValue("changedBlockStatusJson",JSON.stringify(d,function(a,b){if(null!=b)return b}))}var d,e,f;this.addDomInitializer("available-building-blocks",function(){a();var b=this.el;f=AGN.Lib.Form.get(b),this.config.changedBlockStatus&&(d=JSON.parse(this.config.changedBlockStatus))}),this.addDomInitializer("available-building-blocks-table",function(){var a=this.config.divContainerList;_.each(a,function(a){var b=a.id,c=a.active;b in e?b in d&&$("input:checkbox[data-block-id="+b+"]").prop("checked",!!d[b]):e[b]=c}),b()}),this.addAction({click:"update-changed-data"},function(){var a=this.el;b(),c(),f.setActionOnce(a.data("form-url")),f.setResourceSelectorOnce(a.data("form-resource")),f.submit()}),this.addAction({change:"change-activation"},function(){var a=this.el,b=a.data("block-id"),c=a.is(":checked");c==e[b]?b in d&&delete d[b]:d[b]=c}),this.addAction({change:"activate-all"},function(){var a=this.el,b=$("input:checkbox[data-block-id]");b.prop("checked",a.is(":checked")),b.change()}),this.updateTableControls=b,this.updateFormData=c}),AGN.Lib.Controller.new("birt-reports",function(){function a(){_.each($(e.reportSettingsId).find("[data-toggle-tab]"),function(a){var b=$(a),c=b.data("toggle-tab");return c.endsWith(d)?void b.click():(b.parent("li").addClass("disabled"),void AGN.Lib.Tab.hide($(c)))})}function b(){_.each($(e.reportSettingsId).find("[data-toggle-tab]"),function(a){$(a).parent("li").removeClass("disabled")})}var c,d,e={},f=0,g=[],h=[];this.addDomInitializer("birt-reports",function(){e=this.config,d=e.constant.MAILING_ID,c=e.constant.AFTER_MAILING_TYPE_ID,g=e.filtered.FILTER_ARCHIVE,h=e.filtered.FILTER_MAILINGLIST,f=e.reportType}),AGN.Lib.Action.new({change:"input[type=radio][name=type]"},function(){var d=$(this.el).val(),e=d==c;return e?a():f==c&&b(),f=d,!1}),this.addDomInitializer("report-settings",function(){var a=this.el,b=this.config;new i(a,b)});var i=function(a,b){var c=this;this.container=a,this.config=b,this.settingsType=b.settingsType,this.select=AGN.Lib.Select.get(a.find(b.selectors.filterBlockId)),this.mailingSelect=AGN.Lib.Select.get(a.find(b.selectors.normalMailing)),c.init(b),a.find(b.selectors.mailingType).on("change click",function(a){c.handleMailingTypeChanges($(a.target))}),a.find(b.selectors.mailingFilter).on("change",function(a){c.handleMailingFilterChanges($(a.target))}),a.find(b.selectors.filterBlockId).on("change",function(a){c.handleMailingFilterValueChanges($(a.target))})};i.prototype.init=function(a){var b=a.data.mailingType,c=a.data.mailingFilter,d=a.data.predefineMailing,e=a.data.selectedMailings;this.updateAllComparisonDependentFields(b,c,d,e)},i.prototype.handleMailingTypeChanges=function(a){var b=this,c=b.getMailingFilterValue(),d=b.getMailingFilterValue();b.updateNormalMailingField(a.val(),c,d)},i.prototype.handleMailingFilterChanges=function(a){var b=this,c=b.getMailingType();b.updateAllComparisonDependentFields(c,a.val())},i.prototype.handleMailingFilterValueChanges=function(a){var b=this,c=b.getMailingFilter(),d=b.getMailingType();b.updateNormalMailingField(d,c,a.val())},i.prototype.updateAllComparisonDependentFields=function(a,b,c,d){var e=this;if(e.select.resetOptions(),b>0){var f=[];1==b?f=g:2==b&&(f=h),_.each(f,function(a){e.select.addFormattedOption('<option value="'+a.id+'">'+a.shortname+"</option>")}),e.select.selectValueOrSelectFirst(c),c=e.select.getSelectedValue()}e.updateNormalMailingField(a,b,c,d)},i.prototype.updateNormalMailingField=function(a,b,c,d){var f=this;f.mailingSelect.resetOptions(),(f.settingsType==e.constant.COMPARISON_SETTINGS&&2==a||f.settingsType==e.constant.MAILING_SETTINGS&&3==a)&&$.ajax({type:"POST",url:e.urls.FILTERED_MAILING_URL,data:{type:b,value:c?c:0,mailingType:e.constant.NORMAL_MAILING_TYPE}}).done(function(a){_.each(a,function(a){f.mailingSelect.addFormattedOption('<option value="'+a.id+'">'+a.shortname+"</option>")}),f.mailingSelect.selectValue(d?d:"")})},i.prototype.getMailingFilter=function(){var a=this.container.find(this.config.selectors.mailingFilter);return 0|parseInt(a.val())},i.prototype.getMailingFilterValue=function(){var a=this.select.getSelectedValue();return 0|parseInt(a)},i.prototype.getMailingType=function(){var a=this.container.find(this.config.selectors.mailingType+":checked");return 0|parseInt(a.val())}}),AGN.Lib.Controller.new("blacklist-list",function(){var a,b=AGN.Lib.Confirm;this.addDomInitializer("blacklist-list-init",function(){a=this.el}),this.addAction({click:"saveBlacklist"},function(){var b=this.el,c=AGN.Lib.Form.get(b),d=b.data("url"),e={email:a.find("#new-blacklist").val()};$.ajax(d,{type:"POST",data:e,success:function(a){AGN.Lib.Page.render(a),c.submit()}})}),this.addAction({click:"blacklist-delete"},function(){b.get(this.el).promise().done(function(a){AGN.Lib.Page.render(a),$("#blacklistListView").submit()})})}),AGN.Lib.Controller.new("company-tech-emails",function(){var a=this.el,b="",c="",d=function(){var a=[""],b=$('input[name="'+c+'"]').val();return b&&(a=b.split(", ")),a},e=function(){var c=[];return _.each(a.find(b+" input"),function(a){var b=a.value;""!==b.trim()&&c.push(b)}),c},f=function(){var c=a.find(b);1===c.length&&c.find(".btn-alert")&&c.find(".btn-alert").remove()},g=function(){_.each(a.find(b),function(a){var b=$(a);0===b.find(".btn-alert").length&&b.find(".input-group-btn").append(AGN.Lib.Template.text("remove-button",{}))})},h=function(a,c,d){var e=AGN.Lib.Template.text("email-input",{
email:c});d?a.closest(b).after(e):a.append(e),g()},i=function(){$('input[name="'+c+'"]').val(e().join(", "))};this.addDomInitializer("company-emails-list",function(){a=this.el,c=a.data("target-field")||"",b=a.data("row-selector")||"",_.each(d(),function(b){h(a,b,!1)}),f()}),this.addAction({click:"deleteContactEmail"},function(){this.el.closest(b).remove(),f(),i()}),this.addAction({click:"createContactEmail"},function(){h(this.el,"",!0),i()}),this.addAction({change:"inputValue"},function(){i()})}),AGN.Lib.Controller.new("custom-thumbnail-view",function(){function a(a,b,c){var d;d=a.data("preview-name"),d&&$(d).text(b),d=a.data("preview-image"),d&&(c?$(d).prop("src",c):$(d).each(function(){var a=$(this);a.prop("src",a.data("no-preview-src")||"")}))}this.addAction({change:"use-custom-thumbnail"},function(){var a=$("#customThumbnailFile");a.prop("name",this.el.is(":checked")?"customThumbnailFile":"")}),this.addAction({change:"custom-thumbnail-image"},function(){var b=this.el,c=b.prop("files");if(c&&c.length){var d=c[0];if("image"==d.type||d.type.match("image/.*")){var e=new FileReader;e.onload=function(c){a(b,d.name,c.target.result)},e.readAsDataURL(d)}else AGN.Lib.Helpers.clearFormField(b),a(b,"","")}else a(b,"","")})}),AGN.Lib.Controller.new("dashboard",function(){function a(a){jQuery.ajax({type:"POST",url:i.urls.STATISTICS,data:{mailingId:a},success:function(a){var c,d,e;a=_.merge({common:[["no Data","0"]],clickers:[["no Data","0"]],clickersPercent:[0],openers:[["no Data","0"]],openersPercent:[0]},a),c=[],d=[];for(var f=0;f<a.common.length;f++){var g=parseInt(a.common[f][1]);c.push(a.common[f][0]),d.push(g)}c3.generate(AGN.Lib.DashboardStatisticsService.data.statChartData.build(c,d)),c=[],d=[],e=0;for(var f=0;f<a.clickers.length;f++){var g=b(100*a.clickers[f][1],1);c.push(a.clickers[f][0]),d.push(g),e+=g}if(!isNaN(e)&&e>0)for(var f=0;f<d.length;f++)c[f]+=" "+b(100*d[f]/e,1)+"%";var h=b(100*a.clickersPercent[0],1)+"%*";c3.generate(AGN.Lib.DashboardStatisticsService.data.clickChartData.build(h,c,d)),c=[],d=[],e=0;for(var f=0;f<a.openers.length;f++){var g=b(100*a.openers[f][1],1);c.push(a.openers[f][0]),d.push(g),e+=g}if(!isNaN(e)&&e>0)for(var f=0;f<d.length;f++)c[f]+=" "+b(100*d[f]/e,1)+"%";var i=b(100*a.openersPercent[0],1)+"%*";c3.generate(AGN.Lib.DashboardStatisticsService.data.viewChartData.build(i,c,d)),AGN.Initializers.Equalizer()}})}function b(a,b){return 1*parseFloat(a).toFixed(b)}function c(){var a="MESSAGE",b=0,c=g("MESSAGE");if(c<1){var i=!1;for(var j in h)if(h.hasOwnProperty(j)){var k=f(j);k>b&&(b=k,a=j,i=!0)}if(!i)for(j in h)h.hasOwnProperty(j)&&(k=g(j),k>b&&(b=k,a=j))}AGN.Lib.Modal.createFromTemplate({openedNewsType:a},"modal-news"),$("#buttonNewsCounter").text(""),$(".l-news-menu-item").each(function(a){var b=f($(this).data("news-type"));b>0?$(this).find(".l-news-menu-counter").text(b):$(this).find(".l-news-menu-counter").html("&nbsp;"),$(this).hasClass("active")&&d($(this).data("news-type"))}),e()}function d(a){f(a)>0&&($("#newsCounter"+a).html("&nbsp;"),$.ajax({url:AGN.Lib.Helpers.objFromString($('[data-initializer="dashboard-news-counters"]').data("config")).newsDateUrl,data:{type:a}}),h[a].unreadCount=0,e())}function e(){var a=f("NEWS"),b=$("#buttonNewsCounter");return a>0?(b.parent().removeClass("hidden"),b.parent().parent().css("padding-top","4px"),b.parent().parent().css("padding-bottom","4px"),b.text(a)):(b.parent().addClass("hidden"),b.parent().parent().css("padding-top","5px"),b.parent().parent().css("padding-bottom","5px"),b.text("")),a}function f(a){return void 0!=h&&void 0!=h[a]&&Number.isInteger(h[a].unreadCount)?h[a].unreadCount:0}function g(a){return void 0!=h&&void 0!=h[a]&&Number.isInteger(h[a].availableCount)?h[a].availableCount:0}var h,i,j=this;this.addAction({click:"open-mailing-statistics"},function(){i.mailingId>0&&AGN.Lib.Page.reload(i.mailingStatisticsLinkPattern.replace("{mailing-id}",i.mailingId))}),this.addAction({change:"update-template-links"},function(){j.runInitializer("UpdateDashboardTemplateLinks")}),this.addDomInitializer("dashboard-statistics",function(){i=this.config,i.mailingId>0&&a(i.mailingId)}),this.addAction({change:"statistics-select-mailing"},function(){return i.mailingId=this.el.val(),a(i.mailingId),!1}),this.addDomInitializer("dashboard-news-counters",function(a){var b=AGN.Lib.Helpers.objFromString(a.data("config"));$.ajax({url:b.newsCountersUrl}).done(function(a){void 0!=a.counters&&(h=a.counters,e(),f("MESSAGE")&&!$(".modal-news").exists()&&c())})}),this.addAction({click:"showNewsPopup"},function(){c()}),this.addAction({click:"chooseNewsType"},function(){var a=this.el.parent().data("news-type");d(a)}),Number.isInteger=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},this.addInitializer("UpdateDashboardTemplateLinks",function(a){a||(a=$(document));var b=a.find(".js-template-link"),c=$('[data-action="update-template-links"]').val();_.each(b,function(a){var b=$(a),d=b.attr("href");d=d.replace(/templateID=\d+/,"templateID="+c),b.attr("href",d)})}),this.addInitializer("EndlessScroll",function(a){a||(a=$(document));var b=a.find(".js-endless-scroll");b.length<1||b.each(function(a){var b=1,c=$(this);c.endlessScroll({pagesToKeep:null,fireOnce:!0,fireDelay:1e3,loader:"",insertAfter:".js-endless-scroll .js-endless-scroll-content",ceaseFire:function(){return 0!==c.find(".message-list-item-last").length},callback:function(){var a;return AGN.Lib.Loader.prevent(),a=$.ajax({method:"GET",url:c.data("url"),data:{page:b+1}}),c.find(".js-endless-scroll-content").append('<div class="message-list-loader"><i class="icon icon-refresh icon-spin"></i></div>'),a.done(function(a){b+=1,c.find(".js-endless-scroll-content").append(a),c.find(".message-list-loader").remove(),AGN.Initializers.IconsDefs(c)}),a}})})})}),AGN.Lib.Controller.new("emm-activeness",function(){function a(a,b,d){a[b]=d,c(a)}function b(a,b){delete a[b],c(a)}function c(a){var b=$('[data-action="save"]'),c=0;for(var d in a)if(a.hasOwnProperty(d)){c++;break}c>0?b.removeClass("disabled"):b.addClass("disabled")}this.addAction({click:"save"},function(){var a=$(this.el),b=AGN.Lib.Form.get(a),c=a.closest("[data-controller]"),d=c.data("_states")||{};for(var e in d)d.hasOwnProperty(e)&&b.setValueOnce("activeness["+e+"]",d[e]);b.submit()}),this.addAction({change:"toggle-active"},function(){var c=$(this.el),d=c.closest("[data-controller]"),e=d.data("_states")||{},f=c.data("item-id"),g=c.is(":checked");g==c.data("initial-state")?b(e,f):a(e,f,g),d.data("_states",e)}),this.addAction({click:"back"},function(){history.back()})}),AGN.Lib.Controller.new("enlarged-content-editor-controller",function(){var a,b=AGN.Lib.Modal,c=AGN.Lib.Confirm;this.addDomInitializer("enlarged-content-editor-initializer",function(c){var d=b.get(c);a=d.content,g(d.editorType)}),this.addAction({click:"updateContent"},function(){var a=$(this.el),b=c.get(a);b.positive(d()),$("#enlarged_content_modal").modal("toggle")});var d=function(){return{content:e(),editorType:f()}},e=function(){var a=$("#tab-enlargedContent-wysiwyg"),b=$("#enlargedContentEditor");if(a.is(":visible")){var c=CKEDITOR.instances.enlargedContent;return c.getData()}if(b.is(":visible")){var d=ace.edit("enlargedContentEditor");return d.getValue()}},f=function(){var a=$("#tab-enlargedContent-wysiwyg");if(a.is(":visible"))return"wysiwyg";var b=$("#enlargedContentEditor");return b.is(":visible")?"html":""},g=function(a){if(a&&""!==a){var b=$('[data-toggle-tab$="'+a+'"]');b&&b.click()}}}),AGN.Lib.Controller.new("grid-building-block-defaults",function(){function a(a){var b=a.closest("[data-placeholder-id]");return b.exists()?parseInt(b.data("placeholder-id")):0}function b(a){var b=$("#file-"+a);return!!b.exists()&&!!b.val()}function c(a,b){var c=a.prop("files"),d=$("#content-"+b),e=$("#image-category-"+b).closest(".form-group");if(c&&c.length){var g=c[0];if("image"===g.type||g.type.match("image/.*")){var h=new FileReader;h.onload=function(a){e.removeClass("hidden"),f(b,a.target.result,g.name,g.name)},h.readAsDataURL(g)}else e.addClass("hidden"),l.clearFormField(a),f(b)}else e.addClass("hidden"),f(b);d.val("")}function d(a){i.request(h.urls.MEDIAPOOL_IMAGE_PICK).done(function(b){$("#content-"+a).val(b.id),l.clearFormField($("#file-"+a)),f(a,b.src,b.name,b.title)})}function e(a){var b=$("#file-"+a),c=$("#file-name-"+a),d=$("#content-"+a),e=$("#preview-"+a);l.clearFormField(b),c.text(""),d.val(""),e.attr("src",h.noPreviewImageLink)}function f(a,b,c,d){var e=$("#preview-"+a),f=$("#file-name-"+a);e.attr("src")!==b&&e.attr("src",b||h.noPreviewImageLink),e.attr("title",d||""),f.text(c||"")}function g(){var b=$.Deferred(),c=[],d=$("#defaultsForm"),e=j.get(d),f=!0;if(d.find("input[type=file]").each(function(){var b=$(this),d=a(b),g=$("#image-category-"+d),h=b.prop("files");if(h&&h.length){var i=g.val();i>0?(c.push({placeholderId:d,image:h[0],categoryId:i}),e.cleanFieldError$(g)):(f=!1,e.showFieldError$(g,t("error.grid.noCategorySelected")))}else e.cleanFieldError$(g)}),f)if(c.length){var g=new FormData;c.forEach(function(a,b){g.append("images["+b+"].file",a.image),g.append("images["+b+"].title",a.image.name),g.append("images["+b+"].categoryId",a.categoryId)}),$.ajax(h.urls.MEDIAPOOL_IMAGE,{type:"POST",dataType:"json",accepts:["application/json"],enctype:"multipart/form-data",processData:!1,contentType:!1,data:g}).done(function(a){a.success===!0?(a.data.forEach(function(a,b){var d=c[b].placeholderId;$("#content-"+d).val(a),l.clearFormField($("#file-"+d))}),b.resolve()):(AGN.Lib.JsonMessages(a.popups),b.reject())}).fail(function(){b.reject()})}else b.resolve();else b.reject();return b.promise()}var h,i=AGN.Lib.Confirm,j=AGN.Lib.Form,k=AGN.Lib.Page,l=AGN.Lib.Helpers;this.addDomInitializer("grid-building-block-defaults",function(){h=this.config});var m=_.throttle(function(a,b){var c=$("#preview-"+a);c.attr("src")!==b&&c.attr("src",b||h.noPreviewImageLink)},300);this.addAction({click:"delete"},function(){var a=$.post(h.urls.CONFIRM_DELETE);return i.request(a).done(function(a){a.success===!0?k.reload(h.urls.BACK,!0).done(function(){AGN.Lib.JsonMessages(a.popups)}):AGN.Lib.JsonMessages(a.popups)})}),this.addAction({click:"chooseImage"},function(){var c=a(this.el);c>0&&(b(c)?$("#file-"+c).trigger("click"):d(c))}),this.addAction({click:"showMediapoolDialog"},function(){var b=a(this.el);b>0&&d(b)}),this.addAction({change:"chooseImageFile"},function(){var b=a(this.el);b>0&&c(this.el,b)}),this.addAction({click:"deleteImage"},function(){var b=a(this.el);b>0&&e(b)}),this.addAction({change:"previewImageLink",keyup:"previewImageLink",mouseup:"previewImageLink"},function(){var b=a(this.el);b>0&&m(b,$.trim(this.el.val()))}),this.addAction({click:"chooseImageLink"},function(){var b=a(this.el);b>0&&$("#content-"+b).focus()}),this.addAction({click:"save"},function(){g().done(function(){$("#defaultsForm").submit()})})}),AGN.Lib.Controller.new("grid-building-block",function(){var a,b=AGN.Lib.Confirm,c=AGN.Lib.Page;this.addDomInitializer("grid-building-block",function(){a=this.config}),this.addAction({click:"delete"},function(){var d=$.post(a.urls.CONFIRM_DELETE);return b.request(d).done(function(b){b.success===!0?c.reload(a.urls.BACK,!0).done(function(){AGN.Lib.JsonMessages(b.popups)}):AGN.Lib.JsonMessages(b.popups)})})}),AGN.Lib.Controller.new("grid-building-blocks-new",function(){function a(){this.map={}}function b(a,b){var d={};b=arguments.length<2||!!b;for(var e=0;e<a.length;e++)d[a[e]]=b;return c(d).done(function(c){if(c.success===!0){for(var d=i.getActivenessTogglesMap(),e=0;e<a.length;e++){var g=a[e];d[g].prop("checked",b),f.activenessInitialStateMap[g]=b}f.activenessChangeMap.excludeAll(a),i.resetBulkIds(),i.setSaveButtonEnabled(f.activenessChangeMap.size()>0)}})}function c(a){return $.post(f.urls.SET_ACTIVENESS,{activeness:a}).done(function(a){AGN.Lib.JsonMessages(a.popups)})}function d(a){var b=$.post(f.urls.CONFIRM_DELETE.replace("{containerId}",a));return g.request(b).done(function(a){AGN.Lib.JsonMessages(a.popups)})}function e(a){var b=$.ajax(f.urls.CONFIRM_BULK_DELETE,{method:"POST",traditional:!0,data:{bulkIds:a}});return g.request(b).done(function(a){AGN.Lib.JsonMessages(a.popups)})}var f,g=AGN.Lib.Confirm,h=AGN.Lib.Form,i={setSaveButtonEnabled:function(a){var b=$("#save-button");a?b.removeClass("disabled"):b.addClass("disabled")},getActivenessToggles:function(){return $("#containers").find("input.js-activeness-toggle")},getActivenessTogglesMap:function(){var a={};return i.getActivenessToggles().each(function(){var b=$(this);a[b.data("container-id")]=b}),a},getActivenessTogglesStateMap:function(){var a={};return i.getActivenessToggles().each(function(){var b=$(this);a[b.data("container-id")]=b.prop("checked")}),a},getBulkIds:function(){var a=[];return $("#containers").find(".js-bulk-ids:checked").each(function(){var b=parseInt($(this).val());b>0&&a.push(b)}),a.length?a:null},resetBulkIds:function(){$("#containers").find(".js-bulk-ids").prop("checked",!1)}};a.prototype.include=function(a,b){this.map[a]=b},a.prototype.exclude=function(a){delete this.map[a]},a.prototype.excludeAll=function(a){for(var b=0;b<a.length;b++)delete this.map[a[b]]},a.prototype.clear=function(){this.map={}},a.prototype.size=function(){return Object.keys(this.map).length},a.prototype.get=function(){return _.clone(this.map)},this.addDomInitializer("grid-building-blocks-new",function(){if(f=this.config,location.hash){var b=parseInt(location.hash.substr(1));if(b>0){var c=$("#containers"),d=c.find('[data-container-id="'+b+'"]').closest("tr");if(d.exists()){var e=d.position().top;c.scrollTop(e-10)}}}f.activenessChangeMap=new a,f.activenessInitialStateMap=i.getActivenessTogglesStateMap()}),this.addAction({click:"save"},function(){var a=h.get(this.el);c(f.activenessChangeMap.get()).done(function(b){b.success===!0&&(f.activenessChangeMap.clear(),f.activenessInitialStateMap=i.getActivenessTogglesStateMap(),i.setSaveButtonEnabled(!1),a.submit())})}),this.addAction({change:"toggle-activated"},function(){var a=$(this.el),b=a.data("container-id"),c=a.is(":checked");f.activenessInitialStateMap[b]==c?f.activenessChangeMap.exclude(b):f.activenessChangeMap.include(b,c),i.setSaveButtonEnabled(f.activenessChangeMap.size()>0)}),this.addAction({click:"delete-building-block"},function(){var a=this.el.data("container-id"),b=h.get(this.el);a>0&&d(a).done(function(a){a.success===!0&&b.submit()})}),this.addAction({click:"bulk-delete"},function(){var a=i.getBulkIds(),b=h.get(this.el);a?e(a).done(function(a){a.success===!0&&b.submit()}):AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}),this.addAction({click:"bulk-activate"},function(){var a=i.getBulkIds(),c=h.get(this.el);a?b(a,!0).done(function(a){a.success===!0&&c.submit()}):AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}),this.addAction({click:"bulk-deactivate"},function(){var a=i.getBulkIds(),c=h.get(this.el);a?b(a,!1).done(function(a){a.success===!0&&c.submit()}):AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}),this.addAction({click:"back"},function(){history.back()})}),AGN.Lib.Controller.new("grid-edit-new",function(){var a=this,b=AGN.Lib.Form;this.addDomInitializer("grid-edit-new",function(){a.isGridInUse=this.config.isGridInUse,a.gridView=new AGN.Lib.GridView($("[data-grid-view]")),a.gridColumnView=new AGN.Lib.GridColumnView($("[data-column-view]")),a.updateViews()}),this.addAction({submission:"createTemplate"},function(){$("#templateCreationForm").submit()}),this.addAction({submission:"saveGrid"},function(){var a=$("#gridForm");b.get(a).submit()}),this.addAction({change:"updateColnum"},function(){a.validateRequiredNumber(this.el,1,12),$('[name="columnWidth"]').val(a.calculateColumnWidth()),a.updateViews()}),this.addAction({change:"updateTemplateWidth"},function(){a.validateRequiredNumber(this.el,50,2e3),$('[name="columnWidth"]').val(a.calculateColumnWidth()),a.updateViews()}),this.addAction({change:"updateColumnWidth"},function(){a.validateRequiredNumber(this.el,10,2e3),$('[name="templateWidth"]').val(a.calculateTemplateWidth()),a.updateViews()}),this.addAction({change:"updateGutterWidth"},function(){a.validateRequiredNumber(this.el,0,500),$('[name="columnWidth"]').val(a.calculateColumnWidth()),a.updateViews()}),this.addAction({click:"enableEditing"},function(){$(this.el).hide(),$('[name="gridName"]').prop("disabled",!1),a.isGridInUse||$.each(["columnNum","columnWidth","gutter","templateWidth"],function(a,b){var c=$('[name="'+b+'"]');c.prop("disabled",!1),c.attr("type","number")}),$("#createTemplateButton").addClass("hidden"),$("#saveAndCreateTemplateButton").removeClass("hidden"),$("#gridForm").attr("data-action","saveGrid")}),this.addAction({click:"back"},function(){window.history.back()}),this.validateRequiredNumber=function(a,b,c){var d=parseInt(a.val());(d!=a.val()||d<b)&&a.val(b),d>c&&a.val(c)},this.updateViews=function(){var b={columnNum:this.columnNum(),columnWidth:this.columnWidth(),gutter:this.gutterWidth(),templateWidth:this.templateWidth()};a.gridView.update(b),a.gridColumnView.update(b)},this.calculateColumnWidth=function(){return Math.floor(this.templateWidth()/this.columnNum()-this.gutterWidth())},this.calculateTemplateWidth=function(){return Math.ceil((this.columnWidth()+this.gutterWidth())*this.columnNum())},this.columnNum=function(){return parseInt($('[name="columnNum"]').val())},this.columnWidth=function(){return parseInt($('[name="columnWidth"]').val())},this.gutterWidth=function(){return parseInt($('[name="gutter"]').val())},this.templateWidth=function(){return parseInt($('[name="templateWidth"]').val())}}),AGN.Lib.Controller.new("grid-layout-view",function(){function a(){var a=this;this.templateId=0,this.targetId=A,this.targets=new b,this.categories=new c,this.children=new d([]),this.imageUriPattern="{image-id}",this.watcher=new l,this.adjust=_.throttle(this.adjust,200),this.watcher.promise().progress(function(){a.adjust(!1)})}function b(a){var b={};a?(this.data=a.slice(),this.data.forEach(function(a){b[a.id]=a.name})):this.data=[],this.map=b}function c(a){var b={};a?(this.data=a.slice(),this.data.forEach(function(a){b[a.id]=a.name})):this.data=[],this.map=b}function d(a){a[0]instanceof e?this.children=a.slice():this.children=a.sort(function(a,b){return a.z===b.z?a.columns===b.columns?a.column-b.column:b.columns-a.columns:a.z-b.z}).map(function(a){return new e(a)})}function e(a){var b={id:0,name:"",targetId:0,row:0,column:0,rows:1,columns:1,z:0,isTocItem:!1,isRecycled:!1,interestGroup:"",container:{id:0,name:"",isToc:!1,isSortable:!1,markup:[],content:{},tocItemPlaceholderId:0},content:void 0};this.data=_.merge(b,a),void 0===this.data.content&&(this.data.content=_.clone(this.data.container.content)),this.capsule=new i(this)}function f(a){this.data=$.extend({id:0,name:"",isToc:!1,markup:[],content:{}},a)}function g(a){this.horizontal=Y,this.vertical=Y;for(var b=0;b<a.length;b++){var c=a.charAt(b).toLowerCase();switch(c){case Z:case aa:this.horizontal===Y?this.horizontal=c:console.error("Ambiguous direction code: "+a);break;case ba:case ca:this.vertical===Y?this.vertical=c:console.error("Ambiguous direction code: "+a);break;default:console.error("Unknown direction code: "+c)}}}function h(a,b){var c=a.get$();this.child=a,this.$child=c,this.grid=b}function i(a){var b=this,c=$.Deferred(),d=r.dom("div-sandbox");this.promise=c.promise(),this.watcher=new l,this.$capsule=d,this.$content=i.stub(),d.find("iframe").on("load",function(){var a=$(this).contents().get(0);$(a.head).append(i.style()),$(a.body).append(b.$content),b.watcher.bind(da.imagesAdjusted(b.$content)),c.resolveWith(b)}),d.appendTo("#children"),e.set(d,a),this.controls=new k(d)}function j(a){this.child=a}function k(a){var b=this,c=e.get(a);this.$capsule=a,this.factory=new j(c),this.timeoutId=null,this.state=I,this.update(),a.on("mouseenter",function(){b.show()}),a.on("mouseleave",function(){b.hide()})}function l(){this.deferred=$.Deferred(),this.callback=null}function m(a,b){this.$template=$("#template"),this.columns=a.columns,this.rows=[],this.gap=a.gap,this.columnWidth=a.columnWidth,this.callbacks={},this.hoveredDroppable=null;for(var c=1;c<=b;c++){var d=this.createRow(a.gutters[c-1]);this.$template.append(d.get$()),this.rows.push(d)}this.adjustSidebars()}function n(a,b){this.$row=r.dom("droppables-row",{isGuttered:b!==!1}),this.$gutterButton=r.dom("toggle-gutter-button"),this.$removeButton=r.dom("remove-row-button"),this.$insertButton=r.dom("insert-row-button"),this.$row.data("agn:row",this),this.$gutterButton.data("agn:row",this),this.$removeButton.data("agn:row",this),this.$insertButton.data("agn:row",this),this.droppables=[],this.callbacks={};for(var c=1;c<=a;c++){var d=this.createDroppable();this.droppables.push(d),this.$row.append(d.get$())}this.$gutterButton.appendTo("#sidebar-gutters"),this.$removeButton.appendTo("#sidebar-actions"),this.$insertButton.appendTo("#sidebar-actions"),da.setTooltip(this.$gutterButton,b===!1?t("grid.gutter.show"):t("grid.gutter.hide")),da.setTooltip(this.$removeButton,t("grid.row.delete")),da.setTooltip(this.$insertButton,t("grid.row.add"))}function o(a){this.$droppable=r.dom("droppable"),this.$droppable.data("agn:droppable",this),this.$droppable.droppable(o.options(this)),this.row=a,this.callbacks={}}function p(a,b,c){var d=this;this.$modal=a,this.child=b,this.options=c;var e=b.getPlaceholders(T),f=[];e.forEach(function(a){var b=parseInt(a.value);b>0&&f.push(b)}),f.length>0&&$.ajax(this.options.urls.MEDIAPOOL_VIEW,{type:"POST",dataType:"json",traditional:!0,data:{elementIds:f}}).done(function(a){e.forEach(function(b){var c=parseInt(b.value);if(c>0){var e=a[c];$("#image-category-id-"+b.id).select2("val",e.categoryId),d.updateImagePreview(b.id,e.src,e.name,e.title)}})}),this.updateImageSrcPreview=_.throttle(this.updateImageSrcPreview,300)}var q,r=AGN.Lib.Template,s=AGN.Lib.Tooltip,u=AGN.Lib.Popover,v=AGN.Lib.Modal,w=AGN.Lib.Confirm,x=AGN.Lib.Form,y=AGN.Lib.Action,z=AGN.Lib.Helpers,A=-1,B=0,C=500,D=80,E=30,F=10,G=2,H=0,I=1,J=2,K=3,L='<div class="popover popover-wide" role="tooltip" style="margin-top: -5px;"><div class="popover-content"></div><div class="bottom-space"></div></div>',M="Text",N="Placeholder",O="TocArea",P="TocPlaceholder",Q="Label",R="Text",S="Link",T="Image",U="ImageLink",V="Id",W="Name",X="toc_",Y="",Z="e",aa="w",ba="n",ca="s",da={setShown:function(a,b){b?a.removeClass("hidden"):a.addClass("hidden")},setTooltip:function(a,b){a.data("tooltip",b),s.createTip(a,b)},removeTooltip:function(a){s.remove(a)},checkHoverState:function(a){a.is(":hover")&&a.trigger("mouseleave").trigger("mouseenter")},setLocked:function(a){$("#editor-progress").toggle(!!a),$("#disabled-save-button").toggle(!!a),$("#save-button").toggle(!a)},setTargetId:function(a){$("#visibleTargets").select2("val",a)},getAvailableTargetIds:function(){return $("#visibleTargets").children("option").get().map(function(a){return parseInt($(a).val())})},setAvailableTargetIds:function(a){var b=this.getAvailableTargetIds(),c=$("#visibleTargets");c.empty(),a.push({id:A,name:t("filter.reset")}),_.sortBy(a,function(a){return a.id>B?b.indexOf(parseInt(a.id)):a.id==B?1e6:1000001}).forEach(function(a){$("<option></option>").val(a.id).text(a.name).appendTo(c)})},imagesAdjusted:function(a,b){var c=$.Deferred(),d=void 0,e=void 0;b===!0&&(d=a.outerWidth(),e=a.outerHeight());var f=function(){var b=a.outerWidth(),f=a.outerHeight();d===b&&e===f||(d=b,e=f,c.notify())};return a.imagesLoaded().progress(f).always(f),c.promise()},getHeightAccurate:function(a){return a[0].getBoundingClientRect().height},getResizeHandleDirection:function(a){return a.hasClass("ui-resizable-ne")?new g("ne"):a.hasClass("ui-resizable-se")?new g("se"):a.hasClass("ui-resizable-nw")?new g("nw"):a.hasClass("ui-resizable-sw")?new g("sw"):a.hasClass("ui-resizable-e")?new g("e"):a.hasClass("ui-resizable-w")?new g("w"):a.hasClass("ui-resizable-n")?new g("n"):a.hasClass("ui-resizable-s")?new g("s"):(console.error("Invalid resizing direction handle"),new g(""))}};window.onbeforeunload=function(a){if($('[data-controller="grid-layout-view"]').exists()){var b=t("grid.layout.leaveQuestion");if(a=a||window.event,q&&q.isChanged())return a&&(a.returnValue=b),b}AGN.Lib.Loader.show()},this.addDomInitializer("grid-layout-view",function(b){q||(q=new a),q.setup(b.json())}),this.addDomInitializer("available-building-blocks-menu",function(a){var b=$("#div-containers-cache"),c={};b.children("[data-container-id]").each(function(){var a=$(this),b=new f(a.json());c[b.getContainerId()]=b}),a.find("[data-building-block]").each(function(){var a=$(this),b=a.data("container-id"),d=c[b];d&&(e.set(a,d),a.draggable(f.draggableOptions()))}),b.remove()}),this.addAction({change:"visibleTargets"},function(){q.setTargetId(parseInt(this.el.val()))}),this.addAction({"select2-open":"visibleTargets"},function(){var a=this.el,b=a.select2("dropdown").find(".select2-results");b.css("overflow","hidden"),b.children(".select2-result").each(function(){var a=$(this);a.data("select2-data").id>0&&a.addClass("sortable")}),b.sortable({items:".select2-result.sortable",containment:"parent",tolerance:"pointer",distance:5,opacity:.4,cursor:"move",start:function(a,b){b.item.removeClass("select2-result-selectable")},stop:function(a,b){b.item.addClass("select2-result-selectable")},update:function(a,b){var c=b.item.data("select2-data"),d=b.item.prev(),e=b.item.next();if(d.length){var f=d.data("select2-data");$(f.element[0]).after($(c.element[0]))}else if(e.length){var g=e.data("select2-data");$(g.element[0]).before($(c.element[0]))}q.setLayeringByTargets(da.getAvailableTargetIds())}})}),this.addAction({"select2-close":"visibleTargets"},function(){this.el.select2("dropdown").find(".select2-results").sortable("destroy")}),this.addAction({change:"setTemplateReleased"},function(){$("#is-released").val(this.el.is(":checked")?"true":"false"),q.setChanged(!0)}),this.addAction({click:"toggleGutter"},function(){var a=n.get(this.el);a.setGuttered(!a.isGuttered()),q.setChanged(!0),q.adjust()}),this.addAction({click:"insertRow"},function(){q.addRowBefore(n.get(this.el))}),this.addAction({click:"addRow"},function(){q.addRow()}),this.addAction({click:"deleteRow"},function(){q.removeRow(n.get(this.el))}),this.addAction({click:"edit"},function(){var a=e.get(this.el);a&&q.editChild(a)}),this.addAction({click:"clone"},function(){var a=e.get(this.el);a&&q.cloneChild(a)}),this.addAction({click:"remove"},function(){var a=e.get(this.el);a&&q.removeChild(a)}),this.addAction({change:"previewImageSrc",keyup:"previewImageSrc",mouseup:"previewImageSrc"},function(){p.get(this.el).updateImageSrc(this.el)}),this.addAction({change:"chooseImageFile"},function(){p.get(this.el).updateImage(this.el)}),this.addAction({click:"chooseImage"},function(){var a=this.el.data("placeholder-id");p.get(this.el).chooseImage(a)}),this.addAction({click:"deleteImage"},function(){var a=this.el.data("placeholder-id");p.get(this.el).deleteImage(a)}),this.addAction({click:"showMediapoolDialog"},function(){var a=this.el.data("placeholder-id");p.get(this.el).showMediapoolDialog(a)}),this.addAction({submission:"saveChildContents"},function(){p.get(this.el).save(x.get(this.el))}),this.addAction({click:"submit"},function(){if(q.isTextVersionGenerationAllowed()){var a={modalClass:"",title:t("mailing.textVersion"),content:t("mailing.textVersionGenerationQuestion")};w.createFromTemplate(a,"modal-yes-no-cancel").always(function(a){"yes"!==a&&"no"!==a||q.save("yes"===a)})}else q.save(!1)}),y.new({"form:loadershow":"form"},function(){da.setLocked(!0)}),y.new({"form:loaderhide":"form"},function(){da.setLocked(!1)}),a.prototype.setup=function(a){a=$.extend({templateId:0,targetId:A,grid:{},children:[],imageUriPattern:"{image-id}",noPreviewImageLink:"#",isTextVersionGenerationAllowed:!1,targets:[],interestGroups:[],categories:[],translations:{},urls:{},actions:{}},a),$.i18n.load(a.translations),this.changesNotSaved=!1,this.templateId=a.templateId,this.targetId=a.targetId,this.imageUriPattern=a.imageUriPattern,this.noPreviewImageLink=a.noPreviewImageLink,this.textVersionGenerationAllowed=a.isTextVersionGenerationAllowed,this.noImageLink=a.noImageLink,this.targets=new b(a.targets),this.interestGroups=a.interestGroups,this.categories=new c(a.categories),this.children=new d(a.children),this.urls=a.urls,this.actions=a.actions;var e=this.children.active();this.grid=new m(a.grid,Math.max(1,e.calculateRowsCount())),e.rebuildStatic({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),e.adjustLayering(),this.updateAvailableTargets(),da.setTargetId(this.targetId),this.setTargetId(this.targetId),this.setupInteractions(),this.updateRecycleBin(),this.setupSessionTimer(),da.setLocked(!1)},a.prototype.setupInteractions=function(){function a(a,c){b.children.active().matching(b.targetId).each(function(b){b!==a&&(b.setControlsEnabled(c),b.setResizable(c))})}var b=this;this.children.recycled().each(function(a){a.setRows(1),a.setColumns(1)}),this.grid.setOnResizingStarted(function(b){a(b,!1)}),this.grid.setOnResizingStopped(function(c){a(c,!0),b.children.active().stick(c.getArea())});var c=null;this.grid.setOnAreaHovered(function(a){var d=b.children.active().matching(b.targetId);a?(d=d.select(function(b){return b.isInArea(a)}),c&&c.each(function(a){d.contains(a)||a.setHighlighted(!1)}),d.setHighlighted(!0),c=d):(d.setHighlighted(!1),c=null)}),this.grid.setOnDrop(function(a,c,d){var e=b.children.active(),g=!1;if(!e.contains(a)){if(g=!0,a.isToc()&&e.containsToc())return void AGN.Lib.Messages(t("defaults.error"),t("error.template.notUniqToc"),"warning");a instanceof f?(a=a.instantiate(),b.children.add(a)):a.isRecycled()&&(a.setRecycled(!1),b.updateRecycleBin()),b.targetId!==A&&a.setTargetId(b.targetId),e=b.children.active(),a.isToc()||a.rebuild({imageUriPattern:b.imageUriPattern,noImageLink:b.noImageLink})}a.setArea(d),e.active().stick(d),(a.isTocItem()||g&&a.isToc())&&e.matching(b.targetId).rebuildToc({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),a.adjustSize(b.grid),a.adjustCoordinates(b.grid),g?(a.setShown(!0),b.adjust(),b.watcher.bind(e.matching(b.targetId).pulse())):b.adjust(),b.updateAvailableTargets(),b.setChanged(!0)}),$("#children").on("dblclick","[data-building-block]",function(a){var b=$(a.target);if(!(b.is("button")||b.is(".ui-resizable-handle")||b.closest("button").exists())){var c=$(this),d=e.get(c);d&&q.editChild(d)}})},a.prototype.setupSessionTimer=function(){var a=this.urls.SESSION_REFRESH;this.sessionTimerId&&clearInterval(this.sessionTimerId),this.sessionTimerId=setInterval(function(){$.ajax(a,{type:"POST",loader:!1})},6e4)},a.prototype.updateAvailableTargets=function(){var a=this.children.active(),b=this.targets,c=a.collectTargetIds(),d=[];a.groups().forEach(function(a){var b={};a.sort(function(a,b){return a.getZ()-b.getZ()}).forEach(function(a,c){b[a.getTargetId()]=c}),d.push(b)}),c.sort(function(a,b){var c=0;return d.forEach(function(d){if(a in d&&b in d){var e=d[a]-d[b];e<0?c++:e>0&&c--}}),c}),da.setAvailableTargetIds(c.map(function(a){return{id:a,name:b.name(a)}})),c.indexOf(this.targetId)<0&&(this.targetId=A),da.setTargetId(this.targetId)},a.prototype.isTextVersionGenerationAllowed=function(){return this.textVersionGenerationAllowed},a.prototype.isChanged=function(){return this.changesNotSaved},a.prototype.setChanged=function(a){this.changesNotSaved=!!a},a.prototype.getGrid=function(){return this.grid},a.prototype.getTargetName=function(a){return this.targets.name(a)},a.prototype.setTargetId=function(a){var b=this.children.active();this.targetId=a,b.unmatching(this.targetId).setShown(!1),b=b.matching(this.targetId),b.rebuildToc({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),b.setShown(!0),this.adjust(),this.watcher.bind(b.pulse())},a.prototype.setLayeringByTargets=function(a){this.children.active().groups().forEach(function(b){b.length>1&&d.make(b).setLayeringByTargets(a)}),this.setChanged(!0)},a.prototype.setChildrenControlsEnabled=function(a){this.children.active().matching(this.targetId).setControlsEnabled(a);
},a.prototype.updateToc=function(a){var b=this.children.active().matching(this.targetId);b.rebuildToc({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink})&&a&&(this.adjustSizes(b),this.adjustCoordinates(b))},a.prototype.adjustSizes=function(a){void 0===a&&(a=this.children.active().matching(this.targetId)),a.adjustSizes(this.grid),this.grid.adjustRows(a)},a.prototype.adjustCoordinates=function(a){void 0===a&&(a=this.children.active().matching(this.targetId)),this.grid.adjustSidebars(),a.adjustCoordinates(this.grid)},a.prototype.adjustLayering=function(a){var b=this;void 0===a&&(a=this.children.active().matching(this.targetId));var c=a.groupsMap();this.grid.each(function(a,e){a.each(function(a,f){var g=e+1+":"+(f+1),h=d.make(c[g]);if(h.size()>1){var i=1,j=!1;h.calculateTocItemsCount()>1&&(j=!0),h.setBorderHighlighted(!0),a.setLayeringIndex(i),a.setOnLayeringRotate(function(){b.setChanged(!0),i=i%h.size()+1,h.rotateLayering(),this.setLayeringIndex(i),j&&b.updateToc(!0)})}else h.setBorderHighlighted(!1),a.setLayeringIndex(null),a.setOnLayeringRotate(null)})})},a.prototype.adjust=function(a){var b=this.children.active().matching(this.targetId);this.adjustSizes(b),this.adjustCoordinates(b),a!==!1&&this.adjustLayering(b)},a.prototype.addRowBefore=function(a,b){var c=this.grid.addRowBefore(a),d=this.children.active(),e=!1;d.each(function(a){var b=a.getRows(),d=a.getRow(),f=d+b-1;c<=d?a.setRow(d+1):c>d&&c<=f&&(e=!0,a.setRows(b+1))}),b!==!1&&(e?this.adjust():this.adjustCoordinates(d.matching(this.targetId))),this.setChanged(!0)},a.prototype.addRow=function(a){this.grid.addRow(),a!==!1&&this.grid.adjustSidebars(),this.setChanged(!0)},a.prototype.removeRow=function(a){var b=this.grid.removeRow(a),c=this.children.active(),d=!1,e=!1;c.each(function(a){var c=a.getRows(),f=a.getRow(),g=f+c-1;b>=f&&b<=g?c>1?(a.setRows(c-1),e=!0):(a.setRecycled(!0),d=!0):b<f&&a.setRow(f-1)}),d?(c=this.children.active().matching(this.targetId),c.rebuildToc({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),this.adjust(),this.watcher.bind(c.pulse()),this.updateAvailableTargets(),this.updateRecycleBin()):e?this.adjust():this.adjustCoordinates(),this.setChanged(!0)},a.prototype.removeChild=function(a){if(this.children.contains(a)){if(a.setRecycled(!0),a.isTocItem()){var b=this.children.active().matching(this.targetId);b.rebuildToc({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),this.watcher.bind(b.pulse())}this.adjust(),this.updateAvailableTargets(),this.updateRecycleBin(),this.setChanged(!0)}},a.prototype.cloneChild=function(a){function b(a,b,c){var d=[],e={};a.each(function(a){var f=a.getColumn();if(b===a.getRow()&&f>=c){d.push(a);var g=a.getColumns();e[f]=Math.min(e[f]||f,f);for(var h=1;h<g;h++)e[f+h]=f}});for(var f=_.groupBy(d,function(a){for(var b=a.getColumn();e[b]&&e[b]!==b;)b=e[b];return b}),g=[],i=c;i<=h;i++)if(e[i]){var j=f[i];j&&g.push(j)}else g.push([]);return g}function c(a){var b=0;return a.forEach(function(a){0===a.length&&b++}),b}function d(a,b){function c(a,b){var c=null,d=null;a.forEach(function(a){var b=a.getColumn(),e=b+a.getColumns()-1;c=Math.min(c||b,b),d=Math.max(d||e,e)});var e=0;return d+b>h&&(e=h+1-c-b,b+=e),a.forEach(function(a){var c=a.getColumn()+b;c>h?(a.setRow(a.getRow()+1),a.setColumn(c-h)):a.setColumn(c)}),e}for(var d=0;d<a.length&&b>0;d++){var e=a[d];e.length>0?b+=c(e,b):b--}}function e(a){var b=g.grid.getRow(a);b?g.addRowBefore(b,!1):g.addRow(!1)}function f(a,f,g){var i=f.getRow(),j=f.getColumns(),k=f.getColumn()+j,l=b(a,i,k),m=h-k+1;m>=j?(c(l)>=j?d(l,j):(e(i+1),d(l,j)),g.setRow(i),g.setColumn(k)):(e(i+1),d(l,m+j),g.setRow(i+1),g.setColumn(1))}var g=this,h=this.grid.getColumns(),i=this.children.active(),j=a.clone();f(i,a,j),j.rebuild({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),j.setShown(!0),this.children.add(j),this.updateToc(!1),this.watcher.bind(this.children.active().matching(this.targetId).pulse()),this.adjust(),this.setChanged(!0)},a.prototype.editChild=function(a){var b={child:{name:a.getName(),containerName:a.getContainerName(),isToc:a.isToc(),isSortable:a.isSortable(),interestGroup:a.getInterestGroup(),targetId:a.getTargetId(),asTocItem:a.asTocItem(),placeholders:a.getPlaceholders()},targets:this.targets.list(),interestGroups:this.interestGroups.slice(),categories:this.categories.list(),imageUriPattern:this.imageUriPattern,noPreviewImageLink:this.noPreviewImageLink,noImageLink:this.noImageLink,urls:this.urls};a.isToc()&&(b.child.toc=this.children.active().matching(this.targetId).asTocItems(!1)),p.create(a,b)},a.prototype.saveChild=function(a,b,c,d,e,f){a.setName(b),a.setTargetId(c),a.setTocItem(d),a.setInterestGroup(e),a.setContent(f),a.isToc()?this.updateToc(!1):(a.rebuild({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),(a.isTocItem()||d)&&this.updateToc(!1)),a.isMatching(this.targetId)||(a.setShown(!1),this.watcher.bind(this.children.active().matching(this.targetId).pulse())),this.adjust(),this.setChanged(!0),this.updateAvailableTargets()},a.prototype.updateRecycleBin=function(){var a=$("#recyclebin-content"),b=$("#recyclebin-stub");this.children.sort(function(a,b){return a.isRecycled()===b.isRecycled()?0:a.isRecycled()?1:-1});var c=this.children.recycled().get();da.setShown(b,0===c.length);var d=r.dom("recyclebin-table",{children:c.map(function(a){return{name:a.getName()||a.getContainerName(),id:a.getId(),containerId:a.getContainerId()}})});a.html(d),d.find("[data-building-block]").each(function(a){var b=$(this);b.draggable(f.draggableOptions()),e.set(b,c[a])})},a.prototype.getGuttersAsString=function(){var a=[];return this.grid.each(function(b){a.push(b.isGuttered()?"1":"0")}),a.join("|")},a.prototype.getChildrenAsSubmittable=function(){var a=this.children.active().groups(),b=[],c=da.getAvailableTargetIds();return a.forEach(function(a){a=_.sortBy(a,function(a){return c.indexOf(a.getTargetId())});var d=0;a.forEach(function(a){a.setZ(d++),b.push(a.asSubmittable())})}),b},a.prototype.validateOverlaps=function(){for(var a=this.children.active().select(function(a){return a.getRows()>1}).get(),b=0;b<a.length;b++)for(var c=a[b],d=c.getRow(),e=d+c.getRows()-1,f=b+1;f<a.length;f++){var g=a[f],h=g.getRow(),i=h+g.getRows()-1;if(h>d&&h<=e&&i>e||h<d&&i>=d&&i<e){var j=c.getColumn(),k=j+c.getColumns()-1,l=g.getColumn(),m=l+g.getColumns()-1;if(l>k||m<j)return!1}}return!0},a.prototype.save=function(a){if(this.validateOverlaps()){var b=$("#gridTemplateForm"),c=x.get(b);this.setChanged(!1),c.setValue("forceGenerateTextVersion",a===!0),c.setValue("rowGutters",this.getGuttersAsString()),c.setValue("childrenJson",JSON.stringify(this.getChildrenAsSubmittable())),c.submit("resource")}else AGN.Lib.Messages(t("defaults.error"),t("error.template.invalidVerticalSpanning"),"alert")},b.prototype.name=function(a){return this.map[a==A?B:a]},b.prototype.list=function(){return this.data.slice()},c.prototype.name=function(a){return this.map[a]},c.prototype.list=function(){return this.data.slice()},d.make=function(a){return new d(a||[])},d.prototype.get=function(){return this.children.slice()},d.prototype.size=function(){return this.children.length},d.prototype.each=function(a){this.children.forEach(a)},d.prototype.sort=function(a){this.children.sort(a)},d.prototype.contains=function(a){return this.children.indexOf(a)>=0},d.prototype.containsToc=function(){for(var a=0;a<this.children.length;a++)if(this.children[a].isToc())return!0;return!1},d.prototype.matching=function(a){return this.select(function(b){return b.isMatching(a)})},d.prototype.unmatching=function(a){return this.select(function(b){return!b.isMatching(a)})},d.prototype.active=function(){return this.select(function(a){return!a.isRecycled()})},d.prototype.recycled=function(){return this.select(function(a){return a.isRecycled()})},d.prototype.select=function(a){return new d(this.children.filter(a))},d.prototype.add=function(a){a.setZ(this.active().calculateMaxZ()+1),this.children.push(a)},d.prototype.groupsMap=function(){var a={},b=_.groupBy(this.children,function(a){return a.getRow()});return $.each(b,function(b,c){var d={};c.forEach(function(a){var b=a.getColumns();if(b>1)for(var c=a.getColumn(),e=1;e<b;e++)d[c+e]=c}),c.forEach(function(c){for(var e=c.getColumn();d[e];)e=d[e];var f=b+":"+e;void 0===a[f]&&(a[f]=[]),a[f].push(c)})}),a},d.prototype.groups=function(){var a=[],b=this.groupsMap();return $.each(b,function(b,c){c.length&&a.push(c)}),a},d.prototype.collectTargetIds=function(){var a={};return this.each(function(b){a[b.getTargetId()]=!0}),Object.keys(a).sort()},d.prototype.calculateMaxZ=function(){return this.children.reduce(function(a,b){return Math.max(b.getZ(),a)},0)},d.prototype.calculateRowsCount=function(){return this.children.reduce(function(a,b){return Math.max(b.getRow()+b.getRows()-1,a)},0)},d.prototype.calculateTocItemsCount=function(){var a=0;return this.children.forEach(function(b){b.isTocItem()&&a++}),a},d.prototype.setShown=function(a){this.children.forEach(function(b){b.setShown(a)})},d.prototype.setBorderHighlighted=function(a){this.children.forEach(function(b){b.setBorderHighlighted(a)})},d.prototype.setHighlighted=function(a){this.children.forEach(function(b){b.setHighlighted(a)})},d.prototype.setControlsEnabled=function(a){this.children.forEach(function(b){b.setControlsEnabled(a),b.setResizable(a),b.checkHoverState()})},d.prototype.asTocItems=function(a){var b=this.children.slice().sort(function(a,b){return a.getRow()===b.getRow()?a.getColumn()===b.getColumn()?b.getZ()-a.getZ():a.getColumn()-b.getColumn():a.getRow()-b.getRow()}).map(function(a){return a.asTocItem()}).filter(function(a){return!!a});return a?b.filter(function(a){return a.isEnabled}):b},d.prototype.pulse=function(){var a=this.children.map(function(a){return a.pulse()});return $.when.apply(this,a)},d.prototype.rebuildStatic=function(a){this.each(function(b){b.isToc()||b.rebuild(a)})},d.prototype.rebuildToc=function(a){var b=this,c=!1;return this.each(function(d){d.isToc()&&(d.rebuild($.extend({},a,{toc:b.asTocItems(!0)})),c=!0)}),c},d.prototype.rotateLayering=function(){var a=this.children.slice().sort(function(a,b){return a.getZ()-b.getZ()}),b=a.map(function(a){return a.getZ()});a.forEach(function(a,c){a.setZ(b[(c+1)%b.length])})},d.prototype.setLayeringByTargets=function(a){var b=this.children.slice().sort(function(a,b){return b.getZ()-a.getZ()}),c=b.map(function(a){return a.getZ()});_.sortBy(b,function(b){return a.indexOf(b.getTargetId())}).forEach(function(a,b){a.setZ(c[b])})},d.prototype.stick=function(a){this.children.forEach(function(b){b.isInArea(a)&&b.setArea(a)})},d.prototype.adjustLayering=function(){var a=this.children.length;this.children.forEach(function(b){b.setZ(--a)})},d.prototype.adjustSizes=function(a){this.children.forEach(function(b){b.adjustSize(a)})},d.prototype.adjustCoordinates=function(a){this.children.forEach(function(b){b.adjustCoordinates(a)})},e.get=function(a){return a.data("agn:child")},e.set=function(a,b){a.data("agn:child",b)},e.render=function(a,b,c){var d="";return a.forEach(function(a){switch(a.type){case M:d+=a.value;break;case N:var f=b[a.id];if(a.markup)f&&(d+=e.render(a.markup,b,c));else switch(a.placeholderType){case Q:case R:case S:d+=f||"";break;case U:d+=f||c.noImageLink;break;case T:d+=parseInt(f)>0?c.imageUriPattern.replace("{image-id}",f):c.noImageLink;break;default:console.error("Unknown placeholder type: "+a.placeholderType)}break;case O:c.toc.forEach(function(f){d+=e.render(a.markup,b,$.extend({tocItem:f},c))});break;case P:switch(a.placeholderType){case V:d+=X+c.tocItem.id;break;case W:d+=c.tocItem.name;break;default:console.error("Unknown TOC placeholder type: "+a.placeholderType)}break;default:console.error("Unknown span type: "+a.type)}}),d},e.collectPlaceholders=function(a,b,c,d,f){a.forEach(function(a){switch(a.type){case N:f&&!f.call(f,a)||void 0===d[a.id]&&(c.push({id:a.id,type:a.placeholderType,name:a.name,value:b[a.id]}),d[a.id]=!0);case O:a.markup&&e.collectPlaceholders(a.markup,b,c,d,f)}})},e.draggableOptions=function(){return{stack:"#children .div-container",revert:"invalid",distance:20,cursor:"move",opacity:.4,start:function(){q.setChildrenControlsEnabled(!1)},stop:function(){q.setChildrenControlsEnabled(!0)}}},e.resizableOptions=function(a){var b=!1;return{handles:"ne, se, sw, nw, w, n, e, s",autoHide:!0,create:function(){b=new h(a,q.getGrid())},start:function(c,d){b===!1&&(b=new h(a,q.getGrid()));var e=$(c.originalEvent.target);a.setControlsEnabled(!1),a.capsule.setResizingEnabled(!0),b.start(da.getResizeHandleDirection(e))},stop:function(c,d){b.stop(d.size.width,d.size.height),a.capsule.setResizingEnabled(!1),a.setControlsEnabled(!0),a.checkHoverState(),a.isTocItem()&&q.updateToc(!1),q.adjust(),q.setChanged(!0)},resize:function(a,c){b.resize(c.size.width,c.size.height)}}},e.prototype.asSubmittable=function(){return{id:this.data.id,containerId:this.data.container.id,name:this.data.name,targetId:this.data.targetId,interestGroup:this.data.container.isSortable?this.data.interestGroup||"":"",row:this.data.row,column:this.data.column,rows:this.data.rows,columns:this.data.columns,content:$.extend({},this.data.content),isTocItem:this.data.isTocItem}},e.prototype.get$=function(){return this.capsule.get$()},e.prototype.getId=function(){return this.data.id},e.prototype.getName=function(){return this.data.name},e.prototype.getContainerName=function(){return this.data.container.name},e.prototype.setName=function(a){this.data.name=a||""},e.prototype.getContainerId=function(){return this.data.container.id},e.prototype.isRecycled=function(){return this.data.isRecycled},e.prototype.setRecycled=function(a){a?(this.setShown(!1),this.setRows(1),this.setColumns(1),this.capsule.recycle(),this.data.isRecycled=!0):this.data.isRecycled=!1},e.prototype.isInArea=function(a){return!this.isNotInArea(a)},e.prototype.isNotInArea=function(a){var b=a.column,c=b+a.columns-1,d=a.row,e=d+a.rows-1,f=this.data.column,g=f+this.data.columns-1,h=this.data.row,i=h+this.data.rows-1;return Math.max(f,g)<b||Math.min(f,g)>c||Math.max(h,i)<d||Math.min(h,i)>e},e.prototype.isMatching=function(a){return a===A||this.data.targetId===B||this.data.targetId===a},e.prototype.isToc=function(){return this.data.container.isToc},e.prototype.isTocItem=function(){return this.data.isTocItem},e.prototype.setTocItem=function(a){this.data.isTocItem=!!a},e.prototype.isSortable=function(){return this.data.container.isSortable},e.prototype.getInterestGroup=function(){return this.isSortable()?this.data.interestGroup||"":""},e.prototype.setInterestGroup=function(a){this.isSortable()?this.data.interestGroup=a||"":this.data.interestGroup=""},e.prototype.getTargetId=function(){return this.data.targetId},e.prototype.setTargetId=function(a){this.data.targetId=a>=0?a:B,this.capsule.updateControls()},e.prototype.getRow=function(){return this.data.row},e.prototype.setRow=function(a){return this.data.row=a},e.prototype.getColumn=function(){return this.data.column},e.prototype.setColumn=function(a){this.data.column=a},e.prototype.getZ=function(){return this.capsule.getZ()},e.prototype.setZ=function(a){this.capsule.setZ(a)},e.prototype.getRows=function(){return this.data.rows},e.prototype.setRows=function(a){this.data.rows=a},e.prototype.getColumns=function(){return this.data.columns},e.prototype.setColumns=function(a){this.data.columns=a},e.prototype.getArea=function(){return m.area(this.data.row,this.data.column,this.data.rows,this.data.columns)},e.prototype.setArea=function(a){this.setRow(a.row),this.setColumn(a.column),this.setRows(a.rows),this.setColumns(a.columns)},e.prototype.getHeight=function(){return this.capsule.getHeight()},e.prototype.setShown=function(a){this.capsule.setShown(a),this.setDraggable(a),this.setResizable(a)},e.prototype.setBorderHighlighted=function(a){this.capsule.setBorderHighlighted(a)},e.prototype.setHighlighted=function(a){this.capsule.setHighlighted(a)},e.prototype.setSize=function(a,b){this.capsule.setSize(a,b)},e.prototype.setCoordinates=function(a){this.capsule.setCoordinates(a)},e.prototype.setControlsEnabled=function(a){this.capsule.setControlsEnabled(a)},e.prototype.checkHoverState=function(){da.checkHoverState(this.capsule.get$())},e.prototype.adjustSize=function(a,b){this.setSize(a.getWidthForSpans(this.getColumns()),b||"auto")},e.prototype.adjustHeight=function(a){this.capsule.adjustHeight(a)},e.prototype.adjustCoordinates=function(a){this.setCoordinates(a.getCoordinates(this.getRow(),this.getColumn()))},e.prototype.setDraggable=function(a){var b=this.capsule.get$();if(a)b.draggable(e.draggableOptions());else try{b.draggable("destroy")}catch(a){}},e.prototype.setResizable=function(a){var b=this.capsule.get$();if(a)b.resizable(e.resizableOptions(this));else try{b.resizable("destroy")}catch(a){}},e.prototype.getPlaceholders=function(a){var b=this.data.content,c=[],d={},f=void 0;return a&&(f=function(b){return b.placeholderType===a}),e.collectPlaceholders(this.data.container.markup,b,c,d,f),c.sort(function(a,b){return a.name.localeCompare(b.name)}),c},e.prototype.setContent=function(a){$.extend(this.data.content,a)},e.prototype.asTocItem=function(){function a(a){return a.id===b}var b=this.data.container.tocItemPlaceholderId;if(b>0){var c=this.data.content,d=[],f={};if(e.collectPlaceholders(this.data.container.markup,c,d,f,a),d.length){var g=d[0];return{id:this.data.id,name:c[g.id]||"",placeholderName:g.name,isEnabled:this.data.isTocItem}}}return null},e.prototype.rebuild=function(a){this.capsule.embrace(e.render(this.data.container.markup,this.data.content,a))},e.prototype.pulse=function(){return this.capsule.pulse()},e.prototype.clone=function(){var a=new e(this.data);return a.data.id=0,a},f.draggableOptions=function(){return{stack:"#children .div-container",revert:"invalid",distance:20,helper:"clone",appendTo:"body",containment:"window",zIndex:C,start:function(a,b){b.helper.width($(this).width()),q.setChildrenControlsEnabled(!1)},stop:function(a,b){b.helper.width("auto"),q.setChildrenControlsEnabled(!0)}}},f.prototype.getContainerId=function(){return this.data.id},f.prototype.getRows=function(){return 1},f.prototype.getColumns=function(){return 1},f.prototype.isToc=function(){return this.data.isToc},f.prototype.instantiate=function(){return new e({name:this.data.name,container:this.data})},g.prototype.isHorizontal=function(){return this.horizontal!==Y},g.prototype.isVertical=function(){return this.vertical!==Y},g.prototype.isEast=function(){return this.horizontal===Z},g.prototype.isWest=function(){return this.horizontal===aa},g.prototype.isNorth=function(){return this.vertical===ba},g.prototype.isSouth=function(){return this.vertical===ca},h.prototype.setupConstraints=function(){this.setConstraints(this.grid.getConstraints(this.child,this.direction))},h.prototype.setConstraints=function(a){this.$child.resizable({minWidth:a.minWidth,maxWidth:a.maxWidth,minHeight:a.minHeight,maxHeight:a.maxHeight})},h.prototype.getArea=function(a,b){return this.grid.getArea(this.child,this.direction,a,b)},h.prototype.start=function(a){this.direction=a,this.area={row:this.child.getRow(),column:this.child.getColumn(),rows:this.child.getRows(),columns:this.child.getColumns()},this.z=this.child.getZ(),this.setupConstraints(),this.grid.setAreaHovered(this.area),this.grid.startResizing(this.child),this.child.setZ(C)},h.prototype.resize=function(a,b){var c=this.getArea(a,b);c.row===this.area.row&&c.column===this.area.column&&c.rows===this.area.rows&&c.columns===this.area.columns||(this.area=c,this.grid.setAreaHovered(c))},h.prototype.stop=function(a,b){this.area=this.getArea(a,b),this.child.setZ(this.z),this.child.setRow(this.area.row),this.child.setColumn(this.area.column),this.child.setRows(this.area.rows),this.child.setColumns(this.area.columns),this.grid.setAreaHovered(null),this.grid.stopResizing(this.child),this.child.adjustSize(this.grid),this.child.adjustCoordinates(this.grid)},i.stub=function(){return $('<div class="div-container"></div>')},i.css=function(){return $("#template-styles").html()},i.style=function(){return $("<style/>",{html:this.css()})},i.prototype.get$=function(){return this.$capsule},i.prototype.updateControls=function(){this.controls.update()},i.prototype.setControlsEnabled=function(a){this.controls.setEnabled(a)},i.prototype.ready=function(a){return void 0!==a&&this.promise.done(a),"resolved"===this.promise.state()},i.prototype.pulse=function(){return this.watcher.promise()},i.prototype.embrace=function(a){var b=$(a).filter("*");if(this.ready()){this.$content.replaceWith(b),this.$content=b;var c=this.$capsule.outerWidth();c>0&&this.setSize(c,"auto"),this.watcher.bind(da.imagesAdjusted(b,!0))}else this.$content=b},i.prototype.recycle=function(){var a=this;this.setShown(!1),this.ready(function(){var b=i.stub();a.watcher.bind(!1),a.$content.replaceWith(b),a.$content=b})},i.prototype.getZ=function(){return this.$capsule.css("z-index")},i.prototype.setZ=function(a){this.$capsule.css("z-index",a)},i.prototype.setShown=function(a){da.setShown(this.$capsule,a)},i.prototype.setBorderHighlighted=function(a){a?this.$capsule.addClass("highlight-border"):this.$capsule.removeClass("highlight-border")},i.prototype.setHighlighted=function(a){a?this.$capsule.addClass("highlight-cont"):this.$capsule.removeClass("highlight-cont")},i.prototype.setCoordinates=function(a){this.$capsule.offset(a)},i.prototype.setSize=function(a,b){this.$content.outerWidth(a),this.$capsule.outerWidth(a),this.ready()?(this.$content.style("width",function(a){return a},"important"),this.$content.style("height","auto","important"),"auto"===b&&(b=this.$content.outerHeight()),this.$capsule.outerHeight(b)):"auto"===b?this.$capsule.outerHeight(D):this.$capsule.outerHeight(b)},i.prototype.adjustHeight=function(a){this.$capsule.outerHeight(a)},i.prototype.getHeight=function(){return this.ready()?da.getHeightAccurate(this.$content):D},i.prototype.setResizingEnabled=function(a){a?(this.$capsule.css("box-sizing","content-box"),this.$capsule.css("opacity",.4),this.$content.style("width","100%","important"),this.$content.style("height","100%","important")):(this.$capsule.css("box-sizing",""),this.$capsule.css("opacity",""))},j.prototype.getOptions=function(){return{targetName:q.getTargetName(this.child.getTargetId()),isToc:this.child.isToc()}},j.prototype.createControls=function(a){var b=r.dom(a,this.getOptions());return e.set(b.find("[data-action]"),this.child),AGN.runAll(b),b},j.prototype.createInlineControls=function(){return this.createControls("child-controls")},j.prototype.createPopoverControls=function(){return this.createControls("child-popover-controls")},k.popoverOptions=function(a){return{trigger:"manual",html:!0,template:L,content:function(){return a.getPopoverContent()}}},k.prototype.stopHiding=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},k.prototype.popoverShow=function(){this.stopHiding(),this.popover.show(),this.state=J},k.prototype.popoverHide=function(a){if(this.stopHiding(),a===!0)this.popover.hide(),this.state=I;else{var b=this;this.timeoutId=setTimeout(function(){b.popoverHide(!0)},200)}},k.prototype.inlineShow=function(){this.$inlineControls.show(),this.state=K},k.prototype.inlineHide=function(){this.$inlineControls.hide(),this.state=I},k.prototype.show=function(){this.state!==H&&(this.$inlineControls.height()<this.$capsule.height()?(this.state===J&&this.popoverHide(!0),this.inlineShow()):(this.state===K&&this.inlineHide(),this.popoverShow()))},k.prototype.hide=function(a){switch(this.state){case K:this.inlineHide();break;case J:this.popoverHide(a)}},k.prototype.setEnabled=function(a){a?this.state===H&&(this.state=I):(this.hide(!0),this.state=H)},k.prototype.update=function(){this.$inlineControls&&this.$inlineControls.remove(),this.$inlineControls=this.factory.createInlineControls(),this.$capsule.append(this.$inlineControls),this.popover&&this.popover.destroy(),this.$popoverControls&&(this.$popoverControls=void 0),this.popover=u.new(this.$capsule,k.popoverOptions(this));var a=this.popover.tip(),b=this;a.on("mouseenter",function(){b.popoverShow()}),a.on("mouseleave",function(){b.popoverHide()}),this.state!==K&&this.state!==J||this.show()},k.prototype.getPopoverContent=function(){if(void 0===this.$popoverControls){this.$popoverControls=this.factory.createPopoverControls();var a=this.$popoverControls.find("[data-action]");e.set(a,this.child);var b=this;a.on("click",function(){b.popoverHide(!0)})}var c=this.$popoverControls.clone(!0);return AGN.runAll(c),c},k.prototype.remove=function(){this.state=H,this.stopHiding(),this.popover.destroy(),this.$popoverControls=void 0,this.$inlineControls.remove(),this.$inlineControls=void 0};l.prototype.promise=function(){return this.deferred.promise()};l.prototype.bind=function(a){var b=this;if(a===!1)b.callback=null;else{var c=b.callback=function(){b.callback===c&&b.deferred.notifyWith(this,arguments)};$.isArray(a)?a.forEach(function(a){a.progress(c)}):a.progress(c)}};var ea={};ea.make=function(a,b){ea.adjustChildren(a,b),b.forEach(function(b){b.adjustHeight(a.getHeightForSpans(b.getRow(),b.getColumn(),b.getRows(),b.getColumns()))})},ea.getChildrenProjections=function(a,b){var c=[];a.each(function(a){c.push({row:a,projections:[]})});var d=[];return b.forEach(function(a){for(var b=[],e={child:a,height:a.getHeight(),spans:b},f=a.getRow(),g=f+a.getRows()-1,h=f;h<=g;h++){var i={cascade:e,height:0,margin:0,adjusted:!1};b.push(i),c[h-1].projections.push(i)}d.push(e)}),$.each(c,function(b,c){var d=a.getRowMargin(c.row.isGuttered());$.each(c.projections,function(a,b){b.margin=d})}),$.each(d,function(a,b){ea.adjustCascade(b)}),c},ea.adjustCascade=function(a){for(var b=Math.max(a.height,F),c=0,d=a.spans,e=[],f=0;f<d.length;f++){var g=d[f];if(g.adjusted===!1&&(g.height=F,e.push(g)),c+=g.height,c+g.margin>=b){for(f+=1;f<d.length;f++)d[f].height=0;break}f+1<d.length&&(c+=g.margin)}var h=b-c;if(h>0&&e.length){var i=h/e.length;$.each(e,function(a,b){b.height+=i})}},ea.adjustChildren=function(a,b){$.each(ea.getChildrenProjections(a,b),function(a,b){var c=b.projections;if(c.length){var d=0,e=0;$.each(c,function(a,b){b.height>d&&(d=b.height,e=a)}),0===d&&(d=D),$.each(c,function(a,b){b.adjusted=!0,a!==e&&(b.height=d,ea.adjustCascade(b.cascade))}),b.row.setHeight(d)}else b.row.setHeight(D)})},m.area=function(a,b,c,d){return{row:a,column:b,rows:c,columns:d}},m.prototype.createRow=function(a){var b=new n(this.columns,a),c=this;return b.setOnHoverChange(function(a,d,e,f){var g=c.rows.indexOf(b)+1;g>0?f?(c.setAreaHovered(m.area(g,e,d.getRows(),d.getColumns())),c.hoveredDroppable=a):c.hoveredDroppable===a&&c.setAreaHovered(!1):c.setAreaHovered(!1)}),b.setOnDrop(function(a,d,e){if(c.callbacks.onDrop){var f=c.rows.indexOf(b)+1;if(f>0){var g=a.getRows(),h=c.getRows()-f+1;g>h&&(g=h);var i=a.getColumns(),j=c.getColumns()-e+1;i>j&&(i=j),c.callbacks.onDrop.call(c,a,d,m.area(f,e,g,i))}}}),b},m.prototype.each=function(a){this.rows.forEach(a)},m.prototype.getRows=function(){return this.rows.length},m.prototype.getColumns=function(){return this.columns},m.prototype.getRow=function(a){return this.rows[a-1]||null},m.prototype.getDroppable=function(a,b){var c=this.getRow(a);return c?c.getDroppable(b):null},m.prototype.getRowMargin=function(a){return G+(a?this.gap:0)},m.prototype.getCoordinates=function(a,b){return this.getDroppable(a,b).getCoordinates()},m.prototype.getConstraints=function(a,b){return $.extend(this.getWidthConstraints(a,b),this.getHeightConstraints(a,b))},m.prototype.getWidthConstraints=function(a,b){var c,d=a.getColumn(),e=a.getColumns(),f=this.getWidthForSpans(1);return c=b.isHorizontal()?b.isEast()?this.getWidthForSpans(this.getColumns()-d+1):this.getWidthForSpans(d+e-1):f,{minWidth:f,maxWidth:c}},m.prototype.getHeightConstraints=function(a,b){var c,d,e=a.getColumns(),f=a.getColumn(),g=f+e-1,h=a.getRows(),i=a.getRow(),j=i+h-1;return b.isVertical()?(b.isSouth()?(c=this.getMinHeightConstraint(i,f,1,e),j=this.getRows(),b.isHorizontal()&&(b.isEast()?g=this.getColumns():f=1)):(c=this.getMinHeightConstraint(j,f,1,e),i=1),d=this.getMaxHeightConstraint(i,f,j-i+1,g-f+1)):c=d=a.getHeight(),{minHeight:Math.min(c,a.getHeight()),maxHeight:d}},m.prototype.getWidthForSpans=function(a){return this.columnWidth*a+this.gap*(a-1)},m.prototype.getHeightForSpans=function(a,b,c,d,e){function f(a){return g.rows[a-1].getDroppables().slice(b-1,b+d-1).reduce(e)}var g=this;void 0===e&&(e=function(a,b){return a.getHeight()>b.getHeight()?a:b});var h=a,i=a+c-1;if(h===i)return f(h).getHeight();var j=f(h).get$(),k=f(i).get$();return k.position().top-j.position().top+k.outerHeight()},m.prototype.getMinHeightConstraint=function(a,b,c,d){function e(a,b){return a.getHeight()<b.getHeight()?a:b}return this.getHeightForSpans(a,b,c,d,e)},m.prototype.getMaxHeightConstraint=function(a,b,c,d){function e(a,b){return a.getHeight()>b.getHeight()?a:b}return this.getHeightForSpans(a,b,c,d,e)},m.prototype.getArea=function(a,b,c,d){function e(a){var b=i.rows[a-1];return b?b.getDroppables().slice(g-1,g+h-1).reduce(function(a,b){return a.getHeight()>b.getHeight()?a:b}):null}function f(a){return a.get$().position().top}var g,h,i=this;b.isHorizontal()?(h=Math.ceil(c/(this.columnWidth+this.gap)),g=b.isEast()?a.getColumn():a.getColumn()+a.getColumns()-h):(g=a.getColumn(),h=a.getColumns());var j,k;if(b.isVertical()){var l,n;if(k=1,b.isSouth())for(j=a.getRow(),l=e(j);(n=e(j+k))&&d>f(n)-f(l);)k++;else for(j=a.getRow()+a.getRows()-1,n=e(j);(l=e(j-1))&&d>f(n)-f(l)+n.getHeight()-l.getHeight();)j--,k++}else j=a.getRow(),k=a.getRows();return m.area(j,g,k,h)},m.prototype.setAreaHovered=function(a){a?this.each(function(b,c){c>=a.row-1&&c<=a.row-1+a.rows-1?b.setHovered(!0,a.column,a.column+a.columns-1):b.setHovered(!1)}):this.each(function(a){a.setHovered(!1)}),this.callbacks.onAreaHovered&&this.callbacks.onAreaHovered.call(this,a)},m.prototype.startResizing=function(a){this.callbacks.onResizingStarted&&this.callbacks.onResizingStarted.call(this,a)},m.prototype.stopResizing=function(a){this.callbacks.onResizingStopped&&this.callbacks.onResizingStopped.call(this,a)},m.prototype.adjustRows=function(a){ea.make(this,a.get())},m.prototype.getDroppables=function(){var a=[],b=this.gap;return this.each(function(c,d){var e=(c.isGuttered()?b:0)+G;c.each(function(b,c){a.push({droppable:b,row:d+1,column:c+1,marginBottom:e})})}),a},m.prototype.adjustSidebars=function(){var a=[];$.each(this.rows,function(b,c){var d=c.get$(),e=parseInt(d.css("marginTop")),f=d.position().top,g=d.outerHeight(!0);a[b]={top:f+e/2,middle:f+e+(g-e)/2}}),$.each(this.rows,function(b,c){var d=a[b],e=a[b+1];c.setRemoveButtonShown(!0),c.setInsertButtonShown(!0),c.setGutterButtonShown(!!e),e&&c.adjustGutterButton(e.top-E/2),0===b?(c.adjustInsertButton(0),c.adjustRemoveButton(e?(e.top-E/2)/2:d.middle)):(c.adjustInsertButton(d.top-E/2),c.adjustRemoveButton(d.middle-E/2))})},m.prototype.addRowBefore=function(a){var b=this.rows.indexOf(a);if(b>=0){var c=!0;b>0&&(c=this.rows[b-1].isGuttered());var d=this.createRow(c);this.rows[b].get$().before(d.get$()),this.rows.splice(b,0,d)}return b+1},m.prototype.addRow=function(){this.rows.length>0&&this.rows[this.rows.length-1].setGuttered(!0);var a=this.createRow(!0);return this.$template.append(a.get$()),this.rows.push(a),this.rows.length},m.prototype.removeRow=function(a){var b=this.rows.indexOf(a);return b>=0&&(this.rows[b].remove(),this.rows.splice(b,1)),b+1},m.prototype.setOnDrop=function(a){this.callbacks.onDrop=a},m.prototype.setOnAreaHovered=function(a){this.callbacks.onAreaHovered=a},m.prototype.setOnResizingStarted=function(a){this.callbacks.onResizingStarted=a},m.prototype.setOnResizingStopped=function(a){this.callbacks.onResizingStopped=a},n.get=function(a){return a.data("agn:row")},n.prototype.createDroppable=function(){var a=new o(this),b=this;return a.setOnHoverChange(function(a,c){if(b.callbacks.onHoverChange){var d=this,e=b.droppables.indexOf(d)+1;e>0&&b.callbacks.onHoverChange.call(b,d,a,e,c)}}),a.setOnDrop(function(a){if(b.callbacks.onDrop){var c=this,d=b.droppables.indexOf(c)+1;
d>0&&b.callbacks.onDrop.call(b,a,c,d)}}),a},n.prototype.get$=function(){return this.$row},n.prototype.each=function(a){this.droppables.forEach(a)},n.prototype.getDroppables=function(){return this.droppables.slice()},n.prototype.getDroppable=function(a){return this.droppables[a-1]||null},n.prototype.setHeight=function(a){a=a>0?Math.max(a,F):D,this.droppables.forEach(function(b){b.setHeight(a)})},n.prototype.isGuttered=function(){return this.$row.hasClass("guttered")},n.prototype.setGuttered=function(a){a?(this.$row.addClass("guttered"),da.setTooltip(this.$gutterButton,t("grid.gutter.hide"))):(this.$row.removeClass("guttered"),da.setTooltip(this.$gutterButton,t("grid.gutter.show")))},n.prototype.setHovered=function(a,b,c){void 0===b?this.droppables.forEach(function(b){b.setHovered(a)}):(void 0===c&&(c=b),this.droppables.forEach(function(d,e){var f=e+1;b<=f&&f<=c?d.setHovered(a):d.setHovered(!a)}))},n.prototype.remove=function(){this.droppables.forEach(function(a){a.remove()}),this.droppables=[],this.$row.remove(),da.removeTooltip(this.$gutterButton),this.$gutterButton.remove(),da.removeTooltip(this.$removeButton),this.$removeButton.remove(),da.removeTooltip(this.$insertButton),this.$insertButton.remove(),this.callbacks.onDrop=void 0},n.prototype.adjustGutterButton=function(a){this.$gutterButton.css("top",a)},n.prototype.setGutterButtonShown=function(a){da.setShown(this.$gutterButton,a)},n.prototype.adjustRemoveButton=function(a){this.$removeButton.css("top",a)},n.prototype.setRemoveButtonShown=function(a){da.setShown(this.$removeButton,a)},n.prototype.adjustInsertButton=function(a){this.$insertButton.css("top",a)},n.prototype.setInsertButtonShown=function(a){da.setShown(this.$insertButton,a)},n.prototype.setOnHoverChange=function(a){this.callbacks.onHoverChange=a},n.prototype.setOnDrop=function(a){this.callbacks.onDrop=a},o.get=function(a){return a.data("agn:droppable")},o.options=function(a){return{accept:"[data-building-block]",tolerance:"pointer",deactivate:function(){a.setHovered(!1),a.callbacks.onHoverChange&&a.callbacks.onHoverChange(!1)},drop:function(b,c){a.setHovered(!1),a.callbacks.onDrop&&a.callbacks.onDrop(e.get(c.draggable))},over:function(b,c){a.callbacks.onHoverChange?a.callbacks.onHoverChange(e.get(c.draggable),!0):a.setHovered(!0)},out:function(b,c){a.callbacks.onHoverChange?a.callbacks.onHoverChange(e.get(c.draggable),!1):a.setHovered(!1)}}},o.prototype.get$=function(){return this.$droppable},o.prototype.getCoordinates=function(){return this.$droppable.offset()},o.prototype.getRow=function(){return this.row},o.prototype.getHeight=function(){return da.getHeightAccurate(this.$droppable)},o.prototype.setHeight=function(a){this.$droppable.outerHeight(a)},o.prototype.setHovered=function(a){a?this.$droppable.addClass("container-hover-accept"):this.$droppable.removeClass("container-hover-accept")},o.prototype.setLayeringIndex=function(a){if(a>0)if(this.$rotationButton)this.$rotationButton.css("visibility",""),this.$rotationButton.find(".layer-number").text(a);else{var b=this;this.$rotationButton=r.dom("child-z-index-button",{index:a}),this.$rotationButton.on("click",function(){b.callbacks.onLayeringRotate&&b.callbacks.onLayeringRotate()}),this.$droppable.append(this.$rotationButton)}else this.$rotationButton&&this.$rotationButton.css("visibility","hidden")},o.prototype.remove=function(){this.$droppable.droppable("destroy"),this.$rotationButton&&(this.$rotationButton.remove(),this.$rotationButton=void 0),this.$droppable.remove(),this.callbacks.onDrop=void 0,this.callbacks.onHoverChange=void 0,this.callbacks.onLayeringRotate=void 0},o.prototype.setOnDrop=function(a){var b=this;this.callbacks.onDrop=function(c){a.call(b,c)}},o.prototype.setOnHoverChange=function(a){var b=this;this.callbacks.onHoverChange=function(c,d){a.call(b,c,d)}},o.prototype.setOnLayeringRotate=function(a){if(a){var b=this;this.callbacks.onLayeringRotate=function(){a.call(b)}}else this.callbacks.onLayeringRotate=void 0},p.get=function(a){var b=a.data("agn:child-dialog");return b?b:a.closest(".modal").data("agn:child-dialog")},p.create=function(a,b){var c=v.createFromTemplate(b,"div-editing-dialog");c.data("agn:child-dialog",new p(c,a,b))},p.prototype.updateImageSrc=function(a){var b=a.data("placeholder-id"),c=$.trim(a.val());this.updateImageSrcPreview(b,c)},p.prototype.updateImageSrcPreview=function(a,b){var c=$("#preview-"+a);c.attr("src")!==b&&c.attr("src",b||this.options.noPreviewImageLink)},p.prototype.updateImage=function(a){var b=a.data("placeholder-id"),c=a.prop("files"),d=$("#content-"+b);if(c&&c.length){var e=c[0];if("image"===e.type||e.type.match("image/.*")){var f=new FileReader,g=this;f.onload=function(a){g.updateImagePreview(b,a.target.result,e.name,e.name)},f.readAsDataURL(e)}else z.clearFormField(a),this.updateImagePreview(b)}else this.updateImagePreview(b);d.val("")},p.prototype.updateImagePreview=function(a,b,c,d){var e=$("#preview-"+a),f=$("#image-name-"+a);e.attr("src")!==b&&e.attr("src",b||this.options.noPreviewImageLink),e.attr("title",d||""),f.text(c||"")},p.prototype.chooseImage=function(a){var b=$("#file-"+a);b.val()?b.trigger("click"):this.showMediapoolDialog(a)},p.prototype.deleteImage=function(a){var b=$("#file-"+a),c=$("#image-name-"+a),d=$("#content-"+a),e=$("#preview-"+a);z.clearFormField(b),c.text(""),d.val(""),e.attr("src",this.options.noPreviewImageLink)},p.prototype.showMediapoolDialog=function(a){var b=this;w.request(this.options.urls.MEDIAPOOL_IMAGE_PICK).done(function(c){$("#content-"+a).val(c.id),$("#image-category-id-"+a).select2("val",c.categoryId),z.clearFormField($("#file-"+a)),b.updateImagePreview(a,c.src,c.name,c.title)})},p.prototype.validate=function(a){var b=this.validateImageCategories(a),c=this.validateImageFormats(a);return b&&c},p.prototype.validateImageCategories=function(a){var b=!0;return this.child.getPlaceholders(T).forEach(function(c){var d=c.id,e=$("#image-category-id-"+d).val();if(e<=0){var f=!!$("#file-"+d).val(),g=$("#content-"+d).val();(f||parseInt(g)>0)&&(b=!1,a.showFieldError("image-category-id-"+d,t("error.grid.noCategorySelected")))}}),b},p.prototype.validateImageFormats=function(a){function b(a){var b=a.match(/[^.\\\/]\.([^.\\\/]+)$/);if(b){var c=b[1].toUpperCase();return c in{GIF:1,JPG:1,JPEG:1,PNG:1}}return!1}var c=!0;return this.child.getPlaceholders(T).forEach(function(d){var e=d.id,f=$("#file-"+e).val();f&&!b(f)&&(c=!1,a.showFieldError("content-"+e,t("grid.divchild.format.error")))}),c},p.prototype.updateImagesCategories=function(){var a=this,b=$.Deferred(),c=[];if(this.child.getPlaceholders(T).forEach(function(a){var b=a.id,d=parseInt($("#content-"+b).val());d>0&&c.push({imageId:d,categoryId:$("#image-category-id-"+b).val()})}),c.length){var d={};c.forEach(function(a){d[a.imageId]=a.categoryId}),$.ajax(a.options.urls.MEDIAPOOL_SET_CATEGORIES,{type:"POST",dataType:"json",data:{categoryId:d}}).done(function(){b.resolve()}).fail(function(){b.reject()})}else b.resolve();return b.promise()},p.prototype.uploadImages=function(a){var b=this,c=$.Deferred(),d=[];if(this.child.getPlaceholders(T).forEach(function(a){var b=a.id,c=$("#file-"+b).prop("files");c&&c.length&&d.push({placeholderId:b,image:c[0],categoryId:$("#image-category-id-"+b).val()})}),d.length){var e=new FormData;d.forEach(function(a,b){e.append("images["+b+"].file",a.image),e.append("images["+b+"].title",a.image.name),e.append("images["+b+"].categoryId",a.categoryId)}),$.ajax(b.options.urls.MEDIAPOOL_IMAGE,{type:"POST",dataType:"json",accepts:["application/json"],enctype:"multipart/form-data",processData:!1,contentType:!1,data:e}).done(function(a){AGN.Lib.JsonMessages(a.popups),a.data&&a.data.forEach(function(a,b){if(a>0){var c=d[b].placeholderId;$("#content-"+c).val(a),z.clearFormField($("#file-"+c))}}),a.success===!0?c.resolve():c.reject()}).fail(function(){c.reject()})}else c.resolve();return c.promise()},p.prototype.save=function(a){var b=this;if(this.validate(a)){var c=this.$modal,d=this.child,e=this.$modal.find(".modal-body"),f=$("#child-save-button");e.addClass("ui-modal-loading"),e.scrollTop(0),f.prop("disabled",!0),this.updateImagesCategories(a).then(function(){return b.uploadImages(a)}).always(function(){e.removeClass("ui-modal-loading"),f.prop("disabled",!1)}).done(function(){var a={},b=d.getPlaceholders();c.find(".js-wysiwyg").each(function(){var a=$(this),b=a.attr("id");CKEDITOR.instances[b]&&CKEDITOR.instances[b].updateElement(),AGN.Lib.Editor.get(a).val(a.val()),window.removeEditor(b)}),b.forEach(function(b){var c=b.id;a[c]=$("#content-"+c).val()});var e=$("#child-title").val(),f=parseInt($("#target-group-id").val()),g=$("#is-toc-enabled").is(":checked"),h=$("#is-interest-sortable").is(":checked")?$("#interest-group").val():"";c.modal("hide"),q.saveChild(d,e,f,g,h,a)})}}}),AGN.Lib.Controller.new("grid-overview",function(){var a;this.addDomInitializer("grid-overview",function(b){a=this.config,b.all(".card[data-grid-id]").each(function(){var b,c=$(this),d=a.grids[parseInt(c.data("grid-id"))],e=[],f=165/90,g=1e3,h=g/f,i=d.columnWidth*g/d.templateWidth,j=d.gutter*g/d.templateWidth;c.find("svg").exists()||(c.find(".js-grid").append('<svg class="grid-preview" viewBox="0 0 '+g+" "+h+'"></svg>'),_.times(d.columnNum,function(a){e.push({type:"gutter",width:j/2}),e.push({type:"col",width:i}),e.push({type:"gutter",width:j/2})}),_.reduce(e,function(a,b){return b.xPos=a,a+b.width},0),b=d3.select(c.find("svg")[0]).selectAll("g").data(e).enter().append("g").attr("transform",function(a){return"translate("+a.xPos+",0)"}),b.append("rect").attr("class",function(a){return"grid-preview-"+a.type}).attr("width",function(a){return a.width}).attr("height",h))})}),this.addAction({click:"back"},function(){history.back()}),this.addAction({click:"pick"},function(){var b=a.grids[this.el.data("grid-id")];b&&$.ajax(b.viewLink,{method:"POST",data:{newTemplateName:a.newTemplateName}}).done(function(a){AGN.Lib.Page.render(a)})}),this.addAction({submission:"createNewGrid"},function(){var b=this.el,c=AGN.Lib.Form.get(b),d=b.find("#newGridName");$.ajax(a.urls.CHECK_NAME,{type:"POST",data:{name:d.val()}}).done(function(a){a.used?c.showFieldError("newGridName",t("fields.name.errors.name_in_use")):c.submit("static")})})}),AGN.Lib.Controller.new("grid-template",function(){function a(a,b){this.templateNameValidationUrl=b.templateNameValidationUrl,this.form=AGN.Lib.Form.get(a)}function b(){this.contentTypes={css:{inputSelector:'input[name="css"]',contentId:"#cssContents"},outerHtml:{inputSelector:'input[name="outerHtml"]',contentId:"#templateOuterHTML"},styles:{inputSelector:'input[name^="styles["]',getContentSelector:function(a){return'input[name="'+a+'"]'}}}}var c,d,e=new b;this.addDomInitializer("grid-template",function(){var b=this.config;d=this.el,c=new a(d,b)}),this.addAction({submission:"grid-template-validation"},function(){c.validateTemplateName(d.find("#newTemplateName"))}),this.addAction({click:"back"},function(){history.back()}),this.addAction({click:"delete"},function(){var a=this,b=a.el,c="";c="A"==b.prop("tagName")?b.prop("href"):b.data("url");var d=$.get(c);return d.done(function(a){var b,d=$(a);return b=d.filter(".modal").add(d.find(".modal")),1!=b.length?void AGN.Lib.Page.render(a,c):void AGN.Lib.Confirm.create(a).done(function(a){AGN.Lib.Page.render(a,c)})}),a.event.preventDefault(),!1}),a.prototype.validateTemplateName=function(a){var b=a.val(),c=this.form,d=this.templateNameValidationUrl;""==b?c.showFieldError("newTemplateName",t("fields.required.errors.missing")):$.ajax({type:"POST",url:d,data:{newTemplateName:b}}).done(function(a){0==a.newTemplateName?c.showFieldError("templateName",t("fields.name.errors.name_in_use")):c.submit("static")})},this.addAction({click:"update-preview"},function(){var a=this.el;e.updateInputValue(a.data("target-form"),a.data("content-type"))}),b.updateFields=function(a,b,c){var d=$("form").not("#"+c.attr("id"));_.each(d.find(a),function(a){var d=$(a),e=d.val();c.find(b(d.attr("name"))).val(e)})},b.updateField=function(a,b,c){c.find(a).val(b)},b.prototype.updateInputValue=function(a,c){var d=this.contentTypes[c],e=$(a);if("styles"==c&&d&&e)b.updateFields(d.inputSelector,d.getContentSelector,e);else if(d&&e){var f=$(d.contentId).val();b.updateField(d.inputSelector,f,e)}e.submit()}}),AGN.Lib.Controller.new("header-info",function(){var a=0;this.addDomInitializer("mailing-params",function(){var b=this.config;a=b.maxIndex}),this.addAction({click:"add-mailing-parameter"},function(){var a=$("#mailingParamsTable tr:last"),b=this.el.data("parameter-key"),c=_.template(AGN.Opt.Templates["header-info-mailing-param-row-new"],{key:++b});a.after(c);var d=a.find("#newMailingParameterBtn");d.after('<a href="#" class="btn btn-regular btn-alert" data-action="remove-mailing-parameter" id="removeMailingParameterBtn"> <i class="icon icon-trash-o"></i> </a>'),d.remove()}),this.addAction({click:"remove-mailing-parameter"},function(){var a=this.el.closest("tr");a.remove()})}),AGN.Lib.Controller.new("image-editor",function(){function a(a){e=a.x,f=a.y,g=a.w,h=a.h}function b(){var a=document.getElementById("editor-canvas"),b=a.toDataURL();$("#editor-img").attr("src",b)}function c(){var a=document.getElementById("editor-canvas"),b=a.toDataURL();$("#editorResult").attr("value",b);var c=a.width+$("#l-img-editor-tools").width()+10;$("#l-img-editor").css("min-width",c)}function d(){var a=$("#editor-canvas").data("Jcrop");"undefined"!=typeof a&&($("#editor-canvas").appendTo("#canvas-editor-area"),$("#editor-canvas").removeAttr("style"),a.destroy()),$("#editor-crop-btn").removeClass("btn-primary"),j=!1,g=0,h=0}var e,f,g=0,h=0,i=!1,j=!1;this.addDomInitializer("img-editor-init",function(){i=!1,j=!1}),this.addAction({click:"cropImage"},function(){b(),j?(d(),c(),j=!1):($("#editor-canvas").Jcrop({onChange:a,onSelect:a,bgOpacity:1}),$("#editor-crop-btn").addClass("btn-primary"),j=!0)}),this.addAction({click:"saveCrop"},function(){b();var a=document.getElementById("editor-canvas"),i=a.getContext("2d"),j=new Image;j.src=$("#editor-img").attr("src"),g>1&&h>1&&(j.onload=function(){a.width=g,a.height=h,i.save(),i.drawImage(j,e,f,g,h,0,0,g,h),i.restore();var b=a.toDataURL();$("#editor-img").attr("src",b),$("#editor-canvas").css("width",g),$("#editor-canvas").css("height",h),$("#l-editor-img-width").attr("value",g),$("#l-editor-img-height").attr("value",h),c(),d()})}),this.addAction({click:"rotateImage"},function(){d(),b();var a=document.getElementById("editor-canvas"),e=a.getContext("2d"),f=a.toDataURL(),g=new Image;g.src=f,$("#editor-img").attr("src",f),g.onload=function(){var b=a.width,d=a.height;a.width=d,a.height=b,b=a.width,d=a.height,e.save(),e.translate(b,d/b),e.rotate(Math.PI/2),e.drawImage(g,0,0),e.restore(),c()}}),this.addAction({input:"changeSize"},function(){d();var a=document.getElementById("editor-canvas"),b=a.getContext("2d"),e=new Image;e.src=$("#editor-img").attr("src"),e.onload=function(){var d=$("#l-editor-img-width").val(),f=$("#l-editor-img-height").val(),g=e.width,h=e.height;if(i)if($("#l-editor-img-width").is(":focus")){var j=d/g;f=Math.round(j*h),$("#l-editor-img-height").attr("value",f)}else if($("#l-editor-img-height").is(":focus")){var j=f/h;d=Math.round(j*g),$("#l-editor-img-width").attr("value",d)}a.width=d,a.height=f,b.save(),b.drawImage(e,0,0,d,f),b.restore(),c()}}),this.addAction({input:"pcChangeSize"},function(){d();var a=document.getElementById("editor-canvas"),b=a.getContext("2d"),e=new Image;e.src=$("#editor-img").attr("src"),e.onload=function(){var d=$("#l-editor-img-percent").val(),f=e.width,g=e.height,h=Math.round(f*(d/100)),i=Math.round(g*(d/100));$("#l-editor-img-height").attr("value",i),$("#l-editor-img-width").attr("value",h),a.width=h,a.height=i,b.save(),b.drawImage(e,0,0,h,i),b.restore(),c()}}),this.addAction({click:"blockSizes"},function(){i?(i=!1,$("#editor-lock-btn").removeClass("btn-primary")):(i=!0,$("#editor-lock-btn").addClass("btn-primary"))})}),AGN.Lib.Controller.new("import-profile",function(){this.addDomInitializer("new-recipients-action-select",function(){a(this.el.val()<=0)}),this.addAction({change:"new-recipients-action-select"},function(){a(this.el.val()<=0)});var a=function(a){$("#mailinglists").toggleClass("hidden",!a),$("#mailinglists-to-show").toggleClass("hidden",a)}}),AGN.Lib.Controller.new("logon-password-change",function(){this.addAction({click:"showPasswordChangeForm"},function(){$("#suggestion-view").addClass("hidden"),$("#submission-view").removeClass("hidden")})}),AGN.Lib.Controller.new("mailing-attachments",function(){var a,b,c,d=this;a=function(){$("#newAttachmentName").val(""),$("attachmentTargetID").prop("selectedIndex",0)},b=function(){var a=$("#newAttachment").val().match(/[^\\\/]+$/);$("#newAttachmentName").val(a)},c=function(){var a=$("#attachmentPdfFileID").find(":selected").attr("title");$("#newAttachmentName").val(a)},this.addAction({change:"use-pdf"},function(){d.runInitializer("AttachmentUsePdf")}),this.addAction({change:"update-filename"},function(){b()}),this.addAction({change:"update-pdf-filename"},function(){c(),a()}),this.addInitializer("AttachmentUsePdf",function(b){b||(b=$(document));var d=b.find('[data-action="use-pdf"]');d.prop("checked")?($("#attachmentPdfFileID").prop("disabled",!1),$("#newAttachment").prop("disabled",!0),c()):($("#attachmentPdfFileID").prop("disabled",!0),$("#newAttachment").prop("disabled",!1)),a()})}),AGN.Lib.Controller.new("mailing-content-controller",function(){var a,b,c,d,e=AGN.Lib.Confirm,f=AGN.Lib.Template;this.addDomInitializer("mailing-content-initializer",function(){d=$("#table_body"),b=f.prepare("mailing-content-table-entry-template"),c=this.config.saveUrl;var e=this.config.dynTagsMap,g=this.config.targetGroupList,i=this.config.interestGroupList,j=this.config.dynTagNames;a=new l(e,g,i,j),h()}),this.addAction({click:"createContentEditorModal"},function(){var b=a.getDynTagById(parseInt(this.el.data("dyn-name-id"))),d=a.isHtmlContentBlock(b.name),f=e.createFromTemplate({dynTag:b.clone(),targetGroups:_.cloneDeep(a.targetGroups),interestGroups:_.cloneDeep(a.interestGroups),saveUrl:_.cloneDeep(c),DynTagObject:m,isFullHtmlTags:"HTML-Version"==b.name,showHTMLEditor:d},"content-editor-template");f.done(function(b){a.setDynTag(b),i(b),g()})});var g=function(){var a=$("#preview");a.submit()},h=function(){a.dynTags.forEach(function(a){d.append(j(a))})},i=function(a){var b=j(a);d.find('[data-dyn-name-id="'+a.id+'"]').replaceWith(b)},j=function(a){var c=a.contentBlocks.map(function(a){return k(a)},[]),d=a.contentBlocks.map(function(a){return a.content.length>35?a.content.substring(0,35)+"...":a.content},[]);return b({id:a.id,name:a.name,targetGroups:c,contents:d})},k=function(b){var c=t("mailing.default.target_group_name");if(b.targetId>0){var d=a.getTargetGroupById(b.targetId),e=d.deleted?t("mailing.default.target_group_deleted"):d.id;c=d.targetName+" ("+e+")"}return c},l=function(a,b,c,d){this.dynTags=Object.entries(a).map(function(a){return new m(a[1])},[]),this.interestGroups=_.cloneDeep(c),this.interestGroups.unshift({column:"",shortname:t("mailing.default.interest_group_name")}),this.targetGroups=_.cloneDeep(b),this.targetGroups.unshift({id:0,targetName:t("mailing.default.target_group_name")}),this.targetGroupsMap=b.reduce(function(a,b){return a[b.id]=b,a},{}),this.dynTagNames=d,this.isHtmlContentBlock=function(a){return"undefined"!=typeof d&&null!=d&&null!=d.length&&d.length>0&&d.includes(a)},this.getDynTagById=function(a){var b=this.dynTags.filter(function(b){return b.id===a});return b[0]},this.setDynTag=function(a){var b=this.getDynTagById(a.id),c=this.dynTags.indexOf(b);c>-1&&(this.dynTags[c]=a.clone())},this.getTargetGroupById=function(a){return this.targetGroupsMap[a]||{id:0,targetName:t("mailing.default.target_group_name")}}},m=function(a){this.id=a.id||0,this.name=void 0===a.dynName?a.name:a.dynName,this.mailingId=void 0===a.mailingID?a.mailingId:a.mailingID,this.interestGroup=this.interestGroup||"",this.interestGroup=void 0===a.interestValue?a.interestGroup:a.dynInterestGroup,a.contentBlocks?this.contentBlocks=a.contentBlocks.map(function(a){return new n(a)}):this.contentBlocks=Object.entries(a.dynContent).map(function(a){return new n(a[1])}),this.contentBlocks.__proto__.swap=function(a,b){var c=this[a];return this[a]=this[b],this[b]=c,this};var b={id:0,index:0,targetId:0,content:""};this.getContentBlockByTargetId=function(a){var b=this.contentBlocks.filter(function(b){return b.targetId===a});return b[0]},this.getContentBlockById=function(a){var b=this.contentBlocks.filter(function(b){return b.uniqueId===a});return b[0]},this.createNewContentBlock=function(){var a=new n(b);return a.index=this.contentBlocks.length,this.contentBlocks.push(a),c(this.contentBlocks),a},this.moveUpContentBlock=function(a){var b=this.getContentBlockById(a);b.index>1&&(this.contentBlocks.swap(b.index-1,b.index-2),c(this.contentBlocks))},this.moveDownContentBlock=function(a){var b=this.getContentBlockById(a);b.index<this.contentBlocks.length&&(this.contentBlocks.swap(b.index-1,b.index),c(this.contentBlocks))},this.setFirstContentBlock=function(a){var b=this.getContentBlockById(a);if(b.index>1){var d=this.contentBlocks.splice(b.index-1,1);this.contentBlocks=d.concat(this.contentBlocks),c(this.contentBlocks)}},this.setLastContentBlock=function(a){var b=this.getContentBlockById(a);if(b.index<this.contentBlocks.length){var d=this.contentBlocks.splice(b.index-1,1);this.contentBlocks=this.contentBlocks.concat(d),c(this.contentBlocks)}},this.changeTargetGroup=function(a,b){var c=this.getContentBlockById(a);return c.targetId=b,c},this.changeInterestGroup=function(a){this.interestGroup=a},this.changeContent=function(a,b){var c=this.getContentBlockById(a);return c.content=b||"",c},this.changeOrder=function(a){var b=function(a){return function(b){return a.getContentBlockById(parseInt(b))}};this.contentBlocks=a.map(b(this)),c(this.contentBlocks)},this.remove=function(a){var b=this.getContentBlockById(a),d=this.contentBlocks.indexOf(b);d>-1&&(this.contentBlocks.splice(d,1),c(this.contentBlocks))},this.clone=function(){return new m(this)};var c=function(a){a.forEach(function(a,b){a.index=b+1})}},n=function(a){"undefined"==typeof n.uniqueIdCounter&&(n.uniqueIdCounter=0),this.uniqueId=++n.uniqueIdCounter,this.id=a.id,this.index=void 0===a.dynOrder?a.index:a.dynOrder,this.content=void 0===a.dynContent?a.content:a.dynContent,this.targetId=void 0===a.targetID?a.targetId:a.targetID}}),AGN.Lib.Controller.new("mailing-content-editor-controller",function(){var a,b,c,d,e,f,g,h,i,j,k,l=AGN.Lib.Modal,m=AGN.Lib.Confirm,n=AGN.Lib.Template,o=".mailingContentNamespace",p=".l-mailing-content-entry",q="content_entry_";this.addDomInitializer("mailing-content-editor-initializer",function(m){var o=l.get(m);if(a=o.dynTag,b=o.targetGroups,c=o.saveUrl,d=o.DynTagObject,e=o.showHTMLEditor,f=$("#content_area"),g=$("#ordered_area"),h=$("#target_groups"),i=$("#interest_groups"),j=$("#editable_area"),k=n.prepare("mailing-content-entry-template"),w(),v(),B(a),E(a.interestGroup),a.contentBlocks.length>0){var p=a.contentBlocks[0];O(p)}else P();D(),F()}),this.addAction({click:"selectContentEntry"},function(){var b=$(this.el),c=M(b),d=a.getContentBlockById(c);O(d)}),this.addAction({click:"deleteContentEntry"},function(){this.event.stopPropagation();var b=$(this.el).parent(),c=M(b),d=b.next(p);if(d=d.length>0?d:b.prev(p),a.remove(c),b.remove(),a.contentBlocks.length>0){var e=M(d),f=a.getContentBlockById(e);O(f)}else O(),Q()}),this.addAction({click:"createEnlargedContentEditorModal"},function(){A();var b=I();if(b){var c=a.getContentBlockById(b),d=m.createFromTemplate({content:c.content,selectedContentBlock:b,editorType:x(),isFullHtmlTags:"HTML-Version"==a.name,showHTMLEditor:e},"enlarged-content-editor-template");d.done(function(c){var d=a.changeContent(b,c.content);z(d.content),y(c.editorType)})}}),this.addAction({click:"addDynContent"},function(){P()}),this.addAction({click:"saveDynTag"},function(){if(A(),r()){var b=$(this.el);$.ajax({type:"POST",url:c,dataType:"json",contentType:"application/json",data:JSON.stringify(a),success:function(a){var c=m.get(b);AGN.Lib.JsonMessages(a.popups),a.success?(c.positive(new d(a.data)),N()):c.negative()}})}});var r=function(){var b=a.contentBlocks.map(function(a){return a.targetId}).filter(function(a,b,c){return c.indexOf(a,b+1)>-1},[]);if(b.length)return AGN.Lib.Messages(t("Error"),t("mailing.validation.target_group_duplicated"),"alert"),!1;var c=a.contentBlocks.filter(function(a){return 0===a.targetId},[]);return!(c.length!==a.contentBlocks.length&&c.length&&c[0].index<a.contentBlocks.length)||(AGN.Lib.Messages(t("Error"),t("mailing.validation.all_recipients_not_last"),"alert"),!1)},s=function(){var b=H(),c=b.prev(p);0!==c.length&&(b.insertBefore(c),a.moveUpContentBlock(M(b)))},u=function(){var b=H(),c=b.next(p);0!==c.length&&(b.insertAfter(c),a.moveDownContentBlock(M(b)))},v=function(){var a=27,b=38,c=40;$(document).off("keydown"+o),$(document).on("keydown"+o,function(d){switch(d.stopPropagation(),d.which){case a:N();break;case b:s();break;case c:u();break;default:return}})},w=function(){f.sortable({opacity:.4,delay:100,scroll:!0,scrollSensitivity:40,scrollSpeed:15,cursor:"move",items:p,helper:"clone",containment:g,appendTo:g,start:function(a,b){b.item.css("cursor","move")},stop:function(b,c){c.item.removeAttr("style");var d=$(b.target),e=d.sortable("toArray"),f=e.map(function(a){return a.replace(q,"")});a.changeOrder(f)}})},x=function(){var a=$("#tab-content-wysiwyg");if(a.is(":visible"))return"wysiwyg";var b=$("#contentEditor");return b.is(":visible")?"html":""},y=function(a){if(a&&""!==a){var b=$('[data-toggle-tab$="'+a+'"]');b&&b.click()}},z=function(a){var b=$("#tab-content-wysiwyg"),c=$("#contentEditor");if(b.is(":visible")){var d=CKEDITOR.instances.content;"ready"===d.status?d.setData(a):d.on("instanceReady",function(b){b.editor.setData(a)})}c.is(":visible")&&ace.edit("contentEditor").setValue(a)},A=function(){var b=I();if(b>0){var c,d=$("#tab-content-wysiwyg"),e=$("#contentEditor");if(d.is(":visible")){var f=CKEDITOR.instances.content;c=f.getData()}if(e.is(":visible")){var g=ace.edit("contentEditor");c=g.getValue()}void 0!==c&&a.changeContent(b,c)}},B=function(a){a.contentBlocks.forEach(function(a){var b=g.find(".l-stub"),c=K(a.targetId),d=k({name:c.targetName,id:q+a.uniqueId});b.before(d)})},C=function(a){h.val(a).trigger("change")},D=function(){h.off("change"+o),h.on("change"+o,function(b){var c=parseInt($(b.target).val()),d=I();if(d>0){var e=a.changeTargetGroup(d,c);G(e)}})},E=function(a){i.val(a).trigger("change")},F=function(){i.off("change"+o),i.on("change"+o,function(b){var c=$(b.target).val();a.changeInterestGroup(c)})},G=function(a){var b=L(a.uniqueId);if(b.length>0){var c=K(a.targetId);b.find(".l-name").children().text(c.targetName)}},H=function(){return g.find(p+".selected")},I=function(){var a=H();if(a.length>0)return M(a)},J=function(a){g.children().removeClass("selected");var b=L(a,g);b.addClass("selected")},K=function(a){var c=b.filter(function(b){return b.id===a});return c[0]},L=function(a,b){return b=b?b:$(document),b.find("#"+q+a)},M=function(a){return parseInt(a.attr("id").replace(q,""))},N=function(){$(".modal").modal("toggle")},O=function(a){A(),void 0!==a?(J(a.uniqueId),z(a.content),C(a.targetId)):(z(""),C(0))},P=function(){var b=g.find(".l-stub"),c=a.createNewContentBlock(),d=K(c.targetId),e=k({name:d.targetName,id:q+c.uniqueId});b.before(e),R(),O(c)},Q=function(){j.is(":visible")&&j.hide()},R=function(){j.is(":hidden")&&j.show()}}),AGN.Lib.Controller.new("mailing-predelivery",function(){this.addAction({change:"adjustSpamProvider"},function(){var a;a="aol"==this.el.attr("name")?"aolonelinespam":this.el.attr("name")+"spam",this.el.prop("checked")?$('[name="'+a+'"]').prop("disabled",!1):($('[name="'+a+'"]').prop("disabled",!0),$('[name="'+a+'"]').prop("checked",!1))}),this.addAction({click:"toggleCheckboxesOn"},function(){this.el.parents(".list-group").find('input[type="checkbox"]').prop("checked",!0).trigger("change")}),this.addAction({click:"toggleCheckboxesOff"},function(){this.el.parents(".list-group").find('input[type="checkbox"]').prop("checked",!1).trigger("change")}),this.addInitializer("readjustSpamProviders",function(){var a={aol:"aolonelinespam",yahoo:"yahoospam",gmailnew:"gmailnewspam",ol2003:"ol2003spam"};_.each(a,function(a,b){var c=$("[name="+b+"]");0!=c.length&&(c.prop("checked")?$('[name="'+a+'"]').prop("disabled",!1):($('[name="'+a+'"]').prop("disabled",!0),$('[name="'+a+'"]').prop("checked",!1)))})})}),AGN.Lib.Controller.new("mailing-preview",function(){function a(){var a=!1;$("[data-stored-field]").each(function(){"previewCustomerATID"!==$(this).attr("name")&&"previewCustomerEmail"!==$(this).attr("name")&&AGN.Lib.Storage.restoreChosenFields($(this))&&(a=!0)}),a?(AGN.Lib.Storage.restoreChosenFields($("[name='previewCustomerATID']")),AGN.Lib.Storage.restoreChosenFields($("[name='previewCustomerEmail']"))):1==$("#preview_customer_Email").prop("checked")?(AGN.Lib.Storage.restoreChosenFields($("[name='previewCustomerEmail']"))&&(a=!0),AGN.Lib.Storage.restoreChosenFields($("[name='previewCustomerATID']"))):1==$("#preview_customer_ATID").prop("checked")&&(AGN.Lib.Storage.restoreChosenFields($("[name='previewCustomerATID']"))&&(a=!0),AGN.Lib.Storage.restoreChosenFields($("[name='previewCustomerEmail']"))),a&&$("#preview").submit()}this.addInitializer("MailingPreview",function(b){b||(b=$(document)),a(),$("[data-stored-field]").change(function(){AGN.Lib.Storage.saveChosenFields($(this))})})}),AGN.Lib.Controller.new("mailing-priorities",function(){function a(){var a=1;l.children(".l-mailing-entry").each(function(){$(this).find(".l-badge .badge").text(a++)})}function b(a){var b=[];return l.children(".l-mailing-entry").each(function(){var a=$(this).data("id");a>0&&b.push(a)}),a?b.join(a):b}function c(){var a=0;return l.children(".l-mailing-entry").each(function(){$(this).data("id")>0&&a++}),a}function d(a){var d=b(";"),e=k.val();if(null==o&&null==p||a)if(o=d,p=e,e>0)j.prop("disabled",!0);else{var f=c();k.val(f),j.prop("disabled",!f)}else j.prop("disabled",d==o&&e==p)}function e(){l.find(".l-mailing-entry").remove(),m.find(".l-mailing-entry").remove()}function f(a,b){var c=a.match(/^(\d{4})\-(\d{2})\-(\d{2})$/);return c?[parseInt(c[1]),parseInt(c[2])-1,parseInt(c[3])]:1==arguments.length?null:b}function g(a){return s.pad(a[0],4)+"-"+s.pad(parseInt(a[1])+1,2)+"-"+s.pad(a[2],2)}function h(){return _.reduce(_.keys(n),function(a,b){return a<b?a:b})}function i(a){var b=n[a]||n[h()];if(e(),b&&b.length){var c=l.find(".l-stub"),f=m.find(".l-stub");b.forEach(function(a){var b=q(a);a.priority?c.before(b):f.before(b)})}d(!0)}var j,k,l,m,n,o,p,q,r=AGN.Lib.Template,s=AGN.Lib.Helpers;this.addDomInitializer("mailing-priorities",function(){var b,c,e=$(".l-content-area");j=$("#save-button"),k=$("#priorityCount"),l=$("#ordered-area"),m=$("#unordered-area"),b=l.parent(),c=m.parent(),n=this.config.mailingsMap,q=r.prepare("draggable-mailing-entry"),l.sortable({opacity:.4,connectWith:"#unordered-area",items:".l-mailing-entry",helper:"clone",containment:e,appendTo:e,update:function(){a(),d()},out:function(){b.removeClass("highlight")},over:function(){c.removeClass("highlight"),b.addClass("highlight")},start:function(){b.addClass("highlight")},stop:function(){b.removeClass("highlight")}}),m.sortable({opacity:.4,connectWith:"#ordered-area",items:".l-mailing-entry",helper:"clone",containment:e,appendTo:e,out:function(){c.removeClass("highlight")},over:function(){b.removeClass("highlight"),c.addClass("highlight")},start:function(){c.addClass("highlight")},stop:function(){c.removeClass("highlight")}});var g=$("#date-picker"),i=_.keys(n);if(i.length){var o=[!0];i.forEach(function(a){var b=f(a);b&&o.push(b)}),g.pickadate(_.merge({editable:!0,disable:o,klass:{input:"picker__input js-datepicker",holder:"datepicker__holder picker__holder datepicker__holder-right"}},s.objFromString(g.data("datepicker-options"))));var p=g.pickadate("picker");p.get("select")||p.set("select",f(h()))}else g.pickadate({editable:!1});g.trigger("change");
}),this.addAction({click:"back"},function(){window.history.back()}),this.addAction({click:"save"},function(){var a=AGN.Lib.Form.get(this.el);a.setValueOnce("prioritizedIds",b()),a.submit()}),this.addAction({change:"priorityCount"},function(){d()}),this.addAction({change:"change-date"},function(){var a=this.el.pickadate("picker").get("select");a?i(g([a.year,a.month,a.date])):i()})}),AGN.Lib.Controller.new("mailing-send",function(){var a=AGN.Lib.Form,b=AGN.Lib.Modal,c=AGN.Lib.Confirm,d=AGN.Lib.Page,e=AGN.Lib.Template,f=AGN.Lib.Tooltip,g=-1,h={disableSendButtons:function(){$("#test-send-controls-group").hide()},enableSendButtons:function(){$("#test-send-controls-group").show()}};this.addAction({click:"configure-delivery-mailing-size-warning"},function(){var a=this.el;c.createFromTemplate({},"warning-mailing-size-modal").done(function(){a.prop("disabled",!0),d.reload(a.data("url"))})}),this.addAction({click:"configure-delivery-mailing-size-error"},function(){b.createFromTemplate({},"error-mailing-size-modal")}),this.addAction({click:"configure-delivery"},function(){this.el.prop("disabled",!0),d.reload(this.el.data("url"))}),this.addAction({click:"start-delivery"},function(){var b=this.el.data("action-value"),c=a.get(this.el);if($("#adminTargetGroupSelect").val()==g){var d=!0;if($('input[name="mailingTestRecipients"]').each(function(){var a=$(this).val();a&&a.trim()&&(d=!1)}),d)return void AGN.Lib.Messages(t("defaults.error"),t("error.enterEmailAddresses"),"alert")}h.disableSendButtons(),c.setValue("action",b),c.submit()}),this.addAction({click:"check-links"},function(){var b=this.el.data("action-value"),c=a.get(this.el);h.disableSendButtons(),c.setValue("action",b),c.submit()}),this.addAction({click:"recipients-row-remove"},function(){var b,c,d=this.el.closest("tr"),e=$('[name="statusmailRecipients"]');d.remove(),c=$('[name^="statusmailRecipient_"]'),b=_.map(c,function(a){return $(a).val()}),e.val(b.join(" ")),a.get(this.el).submit()}),this.addAction({click:"recipients-row-add",keydown:"recipients-row-field"},function(){if("keydown"!=this.event.type||13==this.event.keyCode){var b,c=$("#newStatusMail"),d=$('[name^="statusmailRecipient_"]'),e=$('[name="statusmailRecipients"]');b=_.map(d,function(a){return $(a).val()}),b.push(c.val()),e.val(b.join(" ")),a.get(this.el).submit().done(function(){$("#newStatusMail").focus()})}}),this.addInitializer("statusmailRecipients",function(a){var b,c=$('[name="statusmailRecipients"]'),d=$("#statusEmailContainer");$(".js-recipients-row").remove(),""!=c.val()&&(b=c.val()||"",b=b.split(" "),_.each(b,function(a){""!=a&&d.prepend(e.text("recipients-row",{email:a}))}))}),this.addDomInitializer("transmission-status",function(){this.config.isRunning?h.disableSendButtons():h.enableSendButtons()}),this.addAction({click:"add-test-recipient",enterdown:"new-test-recipient"},function(){this.event.preventDefault();var a=this.el.closest("tr"),b=this.el.is("input")?this.el:a.find("input"),c=e.dom("test-recipient-row",{value:b.val()||""});a.before(c),b.val(""),AGN.runAll(c),b.focus()}),this.addAction({enterdown:"edit-test-recipient"},function(){this.event.preventDefault()}),this.addAction({click:"remove-test-recipient"},function(){var a=this.el.closest("tr");f.remove(a.all("[data-tooltip]")),a.remove()}),this.addAction({change:"admin-target-group"},function(){var a=this.el.val()==g;$("#test-recipients-table").toggleClass("hidden",!a),$("#adminSendButton").toggleClass("hidden",a)}),this.addAction({change:"prioritization-toggle"},function(){function a(){b.prop("checked",!c),AGN.Lib.Messages(t("defaults.error"),t("defaults.error"),"alert")}var b=this.el,c=b.prop("checked");b.prop("disabled",!0),$.ajax({type:"POST",url:b.data("url"),data:{isPrioritizationDisallowed:b.is(":checked")}}).done(function(b){b&&b.success?AGN.Lib.Messages(t("defaults.success"),t("defaults.saved"),"success"):a()}).fail(a).always(function(){b.prop("disabled",!1)})})}),AGN.Lib.Controller.new("mailing-styles",function(){function a(){var a=$("form#mailingGridForm"),b=$("form#mailingPreviewForm"),c=a.find('input[name^="styles."]');$.each(c,function(a,c){var d=$(c),e="styles["+d.attr("name").split(".")[1]+"]",f=b.find('input[name="'+e+'"]');f.val(d.val())}),b.submit()}this.addAction({submission:"updatePreview"},function(){a()}),this.addAction({click:"updateMailingPreview"},function(){a()}),this.addAction({click:"saveMailingStyles"},function(){$("form#mailingGridForm").submit()})}),AGN.Lib.Controller.new("mailing-view-base",function(){function a(a){var b={};return a.forEach(function(a){var c=$(a);if(c.exists()&&!c.prop("disabled")){var d=c.prop("name"),e=c.val();d&&(b[d]=e)}}),b}function b(a){var b=a.closest(".tile");return b.exists()?b.position().top:a.position().top}var c,d=AGN.Lib.Form,e=AGN.Lib.Tooltip,f=!1,g=[];this.addDomInitializer("mailing-view-base",function(){c=this.config,this.config.scrollTop>0&&$("#gt-wrapper").animate({scrollTop:c.scrollTop},50),g=$("#targetGroupIds").val()||[],$("#targetModeCheck").closest(".form-group").toggle(g.length>1)}),this.addAction({change:"selectTargetGroups"},function(){var a=this.el.val()||[],b=$("#targetModeCheck"),c=b.closest(".form-group");a.length>1&&g.length<=1&&b.prop("checked",!0),c.toggle(a.length>1),g=a}),this.addAction({click:"calculateRecipients"},function(){var b=$("#calculatedRecipientsBadge"),d=["#settingsGeneralMailingList","#settingsTargetgroupsListSplit","#settingsTargetgroupsListSplitPart","#lightWeightMailingList","#assignTargetGroups","#targetGroupIds","#followUpType"];c&&$.ajax(c.urls.MAILINGBASE,{type:"POST",traditional:!0,data:$.extend(a(d),{action:c.actions.ACTION_RECIPIENTS_CALCULATE,mailingID:c.mailingId,changeMailing:f,targetMode:$("#targetModeCheck").prop("checked")?c.TARGET_MODE_AND:c.TARGET_MODE_OR})}).always(function(a){a&&a.success===!0?b.text(a.count):(b.text("?"),AGN.Lib.Messages(t("defaults.error"),t("defaults.error"),"alert"))})}),this.addAction({change:"change-mailing-settings"},function(){f=!0}),this.addAction({click:"deleteMailingParameter"},function(){var a=d.get(this.el),c=b(this.el),f=this.el.closest("tr");e.remove(f.all("[data-tooltip]")),f.remove(),a.setValueOnce("scrollTop",Math.round(c)),a.submit()}),this.addAction({click:"createMailingParameter"},function(){var a=d.get(this.el),c=b(this.el);a.setValueOnce("addParameter",!0),a.setValueOnce("scrollTop",Math.round(c)),a.submit()})}),AGN.Lib.Controller.new("mailinglist-list",function(){function a(){var a=$(".js-data-table-body");if(a.exists()){var b=a.data("_table");if(b&&b.api)return b.api}return null}function b(a){var b=$.Deferred();if(a&&a.length){var d=$.ajax(c.urls.MAILINGLIST_BULK_DELETE,{method:"POST",traditional:!0,data:{bulkIds:a}}).fail(function(){b.reject()});AGN.Lib.Confirm.request(d).then(b.resolve,b.reject)}else b.reject(),AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert");return b.promise()}var c=null;this.addDomInitializer("mailinglist-list",function(){c=this.config}),this.addAction({click:"bulk-delete"},function(){var c=a();if(c){var d=c.getSelectedRows(),e=d.map(function(a){return a.id});b(e).done(function(){c.updateRowData({remove:d})})}})}),AGN.Lib.Controller.new("mediapool-overview",function(){function a(a){var b=f.dom("modal-replace-image",a);return b.find("form").data("selected-file",a.file),a.preview&&b.find("#replacement-preview").prop("src",a.preview),g.create(b)}function b(a,b){a.all("input, textarea, select, button").prop("disabled",!b)}var c,d,e=AGN.Lib.Helpers,f=AGN.Lib.Template,g=AGN.Lib.Confirm,h=AGN.Lib.Form,i=AGN.Lib.Page;this.addDomInitializer("mediapool-overview",function(){c={},this.config.imagesList.forEach(function(a){c[a.id]=a})}),this.addAction({click:"replace-image"},function(){var a=this.el.data("image-id");if(d=c[a]){var b=$("#replacement-image");e.clearFormField(b),b.trigger("click")}}),this.addAction({change:"replacement-image"},function(){var b=this.el,c=b.prop("files");if(c&&c.length&&d){var e=new FileReader,f=c[0];e.onload=function(b){d&&a({image:d,file:f,preview:b.target.result})},e.readAsDataURL(f)}}),this.addAction({submission:"submit-image-replace"},function(){var a=this.el,c=h.get(a),d=new FormData;$.each(c.data(),function(a,b){d.append(a,b)}),d.append("file",this.el.data("selected-file")),b(a,!1),$.ajax(c.getAction(),{type:"POST",dataType:"html",enctype:"multipart/form-data",processData:!1,contentType:!1,data:d}).always(function(){b(a,!0)}).done(function(a){i.render(a,!1)})})}),function(){function a(a){var b=["x"],c=[],d=[],e=[];for(var f in a){var g=a[f];for(var h in g){0==f&&"time"!=h&&(0==c.length?c.push(h):0==d.length?d.push(h):0==e.length&&e.push(h));var j=g[h];"time"==h?b.push(j):h==c[0]?c.push(j):h==d[0]?d.push(j):h==e[0]&&e.push(j)}}c3.generate(i.data.globalProgressChartData.build(b,c,d,e)),AGN.Initializers.Equalizer()}function b(a){var b=a.val();"STATUS"===b&&AGN.Lib.DomInitializer.try("messenger-global-status-stat"),"TYPE"===b&&AGN.Lib.DomInitializer.try("messenger-global-type-stat"),"PROGRESS"===b&&AGN.Lib.DomInitializer.try("messenger-global-week-progress-stat")}function c(a,b,c,e){var f,g,h,i=$("#typeStatistics"),j=$("#statusStatistics"),k=$("#progressStatistics"),l=$("#dateSelectMode");a?i.show():i.hide(),b?j.show():j.hide(),c?k.show():k.hide(),c?l.show():l.hide(),e&&(f="week"===e,g="month"===e,h="period"===e),d(f,g,h)}function d(a,b,c){a&&($("#weekProgressStat").addClass("active"),$("#monthProgressStat").removeClass("active"),$("#periodProgressStat").removeClass("active"),$("#weekTab").show(),$("#monthTab").hide(),$("#periodTab").hide()),b&&($("#weekProgressStat").removeClass("active"),$("#monthProgressStat").addClass("active"),$("#periodProgressStat").removeClass("active"),$("#weekTab").hide(),$("#monthTab").show(),$("#periodTab").hide()),c&&($("#weekProgressStat").removeClass("active"),$("#monthProgressStat").removeClass("active"),$("#periodProgressStat").addClass("active"),$("#weekTab").hide(),$("#monthTab").hide(),$("#periodTab").show())}function e(a,b){var c=AGN.Lib.Helpers.objFromString(a.data("config"));c&&c.url&&b.updateChart(c.url)}function f(a,b,c){var d=$("#selectMonth").val(),e=$("#selectYear").val(),f=$("#startDay").val(),g=$("#endDay").val();c.month=d,c.year=e,c.start=f,c.end=g;var h=AGN.Lib.Helpers.objFromString(a.data("config"));h&&h.url&&b.updateChart(h.url,c)}var g={data:{chartsColors:["#0071b9","#009999","#92d050","#41641a","#ffc000"],browserChartData:{c3data:{bindto:"#typeStatistics",data:{rows:[],type:"donut"},donut:{label:{show:!0}},legend:{position:"right"},tooltip:{show:!1}},build:function(a,b){this.c3data.data.rows=[a,b];for(var c={},d=0;d<a.length;d++)c[a[d]]=g.data.chartsColors[d];return this.c3data.data.colors=c,this.c3data}}},roundTo:function(a,b){return 1*parseFloat(a).toFixed(b)},updateChart:function(a){$.ajax({type:"GET",url:a,success:function(a){var b=[],c=[],d=0;for(var e in a){var f=g.roundTo(100*a[e],1);b.push(e),c.push(f),d+=f}if(!isNaN(d)&&d>0)for(var h=0;h<c.length;h++)b[h]+=" "+g.roundTo(100*c[h]/d,1)+"%";c3.generate(g.data.browserChartData.build(b,c)),AGN.Initializers.Equalizer()}})}},h={data:{chartsColors:["#0071b9","#92D050"],statusChartData:{columnTitles:[],c3data:{bindto:"#statusStatistics",data:{columns:[],type:"bar",labels:!0,color:function(a,b){return h.data.chartsColors[b.index]}},axis:{x:{tick:{centered:!0,fit:!0,format:function(a){return h.data.statusChartData.columnTitles[a]}}},y:{show:!1}},legend:{show:!1},tooltip:{format:{title:function(){return null},name:function(a,b,c,d){return h.data.statusChartData.columnTitles[d]},value:function(a,b,c,d){return a}}},padding:{right:25,left:25}},build:function(a,b){this.columnTitles=a;var c=b.slice(0);return c.unshift("values"),this.c3data.data.columns=[c],this.c3data}}},updateChart:function(a){$.ajax({type:"GET",url:a,success:function(a){var b=[],c=[];for(var d in a)b.push(d),c.push(a[d]);c3.generate(h.data.statusChartData.build(b,c)),AGN.Initializers.Equalizer()}})}},i={data:{chartColors:["#0071b9","#006600","#b30000"],globalProgressChartData:{columnTitles:[],c3data:{bindto:"#progressStatistics",data:{x:"x",columns:[]},axis:{x:{type:"category",tick:{centered:!0,fit:!1}}},padding:{right:25}},build:function(a,b,c,d){this.c3data.data.columns=[a,b,c,d];var e={};return e[b[0]]=i.data.chartColors[0],e[c[0]]=i.data.chartColors[1],e[d[0]]=i.data.chartColors[2],this.c3data.data.colors=e,this.c3data}}},updateChart:function(b,c){i.data.globalProgressChartData.c3data.bindto=c.bindto,$.ajax({type:c.requestType,url:b,data:{month:c.month,year:c.year,start:c.start,end:c.end},success:a})}};AGN.Lib.Controller.new("messenger-global-statistics",function(){this.addDomInitializer("messenger-global-type-stat",function(a){e(a,g),c(!0,!1,!1)}),this.addDomInitializer("messenger-global-status-stat",function(a){e(a,h),c(!1,!0,!1)}),this.addDomInitializer("messenger-global-week-progress-stat",function(a){f(a,i,{bindto:"#weekProgressStatistics",requestType:"GET"}),c(!1,!1,!0,"week")}),this.addDomInitializer("messenger-global-month-progress-stat",function(a){f(a,i,{bindto:"#monthProgressStatistics",requestType:"POST"}),c(!1,!1,!0,"month")}),this.addDomInitializer("messenger-global-period-progress-stat",function(a){f(a,i,{bindto:"#periodProgressStatistics",requestType:"POST"}),c(!1,!1,!0,"period")}),this.addAction({change:"choose-stats"},function(){b(this.el)}),this.addAction({change:"month-statistic"},function(){AGN.Lib.DomInitializer.try("messenger-global-month-progress-stat")}),this.addAction({change:"period-statistic"},function(){AGN.Lib.DomInitializer.try("messenger-global-period-progress-stat")}),this.addAction({click:"choose-week"},function(){AGN.Lib.DomInitializer.try("messenger-global-week-progress-stat")}),this.addAction({click:"choose-month"},function(){AGN.Lib.DomInitializer.try("messenger-global-month-progress-stat")}),this.addAction({click:"choose-period"},function(){AGN.Lib.DomInitializer.try("messenger-global-period-progress-stat")})})}(),AGN.Lib.Controller.new("messenger-message-stat",function(){this.addAction({change:"statistic-date-change"},function(){var a=$("#startDate").val(),b=$("#endDate").val();$("#startDate").pickadate("picker").set("max",b),$("#endDate").pickadate("picker").set("min",a),AGN.Lib.DomInitializer.try("message-stat")})}),AGN.Lib.Controller.new("messenger-settings",function(){function a(a){null==a&&(a=$("#messageContent").val().length),$("#contentSize").text(t("fields.content.charactersEntered",a))}function b(a){return!!a&&("image"==a||a.startsWith("image/"))}function c(){var a=$.Deferred();if($("#typeBinary").is(":checked")){var c=$("#file").prop("files");if(c&&c.length){var f=c[0];if(b(f.type)){var g=new FileReader;g.onload=function(b){AGN.Lib.Loader.hide(),a.resolve({type:"image"},b.target.result)},g.onerror=g.onabort=function(){AGN.Lib.Loader.hide()},AGN.Lib.Loader.show(),g.readAsDataURL(f)}else a.resolve({type:"custom",name:f.name,size:AGN.Lib.Helpers.formatBytes(f.size,"IEC"),ext:d(f.name).toUpperCase()})}else e&&e.size>0?b(e.mime)?a.resolve({type:"image"},e.attachmentLink):a.resolve({type:"custom",name:e.filename,size:AGN.Lib.Helpers.formatBytes(e.size,"IEC"),ext:(e.extension||"").toUpperCase()}):a.resolve(!1)}else if($("#typeUrl").is(":checked")){var h=$.trim($("#url").val());h?a.resolve({type:"image"},h):a.resolve(!1)}else a.resolve(!1);return a.promise()}function d(a){if(a){var b=a.lastIndexOf(".");if(b>=0){var c=a.substring(b+1,a.length);return c.length>5?c.substr(0,3)+"‚Ä¶":c}}return""}var e=null;this.addDomInitializer("messenger-settings",function(){a();var b=$("#messageContent"),c=b.data("emojioneArea");c?c.on("change paste keydown keyup",_.throttle(function(){a(this.getText().length)},100)):b.on("change paste keydown keyup",_.throttle(function(){a()},100)),e=this.config.attachment}),this.addAction({click:"preview"},function(){c().done(function(a,b){var c=$("#messageContent").val(),d=new Date,e=AGN.Lib.Helpers.pad(d.getHours(),2)+":"+AGN.Lib.Helpers.pad(d.getMinutes(),2);if(c&&$.trim(c)||a){var f=AGN.Lib.Modal.createFromTemplate({content:c,time:e,attachment:a},"preview-modal");a&&"image"==a.type&&b&&f.find("#attachment-image").prop("src",b)}else AGN.Lib.Messages(t("defaults.warning"),t("error.content.empty"),"warning")})})}),AGN.Lib.Controller.new("news-editor",function(){function a(a,b,c){if(""!=a){var e=h.dom("news-content-template-row",{lang:a,index:j,title:b,content:c});0==$("#news-content-editor > .l-news-content-block").length&&$("#news-content-editor").append('<div class="tile-separator"></div>'),e.appendTo("#news-content-editor"),AGN.runAll(e),d(),j++}}function b(){var a=f(),b=$("#news-content-editor > .l-news-content-block").last().find("input[name='index']").val();i.length==a.length?$("#add-news-"+b).hide():$("#add-news-"+b).show()}function c(){var a=$("#news-content-editor > .l-news-content-block");$("button[id^='add-news-']").hide();var b=$(a).first().find("input[name='index']").val();1==a.length?$("#delete-news-"+b).hide():$("#delete-news-"+b).show()}function d(){var a=e();$("#news-content-editor > .l-news-content-block").find("select.news-language").each(function(){$("option",this).not(":selected").remove();var b=$(this);$.each(a,function(a,c){$(b).append($("<option>",{value:c,text:c}))})})}function e(){var a=[],b=f();return $.each(i,function(c,d){$.inArray(d,b)==-1&&a.push(d)}),a}function f(){var a=$("#news-content-editor > .l-news-content-block").find("select.news-language").find("option:selected");return a.map(function(){return $(this).val()}).toArray()}function g(){var a=f(),b="";return 0==a.length?b=i[0]:$.each(i,function(c,d){if(a.indexOf(d)<0)return b=d,!1}),b}var h=AGN.Lib.Template,i=["de","en"],j=0;this.addDomInitializer("news-editor-init",function(){var d=$('input[name="newsId"]').val(),e=$(".existent-news");e&&e.length>0&&0==d?$(e).each(function(){var d=$(this).find(".existent-news-language").val(),e=$(this).find(".existent-news-title").val(),f=$(this).find(".existent-news-content").val();a(d,e,f),c(),b(),$(this).remove()}):0==d&&(a(g(),"",""),c(),b())}),this.addAction({click:"addNewsContent"},function(){a(g(),"",""),c(),b()}),this.addAction({click:"removeNewsContent"},function(){var a=$(this.el).closest(".l-news-content-block");$(a).remove(),c(),b(),d()}),this.addAction({change:"changeLanguage"},function(){d()})}),AGN.Lib.Controller.new("notification-global-stat",function(){function a(a,b){$("#month-progress-stat").hide(),$("#daterange-progress-stat").hide(),a&&$("#month-progress-stat").show(),b&&$("#daterange-progress-stat").show()}function b(a,b,c){$("#weekProgressStat").removeClass("active"),$("#monthProgressStat").removeClass("active"),$("#dateRangeProgressStat").removeClass("active"),a&&$("#weekProgressStat").addClass("active"),b&&$("#monthProgressStat").addClass("active"),c&&$("#dateRangeProgressStat").addClass("active")}function c(a,b,c){$("#notificationGlobalStatusStat").hide(),$("#notificationGlobalBrowserStat").hide(),$("#notificationGlobalProgressStat").hide(),a&&(AGN.Lib.DomInitializer.try("notification-global-progress-stat"),$("#notificationGlobalProgressStat").show(),$("#dateSelectMode").show(),$("#dateModeControls").show()),b&&(AGN.Lib.DomInitializer.try("notification-global-status-stat"),$("#notificationGlobalStatusStat").show(),$("#dateSelectMode").hide(),$("#dateModeControls").hide()),c&&(AGN.Lib.DomInitializer.try("notification-global-browser-stat"),$("#notificationGlobalBrowserStat").show(),$("#dateSelectMode").hide(),$("#dateModeControls").hide())}function d(){$("#notifications-container").hide(),e()&&("active"!=$("#monthProgressStat").attr("class")&&"active"!=$("#dateRangeProgressStat").attr("class")||AGN.Lib.DomInitializer.try("notification-global-progress-stat"))}function e(){if("active"==$("#dateRangeProgressStat").attr("class")){var a=$("#startDay").val(),b=$("#endDay").val();if(f(a)||f(b))return $("#notifications-container").show(),setTimeout(function(){$("#notifications-container").fadeOut("slow")},7e3),!1;if(new Date(a).getTime()>new Date(b).getTime())return $("#notifications-container").show(),setTimeout(function(){$("#notifications-container").fadeOut("slow")},7e3),!1}return!0}function f(a){return"undefined"==typeof a||""==a}this.addAction({change:"selectReportType"},function(){var a=$("#globalStatInfo");switch(this.el.val()){case"STATUS":c(!1,!0,!1),a.show();break;case"BROWSER":c(!1,!1,!0),a.hide();break;case"PROGRESS":c(!0,!1,!1),a.show()}}),this.addAction({click:"close"},function(){$("#notifications-container").fadeOut("slow")}),this.addAction({click:"refreshStat"},function(){d()}),this.addAction({change:"select-month"},function(){d()}),this.addAction({change:"select-year"},function(){d()}),this.addAction({click:"weekProgressStat"},function(){$("#selectMode").val("WEEK"),a(!1,!1),d(),b(!0,!1,!1)}),this.addAction({click:"monthProgressStat"},function(){$("#selectMode").val("MONTH"),a(!0,!1),$("#refreshStat").show(),b(!1,!0,!1),d()}),this.addAction({click:"dateRangeProgressStat"},function(){$("#selectMode").val("RANGE"),a(!1,!0),$("#refreshStat").show(),b(!1,!1,!0),d()}),this.addAction({change:"end-date-change"},function(){var a=$("#startDay").val(),b=$("#endDay").val();$("#startDay").pickadate("picker").set("max",b),$("#endDay").pickadate("picker").set("min",a),d()}),this.addAction({change:"start-date-change"},function(){var a=$("#startDay").val(),b=$("#endDay").val();$("#startDay").pickadate("picker").set("max",b),$("#endDay").pickadate("picker").set("min",a),d()})}),AGN.Lib.Controller.new("notification-schedule",function(){function a(){var a=i.pickadate("get","select");return a&&new Date(a.obj)}function b(){var b=j.pickadate("picker"),c=a();if(b.off("set"),c){var i=g(c);e(c,i),d(i),f(k.val())}else e(!0,!1),d(null),f(null);b.on("set",h)}function c(){var b=a();b?e(b,g(b)):e(!0,!1)}function d(a){var b=j.pickadate("picker");a?b.set("select",a):b.clear()}function e(a,b){var c=j.pickadate("picker");c.set("min",a),c.set("max",b),c.set("select",c.get("select"))}function f(a){l.val(a)}function g(a){var b=new Date(a);return b.setDate(b.getDate()+28),b}function h(){j.removeClass("enableable"),l.removeClass("enableable"),j.pickadate("off","set"),l.unbind("change"),i.pickadate("off","set"),i.pickadate("picker").on("set",c),k.unbind("change"),k.on("change",c)}var i,j,k,l;this.addDomInitializer("notification-schedule",function(a){i=a.find("#startDate"),j=a.find("#endDate"),k=a.find("#startTime"),l=a.find("#endTime"),i.pickadate("picker").on("set",b),k.on("change",b),j.pickadate("picker").on("set",h),l.on("change",h)})}),AGN.Lib.Controller.new("notification-settings",function(){this.addAction({"editor:create":"content","editor:change":"content"},function(){var a=this.el.val().length;$("#contentSize").text(t("fields.content.charactersEntered",a))})}),AGN.Lib.Controller.new("preview-header",function(){var a=this;this.addInitializer("set-preview-customer-options",function(){var a=$("#useCustomerEmail").prop("checked");$("#recipientEmail").prop("disabled",a),$("#buttonPreviewCustomerEmail").prop("disabled",a),$("#recipientId").prop("disabled",!a)}),this.addAction({change:"change-preview-customer-options"},function(){a.runInitializer("set-preview-customer-options")})}),AGN.Lib.Controller.new("profile-field-view",function(){var a=!1,b=!1,c=null;this.addDomInitializer("profile-field-view",function(d){var e=d.json();a=e.isHistorizationFeatureEnabled,b=e.isHistorizationEnabled,c=e.dependentWorkflowName,$.i18n.load(e.translations)}),this.addAction({change:"toggleHistorization"},function(){a&&b&&c&&(this.el.is(":checked")||AGN.Lib.Messages(t("defaults.warning"),t("warning.profilefield.inuse",c),"warning"))})}),AGN.Lib.Controller.new("recipient-list",function(){this.addDomInitializer("recipient-list",function(){$("#basicSearch").on("click",function(){$("input[name=advancedSearch]").val(!1)}),$("#advancedSearch").on("click",function(){$("input[name=advancedSearch]").val(!0)}),$("#add-rule-table").on("change",function(){$("#refresh-button").attr("data-form-set","advancedSearch:true, addTargetNode:true")});var a=$("#basicSearch").hasClass("tab active"),b=$("#advancedSearch").hasClass("tab active");b&&$("input[name=advancedSearch]").val(!0),a&&$("input[name=advancedSearch]").val(!1)}),this.addAction({change:"change-fields-to-search"},function(){"-1"==this.el.val()?($("#search_recipient_type").prop("disabled",!0),$("#search_recipient_state").prop("disabled",!0)):($("#search_recipient_type").prop("disabled",!1),$("#search_recipient_state").prop("disabled",!1));var a=$("#search_mailinglist").val();$("#search_mailinglist_advanced").select2("val",a),"-1"==a?($("#search_recipient_type_advanced").prop("disabled",!0),$("#search_recipient_state_advanced").prop("disabled",!0)):($("#search_recipient_type_advanced").prop("disabled",!1),$("#search_recipient_state_advanced").prop("disabled",!1))}),this.addAction({change:"change-target-group"},function(){var a=$("#search_targetgroup").val();$("#search_targetgroup_advanced").select2("val",a)}),this.addAction({change:"change-recipient-type"},function(){var a=$("#search_recipient_type").val();$("#search_recipient_type_advanced").select2("val",a)}),this.addAction({change:"change-user-status"},function(){var a=$("#search_recipient_state").val();$("#search_recipient_state_advanced").select2("val",a)}),this.addAction({change:"change-fields-to-search-advanced"},function(){"-1"==this.el.val()?($("#search_recipient_type_advanced").prop("disabled",!0),$("#search_recipient_state_advanced").prop("disabled",!0)):($("#search_recipient_type_advanced").prop("disabled",!1),$("#search_recipient_state_advanced").prop("disabled",!1));var a=$("#search_mailinglist_advanced").val();$("#search_mailinglist").select2("val",a),"-1"==a?($("#search_recipient_type").prop("disabled",!0),$("#search_recipient_state").prop("disabled",!0)):($("#search_recipient_type").prop("disabled",!1),$("#search_recipient_state").prop("disabled",!1))}),this.addAction({change:"change-target-group-advanced"},function(){var a=$("#search_targetgroup_advanced").val();$("#search_targetgroup").select2("val",a)}),this.addAction({change:"change-recipient-type-advanced"},function(){var a=$("#search_recipient_type_advanced").val();$("#search_recipient_type").select2("val",a)}),this.addAction({change:"change-user-status-advanced"},function(){var a=$("#search_recipient_state_advanced").val();$("#search_recipient_state").select2("val",a)}),this.addAction({click:"choose-advanced-search"},function(){($("#search_first_name").val().trim()||$("#search_name").val().trim()||$("#search_email").val().trim())&&$("#recipientForm").submit()}),this.addAction({click:"reset-search"},function(){$("#search_first_name").val(""),$("#search_name").val(""),$("#search_email").val(""),$("#search_mailinglist_advanced").select2("val",0),$("#search_targetgroup_advanced").select2("val",0),$("#search_recipient_type_advanced").select2("val",""),$("#search_recipient_state_advanced").select2("val",0),$("#search_mailinglist").select2("val",0),$("#search_targetgroup").select2("val",0),$("#search_recipient_type").select2("val",""),$("#search_recipient_state").select2("val",0),$('[name="columnAndTypeNew"]').val(""),$('[name="chainOperatorNew"]').val(""),$('[name="parenthesisOpenedNew"]').val(""),$('[name="primaryOperatorNew"]').val(""),$('[name="primaryValueNew"]').val(""),$('[name="parenthesisClosedNew"]').val(""),$('[name="dateFormatNew"]').val(""),$('[name="secondaryOperatorNew"]').val(""),$('[name="secondaryValueNew"]').val(""),$("#recipientForm").submit()})}),AGN.Lib.Controller.new("recipient-view",function(){function a(a,b){this.url=a,this.running=!1,this.callback=$.isFunction(b)?b:$.noop,this.lastAddress=null,this.lastResult=null,this.scheduledCheck=null}var b,c="OK",d="USED",e="BLACKLISTED",f=AGN.Lib.Form,g=AGN.Lib.Confirm,h=AGN.Lib.Template;this.addDomInitializer("recipient-view",function(g){var h=f.get(g);b=new a(this.config.urls.CHECK_ADDRESS,function(a){switch(a){case c:h.cleanFieldError("email");break;case d:h.showFieldError("email",t("error.inUse"),!0);break;case e:h.showFieldError("email",t("error.isBlacklisted"),!0)}}),$("#recipient-email").on("change paste keydown keyup",_.debounce(function(){b.check($(this).val())},300))}),this.addAction({submission:"recipient-save"},function(){var a=f.get(this.el),c=$("#recipient-email").val();b&&c&&c.trim()?b.jqxhr(c.trim()).done(function(b){b.isBlacklisted===!0?g.create(h.text("email-confirmation-modal",{question:t("recipient.blacklisted.question")})).done(function(){b.inUse===!0?g.create(h.text("email-confirmation-modal",{question:t("recipient.duplicate.question")})).done(function(){a.submit()}):a.submit()}):b.inUse===!0?g.create(h.text("email-confirmation-modal",{question:t("recipient.duplicate.question")})).done(function(){a.submit()}):a.submit()}).fail(function(){a.submit()}):a.submit()}),a.prototype.jqxhr=function(a){return $.get(this.url,{email:a})},a.prototype.scheduleCheck=function(a){var b=this;if(b.scheduledCheck&&clearTimeout(b.scheduledCheck),b.running)b.scheduledCheck=setTimeout(function(){b.scheduleCheck(a)},300);else{b.running=!0,b.lastAddress=null,b.lastResult=null;try{b.jqxhr(a).always(function(){b.running=!1}).done(function(f){b.lastAddress=a,b.lastResult=f.isBlacklisted===!0?e:f.inUse===!0?d:c,b.report()})}catch(a){b.running=!1}}},a.prototype.check=function(a){a=a?a.trim():"",a?this.lastAddress==a?this.report():this.scheduleCheck(a):this.report(c)},a.prototype.report=function(a){arguments.length?this.callback.call(null,a):this.lastAddress&&this.report(this.lastResult)}}),AGN.Lib.Controller.new("rules-add",function(){var a=this,b=AGN.Lib.RuleService;this.addInitializer("readConfigRulesAdd",function(c){var d=$('[data-initializer="rules-config"]').data("config");a.config=AGN.Lib.Helpers.objFromString(d),a.config=b.configure(a.config),$('select[data-action="updateMailingLinkIdNew"]').each(function(){var c=$(this);b.updateMailingLinksCache(a.config,c.data("ruleid"),c.val())})}),this.addInitializer("initStateRulesAdd",function(c){b.changedColumn(null,a.config)}),this.addAction({change:"columnAndTypeNew, primaryOperatorNew"},function(){var c=this.el.data("ruleid");b.changedColumn(c,a.config)}),this.addAction({change:"resetMailingUrlsNew"},function(){var c=this.el.data("ruleid");b.resetMailingUrls(a.config,c)}),this.addAction({change:"updateMailingLinkIdNew"},function(){var c=this.el.data("ruleid");b.updateMailingLinksCache(a.config,c,this.el.val())})}),AGN.Lib.Controller.new("rules-list",function(){var a=this,b=AGN.Lib.RuleService;this.addInitializer("readConfigRulesList",function(){var c=$('[data-initializer="rules-config"]').data("config");a.config=AGN.Lib.Helpers.objFromString(c),a.config=b.configure(a.config),$('select[data-action="updateMailingLinkId"]').each(function(){var c=$(this);b.updateMailingLinksCache(a.config,c.data("ruleid"),c.val())}),$("select[data-selected-column]").each(function(){var b=$(this);b.on("select2-opening",function(){if(!b.data("_loaded")){var c=a.config.allColumns.clone();c.filter('option[value="'+b.data("selected-column")+'"]').attr("selected",""),b.html(c),b.data("_loaded",!0)}})})}),this.addAction({change:"columnAndType, primaryOperator"},function(){var c=this.el.data("ruleid");b.changedColumn(c,a.config)}),this.addAction({change:"resetMailingUrls"},function(){var c=this.el.data("ruleid");b.resetMailingUrls(a.config,c)}),this.addAction({change:"updateMailingLinkId"},function(){var c=this.el.data("ruleid");b.updateMailingLinksCache(a.config,c,this.el.val())})}),AGN.Lib.Controller.new("template-css",function(){this.addAction({click:"updatePreview"},function(){var a=$("#layoutPreviewForm");a.find('input[name="css"]').val($("#cssContents").val()),a.submit()}),this.addAction({click:"saveLayoutCss"},function(){$("#gridTemplateForm").submit()})}),AGN.Lib.Controller.new("template-outer-html-edit",function(){this.addAction({click:"updatePreview"},function(){var a=$("#layoutPreviewForm");a.find('input[name="outerHTML"]').val($("#templateOuterHTML").val()),a.submit()}),this.addAction({click:"saveOuterHTML"},function(){$("#gridTemplateForm").submit()})}),AGN.Lib.Controller.new("template-styles",function(){function a(){
var a=$("form#gridTemplateForm"),b=$("form#layoutPreviewForm"),c=a.find('input[name^="styles."]');$.each(c,function(a,c){var d=$(c),e=d.attr("name"),f=b.find('input[name="'+e+'"]');f.val(d.val())}),b.submit()}this.addAction({submission:"updatePreview"},function(){a()}),this.addAction({click:"updateLayoutPreview"},function(){a()}),this.addAction({click:"saveLayoutStyles"},function(){$("form#gridTemplateForm").submit()})}),AGN.Lib.Controller.new("trackable-link-list",function(){var a;this.addAction({change:"elem-edited"},function(){a=this.el.attr("id")}),this.addAction({scrollTo:"scroll-to"},function(){var b,c,d,e;if(a)c=$(this.el).find("#"+a);else if($(this.el).find('[data-sizing="scroll-top-target"]').length>0)c=$(this.el).find('[data-sizing="scroll-top-target"]'),c.removeAttr("data-sizing");else if(location.href.indexOf("scrollToLinkId")>0){var f,g,h=document.createElement("a");h.href=location.href,f=h.search.substring(1,h.search.length).split("&");for(var i=0;i<f.length;i++)f[i].indexOf("scrollToLinkId")>=0&&(g=f[i].substring(f[i].indexOf("=")+1,f[i].length),c=$("#link-"+g))}c&&c.length>0&&(b=c.closest('[data-sizing="scroll"]'),b.length>0&&(d=b.find(":first-child").offset().top,e=c.offset().top,b.scrollTop(0),b.scrollTop(e-d)))}),this.addAction({click:"delete-link"},function(){var a=this.el.data("link-id");$(this.el).closest('[data-action="elem-edited"]').trigger("change"),$("#linkPropertyTable").find("#linkProperty_"+a).remove()}),this.addAction({click:"delete-all-links"},function(){$("#linkPropertyTable").find("tbody tr").remove(),$(this.el).closest('[data-action="elem-edited"]').trigger("change")}),this.addAction({click:"add-default-extensions"},function(){var a,b,c,d=$("#linkPropertyTable").find("tr[data-link-id]");c=0!=d.length?Math.max.apply(Math,_.map(d,function(a){return parseInt($(a).data("link-id"))}))+1:$("#linkPropertyTable").find("tbody tr").length+1,_.each(AGN.Opt.DefaultExtensions,function(d,e){b=$("#linkPropertyTable").find('[data-link-name="'+e+'"]'),0!=b.length?(a=_.template(AGN.Opt.Templates["link-table-row"],{count:b.data("link-id"),linkName:e,linkValue:d}),b.replaceWith(a)):(a=_.template(AGN.Opt.Templates["link-table-row"],{count:c,linkName:e,linkValue:d}),c+=1,$("#linkPropertyTable").find("tbody").append(a))}),$(this.el).closest('[data-action="elem-edited"]').trigger("change")}),this.addAction({click:"add-extension"},function(){var a,b,c=$("#linkPropertyTable").find("tr[data-link-id]");b=0!=c.length?Math.max.apply(Math,_.map(c,function(a){return parseInt($(a).data("link-id"))}))+1:$("#linkPropertyTable").find("tbody tr").length+1,a=_.template(AGN.Opt.Templates["link-table-row"],{count:b,linkName:"",linkValue:""}),$("#linkPropertyTable").find("tbody").append(a),$(this.el).closest('[data-action="elem-edited"]').trigger("change")})}),AGN.Lib.Controller.new("trackable-link",function(){var a=this;this.addAction({click:"delete-link"},function(){var a=this.el.data("link-id");$("#linkPropertyTable").find("#linkProperty_"+a).remove()}),this.addAction({click:"delete-all-links"},function(){$("#linkPropertyTable").find("tbody tr").remove()}),this.addAction({click:"add-extension"},function(){var a,b,c=$("#linkPropertyTable").find("tr[data-link-id]");b=0!=c.length?Math.max.apply(Math,_.map(c,function(a){return parseInt($(a).data("link-id"))}))+1:$("#linkPropertyTable").find("tbody tr").length+1,a=_.template(AGN.Opt.Templates["link-table-row"],{count:b,linkName:"",linkValue:""}),$("#linkPropertyTable").find("tbody").append(a)}),this.addAction({change:"trackable"},function(){a.runInitializer("trackableAction")}),this.addInitializer("trackableAction",function(a){var b=$('[data-action="trackable"] :selected');0==b.val()?$("#linkAction").prop("disabled",!0):$("#linkAction").prop("disabled",!1)})});var constants;AGN.Lib.Controller.new("workflow-view",function(){function a(a){return{allMailinglists:a.allMailingLists,allMailings:a.allMailings,allTargets:a.allTargets,allReports:a.allReports,allUserForms:a.allUserForms,allAutoExports:a.allAutoExports,allAutoImports:a.allAutoImports,allCampaigns:a.allCampaigns}}function b(a){var b="";return Object.keys(a).forEach(function(c){var d='value="'+c+'"';b+="<option "+d+">"+a[c]}),b}function c(a){var b="";return a.forEach(function(a){var c='value="'+a.id+'"',d=a.data;d&&Object.keys(d).forEach(function(a){c+=" data-"+a+'="'+d[a].replace('"',"&quot;")+'"'});var e=a.text.replace("<","&lt;").replace(">","&gt;");b+="<option "+c+">"+e+"</option>"}),b}function d(a){return AGN.Lib.Helpers.objFromString(a.data("config"))}function e(){}function f(){AGN.Lib.CampaignManagerService.resizeTimeoutId&&clearTimeout(AGN.Lib.CampaignManagerService.resizeTimeoutId),AGN.Lib.CampaignManagerService.resizeTimeoutId=setTimeout(function(){var a=0!=$("#modalCampaignEditorContainer").find($("#campaignEditorBody")).length,b=$("#viewPort"),c=$("#editorCanvas"),d=$("#toolbarLeft"),e=505,f=b[0].clientWidth,g=a?$("#modalCampaignEditorContainer").height()-$("#toolbarTop").height():b[0].clientHeight;if(c.width(f),c.height(g),p.setEditorCanvasWidth(f),p.setEditorCanvasHeight(g),p.setViewPortWidth(f),p.setViewPortHeight(g),a)g>e&&(d.height(g),c.height(g),b.height(g));else{var h=808,i=h+jQuery("#tile-campaignInformation").outerHeight(),j=jQuery("html").scrollTop(),k=jQuery("html").height();k+j>i&&(e+=k+j-i),d.height(e),c.height(e),b.height(e)}},100)}function g(){var a=$.Deferred();if($("#name").val().length<3)AGN.Lib.Messages(t("workflow.defaults.error"),t("error.workflow.shortName"),"alert"),a.reject();else{if(p.checkMailingTypesConvertingRequired())return Y.create(X.text("mailing-types-replace-modal"));a.resolve()}return a.promise()}function h(a){var b=function(){var a=AGN.Lib.Form.get($("form#workflowForm"));a.setValueOnce("schema",p.getIconsForSubmissionJson()),a.setValueOnce("editorPositionLeft",p.getLeftPosition()),a.setValueOnce("editorPositionTop",p.getTopPosition()),a.setValueOnce("workflowUndoHistoryData",p.getUndoHistoryDataForSubmission()),a.submit("static")};a?g().done(b):b()}function i(a,b){"true"===q.isStatusOpen?workflownoStatisticsDialogHandler.showDialog():(o.toggleStatistics(a),k(b))}function j(){var a=!0;0!==q.workflowId&&""!==q.shotrName&&(a=!1);var b=p.canUndo();a||b?Q.showDialog(a,b):(window.location.href=q.pdfGenerationUrl+"&workflowId="+q.workflowId+"&showStatistics="+o.statisticsVisible,AGN.Lib.Loader.hide())}function k(a){var b=t("workflow.fade_in_statistics"),c=t("workflow.fade_out_statistics"),d=a.html();d=o.statisticsVisible?d.replace(b,c):d.replace(c,b),a.html(d)}function l(a){var b=$("#workflow_active").is(":checked"),c=T===constants.statusActive&&!b,d=T!==constants.statusActive&&b;if(c||!p.checkWorkflowBeforeSave())if(d){$("input[name='workflow.statusString']").val(constants.statusActive);var e=p.getMailingNames();$("#activating-campaign-mailings").html(e),$("#activating-campaign-dialog").css("visibility","visible"),$("#activating-campaign-dialog").show(),$("#activating-campaign-activate-button").click(function(){return h(a),!1}),$("#activating-campaign-dialog").dialog({open:function(a,b){var c=$("#activating-campaign-dialog").parent().find(".ui-dialog-title");c.empty(),c.append('<span class="dialog-title-image">'+t("workflow.activating.title")+"</span>"),c.find(".dialog-title-image").css("padding-left","0px")},modal:!0,resizable:!1,width:650,minHeight:0,close:function(a,b){return!1}})}else c?($("input[name='workflow.statusString']").val(constants.statusInactive),$("#inactivating-campaign-dialog").css("visibility","visible"),$("#inactivating-campaign-dialog").show(),$("#inactivating-campaign-inactivate-button").click(function(){return h(a),$("#inactivating-campaign-dialog").dialog("close"),!1}),$("#inactivating-campaign-dialog").dialog({open:function(a,b){var c=$("#inactivating-campaign-dialog").parent().find(".ui-dialog-title");c.empty(),c.append('<span class="dialog-title-image">'+t("workflow.inactivating.title")+"</span>"),c.find(".dialog-title-image").css("padding-left","0px")},modal:!0,resizable:!1,width:650,minHeight:0,close:function(a,b){return!1}})):h(a)}function m(){$("#pageCampaignEditorContainer").append($("#campaignEditorBody")),f()}function n(){$("#modalCampaignEditorContainer").append($("#campaignEditorBody")),f()}var o,p,q,r,s,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W=AGN.Lib.Action,X=AGN.Lib.Template,Y=AGN.Lib.Confirm,Z=AGN.Lib.WM.NodeFactory,aa="gender",ba=2,ca=3;this.addDomInitializer("workflow-view-constants",function(){constants||(constants=new e),constants.setup(this.config)}),this.addDomInitializer("workflow-pdf-initialize",function(){var b,c,d=this.config,e=d.sessionId,f=d.locale;U=a(d),campaignManagerSettings.imagePath=d.imageUrl+"/campaignManager/",c=new AGN.Lib.WM.CampaignManagerScale({campaignManagerSettings:campaignManagerSettings}),AGN.Lib.CampaignManagerService={icons:d.icons,resizeTimeoutId:!1},p=new AGN.Lib.WM.CampaignManager({campaignManagerScale:c,campaignManagerSettings:campaignManagerSettings,restoreSpaceFields:["name","workflow_description"],editorPositionLeft:d.editorPositionLeft,editorPositionTop:d.editorPositionTop,localeDateNTimePattern:d.localeDateNTimePattern,noContextMenu:d.noContextMenu,pageContextSessionId:e,allUsedEntity:U,isPdfGenerating:!0,workflowURL:constants.workflowURL,componentURL:constants.componentURL}),P=p.getEditorsHelper(),b=new AGN.Lib.WM.WorkflowManagerStatistics(p),$.datepicker.setDefaults($.datepicker.regional[f]),p.restoreWorkflow(AGN.Lib.CampaignManagerService.icons),p.updateWorkflowForPdf(),d.showStatistics&&b.toggleStatistics(d.workflowId)}),this.addDomInitializer("campaign-manager-init",function(b){q=this.config,R=q.isActivated,T=q.workflowStatus,S=q.workflowNewStatus,U=a(q),AGN.Lib.CampaignManagerService={icons:q.icons,resizeTimeoutId:!1},campaignManagerSettings.imagePath=q.imageUrl+"/campaignManager/";var c=new AGN.Lib.WM.CampaignManagerScale({campaignManagerSettings:campaignManagerSettings});p=new AGN.Lib.WM.CampaignManager({workflowId:q.workflowId,isActivated:q.isActivated,restoreSpaceFields:["name","workflow_description"],editorPositionLeft:q.editorPositionLeft,editorPositionTop:q.editorPositionTop,localeDateNTimePattern:q.localeDateNTimePattern,pageContextSessionId:q.pageContextSessionId,campaignManagerScale:c,campaignManagerSettings:campaignManagerSettings,allUsedEntity:U,workflowURL:constants.workflowURL,componentURL:constants.componentURL}),P=p.getEditorsHelper(),o=new AGN.Lib.WM.WorkflowManagerStatistics(p),jQuery.datepicker.setDefaults(jQuery.datepicker.regional[q.emmLocal]),q.newStatus===q.pageContextSessionId&&p.setWorkflowManagerStateChangedCallback(function(){$("#workflow_active").prop("disabled",!p.isNodesFilled())});var d=AGN.Lib.CampaignManagerService.icons;void 0!=d.length&&p.restoreWorkflow(d),p.setHistoryStackChangedCallback(function(a){AGN.Lib.WM.CampaignManagerToolbar.setUndoAvailable(a)}),p.setConnectionNotAllowedCallback(function(){workflowNotAllowedConnectionDialogHandler.showDialog()}),p.setEditingNotAllowedCallback(function(){workflowNotAllowedEditingDialogHandler.showDialog()}),p.setUndoHistoryDataForSubmission(q.workflowUndoHistoryData),jQuery("#legend-button-wrapper").bind({mouseover:function(){p.getCurrentState()==p.STATE_WAITING&&jQuery("#legend-dopdown").show()},mouseout:function(){jQuery("#legend-dopdown").hide()}});for(var e in Z.reactionRegistry)if(Z.reactionRegistry.hasOwnProperty(e)){var g="<div class='legend-dopdown-item'><img src='"+q.imageUrl+"/campaignManager/"+Z.reactionRegistry[e].image+"'/></div><div class='legend-dopdown-item-name'>"+Z.reactionRegistry[e].name+"</div>";jQuery("#legend-dopdown").append(g)}jQuery(window).resize(function(){f()})}),this.addDomInitializer("start-editor-initializer",function(a){var d=a.find("#start-editor-data").json();s=new AGN.Lib.WM.MailingSelectorBase(d.form,d.container,d.sessionId,d.selectedName,d.noMailingOption,P);var e=d.profileFields,f=d.isBigData;P.editors.start={rulesNumber:0,isStartEditor:!1,timePattern:/^(\d{2}):(\d{2})$/,getTitle:function(){return this.isStartEditor?t("workflow.start.title"):t("workflow.stop.title")},getStartStopDate:function(a){a=a||P.formToObject("startForm");var b=$('form[name="startForm"]');if(this.isStartEditor)switch(a.startType){case constants.startTypeDate:return b.find("#startDate").pickadate("picker").get("select").obj;case constants.startTypeEvent:return b.find("#executionDate").pickadate("picker").get("select").obj}else if(a.endType==constants.endTypeDate)return b.find("#startDate").pickadate("picker").get("select").obj;return null},generateReminderComment:function(){var a=$("#workflowForm input[name='workflow.shortname']").val(),b=AGN.Lib.DateFormat.format(this.getStartStopDate()||new Date,d.localeDatePattern);return(this.isStartEditor?t("workflow.start.reminder_text"):t("workflow.stop.reminder_text")).replace(/:campaignName/g,a).replace(/:startDate/g,b).replace(/:endDate/g,b)},fillEditor:function(a){var b=a.data;this.isStartEditor="start"==a.type,this.updateEditorType(this.isStartEditor);var c=$("form[name='startForm']");if(c.submit(!1),c.find(".rule-row").each(function(){$(this).remove()}),c.find("#remindCalendarDateTitle").text(this.isStartEditor?t("workflow.start.start_date"):t("workflow.stop.end_date")),void 0!=b.rules){for(var e=0;e<b.rules.length;e++){var f=b.rules[e];this.createRuleRow(e,f)}this.rulesNumber=b.rules.length}c.get(0).reset(),b.adminTimezone=d.adminTimezone,b.sendReminder=b.scheduleReminder,P.fillFormFromObject("startForm",b,""),s.setMailingId(b.mailingId),s.cleanOptions(1);var g=new Date;c.find("#startDate").pickadate("picker").set("select",this.dateAsUTC(void 0!=b.date?b.date:g)),c.find("#executionDate").pickadate("picker").set("select",this.dateAsUTC(void 0!=b.date?b.date:g)),c.find("#remindDate").pickadate("picker").set("select",this.dateAsUTC(void 0!=b.remindDate?b.remindDate:g)),void 0!=b.date?(c.find("#startTime").val(this.formatTime(b.hour,b.minute)),c.find("#remindTime").val(this.formatTime(b.remindHour,b.remindMinute))):this.setCurrentTime(),this.updateChainFieldsVisibility(),this.updateVisibility(),this.updateOperatorsAvailability(),b.startType==constants.startTypeEvent&&b.event==constants.startEventReaction&&b.reaction==constants.reactionClickedLink&&0!=b.mailingId&&null!=b.mailingId&&this.onMailingSelectChange(b.mailingId,b.linkId),b.comment||c.find("#reminderComment").val(this.generateReminderComment());var h;h=""!=b.recipients?2:1,$("#start-editor input[name='userType'][value="+h+"]").prop("checked",!0).trigger("change"),$("#start-editor .editor-error-messages").css("display","none")},saveEditor:function(){var a=P.formToObject("startForm");a.date=this.getStartStopDate(a),null==a.date&&(a.date=new Date,a.date.setHours(0),a.date.setMinutes(0),a.date.setSeconds(0),a.date.setMilliseconds(0));var b,c=jQuery("form[name='startForm'] #startTime").val();(b=this.timePattern.exec(c))?(a.hour=b[1],a.minute=b[2]):(a.hour=0,a.minute=0),a.scheduleReminder=a.sendReminder;var e=jQuery("form[name='startForm'] #remindTime").val();return(b=this.timePattern.exec(e))?(a.remindHour=b[1],a.remindMinute=b[2]):(a.remindHour=0,a.remindMinute=0),"true"==jQuery("input[name='remindSpecificDate']:checked").val()?a.remindDate=jQuery("form[name='startForm'] #remindDate").pickadate("picker").get("select").obj:(a.remindDate=a.date,a.remindHour=0,a.remindMinute=0),void 0==a.rules&&(a.rules=[]),void 0!=a.linkId&&null!=a.linkId||(a.linkId=0),a.dateFieldOperator!=d.equelsOperatorCode&&(a.dateFieldOperator=d.equelsOperatorCode),2==a.userType?(a.remindAdminId=0,a.recipients=$.trim(a.recipients).toLowerCase().split(/[,;\s\n\r]+/).filter(function(a){return!!a}).join(", ")):a.recipients="",delete a.userType,a},validateEditorInternal:function(a){function b(){var b=i.find("select[name='event']").val();switch(b){case constants.startTypeDate:var c=i.find("#executionDate").pickadate("picker").get("select").obj;if(c){var d=i.find("#startTime").val();e.timePattern.test(d)||(g=!1)}else g=!1;var j=i.find("#dateFieldValue");$.trim(j.val())||(g=!1,a&&(h.html(t("error.workflow.startDateOmitted")),h.css("display","block")));break;case constants.startEventReaction:var k=i.find("select[name='reaction']").val();switch(k){case constants.reactionClickedLink:var l=i.find("select[name='linkId']").val();parseInt(l,10)<=0&&(g=!1,a&&(h.html(t("error.workflow.noLinkSelected")),h.css("display","block")));case constants.reactionOpened:case constants.reactionClicked:var m=i.find("select[name='mailingId']").val();parseInt(m,10)<=0&&(g=!1);break;case constants.reactionChangeOfProfile:if("undefined"!=typeof f&&1==f){var n=i.find("select[name='profileField']").val();n||(g=!1)}break;case constants.reactionWaitingForConfirm:case constants.reactionOptIn:case constants.reactionOptOut:break;default:g=!1}}}function c(){var a=i.find("#startDate").pickadate("picker").get("select").obj;if(a){var b=i.find("#startTime").val();e.timePattern.test(b)||(g=!1)}else g=!1}function d(){var b=$.trim(i.find('textarea[name="recipients"]').val()).split(/[,;\s\n\r]+/).filter(function(a){return!!a});b.length||a&&(g=!1,h.html(t("error.workflow.emptyRecipientList")),h.css("display","block"))}var e=this,g=!0,h=$("#start-editor .editor-error-messages"),i=$("form[name='startForm']"),j=this.isStartEditor?i.find("input[name='startType']:checked").val():i.find("input[name='endType']:checked").val();if(this.isStartEditor&&j==constants.startTypeEvent&&(b(),c()),(this.isStartEditor&&j==constants.startTypeDate||!this.isStartEditor&&j==constants.endTypeDate)&&c(),g&&i.find("#sendReminder").is(":checked")){var k=i.find('input[name="userType"]:checked').val();2==k&&d()}return g},validateEditor:function(){this.validateEditorInternal(!0)&&P.saveCurrentEditor()},isSetFilledAllowed:function(){return this.validateEditorInternal(!1)},setCurrentTime:function(){var a=this;jQuery.ajax({type:"POST",url:constants.workflowURL,data:{method:"getCurrentAdminTime"},success:function(b){jQuery("form[name='startForm'] #startTime").val(a.formatTime(b.hour,b.minute)),jQuery("form[name='startForm'] #remindTime").val(a.formatTime(b.remindHour,b.remindMinute))}})},updateEditorType:function(a){$("#startStopType").empty(),a?($("#startStopType").append(_.template(AGN.Opt.Templates["start-types"])),jQuery("#eventReaction").html(t("workflow.start.reaction_based")),jQuery("#eventDate").html(t("workflow.start.date_based"))):($("#startStopType").append(_.template(AGN.Opt.Templates["stop-types"])),p.isNormalCampaignActionsType()?jQuery("#endTypeActiomaticLabel").html(t("workflow.stop.automatic_end")):jQuery("#endTypeActiomaticLabel").html(t("workflow.stop.open_end")))},onRulesChanged:function(){var a=0;$("form[name='startForm'] #profileFieldAddedRules tr").each(function(){var b=$(this),c=b.attr("id"),d=c.substring(5),e=$("#"+c);e.find(".rule-field").attr("name",function(b,c){return c?c.replace(d,a+""):""}),e.find(".delete-rule").attr("data-rule-index",function(b,c){return c==d?a:c}),b.attr("id","rule_"+a),a++}),this.updateChainFieldsVisibility()},updateChainFieldsVisibility:function(){this.rulesNumber>0?(jQuery('form[name="startForm"] [name="rules[0].chainOperator"]').css("visibility","hidden"),jQuery('form[name="startForm"] #newRule_chainOperator').css("visibility","visible")):jQuery("form[name='startForm'] #newRule_chainOperator").css("visibility","hidden")},updateOperatorsAvailability:function(){var a=$('form[name="startForm"] select[name="profileField"]').val(),b=e[a];$('form[name="startForm"] select.primary-operator').each(function(){var a=$(this);a.children("option").prop("disabled",function(){var a=$(this).data("types");return!("*"==a||!a)&&a.split(/[\s,]+/).indexOf(b)==-1}),AGN.Initializers.Select(a),null==a.val()&&P.initSelectWithFirstValue(a)})},addRule:function(){var a={chainOperator:jQuery("form[name='startForm'] #newRule_chainOperator").val(),parenthesisOpened:jQuery("form[name='startForm'] #newRule_parenthesisOpened").val(),primaryOperator:jQuery("form[name='startForm'] #newRule_primaryOperator").val(),primaryValue:jQuery("form[name='startForm'] #newRule_primaryValue").val(),parenthesisClosed:jQuery("form[name='startForm'] #newRule_parenthesisClosed").val()};this.createRuleRow(this.rulesNumber,a),P.fillFormFromObject("startForm",a,"rules["+this.rulesNumber+"]."),this.rulesNumber++,$("#newRule_primaryOperator").val()==constants.operatorIs&&$("#newRule_primaryValue").parents("td").replaceWith(this.createSimpleNewRuleValueField()),this.updateChainFieldsVisibility(),this.updateOperatorsAvailability(),$("form[name='startForm'] #profileFieldRuleAdd select").each(function(){P.initSelectWithFirstValue($(this))}),$("form[name='startForm'] #profileFieldRuleAdd input").each(function(){$(this).val("")})},removeRuleRow:function(a){jQuery("form[name='startForm'] #rule_"+a).remove(),this.rulesNumber--,this.onRulesChanged()},createRuleRow:function(a,b){var d=this.createSimpleRuleValueField(a),e=c(constants.operators);this.curProfileField==aa?d=this.createGenderSelect():b.primaryOperator==constants.operatorIs&&(d=this.createIsOperatorSelect()),jQuery("form[name='startForm'] #profileFieldAddedRules").append('<tr class="rule-row" id="rule_'+a+'"><td><select name="rules['+a+'].chainOperator" class="rule-field"><option value="'+constants.chainOperatorAnd+'">'+t("workflow.defaults.and")+'</option><option value="'+constants.chainOperatorOr+'">'+t("workflow.defaults.or")+'</option></select></td><td><select name="rules['+a+'].parenthesisOpened" class="parentheses-opened rule-field"><option value="0">&nbsp</option><option value="1">(</option></select></td><td><select name="rules['+a+'].primaryOperator" class="primary-operator rule-field" data-action="start-rule-operator-change">'+e+"</select></td>"+d+'<td><select name="rules['+a+'].parenthesisClosed" class="parenthesis-closed rule-field"><option value="0">&nbsp</option><option value="1">)</option></select></td><td><a class="mailing_delete delete-rule btn btn-regular btn-alert" href="#" data-action="start-editor-rule-remove" data-rule-index="'+a+'"><i class="icon icon-minus-circle"></i></a></td></tr>'),this.addRuleProperties(jQuery("#rule_"+a+" .primary-value"),a),AGN.runAll($("form[name='startForm'] #profileFieldAddedRules"))},onStartTypeChanged:function(){var a=this.isStartEditor?jQuery("form[name='startForm'] input[name='startType']:checked").val():jQuery("form[name='startForm'] input[name='endType']:checked").val();this.isStartEditor&&a==constants.startTypeDate||!this.isStartEditor&&a==constants.endTypeDate?(this.toggleFormat(),this.hideDiv("startEventPanel"),this.showDiv("startDatePanel"),this.showDiv("startIconTime"),this.showDiv("startRemindAdmin")):this.isStartEditor&&a==constants.startTypeEvent?(this.hideDiv("startDatePanel"),this.showDiv("startEventPanel"),this.showDiv("startIconTime"),this.showDiv("startRemindAdmin"),this.onStartEventChanged()):(this.isStartEditor&&a==constants.startTypeOpen||!this.isStartEditor&&a==constants.endTypeAutomatic)&&(this.hideDiv("startDatePanel"),this.hideDiv("startEventPanel"),this.hideDiv("startIconTime"),this.hideDiv("startRemindAdmin"))},onStartEventChanged:function(){jQuery("#startEvent").val()==constants.startEventReaction?(this.toggleFormat(),this.hideDiv("dateStartPanel"),this.showDiv("reactionStartPanel"),this.onExecutionChanged(),this.onProfileFieldChanged()):jQuery("#startEvent").val()==constants.startEventDate&&(this.toggleFormat(),this.hideDiv("reactionStartPanel"),this.showDiv("dateStartPanel"),this.hideDiv("executionDateLabel"),this.showDiv("firstExecutionDateLabel"),jQuery("#startIconDateFormat").insertAfter("#startIconDateFieldOperator"),this.showDiv("startIconDateFormat"))},toggleFormat:function(){var a,b,c,d,e;return function(){c=c||$("select#startEvent"),b=b||$("input#typeEvent"),a=a||$("input#startTime"),d=b.prop("checked"),e=c.val()==constants.startEventDate,b.prop("checked")&&e?a.inputmask("h:00"):a.inputmask("h:s")}}(),onRuleModeChanged:function(){var a=$("input[name='useRules']:checked").val();"false"==a?this.hideDiv("profileFieldRules"):this.showDiv("profileFieldRules")},onProfileFieldChanged:function(){var a=$("form[name='startForm'] select[name='profileField']").val(),b=e[a];"DATE"==b?($("#startIconDateFormat").insertAfter("#reactionProfileField"),this.showDiv("startIconDateFormat")):this.hideDiv("startIconDateFormat"),this.updateOperatorsAvailability()},getRuleIndex:function(a){return a.attr("id").substring(5)},onRuleOperatorChanged:function(a){if(this.curProfileField!=aa){var b=a.closest("tr"),c=b.attr("id")?this.getRuleIndex(b):null;if(a.val()==constants.operatorIs){var d=$(this.createIsOperatorSelect());b.find(".primary-value").parents("td").replaceWith(d),AGN.Initializers.Select(d)}else if(b.find(".primary-value").hasClass("null-select")){var e;e=null==c?this.createSimpleNewRuleValueField():this.createSimpleRuleValueField(c),b.find(".primary-value").parents("td").replaceWith(e)}null==c?this.addNewRuleProperties(b.find(".primary-value")):this.addRuleProperties(b.find(".primary-value"),c)}},createGenderSelect:function(){var a=b(constants.genderOptions);return'<td><select class="primary-value form-control">'+a+"</select></td>"},createIsOperatorSelect:function(){return'<td><select class="primary-value null-select form-control"><option value="NULL">NULL</option><option value="NOT_NULL">NOT NULL</option></select></td>'},createSimpleRuleValueField:function(a){return'<td><input name="rules['+a+'].primaryValue" type="text" class="primary-value rule-field form-control"/></td>'},createSimpleNewRuleValueField:function(){return'<td><input id="newRule_primaryValue" type="text" class="primary-value form-control"/></td>'},addRuleProperties:function(a,b){a.filter("select, input").attr("name","rules["+b+"].primaryValue").addClass("rule-field")},addNewRuleProperties:function(a){a.filter("select, input").attr("id","newRule_primaryValue")},onExecutionChanged:function(){var a=$("input[name='executeOnce']:checked").val();"false"==a?(this.hideDiv("executionDateLabel"),this.showDiv("firstExecutionDateLabel")):(this.hideDiv("firstExecutionDateLabel"),this.showDiv("executionDateLabel"))},onReactionChanged:function(){var a=$("form[name='startForm'] #startReaction").val();a==constants.reactionOpened||a==constants.reactionNotOpened||a==constants.reactionClicked||a==constants.reactionNotClicked||a==constants.reactionBought||a==constants.reactionNotBought||a==constants.reactionClickedLink?(this.hideDiv("reactionStartProfile"),this.showDiv("reactionStartMailing")):a==constants.reactionChangeOfProfile?(this.hideDiv("reactionStartMailing"),this.showDiv("reactionStartProfile")):(this.hideDiv("reactionStartMailing"),this.hideDiv("reactionStartProfile")),a==constants.reactionClickedLink?this.showDiv("reactionStartMailingLink"):this.hideDiv("reactionStartMailingLink")},onReminderChanged:function(){return $("input[name='sendReminder']:checked").val()?($('form[name="startForm"]').find("#reminderComment").val(this.generateReminderComment()),this.showDiv("reminderDetails")):this.hideDiv("reminderDetails"),!1},onScheduleReminderDateChanged:function(){return"true"==$("form[name='startForm'] input[name='remindSpecificDate']:checked").val()?this.showDiv("dateTimePicker"):this.hideDiv("dateTimePicker"),!1},onMailingSelectChange:function(a,b){var c=$("form[name='startForm'] select[name='linkId']"),d=parseInt(a,10);d>0?(c.attr("readonly","readonly"),$.ajax({type:"POST",url:constants.workflowURL,data:{method:"getMailingLinks",mailingId:d},success:function(a){c.empty(),$.each(a,function(a,b){c.append($("<option></option>",{value:b.id,text:b.url}))}),c.removeAttr("readonly"),null!=b&&void 0!=b?(c.val(b),P.initSelectWithValueOrChooseFirst(c,b)):P.initSelectWithFirstValue(c)}})):c.empty()},updateVisibility:function(){this.onStartTypeChanged(),this.onStartEventChanged(),this.onReactionChanged(),this.onRuleModeChanged(),this.onExecutionChanged(),this.onReminderChanged(),this.onScheduleReminderDateChanged()},hideDiv:function(a){jQuery("form[name='startForm'] #"+a).css("display","none")},showDiv:function(a){jQuery("form[name='startForm'] #"+a).css("display","")},dateAsUTC:function(a){return a?new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())):null},formatTime:function(a,b){var c=0,d=0;return a=parseInt(a,10),a>=0&&(c=a),b=parseInt(b,10),b>=0&&(d=b),(c<10?"0"+c:c)+":"+(d<10?"0"+d:d)}},r=P.editors.start,P.editors.stop=P.editors.start}),this.addDomInitializer("decision-editor-initializer",function(a){var d=a.find("#decision-editor-data").json(),e=d.profileFields;u=new AGN.Lib.WM.MailingSelectorBase(d.form,d.container,d.sessionId,d.selectName,d.noMailingOption,P);var f;P.editors.decision={rulesNumber:0,rulePrefix:"decision_",prevProfileField:"",curProfileField:"",getTitle:function(){return t("workflow.decision")},fillEditor:function(a){f=0;var b=a.data;if(jQuery("form[name='decisionForm']").submit(!1),jQuery("form[name='decisionForm'] .rule-row").each(function(){jQuery(this).remove()}),this.curProfileField=b.profileField,void 0!=b.rules){for(var c=0;c<b.rules.length;c++){var d=b.rules[c];this.createRuleRow(c,d)}this.rulesNumber=b.rules.length}jQuery("form[name='decisionForm']").get(0).reset(),P.fillFormFromObject("decisionForm",b,""),u.setMailingId(b.mailingId),u.cleanOptions(1),void 0==b.decisionDate&&(b.decisionDate=new Date);var e=jQuery("form[name='decisionForm'] #decisionDate"),g=jQuery("form[name='decisionForm'] #decisionTime");this.checkPresentNodesByTypeList([Z.NODE_TYPE_ACTION_BASED_MAILING,Z.NODE_TYPE_DATE_BASED_MAILING])?(e.parent().parent().hide(),g.parent().parent().parent().parent().hide()):(e.parent().parent().show(),g.parent().parent().parent().parent().show(),e.pickadate("picker").set("select",this.dateAsUTC(b.decisionDate)),g.val(("0"+b.decisionDate.getHours()).slice(-2)+":"+("0"+b.decisionDate.getMinutes()).slice(-2))),this.updateChainFieldsVisibility(),this.updateVisibility(),this.updateDateFormatVisibility(),this.updateOperatorsAvailability(),b.decisionType==constants.decisionTypeDecision&&b.decisionCriteria==constants.decisionReaction&&b.reaction==constants.reactionClickedLink&&0!=b.mailingId&&null!=b.mailingId?this.onMailingSelectChange(b.mailingId,b.linkId):P.resetSelect(jQuery("form[name='decisionForm'] select[name='linkId']")),jQuery("#decision-editor .editor-error-messages").css("display","none")},saveEditor:function(){var a=P.formToObject("decisionForm");if(a.decisionCriteria==constants.decisionProfileField&&0!=f&&(a.mailingId=f),f=0,void 0==a.rules&&(a.rules=[]),a.threshold||(a.threshold=""),this.checkPresentNodesByTypeList([Z.NODE_TYPE_ACTION_BASED_MAILING,Z.NODE_TYPE_DATE_BASED_MAILING]))a.decisionDate=null;else{a.decisionDate=jQuery("form[name='decisionForm'] #decisionDate").pickadate("picker").get("select").obj;var b=jQuery("form[name='decisionForm'] #decisionTime").val();a.decisionDate.setHours(b.substring(0,2)),a.decisionDate.setMinutes(b.substring(3,5))}return a},validateEditor:function(){var a=jQuery("form[name='decisionForm'] input[name='decisionType']:checked").val(),b=jQuery("#decisionCriteria").val(),c=jQuery("form[name='decisionForm'] select[name='mailingId']").val(),e=jQuery("form[name='decisionForm'] select[name='linkId']").val(),f=jQuery("form[name='decisionForm'] select[name='reaction']").val(),g=jQuery("form[name='decisionForm'] input[name='threshold']").val();if(a==constants.decisionTypeDecision&&b==constants.decisionReaction&&0==c)jQuery("#decision-editor .editor-error-messages").html(t("error.workflow.noMailing")),jQuery("#decision-editor .editor-error-messages").css("display","block");else if(a!=constants.decisionTypeDecision||b!=constants.decisionReaction||f!=constants.reactionClickedLink||0!=e&&null!=e)if(a==constants.decisionTypeDecision&&b==constants.decisionProfileField&&0==d.isMailtrackingActive);else if(a==constants.decisionTypeAutoOptimization)if(g){var h=parseInt(g,10);h&&h>0?P.saveCurrentEditor():(jQuery("#decision-editor .editor-error-messages").html(t("error.workflow.noValidThreshold")),jQuery("#decision-editor .editor-error-messages").css("display","block"))}else P.saveCurrentEditor();else P.saveCurrentEditor();else jQuery("#decision-editor .editor-error-messages").html(t("error.workflow.noLinkSelected")),
jQuery("#decision-editor .editor-error-messages").css("display","block")},onTypeChanged:function(){var a=jQuery("form[name='decisionForm'] input[name='decisionType']:checked").val();a==constants.decisionTypeDecision?(this.hideDecisionFormDiv("autoOptimizationPanel"),this.showDecisionFormDiv("decisionPanel")):a==constants.decisionTypeAutoOptimization&&(this.hideDecisionFormDiv("decisionPanel"),this.showDecisionFormDiv("autoOptimizationPanel")),this.updateVisibilityOfRuleMailingReceived()},onDecisionReactionChanged:function(){var a=jQuery("form[name='decisionForm'] select[name='reaction']").val();if(a==constants.reactionClickedLink){this.showDecisionFormDiv("reactionLinkPanel");var b=jQuery("form[name='decisionForm'] select[name='mailingId']").val();this.onMailingSelectChange(b,0)}else this.hideDecisionFormDiv("reactionLinkPanel")},onCriteriaChanged:function(){var a=jQuery("form[name='decisionForm'] select[name='decisionCriteria']").val();a==constants.decisionReaction?(this.hideDecisionFormDiv("decisionProfileFieldPanel"),this.showDecisionFormDiv("decisionReactionPanel")):a==constants.decisionProfileField&&(this.hideDecisionFormDiv("decisionReactionPanel"),this.showDecisionFormDiv("decisionProfileFieldPanel")),this.updateVisibilityOfRuleMailingReceived()},onMailingSelectChange:function(a,b){var c=$("form[name='decisionForm'] select[name='linkId']"),d=parseInt(a,10);d>0?(c.attr("readonly","readonly"),$.ajax({type:"POST",url:constants.workflowURL,data:{method:"getMailingLinks",mailingId:d},success:function(a){c.empty(),$.each(a,function(a,b){c.append($("<option></option>",{value:b.id,text:b.url}))}),c.removeAttr("readonly"),null!=b&&void 0!=b?(c.val(b),P.initSelectWithValueOrChooseFirst(c,b)):P.initSelectWithFirstValue(c)}})):c.empty()},onRuleOperatorChanged:function(a){if(this.curProfileField!=aa){var b=a.closest("tr"),c=b.attr("id")?this.getRuleIndex(b):null;if(a.val()==constants.operatorIs){var d=$(this.createIsOperatorSelect());b.find(".primary-value").parents("td").replaceWith(d),AGN.Initializers.Select(d)}else if(b.find(".primary-value").hasClass("null-select")){var e;e=null==c?this.createSimpleNewRuleValueField():this.createSimpleRuleValueField(c),b.find(".primary-value").parents("td").replaceWith(e)}null==c?this.addNewRuleProperties(b.find(".primary-value")):this.addRuleProperties(b.find(".primary-value"),c)}},getRuleIndex:function(a){return a.attr("id").substring(14)},onProfileFieldChanged:function(){var a=jQuery("form[name='decisionForm'] select[name='profileField']").val();this.curProfileField=a;var b=this;a==aa?(jQuery("#decisionProfileFieldRules .primary-value").each(function(){jQuery(this).parents("td").remove()}),jQuery("form[name='decisionForm'] .rule-row").each(function(){var a=b.getRuleIndex(jQuery(this));jQuery(this).find(".decision-rule-operator").parents("td").after(b.createGenderSelect()),b.addRuleProperties(jQuery(this).find(".primary-value"),a)}),jQuery("#decision_newRule_primaryOperator").parents("td").after(this.createGenderSelect()),this.addNewRuleProperties(jQuery("#decisionProfileFieldRuleAdd .primary-value"))):this.prevProfileField==aa&&(jQuery("#decisionProfileFieldRules .primary-value").each(function(){jQuery(this).parents("td").remove()}),jQuery("form[name='decisionForm'] .rule-row").each(function(){var a=b.getRuleIndex(jQuery(this));jQuery(this).find(".decision-rule-operator").val()==constants.operatorIs?(jQuery(this).find(".primary-value").parents("td").remove(),jQuery(this).find("select").parents("td").after(b.createIsOperatorSelect()),b.addRuleProperties(jQuery(this).find(".primary-value"),a)):jQuery(this).find(".decision-rule-operator").parents("td").after(b.createSimpleRuleValueField(a))}),jQuery("#decision_newRule_primaryOperator").val()==constants.operatorIs?(jQuery("#decisionProfileFieldRuleAdd").find("select").parents("td").after(this.createIsOperatorSelect()),this.addNewRuleProperties(jQuery("#decisionProfileFieldRuleAdd .primaryValue"))):jQuery("#decision_newRule_primaryOperator").parents("td").after(this.createSimpleNewRuleValueField())),this.updateDateFormatVisibility(),this.updateOperatorsAvailability(),this.prevProfileField=a},updateDateFormatVisibility:function(){var a=jQuery("form[name='decisionForm'] select[name='profileField']").val(),b=e[a];"DATE"==b?this.showDecisionFormDiv("decisionDateFormat"):this.hideDecisionFormDiv("decisionDateFormat")},updateOperatorsAvailability:function(){var a=$('form[name="decisionForm"] select[name="profileField"]').val(),b=e[a];$('form[name="decisionForm"] select.decision-rule-operator').each(function(){var c=$(this);c.children("option").prop("disabled",function(){var c=$(this).data("types");return a==aa?"="!=this.text&&"!="!=this.text:!("*"==c||!c)&&c.split(/[\s,]+/).indexOf(b)==-1}),AGN.Initializers.Select(c),null==c.val()&&P.initSelectWithFirstValue(c)})},onRulesChanged:function(){var a=0,b=this;$("form[name='decisionForm'] #decisionProfileFieldAddedRules .rule-row").each(function(){var c=$(this),d=c.attr("id"),e=b.getRuleIndex(c),f=$("#"+d);f.find(".rule-field").attr("name",function(b,c){return c?c.replace(e,a+""):""}),f.find(".delete-rule").attr("data-rule-index",function(b,c){return c==e?a:c}),c.attr("id","decision_rule_"+a),a++}),this.updateChainFieldsVisibility()},updateChainFieldsVisibility:function(){this.rulesNumber>0?(jQuery('form[name="decisionForm"] [name="rules[0].chainOperator"]').css("visibility","hidden"),jQuery('form[name="decisionForm"] #decision_newRule_chainOperator').css("visibility","visible")):jQuery("form[name='decisionForm'] #decision_newRule_chainOperator").css("visibility","hidden")},addRule:function(){var a={chainOperator:$("form[name='decisionForm'] #decision_newRule_chainOperator").val(),parenthesisOpened:$("form[name='decisionForm'] #decision_newRule_parenthesisOpened").val(),primaryOperator:$("form[name='decisionForm'] #decision_newRule_primaryOperator").val(),primaryValue:$("form[name='decisionForm'] #decision_newRule_primaryValue").val(),parenthesisClosed:$("form[name='decisionForm'] #decision_newRule_parenthesisClosed").val()};this.createRuleRow(this.rulesNumber,a),P.fillFormFromObject("decisionForm",a,"rules["+this.rulesNumber+"]."),this.rulesNumber++,$("#decision_newRule_primaryOperator").val()==constants.operatorIs&&$("#decision_newRule_primaryValue").parents("td").replaceWith(this.createSimpleNewRuleValueField()),this.updateChainFieldsVisibility(),this.updateOperatorsAvailability(),$("form[name='decisionForm'] #decisionProfileFieldRuleAdd select").each(function(){P.initSelectWithFirstValue($(this))}),$("form[name='decisionForm'] #decisionProfileFieldRuleAdd input").each(function(){$(this).val("")})},removeRuleRow:function(a){jQuery("form[name='decisionForm'] #decision_rule_"+a).remove(),this.rulesNumber--,this.onRulesChanged()},createRuleRow:function(a,b){var d=this.createSimpleRuleValueField(a),e=c(constants.operators);this.curProfileField==aa?d=this.createGenderSelect():b.primaryOperator==constants.operatorIs&&(d=this.createIsOperatorSelect()),jQuery("form[name='decisionForm'] #decisionProfileFieldAddedRules").append('<tr class="rule-row" id="decision_rule_'+a+'"><td><select name="rules['+a+'].chainOperator" class="rule-field"><option value="'+constants.chainOperatorAnd+'">'+t("workflow.defaults.and")+'</option><option value="'+constants.chainOperatorOr+'">'+t("workflow.defaults.or")+'</option></select></td><td><select name="rules['+a+'].parenthesisOpened" class="parentheses-opened rule-field"><option value="0">&nbsp</option><option value="1">(</option></select></td><td><select name="rules['+a+'].primaryOperator" class="decision-rule-operator rule-field" data-action="decision-rule-operator-change">'+e+"</select></td>"+d+'<td><select name="rules['+a+'].parenthesisClosed" class="parenthesis-closed rule-field"><option value="0">&nbsp</option><option value="1">)</option></select></td><td><a class="mailing_delete delete-rule btn btn-regular btn-alert" href="#" data-action="decision-editor-rule-remove" data-rule-index="'+a+'"><i class="icon icon-minus-circle"></i></a></td></tr>'),this.addRuleProperties(jQuery("#decision_rule_"+a+" .primary-value"),a),AGN.runAll($("form[name='decisionForm'] #decisionProfileFieldAddedRules"))},createGenderSelect:function(){var a=b(constants.genderOptions);return'<td><select class="primary-value form-control">'+a+"</select></td>"},createIsOperatorSelect:function(){return'<td><select class="primary-value null-select form-control"><option value="NULL">NULL</option><option value="NOT_NULL">NOT NULL</option></select></td>'},createSimpleRuleValueField:function(a){return'<td><input name="rules['+a+'].primaryValue" type="text" class="primary-value rule-field form-control"/></td>'},createSimpleNewRuleValueField:function(){return'<td><input id="decision_newRule_primaryValue" type="text" class="primary-value form-control"/></td>'},addRuleProperties:function(a,b){a.filter("select, input").attr("name","rules["+b+"].primaryValue").addClass("rule-field")},addNewRuleProperties:function(a){a.filter("select, input").attr("id","decision_newRule_primaryValue")},updateVisibility:function(){this.onTypeChanged(),this.onDecisionReactionChanged(),this.onCriteriaChanged()},hideDecisionFormDiv:function(a){jQuery("form[name='decisionForm'] #"+a).css("display","none")},showDecisionFormDiv:function(a){jQuery("form[name='decisionForm'] #"+a).css("display","block")},updateVisibilityOfRuleMailingReceived:function(){var a=jQuery("form[name='decisionForm'] input[name='decisionType']:checked").val();if(a==constants.decisionTypeAutoOptimization)this.hideDecisionFormDiv("ruleMailingReceivedWrapper");else if(a==constants.decisionTypeDecision){var b=jQuery("form[name='decisionForm'] select[name='decisionCriteria']").val();if(b==constants.decisionReaction)this.hideDecisionFormDiv("ruleMailingReceivedWrapper");else if(b==constants.decisionProfileField){this.hideDecisionFormDiv("ruleMailingReceivedWrapper");var c=this.showDecisionFormDiv;p.getIncomingChainsForIcon().forEach(function(a){for(var b=a.length-1;b>=0;b--)a[b].type!=Z.NODE_TYPE_MAILING&&a[b].type!=Z.NODE_TYPE_ACTION_BASED_MAILING&&a[b].type!=Z.NODE_TYPE_DATE_BASED_MAILING&&a[b].type!=Z.NODE_TYPE_FOLLOWUP_MAILING||(f=a[b].data.mailingId,c("ruleMailingReceivedWrapper"))})}}},dateAsUTC:function(a){return a?new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())):null},checkPresentNodesByTypeList:function(a){var b=p.getCMNodes().getNodesByTypeList(a);return b&&b.length>0}},v=P.editors.decision}),this.addDomInitializer("recipient-editor-initializer",function(a){P.editors.recipient={formName:"recipientForm",safeToSave:!0,createNewTarget:function(){P.processForward(constants.forwardTargetGroupCreate,"#recipientTargetSelector",[],l)},editTarget:function(a){jQuery("#forwardTargetItemId").val(a),P.processForward(constants.forwardTargetGroupEdit,"#recipientTargetSelector",[],l)},getTitle:function(){return t("workflow.recipient")},fillEditor:function(a){var b=a.data,c=$("form[name='"+this.formName+"']");c.submit(!1),c.get(0).reset(),P.fillFormFromObject(this.formName,b,""),$("#recipientTargetSelect").select2("val",b.targets),$("#recipientTargetSelect").select2({formatSelection:function(a){return'<a href="#" class="btn-link-light" data-action="recipient-editor-target-edit" data-config="targetId: '+a.id+'">'+a.text+"</a>"}})},saveEditor:function(){var a=P.formToObject(this.formName);return a.targets=$("#recipientTargetSelect").val(),a}},w=P.editors.recipient}),this.addDomInitializer("parameter-editor-initializer",function(){P.editors.parameter={formName:"parameterForm",getTitle:function(){return t("workflow.parameter")},fillEditor:function(a){var b=a.data;jQuery("form[name='"+this.formName+"']").submit(!1),jQuery("form[name='"+this.formName+"']").get(0).reset(),P.fillFormFromObject(this.formName,b,"")},saveEditor:function(){return P.formToObject(this.formName)}}}),this.addDomInitializer("ownworkflow-copy-dialog-initializer",function(){x={workflowId:0,ownWorkflowCopyDialogResponse:function(a){return jQuery("#ownworkflow-use-original-dialog").dialog("close"),p.expandNodeUseOriginal(a,this.workflowId),!1},showDialog:function(a){this.workflowId=a,jQuery("#ownworkflow-use-original-dialog").dialog({title:t("workflow.ownWorkflow.copy_title"),dialogClass:"no-close",open:function(a,b){var c=jQuery("#ui-dialog-title-ownworkflow-use-original-dialog");c.css("padding-top",8),c.css("padding-bottom",8)},width:"auto",modal:!0,resizable:!1})}}}),this.addDomInitializer("ownworkflow-editor-initializer",function(){P.editors.ownWorkflow={formName:"ownWorkflowForm",node:null,getTitle:function(){return t("workflow.ownWorkflow.title")},fillEditor:function(a){this.node=a;var b=a.data;jQuery("form[name='"+this.formName+"']").submit(!1),jQuery("form[name='"+this.formName+"']").get(0).reset(),P.fillFormFromObject(this.formName,b,"")},saveEditor:function(){var a=P.formToObject(this.formName);return a.copyContent="true"==a.copyContent,a},saveWithCheck:function(){jQuery("#ownWorkflow-editor .editor-error-messages").css("display","none"),jQuery("#ownWorkflow-editor").css("display","none"),P.saveCurrentEditor(!0),P.openNode(this.node,!0),P.cancelEditor()},cancelEditor:function(){jQuery("#ownWorkflow-editor .editor-error-messages").css("display","none"),P.cancelEditor()},closeEditor:function(){P.deleteNode(this.node.id,!1,!1)}},y=P.editors.ownWorkflow}),this.addDomInitializer("mailing-editor-initializer",function(a){var b=a.find("#mailing-editor-data").json();A=new AGN.Lib.WM.MailingEditorBase(b,p,l),P.editors.mailing={formName:"mailingForm",safeToSave:!0,getTitle:function(){return t("workflow.defaults.mailing")},fillEditor:function(a){var b=a.data;jQuery("form[name='"+this.formName+"']").submit(!1),jQuery("form[name='"+this.formName+"']").get(0).reset(),P.fillFormFromObject(this.formName,b,""),A.fillEditorBase(a),jQuery("#mailing-editor .editor-error-messages").css("display","none")},createNewMailing:function(){A.createNewMailing(constants.forwardMailingCreate)},editMailing:function(){A.editMailing(constants.forwardMailingEdit)},copyMailing:function(){A.copyMailing(constants.forwardMailingCopy)},saveEditor:function(){return A.setNodeFields(),A.disableInputs(),P.formToObject(this.formName)},saveWithCheckStatus:function(){var a=A.showSecurityQuestion();a&&P.saveCurrentEditor(!1,A)}},z=P.editors.mailing}),this.addDomInitializer("form-editor-initializer",function(a){P.editors.form={formName:"formsForm",safeToSave:!0,getTitle:function(){return t("forms")},createNewUserForm:function(){P.processForward(constants.forwardUserFormCreate,"#formsEditorUserFormId",[],l)},editForm:function(){var a=jQuery("form[name='"+this.formName+"'] select[name=userFormId]"),b=a.val();jQuery("#forwardTargetItemId").val(b),P.processForward(constants.forwardUserFormEdit,"form[name='"+this.formName+"'] select[name=userFormId]",[],l)},fillEditor:function(a){var b=a.data;jQuery("form[name='"+this.formName+"']").submit(!1),jQuery("form[name='"+this.formName+"']").get(0).reset(),P.fillFormFromObject(this.formName,b,""),this.addLinks(),jQuery("#form-editor .editor-error-messages").css("display","none")},validateEditor:function(){var a=jQuery("form[name='"+this.formName+"'] select[name=userFormId]");a.val()>0?P.saveCurrentEditor():(jQuery("#form-editor .editor-error-messages").html(t("error.workflow.noForm")),jQuery("#form-editor .editor-error-messages").css("display","block"))},onChange:function(){this.addLinks()},addLinks:function(){var a=jQuery("form[name='"+this.formName+"'] select[name=userFormId]"),b=a.val();b>0?(jQuery("#form-editor #editFormLink").css("display","block"),jQuery("#form-editor #createFormLink").css("display","none")):(jQuery("#form-editor #createFormLink").css("display","block"),jQuery("#form-editor #editFormLink").css("display","none"))},saveEditor:function(){return P.formToObject(this.formName)},isSetFilledAllowed:function(){var a=!1;return jQuery("#formsEditorUserFormId").val()>0&&(a=!0),a}},B=P.editors.form}),this.addDomInitializer("report-editor-initializer",function(a){P.editors.report={safeToSave:!0,getTitle:function(){return t("report")},createNewReport:function(){P.processForward(constants.forwardReportCreate,"#reportSelector",[],l)},editReport:function(a){jQuery("#forwardTargetItemId").val(a),P.processForward(constants.forwardReportEdit,"#reportSelector",[],l)},fillEditor:function(a){var b=a.data;P.initSelectWithFirstValue(jQuery("#reportSelect")),jQuery("#report-editor .editor-error-messages").css("display","none"),jQuery("#reportSelect").select2("val",b.reports),jQuery("#reportSelect").select2({formatSelection:function(a){return'<a href="#" class="btn-link-light" data-action="report-editor-change" data-config="reportId:'+a.id+'">'+a.text+"</a>"}})},validateEditor:function(){var a=$("#reportSelect").val();if(a&&a.length>0)P.saveCurrentEditor();else{var b=$("#report-editor").find(".editor-error-messages");b.html(t("workflow.report.error.no_report")),b.css("display","block")}},saveEditor:function(){var a={reports:jQuery("#reportSelect").val()};return a},isSetFilledAllowed:function(){var a=!1,b=jQuery("#reportSelect").val();return b&&b.length>0&&(a=!0),a}},C=P.editors.report}),this.addDomInitializer("icon-comment-editor-initializer",function(a){P.editors["icon-comment"]={formName:"iconCommentForm",safeToSave:!0,fillEditor:function(a){var b=a.data;$("#iconComment").val(b.iconComment)},saveEditor:function(){var a=$("#iconComment").val();P.saveIconComment(a),this.cancelEditor()},cancelEditor:function(){return $("#icon-comment-editor").dialog("close"),!1}},V=P.editors["icon-comment"]}),this.addDomInitializer("export-editor-initializer",function(a){var b=a.find("#export-editor-data").json();P.editors.export={formName:"exportForm",safeToSave:!0,getTitle:function(){return t("auto_export")},createNewAutoExport:function(){P.processForward(constants.forwardAutoExportCreate,"form[name='"+this.formName+"'] select[name=importexportId]",[],l)},editAutoExport:function(){var a=jQuery("form[name='"+this.formName+"'] select[name=importexportId]"),b=a.val();jQuery("#forwardTargetItemId").val(b),P.processForward(constants.forwardAutoExportEdit,"form[name='"+this.formName+"'] select[name=importexportId]",[],l)},fillEditor:function(a){var c=a.data;jQuery("form[name='"+this.formName+"']").submit(!1),jQuery("form[name='"+this.formName+"']").get(0).reset(),P.fillFormFromObject(this.formName,c,""),this.addLinks(),jQuery("#export-editor .editor-error-messages").css("display","none"),"true"==b.isDisabled&&(jQuery("#import-editor .editor-error-messages").html(t("error.workflow.autoExportPermission")),jQuery("#import-editor .editor-error-messages").css("display","block"))},validateEditor:function(){var a=$("#export-editor .editor-error-messages"),b=jQuery("form[name='"+this.formName+"'] select[name=importexportId]");b.val()>0?$.ajax({type:"POST",url:constants.workflowURL,data:{method:"validateDependency",workflowId:p.workflowId||0,type:ba,entityId:b.val()}}).done(function(b){b.valid===!0?P.saveCurrentEditor():(a.html(t("error.workflow.autoExportInUse")),a.css("display","block"))}).fail(function(){a.html(t("Error")),a.css("display","block")}):(a.html(t("error.workflow.noExport")),a.css("display","block"))},onChange:function(){this.addLinks()},addLinks:function(){var a=jQuery("form[name='"+this.formName+"'] select[name=importexportId]"),b=a.val();b>0?(jQuery("#export-editor #editAutoExportLink").css("display","block"),jQuery("#export-editor #createAutoExportLink").css("display","none")):(jQuery("#export-editor #createAutoExportLink").css("display","block"),jQuery("#export-editor #editAutoExportLink").css("display","none"))},saveEditor:function(){return P.formToObject(this.formName)},isSetFilledAllowed:function(){var a=$("form[name='"+this.formName+"'] select[name=importexportId]"),b=a.find(":selected");return!(0==a.val()||1!=b.data("is-available"))}},D=P.editors.export}),this.addDomInitializer("deadline-editor-initializer",function(a){P.editors.deadline={panelIds:["fixedDeadlinePanel","delayDeadlinePanel"],timeUnitIds:["deadlineTimeUnitMinute","deadlineTimeUnitHour","deadlineTimeUnitDay","deadlineTimeUnitWeek","deadlineTimeUnitMonth"],formName:"deadlineForm",getDefaultDelayData:function(a){var b={};return a===constants.deadlineTypeDelay&&this.isPrecededByImportIcon&&(b={timeUnit:constants.deadlineTimeUnitHour,delayValue:constants.defaultImportDelayLimit}),b},getTitle:function(){return t("workflow.deadline.title")},fillEditor:function(a){var b=a.data;$("#deadline-editor").find(".editor-error-messages").css("display","none"),this.isPrecededByImportIcon=this.checkPrecededByImportIcon(a);var c=$("form[name='"+this.formName+"']");c.submit(!1),$("form[name='"+this.formName+"'] #deadlineDate").pickadate("picker").set("select",this.dateAsUTC(b.date||new Date)),this.fillDelayData(c,b),$("form[name='"+this.formName+"'] #time").val(("0"+b.hour).slice(-2)+":"+("0"+b.minute).slice(-2))},fillDelayData:function(a,b){a.get(0).reset();var c=$("form[name='"+this.formName+"'] input[name='deadlineType']:checked").val(),d=this.getDefaultDelayData(c);P.fillFormFromObject(this.formName,b,"",d),this.updateVisibility();var e=b.delayValue||d.delayValue;P.initSelectWithValueOrChooseFirst($("form[name='"+this.formName+"'] select[name='delayValue']"),e)},saveEditor:function(){var a=P.formToObject(this.formName);a.date=$("form[name='"+this.formName+"'] #deadlineDate").pickadate("picker").get("select").obj;var b=$("form[name='"+this.formName+"'] #time").val();return a.hour=b.substring(0,2),a.minute=b.substring(3,5),a},updateVisibility:function(){var a=$("form[name='"+this.formName+"'] input[name='deadlineType']:checked").val();if(this.checkPresentNodesByTypeList([Z.NODE_TYPE_ACTION_BASED_MAILING,Z.NODE_TYPE_DATE_BASED_MAILING])?($("form[name='"+this.formName+"'] input#typeFixedDeadline").parent().parent().parent().hide(),$("form[name='"+this.formName+"'] input[value='"+constants.deadlineTypeDelay+"']").prop("checked",!0),a=constants.deadlineTypeDelay):$("form[name='"+this.formName+"'] input#typeFixedDeadline").parent().parent().parent().show(),a===constants.deadlineTypeDelay){this.switchPanelsVisibility("delayDeadlinePanel"),this.switchTimeContainerVisibility(!1);var b=$("form[name='"+this.formName+"'] select[name='timeUnit']").val();switch(b){case constants.deadlineTimeUnitMinute:this.switchTimeUnitsVisibility("deadlineTimeUnitMinute");break;case constants.deadlineTimeUnitHour:this.switchTimeUnitsVisibility("deadlineTimeUnitHour");break;case constants.deadlineTimeUnitDay:this.switchTimeUnitsVisibility("deadlineTimeUnitDay"),this.switchTimeContainerVisibility(!0),$("#deadlineTimeHelp").removeAttr("style");break;case constants.deadlineTimeUnitWeek:this.switchTimeUnitsVisibility("deadlineTimeUnitWeek");break;case constants.deadlineTimeUnitMonth:this.switchTimeUnitsVisibility("deadlineTimeUnitMonth")}$("form[name='"+this.formName+"'] input[name='useTime']").css("display","inline")}else a===constants.deadlineTypeFixedDeadline&&(this.switchPanelsVisibility("fixedDeadlinePanel"),this.switchTimeContainerVisibility(!0),this.hideDiv("deadlineTimeHelp"),$("form[name='"+this.formName+"'] input[name='useTime']").css("display","none"))},switchPanelsVisibility:function(a){var b=this;this.panelIds.forEach(function(c){c!==a&&b.hideDiv(c)}),this.showDiv(a)},switchTimeUnitsVisibility:function(a){var b=this;this.timeUnitIds.forEach(function(c){c!==a&&(b.hideDiv(c),$("#"+c+" select").removeAttr("name"))}),this.showDiv(a),$("#"+a+" select").attr("name","delayValue")},switchTimeContainerVisibility:function(a){var b=this;a?b.showDiv("deadlineTimeContainer"):b.hideDiv("deadlineTimeContainer")},hideAllItems:function(a){var b=this;a.forEach(function(a){b.hideDiv(a)})},validateEditor:function(){var a=!0,b=constants.defaultImportDelayLimit;if(this.isPrecededByImportIcon){var c=$("form[name='"+this.formName+"'] input[name='deadlineType']:checked").val();if(c===constants.deadlineTypeDelay){var d=$("form[name='"+this.formName+"'] select[name='timeUnit']").val();d===constants.deadlineTimeUnitMinute?a=!1:d===constants.deadlineTimeUnitHour&&$("#deadlineTimeUnitHour select").val()<b&&(a=!1)}}if(a)P.saveCurrentEditor();else{var e=$("#deadline-editor").find(".editor-error-messages");e.html(t("error.workflow.deadlineIsTooShortForImport",b)),e.css("display","block")}},onTimeChanged:function(){var a=$("form[name='"+this.formName+"'] input[name='deadlineType']:checked").val(),b=$("form[name='"+this.formName+"'] select[name='timeUnit']").val();a==constants.deadlineTypeDelay&&b==constants.deadlineTimeUnitDay&&$("form[name='"+this.formName+"'] input[name='useTime']").prop("checked",!0)},hideDiv:function(a){$("form[name='"+this.formName+"'] #"+a).css("display","none")},showDiv:function(a){$("form[name='"+this.formName+"'] #"+a).css("display","block")},dateAsUTC:function(a){return a?new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())):null},checkPresentNodesByTypeList:function(a){var b=p.getCMNodes().getNodesByTypeList(a);return b&&b.length>0},checkPrecededByImportIcon:function(a){var b=p.getCMNodes();return p.getNodeIncomingConnections(a).some(function(a){var c=b.getNodeById(a.source);return c&&c.type==Z.NODE_TYPE_IMPORT})}},E=P.editors.deadline}),this.addDomInitializer("import-editor-initializer",function(a){var b=a.find("#import-editor-data").json();P.editors.import={formName:"importForm",safeToSave:!0,getTitle:function(){return t("auto_import")},createNewAutoImport:function(){P.processForward(constants.forwardAutoImportCreate,"#importexportId",[],l)},editAutoImport:function(){var a=jQuery("form[name='"+this.formName+"'] select[name=importexportId]"),b=a.val();jQuery("#forwardTargetItemId").val(b),P.processForward(constants.forwardAutoImportEdit,"form[name='"+this.formName+"'] select[name=importexportId]",[],l)},fillEditor:function(a){var c=a.data;jQuery("form[name='"+this.formName+"']").submit(!1),jQuery("form[name='"+this.formName+"']").get(0).reset(),P.fillFormFromObject(this.formName,c,""),this.addLinks(),jQuery("#import-editor .editor-error-messages").css("display","none"),"true"==b.isDisabled&&(jQuery("#import-editor .editor-error-messages").html(t("error.workflow.autoImportPermission")),jQuery("#import-editor .editor-error-messages").css("display","block"))},validateEditor:function(){var a=$("#import-editor .editor-error-messages"),b=jQuery("form[name='"+this.formName+"'] select[name=importexportId]");b.val()>0?$.ajax({type:"POST",url:constants.workflowURL,data:{method:"validateDependency",workflowId:p.workflowId||0,type:ca,entityId:b.val()}}).done(function(b){b.valid===!0?P.saveCurrentEditor():(a.html(t("error.workflow.autoImportInUse")),a.css("display","block"))}).fail(function(){a.html(t("Error")),a.css("display","block")}):(a.html(t("error.workflow.noImport")),a.css("display","block"))},onChange:function(){this.addLinks()},addLinks:function(){var a=jQuery("form[name='"+this.formName+"'] select[name=importexportId]"),b=a.val();b>0?(jQuery("#import-editor #editAutoImportLink").css("display","block"),jQuery("#import-editor #createAutoImportLink").css("display","none")):(jQuery("#import-editor #createAutoImportLink").css("display","block"),jQuery("#import-editor #editAutoImportLink").css("display","none"))},saveEditor:function(){return P.formToObject(this.formName)},isSetFilledAllowed:function(){var a=$("form[name='"+this.formName+"'] select[name=importexportId]"),b=a.find(":selected");return!(0==a.val()||1!=b.data("is-available"))}},F=P.editors.import}),this.addDomInitializer("archive-editor-initializer",function(a){P.editors.archive={formName:"archiveForm",safeToSave:!0,getTitle:function(){return t("workflow.mailing.archive")},createNewArchive:function(){P.processForward(constants.forwardArchiveCreate,"#settings_general_campaign",[],l)},fillEditor:function(a){var b=a.data;jQuery("form[name='"+this.formName+"']").submit(!1),jQuery("form[name='"+this.formName+"']").get(0).reset(),P.fillFormFromObject(this.formName,b,"")},saveEditor:function(){return P.formToObject(this.formName)}},G=P.editors.archive}),this.addDomInitializer("action-mailing-editor-initializer",function(a){var b=a.find("#action-mailing-editor-data").json();H=new AGN.Lib.WM.MailingEditorBase(b,p,l),P.editors.actionbased_mailing={formName:"actionbasedMailingForm",safeToSave:!1,getTitle:function(){return t("workflow.mailing.action_based")},fillEditor:function(a){var b=a.data;jQuery("form[name='"+this.formName+"']").submit(!1),jQuery("form[name='"+this.formName+"']").get(0).reset(),P.fillFormFromObject(this.formName,b,""),H.fillEditorBase(a),jQuery("#actionbased_mailing-editor .editor-error-messages").css("display","none")},createNewMailing:function(){H.createNewMailing(constants.forwardMailingCreate)},editMailing:function(a){H.editMailing(constants.forwardMailingEdit)},saveEditor:function(){return H.setNodeFields(),H.disableInputs(),P.formToObject(this.formName)},saveWithCheckStatus:function(){var a=H.showSecurityQuestion();a&&P.saveCurrentEditor(!1,H)},copyMailing:function(){H.copyMailing(constants.forwardMailingCopy)}},I=P.editors.actionbased_mailing}),this.addDomInitializer("date-mailing-initializer",function(a){var b=a.find("#date-mailing-editor-data").json();K=new AGN.Lib.WM.MailingEditorBase(b,p,l),P.editors.datebased_mailing={formName:"datebasedMailingForm",safeToSave:!1,getTitle:function(){return t("workflow.mailing.date_based")},fillEditor:function(a){var b=a.data;jQuery("form[name='"+this.formName+"']").submit(!1),jQuery("form[name='"+this.formName+"']").get(0).reset(),P.fillFormFromObject(this.formName,b,""),K.fillEditorBase(a),jQuery("#datebased_mailing-editor .editor-error-messages").css("display","none")},saveEditor:function(){return K.setNodeFields(),K.disableInputs(),P.formToObject(this.formName)},createNewMailing:function(){K.createNewMailing(constants.forwardMailingCreate)},editMailing:function(){K.editMailing(constants.forwardMailingEdit)},saveWithCheckStatus:function(){var a=K.showSecurityQuestion();a&&P.saveCurrentEditor(!1,K)},copyMailing:function(){K.copyMailing(constants.forwardMailingCopy)}},J=P.editors.datebased_mailing}),this.addDomInitializer("followup-mailing-editor-initializer",function(a){var b=a.find("#followup-mailing-base-data").json(),c=a.find("#followup-mailing-data").json();b.dropDownEl=jQuery("#followup-m-editor"),L=new AGN.Lib.WM.MailingEditorBase(b,p,l),M=new AGN.Lib.WM.MailingEditorBase(c,p,l),L.selectedFollowUpMailingId=0,L.mailingsInCampaign=[],L.findMailingIconsBefore=function(a){var b,c,d=p.getCMNodes().getNodes(),e=p.getNodeIncomingConnections(a);for("mailing"!==a.type&&"datebased_mailing"!==a.type&&"actionbased_mailing"!==a.type||this.mailingsInCampaign.push(a.data.mailingId),c=0;c<e.length;c++)b=_.findKey(d,function(a){return a.element.id===e[c].source}),this.findMailingIconsBefore(d[b])},L.getMailingsByWorkStatus=function(a,b,c,d){var e=this,f=jQuery(this.formNameJId+" "+this.selectNameJId);this.mailingsInCampaign=[],this.findMailingIconsBefore(this.node);var g=_.uniq(this.mailingsInCampaign).toString();f.attr("readonly","readonly"),jQuery.ajax({type:"POST",url:constants.workflowURL,data:{method:"getMailingsByWorkStatus",mailingTypes:this.mailingTypesForLoading.join(","),status:a,sort:b,order:c,mailingId:this.selectedFollowUpMailingId,parentMailingId:jQuery(this.formNameJId+" "+this.selectNameJId).val(),mailingStatus:"W",takeMailsForPeriod:!0,mailingsInCampaign:g},success:function(g){f.html(""),f.append('<option value="0">'+t("workflow.defaults.no_mailing")+"</option>");for(var h=0;h<g.length;h++){var i=g[h],j="",k="";"mailing.status.sent"!=i.WORK_STATUS&&"mailing.status.norecipients"!=i.WORK_STATUS||(j="style='color: #808080;'"),d==i.MAILING_ID&&(k="selected"),f.append("<option "+j+" value='"+i.MAILING_ID+"' status='"+i.WORK_STATUS+"' senddate='"+i.SENDDATE+"' "+k+">"+i.SHORTNAME+"</option>")}f.removeAttr("readonly"),e.mailingsStatus=a,e.mailingsSort=b,e.mailingsOrder=c,f.val(e.mailingId),P.initSelectWithValueOrChooseFirst(f,e.mailingId)}})},M.onMailingSelectChange=function(a){L.selectedFollowUpMailingId=a,this.setSelectMailingOptions(a)},P.editors.followup_mailing={
formName:"followupMailingForm",safeToSave:!1,getTitle:function(){return t("workflow.mailing.followup")},fillEditor:function(a){M.fillEditorBase(a),L.fillEditorBase(a);var b=a.data;jQuery("form[name='"+this.formName+"']").submit(!1),jQuery("form[name='"+this.formName+"']").get(0).reset(),P.fillFormFromObject(this.formName,b,""),jQuery("#followup_mailing-editor .editor-error-messages").css("display","none"),"true"==c.disableFollowup&&(jQuery("#followup_mailing-editor .editor-error-messages").html(t("error.workflow.followupPermission")),jQuery("#followup_mailing-editor .editor-error-messages").css("display","block"),L.disableInputs())},createNewMailing:function(){L.node.data.baseMailingId=L.getSelectedMailingOption().val(),L.node.data.decisionCriterion=L.getSelectedDecisionOption().val(),M.createNewMailing(constants.forwardMailingCreate)},editMailing:function(){M.editMailing(constants.forwardMailingEdit)},copyMailing:function(){L.node.data.baseMailingId=L.getSelectedMailingOption().val(),L.node.data.decisionCriterion=L.getSelectedDecisionOption().val(),M.copyMailing(constants.forwardMailingCopy)},saveEditor:function(){return L.disableInputs(),M.disableInputs(),this.setNodeFields(),P.formToObject(this.formName)},saveWithCheckStatus:function(){var a=M.showSecurityQuestion();a&&P.saveCurrentEditor(!1,M)},validateEditor:function(a){var b=jQuery(L.formNameJId+" "+L.selectNameJId),c=jQuery(M.formNameJId+" "+M.selectNameJId);if(b.val()>0&&c.val()>0)a?a():P.saveCurrentEditor();else{var d=$("#followup_mailing-editor").find(".editor-error-messages");d.html(t("error.workflow.noMailing")),d.css("display","block")}},setNodeFields:function(){this.setNodeFilled(L,M),this.setNodeIconTitle(L,M)},setNodeFilled:function(a,b){a.node.filled=parseInt(a.mailingId,10)>0&&parseInt(b.mailingId,10)>0},setNodeIconTitle:function(a,b){a.node.iconTitle="",parseInt(a.mailingId,10)>0?parseInt(b.mailingId,10)>0?a.node.iconTitle=a.getSelectedMailingOption().html()+":/"+b.getSelectedMailingOption().html():a.node.iconTitle=a.getSelectedMailingOption().html():a.node.iconTitle=" : "+b.getSelectedMailingOption().html()}},N=P.editors.followup_mailing}),this.addDomInitializer("copy-dialog-initializer",function(a){var b=a.find("#copy-editor-data").json();O={workflowId:{},workflowCopyDialogClose:function(){return jQuery("#workflow-copy-dialog").dialog("close"),!1},workflowCopyDialogResponse:function(a){return jQuery("#workflow-copy-dialog").dialog("close"),window.location=b.url+"&workflowId="+this.workflowId+"&isWithContent="+(a?"true":"false"),!1},showDialog:function(a){this.workflowId=a;var b=!0,c=p.getCMNodes().getNodes();for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];if(e.filled){b=!1;break}}b?(jQuery("#workflow-copy-dialog div.form-group div.col-xs-12 div.well").html(t("workflow.copy.question")),jQuery("#workflowBtnWithContent").hide(),jQuery("#workflowBtnOnlyChain").hide(),jQuery("#workflowBtnCopy").show()):(jQuery("#workflow-copy-dialog div.form-group div.col-xs-12 div.well").html(t("workflow.copy.question_with_content")),jQuery("#workflowBtnCopy").hide(),jQuery("#workflowBtnWithContent").show(),jQuery("#workflowBtnOnlyChain").show()),jQuery("#workflow-copy-dialog").dialog({title:'<span class="dialog-fat-title">'+t("workflow.ownWorkflow.copy_title")+"</span>",dialogClass:"no-close",width:650,modal:!0,resizable:!1})}}}),this.addDomInitializer("save-before-pdf-initializer",function(){Q={submitDialog:function(a){return a&&l(!0),jQuery("#workflow-save-before-pdf-dialog").dialog("close"),!1},showDialog:function(a,b){var c="";a?c=t("workflow.pdf.save_new_campaign"):b&&(c=t("workflow.pdf.save_modified_campaign")),jQuery("#workflow-save-before-pdf-dialog").find(".well").html(c),jQuery("#workflow-save-before-pdf-dialog").dialog({title:'<span class="dialog-fat-title">'+t("workflow.pdf.save_campaign")+"</span>",dialogClass:"no-close",width:650,modal:!0,resizable:!1})}}}),this.addDomInitializer("open-edit-icon-initializer",function(a){var b=a.json(),c=b.nodeId;if(c){var d=p.getCampaignManagerNodes();d.setOpenNode(c,b.elementValue),d.openNodeIcon()}}),this.addDomInitializer("testing-dialog-initializer",function(a){var b={},c=a.data("config"),d=AGN.Lib.Helpers.objFromString(c),e=function(){};b={showDialog:function(a){a instanceof Function&&(e=a),jQuery("#workflow-testing-dialog").dialog({title:'<span class="dialog-fat-title">'+t("workflow.single")+":&nbsp;"+d.shortname+"</span>",dialogClass:"no-close",width:650,modal:!0,resizable:!1})},closeDialog:function(){return $("#workflow-testing-dialog").dialog("close"),!1},acceptDialog:function(){$("#workflow-testing-dialog").dialog("close"),e(b)}},q.workflowTestingDialogHandler=b}),this.addAction({click:"workflowTestingDialogSubmitButton"},function(){q.workflowTestingDialogHandler.acceptDialog()}),this.addAction({click:"workflowTestingDialogCancelButton"},function(){q.workflowTestingDialogHandler.closeDialog()}),this.addAction({click:"workflowTestBtn"},function(){q.workflowTestingDialogHandler.showDialog(function(){var a=$("input#workflow_active"),b=a.prop("disabled");a.prop("disabled",!0),h(!0),a.prop("disabled",b)})}),this.addAction({click:"editor-save"},function(){return P.saveCurrentEditor(),!1}),this.addAction({click:"mailing-editor-save"},function(){return A.validateEditor(z.saveWithCheckStatus),!1}),this.addAction({click:"mailing-editor-base-no"},function(){return A.transferRequiredMailingData(),!1}),this.addAction({click:"mailing-editor-base-transfer-data"},function(){return A.transferMailingData(),!1}),this.addAction({click:"mailing-editor-base-close"},function(){return A.closeOneMailinglistWarningDialog(),!1}),this.addAction({click:"mailing-editor-base-accept"},function(){return A.acceptOneMailinglistPerCampaign(),!1}),this.addAction({click:"mailing-editor-base-sort-shortname"},function(){return A.onMailingSortClick("shortname","shortname",P),!1}),this.addAction({click:"mailing-editor-base-sort-data"},function(){var a=d(this.el);return A.onMailingSortClick("shortname",a.sortByDate,P),!1}),this.addAction({change:"mailing-editor-base-status-change"},function(){return A.onMailingsStatusChange(this.el.val()),!1}),this.addAction({change:"mailing-editor-base-select-change"},function(){return A.onMailingSelectChange(this.el.val()),!1}),this.addAction({click:"mailing-editor-base-secure-cancel"},function(){return A.cancelSecurityDialog(),!1}),this.addAction({click:"mailing-editor-copy"},function(){return P.curEditor.copyMailing(),!1}),this.addAction({click:"mailing-editor-new"},function(){return P.curEditor.createNewMailing(),!1}),this.addAction({click:"mailing-editor-edit"},function(){return P.curEditor.editMailing(),!1}),this.addAction({click:"mailing-editor-base-toggle-settings"},function(){var a=d(this.el);return A.toggleSendSettings(a.editorId),!1}),this.addAction({change:"form-editor-change"},function(){return B.onChange(),!1}),this.addAction({click:"form-editor-new"},function(){return B.createNewUserForm(),!1}),this.addAction({click:"form-editor-form-edit"},function(){return B.editForm(),!1}),this.addAction({click:"form-editor-save"},function(){return B.validateEditor(),!1}),this.addAction({click:"report-editor-change"},function(){var a=d(this.el);return C.editReport(a.reportId),!1}),this.addAction({click:"report-editor-new"},function(){return C.createNewReport(),!1}),this.addAction({click:"report-editor-save"},function(){return C.validateEditor(),!1}),this.addAction({change:"export-editor-change"},function(){return D.onChange(),!1}),this.addAction({click:"export-editor-new"},function(){return D.createNewAutoExport(),!1}),this.addAction({click:"export-editor-autoexport"},function(){return D.editAutoExport(),!1}),this.addAction({click:"export-editor-save"},function(){return D.validateEditor(),!1}),this.addAction({change:"deadline-editor-update"},function(){return E.updateVisibility(),!1}),this.addAction({change:"deadline-editor-time-change"},function(){return E.onTimeChanged(),!1}),this.addAction({click:"editor-cancel"},function(){return P.cancelEditor(),!1}),this.addAction({change:"import-editor-change"},function(){return F.onChange(),!1}),this.addAction({click:"import-editor-new"},function(){return F.createNewAutoImport(),!1}),this.addAction({click:"import-editor-update"},function(){return F.editAutoImport(),!1}),this.addAction({click:"import-editor-save"},function(){return F.validateEditor(),!1}),this.addAction({click:"icon-comment-editor-save"},function(){return V.saveEditor(),!1}),this.addAction({click:"icon-comment-editor-cancel"},function(){return V.cancelEditor(),!1}),this.addAction({click:"archive-editor-new"},function(){return G.createNewArchive(),!1}),this.addAction({click:"action-mailing-editor-save"},function(){return H.validateEditor(I.saveWithCheckStatus),!1}),this.addAction({click:"action-mailing-editor-base-sort-shortname"},function(){return H.onMailingSortClick("shortname","shortname",P),!1}),this.addAction({click:"action-mailing-editor-base-sort-data"},function(){var a=d(this.el);return H.onMailingSortClick("shortname",a.sortByDate,P),!1}),this.addAction({change:"action-mailing-editor-base-status-change"},function(){return H.onMailingsStatusChange(this.el.val()),!1}),this.addAction({change:"action-mailing-editor-base-select-change"},function(){return H.onMailingSelectChange(this.el.val()),!1}),this.addAction({click:"action-mailing-editor-base-no"},function(){return H.transferRequiredMailingData(),!1}),this.addAction({click:"action-mailing-editor-base-secure-cancel"},function(){return H.cancelSecurityDialog(),!1}),this.addAction({click:"action-mailing-editor-base-transfer-data"},function(){return H.transferMailingData(),!1}),this.addAction({click:"date-mailing-editor-base-sort-shortname"},function(){return K.onMailingSortClick("shortname","shortname",P),!1}),this.addAction({click:"date-mailing-editor-base-sort-data"},function(){var a=d(this.el);return K.onMailingSortClick("shortname",a.sortByDate,P),!1}),this.addAction({change:"date-mailing-editor-base-status-change"},function(){return K.onMailingsStatusChange(this.el.val()),!1}),this.addAction({change:"date-mailing-editor-base-select-change"},function(){return K.onMailingSelectChange(this.el.val()),!1}),this.addAction({click:"date-mailing-editor-base-no"},function(){return K.transferRequiredMailingData(),!1}),this.addAction({click:"date-mailing-editor-base-transfer-data"},function(){return K.transferMailingData(),!1}),this.addAction({click:"followup-mailing-editor-base-sort-shortname"},function(){return M.onMailingSortClick("shortname","shortname",P),!1}),this.addAction({click:"followup-mailing-editor-base-sort-data"},function(){var a=d(this.el);return M.onMailingSortClick("shortname",a.sortByDate,P),!1}),this.addAction({change:"followup-mailing-editor-base-status-change"},function(){return M.onMailingsStatusChange(this.el.val()),!1}),this.addAction({change:"followup-mailing-editor-base-select-change"},function(){return M.onMailingSelectChange(this.el.val()),!1}),this.addAction({click:"followup-base-mailing-editor-base-sort-shortname"},function(){return L.onMailingSortClick("shortname","shortname"),!1}),this.addAction({click:"followup-base-mailing-editor-base-sort-data"},function(){var a=d(this.el);return L.onMailingSortClick("shortname",a.sortByDate),!1}),this.addAction({change:"followup-base-mailing-editor-base-status-change"},function(){return L.onMailingsStatusChange(this.el.val()),!1}),this.addAction({change:"followup-base-mailing-editor-base-select-change"},function(){return L.onMailingSelectChange(this.el.val()),!1}),this.addAction({click:"followup-base-mailing-editor-base-no"},function(){return L.transferRequiredMailingData(),!1}),this.addAction({click:"followup-base-mailing-editor-base-transfer-data"},function(){return L.transferMailingData(),!1}),this.addAction({click:"save-before-pdf-btn-save"},function(){return Q.submitDialog(!0),!1}),this.addAction({click:"save-before-pdf-btn-cancel"},function(){return Q.submitDialog(!1),!1}),this.addAction({click:"workflowSaveBtn"},function(){l(!0)}),this.addAction({click:"workflowSaveBtnModal"},function(){l(!0)}),this.addAction({click:"campaignEditorEnlarge"},function(){n()}),W.new({click:"[data-close-campaign-editor-modal]"},function(){m()}),this.addAction({change:"workflow-view-change-status"},function(){$("#workflow_active").is(":checked")?$("#workflow-status").val(constants.statusActive):$("#workflow-status").val(constants.statusInactive)}),this.addAction({click:"workflowCopyBtn"},function(){O.showDialog(q.workflowId)}),this.addAction({click:"workflowStatsBtn"},function(){i(q.workflowId,this.el)}),this.addAction({change:"start-editor-execution-changed"},function(){r.onExecutionChanged()}),this.addAction({change:"start-editor-event-changed"},function(){r.onStartEventChanged()}),this.addAction({change:"start-editor-type-changed"},function(){r.onStartTypeChanged()}),this.addAction({change:"start-editor-rule-changed"},function(){r.onRuleModeChanged()}),this.addAction({change:"start-editor-reaction-changed"},function(){r.onReactionChanged()}),this.addAction({change:"start-editor-profile-field-changed"},function(){return r.onProfileFieldChanged(),!1}),this.addAction({click:"start-editor-add-rule"},function(){return r.addRule(),!1}),this.addAction({click:"start-editor-reminder-changed"},function(){r.onReminderChanged()}),this.addAction({click:"start-editor-schedule-reminder-date-changed"},function(){r.onScheduleReminderDateChanged()}),this.addAction({click:"start-editor-validate"},function(){return r.validateEditor(),!1}),this.addAction({click:"start-editor-mailing-sort-date"},function(){return s.onMailingSortClick("date"),!1}),this.addAction({change:"start-editor-mailing-select"},function(){return r.onMailingSelectChange(this.el.val()),!1}),this.addAction({click:"start-editor-mailing-sort-shortname"},function(){return s.onMailingSortClick("shortname"),!1}),this.addAction({click:"decision-editor-mailing-sort-shortname"},function(){return u.onMailingSortClick("shortname"),!1}),this.addAction({click:"decision-editor-mailing-sort-date"},function(){return u.onMailingSortClick("date"),!1}),this.addAction({change:"decision-editor-mailing-select"},function(){return v.onMailingSelectChange(this.el.val()),!1}),this.addAction({click:"start-editor-rule-remove"},function(){return r.removeRuleRow(this.el.data("rule-index")),!1}),this.addAction({change:"start-rule-operator-change"},function(){return r.onRuleOperatorChanged(this.el),!1}),this.addAction({change:"decision-rule-operator-change"},function(){return v.onRuleOperatorChanged(this.el),!1}),this.addAction({click:"decision-editor-rule-remove"},function(){return v.removeRuleRow(this.el.data("rule-index")),!1}),this.addAction({click:"decision-editor-rule-add"},function(){return v.addRule(),!1}),this.addAction({change:"decision-editor-type-change"},function(){v.onTypeChanged()}),this.addAction({change:"decision-editor-criteria-change"},function(){return v.onCriteriaChanged(),!1}),this.addAction({change:"decision-editor-reaction-change"},function(){return v.onDecisionReactionChanged(),!1}),this.addAction({click:"decision-editor-save"},function(){return v.validateEditor(),!1}),this.addAction({change:"decision-editor-profile-field-change"},function(){return v.onProfileFieldChanged(),!1}),this.addAction({click:"recipient-editor-create-new-target"},function(){return w.createNewTarget(),!1}),this.addAction({click:"recipient-editor-save"},function(){return P.saveCurrentEditor(),!1}),this.addAction({click:"recipient-editor-target-edit"},function(){var a=d(this.el);return w.editTarget(a.targetId),!1}),this.addAction({click:"parameter-editor-save"},function(){return P.saveCurrentEditor(),!1}),this.addAction({click:"ownworkflow-copy-dialog"},function(){var a=d(this.el);return x.ownWorkflowCopyDialogResponse(a.useOriginal),!1}),this.addAction({click:"ownworkflow-editor-cancel"},function(){return y.cancelEditor(),!1}),this.addAction({click:"ownworkflow-editor-save"},function(){return y.saveWithCheck(),!1}),this.addAction({click:"editor-save-current"},function(){return P.saveCurrentEditor(),!1}),this.addAction({click:"deadline-editor-save"},function(){return E.validateEditor(),!1}),this.addAction({click:"date-mailing-editor-save"},function(){return K.validateEditor(J.saveWithCheckStatus),!1}),this.addAction({click:"followup-mailing-editor-save"},function(){return N.validateEditor(N.saveWithCheckStatus),!1}),this.addAction({click:"copy-dialog-copy"},function(){return O.workflowCopyDialogResponse(!0),!1}),this.addAction({click:"copy-dialog-chain-copy"},function(){return O.workflowCopyDialogResponse(!1),!1}),this.addAction({click:"copy-dialog-cancel"},function(){return O.workflowCopyDialogClose(),!1}),this.addAction({click:"workflow-generate-pdf"},function(){return j(),!1}),e.prototype.setup=function(a){this.startTypeOpen=a.startTypeOpen,this.startTypeDate=a.startTypeDate,this.startTypeEvent=a.startTypeEvent,this.startEventReaction=a.startEventReaction,this.startEventDate=a.startEventDate,this.endTypeAutomatic=a.endTypeAutomatic,this.endTypeDate=a.endTypeDate,this.deadlineTypeDelay=a.deadlineTypeDelay,this.deadlineTypeFixedDeadline=a.deadlineTypeFixedDeadline,this.deadlineTimeUnitMinute=a.deadlineTimeUnitMinute,this.deadlineTimeUnitHour=a.deadlineTimeUnitHour,this.deadlineTimeUnitDay=a.deadlineTimeUnitDay,this.deadlineTimeUnitWeek=a.deadlineTimeUnitWeek,this.deadlineTimeUnitMonth=a.deadlineTimeUnitMonth,this.reactionOpened=a.reactionOpened,this.reactionNotOpened=a.reactionNotOpened,this.reactionClicked=a.reactionClicked,this.reactionNotClicked=a.reactionNotClicked,this.reactionBought=a.reactionBought,this.reactionNotBought=a.reactionNotBought,this.reactionDownload=a.reactionDownload,this.reactionChangeOfProfile=a.reactionChangeOfProfile,this.reactionWaitingForConfirm=a.reactionWaitingForConfirm,this.reactionOptIn=a.reactionOptIn,this.reactionOptOut=a.reactionOptOut,this.reactionClickedLink=a.reactionClickedLink,this.reactionOpenedAndClicked=a.reactionOpenedAndClicked,this.reactionOpenedOrClicked=a.reactionOpenedOrClicked,this.reactionConfirmedOptIn=a.reactionConfirmedOptIn,constants.reactionRegistry(),this.decisionTypeDecision=a.decisionTypeDecision,this.decisionTypeAutoOptimization=a.decisionTypeAutoOptimization,this.decisionReaction=a.decisionReaction,this.decisionProfileField=a.decisionProfileField,this.decisionAOCriteriaClickRate=a.decisionAOCriteriaClickRate,this.decisionAOCriteriaOpenrate=a.decisionAOCriteriaOpenrate,this.decisionAOCriteriaTurnover=a.decisionAOCriteriaTurnover,this.chainOperatorAnd=a.chainOperatorAnd,this.chainOperatorOr=a.chainOperatorOr,this.operatorIs=a.operatorIs,this.forwardTargetGroupCreate=a.forwardTargetGroupCreate,this.forwardTargetGroupEdit=a.forwardTargetGroupEdit,this.forwardMailingCreate=a.forwardMailingCreate,this.forwardMailingEdit=a.forwardMailingEdit,this.forwardMailingCopy=a.forwardMailingCopy,this.forwardUserFormCreate=a.forwardUserFormCreate,this.forwardUserFormEdit=a.forwardUserFormEdit,this.forwardReportCreate=a.forwardReportCreate,this.forwardReportEdit=a.forwardReportEdit,this.forwardAutoExportCreate=a.forwardAutoExportCreate,this.forwardAutoExportEdit=a.forwardAutoExportEdit,this.forwardAutoImportCreate=a.forwardAutoImportCreate,this.forwardAutoImportEdit=a.forwardAutoImportEdit,this.forwardArchiveCreate=a.forwardArchiveCreate,this.genderOptions=a.genderOptions,this.chainOperatorOptions=a.chainOperatorOptions,this.operators=a.operators,this.operatorsMap=a.operatorsMap,this.statusActive=a.statusActive,this.statusInactive=a.statusInactive,this.defaultImportDelayLimit=a.defaultImportDelayLimit,this.workflowURL=a.workflowURL,this.componentURL=a.componentURL},e.prototype.reactionRegistry=function(){Z.reactionRegistry[constants.reactionOpened]={image:"reaction_opened.png",name:t("workflow.reaction.opened")},Z.reactionRegistry[constants.reactionNotOpened]={image:"reaction_notopened.png",name:t("workflow.reaction.not_opened")},Z.reactionRegistry[constants.reactionClicked]={image:"reaction_clicked.png",name:t("workflow.reaction.clicked")},Z.reactionRegistry[constants.reactionNotClicked]={image:"reaction_notclicked.png",name:t("workflow.reaction.not_clicked")},Z.reactionRegistry[constants.reactionBought]={image:"reaction_bought.png",name:t("workflow.reaction.bought")},Z.reactionRegistry[constants.reactionNotBought]={image:"reaction_notbought.png",name:t("workflow.reaction.not_bought")},Z.reactionRegistry[constants.reactionChangeOfProfile]={image:"reaction_profilechange.png",name:t("workflow.reaction.change_of_profile")},Z.reactionRegistry[constants.reactionWaitingForConfirm]={image:"reaction_wfc.png",name:t("workflow.reaction.waiting_for_confirm")},Z.reactionRegistry[constants.reactionOptIn]={image:"reaction_optin.png",name:t("workflow.reaction.opt_in")},Z.reactionRegistry[constants.reactionOptOut]={image:"reaction_optout.png",name:t("workflow.reaction.opt_out")},Z.reactionRegistry[constants.reactionClickedLink]={image:"reaction_clicked.png",name:t("workflow.reaction.clicked_on_link")},Z.reactionRegistry[constants.reactionOpenedAndClicked]={image:"reaction_profilechange.png",name:t("workflow.reaction.opened_and_clicked")},Z.reactionRegistry[constants.reactionOpenedOrClicked]={image:"reaction_profilechange.png",name:t("workflow.reaction.opened_or_clicked")}}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=window.Slick||{};b=function(){function b(b,d){var e,f,g,h=this;if(h.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(b),appendDots:a(b),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="previous">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(a,b){return'<button type="button" data-role="none">'+(b+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0},h.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},a.extend(h,h.initials),h.activeBreakpoint=null,h.animType=null,h.animProp=null,h.breakpoints=[],h.breakpointSettings=[],h.cssTransitions=!1,h.hidden="hidden",h.paused=!1,h.positionProp=null,h.respondTo=null,h.rowCount=1,h.shouldClick=!0,h.$slider=a(b),h.$slidesCache=null,h.transformType=null,h.transitionType=null,h.visibilityChange="visibilitychange",h.windowWidth=0,h.windowTimer=null,e=a(b).data("slick")||{},h.options=a.extend({},h.defaults,e,d),h.currentSlide=h.options.initialSlide,h.originalSettings=h.options,f=h.options.responsive||null,f&&f.length>-1){h.respondTo=h.options.respondTo||"window";for(g in f)f.hasOwnProperty(g)&&(h.breakpoints.push(f[g].breakpoint),h.breakpointSettings[f[g].breakpoint]=f[g].settings);h.breakpoints.sort(function(a,b){return h.options.mobileFirst===!0?a-b:b-a})}"undefined"!=typeof document.mozHidden?(h.hidden="mozHidden",h.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(h.hidden="msHidden",h.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(h.hidden="webkitHidden",h.visibilityChange="webkitvisibilitychange"),h.autoPlay=a.proxy(h.autoPlay,h),h.autoPlayClear=a.proxy(h.autoPlayClear,h),h.changeSlide=a.proxy(h.changeSlide,h),h.clickHandler=a.proxy(h.clickHandler,h),h.selectHandler=a.proxy(h.selectHandler,h),h.setPosition=a.proxy(h.setPosition,h),h.swipeHandler=a.proxy(h.swipeHandler,h),h.dragHandler=a.proxy(h.dragHandler,h),h.keyHandler=a.proxy(h.keyHandler,h),h.autoPlayIterator=a.proxy(h.autoPlayIterator,h),h.instanceUid=c++,h.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,h.init(),h.checkResponsive(!0)}var c=0;return b}(),b.prototype.addSlide=b.prototype.slickAdd=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(c<0||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):d===!0?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:b},a.options.speed)}},b.prototype.animateSlide=function(b,c){var d={},e=this;e.animateHeight(),e.options.rtl===!0&&e.options.vertical===!1&&(b=-b),e.transformsEnabled===!1?e.options.vertical===!1?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):e.cssTransitions===!1?(e.options.rtl===!0&&(e.currentLeft=-e.currentLeft),a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){a=Math.ceil(a),e.options.vertical===!1?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}})):(e.applyTransition(),b=Math.ceil(b),e.options.vertical===!1?d[e.animType]="translate3d("+b+"px, 0px, 0px)":d[e.animType]="translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout(function(){e.disableTransition(),c.call()},e.options.speed))},b.prototype.asNavFor=function(b){var c=this,d=null!==c.options.asNavFor?a(c.options.asNavFor).slick("getSlick"):null;null!==d&&d.slideHandler(b,!0)},b.prototype.applyTransition=function(a){var b=this,c={};b.options.fade===!1?c[b.transitionType]=b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:c[b.transitionType]="opacity "+b.options.speed+"ms "+b.options.cssEase,b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer),a.slideCount>a.options.slidesToShow&&a.paused!==!0&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var a=this;a.options.infinite===!1?1===a.direction?(a.currentSlide+1===a.slideCount-1&&(a.direction=0),a.slideHandler(a.currentSlide+a.options.slidesToScroll)):(a.currentSlide-1===0&&(a.direction=1),a.slideHandler(a.currentSlide-a.options.slidesToScroll)):a.slideHandler(a.currentSlide+a.options.slidesToScroll)},b.prototype.buildArrows=function(){var b=this;b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow=a(b.options.prevArrow),b.$nextArrow=a(b.options.nextArrow),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.appendTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),b.options.infinite!==!0&&b.$prevArrow.addClass("slick-disabled"))},b.prototype.buildDots=function(){var b,c,d=this;if(d.options.dots===!0&&d.slideCount>d.options.slidesToShow){for(c='<ul class="'+d.options.dotsClass+'">',b=0;b<=d.getDotCount();b+=1)c+="<li>"+d.options.customPaging.call(this,d,b)+"</li>";c+="</ul>",d.$dots=a(c).appendTo(d.options.appendDots),d.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),b.$slidesCache=b.$slides,b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),b.options.centerMode!==!0&&b.options.swipeToSlide!==!0||(b.options.slidesToScroll=1),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),b.options.accessibility===!0&&b.$list.prop("tabIndex",0),b.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),b.options.draggable===!0&&b.$list.addClass("draggable")},b.prototype.buildRows=function(){var a,b,c,d,e,f,g,h=this;if(d=document.createDocumentFragment(),f=h.$slider.children(),h.options.rows>1){for(g=h.options.slidesPerRow*h.options.rows,e=Math.ceil(f.length/g),a=0;a<e;a++){var i=document.createElement("div");for(b=0;b<h.options.rows;b++){var j=document.createElement("div");for(c=0;c<h.options.slidesPerRow;c++){var k=a*g+(b*h.options.slidesPerRow+c);f.get(k)&&j.appendChild(f.get(k))}i.appendChild(j)}d.appendChild(i)}h.$slider.html(d),h.$slider.children().children().children().width(100/h.options.slidesPerRow+"%").css({display:"inline-block"})}},b.prototype.checkResponsive=function(b){var c,d,e,f=this,g=f.$slider.width(),h=window.innerWidth||a(window).width();if("window"===f.respondTo?e=h:"slider"===f.respondTo?e=g:"min"===f.respondTo&&(e=Math.min(h,g)),f.originalSettings.responsive&&f.originalSettings.responsive.length>-1&&null!==f.originalSettings.responsive){d=null;for(c in f.breakpoints)f.breakpoints.hasOwnProperty(c)&&(f.originalSettings.mobileFirst===!1?e<f.breakpoints[c]&&(d=f.breakpoints[c]):e>f.breakpoints[c]&&(d=f.breakpoints[c]));null!==d?null!==f.activeBreakpoint?d!==f.activeBreakpoint&&(f.activeBreakpoint=d,"unslick"===f.breakpointSettings[d]?f.unslick():(f.options=a.extend({},f.originalSettings,f.breakpointSettings[d]),b===!0&&(f.currentSlide=f.options.initialSlide),f.refresh())):(f.activeBreakpoint=d,"unslick"===f.breakpointSettings[d]?f.unslick():(f.options=a.extend({},f.originalSettings,f.breakpointSettings[d]),b===!0&&(f.currentSlide=f.options.initialSlide),f.refresh())):null!==f.activeBreakpoint&&(f.activeBreakpoint=null,f.options=f.originalSettings,b===!0&&(f.currentSlide=f.options.initialSlide),f.refresh())}},b.prototype.changeSlide=function(b,c){var d,e,f,g=this,h=a(b.target);switch(h.is("a")&&b.preventDefault(),f=g.slideCount%g.options.slidesToScroll!==0,d=f?0:(g.slideCount-g.currentSlide)%g.options.slidesToScroll,b.data.message){case"previous":e=0===d?g.options.slidesToScroll:g.options.slidesToShow-d,g.slideCount>g.options.slidesToShow&&g.slideHandler(g.currentSlide-e,!1,c);break;case"next":e=0===d?g.options.slidesToScroll:d,g.slideCount>g.options.slidesToShow&&g.slideHandler(g.currentSlide+e,!1,c);break;case"index":var i=0===b.data.index?0:b.data.index||a(b.target).parent().index()*g.options.slidesToScroll;g.slideHandler(g.checkNavigable(i),!1,c);break;default:return}},b.prototype.checkNavigable=function(a){var b,c,d=this;if(b=d.getNavigableIndexes(),c=0,a>b[b.length-1])a=b[b.length-1];else for(var e in b){if(a<b[e]){a=c;break}c=b[e]}return a},b.prototype.cleanUpEvents=function(){var b=this;b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).off("click.slick",b.changeSlide),b.options.dots===!0&&b.options.pauseOnDotsHover===!0&&b.options.autoplay===!0&&a("li",b.$dots).off("mouseenter.slick",b.setPaused.bind(b,!0)).off("mouseleave.slick",b.setPaused.bind(b,!1)),b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow&&b.$prevArrow.off("click.slick",b.changeSlide),
b.$nextArrow&&b.$nextArrow.off("click.slick",b.changeSlide)),b.$list.off("touchstart.slick mousedown.slick",b.swipeHandler),b.$list.off("touchmove.slick mousemove.slick",b.swipeHandler),b.$list.off("touchend.slick mouseup.slick",b.swipeHandler),b.$list.off("touchcancel.slick mouseleave.slick",b.swipeHandler),b.$list.off("click.slick",b.clickHandler),b.options.autoplay===!0&&a(document).off(b.visibilityChange,b.visibility),b.$list.off("mouseenter.slick",b.setPaused.bind(b,!0)),b.$list.off("mouseleave.slick",b.setPaused.bind(b,!1)),b.options.accessibility===!0&&b.$list.off("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().off("click.slick",b.selectHandler),a(window).off("orientationchange.slick.slick-"+b.instanceUid,b.orientationChange),a(window).off("resize.slick.slick-"+b.instanceUid,b.resize),a("[draggable!=true]",b.$slideTrack).off("dragstart",b.preventDefault),a(window).off("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).off("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.cleanUpRows=function(){var a,b=this;b.options.rows>1&&(a=b.$slides.children().children(),a.removeAttr("style"),b.$slider.html(a))},b.prototype.clickHandler=function(a){var b=this;b.shouldClick===!1&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},b.prototype.destroy=function(){var b=this;b.autoPlayClear(),b.touchObject={},b.cleanUpEvents(),a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&"object"!=typeof b.options.prevArrow&&b.$prevArrow.remove(),b.$nextArrow&&"object"!=typeof b.options.nextArrow&&b.$nextArrow.remove(),b.$slides&&(b.$slides.removeClass("slick-slide slick-active slick-center slick-visible").attr("aria-hidden","true").removeAttr("data-slick-index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),b.$slider.html(b.$slides)),b.cleanUpRows(),b.$slider.removeClass("slick-slider"),b.$slider.removeClass("slick-initialized")},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b){var c=this;c.cssTransitions===!1?(c.$slides.eq(a).css({zIndex:1e3}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:1e3}),b&&setTimeout(function(){c.disableTransition(a),b.call()},c.options.speed))},b.prototype.filterSlides=b.prototype.slickFilter=function(a){var b=this;null!==a&&(b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){var a=this;return a.currentSlide},b.prototype.getDotCount=function(){var a=this,b=0,c=0,d=0;if(a.options.infinite===!0)d=Math.ceil(a.slideCount/a.options.slidesToScroll);else if(a.options.centerMode===!0)d=a.slideCount;else for(;b<a.slideCount;)++d,b=c+a.options.slidesToShow,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d-1},b.prototype.getLeft=function(a){var b,c,d,e=this,f=0;return e.slideOffset=0,c=e.$slides.first().outerHeight(),e.options.infinite===!0?(e.slideCount>e.options.slidesToShow&&(e.slideOffset=e.slideWidth*e.options.slidesToShow*-1,f=c*e.options.slidesToShow*-1),e.slideCount%e.options.slidesToScroll!==0&&a+e.options.slidesToScroll>e.slideCount&&e.slideCount>e.options.slidesToShow&&(a>e.slideCount?(e.slideOffset=(e.options.slidesToShow-(a-e.slideCount))*e.slideWidth*-1,f=(e.options.slidesToShow-(a-e.slideCount))*c*-1):(e.slideOffset=e.slideCount%e.options.slidesToScroll*e.slideWidth*-1,f=e.slideCount%e.options.slidesToScroll*c*-1))):a+e.options.slidesToShow>e.slideCount&&(e.slideOffset=(a+e.options.slidesToShow-e.slideCount)*e.slideWidth,f=(a+e.options.slidesToShow-e.slideCount)*c),e.slideCount<=e.options.slidesToShow&&(e.slideOffset=0,f=0),e.options.centerMode===!0&&e.options.infinite===!0?e.slideOffset+=e.slideWidth*Math.floor(e.options.slidesToShow/2)-e.slideWidth:e.options.centerMode===!0&&(e.slideOffset=0,e.slideOffset+=e.slideWidth*Math.floor(e.options.slidesToShow/2)),b=e.options.vertical===!1?a*e.slideWidth*-1+e.slideOffset:a*c*-1+f,e.options.variableWidth===!0&&(d=e.slideCount<=e.options.slidesToShow||e.options.infinite===!1?e.$slideTrack.children(".slick-slide").eq(a):e.$slideTrack.children(".slick-slide").eq(a+e.options.slidesToShow),b=d[0]?d[0].offsetLeft*-1:0,e.options.centerMode===!0&&(d=e.options.infinite===!1?e.$slideTrack.children(".slick-slide").eq(a):e.$slideTrack.children(".slick-slide").eq(a+e.options.slidesToShow+1),b=d[0]?d[0].offsetLeft*-1:0,b+=(e.$list.width()-d.outerWidth())/2)),b},b.prototype.getOption=b.prototype.slickGetOption=function(a){var b=this;return b.options[a]},b.prototype.getNavigableIndexes=function(){var a,b=this,c=0,d=0,e=[];for(b.options.infinite===!1?(a=b.slideCount-b.options.slidesToShow+1,b.options.centerMode===!0&&(a=b.slideCount)):(c=b.options.slidesToScroll*-1,d=b.options.slidesToScroll*-1,a=2*b.slideCount);c<a;)e.push(c),c=d+b.options.slidesToScroll,d+=b.options.slidesToScroll<=b.options.slidesToShow?b.options.slidesToScroll:b.options.slidesToShow;return e},b.prototype.getSlick=function(){return this},b.prototype.getSlideCount=function(){var b,c,d,e=this;return d=e.options.centerMode===!0?e.slideWidth*Math.floor(e.options.slidesToShow/2):0,e.options.swipeToSlide===!0?(e.$slideTrack.find(".slick-slide").each(function(b,f){if(f.offsetLeft-d+a(f).outerWidth()/2>e.swipeLeft*-1)return c=f,!1}),b=Math.abs(a(c).attr("data-slick-index")-e.currentSlide)||1):e.options.slidesToScroll},b.prototype.goTo=b.prototype.slickGoTo=function(a,b){var c=this;c.changeSlide({data:{message:"index",index:parseInt(a)}},b)},b.prototype.init=function(){var b=this;a(b.$slider).hasClass("slick-initialized")||(a(b.$slider).addClass("slick-initialized"),b.buildRows(),b.buildOut(),b.setProps(),b.startLoad(),b.loadSlider(),b.initializeEvents(),b.updateArrows(),b.updateDots()),b.$slider.trigger("init",[b])},b.prototype.initArrowEvents=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),b.options.dots===!0&&b.options.pauseOnDotsHover===!0&&b.options.autoplay===!0&&a("li",b.$dots).on("mouseenter.slick",b.setPaused.bind(b,!0)).on("mouseleave.slick",b.setPaused.bind(b,!1))},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),b.$list.on("click.slick",b.clickHandler),b.options.autoplay===!0&&a(document).on(b.visibilityChange,b.visibility.bind(b)),b.$list.on("mouseenter.slick",b.setPaused.bind(b,!0)),b.$list.on("mouseleave.slick",b.setPaused.bind(b,!1)),b.options.accessibility===!0&&b.$list.on("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,b.orientationChange.bind(b)),a(window).on("resize.slick.slick-"+b.instanceUid,b.resize.bind(b)),a("[draggable!=true]",b.$slideTrack).on("dragstart",b.preventDefault),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.show(),a.options.autoplay===!0&&a.autoPlay()},b.prototype.keyHandler=function(a){var b=this;37===a.keyCode&&b.options.accessibility===!0?b.changeSlide({data:{message:"previous"}}):39===a.keyCode&&b.options.accessibility===!0&&b.changeSlide({data:{message:"next"}})},b.prototype.lazyLoad=function(){function b(b){a("img[data-lazy]",b).each(function(){var b=a(this),c=a(this).attr("data-lazy"),d=document.createElement("img");d.onload=function(){b.animate({opacity:1},200)},d.src=c,b.css({opacity:0}).attr("src",c).removeAttr("data-lazy").removeClass("slick-loading")})}var c,d,e,f,g=this;g.options.centerMode===!0?g.options.infinite===!0?(e=g.currentSlide+(g.options.slidesToShow/2+1),f=e+g.options.slidesToShow+2):(e=Math.max(0,g.currentSlide-(g.options.slidesToShow/2+1)),f=2+(g.options.slidesToShow/2+1)+g.currentSlide):(e=g.options.infinite?g.options.slidesToShow+g.currentSlide:g.currentSlide,f=e+g.options.slidesToShow,g.options.fade===!0&&(e>0&&e--,f<=g.slideCount&&f++)),c=g.$slider.find(".slick-slide").slice(e,f),b(c),g.slideCount<=g.options.slidesToShow?(d=g.$slider.find(".slick-slide"),b(d)):g.currentSlide>=g.slideCount-g.options.slidesToShow?(d=g.$slider.find(".slick-cloned").slice(0,g.options.slidesToShow),b(d)):0===g.currentSlide&&(d=g.$slider.find(".slick-cloned").slice(g.options.slidesToShow*-1),b(d))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.next=b.prototype.slickNext=function(){var a=this;a.changeSlide({data:{message:"next"}})},b.prototype.orientationChange=function(){var a=this;a.checkResponsive(),a.setPosition()},b.prototype.pause=b.prototype.slickPause=function(){var a=this;a.autoPlayClear(),a.paused=!0},b.prototype.play=b.prototype.slickPlay=function(){var a=this;a.paused=!1,a.autoPlay()},b.prototype.postSlide=function(a){var b=this;b.$slider.trigger("afterChange",[b,a]),b.animating=!1,b.setPosition(),b.swipeLeft=null,b.options.autoplay===!0&&b.paused===!1&&b.autoPlay()},b.prototype.prev=b.prototype.slickPrev=function(){var a=this;a.changeSlide({data:{message:"previous"}})},b.prototype.preventDefault=function(a){a.preventDefault()},b.prototype.progressiveLazyLoad=function(){var b,c,d=this;b=a("img[data-lazy]",d.$slider).length,b>0&&(c=a("img[data-lazy]",d.$slider).first(),c.attr("src",c.attr("data-lazy")).removeClass("slick-loading").load(function(){c.removeAttr("data-lazy"),d.progressiveLazyLoad(),d.options.adaptiveHeight===!0&&d.setPosition()}).error(function(){c.removeAttr("data-lazy"),d.progressiveLazyLoad()}))},b.prototype.refresh=function(){var b=this,c=b.currentSlide;b.destroy(),a.extend(b,b.initials),b.init(),b.changeSlide({data:{message:"index",index:c}},!1)},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.slideCount<=b.options.slidesToShow&&(b.currentSlide=0),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),b.setSlideClasses(0),b.setPosition(),b.$slider.trigger("reInit",[b])},b.prototype.resize=function(){var b=this;a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.setPosition()},50))},b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,c){var d=this;return"boolean"==typeof a?(b=a,a=b===!0?0:d.slideCount-1):a=b===!0?--a:a,!(d.slideCount<1||a<0||a>d.slideCount-1)&&(d.unload(),c===!0?d.$slideTrack.children().remove():d.$slideTrack.children(this.options.slide).eq(a).remove(),d.$slides=d.$slideTrack.children(this.options.slide),d.$slideTrack.children(this.options.slide).detach(),d.$slideTrack.append(d.$slides),d.$slidesCache=d.$slides,void d.reinit())},b.prototype.setCSS=function(a){var b,c,d=this,e={};d.options.rtl===!0&&(a=-a),b="left"==d.positionProp?Math.ceil(a)+"px":"0px",c="top"==d.positionProp?Math.ceil(a)+"px":"0px",e[d.positionProp]=a,d.transformsEnabled===!1?d.$slideTrack.css(e):(e={},d.cssTransitions===!1?(e[d.animType]="translate("+b+", "+c+")",d.$slideTrack.css(e)):(e[d.animType]="translate3d("+b+", "+c+", 0px)",d.$slideTrack.css(e)))},b.prototype.setDimensions=function(){var a=this;a.options.vertical===!1?a.options.centerMode===!0&&a.$list.css({padding:"0px "+a.options.centerPadding}):(a.$list.height(a.$slides.first().outerHeight(!0)*a.options.slidesToShow),a.options.centerMode===!0&&a.$list.css({padding:a.options.centerPadding+" 0px"})),a.listWidth=a.$list.width(),a.listHeight=a.$list.height(),a.options.vertical===!1&&a.options.variableWidth===!1?(a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.width(Math.ceil(a.slideWidth*a.$slideTrack.children(".slick-slide").length))):a.options.variableWidth===!0?a.$slideTrack.width(5e3*a.slideCount):(a.slideWidth=Math.ceil(a.listWidth),a.$slideTrack.height(Math.ceil(a.$slides.first().outerHeight(!0)*a.$slideTrack.children(".slick-slide").length)));var b=a.$slides.first().outerWidth(!0)-a.$slides.first().width();a.options.variableWidth===!1&&a.$slideTrack.children(".slick-slide").width(a.slideWidth-b)},b.prototype.setFade=function(){var b,c=this;c.$slides.each(function(d,e){b=c.slideWidth*d*-1,c.options.rtl===!0?a(e).css({position:"relative",right:b,top:0,zIndex:800,opacity:0}):a(e).css({position:"relative",left:b,top:0,zIndex:800,opacity:0})}),c.$slides.eq(c.currentSlide).css({zIndex:900,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setOption=b.prototype.slickSetOption=function(a,b,c){var d=this;d.options[a]=b,c===!0&&(d.unload(),d.reinit())},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),a.options.fade===!1?a.setCSS(a.getLeft(a.currentSlide)):a.setFade(),a.$slider.trigger("setPosition",[a])},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=a.options.vertical===!0?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),void 0===b.WebkitTransition&&void 0===b.MozTransition&&void 0===b.msTransition||a.options.useCSS===!0&&(a.cssTransitions=!0),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&a.animType!==!1&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=null!==a.animType&&a.animType!==!1},b.prototype.setSlideClasses=function(a){var b,c,d,e,f=this;f.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true").removeClass("slick-center"),c=f.$slider.find(".slick-slide"),f.options.centerMode===!0?(b=Math.floor(f.options.slidesToShow/2),f.options.infinite===!0&&(a>=b&&a<=f.slideCount-1-b?f.$slides.slice(a-b,a+b+1).addClass("slick-active").attr("aria-hidden","false"):(d=f.options.slidesToShow+a,c.slice(d-b+1,d+b+2).addClass("slick-active").attr("aria-hidden","false")),0===a?c.eq(c.length-1-f.options.slidesToShow).addClass("slick-center"):a===f.slideCount-1&&c.eq(f.options.slidesToShow).addClass("slick-center")),f.$slides.eq(a).addClass("slick-center")):a>=0&&a<=f.slideCount-f.options.slidesToShow?f.$slides.slice(a,a+f.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):c.length<=f.options.slidesToShow?c.addClass("slick-active").attr("aria-hidden","false"):(e=f.slideCount%f.options.slidesToShow,d=f.options.infinite===!0?f.options.slidesToShow+a:a,f.options.slidesToShow==f.options.slidesToScroll&&f.slideCount-a<f.options.slidesToShow?c.slice(d-(f.options.slidesToShow-e),d+e).addClass("slick-active").attr("aria-hidden","false"):c.slice(d,d+f.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===f.options.lazyLoad&&f.lazyLoad()},b.prototype.setupInfinite=function(){var b,c,d,e=this;if(e.options.fade===!0&&(e.options.centerMode=!1),e.options.infinite===!0&&e.options.fade===!1&&(c=null,e.slideCount>e.options.slidesToShow)){for(d=e.options.centerMode===!0?e.options.slidesToShow+1:e.options.slidesToShow,b=e.slideCount;b>e.slideCount-d;b-=1)c=b-1,a(e.$slides[c]).clone(!0).attr("id","").attr("data-slick-index",c-e.slideCount).prependTo(e.$slideTrack).addClass("slick-cloned");for(b=0;b<d;b+=1)c=b,a(e.$slides[c]).clone(!0).attr("id","").attr("data-slick-index",c+e.slideCount).appendTo(e.$slideTrack).addClass("slick-cloned");e.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},b.prototype.setPaused=function(a){var b=this;b.options.autoplay===!0&&b.options.pauseOnHover===!0&&(b.paused=a,b.autoPlayClear())},b.prototype.selectHandler=function(b){var c=this,d=a(b.target).is(".slick-slide")?a(b.target):a(b.target).parents(".slick-slide"),e=parseInt(d.attr("data-slick-index"));return e||(e=0),c.slideCount<=c.options.slidesToShow?(c.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true"),c.$slides.eq(e).addClass("slick-active").attr("aria-hidden","false"),c.options.centerMode===!0&&(c.$slider.find(".slick-slide").removeClass("slick-center"),c.$slides.eq(e).addClass("slick-center")),void c.asNavFor(e)):void c.slideHandler(e)},b.prototype.slideHandler=function(a,b,c){var d,e,f,g,h=null,i=this;if(b=b||!1,(i.animating!==!0||i.options.waitForAnimate!==!0)&&!(i.options.fade===!0&&i.currentSlide===a||i.slideCount<=i.options.slidesToShow))return b===!1&&i.asNavFor(a),d=a,h=i.getLeft(d),g=i.getLeft(i.currentSlide),i.currentLeft=null===i.swipeLeft?g:i.swipeLeft,i.options.infinite===!1&&i.options.centerMode===!1&&(a<0||a>i.getDotCount()*i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d))):i.options.infinite===!1&&i.options.centerMode===!0&&(a<0||a>i.slideCount-i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d))):(i.options.autoplay===!0&&clearInterval(i.autoPlayTimer),e=d<0?i.slideCount%i.options.slidesToScroll!==0?i.slideCount-i.slideCount%i.options.slidesToScroll:i.slideCount+d:d>=i.slideCount?i.slideCount%i.options.slidesToScroll!==0?0:d-i.slideCount:d,i.animating=!0,i.$slider.trigger("beforeChange",[i,i.currentSlide,e]),f=i.currentSlide,i.currentSlide=e,i.setSlideClasses(i.currentSlide),i.updateDots(),i.updateArrows(),i.options.fade===!0?(c!==!0?i.fadeSlide(e,function(){i.postSlide(e)}):i.postSlide(e),void i.animateHeight()):void(c!==!0?i.animateSlide(h,function(){i.postSlide(e)}):i.postSlide(e)))},b.prototype.startLoad=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI),d<0&&(d=360-Math.abs(d)),d<=45&&d>=0?e.options.rtl===!1?"left":"right":d<=360&&d>=315?e.options.rtl===!1?"left":"right":d>=135&&d<=225?e.options.rtl===!1?"right":"left":e.options.verticalSwiping===!0?d>=35&&d<=135?"left":"right":"vertical"},b.prototype.swipeEnd=function(a){var b,c=this;if(c.dragging=!1,c.shouldClick=!(c.touchObject.swipeLength>10),void 0===c.touchObject.curX)return!1;if(c.touchObject.edgeHit===!0&&c.$slider.trigger("edge",[c,c.swipeDirection()]),c.touchObject.swipeLength>=c.touchObject.minSwipe)switch(c.swipeDirection()){case"left":b=c.options.swipeToSlide?c.checkNavigable(c.currentSlide+c.getSlideCount()):c.currentSlide+c.getSlideCount(),c.slideHandler(b),c.currentDirection=0,c.touchObject={},c.$slider.trigger("swipe",[c,"left"]);break;case"right":b=c.options.swipeToSlide?c.checkNavigable(c.currentSlide-c.getSlideCount()):c.currentSlide-c.getSlideCount(),c.slideHandler(b),c.currentDirection=1,c.touchObject={},c.$slider.trigger("swipe",[c,"right"])}else c.touchObject.startX!==c.touchObject.curX&&(c.slideHandler(c.currentSlide),c.touchObject={})},b.prototype.swipeHandler=function(a){var b=this;if(!(b.options.swipe===!1||"ontouchend"in document&&b.options.swipe===!1||b.options.draggable===!1&&a.type.indexOf("mouse")!==-1))switch(b.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold,b.options.verticalSwiping===!0&&(b.touchObject.minSwipe=b.listHeight/b.options.touchThreshold),a.data.action){case"start":b.swipeStart(a);break;case"move":b.swipeMove(a);break;case"end":b.swipeEnd(a)}},b.prototype.swipeMove=function(a){var b,c,d,e,f,g=this;return f=void 0!==a.originalEvent?a.originalEvent.touches:null,!(!g.dragging||f&&1!==f.length)&&(b=g.getLeft(g.currentSlide),g.touchObject.curX=void 0!==f?f[0].pageX:a.clientX,g.touchObject.curY=void 0!==f?f[0].pageY:a.clientY,g.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(g.touchObject.curX-g.touchObject.startX,2))),g.options.verticalSwiping===!0&&(g.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(g.touchObject.curY-g.touchObject.startY,2)))),c=g.swipeDirection(),"vertical"!==c?(void 0!==a.originalEvent&&g.touchObject.swipeLength>4&&a.preventDefault(),e=(g.options.rtl===!1?1:-1)*(g.touchObject.curX>g.touchObject.startX?1:-1),g.options.verticalSwiping===!0&&(e=g.touchObject.curY>g.touchObject.startY?1:-1),d=g.touchObject.swipeLength,g.touchObject.edgeHit=!1,g.options.infinite===!1&&(0===g.currentSlide&&"right"===c||g.currentSlide>=g.getDotCount()&&"left"===c)&&(d=g.touchObject.swipeLength*g.options.edgeFriction,g.touchObject.edgeHit=!0),g.options.vertical===!1?g.swipeLeft=b+d*e:g.swipeLeft=b+d*(g.$list.height()/g.listWidth)*e,g.options.verticalSwiping===!0&&(g.swipeLeft=b+d*e),g.options.fade!==!0&&g.options.touchMove!==!1&&(g.animating===!0?(g.swipeLeft=null,!1):void g.setCSS(g.swipeLeft))):void 0)},b.prototype.swipeStart=function(a){var b,c=this;return 1!==c.touchObject.fingerCount||c.slideCount<=c.options.slidesToShow?(c.touchObject={},!1):(void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(b=a.originalEvent.touches[0]),c.touchObject.startX=c.touchObject.curX=void 0!==b?b.pageX:a.clientX,c.touchObject.startY=c.touchObject.curY=void 0!==b?b.pageY:a.clientY,void(c.dragging=!0))},b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&"object"!=typeof b.options.prevArrow&&b.$prevArrow.remove(),b.$nextArrow&&"object"!=typeof b.options.nextArrow&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-visible").attr("aria-hidden","true").css("width","")},b.prototype.unslick=function(){var a=this;a.destroy()},b.prototype.updateArrows=function(){var a,b=this;a=Math.floor(b.options.slidesToShow/2),b.options.arrows===!0&&b.options.infinite!==!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow.removeClass("slick-disabled"),b.$nextArrow.removeClass("slick-disabled"),0===b.currentSlide?(b.$prevArrow.addClass("slick-disabled"),b.$nextArrow.removeClass("slick-disabled")):b.currentSlide>=b.slideCount-b.options.slidesToShow&&b.options.centerMode===!1?(b.$nextArrow.addClass("slick-disabled"),b.$prevArrow.removeClass("slick-disabled")):b.currentSlide>=b.slideCount-1&&b.options.centerMode===!0&&(b.$nextArrow.addClass("slick-disabled"),b.$prevArrow.removeClass("slick-disabled")))},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},b.prototype.visibility=function(){var a=this;document[a.hidden]?(a.paused=!0,a.autoPlayClear()):(a.paused=!1,a.autoPlay())},a.fn.slick=function(){var a,c=this,d=arguments[0],e=Array.prototype.slice.call(arguments,1),f=c.length,g=0;for(g;g<f;g++)if("object"==typeof d||"undefined"==typeof d?c[g].slick=new b(c[g],d):a=c[g].slick[d].apply(c[g].slick,e),"undefined"!=typeof a)return a;return c}}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.interact=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";"undefined"==typeof window?b.exports=function(b){return a("./src/utils/window").init(b),a("./src/index")}:b.exports=a("./src/index")},{"./src/index":19,"./src/utils/window":52}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){for(var c=0;c<b.length;c++){var d;d=b[c];var e=d;if(a.immediatePropagationStopped)break;e(a)}}var f=a("./utils/extend.js"),g=function(){function a(b){d(this,a),this.options=f({},b||{})}return a.prototype.fire=function(a){var b=void 0,c="on"+a.type,d=this.global;(b=this[a.type])&&e(a,b),this[c]&&this[c](a),!a.propagationStopped&&d&&(b=d[a.type])&&e(a,b)},a.prototype.on=function(a,b){this[a]?this[a].push(b):this[a]=[b]},a.prototype.off=function(a,b){var c=this[a],d=c?c.indexOf(b):-1;d!==-1&&c.splice(d,1),(c&&0===c.length||!b)&&(this[a]=void 0)},a}();b.exports=g},{"./utils/extend.js":41}],3:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=a("./utils/extend"),f=a("./utils/getOriginXY"),g=a("./defaultOptions"),h=a("./utils/Signals").new(),i=function(){function a(b,c,i,j,k,l){var m=arguments.length>6&&void 0!==arguments[6]&&arguments[6];d(this,a);var n=b.target,o=(n&&n.options||g).deltaSource,p=f(n,k,i),q="start"===j,r="end"===j,s=q?b.startCoords:b.curCoords,t=b.prevEvent;k=k||b.element;var u=e({},s.page),v=e({},s.client);u.x-=p.x,u.y-=p.y,v.x-=p.x,v.y-=p.y,this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.button=c.button,this.buttons=c.buttons,this.target=k,this.currentTarget=k,this.relatedTarget=l||null,this.preEnd=m,this.type=i+(j||""),this.interaction=b,this.interactable=n,this.t0=q?b.downTimes[b.downTimes.length-1]:t.t0;var w={interaction:b,event:c,action:i,phase:j,element:k,related:l,page:u,client:v,coords:s,starting:q,ending:r,deltaSource:o,iEvent:this};h.fire("set-xy",w),r?(this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY):(this.pageX=u.x,this.pageY=u.y,this.clientX=v.x,this.clientY=v.y),this.x0=b.startCoords.page.x-p.x,this.y0=b.startCoords.page.y-p.y,this.clientX0=b.startCoords.client.x-p.x,this.clientY0=b.startCoords.client.y-p.y,h.fire("set-delta",w),this.timeStamp=s.timeStamp,this.dt=b.pointerDelta.timeStamp,this.duration=this.timeStamp-this.t0,this.speed=b.pointerDelta[o].speed,this.velocityX=b.pointerDelta[o].vx,this.velocityY=b.pointerDelta[o].vy,this.swipe=r||"inertiastart"===j?this.getSwipe():null,h.fire("new",w)}return a.prototype.getSwipe=function(){var a=this.interaction;if(a.prevEvent.speed<600||this.timeStamp-a.prevEvent.timeStamp>150)return null;var b=180*Math.atan2(a.prevEvent.velocityY,a.prevEvent.velocityX)/Math.PI,c=22.5;b<0&&(b+=360);var d=135-c<=b&&b<225+c,e=225-c<=b&&b<315+c,f=!d&&(315-c<=b||b<45+c),g=!e&&45-c<=b&&b<135+c;return{up:e,down:g,left:d,right:f,angle:b,speed:a.prevEvent.speed,velocity:{x:a.prevEvent.velocityX,y:a.prevEvent.velocityY}}},a.prototype.preventDefault=function(){},a.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},a.prototype.stopPropagation=function(){this.propagationStopped=!0},a}();h.on("set-delta",function(a){var b=a.iEvent,c=a.interaction,d=a.starting,e=a.deltaSource,f=d?b:c.prevEvent;"client"===e?(b.dx=b.clientX-f.clientX,b.dy=b.clientY-f.clientY):(b.dx=b.pageX-f.pageX,b.dy=b.pageY-f.pageY)}),i.signals=h,b.exports=i},{"./defaultOptions":18,"./utils/Signals":34,"./utils/extend":41,"./utils/getOriginXY":42}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=a("./utils/clone"),f=a("./utils/is"),g=a("./utils/events"),h=a("./utils/extend"),i=a("./actions/base"),j=a("./scope"),k=a("./Eventable"),l=a("./defaultOptions"),m=a("./utils/Signals").new(),n=a("./utils/domUtils"),o=n.getElementRect,p=n.nodeContains,q=n.trySelector,r=n.matchesSelector,s=a("./utils/window"),t=s.getWindow,u=a("./utils/arr"),v=u.contains,w=a("./utils/browser"),x=w.wheelEvent;j.interactables=[];var y=function(){function a(b,c){d(this,a),c=c||{},this.target=b,this.events=new k,this._context=c.context||j.document,this._win=t(q(b)?this._context:b),this._doc=this._win.document,m.fire("new",{target:b,options:c,interactable:this,win:this._win}),j.addDocument(this._doc,this._win),j.interactables.push(this),this.set(c)}return a.prototype.setOnEvents=function(a,b){var c="on"+a;return f.function(b.onstart)&&(this.events[c+"start"]=b.onstart),f.function(b.onmove)&&(this.events[c+"move"]=b.onmove),f.function(b.onend)&&(this.events[c+"end"]=b.onend),f.function(b.oninertiastart)&&(this.events[c+"inertiastart"]=b.oninertiastart),this},a.prototype.setPerAction=function(a,b){for(var c in b)c in l[a]&&(f.object(b[c])?(this.options[a][c]=e(this.options[a][c]||{}),h(this.options[a][c],b[c]),f.object(l.perAction[c])&&"enabled"in l.perAction[c]&&(this.options[a][c].enabled=b[c].enabled!==!1)):f.bool(b[c])&&f.object(l.perAction[c])?this.options[a][c].enabled=b[c]:void 0!==b[c]&&(this.options[a][c]=b[c]))},a.prototype.getRect=function(a){return a=a||this.target,f.string(this.target)&&!f.element(a)&&(a=this._context.querySelector(this.target)),o(a)},a.prototype.rectChecker=function(a){return f.function(a)?(this.getRect=a,this):null===a?(delete this.options.getRect,this):this.getRect},a.prototype._backCompatOption=function(a,b){if(q(b)||f.object(b)){this.options[a]=b;for(var c=0;c<i.names.length;c++){var d;d=i.names[c];var e=d;this.options[e][a]=b}return this}return this.options[a]},a.prototype.origin=function(a){return this._backCompatOption("origin",a)},a.prototype.deltaSource=function(a){return"page"===a||"client"===a?(this.options.deltaSource=a,this):this.options.deltaSource},a.prototype.context=function(){return this._context},a.prototype.inContext=function(a){
return this._context===a.ownerDocument||p(this._context,a)},a.prototype.fire=function(a){return this.events.fire(a),this},a.prototype._onOffMultiple=function(a,b,c,d){if(f.string(b)&&b.search(" ")!==-1&&(b=b.trim().split(/ +/)),f.array(b)){for(var e=0;e<b.length;e++){var g;g=b[e];var h=g;this[a](h,c,d)}return!0}if(f.object(b)){for(var i in b)this[a](i,b[i],c);return!0}},a.prototype.on=function(b,c,d){return this._onOffMultiple("on",b,c,d)?this:("wheel"===b&&(b=x),v(a.eventTypes,b)?this.events.on(b,c):f.string(this.target)?g.addDelegate(this.target,this._context,b,c,d):g.add(this.target,b,c,d),this)},a.prototype.off=function(b,c,d){return this._onOffMultiple("off",b,c,d)?this:("wheel"===b&&(b=x),v(a.eventTypes,b)?this.events.off(b,c):f.string(this.target)?g.removeDelegate(this.target,this._context,b,c,d):g.remove(this.target,b,c,d),this)},a.prototype.set=function(b){f.object(b)||(b={}),this.options=e(l.base);var c=e(l.perAction);for(var d in i.methodDict){var g=i.methodDict[d];this.options[d]=e(l[d]),this.setPerAction(d,c),this[g](b[d])}for(var h=0;h<a.settingsMethods.length;h++){var j;j=a.settingsMethods[h];var k=j;this.options[k]=l.base[k],k in b&&this[k](b[k])}return m.fire("set",{options:b,interactable:this}),this},a.prototype.unset=function(){if(g.remove(this.target,"all"),f.string(this.target))for(var a in g.delegatedEvents){var b=g.delegatedEvents[a];b.selectors[0]===this.target&&b.contexts[0]===this._context&&(b.selectors.splice(0,1),b.contexts.splice(0,1),b.listeners.splice(0,1),b.selectors.length||(b[a]=null)),g.remove(this._context,a,g.delegateListener),g.remove(this._context,a,g.delegateUseCapture,!0)}else g.remove(this,"all");m.fire("unset",{interactable:this}),j.interactables.splice(j.interactables.indexOf(this),1);for(var c=0;c<(j.interactions||[]).length;c++){var d;d=(j.interactions||[])[c];var e=d;e.target===this&&e.interacting()&&!e._ending&&e.stop()}return j.interact},a}();j.interactables.indexOfElement=function(a,b){b=b||j.document;for(var c=0;c<this.length;c++){var d=this[c];if(d.target===a&&d._context===b)return c}return-1},j.interactables.get=function(a,b,c){var d=this[this.indexOfElement(a,b&&b.context)];return d&&(f.string(a)||c||d.inContext(a))?d:null},j.interactables.forEachMatch=function(a,b){for(var c=0;c<this.length;c++){var d;d=this[c];var e=d,g=void 0;if((f.string(e.target)?f.element(a)&&r(a,e.target):a===e.target)&&e.inContext(a)&&(g=b(e)),void 0!==g)return g}},y.eventTypes=j.eventTypes=[],y.signals=m,y.settingsMethods=["deltaSource","origin","preventDefault","rectChecker"],b.exports=y},{"./Eventable":2,"./actions/base":6,"./defaultOptions":18,"./scope":33,"./utils/Signals":34,"./utils/arr":35,"./utils/browser":36,"./utils/clone":37,"./utils/domUtils":39,"./utils/events":40,"./utils/extend":41,"./utils/is":46,"./utils/window":52}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){return function(b){var c=i.getPointerType(b),d=i.getEventTargets(b),e=d[0],f=d[1],g=[];if(k.supportsTouch&&/touch/.test(b.type)){q=(new Date).getTime();for(var j=0;j<b.changedTouches.length;j++){var l;l=b.changedTouches[j];var n=l,o=n,p=m.search(o,b.type,e);g.push([o,p||new r({pointerType:c})])}}else{var s=!1;if(!k.supportsPointerEvent&&/mouse/.test(b.type)){for(var t=0;t<h.interactions.length&&!s;t++)s="mouse"!==h.interactions[t].pointerType&&h.interactions[t].pointerIsDown;s=s||(new Date).getTime()-q<500||0===b.timeStamp}if(!s){var u=m.search(b,b.type,e);u||(u=new r({pointerType:c})),g.push([b,u])}}for(var v=0;v<g.length;v++){var w=g[v],x=w[0],y=w[1];y._updateEventTargets(e,f),y[a](x,b,e,f)}}}function f(a){for(var b=0;b<h.interactions.length;b++){var c;c=h.interactions[b];var d=c;d.end(a),n.fire("endall",{event:a,interaction:d})}}function g(a,b){var c=a.doc,d=0===b.indexOf("add")?j.add:j.remove;for(var e in h.delegatedEvents)d(c,e,j.delegateListener),d(c,e,j.delegateUseCapture,!0);for(var f in u)d(c,f,u[f],k.isIOS?{passive:!1}:void 0)}var h=a("./scope"),i=a("./utils"),j=a("./utils/events"),k=a("./utils/browser"),l=a("./utils/domObjects"),m=a("./utils/interactionFinder"),n=a("./utils/Signals").new(),o={},p=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer"],q=0;h.interactions=[];for(var r=function(){function a(b){var c=b.pointerType;d(this,a),this.target=null,this.element=null,this.prepared={name:null,axis:null,edges:null},this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0},this.downEvent=null,this.downPointer={},this._eventTarget=null,this._curEventTarget=null,this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this.pointerType=c,n.fire("new",this),h.interactions.push(this)}return a.prototype.pointerDown=function(a,b,c){var d=this.updatePointer(a,b,!0);n.fire("down",{pointer:a,event:b,eventTarget:c,pointerIndex:d,interaction:this})},a.prototype.start=function(a,b,c){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===a.name?2:1)||(h.interactions.indexOf(this)===-1&&h.interactions.push(this),i.copyAction(this.prepared,a),this.target=b,this.element=c,n.fire("action-start",{interaction:this,event:this.downEvent}))},a.prototype.pointerMove=function(b,c,d){this.simulation||(this.updatePointer(b),i.setCoords(this.curCoords,this.pointers));var e=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y,f=void 0,g=void 0;this.pointerIsDown&&!this.pointerWasMoved&&(f=this.curCoords.client.x-this.startCoords.client.x,g=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=i.hypot(f,g)>a.pointerMoveTolerance);var h={pointer:b,pointerIndex:this.getPointerIndex(b),event:c,eventTarget:d,dx:f,dy:g,duplicate:e,interaction:this,interactingBeforeMove:this.interacting()};e||i.setCoordDeltas(this.pointerDelta,this.prevCoords,this.curCoords),n.fire("move",h),e||(this.interacting()&&this.doMove(h),this.pointerWasMoved&&i.copyCoords(this.prevCoords,this.curCoords))},a.prototype.doMove=function(a){a=i.extend({pointer:this.pointers[0],event:this.prevEvent,eventTarget:this._eventTarget,interaction:this},a||{}),n.fire("before-action-move",a),this._dontFireMove||n.fire("action-move",a),this._dontFireMove=!1},a.prototype.pointerUp=function(a,b,c,d){var e=this.getPointerIndex(a);n.fire(/cancel$/i.test(b.type)?"cancel":"up",{pointer:a,pointerIndex:e,event:b,eventTarget:c,curEventTarget:d,interaction:this}),this.simulation||this.end(b),this.pointerIsDown=!1,this.removePointer(a,b)},a.prototype.end=function(a){this._ending=!0,a=a||this.prevEvent,this.interacting()&&n.fire("action-end",{event:a,interaction:this}),this.stop(),this._ending=!1},a.prototype.currentAction=function(){return this._interacting?this.prepared.name:null},a.prototype.interacting=function(){return this._interacting},a.prototype.stop=function(){n.fire("stop",{interaction:this}),this._interacting&&(n.fire("stop-active",{interaction:this}),n.fire("stop-"+this.prepared.name,{interaction:this})),this.target=this.element=null,this._interacting=!1,this.prepared.name=this.prevEvent=null},a.prototype.getPointerIndex=function(a){return"mouse"===this.pointerType||"pen"===this.pointerType?0:this.pointerIds.indexOf(i.getPointerId(a))},a.prototype.updatePointer=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b&&/(down|start)$/i.test(b.type),d=i.getPointerId(a),e=this.getPointerIndex(a);return e===-1&&(e=this.pointerIds.length,this.pointerIds[e]=d),c&&n.fire("update-pointer-down",{pointer:a,event:b,down:c,pointerId:d,pointerIndex:e,interaction:this}),this.pointers[e]=a,e},a.prototype.removePointer=function(a,b){var c=this.getPointerIndex(a);c!==-1&&(n.fire("remove-pointer",{pointer:a,event:b,pointerIndex:c,interaction:this}),this.pointers.splice(c,1),this.pointerIds.splice(c,1),this.downTargets.splice(c,1),this.downTimes.splice(c,1))},a.prototype._updateEventTargets=function(a,b){this._eventTarget=a,this._curEventTarget=b},a}(),s=0;s<p.length;s++){var t=p[s];o[t]=e(t)}var u={},v=k.pEventTypes;l.PointerEvent?(u[v.down]=o.pointerDown,u[v.move]=o.pointerMove,u[v.up]=o.pointerUp,u[v.cancel]=o.pointerUp):(u.mousedown=o.pointerDown,u.mousemove=o.pointerMove,u.mouseup=o.pointerUp,u.touchstart=o.pointerDown,u.touchmove=o.pointerMove,u.touchend=o.pointerUp,u.touchcancel=o.pointerUp),u.blur=f,n.on("update-pointer-down",function(a){var b=a.interaction,c=a.pointer,d=a.pointerId,e=a.pointerIndex,f=a.event,g=a.eventTarget,h=a.down;b.pointerIds[e]=d,b.pointers[e]=c,h&&(b.pointerIsDown=!0),b.interacting()||(i.setCoords(b.startCoords,b.pointers),i.copyCoords(b.curCoords,b.startCoords),i.copyCoords(b.prevCoords,b.startCoords),b.downEvent=f,b.downTimes[e]=b.curCoords.timeStamp,b.downTargets[e]=g||f&&i.getEventTargets(f)[0],b.pointerWasMoved=!1,i.pointerExtend(b.downPointer,c))}),h.signals.on("add-document",g),h.signals.on("remove-document",g),r.pointerMoveTolerance=1,r.doOnInteractions=e,r.endAll=f,r.signals=n,r.docEvents=u,h.endAllInteractions=f,b.exports=r},{"./scope":33,"./utils":44,"./utils/Signals":34,"./utils/browser":36,"./utils/domObjects":38,"./utils/events":40,"./utils/interactionFinder":45}],6:[function(a,b,c){"use strict";function d(a,b,c,d){var e=a.prepared.name,g=new f(a,b,e,c,a.element,null,d);a.target.fire(g),a.prevEvent=g}var e=a("../Interaction"),f=a("../InteractEvent"),g={firePrepared:d,names:[],methodDict:{}};e.signals.on("action-start",function(a){var b=a.interaction,c=a.event;b._interacting=!0,d(b,c,"start")}),e.signals.on("action-move",function(a){var b=a.interaction,c=a.event,e=a.preEnd;if(d(b,c,"move",e),!b.interacting())return!1}),e.signals.on("action-end",function(a){var b=a.interaction,c=a.event;d(b,c,"end")}),b.exports=g},{"../InteractEvent":3,"../Interaction":5}],7:[function(a,b,c){"use strict";var d=a("./base"),e=a("../utils"),f=a("../InteractEvent"),g=a("../Interactable"),h=a("../Interaction"),i=a("../defaultOptions"),j={defaults:{enabled:!1,mouseButtons:null,origin:null,snap:null,restrict:null,inertia:null,autoScroll:null,startAxis:"xy",lockAxis:"xy"},checker:function(a,b,c){var d=c.options.drag;return d.enabled?{name:"drag",axis:"start"===d.lockAxis?d.startAxis:d.lockAxis}:null},getCursor:function(){return"move"}};h.signals.on("before-action-move",function(a){var b=a.interaction;if("drag"===b.prepared.name){var c=b.prepared.axis;"x"===c?(b.curCoords.page.y=b.startCoords.page.y,b.curCoords.client.y=b.startCoords.client.y,b.pointerDelta.page.speed=Math.abs(b.pointerDelta.page.vx),b.pointerDelta.client.speed=Math.abs(b.pointerDelta.client.vx),b.pointerDelta.client.vy=0,b.pointerDelta.page.vy=0):"y"===c&&(b.curCoords.page.x=b.startCoords.page.x,b.curCoords.client.x=b.startCoords.client.x,b.pointerDelta.page.speed=Math.abs(b.pointerDelta.page.vy),b.pointerDelta.client.speed=Math.abs(b.pointerDelta.client.vy),b.pointerDelta.client.vx=0,b.pointerDelta.page.vx=0)}}),f.signals.on("new",function(a){var b=a.iEvent,c=a.interaction;if("dragmove"===b.type){var d=c.prepared.axis;"x"===d?(b.pageY=c.startCoords.page.y,b.clientY=c.startCoords.client.y,b.dy=0):"y"===d&&(b.pageX=c.startCoords.page.x,b.clientX=c.startCoords.client.x,b.dx=0)}}),g.prototype.draggable=function(a){return e.is.object(a)?(this.options.drag.enabled=a.enabled!==!1,this.setPerAction("drag",a),this.setOnEvents("drag",a),/^(xy|x|y|start)$/.test(a.lockAxis)&&(this.options.drag.lockAxis=a.lockAxis),/^(xy|x|y)$/.test(a.startAxis)&&(this.options.drag.startAxis=a.startAxis),this):e.is.bool(a)?(this.options.drag.enabled=a,a||(this.ondragstart=this.ondragstart=this.ondragend=null),this):this.options.drag},d.drag=j,d.names.push("drag"),e.merge(g.eventTypes,["dragstart","dragmove","draginertiastart","draginertiaresume","dragend"]),d.methodDict.drag="draggable",i.drag=j.defaults,b.exports=j},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"./base":6}],8:[function(a,b,c){"use strict";function d(a,b){for(var c=[],d=[],e=0;e<l.interactables.length;e++){var f;f=l.interactables[e];var g=f;if(g.options.drop.enabled){var h=g.options.drop.accept;if(!(k.is.element(h)&&h!==b||k.is.string(h)&&!k.matchesSelector(b,h)))for(var i=k.is.string(g.target)?g._context.querySelectorAll(g.target):[g.target],j=0;j<i.length;j++){var m;m=i[j];var n=m;n!==b&&(c.push(g),d.push(n))}}}return{elements:d,dropzones:c}}function e(a,b){for(var c=void 0,d=0;d<a.dropzones.length;d++){var e=a.dropzones[d],f=a.elements[d];f!==c&&(b.target=f,e.fire(b)),c=f}}function f(a,b){var c=d(a,b);a.dropzones=c.dropzones,a.elements=c.elements,a.rects=[];for(var e=0;e<a.dropzones.length;e++)a.rects[e]=a.dropzones[e].getRect(a.elements[e])}function g(a,b,c){var d=a.interaction,e=[];s&&f(d.activeDrops,c);for(var g=0;g<d.activeDrops.dropzones.length;g++){var h=d.activeDrops.dropzones[g],i=d.activeDrops.elements[g],j=d.activeDrops.rects[g];e.push(h.dropCheck(a,b,d.target,c,i,j)?i:null)}var l=k.indexOfDeepestElement(e);return{dropzone:d.activeDrops.dropzones[l]||null,element:d.activeDrops.elements[l]||null}}function h(a,b,c){var d={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null},e={dragEvent:c,interaction:a,target:a.dropElement,dropzone:a.dropTarget,relatedTarget:c.target,draggable:c.interactable,timeStamp:c.timeStamp};return a.dropElement!==a.prevDropElement&&(a.prevDropTarget&&(d.leave=k.extend({type:"dragleave"},e),c.dragLeave=d.leave.target=a.prevDropElement,c.prevDropzone=d.leave.dropzone=a.prevDropTarget),a.dropTarget&&(d.enter={dragEvent:c,interaction:a,target:a.dropElement,dropzone:a.dropTarget,relatedTarget:c.target,draggable:c.interactable,timeStamp:c.timeStamp,type:"dragenter"},c.dragEnter=a.dropElement,c.dropzone=a.dropTarget)),"dragend"===c.type&&a.dropTarget&&(d.drop=k.extend({type:"drop"},e),c.dropzone=a.dropTarget,c.relatedTarget=a.dropElement),"dragstart"===c.type&&(d.activate=k.extend({type:"dropactivate"},e),d.activate.target=null,d.activate.dropzone=null),"dragend"===c.type&&(d.deactivate=k.extend({type:"dropdeactivate"},e),d.deactivate.target=null,d.deactivate.dropzone=null),"dragmove"===c.type&&a.dropTarget&&(d.move=k.extend({dragmove:c,type:"dropmove"},e),c.dropzone=a.dropTarget),d}function i(a,b){var c=a.activeDrops,d=a.prevDropTarget,f=a.dropTarget,g=a.dropElement;b.leave&&d.fire(b.leave),b.move&&f.fire(b.move),b.enter&&f.fire(b.enter),b.drop&&f.fire(b.drop),b.deactivate&&e(c,b.deactivate),a.prevDropTarget=f,a.prevDropElement=g}var j=a("./base"),k=a("../utils"),l=a("../scope"),m=a("../interact"),n=a("../InteractEvent"),o=a("../Interactable"),p=a("../Interaction"),q=a("../defaultOptions"),r={defaults:{enabled:!1,accept:null,overlap:"pointer"}},s=!1;p.signals.on("action-start",function(a){var b=a.interaction,c=a.event;if("drag"===b.prepared.name){b.activeDrops.dropzones=[],b.activeDrops.elements=[],b.activeDrops.rects=[],b.dropEvents=null,b.dynamicDrop||f(b.activeDrops,b.element);var d=b.prevEvent,g=h(b,c,d);g.activate&&e(b.activeDrops,g.activate)}}),n.signals.on("new",function(a){var b=a.interaction,c=a.iEvent,d=a.event;if("dragmove"===c.type||"dragend"===c.type){var e=b.element,f=c,i=g(f,d,e);b.dropTarget=i.dropzone,b.dropElement=i.element,b.dropEvents=h(b,d,f)}}),p.signals.on("action-move",function(a){var b=a.interaction;"drag"===b.prepared.name&&i(b,b.dropEvents)}),p.signals.on("action-end",function(a){var b=a.interaction;"drag"===b.prepared.name&&i(b,b.dropEvents)}),p.signals.on("stop-drag",function(a){var b=a.interaction;b.activeDrops={dropzones:null,elements:null,rects:null},b.dropEvents=null}),o.prototype.dropzone=function(a){return k.is.object(a)?(this.options.drop.enabled=a.enabled!==!1,k.is.function(a.ondrop)&&(this.events.ondrop=a.ondrop),k.is.function(a.ondropactivate)&&(this.events.ondropactivate=a.ondropactivate),k.is.function(a.ondropdeactivate)&&(this.events.ondropdeactivate=a.ondropdeactivate),k.is.function(a.ondragenter)&&(this.events.ondragenter=a.ondragenter),k.is.function(a.ondragleave)&&(this.events.ondragleave=a.ondragleave),k.is.function(a.ondropmove)&&(this.events.ondropmove=a.ondropmove),/^(pointer|center)$/.test(a.overlap)?this.options.drop.overlap=a.overlap:k.is.number(a.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,a.overlap),0)),"accept"in a&&(this.options.drop.accept=a.accept),"checker"in a&&(this.options.drop.checker=a.checker),this):k.is.bool(a)?(this.options.drop.enabled=a,a||(this.ondragenter=this.ondragleave=this.ondrop=this.ondropactivate=this.ondropdeactivate=null),this):this.options.drop},o.prototype.dropCheck=function(a,b,c,d,e,f){var g=!1;if(!(f=f||this.getRect(e)))return!!this.options.drop.checker&&this.options.drop.checker(a,b,g,this,e,c,d);var h=this.options.drop.overlap;if("pointer"===h){var i=k.getOriginXY(c,d,"drag"),j=k.getPageXY(a);j.x+=i.x,j.y+=i.y;var l=j.x>f.left&&j.x<f.right,m=j.y>f.top&&j.y<f.bottom;g=l&&m}var n=c.getRect(d);if(n&&"center"===h){var o=n.left+n.width/2,p=n.top+n.height/2;g=o>=f.left&&o<=f.right&&p>=f.top&&p<=f.bottom}if(n&&k.is.number(h)){var q=Math.max(0,Math.min(f.right,n.right)-Math.max(f.left,n.left))*Math.max(0,Math.min(f.bottom,n.bottom)-Math.max(f.top,n.top)),r=q/(n.width*n.height);g=r>=h}return this.options.drop.checker&&(g=this.options.drop.checker(a,b,g,this,e,c,d)),g},o.signals.on("unset",function(a){var b=a.interactable;b.dropzone(!1)}),o.settingsMethods.push("dropChecker"),p.signals.on("new",function(a){a.dropTarget=null,a.dropElement=null,a.prevDropTarget=null,a.prevDropElement=null,a.dropEvents=null,a.activeDrops={dropzones:[],elements:[],rects:[]}}),p.signals.on("stop",function(a){var b=a.interaction;b.dropTarget=b.dropElement=b.prevDropTarget=b.prevDropElement=null}),m.dynamicDrop=function(a){return k.is.bool(a)?(s=a,m):s},k.merge(o.eventTypes,["dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop"]),j.methodDict.drop="dropzone",q.drop=r.defaults,b.exports=r},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":44,"./base":6}],9:[function(a,b,c){"use strict";var d=a("./base"),e=a("../utils"),f=a("../InteractEvent"),g=a("../Interactable"),h=a("../Interaction"),i=a("../defaultOptions"),j={defaults:{enabled:!1,origin:null,restrict:null},checker:function(a,b,c,d,e){return e.pointerIds.length>=2?{name:"gesture"}:null},getCursor:function(){return""}};f.signals.on("new",function(a){var b=a.iEvent,c=a.interaction;"gesturestart"===b.type&&(b.ds=0,c.gesture.startDistance=c.gesture.prevDistance=b.distance,c.gesture.startAngle=c.gesture.prevAngle=b.angle,c.gesture.scale=1)}),f.signals.on("new",function(a){var b=a.iEvent,c=a.interaction;"gesturemove"===b.type&&(b.ds=b.scale-c.gesture.scale,c.target.fire(b),c.gesture.prevAngle=b.angle,c.gesture.prevDistance=b.distance,b.scale===1/0||null===b.scale||void 0===b.scale||isNaN(b.scale)||(c.gesture.scale=b.scale))}),g.prototype.gesturable=function(a){return e.is.object(a)?(this.options.gesture.enabled=a.enabled!==!1,this.setPerAction("gesture",a),this.setOnEvents("gesture",a),this):e.is.bool(a)?(this.options.gesture.enabled=a,a||(this.ongesturestart=this.ongesturestart=this.ongestureend=null),this):this.options.gesture},f.signals.on("set-delta",function(a){var b=a.interaction,c=a.iEvent,d=a.action,g=a.event,h=a.starting,i=a.ending,j=a.deltaSource;if("gesture"===d){var k=b.pointers;c.touches=[k[0],k[1]],h?(c.distance=e.touchDistance(k,j),c.box=e.touchBBox(k),c.scale=1,c.ds=0,c.angle=e.touchAngle(k,void 0,j),c.da=0):i||g instanceof f?(c.distance=b.prevEvent.distance,c.box=b.prevEvent.box,c.scale=b.prevEvent.scale,c.ds=c.scale-1,c.angle=b.prevEvent.angle,c.da=c.angle-b.gesture.startAngle):(c.distance=e.touchDistance(k,j),c.box=e.touchBBox(k),c.scale=c.distance/b.gesture.startDistance,c.angle=e.touchAngle(k,b.gesture.prevAngle,j),c.ds=c.scale-b.gesture.prevScale,c.da=c.angle-b.gesture.prevAngle)}}),h.signals.on("new",function(a){a.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0}}),d.gesture=j,d.names.push("gesture"),e.merge(g.eventTypes,["gesturestart","gesturemove","gestureend"]),d.methodDict.gesture="gesturable",i.gesture=j.defaults,b.exports=j},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"./base":6}],10:[function(a,b,c){"use strict";function d(a,b,c,d,e,g,h){if(!b)return!1;if(b===!0){var i=f.is.number(g.width)?g.width:g.right-g.left,j=f.is.number(g.height)?g.height:g.bottom-g.top;if(i<0&&("left"===a?a="right":"right"===a&&(a="left")),j<0&&("top"===a?a="bottom":"bottom"===a&&(a="top")),"left"===a)return c.x<(i>=0?g.left:g.right)+h;if("top"===a)return c.y<(j>=0?g.top:g.bottom)+h;if("right"===a)return c.x>(i>=0?g.right:g.left)-h;if("bottom"===a)return c.y>(j>=0?g.bottom:g.top)-h}return!!f.is.element(d)&&(f.is.element(b)?b===d:f.matchesUpTo(d,b,e))}var e=a("./base"),f=a("../utils"),g=a("../utils/browser"),h=a("../InteractEvent"),i=a("../Interactable"),j=a("../Interaction"),k=a("../defaultOptions"),l=g.supportsTouch||g.supportsPointerEvent?20:10,m={defaults:{enabled:!1,mouseButtons:null,origin:null,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},checker:function(a,b,c,e,g,h){if(!h)return null;var i=f.extend({},g.curCoords.page),j=c.options;if(j.resize.enabled){var k=j.resize,m={left:!1,right:!1,top:!1,bottom:!1};if(f.is.object(k.edges)){for(var n in m)m[n]=d(n,k.edges[n],i,g._eventTarget,e,h,k.margin||l);if(m.left=m.left&&!m.right,m.top=m.top&&!m.bottom,m.left||m.right||m.top||m.bottom)return{name:"resize",edges:m}}else{var o="y"!==j.resize.axis&&i.x>h.right-l,p="x"!==j.resize.axis&&i.y>h.bottom-l;if(o||p)return{name:"resize",axes:(o?"x":"")+(p?"y":"")}}}return null},cursors:g.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},getCursor:function(a){if(a.axis)return m.cursors[a.name+a.axis];if(a.edges){for(var b="",c=["top","bottom","left","right"],d=0;d<4;d++)a.edges[c[d]]&&(b+=c[d]);return m.cursors[b]}}};h.signals.on("new",function(a){var b=a.iEvent,c=a.interaction;if("resizestart"===b.type&&c.prepared.edges){var d=c.target.getRect(c.element),e=c.target.options.resize;if(e.square||e.preserveAspectRatio){var g=f.extend({},c.prepared.edges);g.top=g.top||g.left&&!g.bottom,g.left=g.left||g.top&&!g.right,g.bottom=g.bottom||g.right&&!g.top,g.right=g.right||g.bottom&&!g.left,c.prepared._linkedEdges=g}else c.prepared._linkedEdges=null;e.preserveAspectRatio&&(c.resizeStartAspectRatio=d.width/d.height),c.resizeRects={start:d,current:f.extend({},d),inverted:f.extend({},d),previous:f.extend({},d),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},b.rect=c.resizeRects.inverted,b.deltaRect=c.resizeRects.delta}}),h.signals.on("new",function(a){var b=a.iEvent,c=a.phase,d=a.interaction;if("move"===c&&d.prepared.edges){var e=d.target.options.resize,g=e.invert,h="reposition"===g||"negate"===g,i=d.prepared.edges,j=d.resizeRects.start,k=d.resizeRects.current,l=d.resizeRects.inverted,m=d.resizeRects.delta,n=f.extend(d.resizeRects.previous,l),o=i,p=b.dx,q=b.dy;if(e.preserveAspectRatio||e.square){var r=e.preserveAspectRatio?d.resizeStartAspectRatio:1;i=d.prepared._linkedEdges,o.left&&o.bottom||o.right&&o.top?q=-p/r:o.left||o.right?q=p/r:(o.top||o.bottom)&&(p=q*r)}if(i.top&&(k.top+=q),i.bottom&&(k.bottom+=q),i.left&&(k.left+=p),i.right&&(k.right+=p),h){if(f.extend(l,k),"reposition"===g){var s=void 0;l.top>l.bottom&&(s=l.top,l.top=l.bottom,l.bottom=s),l.left>l.right&&(s=l.left,l.left=l.right,l.right=s)}}else l.top=Math.min(k.top,j.bottom),l.bottom=Math.max(k.bottom,j.top),l.left=Math.min(k.left,j.right),l.right=Math.max(k.right,j.left);l.width=l.right-l.left,l.height=l.bottom-l.top;for(var t in l)m[t]=l[t]-n[t];b.edges=d.prepared.edges,b.rect=l,b.deltaRect=m}}),i.prototype.resizable=function(a){return f.is.object(a)?(this.options.resize.enabled=a.enabled!==!1,this.setPerAction("resize",a),this.setOnEvents("resize",a),/^x$|^y$|^xy$/.test(a.axis)?this.options.resize.axis=a.axis:null===a.axis&&(this.options.resize.axis=k.resize.axis),f.is.bool(a.preserveAspectRatio)?this.options.resize.preserveAspectRatio=a.preserveAspectRatio:f.is.bool(a.square)&&(this.options.resize.square=a.square),this):f.is.bool(a)?(this.options.resize.enabled=a,a||(this.onresizestart=this.onresizestart=this.onresizeend=null),this):this.options.resize},j.signals.on("new",function(a){a.resizeAxes="xy"}),h.signals.on("set-delta",function(a){var b=a.interaction,c=a.iEvent,d=a.action;if("resize"===d&&b.resizeAxes){var e=b.target.options;e.resize.square?("y"===b.resizeAxes?c.dx=c.dy:c.dy=c.dx,c.axes="xy"):(c.axes=b.resizeAxes,"x"===b.resizeAxes?c.dy=0:"y"===b.resizeAxes&&(c.dx=0))}}),e.resize=m,e.names.push("resize"),f.merge(i.eventTypes,["resizestart","resizemove","resizeinertiastart","resizeinertiaresume","resizeend"]),e.methodDict.resize="resizable",k.resize=m.defaults,b.exports=m},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"../utils/browser":36,"./base":6}],11:[function(a,b,c){"use strict";var d=a("./utils/raf"),e=a("./utils/window").getWindow,f=a("./utils/is"),g=a("./utils/domUtils"),h=a("./Interaction"),i=a("./defaultOptions"),j={defaults:{enabled:!1,container:null,margin:60,speed:300},interaction:null,i:null,x:0,y:0,isScrolling:!1,prevTime:0,start:function(a){j.isScrolling=!0,d.cancel(j.i),j.interaction=a,j.prevTime=(new Date).getTime(),j.i=d.request(j.scroll)},stop:function(){j.isScrolling=!1,d.cancel(j.i)},scroll:function(){var a=j.interaction.target.options[j.interaction.prepared.name].autoScroll,b=a.container||e(j.interaction.element),c=(new Date).getTime(),g=(c-j.prevTime)/1e3,h=a.speed*g;h>=1&&(f.window(b)?b.scrollBy(j.x*h,j.y*h):b&&(b.scrollLeft+=j.x*h,b.scrollTop+=j.y*h),j.prevTime=c),j.isScrolling&&(d.cancel(j.i),j.i=d.request(j.scroll))},check:function(a,b){var c=a.options;return c[b].autoScroll&&c[b].autoScroll.enabled},onInteractionMove:function(a){var b=a.interaction,c=a.pointer;if(b.interacting()&&j.check(b.target,b.prepared.name)){if(b.simulation)return void(j.x=j.y=0);var d=void 0,h=void 0,i=void 0,k=void 0,l=b.target.options[b.prepared.name].autoScroll,m=l.container||e(b.element);if(f.window(m))k=c.clientX<j.margin,d=c.clientY<j.margin,h=c.clientX>m.innerWidth-j.margin,i=c.clientY>m.innerHeight-j.margin;else{var n=g.getElementClientRect(m);k=c.clientX<n.left+j.margin,d=c.clientY<n.top+j.margin,h=c.clientX>n.right-j.margin,i=c.clientY>n.bottom-j.margin}j.x=h?1:k?-1:0,j.y=i?1:d?-1:0,j.isScrolling||(j.margin=l.margin,j.speed=l.speed,j.start(b))}}};h.signals.on("stop-active",function(){j.stop()}),h.signals.on("action-move",j.onInteractionMove),i.perAction.autoScroll=j.defaults,b.exports=j},{"./Interaction":5,"./defaultOptions":18,"./utils/domUtils":39,"./utils/is":46,"./utils/raf":50,"./utils/window":52}],12:[function(a,b,c){"use strict";var d=a("../Interactable"),e=a("../actions/base"),f=a("../utils/is"),g=a("../utils/domUtils"),h=a("../utils"),i=h.warnOnce;d.prototype.getAction=function(a,b,c,d){var e=this.defaultActionChecker(a,b,c,d);return this.options.actionChecker?this.options.actionChecker(a,b,e,this,d,c):e},d.prototype.ignoreFrom=i(function(a){return this._backCompatOption("ignoreFrom",a)},"Interactable.ignoreForm() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),d.prototype.allowFrom=i(function(a){return this._backCompatOption("allowFrom",a)},"Interactable.allowForm() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),d.prototype.testIgnore=function(a,b,c){return!(!a||!f.element(c))&&(f.string(a)?g.matchesUpTo(c,a,b):!!f.element(a)&&g.nodeContains(a,c))},d.prototype.testAllow=function(a,b,c){return!a||!!f.element(c)&&(f.string(a)?g.matchesUpTo(c,a,b):!!f.element(a)&&g.nodeContains(a,c))},d.prototype.testIgnoreAllow=function(a,b,c){return!this.testIgnore(a.ignoreFrom,b,c)&&this.testAllow(a.allowFrom,b,c)},d.prototype.actionChecker=function(a){return f.function(a)?(this.options.actionChecker=a,this):null===a?(delete this.options.actionChecker,this):this.options.actionChecker},d.prototype.styleCursor=function(a){return f.bool(a)?(this.options.styleCursor=a,this):null===a?(delete this.options.styleCursor,this):this.options.styleCursor},d.prototype.defaultActionChecker=function(a,b,c,d){for(var f=this.getRect(d),g=b.buttons||{0:1,1:4,3:8,4:16}[b.button],h=null,i=0;i<e.names.length;i++){var j;j=e.names[i];var k=j;if((!c.pointerIsDown||!/mouse|pointer/.test(c.pointerType)||0!==(g&this.options[k].mouseButtons))&&(h=e[k].checker(a,b,this,d,c,f)))return h}}},{"../Interactable":4,"../actions/base":6,"../utils":44,"../utils/domUtils":39,"../utils/is":46}],13:[function(a,b,c){"use strict";function d(a,b,c,d){return o.is.object(a)&&b.testIgnoreAllow(b.options[a.name],c,d)&&b.options[a.name].enabled&&h(b,c,a)?a:null}function e(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h],k=f[h],l=d(j.getAction(b,c,a,k),j,k,g);if(l)return{action:l,target:j,element:k}}return{}}function f(a,b,c,d){function f(a){g.push(a),h.push(i)}for(var g=[],h=[],i=d;o.is.element(i);){g=[],h=[],n.interactables.forEachMatch(i,f);var j=e(a,b,c,g,h,d);if(j.action&&!j.target.options[j.action.name].manualStart)return j;i=o.parentNode(i)}return{}}function g(a,b){var c=b.action,d=b.target,e=b.element;if(c=c||{},a.target&&a.target.options.styleCursor&&(a.target._doc.documentElement.style.cursor=""),a.target=d,a.element=e,o.copyAction(a.prepared,c),d&&d.options.styleCursor){var f=c?l[c.name].getCursor(c):"";a.target._doc.documentElement.style.cursor=f}p.fire("prepared",{interaction:a})}function h(a,b,c){var d=a.options,e=d[c.name].max,f=d[c.name].maxPerElement,g=0,h=0,i=0;if(e&&f&&q.maxInteractions){for(var j=0;j<n.interactions.length;j++){var k;k=n.interactions[j];var l=k,m=l.prepared.name;if(l.interacting()){if(g++,g>=q.maxInteractions)return!1;if(l.target===a){if(h+=m===c.name|0,h>=e)return!1;if(l.element===b&&(i++,m!==c.name||i>=f))return!1}}}return q.maxInteractions>0}}var i=a("../interact"),j=a("../Interactable"),k=a("../Interaction"),l=a("../actions/base"),m=a("../defaultOptions"),n=a("../scope"),o=a("../utils"),p=a("../utils/Signals").new();a("./InteractableMethods");var q={signals:p,withinInteractionLimit:h,maxInteractions:1/0,defaults:{perAction:{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}},setActionDefaults:function(a){o.extend(a.defaults,q.defaults.perAction)},validateAction:d};k.signals.on("down",function(a){var b=a.interaction,c=a.pointer,d=a.event,e=a.eventTarget;if(!b.interacting()){var h=f(b,c,d,e);g(b,h)}}),k.signals.on("move",function(a){var b=a.interaction,c=a.pointer,d=a.event,e=a.eventTarget;if("mouse"===b.pointerType&&!b.pointerIsDown&&!b.interacting()){var h=f(b,c,d,e);g(b,h)}}),k.signals.on("move",function(a){var b=a.interaction,c=a.event;if(b.pointerIsDown&&!b.interacting()&&b.pointerWasMoved&&b.prepared.name){p.fire("before-start",a);var d=b.target;b.prepared.name&&d&&(d.options[b.prepared.name].manualStart||!h(d,b.element,b.prepared)?b.stop(c):b.start(b.prepared,d,b.element))}}),k.signals.on("stop",function(a){var b=a.interaction,c=b.target;c&&c.options.styleCursor&&(c._doc.documentElement.style.cursor="")}),i.maxInteractions=function(a){return o.is.number(a)?(q.maxInteractions=a,i):q.maxInteractions},j.settingsMethods.push("styleCursor"),
j.settingsMethods.push("actionChecker"),j.settingsMethods.push("ignoreFrom"),j.settingsMethods.push("allowFrom"),m.base.actionChecker=null,m.base.styleCursor=!0,o.extend(m.perAction,q.defaults.perAction),b.exports=q},{"../Interactable":4,"../Interaction":5,"../actions/base":6,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":44,"../utils/Signals":34,"./InteractableMethods":12}],14:[function(a,b,c){"use strict";function d(a,b){if(!b)return!1;var c=b.options.drag.startAxis;return"xy"===a||"xy"===c||c===a}var e=a("./base"),f=a("../scope"),g=a("../utils/is"),h=a("../utils/domUtils"),i=h.parentNode;e.setActionDefaults(a("../actions/drag")),e.signals.on("before-start",function(a){var b=a.interaction,c=a.eventTarget,h=a.dx,j=a.dy;if("drag"===b.prepared.name){var k=Math.abs(h),l=Math.abs(j),m=b.target.options.drag,n=m.startAxis,o=k>l?"x":k<l?"y":"xy";if(b.prepared.axis="start"===m.lockAxis?o[0]:m.lockAxis,"xy"!==o&&"xy"!==n&&n!==o){b.prepared.name=null;for(var p=c,q=function(a){if(a!==b.target){var f=b.target.options.drag;if(!f.manualStart&&a.testIgnoreAllow(f,p,c)){var g=a.getAction(b.downPointer,b.downEvent,b,p);if(g&&"drag"===g.name&&d(o,a)&&e.validateAction(g,a,p,c))return a}}};g.element(p);){var r=f.interactables.forEachMatch(p,q);if(r){b.prepared.name="drag",b.target=r,b.element=p;break}p=i(p)}}}})},{"../actions/drag":7,"../scope":33,"../utils/domUtils":39,"../utils/is":46,"./base":13}],15:[function(a,b,c){"use strict";a("./base").setActionDefaults(a("../actions/gesture"))},{"../actions/gesture":9,"./base":13}],16:[function(a,b,c){"use strict";function d(a){var b=a.prepared&&a.prepared.name;if(!b)return null;var c=a.target.options;return c[b].hold||c[b].delay}var e=a("./base"),f=a("../Interaction");e.defaults.perAction.hold=0,e.defaults.perAction.delay=0,f.signals.on("new",function(a){a.autoStartHoldTimer=null}),e.signals.on("prepared",function(a){var b=a.interaction,c=d(b);c>0&&(b.autoStartHoldTimer=setTimeout(function(){b.start(b.prepared,b.target,b.element)},c))}),f.signals.on("move",function(a){var b=a.interaction,c=a.duplicate;b.pointerWasMoved&&!c&&clearTimeout(b.autoStartHoldTimer)}),e.signals.on("before-start",function(a){var b=a.interaction,c=d(b);c>0&&(b.prepared.name=null)}),b.exports={getHoldDuration:d}},{"../Interaction":5,"./base":13}],17:[function(a,b,c){"use strict";a("./base").setActionDefaults(a("../actions/resize"))},{"../actions/resize":10,"./base":13}],18:[function(a,b,c){"use strict";b.exports={base:{accept:null,preventDefault:"auto",deltaSource:"page"},perAction:{origin:{x:0,y:0},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}}}},{}],19:[function(a,b,c){"use strict";a("./inertia"),a("./modifiers/snap"),a("./modifiers/restrict"),a("./pointerEvents/base"),a("./pointerEvents/holdRepeat"),a("./pointerEvents/interactableTargets"),a("./autoStart/hold"),a("./actions/gesture"),a("./actions/resize"),a("./actions/drag"),a("./actions/drop"),a("./modifiers/snapSize"),a("./modifiers/restrictEdges"),a("./modifiers/restrictSize"),a("./autoStart/gesture"),a("./autoStart/resize"),a("./autoStart/drag"),a("./interactablePreventDefault.js"),a("./autoScroll"),b.exports=a("./interact")},{"./actions/drag":7,"./actions/drop":8,"./actions/gesture":9,"./actions/resize":10,"./autoScroll":11,"./autoStart/drag":14,"./autoStart/gesture":15,"./autoStart/hold":16,"./autoStart/resize":17,"./inertia":20,"./interact":21,"./interactablePreventDefault.js":22,"./modifiers/restrict":24,"./modifiers/restrictEdges":25,"./modifiers/restrictSize":26,"./modifiers/snap":27,"./modifiers/snapSize":28,"./pointerEvents/base":30,"./pointerEvents/holdRepeat":31,"./pointerEvents/interactableTargets":32}],20:[function(a,b,c){"use strict";function d(a,b){var c=a.target.options[a.prepared.name].inertia,d=c.resistance,e=-Math.log(c.endSpeed/b.v0)/d;b.x0=a.prevEvent.pageX,b.y0=a.prevEvent.pageY,b.t0=b.startEvent.timeStamp/1e3,b.sx=b.sy=0,b.modifiedXe=b.xe=(b.vx0-e)/d,b.modifiedYe=b.ye=(b.vy0-e)/d,b.te=e,b.lambda_v0=d/b.v0,b.one_ve_v0=1-c.endSpeed/b.v0}function e(){g(this),k.setCoordDeltas(this.pointerDelta,this.prevCoords,this.curCoords);var a=this.inertiaStatus,b=this.target.options[this.prepared.name].inertia,c=b.resistance,d=(new Date).getTime()/1e3-a.t0;if(d<a.te){var e=1-(Math.exp(-c*d)-a.lambda_v0)/a.one_ve_v0;if(a.modifiedXe===a.xe&&a.modifiedYe===a.ye)a.sx=a.xe*e,a.sy=a.ye*e;else{var f=k.getQuadraticCurvePoint(0,0,a.xe,a.ye,a.modifiedXe,a.modifiedYe,e);a.sx=f.x,a.sy=f.y}this.doMove(),a.i=l.request(this.boundInertiaFrame)}else a.sx=a.modifiedXe,a.sy=a.modifiedYe,this.doMove(),this.end(a.startEvent),a.active=!1,this.simulation=null;k.copyCoords(this.prevCoords,this.curCoords)}function f(){g(this);var a=this.inertiaStatus,b=(new Date).getTime()-a.t0,c=this.target.options[this.prepared.name].inertia.smoothEndDuration;b<c?(a.sx=k.easeOutQuad(b,0,a.xe,c),a.sy=k.easeOutQuad(b,0,a.ye,c),this.pointerMove(a.startEvent,a.startEvent),a.i=l.request(this.boundSmoothEndFrame)):(a.sx=a.xe,a.sy=a.ye,this.pointerMove(a.startEvent,a.startEvent),this.end(a.startEvent),a.smoothEnd=a.active=!1,this.simulation=null)}function g(a){var b=a.inertiaStatus;if(b.active){var c=b.upCoords.page,d=b.upCoords.client;k.setCoords(a.curCoords,[{pageX:c.x+b.sx,pageY:c.y+b.sy,clientX:d.x+b.sx,clientY:d.y+b.sy}])}}var h=a("./InteractEvent"),i=a("./Interaction"),j=a("./modifiers/base"),k=a("./utils"),l=a("./utils/raf");i.signals.on("new",function(a){a.inertiaStatus={active:!1,smoothEnd:!1,allowResume:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,lambda_v0:0,one_ve_v0:0,i:null},a.boundInertiaFrame=function(){return e.apply(a)},a.boundSmoothEndFrame=function(){return f.apply(a)}}),i.signals.on("down",function(a){var b=a.interaction,c=a.event,d=a.pointer,e=a.eventTarget,f=b.inertiaStatus;if(f.active)for(var g=e;k.is.element(g);){if(g===b.element){l.cancel(f.i),f.active=!1,b.simulation=null,b.updatePointer(d),k.setCoords(b.curCoords,b.pointers);var m={interaction:b};i.signals.fire("before-action-move",m),i.signals.fire("action-resume",m);var n=new h(b,c,b.prepared.name,"inertiaresume",b.element);b.target.fire(n),b.prevEvent=n,j.resetStatuses(b.modifierStatuses),k.copyCoords(b.prevCoords,b.curCoords);break}g=k.parentNode(g)}}),i.signals.on("up",function(a){var b=a.interaction,c=a.event,e=b.inertiaStatus;if(b.interacting()&&!e.active){var f=b.target,g=f&&f.options,i=g&&b.prepared.name&&g[b.prepared.name].inertia,m=(new Date).getTime(),n={},o=k.extend({},b.curCoords.page),p=b.pointerDelta.client.speed,q=!1,r=void 0,s=i&&i.enabled&&"gesture"!==b.prepared.name&&c!==e.startEvent,t=s&&m-b.curCoords.timeStamp<50&&p>i.minSpeed&&p>i.endSpeed,u={interaction:b,pageCoords:o,statuses:n,preEnd:!0,requireEndOnly:!0};s&&!t&&(j.resetStatuses(n),r=j.setAll(u),r.shouldMove&&r.locked&&(q=!0)),(t||q)&&(k.copyCoords(e.upCoords,b.curCoords),b.pointers[0]=e.startEvent=new h(b,c,b.prepared.name,"inertiastart",b.element),e.t0=m,e.active=!0,e.allowResume=i.allowResume,b.simulation=e,f.fire(e.startEvent),t?(e.vx0=b.pointerDelta.client.vx,e.vy0=b.pointerDelta.client.vy,e.v0=p,d(b,e),k.extend(o,b.curCoords.page),o.x+=e.xe,o.y+=e.ye,j.resetStatuses(n),r=j.setAll(u),e.modifiedXe+=r.dx,e.modifiedYe+=r.dy,e.i=l.request(b.boundInertiaFrame)):(e.smoothEnd=!0,e.xe=r.dx,e.ye=r.dy,e.sx=e.sy=0,e.i=l.request(b.boundSmoothEndFrame)))}}),i.signals.on("stop-active",function(a){var b=a.interaction,c=b.inertiaStatus;c.active&&(l.cancel(c.i),c.active=!1,b.simulation=null)})},{"./InteractEvent":3,"./Interaction":5,"./modifiers/base":23,"./utils":44,"./utils/raf":50}],21:[function(a,b,c){"use strict";function d(a,b){var c=h.interactables.get(a,b);return c||(c=new i(a,b),c.events.global=k),c}var e=a("./utils/browser"),f=a("./utils/events"),g=a("./utils"),h=a("./scope"),i=a("./Interactable"),j=a("./Interaction"),k={};d.isSet=function(a,b){return h.interactables.indexOfElement(a,b&&b.context)!==-1},d.on=function(a,b,c){if(g.is.string(a)&&a.search(" ")!==-1&&(a=a.trim().split(/ +/)),g.is.array(a)){for(var e=0;e<a.length;e++){var j;j=a[e];var l=j;d.on(l,b,c)}return d}if(g.is.object(a)){for(var m in a)d.on(m,a[m],b);return d}return g.contains(i.eventTypes,a)?k[a]?k[a].push(b):k[a]=[b]:f.add(h.document,a,b,{options:c}),d},d.off=function(a,b,c){if(g.is.string(a)&&a.search(" ")!==-1&&(a=a.trim().split(/ +/)),g.is.array(a)){for(var e=0;e<a.length;e++){var j;j=a[e];var l=j;d.off(l,b,c)}return d}if(g.is.object(a)){for(var m in a)d.off(m,a[m],b);return d}if(g.contains(i.eventTypes,a)){var n=void 0;a in k&&(n=k[a].indexOf(b))!==-1&&k[a].splice(n,1)}else f.remove(h.document,a,b,c);return d},d.debug=function(){return h},d.getPointerAverage=g.pointerAverage,d.getTouchBBox=g.touchBBox,d.getTouchDistance=g.touchDistance,d.getTouchAngle=g.touchAngle,d.getElementRect=g.getElementRect,d.getElementClientRect=g.getElementClientRect,d.matchesSelector=g.matchesSelector,d.closest=g.closest,d.supportsTouch=function(){return e.supportsTouch},d.supportsPointerEvent=function(){return e.supportsPointerEvent},d.stop=function(a){for(var b=h.interactions.length-1;b>=0;b--)h.interactions[b].stop(a);return d},d.pointerMoveTolerance=function(a){return g.is.number(a)?(j.pointerMoveTolerance=a,d):j.pointerMoveTolerance},d.addDocument=h.addDocument,d.removeDocument=h.removeDocument,h.interact=d,b.exports=d},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils":44,"./utils/browser":36,"./utils/events":40}],22:[function(a,b,c){"use strict";function d(a){var b=a.interaction,c=a.event;b.target&&b.target.checkAndPreventDefault(c)}var e=a("./Interactable"),f=a("./Interaction"),g=a("./scope"),h=a("./utils/is"),i=a("./utils/events"),j=a("./utils/browser"),k=a("./utils/domUtils"),l=k.nodeContains,m=k.matchesSelector;e.prototype.preventDefault=function(a){return/^(always|never|auto)$/.test(a)?(this.options.preventDefault=a,this):h.bool(a)?(this.options.preventDefault=a?"always":"never",this):this.options.preventDefault},e.prototype.checkAndPreventDefault=function(a){var b=this.options.preventDefault;if("never"!==b)return"always"===b?void a.preventDefault():void(i.supportsPassive&&/^touch(start|move)$/.test(a.type)&&!j.isIOS||/^(mouse|pointer|touch)*(down|start)/i.test(a.type)||h.element(a.target)&&m(a.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||a.preventDefault())};for(var n=["down","move","up","cancel"],o=0;o<n.length;o++){var p=n[o];f.signals.on(p,d)}f.docEvents.dragstart=function(a){for(var b=0;b<g.interactions.length;b++){var c;c=g.interactions[b];var d=c;if(d.element&&(d.element===a.target||l(d.element,a.target)))return void d.target.checkAndPreventDefault(a)}}},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils/browser":36,"./utils/domUtils":39,"./utils/events":40,"./utils/is":46}],23:[function(a,b,c){"use strict";function d(a,b,c){return a&&a.enabled&&(b||!a.endOnly)&&(!c||a.endOnly)}var e=a("../InteractEvent"),f=a("../Interaction"),g=a("../utils/extend"),h={names:[],setOffsets:function(a){var b=a.interaction,c=a.pageCoords,d=b.target,e=b.element,f=b.startOffset,g=d.getRect(e);g?(f.left=c.x-g.left,f.top=c.y-g.top,f.right=g.right-c.x,f.bottom=g.bottom-c.y,"width"in g||(g.width=g.right-g.left),"height"in g||(g.height=g.bottom-g.top)):f.left=f.top=f.right=f.bottom=0,a.rect=g,a.interactable=d,a.element=e;for(var i=0;i<h.names.length;i++){var j;j=h.names[i];var k=j;a.options=d.options[b.prepared.name][k],a.options&&(b.modifierOffsets[k]=h[k].setOffset(a))}},setAll:function(a){var b=a.interaction,c=a.statuses,e=a.preEnd,f=a.requireEndOnly,i={dx:0,dy:0,changed:!1,locked:!1,shouldMove:!0};a.modifiedCoords=g({},a.pageCoords);for(var j=0;j<h.names.length;j++){var k;k=h.names[j];var l=k,m=h[l],n=b.target.options[b.prepared.name][l];d(n,e,f)&&(a.status=a.status=c[l],a.options=n,a.offset=a.interaction.modifierOffsets[l],m.set(a),a.status.locked&&(a.modifiedCoords.x+=a.status.dx,a.modifiedCoords.y+=a.status.dy,i.dx+=a.status.dx,i.dy+=a.status.dy,i.locked=!0))}return i.shouldMove=!a.status||!i.locked||a.status.changed,i},resetStatuses:function(a){for(var b=0;b<h.names.length;b++){var c;c=h.names[b];var d=c,e=a[d]||{};e.dx=e.dy=0,e.modifiedX=e.modifiedY=NaN,e.locked=!1,e.changed=!0,a[d]=e}return a},start:function(a,b){var c=a.interaction,d={interaction:c,pageCoords:("action-resume"===b?c.curCoords:c.startCoords).page,startOffset:c.startOffset,statuses:c.modifierStatuses,preEnd:!1,requireEndOnly:!1};h.setOffsets(d),h.resetStatuses(d.statuses),d.pageCoords=g({},c.startCoords.page),c.modifierResult=h.setAll(d)},beforeMove:function(a){var b=a.interaction,c=a.preEnd,d=a.interactingBeforeMove,e=h.setAll({interaction:b,preEnd:c,pageCoords:b.curCoords.page,statuses:b.modifierStatuses,requireEndOnly:!1});!e.shouldMove&&d&&(b._dontFireMove=!0),b.modifierResult=e},end:function(a){for(var b=a.interaction,c=a.event,e=0;e<h.names.length;e++){var f;f=h.names[e];var g=f,i=b.target.options[b.prepared.name][g];if(d(i,!0,!0)){b.doMove({event:c,preEnd:!0});break}}},setXY:function(a){for(var b=a.iEvent,c=a.interaction,d=g({},a),e=0;e<h.names.length;e++){var f=h.names[e];if(d.options=c.target.options[c.prepared.name][f],d.options){var i=h[f];d.status=c.modifierStatuses[f],b[f]=i.modifyCoords(d)}}}};f.signals.on("new",function(a){a.startOffset={left:0,right:0,top:0,bottom:0},a.modifierOffsets={},a.modifierStatuses=h.resetStatuses({}),a.modifierResult=null}),f.signals.on("action-start",h.start),f.signals.on("action-resume",h.start),f.signals.on("before-action-move",h.beforeMove),f.signals.on("action-end",h.end),e.signals.on("set-xy",h.setXY),b.exports=h},{"../InteractEvent":3,"../Interaction":5,"../utils/extend":41}],24:[function(a,b,c){"use strict";function d(a,b,c){return f.is.function(a)?f.resolveRectLike(a,b.target,b.element,[c.x,c.y,b]):f.resolveRectLike(a,b.target,b.element)}var e=a("./base"),f=a("../utils"),g=a("../defaultOptions"),h={defaults:{enabled:!1,endOnly:!1,restriction:null,elementRect:null},setOffset:function(a){var b=a.rect,c=a.startOffset,d=a.options,e=d&&d.elementRect,f={};return b&&e?(f.left=c.left-b.width*e.left,f.top=c.top-b.height*e.top,f.right=c.right-b.width*(1-e.right),f.bottom=c.bottom-b.height*(1-e.bottom)):f.left=f.top=f.right=f.bottom=0,f},set:function(a){var b=a.modifiedCoords,c=a.interaction,e=a.status,g=a.options;if(!g)return e;var h=e.useStatusXY?{x:e.x,y:e.y}:f.extend({},b),i=d(g.restriction,c,h);if(!i)return e;e.dx=0,e.dy=0,e.locked=!1;var j=i,k=h.x,l=h.y,m=c.modifierOffsets.restrict;"x"in i&&"y"in i?(k=Math.max(Math.min(j.x+j.width-m.right,h.x),j.x+m.left),l=Math.max(Math.min(j.y+j.height-m.bottom,h.y),j.y+m.top)):(k=Math.max(Math.min(j.right-m.right,h.x),j.left+m.left),l=Math.max(Math.min(j.bottom-m.bottom,h.y),j.top+m.top)),e.dx=k-h.x,e.dy=l-h.y,e.changed=e.modifiedX!==k||e.modifiedY!==l,e.locked=!(!e.dx&&!e.dy),e.modifiedX=k,e.modifiedY=l},modifyCoords:function(a){var b=a.page,c=a.client,d=a.status,e=a.phase,f=a.options,g=f&&f.elementRect;if(f&&f.enabled&&("start"!==e||!g||!d.locked)&&d.locked)return b.x+=d.dx,b.y+=d.dy,c.x+=d.dx,c.y+=d.dy,{dx:d.dx,dy:d.dy}},getRestrictionRect:d};e.restrict=h,e.names.push("restrict"),g.perAction.restrict=h.defaults,b.exports=h},{"../defaultOptions":18,"../utils":44,"./base":23}],25:[function(a,b,c){"use strict";var d=a("./base"),e=a("../utils"),f=a("../utils/rect"),g=a("../defaultOptions"),h=a("../actions/resize"),i=a("./restrict"),j=i.getRestrictionRect,k={top:+(1/0),left:+(1/0),bottom:-(1/0),right:-(1/0)},l={top:-(1/0),left:-(1/0),bottom:+(1/0),right:+(1/0)},m={defaults:{enabled:!1,endOnly:!1,min:null,max:null,offset:null},setOffset:function(a){var b=a.interaction,c=a.startOffset,d=a.options;if(!d)return e.extend({},c);var f=j(d.offset,b,b.startCoords.page);return f?{top:c.top+f.y,left:c.left+f.x,bottom:c.bottom+f.y,right:c.right+f.x}:c},set:function(a){var b=a.modifiedCoords,c=a.interaction,d=a.status,g=a.offset,h=a.options,i=c.prepared.linkedEdges||c.prepared.edges;if(c.interacting()&&i){var m=d.useStatusXY?{x:d.x,y:d.y}:e.extend({},b),n=f.xywhToTlbr(j(h.inner,c,m))||k,o=f.xywhToTlbr(j(h.outer,c,m))||l,p=m.x,q=m.y;d.dx=0,d.dy=0,d.locked=!1,i.top?q=Math.min(Math.max(o.top+g.top,m.y),n.top+g.top):i.bottom&&(q=Math.max(Math.min(o.bottom-g.bottom,m.y),n.bottom-g.bottom)),i.left?p=Math.min(Math.max(o.left+g.left,m.x),n.left+g.left):i.right&&(p=Math.max(Math.min(o.right-g.right,m.x),n.right-g.right)),d.dx=p-m.x,d.dy=q-m.y,d.changed=d.modifiedX!==p||d.modifiedY!==q,d.locked=!(!d.dx&&!d.dy),d.modifiedX=p,d.modifiedY=q}},modifyCoords:function(a){var b=a.page,c=a.client,d=a.status,e=a.phase,f=a.options;if(f&&f.enabled&&("start"!==e||!d.locked)&&d.locked)return b.x+=d.dx,b.y+=d.dy,c.x+=d.dx,c.y+=d.dy,{dx:d.dx,dy:d.dy}},noInner:k,noOuter:l,getRestrictionRect:j};d.restrictEdges=m,d.names.push("restrictEdges"),g.perAction.restrictEdges=m.defaults,h.defaults.restrictEdges=m.defaults,b.exports=m},{"../actions/resize":10,"../defaultOptions":18,"../utils":44,"../utils/rect":51,"./base":23,"./restrict":24}],26:[function(a,b,c){"use strict";var d=a("./base"),e=a("./restrictEdges"),f=a("../utils"),g=a("../utils/rect"),h=a("../defaultOptions"),i=a("../actions/resize"),j={width:-(1/0),height:-(1/0)},k={width:+(1/0),height:+(1/0)},l={defaults:{enabled:!1,endOnly:!1,min:null,max:null},setOffset:function(a){var b=a.interaction;return b.startOffset},set:function(a){var b=a.interaction,c=a.options,d=b.prepared.linkedEdges||b.prepared.edges;if(b.interacting()&&d){var h=g.xywhToTlbr(b.resizeRects.inverted),i=g.tlbrToXywh(e.getRestrictionRect(c.min,b))||j,l=g.tlbrToXywh(e.getRestrictionRect(c.max,b))||k;a.options={enabled:c.enabled,endOnly:c.endOnly,inner:f.extend({},e.noInner),outer:f.extend({},e.noOuter)},d.top?(a.options.inner.top=h.bottom-i.height,a.options.outer.top=h.bottom-l.height):d.bottom&&(a.options.inner.bottom=h.top+i.height,a.options.outer.bottom=h.top+l.height),d.left?(a.options.inner.left=h.right-i.width,a.options.outer.left=h.right-l.width):d.right&&(a.options.inner.right=h.left+i.width,a.options.outer.right=h.left+l.width),e.set(a)}},modifyCoords:e.modifyCoords};d.restrictSize=l,d.names.push("restrictSize"),h.perAction.restrictSize=l.defaults,i.defaults.restrictSize=l.defaults,b.exports=l},{"../actions/resize":10,"../defaultOptions":18,"../utils":44,"../utils/rect":51,"./base":23,"./restrictEdges":25}],27:[function(a,b,c){"use strict";var d=a("./base"),e=a("../interact"),f=a("../utils"),g=a("../defaultOptions"),h={defaults:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null,relativePoints:null},setOffset:function(a){var b=a.interaction,c=a.interactable,d=a.element,e=a.rect,g=a.startOffset,h=a.options,i=[],j=f.rectToXY(f.resolveRectLike(h.origin)),k=j||f.getOriginXY(c,d,b.prepared.name);h=h||c.options[b.prepared.name].snap||{};var l=void 0;if("startCoords"===h.offset)l={x:b.startCoords.page.x-k.x,y:b.startCoords.page.y-k.y};else{var m=f.resolveRectLike(h.offset,c,d,[b]);l=f.rectToXY(m)||{x:0,y:0}}if(e&&h.relativePoints&&h.relativePoints.length)for(var n=0;n<h.relativePoints.length;n++){var o;o=h.relativePoints[n];var p=o,q=p.x,r=p.y;i.push({x:g.left-e.width*q+l.x,y:g.top-e.height*r+l.y})}else i.push(l);return i},set:function(a){var b=a.interaction,c=a.modifiedCoords,d=a.status,e=a.options,g=a.offset,h=[],i=void 0,j=void 0,k=void 0;if(d.useStatusXY)j={x:d.x,y:d.y};else{var l=f.getOriginXY(b.target,b.element,b.prepared.name);j=f.extend({},c),j.x-=l.x,j.y-=l.y}d.realX=j.x,d.realY=j.y;for(var m=e.targets?e.targets.length:0,n=0;n<g.length;n++){var o;o=g[n];for(var p=o,q=p.x,r=p.y,s=j.x-q,t=j.y-r,u=0;u<(e.targets||[]).length;u++){var v;v=(e.targets||[])[u];var w=v;i=f.is.function(w)?w(s,t,b):w,i&&h.push({x:f.is.number(i.x)?i.x+q:s,y:f.is.number(i.y)?i.y+r:t,range:f.is.number(i.range)?i.range:e.range})}}var x={target:null,inRange:!1,distance:0,range:0,dx:0,dy:0};for(k=0,m=h.length;k<m;k++){i=h[k];var y=i.range,z=i.x-j.x,A=i.y-j.y,B=f.hypot(z,A),C=B<=y;y===1/0&&x.inRange&&x.range!==1/0&&(C=!1),x.target&&!(C?x.inRange&&y!==1/0?B/y<x.distance/x.range:y===1/0&&x.range!==1/0||B<x.distance:!x.inRange&&B<x.distance)||(x.target=i,x.distance=B,x.range=y,x.inRange=C,x.dx=z,x.dy=A,d.range=y)}var D=void 0;x.target?(D=d.modifiedX!==x.target.x||d.modifiedY!==x.target.y,d.modifiedX=x.target.x,d.modifiedY=x.target.y):(D=!0,d.modifiedX=NaN,d.modifiedY=NaN),d.dx=x.dx,d.dy=x.dy,d.changed=D||x.inRange&&!d.locked,d.locked=x.inRange},modifyCoords:function(a){var b=a.page,c=a.client,d=a.status,e=a.phase,f=a.options,g=f&&f.relativePoints;if(f&&f.enabled&&("start"!==e||!g||!g.length))return d.locked&&(b.x+=d.dx,b.y+=d.dy,c.x+=d.dx,c.y+=d.dy),{range:d.range,locked:d.locked,x:d.modifiedX,y:d.modifiedY,realX:d.realX,realY:d.realY,dx:d.dx,dy:d.dy}}};e.createSnapGrid=function(a){return function(b,c){var d=a.limits||{left:-(1/0),right:1/0,top:-(1/0),bottom:1/0},e=0,g=0;f.is.object(a.offset)&&(e=a.offset.x,g=a.offset.y);var h=Math.round((b-e)/a.x),i=Math.round((c-g)/a.y),j=Math.max(d.left,Math.min(d.right,h*a.x+e)),k=Math.max(d.top,Math.min(d.bottom,i*a.y+g));return{x:j,y:k,range:a.range}}},d.snap=h,d.names.push("snap"),g.perAction.snap=h.defaults,b.exports=h},{"../defaultOptions":18,"../interact":21,"../utils":44,"./base":23}],28:[function(a,b,c){"use strict";var d=a("./base"),e=a("./snap"),f=a("../defaultOptions"),g=a("../actions/resize"),h=a("../utils/"),i={defaults:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null},setOffset:function(a){var b=a.interaction,c=a.options,d=b.prepared.edges;if(d){a.options={relativePoints:[{x:d.left?0:1,y:d.top?0:1}],origin:{x:0,y:0},offset:"self",range:c.range};var f=e.setOffset(a);return a.options=c,f}},set:function(a){var b=a.interaction,c=a.options,d=a.offset,f=a.modifiedCoords,g=h.extend({},f),i=g.x-d[0].x,j=g.y-d[0].y;a.options=h.extend({},c),a.options.targets=[];for(var k=0;k<(c.targets||[]).length;k++){var l;l=(c.targets||[])[k];var m=l,n=void 0;n=h.is.function(m)?m(i,j,b):m,n&&("width"in n&&"height"in n&&(n.x=n.width,n.y=n.height),a.options.targets.push(n))}e.set(a)},modifyCoords:function(a){var b=a.options;a.options=h.extend({},b),a.options.enabled=b.enabled,a.options.relativePoints=[null],e.modifyCoords(a)}};d.snapSize=i,d.names.push("snapSize"),f.perAction.snapSize=i.defaults,g.defaults.snapSize=i.defaults,b.exports=i},{"../actions/resize":10,"../defaultOptions":18,"../utils/":44,"./base":23,"./snap":27}],29:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=a("../utils/pointerUtils");b.exports=function(){function a(b,c,f,g,h){if(d(this,a),e.pointerExtend(this,f),f!==c&&e.pointerExtend(this,c),this.interaction=h,this.timeStamp=(new Date).getTime(),this.originalEvent=f,this.type=b,this.pointerId=e.getPointerId(c),this.pointerType=e.getPointerType(c),this.target=g,this.currentTarget=null,"tap"===b){var i=h.getPointerIndex(c);this.dt=this.timeStamp-h.downTimes[i];var j=this.timeStamp-h.tapTime;this.double=!!(h.prevTap&&"doubletap"!==h.prevTap.type&&h.prevTap.target===this.target&&j<500)}else"doubletap"===b&&(this.dt=c.timeStamp-h.tapTime)}return a.prototype.subtractOrigin=function(a){var b=a.x,c=a.y;return this.pageX-=b,this.pageY-=c,this.clientX-=b,this.clientY-=c,this},a.prototype.addOrigin=function(a){var b=a.x,c=a.y;return this.pageX+=b,this.pageY+=c,this.clientX+=b,this.clientY+=c,this},a.prototype.preventDefault=function(){this.originalEvent.preventDefault()},a.prototype.stopPropagation=function(){this.propagationStopped=!0},a.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},a}()},{"../utils/pointerUtils":49}],30:[function(a,b,c){"use strict";function d(a){for(var b=a.interaction,c=a.pointer,f=a.event,h=a.eventTarget,j=a.type,l=void 0===j?a.pointerEvent.type:j,m=a.targets,n=void 0===m?e(a):m,o=a.pointerEvent,p=void 0===o?new g(l,c,f,h,b):o,q={interaction:b,pointer:c,event:f,eventTarget:h,targets:n,type:l,pointerEvent:p},r=0;r<n.length;r++){var s=n[r];for(var t in s.props||{})p[t]=s.props[t];var u=i.getOriginXY(s.eventable,s.element);if(p.subtractOrigin(u),p.eventable=s.eventable,p.currentTarget=s.element,s.eventable.fire(p),p.addOrigin(u),p.immediatePropagationStopped||p.propagationStopped&&r+1<n.length&&n[r+1].element!==p.currentTarget)break}if(k.fire("fired",q),"tap"===l){var v=p.double?d({interaction:b,pointer:c,event:f,eventTarget:h,type:"doubletap"}):p;b.prevTap=v,b.tapTime=v.timeStamp}return p}function e(a){var b=a.interaction,c=a.pointer,d=a.event,e=a.eventTarget,f=a.type,g=b.getPointerIndex(c);if("tap"===f&&(b.pointerWasMoved||!b.downTargets[g]||b.downTargets[g]!==e))return[];for(var h=i.getPath(e),j={interaction:b,pointer:c,event:d,eventTarget:e,type:f,path:h,targets:[],element:null},l=0;l<h.length;l++){var m;m=h[l];var n=m;j.element=n,k.fire("collect-targets",j)}return"hold"===f&&(j.targets=j.targets.filter(function(a){return a.eventable.options.holdDuration===b.holdTimers[g].duration})),j.targets}function f(a){return function(b){var c=b.interaction,e=b.pointer,f=b.event,g=b.eventTarget;d({interaction:c,eventTarget:g,pointer:e,event:f,type:a})}}var g=a("./PointerEvent"),h=a("../Interaction"),i=a("../utils"),j=a("../defaultOptions"),k=a("../utils/Signals").new(),l=["down","up","cancel"],m=["down","up","cancel"],n={PointerEvent:g,fire:d,collectEventTargets:e,signals:k,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:["down","move","up","cancel","tap","doubletap","hold"]};h.signals.on("update-pointer-down",function(a){var b=a.interaction,c=a.pointerIndex;b.holdTimers[c]={duration:1/0,timeout:null}}),h.signals.on("remove-pointer",function(a){var b=a.interaction,c=a.pointerIndex;b.holdTimers.splice(c,1)}),h.signals.on("move",function(a){var b=a.interaction,c=a.pointer,e=a.event,f=a.eventTarget,g=a.duplicateMove,h=b.getPointerIndex(c);g||b.pointerIsDown&&!b.pointerWasMoved||(b.pointerIsDown&&clearTimeout(b.holdTimers[h].timeout),d({interaction:b,pointer:c,event:e,eventTarget:f,type:"move"}))}),h.signals.on("down",function(a){for(var b=a.interaction,c=a.pointer,e=a.event,f=a.eventTarget,g=a.pointerIndex,h=b.holdTimers[g],j=i.getPath(f),l={interaction:b,pointer:c,event:e,eventTarget:f,type:"hold",targets:[],path:j,element:null},m=0;m<j.length;m++){var n;n=j[m];var o=n;l.element=o,k.fire("collect-targets",l)}if(l.targets.length){for(var p=1/0,q=0;q<l.targets.length;q++){var r;r=l.targets[q];var s=r,t=s.eventable.options.holdDuration;t<p&&(p=t)}h.duration=p,h.timeout=setTimeout(function(){d({interaction:b,eventTarget:f,pointer:c,event:e,type:"hold"})},p)}}),h.signals.on("up",function(a){var b=a.interaction,c=a.pointer,e=a.event,f=a.eventTarget;b.pointerWasMoved||d({interaction:b,eventTarget:f,pointer:c,event:e,type:"tap"})});for(var o=["up","cancel"],p=0;p<o.length;p++){var q=o[p];h.signals.on(q,function(a){var b=a.interaction,c=a.pointerIndex;b.holdTimers[c]&&clearTimeout(b.holdTimers[c].timeout)})}for(var r=0;r<l.length;r++)h.signals.on(l[r],f(m[r]));h.signals.on("new",function(a){a.prevTap=null,a.tapTime=0,a.holdTimers=[]}),j.pointerEvents=n.defaults,b.exports=n},{"../Interaction":5,"../defaultOptions":18,"../utils":44,"../utils/Signals":34,"./PointerEvent":29}],31:[function(a,b,c){"use strict";function d(a){var b=a.pointerEvent;"hold"===b.type&&(b.count=(b.count||0)+1)}function e(a){var b=a.interaction,c=a.pointerEvent,d=a.eventTarget,e=a.targets;if("hold"===c.type&&e.length){var f=e[0].eventable.options.holdRepeatInterval;f<=0||(b.holdIntervalHandle=setTimeout(function(){g.fire({interaction:b,eventTarget:d,type:"hold",pointer:c,event:c})},f))}}function f(a){var b=a.interaction;b.holdIntervalHandle&&(clearInterval(b.holdIntervalHandle),b.holdIntervalHandle=null)}var g=a("./base"),h=a("../Interaction");g.signals.on("new",d),g.signals.on("fired",e);for(var i=["move","up","cancel","endall"],j=0;j<i.length;j++){var k=i[j];h.signals.on(k,f)}g.defaults.holdRepeatInterval=0,g.types.push("holdrepeat"),b.exports={onNew:d,onFired:e,endHoldRepeat:f}},{"../Interaction":5,"./base":30}],32:[function(a,b,c){"use strict";var d=a("./base"),e=a("../Interactable"),f=a("../utils/is"),g=a("../scope"),h=a("../utils/extend"),i=a("../utils/arr"),j=i.merge;d.signals.on("collect-targets",function(a){var b=a.targets,c=a.element,d=a.type,e=a.eventTarget;g.interactables.forEachMatch(c,function(a){var g=a.events,h=g.options;g[d]&&f.element(c)&&a.testIgnoreAllow(h,c,e)&&b.push({element:c,eventable:g,props:{interactable:a}})})}),e.signals.on("new",function(a){var b=a.interactable;b.events.getRect=function(a){return b.getRect(a)}}),e.signals.on("set",function(a){var b=a.interactable,c=a.options;h(b.events.options,d.defaults),h(b.events.options,c)}),j(e.eventTypes,d.types),e.prototype.pointerEvents=function(a){return h(this.events.options,a),this};var k=e.prototype._backCompatOption;e.prototype._backCompatOption=function(a,b){var c=k.call(this,a,b);return c===this&&(this.events.options[a]=b),c},e.settingsMethods.push("pointerEvents")},{"../Interactable":4,"../scope":33,"../utils/arr":35,"../utils/extend":41,"../utils/is":46,"./base":30}],33:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./utils/events"),f=a("./utils/Signals").new(),g=a("./utils/window"),h=g.getWindow,i={signals:f,events:e,utils:d,document:a("./utils/domObjects").document,documents:[],addDocument:function(a,b){return!d.contains(i.documents,a)&&(b=b||h(a),i.documents.push(a),e.documents.push(a),a!==i.document&&e.add(b,"unload",i.onWindowUnload),void f.fire("add-document",{doc:a,win:b}))},removeDocument:function(a,b){var c=i.documents.indexOf(a);b=b||h(a),e.remove(b,"unload",i.onWindowUnload),i.documents.splice(c,1),e.documents.splice(c,1),f.fire("remove-document",{win:b,doc:a})},onWindowUnload:function(){i.removeDocument(this.document,this)}};b.exports=i},{"./utils":44,"./utils/Signals":34,"./utils/domObjects":38,"./utils/events":40,"./utils/window":52}],34:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(){d(this,a),this.listeners={}}return a.prototype.on=function(a,b){return this.listeners[a]?void this.listeners[a].push(b):void(this.listeners[a]=[b])},a.prototype.off=function(a,b){if(this.listeners[a]){var c=this.listeners[a].indexOf(b);c!==-1&&this.listeners[a].splice(c,1)}},a.prototype.fire=function(a,b){var c=this.listeners[a];if(c)for(var d=0;d<c.length;d++){var e;e=c[d];var f=e;if(f(b,a)===!1)return}},a}();e.new=function(){return new e},b.exports=e},{}],35:[function(a,b,c){"use strict";function d(a,b){return a.indexOf(b)!==-1}function e(a,b){for(var c=0;c<b.length;c++){var d;d=b[c];var e=d;a.push(e)}return a}b.exports={contains:d,merge:e}},{}],36:[function(a,b,c){"use strict";var d=a("./window"),e=d.window,f=a("./is"),g=a("./domObjects"),h=g.Element,i=e.navigator,j={supportsTouch:!!("ontouchstart"in e||f.function(e.DocumentTouch)&&g.document instanceof e.DocumentTouch),supportsPointerEvent:!!g.PointerEvent,isIOS:/iP(hone|od|ad)/.test(i.platform),isIOS7:/iP(hone|od|ad)/.test(i.platform)&&/OS 7[^\d]/.test(i.appVersion),isIe9:/MSIE 9/.test(i.userAgent),prefixedMatchesSelector:"matches"in h.prototype?"matches":"webkitMatchesSelector"in h.prototype?"webkitMatchesSelector":"mozMatchesSelector"in h.prototype?"mozMatchesSelector":"oMatchesSelector"in h.prototype?"oMatchesSelector":"msMatchesSelector",pEventTypes:g.PointerEvent?g.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,wheelEvent:"onmousewheel"in g.document?"mousewheel":"wheel"};j.isOperaMobile="Opera"===i.appName&&j.supportsTouch&&i.userAgent.match("Presto"),b.exports=j},{"./domObjects":38,"./is":46,"./window":52}],37:[function(a,b,c){"use strict";var d=a("./is");b.exports=function a(b){var c={};for(var e in b)d.plainObject(b[e])?c[e]=a(b[e]):c[e]=b[e];return c}},{"./is":46}],38:[function(a,b,c){"use strict";function d(){}var e={},f=a("./window").window;e.document=f.document,
e.DocumentFragment=f.DocumentFragment||d,e.SVGElement=f.SVGElement||d,e.SVGSVGElement=f.SVGSVGElement||d,e.SVGElementInstance=f.SVGElementInstance||d,e.Element=f.Element||d,e.HTMLElement=f.HTMLElement||e.Element,e.Event=f.Event,e.Touch=f.Touch||d,e.PointerEvent=f.PointerEvent||f.MSPointerEvent,b.exports=e},{"./window":52}],39:[function(a,b,c){"use strict";var d=a("./window"),e=a("./browser"),f=a("./is"),g=a("./domObjects"),h={nodeContains:function(a,b){for(;b;){if(b===a)return!0;b=b.parentNode}return!1},closest:function(a,b){for(;f.element(a);){if(h.matchesSelector(a,b))return a;a=h.parentNode(a)}return null},parentNode:function(a){var b=a.parentNode;if(f.docFrag(b)){for(;(b=b.host)&&f.docFrag(b););return b}return b},matchesSelector:function(a,b){return d.window!==d.realWindow&&(b=b.replace(/\/deep\//g," ")),a[e.prefixedMatchesSelector](b)},indexOfDeepestElement:function(a){var b=[],c=[],d=void 0,e=a[0],f=e?0:-1,h=void 0,i=void 0,j=void 0,k=void 0;for(j=1;j<a.length;j++)if(d=a[j],d&&d!==e)if(e){if(d.parentNode!==d.ownerDocument)if(e.parentNode!==d.ownerDocument){if(!b.length)for(h=e;h.parentNode&&h.parentNode!==h.ownerDocument;)b.unshift(h),h=h.parentNode;if(e instanceof g.HTMLElement&&d instanceof g.SVGElement&&!(d instanceof g.SVGSVGElement)){if(d===e.parentNode)continue;h=d.ownerSVGElement}else h=d;for(c=[];h.parentNode!==h.ownerDocument;)c.unshift(h),h=h.parentNode;for(k=0;c[k]&&c[k]===b[k];)k++;var l=[c[k-1],c[k],b[k]];for(i=l[0].lastChild;i;){if(i===l[1]){e=d,f=j,b=[];break}if(i===l[2])break;i=i.previousSibling}}else e=d,f=j}else e=d,f=j;return f},matchesUpTo:function(a,b,c){for(;f.element(a);){if(h.matchesSelector(a,b))return!0;if(a=h.parentNode(a),a===c)return h.matchesSelector(a,b)}return!1},getActualElement:function(a){return a instanceof g.SVGElementInstance?a.correspondingUseElement:a},getScrollXY:function(a){return a=a||d.window,{x:a.scrollX||a.document.documentElement.scrollLeft,y:a.scrollY||a.document.documentElement.scrollTop}},getElementClientRect:function(a){var b=a instanceof g.SVGElement?a.getBoundingClientRect():a.getClientRects()[0];return b&&{left:b.left,right:b.right,top:b.top,bottom:b.bottom,width:b.width||b.right-b.left,height:b.height||b.bottom-b.top}},getElementRect:function(a){var b=h.getElementClientRect(a);if(!e.isIOS7&&b){var c=h.getScrollXY(d.getWindow(a));b.left+=c.x,b.right+=c.x,b.top+=c.y,b.bottom+=c.y}return b},getPath:function(a){for(var b=[];a;)b.push(a),a=h.parentNode(a);return b},trySelector:function(a){return!!f.string(a)&&(g.document.querySelector(a),!0)}};b.exports=h},{"./browser":36,"./domObjects":38,"./is":46,"./window":52}],40:[function(a,b,c){"use strict";function d(a,b,c,d){var e=k(d),f=t.indexOf(a),g=u[f];g||(g={events:{},typeCount:0},f=t.push(a)-1,u.push(g)),g.events[b]||(g.events[b]=[],g.typeCount++),s(g.events[b],c)||(a.addEventListener(b,c,x?e:!!e.capture),g.events[b].push(c))}function e(a,b,c,d){var f=k(d),g=t.indexOf(a),h=u[g];if(h&&h.events)if("all"!==b){if(h.events[b]){var i=h.events[b].length;if("all"===c){for(var j=0;j<i;j++)e(a,b,h.events[b][j],f);return}for(var l=0;l<i;l++)if(h.events[b][l]===c){a.removeEventListener("on"+b,c,x?f:!!f.capture),h.events[b].splice(l,1);break}h.events[b]&&0===h.events[b].length&&(h.events[b]=null,h.typeCount--)}h.typeCount||(u.splice(g,1),t.splice(g,1))}else for(b in h.events)h.events.hasOwnProperty(b)&&e(a,b,"all")}function f(a,b,c,e,f){var g=k(f);if(!v[c]){v[c]={selectors:[],contexts:[],listeners:[]};for(var j=0;j<w.length;j++){var l=w[j];d(l,c,h),d(l,c,i,!0)}}var m=v[c],n=void 0;for(n=m.selectors.length-1;n>=0&&(m.selectors[n]!==a||m.contexts[n]!==b);n--);n===-1&&(n=m.selectors.length,m.selectors.push(a),m.contexts.push(b),m.listeners.push([])),m.listeners[n].push([e,!!g.capture,g.passive])}function g(a,b,c,d,f){var g=k(f),j=v[c],l=!1,m=void 0;if(j)for(m=j.selectors.length-1;m>=0;m--)if(j.selectors[m]===a&&j.contexts[m]===b){for(var n=j.listeners[m],o=n.length-1;o>=0;o--){var p=n[o],q=p[0],r=p[1],s=p[2];if(q===d&&r===!!g.capture&&s===g.passive){n.splice(o,1),n.length||(j.selectors.splice(m,1),j.contexts.splice(m,1),j.listeners.splice(m,1),e(b,c,h),e(b,c,i,!0),j.selectors.length||(v[c]=null)),l=!0;break}}if(l)break}}function h(a,b){var c=k(b),d={},e=v[a.type],f=n.getEventTargets(a),g=f[0],h=g;for(o(d,a),d.originalEvent=a,d.preventDefault=j;l.element(h);){for(var i=0;i<e.selectors.length;i++){var p=e.selectors[i],q=e.contexts[i];if(m.matchesSelector(h,p)&&m.nodeContains(q,g)&&m.nodeContains(q,h)){var r=e.listeners[i];d.currentTarget=h;for(var s=0;s<r.length;s++){var t=r[s],u=t[0],w=t[1],x=t[2];w===!!c.capture&&x===c.passive&&u(d)}}}h=m.parentNode(h)}}function i(a){return h.call(this,a,!0)}function j(){this.originalEvent.preventDefault()}function k(a){return l.object(a)?a:{capture:a}}var l=a("./is"),m=a("./domUtils"),n=a("./pointerUtils"),o=a("./pointerExtend"),p=a("./window"),q=p.window,r=a("./arr"),s=r.contains,t=[],u=[],v={},w=[],x=function(){var a=!1;return q.document.createElement("div").addEventListener("test",null,{get capture(){a=!0}}),a}();b.exports={add:d,remove:e,addDelegate:f,removeDelegate:g,delegateListener:h,delegateUseCapture:i,delegatedEvents:v,documents:w,supportsOptions:x,_elements:t,_targets:u}},{"./arr":35,"./domUtils":39,"./is":46,"./pointerExtend":48,"./pointerUtils":49,"./window":52}],41:[function(a,b,c){"use strict";b.exports=function(a,b){for(var c in b)a[c]=b[c];return a}},{}],42:[function(a,b,c){"use strict";var d=a("./rect"),e=d.resolveRectLike,f=d.rectToXY;b.exports=function(a,b,c){var d=a.options[c],g=d&&d.origin,h=g||a.options.origin,i=e(h,a,b,[a&&b]);return f(i)||{x:0,y:0}}},{"./rect":51}],43:[function(a,b,c){"use strict";b.exports=function(a,b){return Math.sqrt(a*a+b*b)}},{}],44:[function(a,b,c){"use strict";var d=a("./extend"),e=a("./window"),f={warnOnce:function(a,b){var c=!1;return function(){return c||(e.window.console.warn(b),c=!0),a.apply(this,arguments)}},_getQBezierValue:function(a,b,c,d){var e=1-a;return e*e*b+2*e*a*c+a*a*d},getQuadraticCurvePoint:function(a,b,c,d,e,g,h){return{x:f._getQBezierValue(h,a,c,e),y:f._getQBezierValue(h,b,d,g)}},easeOutQuad:function(a,b,c,d){return a/=d,-c*a*(a-2)+b},copyAction:function(a,b){return a.name=b.name,a.axis=b.axis,a.edges=b.edges,a},is:a("./is"),extend:d,hypot:a("./hypot"),getOriginXY:a("./getOriginXY")};d(f,a("./arr")),d(f,a("./domUtils")),d(f,a("./pointerUtils")),d(f,a("./rect")),b.exports=f},{"./arr":35,"./domUtils":39,"./extend":41,"./getOriginXY":42,"./hypot":43,"./is":46,"./pointerUtils":49,"./rect":51,"./window":52}],45:[function(a,b,c){"use strict";var d=a("../scope"),e=a("./index"),f={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(a,b,c){for(var d=e.getPointerType(a),g=e.getPointerId(a),h={pointer:a,pointerId:g,pointerType:d,eventType:b,eventTarget:c},i=0;i<f.methodOrder.length;i++){var j;j=f.methodOrder[i];var k=j,l=f[k](h);if(l)return l}},simulationResume:function(a){var b=a.pointerType,c=a.eventType,f=a.eventTarget;if(!/down|start/i.test(c))return null;for(var g=0;g<d.interactions.length;g++){var h;h=d.interactions[g];var i=h,j=f;if(i.simulation&&i.simulation.allowResume&&i.pointerType===b)for(;j;){if(j===i.element)return i;j=e.parentNode(j)}}return null},mouseOrPen:function(a){var b=a.pointerId,c=a.pointerType,f=a.eventType;if("mouse"!==c&&"pen"!==c)return null;for(var g=void 0,h=0;h<d.interactions.length;h++){var i;i=d.interactions[h];var j=i;if(j.pointerType===c){if(j.simulation&&!e.contains(j.pointerIds,b))continue;if(j.interacting())return j;g||(g=j)}}if(g)return g;for(var k=0;k<d.interactions.length;k++){var l;l=d.interactions[k];var m=l;if(!(m.pointerType!==c||/down/i.test(f)&&m.simulation))return m}return null},hasPointer:function(a){for(var b=a.pointerId,c=0;c<d.interactions.length;c++){var f;f=d.interactions[c];var g=f;if(e.contains(g.pointerIds,b))return g}},idle:function(a){for(var b=a.pointerType,c=0;c<d.interactions.length;c++){var e;e=d.interactions[c];var f=e;if(1===f.pointerIds.length){var g=f.target;if(g&&!g.options.gesture.enabled)continue}else if(f.pointerIds.length>=2)continue;if(!f.interacting()&&b===f.pointerType)return f}return null}};b.exports=f},{"../scope":33,"./index":44}],46:[function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=a("./window"),f=a("./isWindow"),g={array:function(){},window:function(a){return a===e.window||f(a)},docFrag:function(a){return g.object(a)&&11===a.nodeType},object:function(a){return!!a&&"object"===("undefined"==typeof a?"undefined":d(a))},function:function(a){return"function"==typeof a},number:function(a){return"number"==typeof a},bool:function(a){return"boolean"==typeof a},string:function(a){return"string"==typeof a},element:function(a){if(!a||"object"!==("undefined"==typeof a?"undefined":d(a)))return!1;var b=e.getWindow(a)||e.window;return/object|function/.test(d(b.Element))?a instanceof b.Element:1===a.nodeType&&"string"==typeof a.nodeName},plainObject:function(a){return g.object(a)&&"Object"===a.constructor.name}};g.array=function(a){return g.object(a)&&"undefined"!=typeof a.length&&g.function(a.splice)},b.exports=g},{"./isWindow":47,"./window":52}],47:[function(a,b,c){"use strict";b.exports=function(a){return!(!a||!a.Window)&&a instanceof a.Window}},{}],48:[function(a,b,c){"use strict";function d(a,c){for(var d in c){var e=b.exports.prefixedPropREs,f=!1;for(var g in e)if(0===d.indexOf(g)&&e[g].test(d)){f=!0;break}f||"function"==typeof c[d]||(a[d]=c[d])}return a}d.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/},b.exports=d},{}],49:[function(a,b,c){"use strict";var d=a("./hypot"),e=a("./browser"),f=a("./domObjects"),g=a("./domUtils"),h=a("./domObjects"),i=a("./is"),j=a("./pointerExtend"),k={copyCoords:function(a,b){a.page=a.page||{},a.page.x=b.page.x,a.page.y=b.page.y,a.client=a.client||{},a.client.x=b.client.x,a.client.y=b.client.y,a.timeStamp=b.timeStamp},setCoordDeltas:function(a,b,c){a.page.x=c.page.x-b.page.x,a.page.y=c.page.y-b.page.y,a.client.x=c.client.x-b.client.x,a.client.y=c.client.y-b.client.y,a.timeStamp=c.timeStamp-b.timeStamp;var e=Math.max(a.timeStamp/1e3,.001);a.page.speed=d(a.page.x,a.page.y)/e,a.page.vx=a.page.x/e,a.page.vy=a.page.y/e,a.client.speed=d(a.client.x,a.page.y)/e,a.client.vx=a.client.x/e,a.client.vy=a.client.y/e},isNativePointer:function(a){return a instanceof f.Event||a instanceof f.Touch},getXY:function(a,b,c){return c=c||{},a=a||"page",c.x=b[a+"X"],c.y=b[a+"Y"],c},getPageXY:function(a,b){return b=b||{},e.isOperaMobile&&k.isNativePointer(a)?(k.getXY("screen",a,b),b.x+=window.scrollX,b.y+=window.scrollY):k.getXY("page",a,b),b},getClientXY:function(a,b){return b=b||{},e.isOperaMobile&&k.isNativePointer(a)?k.getXY("screen",a,b):k.getXY("client",a,b),b},getPointerId:function(a){return i.number(a.pointerId)?a.pointerId:a.identifier},setCoords:function(a,b,c){var d=b.length>1?k.pointerAverage(b):b[0],e={};k.getPageXY(d,e),a.page.x=e.x,a.page.y=e.y,k.getClientXY(d,e),a.client.x=e.x,a.client.y=e.y,a.timeStamp=i.number(c)?c:(new Date).getTime()},pointerExtend:j,getTouchPair:function(a){var b=[];return i.array(a)?(b[0]=a[0],b[1]=a[1]):"touchend"===a.type?1===a.touches.length?(b[0]=a.touches[0],b[1]=a.changedTouches[0]):0===a.touches.length&&(b[0]=a.changedTouches[0],b[1]=a.changedTouches[1]):(b[0]=a.touches[0],b[1]=a.touches[1]),b},pointerAverage:function(a){for(var b={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},c=0;c<a.length;c++){var d;d=a[c];var e=d;for(var f in b)b[f]+=e[f]}for(var g in b)b[g]/=a.length;return b},touchBBox:function(a){if(a.length||a.touches&&a.touches.length>1){var b=k.getTouchPair(a),c=Math.min(b[0].pageX,b[1].pageX),d=Math.min(b[0].pageY,b[1].pageY),e=Math.max(b[0].pageX,b[1].pageX),f=Math.max(b[0].pageY,b[1].pageY);return{x:c,y:d,left:c,top:d,width:e-c,height:f-d}}},touchDistance:function(a,b){var c=b+"X",e=b+"Y",f=k.getTouchPair(a),g=f[0][c]-f[1][c],h=f[0][e]-f[1][e];return d(g,h)},touchAngle:function(a,b,c){var d=c+"X",e=c+"Y",f=k.getTouchPair(a),g=f[1][d]-f[0][d],h=f[1][e]-f[0][e],i=180*Math.atan2(h,g)/Math.PI;return i},getPointerType:function(a){return i.string(a.pointerType)?a.pointerType:i.number(a.pointerType)?[void 0,void 0,"touch","pen","mouse"][a.pointerType]:/touch/.test(a.type)||a instanceof h.Touch?"touch":"mouse"},getEventTargets:function(a){var b=i.function(a.composedPath)?a.composedPath():a.path;return[g.getActualElement(b?b[0]:a.target),g.getActualElement(a.currentTarget)]}};b.exports=k},{"./browser":36,"./domObjects":38,"./domUtils":39,"./hypot":43,"./is":46,"./pointerExtend":48}],50:[function(a,b,c){"use strict";for(var d=a("./window"),e=d.window,f=["ms","moz","webkit","o"],g=0,h=void 0,i=void 0,j=0;j<f.length&&!e.requestAnimationFrame;j++)h=e[f[j]+"RequestAnimationFrame"],i=e[f[j]+"CancelAnimationFrame"]||e[f[j]+"CancelRequestAnimationFrame"];h||(h=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-g)),d=setTimeout(function(){a(b+c)},c);return g=b+c,d}),i||(i=function(a){clearTimeout(a)}),b.exports={request:h,cancel:i}},{"./window":52}],51:[function(a,b,c){"use strict";var d=a("./extend"),e=a("./is"),f=a("./domUtils"),g=f.closest,h=f.parentNode,i=f.getElementRect,j={getStringOptionResult:function(a,b,c){return e.string(a)?a="parent"===a?h(c):"self"===a?b.getRect(c):g(c,a):null},resolveRectLike:function(a,b,c,d){return a=j.getStringOptionResult(a,b,c)||a,e.function(a)&&(a=a.apply(null,d)),e.element(a)&&(a=i(a)),a},rectToXY:function(a){return a&&{x:"x"in a?a.x:a.left,y:"y"in a?a.y:a.top}},xywhToTlbr:function(a){return!a||"left"in a&&"top"in a||(a=d({},a),a.left=a.x||0,a.top=a.y||0,a.right=a.right||a.left+a.width,a.bottom=a.bottom||a.top+a.height),a},tlbrToXywh:function(a){return!a||"x"in a&&"y"in a||(a=d({},a),a.x=a.left||0,a.top=a.top||0,a.width=a.width||a.right-a.x,a.height=a.height||a.bottom-a.y),a}};b.exports=j},{"./domUtils":39,"./extend":41,"./is":46}],52:[function(a,b,c){"use strict";function d(a){e.realWindow=a;var b=a.document.createTextNode("");b.ownerDocument!==a.document&&"function"==typeof a.wrap&&a.wrap(b)===b&&(a=a.wrap(a)),e.window=a}var e=b.exports,f=a("./isWindow");"undefined"==typeof window?(e.window=void 0,e.realWindow=void 0):d(window),e.getWindow=function(a){if(f(a))return a;var b=a.ownerDocument||a;return b.defaultView||b.parentWindow||e.window},e.init=d},{"./isWindow":47}]},{},[1])(1)});